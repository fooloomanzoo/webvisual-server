<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(b){this.selection.slice().forEach(function(c){(!b||0>b.indexOf(c))&&this.setItemSelected(c,!1)},this)},isSelected:function(b){return 0<=this.selection.indexOf(b)},setItemSelected:function(b,c){if(null!=b&&c!==this.isSelected(b)){if(c)this.selection.push(b);else{var d=this.selection.indexOf(b);0<=d&&this.selection.splice(d,1)}this.selectCallback&&this.selectCallback(b,c)}},select:function(b){this.multi?this.toggle(b):this.get()!==b&&(this.setItemSelected(this.get(),!1),this.setItemSelected(b,!0))},toggle:function(b){this.setItemSelected(b,!this.isSelected(b))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(b){return this.items.indexOf(b)},select:function(b){this.selected=b},selectPrevious:function(){var b=this.items.length,c=(+this._valueToIndex(this.selected)-1+b)%b;this.selected=this._indexToValue(c)},selectNext:function(){var b=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(b)},selectIndex:function(b){this.select(this._indexToValue(b))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(b){this.listen(this,b,'_activateHandler')},_removeListener:function(b){this.unlisten(this,b,'_activateHandler')},_activateEventChanged:function(b,c){this._removeListener(c),this._addListener(b)},_updateItems:function(){var b=Polymer.dom(this).queryDistributedElements(this.selectable||'*');b=Array.prototype.filter.call(b,this._bindFilterItem),this._setItems(b)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var c=this._valueToItem(this.selected);c?this._selection.select(c):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(b){return!this._excludedLocalNames[b.localName]},_valueToItem:function(b){return null==b?null:this.items[this._valueToIndex(b)]},_valueToIndex:function(b){if(this.attrForSelected){for(var d,c=0;d=this.items[c];c++)if(this._valueForItem(d)==b)return c;}else return+b},_indexToValue:function(b){if(this.attrForSelected){var c=this.items[b];if(c)return this._valueForItem(c)}else return b},_valueForItem:function(b){if(!b)return null;var c=b[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?b.getAttribute(this.attrForSelected):c},_applySelection:function(b,c){this.selectedClass&&this.toggleClass(this.selectedClass,c,b),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,c,b),this._selectionChange(),this.fire('iron-'+(c?'select':'deselect'),{item:b})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(b){return Polymer.dom(b).observeNodes(function(c){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',c,{bubbles:!1,cancelable:!1})})},_activateHandler:function(b){for(var f,c=b.target,d=this.items;c&&c!=this;){if(f=d.indexOf(c),0<=f){var g=this._indexToValue(f);return void this._itemActivate(g,c)}c=c.parentNode}},_itemActivate:function(b,c){this.fire('iron-activate',{selected:b,item:c},{cancelable:!0}).defaultPrevented||this.select(b)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(b){this.multi?this._toggleSelected(b):this.selected=b},multiChanged:function(b){this._selection.multi=b,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(b){return this._indexToValue(this.indexOf(b))},this).filter(function(b){return null!=b},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(b){b=b||[];var c=(this._valuesToItems(b)||[]).filter(function(f){return null!==f&&f!==void 0});this._selection.clear(c);for(var d=0;d<c.length;d++)this._selection.setItemSelected(c[d],!0);if(this.fallbackSelection&&!this._selection.get().length){var e=this._valueToItem(this.fallbackSelection);e&&this.select(this.fallbackSelection)}},_selectionChange:function(){var b=this._selection.get();this.multi?(this._setSelectedItems(b),this._setSelectedItem(b.length?b[0]:null)):null!==b&&b!==void 0?(this._setSelectedItems([b]),this._setSelectedItem(b)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(b){var c=this.selectedValues.indexOf(b);0>c?this.push('selectedValues',b):this.splice('selectedValues',c,1)},_valuesToItems:function(b){return null==b?null:b.map(function(c){return this._valueToItem(c)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var b=this.query;b&&(!this.full&&'('!==b[0]&&(b='('+b+')'),this._mq=window.matchMedia(b),this._add(),this.queryHandler(this._mq))},queryHandler:function(b){this._setQueryMatches(b.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>var TabsOverlay=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._lastTarget=void 0,c._transitionsInFlight=[],c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tabs-overlay'}},{key:'properties',get:function(){return{target:{type:Object,observer:'_targetChanged'}}}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('transitionend',function(f){return d._onTransitionend(f)})}},{key:'_targetChanged',value:function(d,f){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(f,d),this._lastTarget=this.target)}},{key:'_onTransitionend',value:function(d){var f=this._transitionsInFlight.indexOf(d.propertyName);0<=f&&this._transitionsInFlight.splice(f,1),this._transitionsInFlight.length||this._moveComplete()}},{key:'_moveComplete',value:function(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}},{key:'_move',value:function(d,f){var g=this,h=d||f,j=f||d;if(h||j){var k=d?1:0,l=f?1:0;Polymer.dom.flush();var m=this.getBoundingClientRect(),n=window.getComputedStyle(this),o=h.getBoundingClientRect(),p=j.getBoundingClientRect();if(0===p.top&&0===p.right&&0===p.bottom&&0===p.left&&0===p.width&&0===p.height)return this.style.transitionProperty='none',this.style.opacity=l,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';var q=parseFloat(n.top||'0')+(o.top-m.top),r=parseFloat(n.right||'0')-(o.right-m.right),s=parseFloat(n.bottom||'0')-(o.bottom-m.bottom),t=parseFloat(n.left||'0')+(o.left-m.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';var u=[this.style.top=q+'px',this.style.right=r+'px',this.style.bottom=s+'px',this.style.left=t+'px',this.style.opacity=k+''];q+=p.top-o.top,r-=p.right-o.right,s-=p.bottom-o.bottom,t+=p.left-o.left;var v=[0.2,0.2,0.2,0.2,0.2],w=[0,0,0,0,0];o.left<p.left&&o.right<p.right?w[3]=0.1:o.left>p.left&&o.right>p.right&&(w[1]=0.1),o.top<p.top&&o.bottom<p.bottom?w[0]=0.1:o.top>p.top&&o.bottom>p.bottom&&(w[2]=0.1);for(var y=[q+'px',r+'px',s+'px',t+'px',l+''],z=['top','right','bottom','left','opacity'],A=0;A<u.length;A++)u[A]!==y[A]&&(0===v[A]&&0===w[A]||this._transitionsInFlight.push(z[A]));requestAnimationFrame(function(){g.style.transitionDuration=v.map(function(B){return B+'s'}).join(', '),g.style.transitionDelay=w.map(function(B){return B+'s'}).join(', '),g.style.top=q+'px',g.style.right=r+'px',g.style.bottom=s+'px',g.style.left=t+'px',g.style.opacity=l+''})}}}]),b}(Polymer.Element);customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>var TabsContainer=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addScrollListeners()}},{key:'_addScrollListeners',value:function(){var d=this;this.$.container.addEventListener('scroll',function(f){return d._onScroll(f)},{passive:!0}),this.$.container.addEventListener('wheel',function(f){return d._onWheel(f)},{passive:!0})}},{key:'_onSelectedItemChanged',value:function(d){var f=this;d&&(!this.multi&&(this.$.overlay.target=d),requestAnimationFrame(function(){f.vertical?f.$.container.scrollTop=d.offsetTop-f.$.container.offsetTop-f.$.container.clientHeight/2+d.clientHeight/2:f.$.container.scrollLeft=d.offsetLeft-f.$.container.offsetLeft-f.$.container.clientWidth/2+d.clientWidth/2}))}},{key:'_onWheel',value:function(d){if(d){var f,g;switch(d.deltaMode){case 0:g=0.2;break;case 1:g=20;break;case 2:g=this.$.container.offsetHeight;break;default:g=1;}this.vertical?(f=d.deltaY||0,this.$.container.scrollTop+=f*g):(f=d.deltaX||0,this.$.container.scrollLeft+=f*g)}}},{key:'_onScroll',value:function(d,f){d.stopImmediatePropagation();var g;this.vertical?(g=f&&-f.ddy||0,this.$.container.scrollTop+=g):(g=f&&-f.ddx||0,this.$.container.scrollLeft+=g)}},{key:'reset',value:function(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}],[{key:'is',get:function(){return'tabs-container'}},{key:'properties',get:function(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_onSelectedItemChanged(selectedItem)']}}]),b}(Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element));customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(b){Polymer.IronButtonStateImpl._downHandler.call(this,b),this.pressed&&this.ensureRipple(b)},ensureRipple:function(b){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var c=this._rippleContainer||this.root;if(c&&Polymer.dom(c).appendChild(this._ripple),b){var d=Polymer.dom(this._rippleContainer||this),e=Polymer.dom(b).rootTarget;d.deepContains(e)&&this._ripple.uiDownAction(b)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(b){this.hasRipple()&&(this._ripple.noink=b)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>var RippleContainer=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isDown=!1,c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'ripple-container'}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('focus',function(f){return d._onFocus(f)},!0),this.addEventListener('blur',function(f){return d._onBlur(f)},!0),this.addEventListener('down',function(f){return d._rippleDown(f)}),this.addEventListener('up',function(f){return d._rippleUp(f)})}},{key:'_onFocus',value:function(d){this._isDown||this._rippleDown(d)}},{key:'_onBlur',value:function(d){this._rippleUp(d)}},{key:'_rippleDown',value:function(d){this._isDown=!0,this.getRipple().downAction(d)}},{key:'_rippleUp',value:function(d){this._isDown=!1,this.getRipple().upAction(d)}}]),b}(Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element));customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>var TabElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tab-element'}}]),b}(Polymer.Element);customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ãœ" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>var LogoElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addListners()}},{key:'_addListners',value:function(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}},{key:'_addClass',value:function(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.add('animated')})}.bind(this))}},{key:'_removeClass',value:function(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.remove('animated')})}.bind(this))}}],[{key:'is',get:function(){return'logo-element'}},{key:'properties',get:function(){return{href:{type:String}}}}]),b}(Polymer.Element);customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>var ToggleButton=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.Gestures.addListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.addListener(this,'track',function(f){return d._ontrack(f)})}},{key:'disconnectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),Polymer.Gestures.removeListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.removeListener(this,'track',function(f){return d._ontrack(f)})}},{key:'_ontrack',value:function(d){var f=d.detail;'start'===f.state?this._trackStart(f):'track'===f.state?this._trackMove(f):'end'===f.state&&this._trackEnd(f)}},{key:'_trackStart',value:function(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}},{key:'_trackMove',value:function(d){var f=d.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+f:f)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}},{key:'_trackEnd',value:function(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}},{key:'_onclicked',value:function(){this.checked=!this.checked}}],[{key:'is',get:function(){return'toggle-button'}},{key:'properties',get:function(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}}]),b}(Polymer.Element);customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>var SVGData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_fetchSvgSource',value:function(d){if(d){var e=d.split('/').filter(function(g){return''!==g});if(2===e.length){var f=e[0]+'+'+e[1]+'+svgSource.json';this._fetch(f,'GET','include','json','data').catch(function(g){console.log(g)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}],[{key:'is',get:function(){return'svg-data'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}},{key:'observers',get:function(){return['_fetchSvgSource(room, loggedIn)']}}]),b}(WebvisualMixins.FetchMixin(Polymer.Element));customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>var DeviceSocketData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_connect',value:function(d,e){d&&e?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}},{key:'_createSocketConnection',value:function(d,e){var f=this;d&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(function(){Webvisual.assignStatusNotifications(f),Webvisual.createSocketConnection(d,e),f.socketRoom&&f.connect(f.socketRoom)},0)}},{key:'connect',value:function(d){return d=d||this.socketRoom,d?void('/'===d.substring(0,1)&&(d=d.slice(1,d.length)),Webvisual.setupConnection(d),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}},{key:'disconnect',value:function(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}],[{key:'is',get:function(){return'device-socket-data'}},{key:'properties',get:function(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}},{key:'observers',get:function(){return['_connect(loggedIn, lazyConnect)']}}]),b}(Polymer.Element);customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>var CaptionElement=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.setAttribute('unresolved',''),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-caption'}},{key:'properties',get:function(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}}]),babelHelpers.createClass(b,[{key:'getKey',value:function(d){return this.keys&&this.keys[d]}},{key:'_computeReducedCaptionKeys',value:function(d,e,f,g){var h=Object.keys(e||{});if(0===h.length)return[];var i=[];return!0===g?i=h.filter(function(j){return d!==j}):!0===f&&(i=h.filter(function(j){return d===j})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===i.length?h:i}},{key:'isEmptyCaption',value:function(d){return!this.keys[d]}}]),b}(Polymer.Element);customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return function(d){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return babelHelpers.inherits(e,d),babelHelpers.createClass(e,[{key:'connectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'connectedCallback',this).call(this),this._linkElement(this.item,this.noLink)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'disconnectedCallback',this).call(this),this._unlinkElement(),this.clearValues()}},{key:'_linkElement',value:function(g,h){var j=this;if(g&&g.mount){if(this._olditem){if(g.mount===this._olditem.mount&&!h)return;this._unlinkElement(this._olditem)}return h?void this._unlinkElement(g):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=g,this._initialized&&(this.clearValues(),this.reset()),this.requestValues(null,null,this.viewLength).then(function(k){for(var l in k)if(l===j.item.mount){j.insertValues(k[l]);break}}).catch(function(k){k&&console.log(k)})))}}},{key:'_unlinkElement',value:function(g){var h=this;g=g||this.item||this._olditem,setTimeout(function(){window.Webvisual&&Webvisual.retractElement&&g&&g.mount&&(window.Webvisual.retractElement(h,g),h._olditem=null)},0)}},{key:'getElement',value:function(){return this.properties}},{key:'computeDate',value:function(g){return g?864E5>Math.abs(Date.now()-g)?new Date(g).toLocaleTimeString():new Date(g).toLocaleString():''}},{key:'computeValue',value:function(g,h){return this.item&&this.item.isIndicatorLamp?h?'\u2717':'\u2713':g}},{key:'insertValues',value:function(g,h){var j=this;if(void 0!==g){if(h=h||this.viewLength,this._initialized||(this._initialized=!0),!h)this.item&&!0===this.item.exceedable&&g.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(g)),this.renderInsertedValues(g);else{var k=g.slice(g.length-h,g.length);this.item&&!0===this.item.exceedable&&k.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(k)),this.renderInsertedValues(k),k.length=0}g.length=0}}},{key:'spliceValues',value:function(g){g&&(!0===this.storeInside&&(this.values=this.values.filter(function(h){return-1===g.indexOf(h)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(g))}},{key:'resetValues',value:function(g){this.values=g,this.notifyPath('values'),this.renderInsertedValues(this.values)}},{key:'clearValues',value:function(){this.values=[],this.notifyPath('values')}},{key:'requestValues',value:function(g,h,j){var k=this;if(!(this.item&&this.item.mount))return new Promise(function(m,o){o()});j=j||this.viewLength||1;var l={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:j||1}};return window.Webvisual?new Promise(function(m){window.Webvisual.request(l,m)}):new Promise(function(m,o){k.values?m(k.values.slice(k.values.length-j,k.values.length)):o()})}},{key:'requestRange',value:function(g){var h=this;if(!(this.item&&this.item.mount))return new Promise(function(k){k([void 0,void 0])});var j={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:g}};return!this.storeInside&&window.Webvisual?new Promise(function(k){window.Webvisual.request(j,k)}):new Promise(function(k){if(h.values&&h.values.length){var l=h.min(h.values,g),m=h.max(h.values,g);void 0===l&&void 0===m||k([l,m])}k([void 0,void 0])})}},{key:'min',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k>l&&(k=l);return k}},{key:'max',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k<l&&(k=l);return k}},{key:'renderInsertedValues',value:function(){}},{key:'renderSplicedValues',value:function(){}},{key:'renderClearing',value:function(){}},{key:'checkExceedingState',value:function(g){this.item&&!1!==this.item.exceedable&&void 0!==g&&(0===g.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}},{key:'_exceedingChanged',value:function(g){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:g}}))}},{key:'_hasExceededChanged',value:function(){}},{key:'reset',value:function(){this.resetColor&&this.resetColor(),babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this)&&babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this).call(this),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}],[{key:'properties',get:function(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}},{key:'observers',get:function(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}}]),e}(c)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'setColor',value:function(e){e&&(this.updateStyles({"--device-color":e||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":e||null})),this.updateStyles()}},{key:'resetColor',value:function(){this.setColor(this.item&&this.item.color||'')}},{key:'getComputedStyleValue',value:function(e){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,e):getComputedStyle(this).getPropertyValue(e)}}],[{key:'observers',get:function(){return['setColor(item.color)']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}},{key:'_addTouchListeners',value:function(f,g,h){var i=this;if(void 0!==g)if(f)this._removeTouchListeners();else{var j;j=this.eventTarget?this.$[this.eventTarget]:this,h?(Polymer.Gestures.addListener(j,'down',function(k){return i._handleTouch(k)}),Polymer.Gestures.addListener(j,'up',function(k){return i._handleTouch(k)})):g?Polymer.Gestures.addListener(j,'tap',function(){return i.select()}):this._removeTouchListeners()}}},{key:'_removeTouchListeners',value:function(){var g,f=this;g=this.eventTarget?this.$[this.eventTarget]:this,Polymer.Gestures.removeListener(g,'down',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'up',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'tap',function(){return f.select()})}},{key:'_handleTouch',value:function(f){'down'===f.type?this._lastEvent=f:this._lastEvent&&f.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}},{key:'_checkedChanged',value:function(f){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:f}}))}},{key:'select',value:function(f,g){!0===this.selectable&&(this._preventSelectEvent=g,void 0===f?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=f)}},{key:'deselect',value:function(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}},{key:'reset',value:function(){this._initialized&&(babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this)&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this).call(this),this.deselect())}}],[{key:'properties',get:function(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}},{key:'observers',get:function(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}}]),c}(a)};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>var DeviceSign=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var e=this;d&&d.length?setTimeout(function(){e._initialized||(e._initialized=!0);var f=d[d.length-1];e.item.isIndicatorLamp||(e.$.value.textContent=e.computeValue(f.y)),e.showDate&&(e.$.dateSection.textContent=e.computeDate(f.x)),e.item.exceedable&&(e.checkExceedingState(f),(!e.hasAttribute('state')||e.state!==f.state)&&e.setAttribute('state',f.state))},0):this.renderClearing()}},{key:'computeValue',value:function(d){return d}},{key:'renderClearing',value:function(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}},{key:'_requestExceedingDetails',value:function(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}],[{key:'is',get:function(){return'device-sign'}},{key:'properties',get:function(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}}]),b}(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>var DeviceCheckbox=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){if(d&&d.length){this._initialized||(this._initialized=!0);var e=d[d.length-1];this.item.exceedable&&(this.checkExceedingState(e),(!this.hasAttribute('state')||this.state!==e.state)&&this.setAttribute('state',e.state))}else this.renderClearing()}},{key:'renderClearing',value:function(){this._initialized=!1,this.setAttribute('state',null)}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.RenderStatus.afterNextRender(this,function(){var d=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!d||'-1px'===d){var e=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,f=Math.floor(8/3*e);f%2!==e%2&&f++,this.updateStyles({"--box-ink-size":f+'px'})}})}}],[{key:'is',get:function(){return'device-checkbox'}},{key:'properties',get:function(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}}]),b}(WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var n=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,n-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(o){this.style.webkitOverflowScrolling=o===this?'touch':'',this.style.overflowY=o===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var o=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(o['padding-top'],10),this._isRTL=!('rtl'!==o.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var o=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),p=o-this._scrollPosition,q=0<=p;if(this._scrollPosition=o,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(p)>this._physicalSize&&0<this._physicalSize){p-=this._scrollOffset;var r=Math.round(p/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=r,this._physicalStart+=r,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var s=this._getReusables(q);q?(this._physicalTop=s.physicalTop,this._virtualStart+=s.indexes.length,this._physicalStart+=s.indexes.length):(this._virtualStart-=s.indexes.length,this._physicalStart-=s.indexes.length),this._update(s.indexes,q?null:s.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(o){var p,q,r,s,t=[],u=this._hiddenContentSize*this._ratio,w=this._virtualStart,z=this._virtualEnd,A=this._physicalCount,B=this._physicalTop+this._scrollOffset,C=this._physicalBottom+this._scrollOffset,D=this._scrollTop,E=this._scrollBottom;for(o?(p=this._physicalStart,q=this._physicalEnd,r=D-B):(p=this._physicalEnd,q=this._physicalStart,r=C-E);s=this._getPhysicalSizeIncrement(p),r-=s,!(t.length>=A||r<=u);)if(o){if(z+t.length+1>=this._virtualCount)break;if(B+s>=D-this._scrollOffset)break;t.push(p),B+=s,p=(p+1)%A}else{if(0>=w-t.length)break;if(B+this._physicalSize-s<=E)break;t.push(p),B-=s,p=0===p?A-1:p-1}return{indexes:t,physicalTop:B-this._scrollOffset}},_update:function(o,p){if(!(o&&0===o.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(o),this._updateMetrics(o),p)for(;p.length;){var q=p.pop();this._physicalTop-=this._getPhysicalSizeIncrement(q)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(o){this._ensureTemplatized();var p,q,r=Array(o);for(p=0;p<o;p++)q=this.stamp(null),r[p]=q.root.querySelector('*'),this._itemsParent.appendChild(q.root);return r},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(o){var p=this._clamp(this._physicalCount+o,c,this._virtualCount-this._virtualStart);if(p=this._convertIndexToCompleteRow(p),this.grid){var q=p%this._itemsPerRow;q&&p-q<=this._physicalCount&&(p+=this._itemsPerRow),p-=q}var r=p-this._physicalCount,s=Math.round(0.5*this._physicalCount);if(!(0>r)){if(0<r){var t=window.performance.now();[].push.apply(this._physicalItems,this._createPool(r)),[].push.apply(this._physicalSizes,Array(r)),this._physicalCount+=r,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=r),this._update(),this._templateCost=(window.performance.now()-t)/r,s=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===s||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,s)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,s),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var o=this._getReusables(!0);this._physicalTop=o.physicalTop,this._virtualStart+=o.indexes.length,this._physicalStart+=o.indexes.length,this._update(o.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var o={};o.__key__=!0,o[this.as]=!0,o[this.indexAs]=!0,o[this.selectedAs]=!0,o.tabIndex=!0,this._instanceProps=o,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(o,p){'undefined'===typeof p||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),o&&this._updateGridMetrics())},_itemsChanged:function(o){if('items'===o.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===o.path){this._adjustVirtualIndex(o.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var p=o.value.indexSplices.some(function(q){return this._isIndexRendered(q.index)},this);(!this._isClientFull()||p)&&this._debounceRender(this._render,k)}else'items.length'!==o.path&&this._forwardItemPath(o.path,o.value)},_forwardItemPath:function(o,p){o=o.slice(6);var q=o.indexOf('.')+1;0===q&&(q=o.length);var r=j?parseInt(o.substring(0,q),10):parseInt(o.substring(1,q),10),s=this._offscreenFocusedItem,t=this._isIndexRendered(r),u,w;t?(w=this._getPhysicalIndex(r),u=this.modelForElement(this._physicalItems[w])):s&&(u=this.modelForElement(s));u&&u[this.indexAs]===r&&(o=o.substring(q),o=this.as+(o?'.'+o:''),j?u._setPendingPropertyOrPath(o,p,!1,!0):u.notifyPath(o,p,!0),u._flushProperties&&u._flushProperties(!0),t&&(this._updateMetrics([w]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(o){o.forEach(function(p){if(p.removed.forEach(this._removeItem,this),p.index<this._virtualStart){var q=Math.max(p.addedCount-p.removed.length,p.index-this._virtualStart);this._virtualStart+=q,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=q)}},this)},_removeItem:function(o){this.$.selector.deselect(o),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===o&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())},_iterateItems:function(o,p){var q,r,s,t;if(2===arguments.length&&p){for(t=0;t<p.length;t++)if(q=p[t],r=this._computeVidx(q),null!=(s=o.call(this,q,r)))return s;}else{for(q=this._physicalStart,r=this._virtualStart;q<this._physicalCount;q++,r++)if(null!=(s=o.call(this,q,r)))return s;for(q=0;q<this._physicalStart;q++,r++)if(null!=(s=o.call(this,q,r)))return s}},_computeVidx:function(o){return o>=this._physicalStart?this._virtualStart+(o-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+o},_assignModels:function(o){this._iterateItems(function(p,q){var r=this._physicalItems[p],s=this.items&&this.items[q];if(null!=s){var t=this.modelForElement(r);t.__key__=this._collection?this._collection.getKey(s):null,this._forwardProperty(t,this.as,s),this._forwardProperty(t,this.selectedAs,this.$.selector.isSelected(s)),this._forwardProperty(t,this.indexAs,q),this._forwardProperty(t,'tabIndex',this._focusedVirtualIndex===q?0:-1),this._physicalIndexForKey[t.__key__]=p,t._flushProperties&&t._flushProperties(!0),r.removeAttribute('hidden')}else r.setAttribute('hidden','')},o)},_updateMetrics:function(o){Polymer.flush?Polymer.flush():Polymer.dom.flush();var p=0,q=0,r=this._physicalAverageCount,s=this._physicalAverage;this._iterateItems(function(t){q+=this._physicalSizes[t]||0,this._physicalSizes[t]=this._physicalItems[t].offsetHeight,p+=this._physicalSizes[t],this._physicalAverageCount+=this._physicalSizes[t]?1:0},o),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(q=1===this._itemsPerRow?q:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+p-q,this._itemsPerRow=1),this._physicalAverageCount!==r&&(this._physicalAverage=Math.round((s*r+p)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var o=this._physicalTop;if(this.grid){var p=this._itemsPerRow*this._itemWidth,q=(this._viewportWidth-p)/2;this._iterateItems(function(r,s){var t=s%this._itemsPerRow,u=Math.floor(t*this._itemWidth+q);this._isRTL&&(u*=-1),this.translate3d(u+'px',o+'px',0,this._physicalItems[r]),this._shouldRenderNextRow(s)&&(o+=this._rowHeight)})}else this._iterateItems(function(r){this.translate3d(0,o+'px',0,this._physicalItems[r]),o+=this._physicalSizes[r]})},_getPhysicalSizeIncrement:function(o){return this.grid?this._computeVidx(o)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[o]},_shouldRenderNextRow:function(o){return o%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var o=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==o){this._physicalTop-=o;var p=this._scrollTop;!b&&0<p&&this._resetScrollPosition(p-o)}},_resetScrollPosition:function(o){this.scrollTarget&&0<=o&&(this._scrollTop=o,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(o){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,o=o||0===this._scrollHeight,o=o||this._scrollPosition>=this._estScrollHeight-this._physicalSize,o=o||this.grid&&this.$.items.style.height<this._estScrollHeight,(o||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(o){return this.scrollToIndex(this.items.indexOf(o))},scrollToIndex:function(o){if(!('number'!==typeof o||0>o||o>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){o=this._clamp(o,0,this._virtualCount-1),(!this._isIndexRendered(o)||o>=this._maxVirtualStart)&&(this._virtualStart=this.grid?o-2*this._itemsPerRow:o-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var p=this._physicalStart,q=this._virtualStart,r=0,s=this._hiddenContentSize;q<o&&r<=s;)r+=this._getPhysicalSizeIncrement(p),p=(p+1)%this._physicalCount,q++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+r),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(o){return this.selectIndex(this.items.indexOf(o))},selectIndex:function(o){if(!(0>o||o>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(o)){var p=this.modelForElement(this._physicalItems[this._getPhysicalIndex(o)]);p&&(p[this.selectedAs]=!0),this.updateSizeForIndex(o)}this.$.selector.selectIndex?this.$.selector.selectIndex(o):this.$.selector.select(this.items[o])}},deselectItem:function(o){return this.deselectIndex(this.items.indexOf(o))},deselectIndex:function(o){if(!(0>o||o>=this._virtualCount)){if(this._isIndexRendered(o)){var p=this.modelForElement(this._physicalItems[this._getPhysicalIndex(o)]);p[this.selectedAs]=!1,this.updateSizeForIndex(o)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(o):this.$.selector.deselect(this.items[o])}},toggleSelectionForItem:function(o){return this.toggleSelectionForIndex(this.items.indexOf(o))},toggleSelectionForIndex:function(o){var p=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(o):this.$.selector.isSelected(this.items[o]);p?this.deselectIndex(o):this.selectIndex(o)},clearSelection:function(){this._iterateItems(function(o){this.modelForElement(this._physicalItems[o])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(o){var p=o?this.listen:this.unlisten;p.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(o){var p=this.modelForElement(o.target);if(p){var q,r,s=Polymer.dom(o).path[0],t=this._itemsParent.node.domHost,u=Polymer.dom(t?t.root:document).activeElement,w=this._physicalItems[this._getPhysicalIndex(p[this.indexAs])];'input'!==s.localName&&'button'!==s.localName&&'select'!==s.localName&&(q=p.tabIndex,p.tabIndex=h,r=u?u.tabIndex:-1,p.tabIndex=q,u&&w!==u&&w.contains(u)&&r!==h||this.toggleSelectionForItem(p[this.as]))}},_multiSelectionChanged:function(o){this.clearSelection(),this.$.selector.multi=o},updateSizeForItem:function(o){return this.updateSizeForIndex(this.items.indexOf(o))},updateSizeForIndex:function(o){return this._isIndexRendered(o)?(this._updateMetrics([this._getPhysicalIndex(o)]),this._positionItems(),null):null},_manageFocus:function(){var o=this._focusedVirtualIndex;0<=o&&o<this._virtualCount?this._isIndexRendered(o)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(o){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(o/this._itemsPerRow)*this._itemsPerRow:o},_isIndexRendered:function(o){return o>=this._virtualStart&&o<=this._virtualEnd},_isIndexVisible:function(o){return o>=this.firstVisibleIndex&&o<=this.lastVisibleIndex},_getPhysicalIndex:function(o){return(this._physicalStart+(o-this._virtualStart))%this._physicalCount},focusItem:function(o){this._focusPhysicalItem(o)},_focusPhysicalItem:function(o){if(!(0>o||o>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(o)||this.scrollToIndex(o);var r,p=this._physicalItems[this._getPhysicalIndex(o)],q=this.modelForElement(p);q.tabIndex=h,p.tabIndex===h&&(r=p),r||(r=Polymer.dom(p).querySelector('[tabindex="'+h+'"]')),q.tabIndex=0,this._focusedVirtualIndex=o,r&&r.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var o=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var p=this.stamp(null);this._focusBackfillItem=p.root.querySelector('*'),this._itemsParent.appendChild(p.root)}this._offscreenFocusedItem=this._physicalItems[o],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[o]=this._focusBackfillItem,this._focusedPhysicalIndex=o,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var o=this._focusedPhysicalIndex,p=this._physicalItems[o];if(p){var q=this.modelForElement(p),r=this.modelForElement(this._offscreenFocusedItem);q[this.as]===r[this.as]?(this._focusBackfillItem=p,q.tabIndex=-1,this._physicalItems[o]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(o){var p=this.modelForElement(o.target),q=this.modelForElement(this._focusedItem),r=null!==this._offscreenFocusedItem,s=this._focusedVirtualIndex;p&&(q===p?!this._isIndexVisible(s)&&this.scrollToIndex(s):(this._restoreFocusedItem(),q&&(q.tabIndex=-1),p.tabIndex=0,s=p[this.indexAs],this._focusedVirtualIndex=s,this._focusedPhysicalIndex=this._getPhysicalIndex(s),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],r&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(o){switch(o.keyCode){case 40:o.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(o);}},_clamp:function(o,p,q){return Math.min(q,Math.max(p,o))},_debounceRender:function(o,p){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,p,o.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(o)},_forwardProperty:function(o,p,q){j?o._setPendingProperty(p,q):o[p]=q},_forwardHostPropV2:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&this.modelForElement(q).forwardHostProp(o,p)},this)},_notifyInstancePropV2:function(o,p,q){if(Polymer.Path.matches(this.as,p)){var r=o[this.indexAs];p==this.as&&(this.items[r]=q),this.notifyPath(Polymer.Path.translate(this.as,'items.'+r,p),q)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(o,p,q){0===p.indexOf(this.as+'.')&&this.notifyPath('items.'+o.__key__+'.'+p.slice(this.as.length+1),q)},_forwardParentPath:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&this.modelForElement(q).notifyPath(o,p,!0)},this)},_forwardParentProp:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&(this.modelForElement(q)[o]=p)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[item.unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>var DeviceTable=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var e=this;d&&d.length?setTimeout(function(){if(!e._initialized)e.set('values',d.reverse()),e._initialized=!0;else for(var f=0;f<d.length;f++)e.unshift('values',d[f])},0):!this._initialized&&this.renderClearing()}},{key:'spliceValues',value:function(d){var e=this;setTimeout(function(){for(var h,f=[],g=0;g<d.length;g++){for(h=void 0,h=e.values.length-1;0<=h&&e.values[h].x!==d[g].x;h--);-1!==h&&(e.values.splice(h,1),f.push({index:h,removed:[e.values[h]],addedCount:0,object:e.values,type:'splice'}))}e.notifySplices('values',f)},0)}},{key:'renderClearing',value:function(){this.$.list.set('items',[])}},{key:'_computeKeysForCaption',value:function(d,e){if(d&&e&&e.keys){var f='';for(var g in this.item.keys)f+=this.item.keys[g]+' ';this.$.caption.textContent=f}else this.caption&&(this.$.caption.textContent=this.caption)}},{key:'_toggleGridView',value:function(){this.$.list.grid=!this.$.list.grid}}],[{key:'is',get:function(){return'device-table'}},{key:'properties',get:function(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_computeKeysForCaption(keysForCaption, item)']}}]),b}(WebvisualMixins.DeviceMixin(Polymer.Element));customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>var DeviceTableGroup=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_shouldHideTabs',value:function(d){2>d?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===d&&this.set('selectedItemMount',this.items[0].mount)}},{key:'reset',value:function(){this.set('items',[]),this.set('selectedItemMount','')}}],[{key:'is',get:function(){return'device-table-group'}},{key:'properties',get:function(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}},{key:'observers',get:function(){return['_shouldHideTabs(items.length)']}}]),b}(Polymer.Element);customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">var d3=function(Ia){"use strict";function Oa(zg){return function(Mg,Ug){return Xp(zg(Mg),Ug)}}function ja(zg,Mg,Ug){var Ag=(Mg-zg)/Math.max(0,Ug),Yg=Math.floor(Math.log(Ag)/Math.LN10),Eg=Ag/Math.pow(10,Yg);return 0<=Yg?(Eg>=Np?10:Eg>=Op?5:Eg>=jp?2:1)*Math.pow(10,Yg):-Math.pow(10,-Yg)/(Eg>=Np?10:Eg>=Op?5:Eg>=jp?2:1)}function $a(zg,Mg,Ug){var Ag=Math.abs(Mg-zg)/Math.max(0,Ug),Yg=Math.pow(10,Math.floor(Math.log(Ag)/Math.LN10)),Eg=Ag/Yg;return Eg>=Np?Yg*=10:Eg>=Op?Yg*=5:Eg>=jp&&(Yg*=2),Mg<zg?-Yg:Yg}function Va(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ba(){return new Va}function Za(zg){this._context=zg}function Wa(zg){return zg[0]}function Ra(zg){return zg[1]}function Ga(zg,Mg,Ug){zg._context.bezierCurveTo((2*zg._x0+zg._x1)/3,(2*zg._y0+zg._y1)/3,(zg._x0+2*zg._x1)/3,(zg._y0+2*zg._y1)/3,(zg._x0+4*zg._x1+Mg)/6,(zg._y0+4*zg._y1+Ug)/6)}function Ja(zg){this._context=zg}function Ka(zg,Mg,Ug){zg._context.bezierCurveTo(zg._x1+zg._k*(zg._x2-zg._x0),zg._y1+zg._k*(zg._y2-zg._y0),zg._x2+zg._k*(zg._x1-Mg),zg._y2+zg._k*(zg._y1-Ug),zg._x2,zg._y2)}function Qa(zg,Mg){this._context=zg,this._k=(1-Mg)/6}function el(zg,Mg,Ug){var Ag=zg._x1,Yg=zg._y1,Eg=zg._x2,Pg=zg._y2;if(zg._l01_a>Rp){var Dg=2*zg._l01_2a+3*zg._l01_a*zg._l12_a+zg._l12_2a,Fg=3*zg._l01_a*(zg._l01_a+zg._l12_a);Ag=(Ag*Dg-zg._x0*zg._l12_2a+zg._x2*zg._l01_2a)/Fg,Yg=(Yg*Dg-zg._y0*zg._l12_2a+zg._y2*zg._l01_2a)/Fg}if(zg._l23_a>Rp){var Lg=2*zg._l23_2a+3*zg._l23_a*zg._l12_a+zg._l12_2a,Hg=3*zg._l23_a*(zg._l23_a+zg._l12_a);Eg=(Eg*Lg+zg._x1*zg._l23_2a-Mg*zg._l12_2a)/Hg,Pg=(Pg*Lg+zg._y1*zg._l23_2a-Ug*zg._l12_2a)/Hg}zg._context.bezierCurveTo(Ag,Yg,Eg,Pg,zg._x2,zg._y2)}function tl(zg,Mg){this._context=zg,this._alpha=Mg}function nl(zg){return 0>zg?-1:1}function ol(zg,Mg,Ug){var Ag=zg._x1-zg._x0,Yg=Mg-zg._x1,Eg=(zg._y1-zg._y0)/(Ag||0>Yg&&-0),Pg=(Ug-zg._y1)/(Yg||0>Ag&&-0);return(nl(Eg)+nl(Pg))*Math.min(Math.abs(Eg),Math.abs(Pg),.5*Math.abs((Eg*Yg+Pg*Ag)/(Ag+Yg)))||0}function al(zg,Mg){var Ug=zg._x1-zg._x0;return Ug?(3*(zg._y1-zg._y0)/Ug-Mg)/2:Mg}function il(zg,Mg,Ug){var Ag=zg._x0,Yg=zg._y0,Eg=zg._x1,Pg=zg._y1,Dg=(Eg-Ag)/3;zg._context.bezierCurveTo(Ag+Dg,Yg+Dg*Mg,Eg-Dg,Pg-Dg*Ug,Eg,Pg)}function ll(zg){this._context=zg}function rl(zg){this._context=zg}function sl(zg){this._context=zg}function dl(zg){var Mg,Ug,Ag=zg.length-1,Yg=Array(Ag),Eg=Array(Ag),Pg=Array(Ag);for(Yg[0]=0,Eg[0]=2,Pg[0]=zg[0]+2*zg[1],Mg=1;Mg<Ag-1;++Mg)Yg[Mg]=1,Eg[Mg]=4,Pg[Mg]=4*zg[Mg]+2*zg[Mg+1];for(Yg[Ag-1]=2,Eg[Ag-1]=7,Pg[Ag-1]=8*zg[Ag-1]+zg[Ag],Mg=1;Mg<Ag;++Mg)Ug=Yg[Mg]/Eg[Mg-1],Eg[Mg]-=Ug,Pg[Mg]-=Ug*Pg[Mg-1];for(Yg[Ag-1]=Pg[Ag-1]/Eg[Ag-1],Mg=Ag-2;0<=Mg;--Mg)Yg[Mg]=(Pg[Mg]-Yg[Mg+1])/Eg[Mg];for(Eg[Ag-1]=(zg[Ag]+Yg[Ag-1])/2,Mg=0;Mg<Ag-1;++Mg)Eg[Mg]=2*zg[Mg+1]-Yg[Mg+1];return[Yg,Eg]}function cl(zg,Mg){this._context=zg,this._t=Mg}function ul(zg,Mg,Ug,Ag){function Yg(Eg){return zg(Eg=new Date(+Eg)),Eg}return Yg.floor=Yg,Yg.ceil=function(Eg){return zg(Eg=new Date(Eg-1)),Mg(Eg,1),zg(Eg),Eg},Yg.round=function(Eg){var Pg=Yg(Eg),Dg=Yg.ceil(Eg);return Eg-Pg<Dg-Eg?Pg:Dg},Yg.offset=function(Eg,Pg){return Mg(Eg=new Date(+Eg),null==Pg?1:Math.floor(Pg)),Eg},Yg.range=function(Eg,Pg,Dg){var Fg=[];if(Eg=Yg.ceil(Eg),Dg=null==Dg?1:Math.floor(Dg),!(Eg<Pg&&0<Dg))return Fg;do Fg.push(new Date(+Eg));while((Mg(Eg,Dg),zg(Eg),Eg<Pg));return Fg},Yg.filter=function(Eg){return ul(function(Pg){if(Pg>=Pg)for(;zg(Pg),!Eg(Pg);)Pg.setTime(Pg-1)},function(Pg,Dg){if(Pg>=Pg)if(0>Dg)for(;0>=++Dg;)for(;Mg(Pg,-1),!Eg(Pg););else for(;0<=--Dg;)for(;Mg(Pg,1),!Eg(Pg););})},Ug&&(Yg.count=function(Eg,Pg){return e_.setTime(+Eg),t_.setTime(+Pg),zg(e_),zg(t_),Math.floor(Ug(e_,t_))},Yg.every=function(Eg){return Eg=Math.floor(Eg),isFinite(Eg)&&0<Eg?1<Eg?Yg.filter(Ag?function(Pg){return 0==Ag(Pg)%Eg}:function(Pg){return 0==Yg.count(0,Pg)%Eg}):Yg:null}),Yg}function pl(zg){return ul(function(Mg){Mg.setDate(Mg.getDate()-(Mg.getDay()+7-zg)%7),Mg.setHours(0,0,0,0)},function(Mg,Ug){Mg.setDate(Mg.getDate()+7*Ug)},function(Mg,Ug){return(Ug-Mg-(Ug.getTimezoneOffset()-Mg.getTimezoneOffset())*o_)/a_})}function _l(zg){return ul(function(Mg){Mg.setUTCDate(Mg.getUTCDate()-(Mg.getUTCDay()+7-zg)%7),Mg.setUTCHours(0,0,0,0)},function(Mg,Ug){Mg.setUTCDate(Mg.getUTCDate()+7*Ug)},function(Mg,Ug){return(Ug-Mg)/a_})}function hl(zg){return new ml(zg)}function ml(zg){if(!(Mg=k_.exec(zg)))throw new Error("invalid format: "+zg);var Mg,Ug=Mg[1]||" ",Ag=Mg[2]||">",Yg=Mg[3]||"-",Eg=Mg[4]||"",Pg=!!Mg[5],Dg=Mg[6]&&+Mg[6],Fg=!!Mg[7],Lg=Mg[8]&&+Mg[8].slice(1),Hg=Mg[9]||"";"n"===Hg?(Fg=!0,Hg="g"):T_[Hg]||(Hg=""),(Pg||"0"===Ug&&"="===Ag)&&(Pg=!0,Ug="0",Ag="="),this.fill=Ug,this.align=Ag,this.sign=Yg,this.symbol=Eg,this.zero=Pg,this.width=Dg,this.comma=Fg,this.precision=Lg,this.type=Hg}function gl(zg){return S_=U_(zg),Ia.format=S_.format,C_=S_.formatPrefix,S_}function yl(zg){if(0<=zg.y&&100>zg.y){var Mg=new Date(-1,zg.m,zg.d,zg.H,zg.M,zg.S,zg.L);return Mg.setFullYear(zg.y),Mg}return new Date(zg.y,zg.m,zg.d,zg.H,zg.M,zg.S,zg.L)}function fl(zg){if(0<=zg.y&&100>zg.y){var Mg=new Date(Date.UTC(-1,zg.m,zg.d,zg.H,zg.M,zg.S,zg.L));return Mg.setUTCFullYear(zg.y),Mg}return new Date(Date.UTC(zg.y,zg.m,zg.d,zg.H,zg.M,zg.S,zg.L))}function xl(zg){return{y:zg,m:0,d:1,H:0,M:0,S:0,L:0}}function vl(zg){function Mg(Kg,Qg){return function(ey){var ty,ny,oy,ay=[],iy=-1,ly=0,ry=Kg.length;for(ey instanceof Date||(ey=new Date(+ey));++iy<ry;)37===Kg.charCodeAt(iy)&&(ay.push(Kg.slice(ly,iy)),null==(ny=L_[ty=Kg.charAt(++iy)])?ny="e"===ty?" ":"0":ty=Kg.charAt(++iy),(oy=Qg[ty])&&(ty=oy(ey,ny)),ay.push(ty),ly=iy+1);return ay.push(Kg.slice(ly,iy)),ay.join("")}}function Ug(Kg,Qg){return function(ey){var ty=xl(1900);if(Ag(ty,Kg,ey+="",0)!=ey.length)return null;if("p"in ty&&(ty.H=ty.H%12+12*ty.p),"W"in ty||"U"in ty){"w"in ty||(ty.w="W"in ty?1:0);var ny="Z"in ty?fl(xl(ty.y)).getUTCDay():Qg(xl(ty.y)).getDay();ty.m=0,ty.d="W"in ty?(ty.w+6)%7+7*ty.W-(ny+5)%7:ty.w+7*ty.U-(ny+6)%7}return"Z"in ty?(ty.H+=0|ty.Z/100,ty.M+=ty.Z%100,fl(ty)):Qg(ty)}}function Ag(Kg,Qg,ey,ty){for(var ny,oy,ay=0,iy=Qg.length,ly=ey.length;ay<iy;){if(ty>=ly)return-1;if(37===(ny=Qg.charCodeAt(ay++))){if(ny=Qg.charAt(ay++),!(oy=Jg[ny in L_?Qg.charAt(ay++):ny])||0>(ty=oy(Kg,ey,ty)))return-1;}else if(ny!=ey.charCodeAt(ty++))return-1}return ty}var Yg=zg.dateTime,Eg=zg.date,Pg=zg.time,Dg=zg.periods,Fg=zg.days,Lg=zg.shortDays,Hg=zg.months,Xg=zg.shortMonths,qg=Tl(Dg),Ig=kl(Dg),Ng=Tl(Fg),Og=kl(Fg),jg=Tl(Lg),$g=kl(Lg),Vg=Tl(Hg),Bg=kl(Hg),Zg=Tl(Xg),Wg=kl(Xg),Rg={a:function(Qg){return Lg[Qg.getDay()]},A:function(Qg){return Fg[Qg.getDay()]},b:function(Qg){return Xg[Qg.getMonth()]},B:function(Qg){return Hg[Qg.getMonth()]},c:null,d:ql,e:ql,H:Il,I:Nl,j:Ol,L:jl,m:$l,M:Vl,p:function(Qg){return Dg[+(12<=Qg.getHours())]},S:Bl,U:Zl,w:Wl,W:Rl,x:null,X:null,y:Gl,Y:Jl,Z:Kl,"%":_s},Gg={a:function(Qg){return Lg[Qg.getUTCDay()]},A:function(Qg){return Fg[Qg.getUTCDay()]},b:function(Qg){return Xg[Qg.getUTCMonth()]},B:function(Qg){return Hg[Qg.getUTCMonth()]},c:null,d:Ql,e:Ql,H:es,I:ts,j:ns,L:os,m:as,M:is,p:function(Qg){return Dg[+(12<=Qg.getUTCHours())]},S:ls,U:rs,w:ss,W:ds,x:null,X:null,y:cs,Y:us,Z:ps,"%":_s},Jg={a:function(Qg,ey,ty){var ny=jg.exec(ey.slice(ty));return ny?(Qg.w=$g[ny[0].toLowerCase()],ty+ny[0].length):-1},A:function(Qg,ey,ty){var ny=Ng.exec(ey.slice(ty));return ny?(Qg.w=Og[ny[0].toLowerCase()],ty+ny[0].length):-1},b:function(Qg,ey,ty){var ny=Zg.exec(ey.slice(ty));return ny?(Qg.m=Wg[ny[0].toLowerCase()],ty+ny[0].length):-1},B:function(Qg,ey,ty){var ny=Vg.exec(ey.slice(ty));return ny?(Qg.m=Bg[ny[0].toLowerCase()],ty+ny[0].length):-1},c:function(Qg,ey,ty){return Ag(Qg,Yg,ey,ty)},d:El,e:El,H:Dl,I:Dl,j:Pl,L:Hl,m:Yl,M:Fl,p:function(Qg,ey,ty){var ny=qg.exec(ey.slice(ty));return ny?(Qg.p=Ig[ny[0].toLowerCase()],ty+ny[0].length):-1},S:Ll,U:Cl,w:Sl,W:zl,x:function(Qg,ey,ty){return Ag(Qg,Eg,ey,ty)},X:function(Qg,ey,ty){return Ag(Qg,Pg,ey,ty)},y:Ul,Y:Ml,Z:Al,"%":Xl};return Rg.x=Mg(Eg,Rg),Rg.X=Mg(Pg,Rg),Rg.c=Mg(Yg,Rg),Gg.x=Mg(Eg,Gg),Gg.X=Mg(Pg,Gg),Gg.c=Mg(Yg,Gg),{format:function(Qg){var ey=Mg(Qg+="",Rg);return ey.toString=function(){return Qg},ey},parse:function(Qg){var ey=Ug(Qg+="",yl);return ey.toString=function(){return Qg},ey},utcFormat:function(Qg){var ey=Mg(Qg+="",Gg);return ey.toString=function(){return Qg},ey},utcParse:function(Qg){var ey=Ug(Qg,fl);return ey.toString=function(){return Qg},ey}}}function bl(zg,Mg,Ug){var Ag=0>zg?"-":"",Yg=(Ag?-zg:zg)+"",Eg=Yg.length;return Ag+(Eg<Ug?Array(Ug-Eg+1).join(Mg)+Yg:Yg)}function wl(zg){return zg.replace(q_,"\\$&")}function Tl(zg){return new RegExp("^(?:"+zg.map(wl).join("|")+")","i")}function kl(zg){for(var Mg={},Ug=-1,Ag=zg.length;++Ug<Ag;)Mg[zg[Ug].toLowerCase()]=Ug;return Mg}function Sl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+1));return Ag?(zg.w=+Ag[0],Ug+Ag[0].length):-1}function Cl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug));return Ag?(zg.U=+Ag[0],Ug+Ag[0].length):-1}function zl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug));return Ag?(zg.W=+Ag[0],Ug+Ag[0].length):-1}function Ml(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+4));return Ag?(zg.y=+Ag[0],Ug+Ag[0].length):-1}function Ul(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.y=+Ag[0]+(68<+Ag[0]?1900:2e3),Ug+Ag[0].length):-1}function Al(zg,Mg,Ug){var Ag=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(Mg.slice(Ug,Ug+6));return Ag?(zg.Z=Ag[1]?0:-(Ag[2]+(Ag[3]||"00")),Ug+Ag[0].length):-1}function Yl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.m=Ag[0]-1,Ug+Ag[0].length):-1}function El(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.d=+Ag[0],Ug+Ag[0].length):-1}function Pl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+3));return Ag?(zg.m=0,zg.d=+Ag[0],Ug+Ag[0].length):-1}function Dl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.H=+Ag[0],Ug+Ag[0].length):-1}function Fl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.M=+Ag[0],Ug+Ag[0].length):-1}function Ll(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+2));return Ag?(zg.S=+Ag[0],Ug+Ag[0].length):-1}function Hl(zg,Mg,Ug){var Ag=H_.exec(Mg.slice(Ug,Ug+3));return Ag?(zg.L=+Ag[0],Ug+Ag[0].length):-1}function Xl(zg,Mg,Ug){var Ag=X_.exec(Mg.slice(Ug,Ug+1));return Ag?Ug+Ag[0].length:-1}function ql(zg,Mg){return bl(zg.getDate(),Mg,2)}function Il(zg,Mg){return bl(zg.getHours(),Mg,2)}function Nl(zg,Mg){return bl(zg.getHours()%12||12,Mg,2)}function Ol(zg,Mg){return bl(1+s_.count(p_(zg),zg),Mg,3)}function jl(zg,Mg){return bl(zg.getMilliseconds(),Mg,3)}function $l(zg,Mg){return bl(zg.getMonth()+1,Mg,2)}function Vl(zg,Mg){return bl(zg.getMinutes(),Mg,2)}function Bl(zg,Mg){return bl(zg.getSeconds(),Mg,2)}function Zl(zg,Mg){return bl(d_.count(p_(zg),zg),Mg,2)}function Wl(zg){return zg.getDay()}function Rl(zg,Mg){return bl(c_.count(p_(zg),zg),Mg,2)}function Gl(zg,Mg){return bl(zg.getFullYear()%100,Mg,2)}function Jl(zg,Mg){return bl(zg.getFullYear()%1e4,Mg,4)}function Kl(zg){var Mg=zg.getTimezoneOffset();return(0<Mg?"-":(Mg*=-1,"+"))+bl(0|Mg/60,"0",2)+bl(Mg%60,"0",2)}function Ql(zg,Mg){return bl(zg.getUTCDate(),Mg,2)}function es(zg,Mg){return bl(zg.getUTCHours(),Mg,2)}function ts(zg,Mg){return bl(zg.getUTCHours()%12||12,Mg,2)}function ns(zg,Mg){return bl(1+__.count(g_(zg),zg),Mg,3)}function os(zg,Mg){return bl(zg.getUTCMilliseconds(),Mg,3)}function as(zg,Mg){return bl(zg.getUTCMonth()+1,Mg,2)}function is(zg,Mg){return bl(zg.getUTCMinutes(),Mg,2)}function ls(zg,Mg){return bl(zg.getUTCSeconds(),Mg,2)}function rs(zg,Mg){return bl(h_.count(g_(zg),zg),Mg,2)}function ss(zg){return zg.getUTCDay()}function ds(zg,Mg){return bl(m_.count(g_(zg),zg),Mg,2)}function cs(zg,Mg){return bl(zg.getUTCFullYear()%100,Mg,2)}function us(zg,Mg){return bl(zg.getUTCFullYear()%1e4,Mg,4)}function ps(){return"+0000"}function _s(){return"%"}function hs(zg){return A_=vl(zg),Ia.timeFormat=A_.format,Ia.timeParse=A_.parse,Y_=A_.utcFormat,E_=A_.utcParse,A_}function ms(){}function gs(zg,Mg){var Ug=new ms;if(zg instanceof ms)zg.each(function(Dg,Fg){Ug.set(Fg,Dg)});else if(Array.isArray(zg)){var Ag,Yg=-1,Eg=zg.length;if(null==Mg)for(;++Yg<Eg;)Ug.set(Yg,zg[Yg]);else for(;++Yg<Eg;)Ug.set(Mg(Ag=zg[Yg],Yg,zg),Ag)}else if(zg)for(var Pg in zg)Ug.set(Pg,zg[Pg]);return Ug}function ys(){}function fs(zg,Mg){var Ug=Object.create(zg.prototype);for(var Ag in Mg)Ug[Ag]=Mg[Ag];return Ug}function xs(){}function vs(zg){var Mg;return zg=(zg+"").trim().toLowerCase(),(Mg=W_.exec(zg))?(Mg=parseInt(Mg[1],16),new Ss(15&Mg>>8|240&Mg>>4,15&Mg>>4|240&Mg,(15&Mg)<<4|15&Mg,1)):(Mg=R_.exec(zg))?bs(parseInt(Mg[1],16)):(Mg=G_.exec(zg))?new Ss(Mg[1],Mg[2],Mg[3],1):(Mg=J_.exec(zg))?new Ss(255*Mg[1]/100,255*Mg[2]/100,255*Mg[3]/100,1):(Mg=K_.exec(zg))?ws(Mg[1],Mg[2],Mg[3],Mg[4]):(Mg=Q_.exec(zg))?ws(255*Mg[1]/100,255*Mg[2]/100,255*Mg[3]/100,Mg[4]):(Mg=eh.exec(zg))?Cs(Mg[1],Mg[2]/100,Mg[3]/100,1):(Mg=th.exec(zg))?Cs(Mg[1],Mg[2]/100,Mg[3]/100,Mg[4]):nh.hasOwnProperty(zg)?bs(nh[zg]):"transparent"===zg?new Ss(NaN,NaN,NaN,0):null}function bs(zg){return new Ss(255&zg>>16,255&zg>>8,255&zg,1)}function ws(zg,Mg,Ug,Ag){return 0>=Ag&&(zg=Mg=Ug=NaN),new Ss(zg,Mg,Ug,Ag)}function Ts(zg){return zg instanceof xs||(zg=vs(zg)),zg?(zg=zg.rgb(),new Ss(zg.r,zg.g,zg.b,zg.opacity)):new Ss}function ks(zg,Mg,Ug,Ag){return 1===arguments.length?Ts(zg):new Ss(zg,Mg,Ug,null==Ag?1:Ag)}function Ss(zg,Mg,Ug,Ag){this.r=+zg,this.g=+Mg,this.b=+Ug,this.opacity=+Ag}function Cs(zg,Mg,Ug,Ag){return 0>=Ag?zg=Mg=Ug=NaN:0>=Ug||1<=Ug?zg=Mg=NaN:0>=Mg&&(zg=NaN),new Ms(zg,Mg,Ug,Ag)}function zs(zg){if(zg instanceof Ms)return new Ms(zg.h,zg.s,zg.l,zg.opacity);if(zg instanceof xs||(zg=vs(zg)),!zg)return new Ms;if(zg instanceof Ms)return zg;var Mg=(zg=zg.rgb()).r/255,Ug=zg.g/255,Ag=zg.b/255,Yg=Math.min(Mg,Ug,Ag),Eg=Math.max(Mg,Ug,Ag),Pg=NaN,Dg=Eg-Yg,Fg=(Eg+Yg)/2;return Dg?(Pg=Mg===Eg?(Ug-Ag)/Dg+6*(Ug<Ag):Ug===Eg?(Ag-Mg)/Dg+2:(Mg-Ug)/Dg+4,Dg/=.5>Fg?Eg+Yg:2-Eg-Yg,Pg*=60):Dg=0<Fg&&1>Fg?0:Pg,new Ms(Pg,Dg,Fg,zg.opacity)}function Ms(zg,Mg,Ug,Ag){this.h=+zg,this.s=+Mg,this.l=+Ug,this.opacity=+Ag}function Us(zg,Mg,Ug){return 255*(60>zg?Mg+(Ug-Mg)*zg/60:180>zg?Ug:240>zg?Mg+(Ug-Mg)*(240-zg)/60:Mg)}function As(zg){if(zg instanceof Ys)return new Ys(zg.l,zg.a,zg.b,zg.opacity);if(zg instanceof Hs){var Mg=zg.h*oh;return new Ys(zg.l,Math.cos(Mg)*zg.c,Math.sin(Mg)*zg.c,zg.opacity)}zg instanceof Ss||(zg=Ts(zg));var Ug=Fs(zg.r),Ag=Fs(zg.g),Yg=Fs(zg.b),Eg=Es((.4124564*Ug+.3575761*Ag+.1804375*Yg)/ih),Pg=Es((.2126729*Ug+.7151522*Ag+.072175*Yg)/lh);return new Ys(116*Pg-16,500*(Eg-Pg),200*(Pg-Es((.0193339*Ug+.119192*Ag+.9503041*Yg)/rh)),zg.opacity)}function Ys(zg,Mg,Ug,Ag){this.l=+zg,this.a=+Mg,this.b=+Ug,this.opacity=+Ag}function Es(zg){return zg>uh?Math.pow(zg,1/3):zg/ch+sh}function Ps(zg){return zg>dh?zg*zg*zg:ch*(zg-sh)}function Ds(zg){return 255*(.0031308>=zg?12.92*zg:1.055*Math.pow(zg,1/2.4)-.055)}function Fs(zg){return .04045>=(zg/=255)?zg/12.92:Math.pow((zg+.055)/1.055,2.4)}function Ls(zg){if(zg instanceof Hs)return new Hs(zg.h,zg.c,zg.l,zg.opacity);zg instanceof Ys||(zg=As(zg));var Mg=Math.atan2(zg.b,zg.a)*ah;return new Hs(0>Mg?Mg+360:Mg,Math.sqrt(zg.a*zg.a+zg.b*zg.b),zg.l,zg.opacity)}function Hs(zg,Mg,Ug,Ag){this.h=+zg,this.c=+Mg,this.l=+Ug,this.opacity=+Ag}function Xs(zg){if(zg instanceof Is)return new Is(zg.h,zg.s,zg.l,zg.opacity);zg instanceof Ss||(zg=Ts(zg));var Mg=zg.r/255,Ug=zg.g/255,Ag=zg.b/255,Yg=(xh*Ag+yh*Mg-fh*Ug)/(xh+yh-fh),Eg=Ag-Yg,Pg=(gh*(Ug-Yg)-hh*Eg)/mh,Dg=Math.sqrt(Pg*Pg+Eg*Eg)/(gh*Yg*(1-Yg)),Fg=Dg?Math.atan2(Pg,Eg)*ah-120:NaN;return new Is(0>Fg?Fg+360:Fg,Dg,Yg,zg.opacity)}function qs(zg,Mg,Ug,Ag){return 1===arguments.length?Xs(zg):new Is(zg,Mg,Ug,null==Ag?1:Ag)}function Is(zg,Mg,Ug,Ag){this.h=+zg,this.s=+Mg,this.l=+Ug,this.opacity=+Ag}function Ns(zg,Mg){return function(Ug){return zg+Ug*Mg}}function Os(zg,Mg,Ug){return zg=Math.pow(zg,Ug),Mg=Math.pow(Mg,Ug)-zg,Ug=1/Ug,function(Ag){return Math.pow(zg+Ag*Mg,Ug)}}function js(zg){return 1==(zg=+zg)?$s:function(Mg,Ug){return Ug-Mg?Os(Mg,Ug,zg):kh(isNaN(Mg)?Ug:Mg)}}function $s(zg,Mg){var Ug=Mg-zg;return Ug?Ns(zg,Ug):kh(isNaN(zg)?Mg:zg)}function Vs(zg){return function(){return zg}}function Bs(zg){return function(Mg){return zg(Mg)+""}}function Zs(zg,Mg,Ug,Ag){function Yg(Lg){return Lg.length?Lg.pop()+" ":""}function Eg(Lg,Hg,Xg,qg,Ig,Ng){if(Lg!==Xg||Hg!==qg){var Og=Ig.push("translate(",null,Mg,null,Ug);Ng.push({i:Og-4,x:Mh(Lg,Xg)},{i:Og-2,x:Mh(Hg,qg)})}else(Xg||qg)&&Ig.push("translate("+Xg+Mg+qg+Ug)}function Pg(Lg,Hg,Xg,qg){Lg===Hg?Hg&&Xg.push(Yg(Xg)+"rotate("+Hg+Ag):(180<Lg-Hg?Hg+=360:180<Hg-Lg&&(Lg+=360),qg.push({i:Xg.push(Yg(Xg)+"rotate(",null,Ag)-2,x:Mh(Lg,Hg)}))}function Dg(Lg,Hg,Xg,qg){Lg===Hg?Hg&&Xg.push(Yg(Xg)+"skewX("+Hg+Ag):qg.push({i:Xg.push(Yg(Xg)+"skewX(",null,Ag)-2,x:Mh(Lg,Hg)})}function Fg(Lg,Hg,Xg,qg,Ig,Ng){if(Lg!==Xg||Hg!==qg){var Og=Ig.push(Yg(Ig)+"scale(",null,",",null,")");Ng.push({i:Og-4,x:Mh(Lg,Xg)},{i:Og-2,x:Mh(Hg,qg)})}else 1===Xg&&1===qg||Ig.push(Yg(Ig)+"scale("+Xg+","+qg+")")}return function(Lg,Hg){var Xg=[],qg=[];return Lg=zg(Lg),Hg=zg(Hg),Eg(Lg.translateX,Lg.translateY,Hg.translateX,Hg.translateY,Xg,qg),Pg(Lg.rotate,Hg.rotate,Xg,qg),Dg(Lg.skewX,Hg.skewX,Xg,qg),Fg(Lg.scaleX,Lg.scaleY,Hg.scaleX,Hg.scaleY,Xg,qg),Lg=Hg=null,function(Ig){for(var Ng,Og=-1,jg=qg.length;++Og<jg;)Xg[(Ng=qg[Og]).i]=Ng.x(Ig);return Xg.join("")}}}function Ws(zg){return((zg=Math.exp(zg))+1/zg)/2}function Rs(zg){return((zg=Math.exp(zg))-1/zg)/2}function Gs(zg){return((zg=Math.exp(2*zg))-1)/(zg+1)}function Js(zg){return function Mg(Ug){function Ag(Yg,Eg){var Pg=zg((Yg=qs(Yg)).h,(Eg=qs(Eg)).h),Dg=$s(Yg.s,Eg.s),Fg=$s(Yg.l,Eg.l),Lg=$s(Yg.opacity,Eg.opacity);return function(Hg){return Yg.h=Pg(Hg),Yg.s=Dg(Hg),Yg.l=Fg(Math.pow(Hg,Ug)),Yg.opacity=Lg(Hg),Yg+""}}return Ug=+Ug,Ag.gamma=Mg,Ag}(1)}function Ks(zg,Mg){return(Mg-=zg=+zg)?function(Ug){return(Ug-zg)/Mg}:jh(Mg)}function Qs(zg){return function(Mg,Ug){var Ag=zg(Mg=+Mg,Ug=+Ug);return function(Yg){return Yg<=Mg?0:Yg>=Ug?1:Ag(Yg)}}}function ed(zg){return function(Mg,Ug){var Ag=zg(Mg=+Mg,Ug=+Ug);return function(Yg){return 0>=Yg?Mg:1<=Yg?Ug:Ag(Yg)}}}function td(zg,Mg,Ug,Ag){var Yg=zg[0],Eg=zg[1],Pg=Mg[0],Dg=Mg[1];return Eg<Yg?(Yg=Ug(Eg,Yg),Pg=Ag(Dg,Pg)):(Yg=Ug(Yg,Eg),Pg=Ag(Pg,Dg)),function(Fg){return Pg(Yg(Fg))}}function nd(zg,Mg,Ug,Ag){var Yg=Math.min(zg.length,Mg.length)-1,Eg=Array(Yg),Pg=Array(Yg),Dg=-1;for(zg[Yg]<zg[0]&&(zg=zg.slice().reverse(),Mg=Mg.slice().reverse());++Dg<Yg;)Eg[Dg]=Ug(zg[Dg],zg[Dg+1]),Pg[Dg]=Ag(Mg[Dg],Mg[Dg+1]);return function(Fg){var Lg=Ip(zg,Fg,1,Yg)-1;return Pg[Lg](Eg[Lg](Fg))}}function od(zg,Mg){return Mg.domain(zg.domain()).range(zg.range()).interpolate(zg.interpolate()).clamp(zg.clamp())}function ad(zg,Mg){function Ug(){return Yg=2<Math.min(Dg.length,Fg.length)?nd:td,Eg=Pg=null,Ag}function Ag(Xg){return(Eg||(Eg=Yg(Dg,Fg,Hg?Qs(zg):zg,Lg)))(+Xg)}var Yg,Eg,Pg,Dg=Vh,Fg=Vh,Lg=Ph,Hg=!1;return Ag.invert=function(Xg){return(Pg||(Pg=Yg(Fg,Dg,Ks,Hg?ed(Mg):Mg)))(+Xg)},Ag.domain=function(Xg){return arguments.length?(Dg=O_.call(Xg,$h),Ug()):Dg.slice()},Ag.range=function(Xg){return arguments.length?(Fg=j_.call(Xg),Ug()):Fg.slice()},Ag.rangeRound=function(Xg){return Fg=j_.call(Xg),Lg=Dh,Ug()},Ag.clamp=function(Xg){return arguments.length?(Hg=!!Xg,Ug()):Hg},Ag.interpolate=function(Xg){return arguments.length?(Lg=Xg,Ug()):Lg},Ug()}function id(zg){var Mg=zg.domain;return zg.ticks=function(Ug){var Ag=Mg();return $p(Ag[0],Ag[Ag.length-1],null==Ug?10:Ug)},zg.tickFormat=function(Ug,Ag){return Bh(Mg(),Ug,Ag)},zg.nice=function(Ug){null==Ug&&(Ug=10);var Ag,Yg=Mg(),Eg=0,Pg=Yg.length-1,Dg=Yg[Eg],Fg=Yg[Pg];return Fg<Dg&&(Ag=Dg,Dg=Fg,Fg=Ag,Ag=Eg,Eg=Pg,Pg=Ag),0<(Ag=ja(Dg,Fg,Ug))?Ag=ja(Dg=Math.floor(Dg/Ag)*Ag,Fg=Math.ceil(Fg/Ag)*Ag,Ug):0>Ag&&(Ag=ja(Dg=Math.ceil(Dg*Ag)/Ag,Fg=Math.floor(Fg*Ag)/Ag,Ug)),0<Ag?(Yg[Eg]=Math.floor(Dg/Ag)*Ag,Yg[Pg]=Math.ceil(Fg/Ag)*Ag,Mg(Yg)):0>Ag&&(Yg[Eg]=Math.ceil(Dg*Ag)/Ag,Yg[Pg]=Math.floor(Fg*Ag)/Ag,Mg(Yg)),zg},zg}function ld(){var zg=ad(Ks,Mh);return zg.copy=function(){return od(zg,ld())},id(zg)}function rd(zg,Mg){return(Mg=Math.log(Mg/zg))?function(Ug){return Math.log(Ug/zg)/Mg}:jh(Mg)}function sd(zg,Mg){return 0>zg?function(Ug){return-Math.pow(-Mg,Ug)*Math.pow(-zg,1-Ug)}:function(Ug){return Math.pow(Mg,Ug)*Math.pow(zg,1-Ug)}}function dd(zg){return isFinite(zg)?+("1e"+zg):0>zg?0:zg}function cd(zg){return 10===zg?dd:zg===Math.E?Math.exp:function(Mg){return Math.pow(zg,Mg)}}function ud(zg){return zg===Math.E?Math.log:10===zg&&Math.log10||2===zg&&Math.log2||(zg=Math.log(zg),function(Mg){return Math.log(Mg)/zg})}function pd(zg){return function(Mg){return-zg(-Mg)}}function _d(){function zg(){return Yg=ud(Ag),Eg=cd(Ag),0>Ug()[0]&&(Yg=pd(Yg),Eg=pd(Eg)),Mg}var Mg=ad(rd,sd).domain([1,10]),Ug=Mg.domain,Ag=10,Yg=ud(10),Eg=cd(10);return Mg.base=function(Pg){return arguments.length?(Ag=+Pg,zg()):Ag},Mg.domain=function(Pg){return arguments.length?(Ug(Pg),zg()):Ug()},Mg.ticks=function(Pg){var Dg,Fg=Ug(),Lg=Fg[0],Hg=Fg[Fg.length-1];(Dg=Hg<Lg)&&(Ng=Lg,Lg=Hg,Hg=Ng);var Xg,qg,Ig,Ng=Yg(Lg),Og=Yg(Hg),jg=null==Pg?10:+Pg,$g=[];if(!(!(Ag%1)&&Og-Ng<jg))$g=$p(Ng,Og,Math.min(Og-Ng,jg)).map(Eg);else if(Ng=Math.round(Ng)-1,Og=Math.round(Og)+1,0<Lg){for(;Ng<Og;++Ng)for(qg=1,Xg=Eg(Ng);qg<Ag;++qg)if(!((Ig=Xg*qg)<Lg)){if(Ig>Hg)break;$g.push(Ig)}}else for(;Ng<Og;++Ng)for(qg=Ag-1,Xg=Eg(Ng);1<=qg;--qg)if(!((Ig=Xg*qg)<Lg)){if(Ig>Hg)break;$g.push(Ig)}return Dg?$g.reverse():$g},Mg.tickFormat=function(Pg,Dg){if(null==Dg&&(Dg=10===Ag?".0e":","),"function"!=typeof Dg&&(Dg=Ia.format(Dg)),Pg===1/0)return Dg;null==Pg&&(Pg=10);var Fg=Math.max(1,Ag*Pg/Mg.ticks().length);return function(Lg){var Hg=Lg/Eg(Math.round(Yg(Lg)));return Hg*Ag<Ag-.5&&(Hg*=Ag),Hg<=Fg?Dg(Lg):""}},Mg.nice=function(){return Ug(Zh(Ug(),{floor:function(Dg){return Eg(Math.floor(Yg(Dg)))},ceil:function(Dg){return Eg(Math.ceil(Yg(Dg)))}}))},Mg.copy=function(){return od(Mg,_d().base(Ag))},Mg}function hd(zg,Mg){return 0>zg?-Math.pow(-zg,Mg):Math.pow(zg,Mg)}function md(){var zg=1,Mg=ad(function(Ag,Yg){return(Yg=hd(Yg,zg)-(Ag=hd(Ag,zg)))?function(Eg){return(hd(Eg,zg)-Ag)/Yg}:jh(Yg)},function(Ag,Yg){return Yg=hd(Yg,zg)-(Ag=hd(Ag,zg)),function(Eg){return hd(Ag+Yg*Eg,1/zg)}}),Ug=Mg.domain;return Mg.exponent=function(Ag){return arguments.length?(zg=+Ag,Ug(Ug())):zg},Mg.copy=function(){return od(Mg,md().exponent(zg))},id(Mg)}function gd(zg){return new Date(zg)}function yd(zg){return zg instanceof Date?+zg:+new Date(+zg)}function fd(zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg,Fg){function Lg(Gg){return(Pg(Gg)<Gg?Ng:Eg(Gg)<Gg?Og:Yg(Gg)<Gg?jg:Ag(Gg)<Gg?$g:Mg(Gg)<Gg?Ug(Gg)<Gg?Vg:Bg:zg(Gg)<Gg?Zg:Wg)(Gg)}function Hg(Gg,Jg,Kg,Qg){if(null==Gg&&(Gg=10),"number"==typeof Gg){var ey=Math.abs(Kg-Jg)/Gg,ty=qp(function(ny){return ny[2]}).right(Rg,ey);ty===Rg.length?(Qg=$a(Jg/em,Kg/em,Gg),Gg=zg):ty?(Qg=(ty=Rg[ey/Rg[ty-1][2]<Rg[ty][2]/ey?ty-1:ty])[1],Gg=ty[0]):(Qg=$a(Jg,Kg,Gg),Gg=Dg)}return null==Qg?Gg:Gg.every(Qg)}var Xg=ad(Ks,Mh),qg=Xg.invert,Ig=Xg.domain,Ng=Fg(".%L"),Og=Fg(":%S"),jg=Fg("%I:%M"),$g=Fg("%I %p"),Vg=Fg("%a %d"),Bg=Fg("%b %d"),Zg=Fg("%B"),Wg=Fg("%Y"),Rg=[[Pg,1,Wh],[Pg,5,5*Wh],[Pg,15,15*Wh],[Pg,30,30*Wh],[Eg,1,Rh],[Eg,5,5*Rh],[Eg,15,15*Rh],[Eg,30,30*Rh],[Yg,1,Gh],[Yg,3,3*Gh],[Yg,6,6*Gh],[Yg,12,12*Gh],[Ag,1,Jh],[Ag,2,2*Jh],[Ug,1,Kh],[Mg,1,Qh],[Mg,3,3*Qh],[zg,1,em]];return Xg.invert=function(Gg){return new Date(qg(Gg))},Xg.domain=function(Gg){return arguments.length?Ig(O_.call(Gg,yd)):Ig().map(gd)},Xg.ticks=function(Gg,Jg){var Kg,Qg=Ig(),ey=Qg[0],ty=Qg[Qg.length-1],ny=ty<ey;return ny&&(Kg=ey,ey=ty,ty=Kg),Kg=Hg(Gg,ey,ty,Jg),Kg=Kg?Kg.range(ey,ty+1):[],ny?Kg.reverse():Kg},Xg.tickFormat=function(Gg,Jg){return null==Jg?Lg:Fg(Jg)},Xg.nice=function(Gg,Jg){var Kg=Ig();return(Gg=Hg(Gg,Kg[0],Kg[Kg.length-1],Jg))?Ig(Zh(Kg,Gg)):Xg},Xg.copy=function(){return od(Xg,fd(zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg,Fg))},Xg}function xd(zg){return"translate("+(zg+.5)+",0)"}function vd(zg){return"translate(0,"+(zg+.5)+")"}function bd(zg){return function(Mg){return+zg(Mg)}}function wd(zg){var Mg=Math.max(0,zg.bandwidth()-1)/2;return zg.round()&&(Mg=Math.round(Mg)),function(Ug){return+zg(Ug)+Mg}}function Td(){return!this.__axis}function kd(zg,Mg){function Ug(qg){var Ig=null==Yg?Mg.ticks?Mg.ticks.apply(Mg,Ag):Mg.domain():Yg,Ng=null==Eg?Mg.tickFormat?Mg.tickFormat.apply(Mg,Ag):om:Eg,Og=Math.max(Pg,0)+Fg,jg=Mg.range(),$g=+jg[0]+.5,Vg=+jg[jg.length-1]+.5,Bg=(Mg.bandwidth?wd:bd)(Mg.copy()),Zg=qg.selection?qg.selection():qg,Wg=Zg.selectAll(".domain").data([null]),Rg=Zg.selectAll(".tick").data(Ig,Mg).order(),Gg=Rg.exit(),Jg=Rg.enter().append("g").attr("class","tick"),Kg=Rg.select("line"),Qg=Rg.select("text");Wg=Wg.merge(Wg.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Rg=Rg.merge(Jg),Kg=Kg.merge(Jg.append("line").attr("stroke","#000").attr(Hg+"2",Lg*Pg)),Qg=Qg.merge(Jg.append("text").attr("fill","#000").attr(Hg,Lg*Og).attr("dy",zg===am?"0em":zg===lm?"0.71em":"0.32em")),qg!==Zg&&(Wg=Wg.transition(qg),Rg=Rg.transition(qg),Kg=Kg.transition(qg),Qg=Qg.transition(qg),Gg=Gg.transition(qg).attr("opacity",sm).attr("transform",function(ey){return isFinite(ey=Bg(ey))?Xg(ey):this.getAttribute("transform")}),Jg.attr("opacity",sm).attr("transform",function(ey){var ty=this.parentNode.__axis;return Xg(ty&&isFinite(ty=ty(ey))?ty:Bg(ey))})),Gg.remove(),Wg.attr("d",zg===rm||zg==im?"M"+Lg*Dg+","+$g+"H0.5V"+Vg+"H"+Lg*Dg:"M"+$g+","+Lg*Dg+"V0.5H"+Vg+"V"+Lg*Dg),Rg.attr("opacity",1).attr("transform",function(ey){return Xg(Bg(ey))}),Kg.attr(Hg+"2",Lg*Pg),Qg.attr(Hg,Lg*Og).text(Ng),Zg.filter(Td).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",zg===im?"start":zg===rm?"end":"middle"),Zg.each(function(){this.__axis=Bg})}var Ag=[],Yg=null,Eg=null,Pg=6,Dg=6,Fg=3,Lg=zg===am||zg===rm?-1:1,Hg=zg===rm||zg===im?"x":"y",Xg=zg===am||zg===lm?xd:vd;return Ug.scale=function(qg){return arguments.length?(Mg=qg,Ug):Mg},Ug.ticks=function(){return Ag=nm.call(arguments),Ug},Ug.tickArguments=function(qg){return arguments.length?(Ag=null==qg?[]:nm.call(qg),Ug):Ag.slice()},Ug.tickValues=function(qg){return arguments.length?(Yg=null==qg?null:nm.call(qg),Ug):Yg&&Yg.slice()},Ug.tickFormat=function(qg){return arguments.length?(Eg=qg,Ug):Eg},Ug.tickSize=function(qg){return arguments.length?(Pg=Dg=+qg,Ug):Pg},Ug.tickSizeInner=function(qg){return arguments.length?(Pg=+qg,Ug):Pg},Ug.tickSizeOuter=function(qg){return arguments.length?(Dg=+qg,Ug):Dg},Ug.tickPadding=function(qg){return arguments.length?(Fg=+qg,Ug):Fg},Ug}function Sd(){for(var zg,Mg=0,Ug=arguments.length,Ag={};Mg<Ug;++Mg){if(!(zg=arguments[Mg]+"")||zg in Ag)throw new Error("illegal type: "+zg);Ag[zg]=[]}return new Cd(Ag)}function Cd(zg){this._=zg}function zd(zg,Mg){return zg.trim().split(/^|\s+/).map(function(Ug){var Ag="",Yg=Ug.indexOf(".");if(0<=Yg&&(Ag=Ug.slice(Yg+1),Ug=Ug.slice(0,Yg)),Ug&&!Mg.hasOwnProperty(Ug))throw new Error("unknown type: "+Ug);return{type:Ug,name:Ag}})}function Md(zg,Mg){for(var Ug,Ag=0,Yg=zg.length;Ag<Yg;++Ag)if((Ug=zg[Ag]).name===Mg)return Ug.value}function Ud(zg,Mg,Ug){for(var Ag=0,Yg=zg.length;Ag<Yg;++Ag)if(zg[Ag].name===Mg){zg[Ag]=dm,zg=zg.slice(0,Ag).concat(zg.slice(Ag+1));break}return null!=Ug&&zg.push({name:Mg,value:Ug}),zg}function Ad(zg){return function(){var Mg=this.ownerDocument,Ug=this.namespaceURI;return Ug===cm&&Mg.documentElement.namespaceURI===cm?Mg.createElement(zg):Mg.createElementNS(Ug,zg)}}function Yd(zg){return function(){return this.ownerDocument.createElementNS(zg.space,zg.local)}}function Ed(zg,Mg,Ug){return zg=Pd(zg,Mg,Ug),function(Ag){var Yg=Ag.relatedTarget;Yg&&(Yg===this||8&Yg.compareDocumentPosition(this))||zg.call(this,Ag)}}function Pd(zg,Mg,Ug){return function(Ag){var Yg=Ia.event;Ia.event=Ag;try{zg.call(this,this.__data__,Mg,Ug)}finally{Ia.event=Yg}}}function Dd(zg){return zg.trim().split(/^|\s+/).map(function(Mg){var Ug="",Ag=Mg.indexOf(".");return 0<=Ag&&(Ug=Mg.slice(Ag+1),Mg=Mg.slice(0,Ag)),{type:Mg,name:Ug}})}function Fd(zg){return function(){var Mg=this.__on;if(Mg){for(var Ug,Ag=0,Yg=-1,Eg=Mg.length;Ag<Eg;++Ag)Ug=Mg[Ag],zg.type&&Ug.type!==zg.type||Ug.name!==zg.name?Mg[++Yg]=Ug:this.removeEventListener(Ug.type,Ug.listener,Ug.capture);++Yg?Mg.length=Yg:delete this.__on}}}function Ld(zg,Mg,Ug){var Ag=fm.hasOwnProperty(zg.type)?Ed:Pd;return function(Yg,Eg,Pg){var Dg,Fg=this.__on,Lg=Ag(Mg,Eg,Pg);if(Fg)for(var Hg=0,Xg=Fg.length;Hg<Xg;++Hg)if((Dg=Fg[Hg]).type===zg.type&&Dg.name===zg.name)return this.removeEventListener(Dg.type,Dg.listener,Dg.capture),this.addEventListener(Dg.type,Dg.listener=Lg,Dg.capture=Ug),void(Dg.value=Mg);this.addEventListener(zg.type,Lg,Ug),Dg={type:zg.type,name:zg.name,value:Mg,listener:Lg,capture:Ug},Fg?Fg.push(Dg):this.__on=[Dg]}}function Hd(zg,Mg,Ug,Ag){var Yg=Ia.event;zg.sourceEvent=Ia.event,Ia.event=zg;try{return Mg.apply(Ug,Ag)}finally{Ia.event=Yg}}function Xd(){}function qd(){return[]}function Id(zg,Mg){this.ownerDocument=zg.ownerDocument,this.namespaceURI=zg.namespaceURI,this._next=null,this._parent=zg,this.__data__=Mg}function Nd(zg,Mg,Ug,Ag,Yg,Eg){for(var Pg,Dg=0,Fg=Mg.length,Lg=Eg.length;Dg<Lg;++Dg)(Pg=Mg[Dg])?(Pg.__data__=Eg[Dg],Ag[Dg]=Pg):Ug[Dg]=new Id(zg,Eg[Dg]);for(;Dg<Fg;++Dg)(Pg=Mg[Dg])&&(Yg[Dg]=Pg)}function Od(zg,Mg,Ug,Ag,Yg,Eg,Pg){var Dg,Fg,Lg,Hg={},Xg=Mg.length,qg=Eg.length,Ig=Array(Xg);for(Dg=0;Dg<Xg;++Dg)(Fg=Mg[Dg])&&(Ig[Dg]=Lg=Cm+Pg.call(Fg,Fg.__data__,Dg,Mg),Lg in Hg?Yg[Dg]=Fg:Hg[Lg]=Fg);for(Dg=0;Dg<qg;++Dg)(Fg=Hg[Lg=Cm+Pg.call(zg,Eg[Dg],Dg,Eg)])?(Ag[Dg]=Fg,Fg.__data__=Eg[Dg],Hg[Lg]=null):Ug[Dg]=new Id(zg,Eg[Dg]);for(Dg=0;Dg<Xg;++Dg)(Fg=Mg[Dg])&&Hg[Ig[Dg]]===Fg&&(Yg[Dg]=Fg)}function jd(zg,Mg){return zg<Mg?-1:zg>Mg?1:zg>=Mg?0:NaN}function $d(zg){return function(){this.removeAttribute(zg)}}function Vd(zg){return function(){this.removeAttributeNS(zg.space,zg.local)}}function Bd(zg,Mg){return function(){this.setAttribute(zg,Mg)}}function Zd(zg,Mg){return function(){this.setAttributeNS(zg.space,zg.local,Mg)}}function Wd(zg,Mg){return function(){var Ug=Mg.apply(this,arguments);null==Ug?this.removeAttribute(zg):this.setAttribute(zg,Ug)}}function Rd(zg,Mg){return function(){var Ug=Mg.apply(this,arguments);null==Ug?this.removeAttributeNS(zg.space,zg.local):this.setAttributeNS(zg.space,zg.local,Ug)}}function Gd(zg){return function(){this.style.removeProperty(zg)}}function Jd(zg,Mg,Ug){return function(){this.style.setProperty(zg,Mg,Ug)}}function Kd(zg,Mg,Ug){return function(){var Ag=Mg.apply(this,arguments);null==Ag?this.style.removeProperty(zg):this.style.setProperty(zg,Ag,Ug)}}function Qd(zg,Mg){return zg.style.getPropertyValue(Mg)||zm(zg).getComputedStyle(zg,null).getPropertyValue(Mg)}function ec(zg){return function(){delete this[zg]}}function tc(zg,Mg){return function(){this[zg]=Mg}}function nc(zg,Mg){return function(){var Ug=Mg.apply(this,arguments);null==Ug?delete this[zg]:this[zg]=Ug}}function oc(zg){return zg.trim().split(/^|\s+/)}function ac(zg){return zg.classList||new ic(zg)}function ic(zg){this._node=zg,this._names=oc(zg.getAttribute("class")||"")}function lc(zg,Mg){for(var Ug=ac(zg),Ag=-1,Yg=Mg.length;++Ag<Yg;)Ug.add(Mg[Ag])}function rc(zg,Mg){for(var Ug=ac(zg),Ag=-1,Yg=Mg.length;++Ag<Yg;)Ug.remove(Mg[Ag])}function sc(zg){return function(){lc(this,zg)}}function dc(zg){return function(){rc(this,zg)}}function cc(zg,Mg){return function(){(Mg.apply(this,arguments)?lc:rc)(this,zg)}}function uc(){this.textContent=""}function pc(zg){return function(){this.textContent=zg}}function _c(zg){return function(){var Mg=zg.apply(this,arguments);this.textContent=null==Mg?"":Mg}}function hc(){this.innerHTML=""}function mc(zg){return function(){this.innerHTML=zg}}function gc(zg){return function(){var Mg=zg.apply(this,arguments);this.innerHTML=null==Mg?"":Mg}}function yc(){this.nextSibling&&this.parentNode.appendChild(this)}function fc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xc(){return null}function vc(){var zg=this.parentNode;zg&&zg.removeChild(this)}function bc(zg,Mg,Ug){var Ag=zm(zg),Yg=Ag.CustomEvent;"function"==typeof Yg?Yg=new Yg(Mg,Ug):(Yg=Ag.document.createEvent("Event"),Ug?(Yg.initEvent(Mg,Ug.bubbles,Ug.cancelable),Yg.detail=Ug.detail):Yg.initEvent(Mg,!1,!1)),zg.dispatchEvent(Yg)}function wc(zg,Mg){return function(){return bc(this,zg,Mg)}}function Tc(zg,Mg){return function(){return bc(this,zg,Mg.apply(this,arguments))}}function kc(zg,Mg){this._groups=zg,this._parents=Mg}function Sc(){return new kc([[document.documentElement]],Mm)}function Cc(){Ia.event.stopImmediatePropagation()}function zc(zg,Mg){var Ug=zg.document.documentElement,Ag=Um(zg).on("dragstart.drag",null);Mg&&(Ag.on("click.drag",Ym,!0),setTimeout(function(){Ag.on("click.drag",null)},0)),"onselectstart"in Ug?Ag.on("selectstart.drag",null):(Ug.style.MozUserSelect=Ug.__noselect,delete Ug.__noselect)}function Mc(zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg,Fg,Lg){this.target=zg,this.type=Mg,this.subject=Ug,this.identifier=Ag,this.active=Yg,this.x=Eg,this.y=Pg,this.dx=Dg,this.dy=Fg,this._=Lg}function Uc(){return!Ia.event.button}function Ac(){return this.parentNode}function Yc(zg){return null==zg?{x:Ia.event.x,y:Ia.event.y}:zg}function Ec(){return"ontouchstart"in this}function Pc(){return Nm||($m(Dc),Nm=jm.now()+Om)}function Dc(){Nm=0}function Fc(){this._call=this._time=this._next=null}function Lc(zg,Mg,Ug){var Ag=new Fc;return Ag.restart(zg,Mg,Ug),Ag}function Hc(){Pc(),++Lm;for(var zg,Mg=Dm;Mg;)0<=(zg=Nm-Mg._time)&&Mg._call.call(null,zg),Mg=Mg._next;--Lm}function Xc(){Nm=(Im=jm.now())+Om,Lm=Hm=0;try{Hc()}finally{Lm=0,Ic(),Nm=0}}function qc(){var zg=jm.now(),Mg=zg-Im;Mg>qm&&(Om-=Mg,Im=zg)}function Ic(){for(var zg,Mg,Ug=Dm,Ag=1/0;Ug;)Ug._call?(Ag>Ug._time&&(Ag=Ug._time),zg=Ug,Ug=Ug._next):(Mg=Ug._next,Ug._next=null,Ug=zg?zg._next=Mg:Dm=Mg);Fm=zg,Nc(Ag)}function Nc(zg){if(!Lm){Hm&&(Hm=clearTimeout(Hm));var Mg=zg-Nm;24<Mg?(zg<1/0&&(Hm=setTimeout(Xc,Mg)),Xm&&(Xm=clearInterval(Xm))):(Xm||(Im=Nm,Xm=setInterval(qc,qm)),Lm=1,$m(Xc))}}function Oc(zg,Mg){var Ug=zg.__transition;if(!Ug||!(Ug=Ug[Mg])||Ug.state>Wm)throw new Error("too late");return Ug}function jc(zg,Mg){var Ug=zg.__transition;if(!Ug||!(Ug=Ug[Mg])||Ug.state>Gm)throw new Error("too late");return Ug}function $c(zg,Mg){var Ug=zg.__transition;if(!Ug||!(Ug=Ug[Mg]))throw new Error("too late");return Ug}function Vc(zg,Mg,Ug){function Ag(Fg){var Lg,Hg,Xg,qg;if(Ug.state!==Rm)return Eg();for(Lg in Dg)if((qg=Dg[Lg]).name===Ug.name){if(qg.state===Jm)return Vm(Ag);qg.state===Km?(qg.state=eg,qg.timer.stop(),qg.on.call("interrupt",zg,zg.__data__,qg.index,qg.group),delete Dg[Lg]):+Lg<Mg&&(qg.state=eg,qg.timer.stop(),delete Dg[Lg])}if(Vm(function(){Ug.state===Jm&&(Ug.state=Km,Ug.timer.restart(Yg,Ug.delay,Ug.time),Yg(Fg))}),Ug.state=Gm,Ug.on.call("start",zg,zg.__data__,Ug.index,Ug.group),Ug.state===Gm){for(Ug.state=Jm,Pg=Array(Xg=Ug.tween.length),Lg=0,Hg=-1;Lg<Xg;++Lg)(qg=Ug.tween[Lg].value.call(zg,zg.__data__,Ug.index,Ug.group))&&(Pg[++Hg]=qg);Pg.length=Hg+1}}function Yg(Fg){for(var Lg=Fg<Ug.duration?Ug.ease.call(null,Fg/Ug.duration):(Ug.timer.restart(Eg),Ug.state=Qm,1),Hg=-1,Xg=Pg.length;++Hg<Xg;)Pg[Hg].call(null,Lg);Ug.state===Qm&&(Ug.on.call("end",zg,zg.__data__,Ug.index,Ug.group),Eg())}function Eg(){for(var Fg in Ug.state=eg,Ug.timer.stop(),delete Dg[Mg],Dg)return;delete zg.__transition}var Pg,Dg=zg.__transition;Dg[Mg]=Ug,Ug.timer=Lc(function(Fg){Ug.state=Rm,Ug.timer.restart(Ag,Ug.delay,Ug.time),Ug.delay<=Fg&&Ag(Fg-Ug.delay)},0,Ug.time)}function Bc(zg,Mg){var Ug,Ag;return function(){var Yg=jc(this,zg),Eg=Yg.tween;if(Eg!==Ug)for(var Pg=0,Dg=(Ag=Ug=Eg).length;Pg<Dg;++Pg)if(Ag[Pg].name===Mg){(Ag=Ag.slice()).splice(Pg,1);break}Yg.tween=Ag}}function Zc(zg,Mg,Ug){var Ag,Yg;if("function"!=typeof Ug)throw new Error;return function(){var Eg=jc(this,zg),Pg=Eg.tween;if(Pg!==Ag){Yg=(Ag=Pg).slice();for(var Dg={name:Mg,value:Ug},Fg=0,Lg=Yg.length;Fg<Lg;++Fg)if(Yg[Fg].name===Mg){Yg[Fg]=Dg;break}Fg===Lg&&Yg.push(Dg)}Eg.tween=Yg}}function Wc(zg,Mg,Ug){var Ag=zg._id;return zg.each(function(){var Yg=jc(this,Ag);(Yg.value||(Yg.value={}))[Mg]=Ug.apply(this,arguments)}),function(Yg){return $c(Yg,Ag).value[Mg]}}function Rc(zg){return function(){this.removeAttribute(zg)}}function Gc(zg){return function(){this.removeAttributeNS(zg.space,zg.local)}}function Jc(zg,Mg,Ug){var Ag,Yg;return function(){var Eg=this.getAttribute(zg);return Eg===Ug?null:Eg===Ag?Yg:Yg=Mg(Ag=Eg,Ug)}}function Kc(zg,Mg,Ug){var Ag,Yg;return function(){var Eg=this.getAttributeNS(zg.space,zg.local);return Eg===Ug?null:Eg===Ag?Yg:Yg=Mg(Ag=Eg,Ug)}}function Qc(zg,Mg,Ug){var Ag,Yg,Eg;return function(){var Pg,Dg=Ug(this);{if(null!=Dg)return(Pg=this.getAttribute(zg))===Dg?null:Pg===Ag&&Dg===Yg?Eg:Eg=Mg(Ag=Pg,Yg=Dg);this.removeAttribute(zg)}}}function ep(zg,Mg,Ug){var Ag,Yg,Eg;return function(){var Pg,Dg=Ug(this);{if(null!=Dg)return(Pg=this.getAttributeNS(zg.space,zg.local))===Dg?null:Pg===Ag&&Dg===Yg?Eg:Eg=Mg(Ag=Pg,Yg=Dg);this.removeAttributeNS(zg.space,zg.local)}}}function tp(zg,Mg){function Ug(){var Ag=this,Yg=Mg.apply(Ag,arguments);return Yg&&function(Eg){Ag.setAttributeNS(zg.space,zg.local,Yg(Eg))}}return Ug._value=Mg,Ug}function np(zg,Mg){function Ug(){var Ag=this,Yg=Mg.apply(Ag,arguments);return Yg&&function(Eg){Ag.setAttribute(zg,Yg(Eg))}}return Ug._value=Mg,Ug}function op(zg,Mg){return function(){Oc(this,zg).delay=+Mg.apply(this,arguments)}}function ap(zg,Mg){return Mg=+Mg,function(){Oc(this,zg).delay=Mg}}function ip(zg,Mg){return function(){jc(this,zg).duration=+Mg.apply(this,arguments)}}function lp(zg,Mg){return Mg=+Mg,function(){jc(this,zg).duration=Mg}}function rp(zg,Mg){if("function"!=typeof Mg)throw new Error;return function(){jc(this,zg).ease=Mg}}function sp(zg){return(zg+"").trim().split(/^|\s+/).every(function(Mg){var Ug=Mg.indexOf(".");return 0<=Ug&&(Mg=Mg.slice(0,Ug)),!Mg||"start"===Mg})}function dp(zg,Mg,Ug){var Ag,Yg,Eg=sp(Mg)?Oc:jc;return function(){var Pg=Eg(this,zg),Dg=Pg.on;Dg!==Ag&&(Yg=(Ag=Dg).copy()).on(Mg,Ug),Pg.on=Yg}}function cp(zg){return function(){var Mg=this.parentNode;for(var Ug in this.__transition)if(+Ug!==zg)return;Mg&&Mg.removeChild(this)}}function up(zg,Mg){var Ug,Ag,Yg;return function(){var Eg=Qd(this,zg),Pg=(this.style.removeProperty(zg),Qd(this,zg));return Eg===Pg?null:Eg===Ug&&Pg===Ag?Yg:Yg=Mg(Ug=Eg,Ag=Pg)}}function pp(zg){return function(){this.style.removeProperty(zg)}}function hp(zg,Mg,Ug){var Ag,Yg;return function(){var Eg=Qd(this,zg);return Eg===Ug?null:Eg===Ag?Yg:Yg=Mg(Ag=Eg,Ug)}}function mp(zg,Mg,Ug){var Ag,Yg,Eg;return function(){var Pg=Qd(this,zg),Dg=Ug(this);return null==Dg&&(this.style.removeProperty(zg),Dg=Qd(this,zg)),Pg===Dg?null:Pg===Ag&&Dg===Yg?Eg:Eg=Mg(Ag=Pg,Yg=Dg)}}function gp(zg,Mg,Ug){function Ag(){var Yg=this,Eg=Mg.apply(Yg,arguments);return Eg&&function(Pg){Yg.style.setProperty(zg,Eg(Pg),Ug)}}return Ag._value=Mg,Ag}function yp(zg){return function(){this.textContent=zg}}function fp(zg){return function(){var Mg=zg(this);this.textContent=null==Mg?"":Mg}}function xp(zg,Mg,Ug,Ag){this._groups=zg,this._parents=Mg,this._name=Ug,this._id=Ag}function vp(){return++ig}function bp(zg,Mg){for(var Ug;!(Ug=zg.__transition)||!(Ug=Ug[Mg]);)if(!(zg=zg.parentNode))return sg.time=Pc(),sg;return Ug}function wp(zg,Mg,Ug){this.target=zg,this.type=Mg,this.transform=Ug}function Tp(zg,Mg,Ug){this.k=zg,this.x=Mg,this.y=Ug}function kp(zg){return zg.__zoom||cg}function Sp(){Ia.event.stopImmediatePropagation()}function Cp(){return!Ia.event.button}function zp(){var zg,Mg,Ug=this;return Ug instanceof SVGElement?(zg=(Ug=Ug.ownerSVGElement||Ug).width.baseVal.value,Mg=Ug.height.baseVal.value):(zg=Ug.clientWidth,Mg=Ug.clientHeight),[[0,0],[zg,Mg]]}function Mp(){return this.__zoom||cg}function Up(){return-Ia.event.deltaY*(Ia.event.deltaMode?120:1)/500}function Ap(){return"ontouchstart"in this}function Yp(){Ia.event.stopImmediatePropagation()}function Ep(zg){return{type:zg}}function Pp(){return!Ia.event.button}function Dp(){var zg=this.ownerSVGElement||this;return[[0,0],[zg.width.baseVal.value,zg.height.baseVal.value]]}function Fp(zg){for(;!zg.__brush;)if(!(zg=zg.parentNode))return;return zg.__brush}function Lp(zg){return zg[0][0]===zg[1][0]||zg[0][1]===zg[1][1]}function Hp(zg){function Mg(qg){var Ig=qg.property("__brush",Pg).selectAll(".overlay").data([Ep("overlay")]);Ig.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wg.overlay).merge(Ig).each(function(){var Og=Fp(this).extent;Um(this).attr("x",Og[0][0]).attr("y",Og[0][1]).attr("width",Og[1][0]-Og[0][0]).attr("height",Og[1][1]-Og[0][1])}),qg.selectAll(".selection").data([Ep("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Ng=qg.selectAll(".handle").data(zg.handles,function(Og){return Og.type});Ng.exit().remove(),Ng.enter().append("rect").attr("class",function(Og){return"handle handle--"+Og.type}).attr("cursor",function(Og){return wg[Og.type]}),qg.each(Ug).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",Eg)}function Ug(){var qg=Um(this),Ig=Fp(this).selection;Ig?(qg.selectAll(".selection").style("display",null).attr("x",Ig[0][0]).attr("y",Ig[0][1]).attr("width",Ig[1][0]-Ig[0][0]).attr("height",Ig[1][1]-Ig[0][1]),qg.selectAll(".handle").style("display",null).attr("x",function(Ng){return"e"===Ng.type[Ng.type.length-1]?Ig[1][0]-Xg/2:Ig[0][0]-Xg/2}).attr("y",function(Ng){return"s"===Ng.type[0]?Ig[1][1]-Xg/2:Ig[0][1]-Xg/2}).attr("width",function(Ng){return"n"===Ng.type||"s"===Ng.type?Ig[1][0]-Ig[0][0]+Xg:Xg}).attr("height",function(Ng){return"e"===Ng.type||"w"===Ng.type?Ig[1][1]-Ig[0][1]+Xg:Xg})):qg.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function Ag(qg,Ig){return qg.__brush.emitter||new Yg(qg,Ig)}function Yg(qg,Ig){this.that=qg,this.args=Ig,this.state=qg.__brush,this.active=0}function Eg(){function qg(){var vy=bm(ty);!_y||Qg||ey||(Math.abs(vy[0]-my[0])>Math.abs(vy[1]-my[1])?ey=!0:Qg=!0),my=vy,Kg=!0,hg(),Ig()}function Ig(){var vy;switch(Gg=my[0]-hy[0],Jg=my[1]-hy[1],oy){case gg:case mg:ay&&(Gg=Math.max(dy-Og,Math.min(uy-Bg,Gg)),jg=Og+Gg,Zg=Bg+Gg),iy&&(Jg=Math.max(cy-$g,Math.min(py-Wg,Jg)),Vg=$g+Jg,Rg=Wg+Jg);break;case yg:0>ay?(Gg=Math.max(dy-Og,Math.min(uy-Og,Gg)),jg=Og+Gg,Zg=Bg):0<ay&&(Gg=Math.max(dy-Bg,Math.min(uy-Bg,Gg)),jg=Og,Zg=Bg+Gg),0>iy?(Jg=Math.max(cy-$g,Math.min(py-$g,Jg)),Vg=$g+Jg,Rg=Wg):0<iy&&(Jg=Math.max(cy-Wg,Math.min(py-Wg,Jg)),Vg=$g,Rg=Wg+Jg);break;case fg:ay&&(jg=Math.max(dy,Math.min(uy,Og-Gg*ay)),Zg=Math.max(dy,Math.min(uy,Bg+Gg*ay))),iy&&(Vg=Math.max(cy,Math.min(py,$g-Jg*iy)),Rg=Math.max(cy,Math.min(py,Wg+Jg*iy)));}Zg<jg&&(ay*=-1,vy=Og,Og=Bg,Bg=vy,vy=jg,jg=Zg,Zg=vy,ny in Tg&&fy.attr("cursor",wg[ny=Tg[ny]])),Rg<Vg&&(iy*=-1,vy=$g,$g=Wg,Wg=vy,vy=Vg,Vg=Rg,Rg=vy,ny in kg&&fy.attr("cursor",wg[ny=kg[ny]])),ly.selection&&(sy=ly.selection),Qg&&(jg=sy[0][0],Zg=sy[1][0]),ey&&(Vg=sy[0][1],Rg=sy[1][1]),sy[0][0]===jg&&sy[0][1]===Vg&&sy[1][0]===Zg&&sy[1][1]===Rg||(ly.selection=[[jg,Vg],[Zg,Rg]],Ug.call(ty),gy.brush())}function Ng(){if(Yp(),Ia.event.touches){if(Ia.event.touches.length)return;Dg&&clearTimeout(Dg),Dg=setTimeout(function(){Dg=null},500),yy.on("touchmove.brush touchend.brush touchcancel.brush",null)}else zc(Ia.event.view,Kg),xy.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);yy.attr("pointer-events","all"),fy.attr("cursor",wg.overlay),ly.selection&&(sy=ly.selection),Lp(sy)&&(ly.selection=null,Ug.call(ty)),gy.end()}if(Ia.event.touches){if(Ia.event.changedTouches.length<Ia.event.touches.length)return hg();}else if(Dg)return;if(Lg.apply(this,arguments)){var Og,jg,$g,Vg,Bg,Zg,Wg,Rg,Gg,Jg,Kg,Qg,ey,ty=this,ny=Ia.event.target.__data__.type,oy="selection"===(Ia.event.metaKey?ny="overlay":ny)?mg:Ia.event.altKey?fg:yg,ay=zg===vg?null:Sg[ny],iy=zg===xg?null:Cg[ny],ly=Fp(ty),ry=ly.extent,sy=ly.selection,dy=ry[0][0],cy=ry[0][1],uy=ry[1][0],py=ry[1][1],_y=ay&&iy&&Ia.event.shiftKey,hy=bm(ty),my=hy,gy=Ag(ty,arguments).beforestart();"overlay"===ny?ly.selection=sy=[[Og=zg===vg?dy:hy[0],$g=zg===xg?cy:hy[1]],[Bg=zg===vg?uy:Og,Wg=zg===xg?py:$g]]:(Og=sy[0][0],$g=sy[0][1],Bg=sy[1][0],Wg=sy[1][1]),jg=Og,Vg=$g,Zg=Bg,Rg=Wg;var yy=Um(ty).attr("pointer-events","none"),fy=yy.selectAll(".overlay").attr("cursor",wg[ny]);if(Ia.event.touches)yy.on("touchmove.brush",qg,!0).on("touchend.brush touchcancel.brush",Ng,!0);else{var xy=Um(Ia.event.view).on("keydown.brush",function(){switch(Ia.event.keyCode){case 16:_y=ay&&iy;break;case 18:oy===yg&&(ay&&(Bg=Zg-Gg*ay,Og=jg+Gg*ay),iy&&(Wg=Rg-Jg*iy,$g=Vg+Jg*iy),oy=fg,Ig());break;case 32:oy!==yg&&oy!==fg||(0>ay?Bg=Zg-Gg:0<ay&&(Og=jg-Gg),0>iy?Wg=Rg-Jg:0<iy&&($g=Vg-Jg),oy=gg,fy.attr("cursor",wg.selection),Ig());break;default:return;}hg()},!0).on("keyup.brush",function(){switch(Ia.event.keyCode){case 16:_y&&(Qg=ey=_y=!1,Ig());break;case 18:oy===fg&&(0>ay?Bg=Zg:0<ay&&(Og=jg),0>iy?Wg=Rg:0<iy&&($g=Vg),oy=yg,Ig());break;case 32:oy===gg&&(Ia.event.altKey?(ay&&(Bg=Zg-Gg*ay,Og=jg+Gg*ay),iy&&(Wg=Rg-Jg*iy,$g=Vg+Jg*iy),oy=fg):(0>ay?Bg=Zg:0<ay&&(Og=jg),0>iy?Wg=Rg:0<iy&&($g=Vg),oy=yg),fy.attr("cursor",wg[ny]),Ig());break;default:return;}hg()},!0).on("mousemove.brush",qg,!0).on("mouseup.brush",Ng,!0);Em(Ia.event.view)}Yp(),ng(ty),Ug.call(ty),gy.start()}}function Pg(){var qg=this.__brush||{selection:null};return qg.extent=Fg.apply(this,arguments),qg.dim=zg,qg}var Dg,Fg=Dp,Lg=Pp,Hg=Sd(Mg,"start","brush","end"),Xg=6;return Mg.move=function(qg,Ig){qg.selection?qg.on("start.brush",function(){Ag(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){Ag(this,arguments).end()}).tween("brush",function(){function Ng(Wg){jg.selection=1===Wg&&Lp(Bg)?null:Zg(Wg),Ug.call(Og),$g.brush()}var Og=this,jg=Og.__brush,$g=Ag(Og,arguments),Vg=jg.selection,Bg=zg.input("function"==typeof Ig?Ig.apply(this,arguments):Ig,jg.extent),Zg=Ph(Vg,Bg);return Vg&&Bg?Ng:Ng(1)}):qg.each(function(){var Ng=this,Og=arguments,jg=Ng.__brush,$g=zg.input("function"==typeof Ig?Ig.apply(Ng,Og):Ig,jg.extent),Vg=Ag(Ng,Og).beforestart();ng(Ng),jg.selection=null==$g||Lp($g)?null:$g,Ug.call(Ng),Vg.start().brush().end()})},Yg.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Ig){Hd(new _g(Mg,Ig,zg.output(this.state.selection)),Hg.apply,Hg,[Ig,this.that,this.args])}},Mg.extent=function(qg){return arguments.length?(Fg="function"==typeof qg?qg:pg([[+qg[0][0],+qg[0][1]],[+qg[1][0],+qg[1][1]]]),Mg):Fg},Mg.filter=function(qg){return arguments.length?(Lg="function"==typeof qg?qg:pg(!!qg),Mg):Lg},Mg.handleSize=function(qg){return arguments.length?(Xg=+qg,Mg):Xg},Mg.on=function(){var qg=Hg.on.apply(Hg,arguments);return qg===Hg?Mg:qg},Mg}var Xp=function(Mg,Ug){return Mg<Ug?-1:Mg>Ug?1:Mg>=Ug?0:NaN},qp=function(Mg){return 1===Mg.length&&(Mg=Oa(Mg)),{left:function(Ag,Yg,Eg,Pg){for(null==Eg&&(Eg=0),null==Pg&&(Pg=Ag.length);Eg<Pg;){var Dg=Eg+Pg>>>1;0>Mg(Ag[Dg],Yg)?Eg=Dg+1:Pg=Dg}return Eg},right:function(Ag,Yg,Eg,Pg){for(null==Eg&&(Eg=0),null==Pg&&(Pg=Ag.length);Eg<Pg;){var Dg=Eg+Pg>>>1;0<Mg(Ag[Dg],Yg)?Pg=Dg:Eg=Dg+1}return Eg}}},Ip=qp(Xp).right,Np=Math.sqrt(50),Op=Math.sqrt(10),jp=Math.sqrt(2),$p=function(Mg,Ug,Ag){var Yg,Eg,Pg,Dg=Ug<Mg,Fg=-1;if(Dg&&(Yg=Mg,Mg=Ug,Ug=Yg),0===(Pg=ja(Mg,Ug,Ag))||!isFinite(Pg))return[];if(0<Pg)for(Mg=Math.ceil(Mg/Pg),Ug=Math.floor(Ug/Pg),Eg=Array(Yg=Math.ceil(Ug-Mg+1));++Fg<Yg;)Eg[Fg]=(Mg+Fg)*Pg;else for(Mg=Math.floor(Mg*Pg),Ug=Math.ceil(Ug*Pg),Eg=Array(Yg=Math.ceil(Mg-Ug+1));++Fg<Yg;)Eg[Fg]=(Mg-Fg)/Pg;return Dg&&Eg.reverse(),Eg},Vp=Math.PI,Bp=2*Vp;Va.prototype=Ba.prototype={constructor:Va,moveTo:function(Mg,Ug){this._+="M"+(this._x0=this._x1=+Mg)+","+(this._y0=this._y1=+Ug)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(Mg,Ug){this._+="L"+(this._x1=+Mg)+","+(this._y1=+Ug)},quadraticCurveTo:function(Mg,Ug,Ag,Yg){this._+="Q"+ +Mg+","+ +Ug+","+(this._x1=+Ag)+","+(this._y1=+Yg)},bezierCurveTo:function(Mg,Ug,Ag,Yg,Eg,Pg){this._+="C"+ +Mg+","+ +Ug+","+ +Ag+","+ +Yg+","+(this._x1=+Eg)+","+(this._y1=+Pg)},arcTo:function(Mg,Ug,Ag,Yg,Eg){Mg=+Mg,Ug=+Ug,Ag=+Ag,Yg=+Yg,Eg=+Eg;var Pg=this._x1,Dg=this._y1,Fg=Ag-Mg,Lg=Yg-Ug,Hg=Pg-Mg,Xg=Dg-Ug,qg=Hg*Hg+Xg*Xg;if(0>Eg)throw new Error("negative radius: "+Eg);if(null===this._x1)this._+="M"+(this._x1=Mg)+","+(this._y1=Ug);else if(!(1e-6<qg));else if(1e-6<Math.abs(Xg*Fg-Lg*Hg)&&Eg){var Ig=Ag-Pg,Ng=Yg-Dg,Og=Fg*Fg+Lg*Lg,$g=Math.sqrt(Og),Vg=Math.sqrt(qg),Bg=Eg*Math.tan((Vp-Math.acos((Og+qg-(Ig*Ig+Ng*Ng))/(2*$g*Vg)))/2),Zg=Bg/Vg,Wg=Bg/$g;1e-6<Math.abs(Zg-1)&&(this._+="L"+(Mg+Zg*Hg)+","+(Ug+Zg*Xg)),this._+="A"+Eg+","+Eg+",0,0,"+ +(Xg*Ig>Hg*Ng)+","+(this._x1=Mg+Wg*Fg)+","+(this._y1=Ug+Wg*Lg)}else this._+="L"+(this._x1=Mg)+","+(this._y1=Ug)},arc:function(Mg,Ug,Ag,Yg,Eg,Pg){Mg=+Mg,Ug=+Ug;var Dg=(Ag=+Ag)*Math.cos(Yg),Fg=Ag*Math.sin(Yg),Lg=Mg+Dg,Hg=Ug+Fg,Xg=1^Pg,qg=Pg?Yg-Eg:Eg-Yg;if(0>Ag)throw new Error("negative radius: "+Ag);null===this._x1?this._+="M"+Lg+","+Hg:(1e-6<Math.abs(this._x1-Lg)||1e-6<Math.abs(this._y1-Hg))&&(this._+="L"+Lg+","+Hg),Ag&&(0>qg&&(qg=qg%Bp+Bp),qg>Bp-1e-6?this._+="A"+Ag+","+Ag+",0,1,"+Xg+","+(Mg-Dg)+","+(Ug-Fg)+"A"+Ag+","+Ag+",0,1,"+Xg+","+(this._x1=Lg)+","+(this._y1=Hg):1e-6<qg&&(this._+="A"+Ag+","+Ag+",0,"+ +(qg>=Vp)+","+Xg+","+(this._x1=Mg+Ag*Math.cos(Eg))+","+(this._y1=Ug+Ag*Math.sin(Eg))))},rect:function(Mg,Ug,Ag,Yg){this._+="M"+(this._x0=this._x1=+Mg)+","+(this._y0=this._y1=+Ug)+"h"+ +Ag+"v"+ +Yg+"h"+-Ag+"Z"},toString:function(){return this._}};var Wp=function(Mg){return function(){return Mg}},Rp=1e-12;Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Mg,Ug){switch(Mg=+Mg,Ug=+Ug,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2;default:this._context.lineTo(Mg,Ug);}}};var Gp=function(Mg){return new Za(Mg)},Jp=function(){function Mg(Fg){var Lg,Hg,Xg,qg=Fg.length,Ig=!1;for(null==Eg&&(Dg=Pg(Xg=Ba())),Lg=0;Lg<=qg;++Lg)!(Lg<qg&&Yg(Hg=Fg[Lg],Lg,Fg))===Ig&&((Ig=!Ig)?Dg.lineStart():Dg.lineEnd()),Ig&&Dg.point(+Ug(Hg,Lg,Fg),+Ag(Hg,Lg,Fg));if(Xg)return Dg=null,Xg+""||null}var Ug=Wa,Ag=Ra,Yg=Wp(!0),Eg=null,Pg=Gp,Dg=null;return Mg.x=function(Fg){return arguments.length?(Ug="function"==typeof Fg?Fg:Wp(+Fg),Mg):Ug},Mg.y=function(Fg){return arguments.length?(Ag="function"==typeof Fg?Fg:Wp(+Fg),Mg):Ag},Mg.defined=function(Fg){return arguments.length?(Yg="function"==typeof Fg?Fg:Wp(!!Fg),Mg):Yg},Mg.curve=function(Fg){return arguments.length?(Pg=Fg,null!=Eg&&(Dg=Pg(Eg)),Mg):Pg},Mg.context=function(Fg){return arguments.length?(null==Fg?Eg=Dg=null:Dg=Pg(Eg=Fg),Mg):Eg},Mg};Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ga(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Mg,Ug){switch(Mg=+Mg,Ug=+Ug,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ga(this,Mg,Ug);}this._x0=this._x1,this._x1=Mg,this._y0=this._y1,this._y1=Ug}},Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ka(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Mg,Ug){switch(Mg=+Mg,Ug=+Ug,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2,this._x1=Mg,this._y1=Ug;break;case 2:this._point=3;default:Ka(this,Mg,Ug);}this._x0=this._x1,this._x1=this._x2,this._x2=Mg,this._y0=this._y1,this._y1=this._y2,this._y2=Ug}};var Kp=function zg(Mg){function Ug(Ag){return new Qa(Ag,Mg)}return Ug.tension=function(Ag){return zg(+Ag)},Ug}(0);tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Mg,Ug){if(Mg=+Mg,Ug=+Ug,this._point){var Ag=this._x2-Mg,Yg=this._y2-Ug;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ag*Ag+Yg*Yg,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2;break;case 2:this._point=3;default:el(this,Mg,Ug);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Mg,this._y0=this._y1,this._y1=this._y2,this._y2=Ug}};var Qp=function zg(Mg){function Ug(Ag){return Mg?new tl(Ag,Mg):new Qa(Ag,0)}return Ug.alpha=function(Ag){return zg(+Ag)},Ug}(.5);ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:il(this,this._t0,al(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Mg,Ug){var Ag=NaN;if(Mg=+Mg,Ug=+Ug,Mg!==this._x1||Ug!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2;break;case 2:this._point=3,il(this,al(this,Ag=ol(this,Mg,Ug)),Ag);break;default:il(this,this._t0,Ag=ol(this,Mg,Ug));}this._x0=this._x1,this._x1=Mg,this._y0=this._y1,this._y1=Ug,this._t0=Ag}}},(function(zg){this._context=new rl(zg)}.prototype=Object.create(ll.prototype)).point=function(zg,Mg){ll.prototype.point.call(this,Mg,zg)},rl.prototype={moveTo:function(Mg,Ug){this._context.moveTo(Ug,Mg)},closePath:function(){this._context.closePath()},lineTo:function(Mg,Ug){this._context.lineTo(Ug,Mg)},bezierCurveTo:function(Mg,Ug,Ag,Yg,Eg,Pg){this._context.bezierCurveTo(Ug,Mg,Yg,Ag,Pg,Eg)}},sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Mg=this._x,Ug=this._y,Ag=Mg.length;if(Ag)if(this._line?this._context.lineTo(Mg[0],Ug[0]):this._context.moveTo(Mg[0],Ug[0]),2===Ag)this._context.lineTo(Mg[1],Ug[1]);else for(var Yg=dl(Mg),Eg=dl(Ug),Pg=0,Dg=1;Dg<Ag;++Pg,++Dg)this._context.bezierCurveTo(Yg[0][Pg],Eg[0][Pg],Yg[1][Pg],Eg[1][Pg],Mg[Dg],Ug[Dg]);(this._line||0!==this._line&&1===Ag)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Mg,Ug){this._x.push(+Mg),this._y.push(+Ug)}},cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(Mg,Ug){switch(Mg=+Mg,Ug=+Ug,this._point){case 0:this._point=1,this._line?this._context.lineTo(Mg,Ug):this._context.moveTo(Mg,Ug);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,Ug),this._context.lineTo(Mg,Ug);else{var Ag=this._x*(1-this._t)+Mg*this._t;this._context.lineTo(Ag,this._y),this._context.lineTo(Ag,Ug)}}this._x=Mg,this._y=Ug}};var e_=new Date,t_=new Date,n_=ul(function(){},function(zg,Mg){zg.setTime(+zg+Mg)},function(zg,Mg){return Mg-zg});n_.every=function(zg){return zg=Math.floor(zg),isFinite(zg)&&0<zg?1<zg?ul(function(Mg){Mg.setTime(Math.floor(Mg/zg)*zg)},function(Mg,Ug){Mg.setTime(+Mg+Ug*zg)},function(Mg,Ug){return(Ug-Mg)/zg}):n_:null};var o_=6e4,a_=6048e5,i_=ul(function(zg){zg.setTime(1e3*Math.floor(zg/1e3))},function(zg,Mg){zg.setTime(+zg+1e3*Mg)},function(zg,Mg){return(Mg-zg)/1e3},function(zg){return zg.getUTCSeconds()}),l_=ul(function(zg){zg.setTime(Math.floor(zg/o_)*o_)},function(zg,Mg){zg.setTime(+zg+Mg*o_)},function(zg,Mg){return(Mg-zg)/o_},function(zg){return zg.getMinutes()}),r_=ul(function(zg){var Mg=zg.getTimezoneOffset()*o_%36e5;0>Mg&&(Mg+=36e5),zg.setTime(36e5*Math.floor((+zg-Mg)/36e5)+Mg)},function(zg,Mg){zg.setTime(+zg+36e5*Mg)},function(zg,Mg){return(Mg-zg)/36e5},function(zg){return zg.getHours()}),s_=ul(function(zg){zg.setHours(0,0,0,0)},function(zg,Mg){zg.setDate(zg.getDate()+Mg)},function(zg,Mg){return(Mg-zg-(Mg.getTimezoneOffset()-zg.getTimezoneOffset())*o_)/864e5},function(zg){return zg.getDate()-1}),d_=pl(0),c_=pl(1),u_=(pl(2),pl(3),pl(4),pl(5),pl(6),ul(function(zg){zg.setDate(1),zg.setHours(0,0,0,0)},function(zg,Mg){zg.setMonth(zg.getMonth()+Mg)},function(zg,Mg){return Mg.getMonth()-zg.getMonth()+12*(Mg.getFullYear()-zg.getFullYear())},function(zg){return zg.getMonth()})),p_=ul(function(zg){zg.setMonth(0,1),zg.setHours(0,0,0,0)},function(zg,Mg){zg.setFullYear(zg.getFullYear()+Mg)},function(zg,Mg){return Mg.getFullYear()-zg.getFullYear()},function(zg){return zg.getFullYear()});p_.every=function(zg){return isFinite(zg=Math.floor(zg))&&0<zg?ul(function(Mg){Mg.setFullYear(Math.floor(Mg.getFullYear()/zg)*zg),Mg.setMonth(0,1),Mg.setHours(0,0,0,0)},function(Mg,Ug){Mg.setFullYear(Mg.getFullYear()+Ug*zg)}):null},ul(function(zg){zg.setUTCSeconds(0,0)},function(zg,Mg){zg.setTime(+zg+Mg*o_)},function(zg,Mg){return(Mg-zg)/o_},function(zg){return zg.getUTCMinutes()}),ul(function(zg){zg.setUTCMinutes(0,0,0)},function(zg,Mg){zg.setTime(+zg+36e5*Mg)},function(zg,Mg){return(Mg-zg)/36e5},function(zg){return zg.getUTCHours()});var __=ul(function(zg){zg.setUTCHours(0,0,0,0)},function(zg,Mg){zg.setUTCDate(zg.getUTCDate()+Mg)},function(zg,Mg){return(Mg-zg)/864e5},function(zg){return zg.getUTCDate()-1}),h_=_l(0),m_=_l(1),g_=(_l(2),_l(3),_l(4),_l(5),_l(6),ul(function(zg){zg.setUTCDate(1),zg.setUTCHours(0,0,0,0)},function(zg,Mg){zg.setUTCMonth(zg.getUTCMonth()+Mg)},function(zg,Mg){return Mg.getUTCMonth()-zg.getUTCMonth()+12*(Mg.getUTCFullYear()-zg.getUTCFullYear())},function(zg){return zg.getUTCMonth()}),ul(function(zg){zg.setUTCMonth(0,1),zg.setUTCHours(0,0,0,0)},function(zg,Mg){zg.setUTCFullYear(zg.getUTCFullYear()+Mg)},function(zg,Mg){return Mg.getUTCFullYear()-zg.getUTCFullYear()},function(zg){return zg.getUTCFullYear()}));g_.every=function(zg){return isFinite(zg=Math.floor(zg))&&0<zg?ul(function(Mg){Mg.setUTCFullYear(Math.floor(Mg.getUTCFullYear()/zg)*zg),Mg.setUTCMonth(0,1),Mg.setUTCHours(0,0,0,0)},function(Mg,Ug){Mg.setUTCFullYear(Mg.getUTCFullYear()+Ug*zg)}):null};var y_,f_=function(Mg,Ug){if(0>(Ag=(Mg=Ug?Mg.toExponential(Ug-1):Mg.toExponential()).indexOf("e")))return null;var Ag,Yg=Mg.slice(0,Ag);return[1<Yg.length?Yg[0]+Yg.slice(2):Yg,+Mg.slice(Ag+1)]},x_=function(Mg){return(Mg=f_(Math.abs(Mg)))?Mg[1]:NaN},v_=function(Mg,Ug){return function(Ag,Yg){for(var Eg=Ag.length,Pg=[],Dg=0,Fg=Mg[0],Lg=0;0<Eg&&0<Fg&&(Lg+Fg+1>Yg&&(Fg=Math.max(1,Yg-Lg)),Pg.push(Ag.substring(Eg-=Fg,Eg+Fg)),!((Lg+=Fg+1)>Yg));)Fg=Mg[Dg=(Dg+1)%Mg.length];return Pg.reverse().join(Ug)}},b_=function(Mg){return function(Ug){return Ug.replace(/[0-9]/g,function(Ag){return Mg[+Ag]})}},w_=function(Mg,Ug){var Ag=f_(Mg,Ug);if(!Ag)return Mg+"";var Yg=Ag[0],Eg=Ag[1];return 0>Eg?"0."+Array(-Eg).join("0")+Yg:Yg.length>Eg+1?Yg.slice(0,Eg+1)+"."+Yg.slice(Eg+1):Yg+Array(Eg-Yg.length+2).join("0")},T_={"":function(Mg,Ug){t:for(var Ag,Yg=(Mg=Mg.toPrecision(Ug)).length,Eg=1,Pg=-1;Eg<Yg;++Eg)switch(Mg[Eg]){case".":Pg=Ag=Eg;break;case"0":0===Pg&&(Pg=Eg),Ag=Eg;break;case"e":break t;default:0<Pg&&(Pg=0);}return 0<Pg?Mg.slice(0,Pg)+Mg.slice(Ag+1):Mg},"%":function(Mg,Ug){return(100*Mg).toFixed(Ug)},b:function(Mg){return Math.round(Mg).toString(2)},c:function(Mg){return Mg+""},d:function(Mg){return Math.round(Mg).toString(10)},e:function(Mg,Ug){return Mg.toExponential(Ug)},f:function(Mg,Ug){return Mg.toFixed(Ug)},g:function(Mg,Ug){return Mg.toPrecision(Ug)},o:function(Mg){return Math.round(Mg).toString(8)},p:function(Mg,Ug){return w_(100*Mg,Ug)},r:w_,s:function(Mg,Ug){var Ag=f_(Mg,Ug);if(!Ag)return Mg+"";var Yg=Ag[0],Eg=Ag[1],Pg=Eg-(y_=3*Math.max(-8,Math.min(8,Math.floor(Eg/3))))+1,Dg=Yg.length;return Pg===Dg?Yg:Pg>Dg?Yg+Array(Pg-Dg+1).join("0"):0<Pg?Yg.slice(0,Pg)+"."+Yg.slice(Pg):"0."+Array(1-Pg).join("0")+f_(Mg,Math.max(0,Ug+Pg-1))[0]},X:function(Mg){return Math.round(Mg).toString(16).toUpperCase()},x:function(Mg){return Math.round(Mg).toString(16)}},k_=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;hl.prototype=ml.prototype,ml.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var S_,C_,z_=function(Mg){return Mg},M_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],U_=function(Mg){function Ug(Fg){function Lg(Gg){var Jg,Kg,Qg,ey=Bg,ty=Zg;if("c"===Vg)ty=Wg(Gg)+ty,Gg="";else{var ny=0>(Gg=+Gg);if(Gg=Wg(Math.abs(Gg),$g),ny&&0==+Gg&&(ny=!1),ey=(ny?"("===qg?qg:"-":"-"===qg||"("===qg?"":qg)+ey,ty=ty+("s"===Vg?M_[8+y_/3]:"")+(ny&&"("===qg?")":""),Rg)for(Jg=-1,Kg=Gg.length;++Jg<Kg;)if(48>(Qg=Gg.charCodeAt(Jg))||57<Qg){ty=(46===Qg?Eg+Gg.slice(Jg+1):Gg.slice(Jg))+ty,Gg=Gg.slice(0,Jg);break}}jg&&!Ng&&(Gg=Ag(Gg,1/0));var oy=ey.length+Gg.length+ty.length,ay=oy<Og?Array(Og-oy+1).join(Hg):"";switch(jg&&Ng&&(Gg=Ag(ay+Gg,ay.length?Og-ty.length:1/0),ay=""),Xg){case"<":Gg=ey+Gg+ty+ay;break;case"=":Gg=ey+ay+Gg+ty;break;case"^":Gg=ay.slice(0,oy=ay.length>>1)+ey+Gg+ty+ay.slice(oy);break;default:Gg=ay+ey+Gg+ty;}return Pg(Gg)}var Hg=(Fg=hl(Fg)).fill,Xg=Fg.align,qg=Fg.sign,Ig=Fg.symbol,Ng=Fg.zero,Og=Fg.width,jg=Fg.comma,$g=Fg.precision,Vg=Fg.type,Bg="$"===Ig?Yg[0]:"#"===Ig&&/[boxX]/.test(Vg)?"0"+Vg.toLowerCase():"",Zg="$"===Ig?Yg[1]:/[%p]/.test(Vg)?Dg:"",Wg=T_[Vg],Rg=!Vg||/[defgprs%]/.test(Vg);return $g=null==$g?Vg?6:12:/[gprs]/.test(Vg)?Math.max(1,Math.min(21,$g)):Math.max(0,Math.min(20,$g)),Lg.toString=function(){return Fg+""},Lg}var Ag=Mg.grouping&&Mg.thousands?v_(Mg.grouping,Mg.thousands):z_,Yg=Mg.currency,Eg=Mg.decimal,Pg=Mg.numerals?b_(Mg.numerals):z_,Dg=Mg.percent||"%";return{format:Ug,formatPrefix:function(Lg,Hg){var Xg=Ug((Lg=hl(Lg),Lg.type="f",Lg)),qg=3*Math.max(-8,Math.min(8,Math.floor(x_(Hg)/3))),Ig=Math.pow(10,-qg),Ng=M_[8+qg/3];return function(Og){return Xg(Ig*Og)+Ng}}}};gl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var A_,Y_,E_,P_=function(Mg){return Math.max(0,-x_(Math.abs(Mg)))},D_=function(Mg,Ug){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(x_(Ug)/3)))-x_(Math.abs(Mg)))},F_=function(Mg,Ug){return Mg=Math.abs(Mg),Ug=Math.abs(Ug)-Mg,Math.max(0,x_(Ug)-x_(Mg))+1},L_={"-":"",_:" ",0:"0"},H_=/^\s*\d+/,X_=/^%/,q_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;hs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||Y_("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||E_("%Y-%m-%dT%H:%M:%S.%LZ"),ms.prototype=gs.prototype={constructor:ms,has:function(Mg){return"$"+Mg in this},get:function(Mg){return this["$"+Mg]},set:function(Mg,Ug){return this["$"+Mg]=Ug,this},remove:function(Mg){var Ug="$"+Mg;return Ug in this&&delete this[Ug]},clear:function(){for(var Mg in this)"$"===Mg[0]&&delete this[Mg]},keys:function(){var Mg=[];for(var Ug in this)"$"===Ug[0]&&Mg.push(Ug.slice(1));return Mg},values:function(){var Mg=[];for(var Ug in this)"$"===Ug[0]&&Mg.push(this[Ug]);return Mg},entries:function(){var Mg=[];for(var Ug in this)"$"===Ug[0]&&Mg.push({key:Ug.slice(1),value:this[Ug]});return Mg},size:function(){var Mg=0;for(var Ug in this)"$"===Ug[0]&&++Mg;return Mg},empty:function(){for(var Mg in this)if("$"===Mg[0])return!1;return!0},each:function(Mg){for(var Ug in this)"$"===Ug[0]&&Mg(this[Ug],Ug.slice(1),this)}};var I_=gs.prototype;ys.prototype=function(zg,Mg){var Ug=new ys;if(zg instanceof ys)zg.each(function(Eg){Ug.add(Eg)});else if(zg){var Ag=-1,Yg=zg.length;if(null==Mg)for(;++Ag<Yg;)Ug.add(zg[Ag]);else for(;++Ag<Yg;)Ug.add(Mg(zg[Ag],Ag,zg))}return Ug}.prototype={constructor:ys,has:I_.has,add:function(Mg){return Mg+="",this["$"+Mg]=Mg,this},remove:I_.remove,clear:I_.clear,values:I_.keys,size:I_.size,empty:I_.empty,each:I_.each};var N_=Array.prototype,O_=N_.map,j_=N_.slice,$_=function(Mg,Ug,Ag){Mg.prototype=Ug.prototype=Ag,Ag.constructor=Mg},W_=/^#([0-9a-f]{3})$/,R_=/^#([0-9a-f]{6})$/,G_=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,J_=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,K_=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Q_=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,eh=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,th=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$_(xs,vs,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),$_(Ss,ks,fs(xs,{brighter:function(Mg){return Mg=null==Mg?1/.7:Math.pow(1/.7,Mg),new Ss(this.r*Mg,this.g*Mg,this.b*Mg,this.opacity)},darker:function(Mg){return Mg=null==Mg?.7:Math.pow(.7,Mg),new Ss(this.r*Mg,this.g*Mg,this.b*Mg,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var Mg=this.opacity;return(1===(Mg=isNaN(Mg)?1:Math.max(0,Math.min(1,Mg)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===Mg?")":", "+Mg+")")}})),$_(Ms,function(zg,Mg,Ug,Ag){return 1===arguments.length?zs(zg):new Ms(zg,Mg,Ug,null==Ag?1:Ag)},fs(xs,{brighter:function(Mg){return Mg=null==Mg?1/.7:Math.pow(1/.7,Mg),new Ms(this.h,this.s,this.l*Mg,this.opacity)},darker:function(Mg){return Mg=null==Mg?.7:Math.pow(.7,Mg),new Ms(this.h,this.s,this.l*Mg,this.opacity)},rgb:function(){var Mg=this.h%360+360*(0>this.h),Ug=isNaN(Mg)||isNaN(this.s)?0:this.s,Ag=this.l,Yg=Ag+(.5>Ag?Ag:1-Ag)*Ug,Eg=2*Ag-Yg;return new Ss(Us(240<=Mg?Mg-240:Mg+120,Eg,Yg),Us(Mg,Eg,Yg),Us(120>Mg?Mg+240:Mg-120,Eg,Yg),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var oh=Math.PI/180,ah=180/Math.PI,ih=.95047,lh=1,rh=1.08883,sh=4/29,dh=6/29,ch=3*dh*dh,uh=dh*dh*dh;$_(Ys,function(zg,Mg,Ug,Ag){return 1===arguments.length?As(zg):new Ys(zg,Mg,Ug,null==Ag?1:Ag)},fs(xs,{brighter:function(Mg){return new Ys(this.l+18*(null==Mg?1:Mg),this.a,this.b,this.opacity)},darker:function(Mg){return new Ys(this.l-18*(null==Mg?1:Mg),this.a,this.b,this.opacity)},rgb:function(){var Mg=(this.l+16)/116,Ug=isNaN(this.a)?Mg:Mg+this.a/500,Ag=isNaN(this.b)?Mg:Mg-this.b/200;return Mg=lh*Ps(Mg),Ug=ih*Ps(Ug),Ag=rh*Ps(Ag),new Ss(Ds(3.2404542*Ug-1.5371385*Mg-.4985314*Ag),Ds(-.969266*Ug+1.8760108*Mg+.041556*Ag),Ds(.0556434*Ug-.2040259*Mg+1.0572252*Ag),this.opacity)}})),$_(Hs,function(zg,Mg,Ug,Ag){return 1===arguments.length?Ls(zg):new Hs(zg,Mg,Ug,null==Ag?1:Ag)},fs(xs,{brighter:function(Mg){return new Hs(this.h,this.c,this.l+18*(null==Mg?1:Mg),this.opacity)},darker:function(Mg){return new Hs(this.h,this.c,this.l-18*(null==Mg?1:Mg),this.opacity)},rgb:function(){return As(this).rgb()}}));var ph=-.14861,_h=1.78277,hh=-.29227,mh=-.90649,gh=1.97294,yh=gh*mh,fh=gh*_h,xh=_h*hh-mh*ph;$_(Is,qs,fs(xs,{brighter:function(Mg){return Mg=null==Mg?1/.7:Math.pow(1/.7,Mg),new Is(this.h,this.s,this.l*Mg,this.opacity)},darker:function(Mg){return Mg=null==Mg?.7:Math.pow(.7,Mg),new Is(this.h,this.s,this.l*Mg,this.opacity)},rgb:function(){var Mg=isNaN(this.h)?0:(this.h+120)*oh,Ug=+this.l,Ag=isNaN(this.s)?0:this.s*Ug*(1-Ug),Yg=Math.cos(Mg),Eg=Math.sin(Mg);return new Ss(255*(Ug+Ag*(ph*Yg+_h*Eg)),255*(Ug+Ag*(hh*Yg+mh*Eg)),255*(Ug+Ag*(gh*Yg)),this.opacity)}}));var vh,bh,wh,Th,kh=function(Mg){return function(){return Mg}},Sh=function zg(Mg){function Ug(Yg,Eg){var Pg=Ag((Yg=ks(Yg)).r,(Eg=ks(Eg)).r),Dg=Ag(Yg.g,Eg.g),Fg=Ag(Yg.b,Eg.b),Lg=$s(Yg.opacity,Eg.opacity);return function(Hg){return Yg.r=Pg(Hg),Yg.g=Dg(Hg),Yg.b=Fg(Hg),Yg.opacity=Lg(Hg),Yg+""}}var Ag=js(Mg);return Ug.gamma=zg,Ug}(1),Ch=function(Mg,Ug){var Ag,Yg=Ug?Ug.length:0,Eg=Mg?Math.min(Yg,Mg.length):0,Pg=Array(Yg),Dg=Array(Yg);for(Ag=0;Ag<Eg;++Ag)Pg[Ag]=Ph(Mg[Ag],Ug[Ag]);for(;Ag<Yg;++Ag)Dg[Ag]=Ug[Ag];return function(Fg){for(Ag=0;Ag<Eg;++Ag)Dg[Ag]=Pg[Ag](Fg);return Dg}},zh=function(Mg,Ug){var Ag=new Date;return Mg=+Mg,Ug-=Mg,function(Yg){return Ag.setTime(Mg+Ug*Yg),Ag}},Mh=function(Mg,Ug){return Mg=+Mg,Ug-=Mg,function(Ag){return Mg+Ug*Ag}},Uh=function(Mg,Ug){var Ag,Yg={},Eg={};for(Ag in null!==Mg&&"object"==("undefined"===typeof Mg?"undefined":babelHelpers.typeof(Mg))||(Mg={}),null!==Ug&&"object"==("undefined"===typeof Ug?"undefined":babelHelpers.typeof(Ug))||(Ug={}),Ug)Ag in Mg?Yg[Ag]=Ph(Mg[Ag],Ug[Ag]):Eg[Ag]=Ug[Ag];return function(Pg){for(Ag in Yg)Eg[Ag]=Yg[Ag](Pg);return Eg}},Ah=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yh=new RegExp(Ah.source,"g"),Eh=function(Mg,Ug){var Ag,Yg,Eg,Pg=Ah.lastIndex=Yh.lastIndex=0,Dg=-1,Fg=[],Lg=[];for(Mg+="",Ug+="";(Ag=Ah.exec(Mg))&&(Yg=Yh.exec(Ug));)(Eg=Yg.index)>Pg&&(Eg=Ug.slice(Pg,Eg),Fg[Dg]?Fg[Dg]+=Eg:Fg[++Dg]=Eg),(Ag=Ag[0])===(Yg=Yg[0])?Fg[Dg]?Fg[Dg]+=Yg:Fg[++Dg]=Yg:(Fg[++Dg]=null,Lg.push({i:Dg,x:Mh(Ag,Yg)})),Pg=Yh.lastIndex;return Pg<Ug.length&&(Eg=Ug.slice(Pg),Fg[Dg]?Fg[Dg]+=Eg:Fg[++Dg]=Eg),2>Fg.length?Lg[0]?Bs(Lg[0].x):Vs(Ug):(Ug=Lg.length,function(Hg){for(var Xg,qg=0;qg<Ug;++qg)Fg[(Xg=Lg[qg]).i]=Xg.x(Hg);return Fg.join("")})},Ph=function(Mg,Ug){var Ag,Yg="undefined"===typeof Ug?"undefined":babelHelpers.typeof(Ug);return null==Ug||"boolean"===Yg?kh(Ug):("number"===Yg?Mh:"string"===Yg?(Ag=vs(Ug))?(Ug=Ag,Sh):Eh:Ug instanceof vs?Sh:Ug instanceof Date?zh:Array.isArray(Ug)?Ch:"function"!=typeof Ug.valueOf&&"function"!=typeof Ug.toString||isNaN(Ug)?Uh:Mh)(Mg,Ug)},Dh=function(Mg,Ug){return Mg=+Mg,Ug-=Mg,function(Ag){return Math.round(Mg+Ug*Ag)}},Fh=180/Math.PI,Lh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Hh=function(Mg,Ug,Ag,Yg,Eg,Pg){var Dg,Fg,Lg;return(Dg=Math.sqrt(Mg*Mg+Ug*Ug))&&(Mg/=Dg,Ug/=Dg),(Lg=Mg*Ag+Ug*Yg)&&(Ag-=Mg*Lg,Yg-=Ug*Lg),(Fg=Math.sqrt(Ag*Ag+Yg*Yg))&&(Ag/=Fg,Yg/=Fg,Lg/=Fg),Mg*Yg<Ug*Ag&&(Mg=-Mg,Ug=-Ug,Lg=-Lg,Dg=-Dg),{translateX:Eg,translateY:Pg,rotate:Math.atan2(Ug,Mg)*Fh,skewX:Math.atan(Lg)*Fh,scaleX:Dg,scaleY:Fg}},Xh=Zs(function(zg){return"none"===zg?Lh:(vh||(vh=document.createElement("DIV"),bh=document.documentElement,wh=document.defaultView),vh.style.transform=zg,zg=wh.getComputedStyle(bh.appendChild(vh),null).getPropertyValue("transform"),bh.removeChild(vh),zg=zg.slice(7,-1).split(","),Hh(+zg[0],+zg[1],+zg[2],+zg[3],+zg[4],+zg[5]))},"px, ","px)","deg)"),qh=Zs(function(zg){return null==zg?Lh:(Th||(Th=document.createElementNS("http://www.w3.org/2000/svg","g")),Th.setAttribute("transform",zg),(zg=Th.transform.baseVal.consolidate())?(zg=zg.matrix,Hh(zg.a,zg.b,zg.c,zg.d,zg.e,zg.f)):Lh)},", ",")",")"),Ih=Math.SQRT2,Nh=function(Mg,Ug){var Ag,Yg,Eg=Mg[0],Pg=Mg[1],Dg=Mg[2],Fg=Ug[0],Lg=Ug[1],Hg=Ug[2],Xg=Fg-Eg,qg=Lg-Pg,Ig=Xg*Xg+qg*qg;if(1e-12>Ig)Yg=Math.log(Hg/Dg)/Ih,Ag=function(Zg){return[Eg+Zg*Xg,Pg+Zg*qg,Dg*Math.exp(Ih*Zg*Yg)]};else{var Ng=Math.sqrt(Ig),Og=(Hg*Hg-Dg*Dg+4*Ig)/(2*(2*Dg)*Ng),jg=(Hg*Hg-Dg*Dg-4*Ig)/(2*(2*Hg)*Ng),$g=Math.log(Math.sqrt(Og*Og+1)-Og),Vg=Math.log(Math.sqrt(jg*jg+1)-jg);Yg=(Vg-$g)/Ih,Ag=function(Zg){var Wg=Zg*Yg,Bg=Ws($g),Rg=Dg/(2*Ng)*(Bg*Gs(Ih*Wg+$g)-Rs($g));return[Eg+Rg*Xg,Pg+Rg*qg,Dg*Bg/Ws(Ih*Wg+$g)]}}return Ag.duration=1e3*Yg,Ag};Js(function(zg,Mg){var Ug=Mg-zg;return Ug?Ns(zg,180<Ug||-180>Ug?Ug-360*Math.round(Ug/360):Ug):kh(isNaN(zg)?Mg:zg)});var Oh=Js($s),jh=function(Mg){return function(){return Mg}},$h=function(Mg){return+Mg},Vh=[0,1],Bh=function(Mg,Ug,Ag){var Yg,Eg=Mg[0],Pg=Mg[Mg.length-1],Dg=$a(Eg,Pg,null==Ug?10:Ug);switch((Ag=hl(null==Ag?",f":Ag)).type){case"s":var Fg=Math.max(Math.abs(Eg),Math.abs(Pg));return null!=Ag.precision||isNaN(Yg=D_(Dg,Fg))||(Ag.precision=Yg),C_(Ag,Fg);case"":case"e":case"g":case"p":case"r":null!=Ag.precision||isNaN(Yg=F_(Dg,Math.max(Math.abs(Eg),Math.abs(Pg))))||(Ag.precision=Yg-("e"===Ag.type));break;case"f":case"%":null!=Ag.precision||isNaN(Yg=P_(Dg))||(Ag.precision=Yg-2*("%"===Ag.type));}return Ia.format(Ag)},Zh=function(Mg,Ug){var Ag,Yg=0,Eg=(Mg=Mg.slice()).length-1,Pg=Mg[Yg],Dg=Mg[Eg];return Dg<Pg&&(Ag=Yg,Yg=Eg,Eg=Ag,Ag=Pg,Pg=Dg,Dg=Ag),Mg[Yg]=Ug.floor(Pg),Mg[Eg]=Ug.ceil(Dg),Mg},Wh=1e3,Rh=60*Wh,Gh=60*Rh,Jh=24*Gh,Kh=7*Jh,Qh=30*Jh,em=365*Jh,tm=function(Mg){return Mg.match(/.{6}/g).map(function(Ug){return"#"+Ug})};tm("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),tm("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tm("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),tm("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Oh(qs(300,.5,0),qs(-240,.5,1)),Oh(qs(-100,.75,.35),qs(80,1.5,.8)),Oh(qs(260,.75,.35),qs(80,1.5,.8)),qs();var nm=Array.prototype.slice,om=function(Mg){return Mg},am=1,im=2,lm=3,rm=4,sm=1e-6,dm={value:function(){}};Cd.prototype=Sd.prototype={constructor:Cd,on:function(Mg,Ug){var Ag,Yg=this._,Eg=zd(Mg+"",Yg),Pg=-1,Dg=Eg.length;{if(!(2>arguments.length)){if(null!=Ug&&"function"!=typeof Ug)throw new Error("invalid callback: "+Ug);for(;++Pg<Dg;)if(Ag=(Mg=Eg[Pg]).type)Yg[Ag]=Ud(Yg[Ag],Mg.name,Ug);else if(null==Ug)for(Ag in Yg)Yg[Ag]=Ud(Yg[Ag],Mg.name,null);return this}for(;++Pg<Dg;)if((Ag=(Mg=Eg[Pg]).type)&&(Ag=Md(Yg[Ag],Mg.name)))return Ag}},copy:function(){var Mg={},Ug=this._;for(var Ag in Ug)Mg[Ag]=Ug[Ag].slice();return new Cd(Mg)},call:function(Mg,Ug){if(0<(Ag=arguments.length-2))for(var Ag,Yg,Eg=Array(Ag),Pg=0;Pg<Ag;++Pg)Eg[Pg]=arguments[Pg+2];if(!this._.hasOwnProperty(Mg))throw new Error("unknown type: "+Mg);for(Pg=0,Ag=(Yg=this._[Mg]).length;Pg<Ag;++Pg)Yg[Pg].value.apply(Ug,Eg)},apply:function(Mg,Ug,Ag){if(!this._.hasOwnProperty(Mg))throw new Error("unknown type: "+Mg);for(var Yg=this._[Mg],Eg=0,Pg=Yg.length;Eg<Pg;++Eg)Yg[Eg].value.apply(Ug,Ag)}};var cm="http://www.w3.org/1999/xhtml",um={svg:"http://www.w3.org/2000/svg",xhtml:cm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pm=function(Mg){var Ug=Mg+="",Ag=Ug.indexOf(":");return 0<=Ag&&"xmlns"!==(Ug=Mg.slice(0,Ag))&&(Mg=Mg.slice(Ag+1)),um.hasOwnProperty(Ug)?{space:um[Ug],local:Mg}:Mg},_m=function(Mg){var Ug=pm(Mg);return(Ug.local?Yd:Ad)(Ug)},hm=function(Mg){return function(){return this.matches(Mg)}};if("undefined"!=typeof document){var mm=document.documentElement;if(!mm.matches){var gm=mm.webkitMatchesSelector||mm.msMatchesSelector||mm.mozMatchesSelector||mm.oMatchesSelector;hm=function(Mg){return function(){return gm.call(this,Mg)}}}}var ym=hm,fm={};Ia.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(fm={mouseenter:"mouseover",mouseleave:"mouseout"}));var xm=function(){for(var Mg,Ug=Ia.event;Mg=Ug.sourceEvent;)Ug=Mg;return Ug},vm=function(Mg,Ug){var Ag=Mg.ownerSVGElement||Mg;if(Ag.createSVGPoint){var Yg=Ag.createSVGPoint();return Yg.x=Ug.clientX,Yg.y=Ug.clientY,Yg=Yg.matrixTransform(Mg.getScreenCTM().inverse()),[Yg.x,Yg.y]}var Eg=Mg.getBoundingClientRect();return[Ug.clientX-Eg.left-Mg.clientLeft,Ug.clientY-Eg.top-Mg.clientTop]},bm=function(Mg){var Ug=xm();return Ug.changedTouches&&(Ug=Ug.changedTouches[0]),vm(Mg,Ug)},wm=function(Mg){return null==Mg?Xd:function(){return this.querySelector(Mg)}},Tm=function(Mg){return null==Mg?qd:function(){return this.querySelectorAll(Mg)}},km=function(Mg){return Array(Mg.length)};Id.prototype={constructor:Id,appendChild:function(Mg){return this._parent.insertBefore(Mg,this._next)},insertBefore:function(Mg,Ug){return this._parent.insertBefore(Mg,Ug)},querySelector:function(Mg){return this._parent.querySelector(Mg)},querySelectorAll:function(Mg){return this._parent.querySelectorAll(Mg)}};var Sm=function(Mg){return function(){return Mg}},Cm="$",zm=function(Mg){return Mg.ownerDocument&&Mg.ownerDocument.defaultView||Mg.document&&Mg||Mg.defaultView};ic.prototype={add:function(Mg){0>this._names.indexOf(Mg)&&(this._names.push(Mg),this._node.setAttribute("class",this._names.join(" ")))},remove:function(Mg){var Ug=this._names.indexOf(Mg);0<=Ug&&(this._names.splice(Ug,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(Mg){return 0<=this._names.indexOf(Mg)}};var Mm=[null];kc.prototype=Sc.prototype={constructor:kc,select:function(Mg){"function"!=typeof Mg&&(Mg=wm(Mg));for(var Ug=this._groups,Ag=Ug.length,Yg=Array(Ag),Eg=0;Eg<Ag;++Eg)for(var Pg,Dg,Fg=Ug[Eg],Lg=Fg.length,Hg=Yg[Eg]=Array(Lg),Xg=0;Xg<Lg;++Xg)(Pg=Fg[Xg])&&(Dg=Mg.call(Pg,Pg.__data__,Xg,Fg))&&("__data__"in Pg&&(Dg.__data__=Pg.__data__),Hg[Xg]=Dg);return new kc(Yg,this._parents)},selectAll:function(Mg){"function"!=typeof Mg&&(Mg=Tm(Mg));for(var Ug=this._groups,Ag=Ug.length,Yg=[],Eg=[],Pg=0;Pg<Ag;++Pg)for(var Dg,Fg=Ug[Pg],Lg=Fg.length,Hg=0;Hg<Lg;++Hg)(Dg=Fg[Hg])&&(Yg.push(Mg.call(Dg,Dg.__data__,Hg,Fg)),Eg.push(Dg));return new kc(Yg,Eg)},filter:function(Mg){"function"!=typeof Mg&&(Mg=ym(Mg));for(var Ug=this._groups,Ag=Ug.length,Yg=Array(Ag),Eg=0;Eg<Ag;++Eg)for(var Pg,Dg=Ug[Eg],Fg=Dg.length,Lg=Yg[Eg]=[],Hg=0;Hg<Fg;++Hg)(Pg=Dg[Hg])&&Mg.call(Pg,Pg.__data__,Hg,Dg)&&Lg.push(Pg);return new kc(Yg,this._parents)},data:function(Mg,Ug){if(!Mg)return Ng=Array(this.size()),Hg=-1,this.each(function(Rg){Ng[++Hg]=Rg}),Ng;var Ag=Ug?Od:Nd,Yg=this._parents,Eg=this._groups;"function"!=typeof Mg&&(Mg=Sm(Mg));for(var Pg=Eg.length,Dg=Array(Pg),Fg=Array(Pg),Lg=Array(Pg),Hg=0;Hg<Pg;++Hg){var Xg=Yg[Hg],qg=Eg[Hg],Ig=qg.length,Ng=Mg.call(Xg,Xg&&Xg.__data__,Hg,Yg),Og=Ng.length,jg=Fg[Hg]=Array(Og),$g=Dg[Hg]=Array(Og);Ag(Xg,qg,jg,$g,Lg[Hg]=Array(Ig),Ng,Ug);for(var Vg,Bg,Zg=0,Wg=0;Zg<Og;++Zg)if(Vg=jg[Zg]){for(Zg>=Wg&&(Wg=Zg+1);!(Bg=$g[Wg])&&++Wg<Og;);Vg._next=Bg||null}}return Dg=new kc(Dg,Yg),Dg._enter=Fg,Dg._exit=Lg,Dg},enter:function(){return new kc(this._enter||this._groups.map(km),this._parents)},exit:function(){return new kc(this._exit||this._groups.map(km),this._parents)},merge:function(Mg){for(var Ug=this._groups,Ag=Mg._groups,Yg=Ug.length,Eg=Ag.length,Pg=Math.min(Yg,Eg),Dg=Array(Yg),Fg=0;Fg<Pg;++Fg)for(var Lg,Hg=Ug[Fg],Xg=Ag[Fg],qg=Hg.length,Ig=Dg[Fg]=Array(qg),Ng=0;Ng<qg;++Ng)(Lg=Hg[Ng]||Xg[Ng])&&(Ig[Ng]=Lg);for(;Fg<Yg;++Fg)Dg[Fg]=Ug[Fg];return new kc(Dg,this._parents)},order:function(){for(var Mg=this._groups,Ug=-1,Ag=Mg.length;++Ug<Ag;)for(var Yg,Eg=Mg[Ug],Pg=Eg.length-1,Dg=Eg[Pg];0<=--Pg;)(Yg=Eg[Pg])&&(Dg&&Dg!==Yg.nextSibling&&Dg.parentNode.insertBefore(Yg,Dg),Dg=Yg);return this},sort:function(Mg){Mg||(Mg=jd);for(var Ug=this._groups,Ag=Ug.length,Yg=Array(Ag),Eg=0;Eg<Ag;++Eg){for(var Pg,Dg=Ug[Eg],Fg=Dg.length,Lg=Yg[Eg]=Array(Fg),Hg=0;Hg<Fg;++Hg)(Pg=Dg[Hg])&&(Lg[Hg]=Pg);Lg.sort(function(Xg,qg){return Xg&&qg?Mg(Xg.__data__,qg.__data__):!Xg-!qg})}return new kc(Yg,this._parents).order()},call:function(){var Mg=arguments[0];return arguments[0]=this,Mg.apply(null,arguments),this},nodes:function(){var Mg=Array(this.size()),Ug=-1;return this.each(function(){Mg[++Ug]=this}),Mg},node:function(){for(var Mg=this._groups,Ug=0,Ag=Mg.length;Ug<Ag;++Ug)for(var Dg,Yg=Mg[Ug],Eg=0,Pg=Yg.length;Eg<Pg;++Eg)if(Dg=Yg[Eg],Dg)return Dg;return null},size:function(){var Mg=0;return this.each(function(){++Mg}),Mg},empty:function(){return!this.node()},each:function(Mg){for(var Ug=this._groups,Ag=0,Yg=Ug.length;Ag<Yg;++Ag)for(var Eg,Pg=Ug[Ag],Dg=0,Fg=Pg.length;Dg<Fg;++Dg)(Eg=Pg[Dg])&&Mg.call(Eg,Eg.__data__,Dg,Pg);return this},attr:function(Mg,Ug){var Ag=pm(Mg);if(2>arguments.length){var Yg=this.node();return Ag.local?Yg.getAttributeNS(Ag.space,Ag.local):Yg.getAttribute(Ag)}return this.each((null==Ug?Ag.local?Vd:$d:"function"==typeof Ug?Ag.local?Rd:Wd:Ag.local?Zd:Bd)(Ag,Ug))},style:function(Mg,Ug,Ag){return 1<arguments.length?this.each((null==Ug?Gd:"function"==typeof Ug?Kd:Jd)(Mg,Ug,null==Ag?"":Ag)):Qd(this.node(),Mg)},property:function(Mg,Ug){return 1<arguments.length?this.each((null==Ug?ec:"function"==typeof Ug?nc:tc)(Mg,Ug)):this.node()[Mg]},classed:function(Mg,Ug){var Ag=oc(Mg+"");if(2>arguments.length){for(var Yg=ac(this.node()),Eg=-1,Pg=Ag.length;++Eg<Pg;)if(!Yg.contains(Ag[Eg]))return!1;return!0}return this.each(("function"==typeof Ug?cc:Ug?sc:dc)(Ag,Ug))},text:function(Mg){return arguments.length?this.each(null==Mg?uc:("function"==typeof Mg?_c:pc)(Mg)):this.node().textContent},html:function(Mg){return arguments.length?this.each(null==Mg?hc:("function"==typeof Mg?gc:mc)(Mg)):this.node().innerHTML},raise:function(){return this.each(yc)},lower:function(){return this.each(fc)},append:function(Mg){var Ug="function"==typeof Mg?Mg:_m(Mg);return this.select(function(){return this.appendChild(Ug.apply(this,arguments))})},insert:function(Mg,Ug){var Ag="function"==typeof Mg?Mg:_m(Mg),Yg=null==Ug?xc:"function"==typeof Ug?Ug:wm(Ug);return this.select(function(){return this.insertBefore(Ag.apply(this,arguments),Yg.apply(this,arguments)||null)})},remove:function(){return this.each(vc)},datum:function(Mg){return arguments.length?this.property("__data__",Mg):this.node().__data__},on:function(Mg,Ug,Ag){var Yg,Eg,Pg=Dd(Mg+""),Dg=Pg.length;{if(!(2>arguments.length)){for(Fg=Ug?Ld:Fd,null==Ag&&(Ag=!1),Yg=0;Yg<Dg;++Yg)this.each(Fg(Pg[Yg],Ug,Ag));return this}var Fg=this.node().__on;if(Fg)for(var Lg,Hg=0,Xg=Fg.length;Hg<Xg;++Hg)for(Yg=0,Lg=Fg[Hg];Yg<Dg;++Yg)if((Eg=Pg[Yg]).type===Lg.type&&Eg.name===Lg.name)return Lg.value}},dispatch:function(Mg,Ug){return this.each(("function"==typeof Ug?Tc:wc)(Mg,Ug))}};var Um=function(Mg){return"string"==typeof Mg?new kc([[document.querySelector(Mg)]],[document.documentElement]):new kc([[Mg]],Mm)},Am=function(Mg,Ug,Ag){3>arguments.length&&(Ag=Ug,Ug=xm().changedTouches);for(var Yg,Eg=0,Pg=Ug?Ug.length:0;Eg<Pg;++Eg)if((Yg=Ug[Eg]).identifier===Ag)return vm(Mg,Yg);return null},Ym=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},Em=function(Mg){var Ug=Mg.document.documentElement,Ag=Um(Mg).on("dragstart.drag",Ym,!0);"onselectstart"in Ug?Ag.on("selectstart.drag",Ym,!0):(Ug.__noselect=Ug.style.MozUserSelect,Ug.style.MozUserSelect="none")},Pm=function(Mg){return function(){return Mg}};Mc.prototype.on=function(){var zg=this._.on.apply(this._,arguments);return zg===this._?this:zg};var Dm,Fm,Lm=0,Hm=0,Xm=0,qm=1e3,Im=0,Nm=0,Om=0,jm="object"==("undefined"===typeof performance?"undefined":babelHelpers.typeof(performance))&&performance.now?performance:Date,$m="object"==("undefined"===typeof window?"undefined":babelHelpers.typeof(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(zg){setTimeout(zg,17)};Fc.prototype=Lc.prototype={constructor:Fc,restart:function(Mg,Ug,Ag){if("function"!=typeof Mg)throw new TypeError("callback is not a function");Ag=(null==Ag?Pc():+Ag)+(null==Ug?0:+Ug),this._next||Fm===this||(Fm?Fm._next=this:Dm=this,Fm=this),this._call=Mg,this._time=Ag,Nc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nc())}};var Vm=function(Mg,Ug,Ag){var Yg=new Fc;return Ug=null==Ug?0:+Ug,Yg.restart(function(Eg){Yg.stop(),Mg(Eg+Ug)},Ug,Ag),Yg},Bm=Sd("start","end","interrupt"),Zm=[],Wm=0,Rm=1,Gm=2,Jm=3,Km=4,Qm=5,eg=6,tg=function(Mg,Ug,Ag,Yg,Eg,Pg){var Dg=Mg.__transition;if(!Dg)Mg.__transition={};else if(Ag in Dg)return;Vc(Mg,Ag,{name:Ug,index:Yg,group:Eg,on:Bm,tween:Zm,time:Pg.time,delay:Pg.delay,duration:Pg.duration,ease:Pg.ease,timer:null,state:Wm})},ng=function(Mg,Ug){var Ag,Yg,Eg,Pg=Mg.__transition,Dg=!0;if(Pg){for(Eg in Ug=null==Ug?null:Ug+"",Pg)(Ag=Pg[Eg]).name===Ug?(Yg=Ag.state>Gm&&Ag.state<Qm,Ag.state=eg,Ag.timer.stop(),Yg&&Ag.on.call("interrupt",Mg,Mg.__data__,Ag.index,Ag.group),delete Pg[Eg]):Dg=!1;Dg&&delete Mg.__transition}},og=function(Mg,Ug){var Ag;return("number"==typeof Ug?Mh:Ug instanceof vs?Sh:(Ag=vs(Ug))?(Ug=Ag,Sh):Eh)(Mg,Ug)},ag=Sc.prototype.constructor,ig=0,lg=Sc.prototype;xp.prototype=function(zg){return Sc().transition(zg)}.prototype={constructor:xp,select:function(Mg){var Ug=this._name,Ag=this._id;"function"!=typeof Mg&&(Mg=wm(Mg));for(var Yg=this._groups,Eg=Yg.length,Pg=Array(Eg),Dg=0;Dg<Eg;++Dg)for(var Fg,Lg,Hg=Yg[Dg],Xg=Hg.length,qg=Pg[Dg]=Array(Xg),Ig=0;Ig<Xg;++Ig)(Fg=Hg[Ig])&&(Lg=Mg.call(Fg,Fg.__data__,Ig,Hg))&&("__data__"in Fg&&(Lg.__data__=Fg.__data__),qg[Ig]=Lg,tg(qg[Ig],Ug,Ag,Ig,qg,$c(Fg,Ag)));return new xp(Pg,this._parents,Ug,Ag)},selectAll:function(Mg){var Ug=this._name,Ag=this._id;"function"!=typeof Mg&&(Mg=Tm(Mg));for(var Yg=this._groups,Eg=Yg.length,Pg=[],Dg=[],Fg=0;Fg<Eg;++Fg)for(var Lg,Hg=Yg[Fg],Xg=Hg.length,qg=0;qg<Xg;++qg)if(Lg=Hg[qg]){for(var Ig,Ng=Mg.call(Lg,Lg.__data__,qg,Hg),Og=$c(Lg,Ag),jg=0,$g=Ng.length;jg<$g;++jg)(Ig=Ng[jg])&&tg(Ig,Ug,Ag,jg,Ng,Og);Pg.push(Ng),Dg.push(Lg)}return new xp(Pg,Dg,Ug,Ag)},filter:function(Mg){"function"!=typeof Mg&&(Mg=ym(Mg));for(var Ug=this._groups,Ag=Ug.length,Yg=Array(Ag),Eg=0;Eg<Ag;++Eg)for(var Pg,Dg=Ug[Eg],Fg=Dg.length,Lg=Yg[Eg]=[],Hg=0;Hg<Fg;++Hg)(Pg=Dg[Hg])&&Mg.call(Pg,Pg.__data__,Hg,Dg)&&Lg.push(Pg);return new xp(Yg,this._parents,this._name,this._id)},merge:function(Mg){if(Mg._id!==this._id)throw new Error;for(var Ug=this._groups,Ag=Mg._groups,Yg=Ug.length,Eg=Ag.length,Pg=Math.min(Yg,Eg),Dg=Array(Yg),Fg=0;Fg<Pg;++Fg)for(var Lg,Hg=Ug[Fg],Xg=Ag[Fg],qg=Hg.length,Ig=Dg[Fg]=Array(qg),Ng=0;Ng<qg;++Ng)(Lg=Hg[Ng]||Xg[Ng])&&(Ig[Ng]=Lg);for(;Fg<Yg;++Fg)Dg[Fg]=Ug[Fg];return new xp(Dg,this._parents,this._name,this._id)},selection:function(){return new ag(this._groups,this._parents)},transition:function(){for(var Mg=this._name,Ug=this._id,Ag=vp(),Yg=this._groups,Eg=Yg.length,Pg=0;Pg<Eg;++Pg)for(var Dg,Fg=Yg[Pg],Lg=Fg.length,Hg=0;Hg<Lg;++Hg)if(Dg=Fg[Hg]){var Xg=$c(Dg,Ug);tg(Dg,Mg,Ag,Hg,Fg,{time:Xg.time+Xg.delay+Xg.duration,delay:0,duration:Xg.duration,ease:Xg.ease})}return new xp(Yg,this._parents,Mg,Ag)},call:lg.call,nodes:lg.nodes,node:lg.node,size:lg.size,empty:lg.empty,each:lg.each,on:function(Mg,Ug){var Ag=this._id;return 2>arguments.length?$c(this.node(),Ag).on.on(Mg):this.each(dp(Ag,Mg,Ug))},attr:function(Mg,Ug){var Ag=pm(Mg),Yg="transform"===Ag?qh:og;return this.attrTween(Mg,"function"==typeof Ug?(Ag.local?ep:Qc)(Ag,Yg,Wc(this,"attr."+Mg,Ug)):null==Ug?(Ag.local?Gc:Rc)(Ag):(Ag.local?Kc:Jc)(Ag,Yg,Ug+""))},attrTween:function(Mg,Ug){var Ag="attr."+Mg;if(2>arguments.length)return(Ag=this.tween(Ag))&&Ag._value;if(null==Ug)return this.tween(Ag,null);if("function"!=typeof Ug)throw new Error;var Yg=pm(Mg);return this.tween(Ag,(Yg.local?tp:np)(Yg,Ug))},style:function(Mg,Ug,Ag){var Yg="transform"==(Mg+="")?Xh:og;return null==Ug?this.styleTween(Mg,up(Mg,Yg)).on("end.style."+Mg,pp(Mg)):this.styleTween(Mg,"function"==typeof Ug?mp(Mg,Yg,Wc(this,"style."+Mg,Ug)):hp(Mg,Yg,Ug+""),Ag)},styleTween:function(Mg,Ug,Ag){var Yg="style."+(Mg+="");if(2>arguments.length)return(Yg=this.tween(Yg))&&Yg._value;if(null==Ug)return this.tween(Yg,null);if("function"!=typeof Ug)throw new Error;return this.tween(Yg,gp(Mg,Ug,null==Ag?"":Ag))},text:function(Mg){return this.tween("text","function"==typeof Mg?fp(Wc(this,"text",Mg)):yp(null==Mg?"":Mg+""))},remove:function(){return this.on("end.remove",cp(this._id))},tween:function(Mg,Ug){var Ag=this._id;if(Mg+="",2>arguments.length){for(var Yg,Eg=$c(this.node(),Ag).tween,Pg=0,Dg=Eg.length;Pg<Dg;++Pg)if((Yg=Eg[Pg]).name===Mg)return Yg.value;return null}return this.each((null==Ug?Bc:Zc)(Ag,Mg,Ug))},delay:function(Mg){var Ug=this._id;return arguments.length?this.each(("function"==typeof Mg?op:ap)(Ug,Mg)):$c(this.node(),Ug).delay},duration:function(Mg){var Ug=this._id;return arguments.length?this.each(("function"==typeof Mg?ip:lp)(Ug,Mg)):$c(this.node(),Ug).duration},ease:function(Mg){var Ug=this._id;return arguments.length?this.each(rp(Ug,Mg)):$c(this.node(),Ug).ease}},function zg(Mg){function Ug(Ag){return Math.pow(Ag,Mg)}return Mg=+Mg,Ug.exponent=zg,Ug}(3),function zg(Mg){function Ug(Ag){return 1-Math.pow(1-Ag,Mg)}return Mg=+Mg,Ug.exponent=zg,Ug}(3),function zg(Mg){function Ug(Ag){return(1>=(Ag*=2)?Math.pow(Ag,Mg):2-Math.pow(2-Ag,Mg))/2}return Mg=+Mg,Ug.exponent=zg,Ug}(3),function zg(Mg){function Ug(Ag){return Ag*Ag*((Mg+1)*Ag-Mg)}return Mg=+Mg,Ug.overshoot=zg,Ug}(1.70158),function zg(Mg){function Ug(Ag){return--Ag*Ag*((Mg+1)*Ag+Mg)+1}return Mg=+Mg,Ug.overshoot=zg,Ug}(1.70158),function zg(Mg){function Ug(Ag){return(1>(Ag*=2)?Ag*Ag*((Mg+1)*Ag-Mg):(Ag-=2)*Ag*((Mg+1)*Ag+Mg)+2)/2}return Mg=+Mg,Ug.overshoot=zg,Ug}(1.70158);var rg=2*Math.PI,sg=(function zg(Mg,Ug){function Ag(Eg){return Mg*Math.pow(2,10*--Eg)*Math.sin((Yg-Eg)/Ug)}var Yg=Math.asin(1/(Mg=Math.max(1,Mg)))*(Ug/=rg);return Ag.amplitude=function(Eg){return zg(Eg,Ug*rg)},Ag.period=function(Eg){return zg(Mg,Eg)},Ag}(1,.3),function zg(Mg,Ug){function Ag(Eg){return 1-Mg*Math.pow(2,-10*(Eg=+Eg))*Math.sin((Eg+Yg)/Ug)}var Yg=Math.asin(1/(Mg=Math.max(1,Mg)))*(Ug/=rg);return Ag.amplitude=function(Eg){return zg(Eg,Ug*rg)},Ag.period=function(Eg){return zg(Mg,Eg)},Ag}(1,.3),function zg(Mg,Ug){function Ag(Eg){return(0>(Eg=2*Eg-1)?Mg*Math.pow(2,10*Eg)*Math.sin((Yg-Eg)/Ug):2-Mg*Math.pow(2,-10*Eg)*Math.sin((Yg+Eg)/Ug))/2}var Yg=Math.asin(1/(Mg=Math.max(1,Mg)))*(Ug/=rg);return Ag.amplitude=function(Eg){return zg(Eg,Ug*rg)},Ag.period=function(Eg){return zg(Mg,Eg)},Ag}(1,.3),{time:null,delay:0,duration:250,ease:function(Mg){return(1>=(Mg*=2)?Mg*Mg*Mg:(Mg-=2)*Mg*Mg+2)/2}});Sc.prototype.interrupt=function(zg){return this.each(function(){ng(this,zg)})},Sc.prototype.transition=function(zg){var Mg,Ug;zg instanceof xp?(Mg=zg._id,zg=zg._name):(Mg=vp(),(Ug=sg).time=Pc(),zg=null==zg?null:zg+"");for(var Ag=this._groups,Yg=Ag.length,Eg=0;Eg<Yg;++Eg)for(var Pg,Dg=Ag[Eg],Fg=Dg.length,Lg=0;Lg<Fg;++Lg)(Pg=Dg[Lg])&&tg(Pg,zg,Mg,Lg,Dg,Ug||bp(Pg,Mg));return new xp(Ag,this._parents,zg,Mg)};var dg=function(Mg){return function(){return Mg}};Tp.prototype={constructor:Tp,scale:function(Mg){return 1===Mg?this:new Tp(this.k*Mg,this.x,this.y)},translate:function(Mg,Ug){return 0===Mg&0===Ug?this:new Tp(this.k,this.x+this.k*Mg,this.y+this.k*Ug)},apply:function(Mg){return[Mg[0]*this.k+this.x,Mg[1]*this.k+this.y]},applyX:function(Mg){return Mg*this.k+this.x},applyY:function(Mg){return Mg*this.k+this.y},invert:function(Mg){return[(Mg[0]-this.x)/this.k,(Mg[1]-this.y)/this.k]},invertX:function(Mg){return(Mg-this.x)/this.k},invertY:function(Mg){return(Mg-this.y)/this.k},rescaleX:function(Mg){return Mg.copy().domain(Mg.range().map(this.invertX,this).map(Mg.invert,Mg))},rescaleY:function(Mg){return Mg.copy().domain(Mg.range().map(this.invertY,this).map(Mg.invert,Mg))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cg=new Tp(1,0,0);kp.prototype=Tp.prototype;var ug=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},pg=function(Mg){return function(){return Mg}},_g=function(Mg,Ug,Ag){this.target=Mg,this.type=Ug,this.selection=Ag},hg=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},mg={name:"drag"},gg={name:"space"},yg={name:"handle"},fg={name:"center"},xg={name:"x",handles:["e","w"].map(Ep),input:function(Mg,Ug){return Mg&&[[Mg[0],Ug[0][1]],[Mg[1],Ug[1][1]]]},output:function(Mg){return Mg&&[Mg[0][0],Mg[1][0]]}},vg={name:"y",handles:["n","s"].map(Ep),input:function(Mg,Ug){return Mg&&[[Ug[0][0],Mg[0]],[Ug[1][0],Mg[1]]]},output:function(Mg){return Mg&&[Mg[0][1],Mg[1][1]]}},bg={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Ep),input:function(Mg){return Mg},output:function(Mg){return Mg}},wg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Tg={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},kg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Sg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Cg={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};return Ia.bisector=qp,Ia.extent=function(zg,Mg){var Ug,Ag,Yg,Eg=zg.length,Pg=-1;if(null==Mg){for(;++Pg<Eg;)if(null!=(Ug=zg[Pg])&&Ug>=Ug)for(Ag=Yg=Ug;++Pg<Eg;)null!=(Ug=zg[Pg])&&(Ag>Ug&&(Ag=Ug),Yg<Ug&&(Yg=Ug));}else for(;++Pg<Eg;)if(null!=(Ug=Mg(zg[Pg],Pg,zg))&&Ug>=Ug)for(Ag=Yg=Ug;++Pg<Eg;)null!=(Ug=Mg(zg[Pg],Pg,zg))&&(Ag>Ug&&(Ag=Ug),Yg<Ug&&(Yg=Ug));return[Ag,Yg]},Ia.max=function(zg,Mg){var Ug,Ag,Yg=zg.length,Eg=-1;if(null==Mg){for(;++Eg<Yg;)if(null!=(Ug=zg[Eg])&&Ug>=Ug)for(Ag=Ug;++Eg<Yg;)null!=(Ug=zg[Eg])&&Ug>Ag&&(Ag=Ug);}else for(;++Eg<Yg;)if(null!=(Ug=Mg(zg[Eg],Eg,zg))&&Ug>=Ug)for(Ag=Ug;++Eg<Yg;)null!=(Ug=Mg(zg[Eg],Eg,zg))&&Ug>Ag&&(Ag=Ug);return Ag},Ia.min=function(zg,Mg){var Ug,Ag,Yg=zg.length,Eg=-1;if(null==Mg){for(;++Eg<Yg;)if(null!=(Ug=zg[Eg])&&Ug>=Ug)for(Ag=Ug;++Eg<Yg;)null!=(Ug=zg[Eg])&&Ag>Ug&&(Ag=Ug);}else for(;++Eg<Yg;)if(null!=(Ug=Mg(zg[Eg],Eg,zg))&&Ug>=Ug)for(Ag=Ug;++Eg<Yg;)null!=(Ug=Mg(zg[Eg],Eg,zg))&&Ag>Ug&&(Ag=Ug);return Ag},Ia.line=Jp,Ia.area=function(){function zg(Hg){var Xg,qg,Ig,Ng,Og,jg=Hg.length,$g=!1,Vg=Array(jg),Bg=Array(jg);for(null==Dg&&(Lg=Fg(Og=Ba())),Xg=0;Xg<=jg;++Xg){if(!(Xg<jg&&Pg(Ng=Hg[Xg],Xg,Hg))===$g)if($g=!$g)qg=Xg,Lg.areaStart(),Lg.lineStart();else{for(Lg.lineEnd(),Lg.lineStart(),Ig=Xg-1;Ig>=qg;--Ig)Lg.point(Vg[Ig],Bg[Ig]);Lg.lineEnd(),Lg.areaEnd()}$g&&(Vg[Xg]=+Ug(Ng,Xg,Hg),Bg[Xg]=+Yg(Ng,Xg,Hg),Lg.point(Ag?+Ag(Ng,Xg,Hg):Vg[Xg],Eg?+Eg(Ng,Xg,Hg):Bg[Xg]))}if(Og)return Lg=null,Og+""||null}function Mg(){return Jp().defined(Pg).curve(Fg).context(Dg)}var Ug=Wa,Ag=null,Yg=Wp(0),Eg=Ra,Pg=Wp(!0),Dg=null,Fg=Gp,Lg=null;return zg.x=function(Hg){return arguments.length?(Ug="function"==typeof Hg?Hg:Wp(+Hg),Ag=null,zg):Ug},zg.x0=function(Hg){return arguments.length?(Ug="function"==typeof Hg?Hg:Wp(+Hg),zg):Ug},zg.x1=function(Hg){return arguments.length?(Ag=null==Hg?null:"function"==typeof Hg?Hg:Wp(+Hg),zg):Ag},zg.y=function(Hg){return arguments.length?(Yg="function"==typeof Hg?Hg:Wp(+Hg),Eg=null,zg):Yg},zg.y0=function(Hg){return arguments.length?(Yg="function"==typeof Hg?Hg:Wp(+Hg),zg):Yg},zg.y1=function(Hg){return arguments.length?(Eg=null==Hg?null:"function"==typeof Hg?Hg:Wp(+Hg),zg):Eg},zg.lineX0=zg.lineY0=function(){return Mg().x(Ug).y(Yg)},zg.lineY1=function(){return Mg().x(Ug).y(Eg)},zg.lineX1=function(){return Mg().x(Ag).y(Yg)},zg.defined=function(Hg){return arguments.length?(Pg="function"==typeof Hg?Hg:Wp(!!Hg),zg):Pg},zg.curve=function(Hg){return arguments.length?(Fg=Hg,null!=Dg&&(Lg=Fg(Dg)),zg):Fg},zg.context=function(Hg){return arguments.length?(null==Hg?Dg=Lg=null:Lg=Fg(Dg=Hg),zg):Dg},zg},Ia.curveBasis=function(zg){return new Ja(zg)},Ia.curveMonotoneX=function(zg){return new ll(zg)},Ia.curveNatural=function(zg){return new sl(zg)},Ia.curveCardinal=Kp,Ia.curveCatmullRom=Qp,Ia.curveStep=function(zg){return new cl(zg,.5)},Ia.curveStepAfter=function(zg){return new cl(zg,1)},Ia.curveStepBefore=function(zg){return new cl(zg,0)},Ia.curveLinear=Gp,Ia.timeMillisecond=n_,Ia.timeSecond=i_,Ia.timeMinute=l_,Ia.timeHour=r_,Ia.timeDay=s_,Ia.timeWeek=d_,Ia.timeMonth=u_,Ia.timeYear=p_,Ia.formatDefaultLocale=gl,Ia.formatLocale=U_,Ia.timeFormatLocale=vl,Ia.timeFormatDefaultLocale=hs,Ia.scaleLinear=ld,Ia.scaleLog=_d,Ia.scalePow=md,Ia.scaleTime=function(){return fd(p_,u_,d_,s_,r_,l_,i_,n_,Ia.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Ia.axisRight=function(zg){return kd(im,zg)},Ia.axisTop=function(zg){return kd(am,zg)},Ia.axisBottom=function(zg){return kd(lm,zg)},Ia.axisLeft=function(zg){return kd(rm,zg)},Ia.zoom=function(){function zg(iy){iy.property("__zoom",Mp).on("wheel.zoom",Fg).on("mousedown.zoom",Lg).on("dblclick.zoom",Hg).filter(Ap).on("touchstart.zoom",Xg).on("touchmove.zoom",qg).on("touchend.zoom touchcancel.zoom",Ig).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Mg(iy,ly){return(ly=Math.max(Bg,Math.min(Zg,ly)))===iy.k?iy:new Tp(ly,iy.x,iy.y)}function Ug(iy,ly,ry){var sy=ly[0]-ry[0]*iy.k,dy=ly[1]-ry[1]*iy.k;return sy===iy.x&&dy===iy.y?iy:new Tp(iy.k,sy,dy)}function Ag(iy,ly){var ry=iy.invertX(ly[0][0])-Wg,sy=iy.invertX(ly[1][0])-Rg,dy=iy.invertY(ly[0][1])-Gg,cy=iy.invertY(ly[1][1])-Jg;return iy.translate(sy>ry?(ry+sy)/2:Math.min(0,ry)||Math.max(0,sy),cy>dy?(dy+cy)/2:Math.min(0,dy)||Math.max(0,cy))}function Yg(iy){return[(+iy[0][0]+ +iy[1][0])/2,(+iy[0][1]+ +iy[1][1])/2]}function Eg(iy,ly,ry){iy.on("start.zoom",function(){Pg(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){Pg(this,arguments).end()}).tween("zoom",function(){var sy=this,dy=arguments,cy=Pg(sy,dy),uy=$g.apply(sy,dy),py=ry||Yg(uy),_y=Math.max(uy[1][0]-uy[0][0],uy[1][1]-uy[0][1]),hy=sy.__zoom,my="function"==typeof ly?ly.apply(sy,dy):ly,gy=Qg(hy.invert(py).concat(_y/hy.k),my.invert(py).concat(_y/my.k));return function(yy){if(1===yy)yy=my;else{var fy=gy(yy),xy=_y/fy[2];yy=new Tp(xy,py[0]-fy[0]*xy,py[1]-fy[1]*xy)}cy.zoom(null,yy)}})}function Pg(iy,ly){for(var ry,sy=0,dy=ey.length;sy<dy;++sy)if((ry=ey[sy]).that===iy)return ry;return new Dg(iy,ly)}function Dg(iy,ly){this.that=iy,this.args=ly,this.index=-1,this.active=0,this.extent=$g.apply(iy,ly)}function Fg(){if(jg.apply(this,arguments)){var iy=Pg(this,arguments),ly=this.__zoom,ry=Math.max(Bg,Math.min(Zg,ly.k*Math.pow(2,Vg.apply(this,arguments)))),sy=bm(this);if(iy.wheel)iy.mouse[0][0]===sy[0]&&iy.mouse[0][1]===sy[1]||(iy.mouse[1]=ly.invert(iy.mouse[0]=sy)),clearTimeout(iy.wheel);else{if(ly.k===ry)return;iy.mouse=[sy,ly.invert(sy)],ng(this),iy.start()}ug(),iy.wheel=setTimeout(function(){iy.wheel=null,iy.end()},oy),iy.zoom("mouse",Ag(Ug(Mg(ly,ry),iy.mouse[0],iy.mouse[1]),iy.extent))}}function Lg(){if(!Og&&jg.apply(this,arguments)){var iy=Pg(this,arguments),ly=Um(Ia.event.view).on("mousemove.zoom",function(){if(ug(),!iy.moved){var cy=Ia.event.clientX-sy,uy=Ia.event.clientY-dy;iy.moved=cy*cy+uy*uy>ay}iy.zoom("mouse",Ag(Ug(iy.that.__zoom,iy.mouse[0]=bm(iy.that),iy.mouse[1]),iy.extent))},!0).on("mouseup.zoom",function(){ly.on("mousemove.zoom mouseup.zoom",null),zc(Ia.event.view,iy.moved),ug(),iy.end()},!0),ry=bm(this),sy=Ia.event.clientX,dy=Ia.event.clientY;Em(Ia.event.view),Sp(),iy.mouse=[ry,this.__zoom.invert(ry)],ng(this),iy.start()}}function Hg(){if(jg.apply(this,arguments)){var iy=this.__zoom,ly=bm(this),ry=iy.invert(ly),sy=Ag(Ug(Mg(iy,iy.k*(Ia.event.shiftKey?.5:2)),ly,ry),$g.apply(this,arguments));ug(),0<Kg?Um(this).transition().duration(Kg).call(Eg,sy,ly):Um(this).call(zg.transform,sy)}}function Xg(){if(jg.apply(this,arguments)){var iy,ly,ry,sy,dy=Pg(this,arguments),cy=Ia.event.changedTouches,uy=cy.length;for(Sp(),ly=0;ly<uy;++ly)ry=cy[ly],sy=[sy=Am(this,cy,ry.identifier),this.__zoom.invert(sy),ry.identifier],dy.touch0?dy.touch1||(dy.touch1=sy):(dy.touch0=sy,iy=!0);if(Ng&&(Ng=clearTimeout(Ng),!dy.touch1))return dy.end(),void((sy=Um(this).on("dblclick.zoom"))&&sy.apply(this,arguments));iy&&(Ng=setTimeout(function(){Ng=null},ny),ng(this),dy.start())}}function qg(){var iy,ly,ry,sy,dy=Pg(this,arguments),cy=Ia.event.changedTouches,uy=cy.length;for(ug(),Ng&&(Ng=clearTimeout(Ng)),iy=0;iy<uy;++iy)ly=cy[iy],ry=Am(this,cy,ly.identifier),dy.touch0&&dy.touch0[2]===ly.identifier?dy.touch0[0]=ry:dy.touch1&&dy.touch1[2]===ly.identifier&&(dy.touch1[0]=ry);if(ly=dy.that.__zoom,dy.touch1){var py=dy.touch0[0],_y=dy.touch0[1],hy=dy.touch1[0],my=dy.touch1[1],gy=(gy=hy[0]-py[0])*gy+(gy=hy[1]-py[1])*gy,yy=(yy=my[0]-_y[0])*yy+(yy=my[1]-_y[1])*yy;ly=Mg(ly,Math.sqrt(gy/yy)),ry=[(py[0]+hy[0])/2,(py[1]+hy[1])/2],sy=[(_y[0]+my[0])/2,(_y[1]+my[1])/2]}else{if(!dy.touch0)return;ry=dy.touch0[0],sy=dy.touch0[1]}dy.zoom("touch",Ag(Ug(ly,ry,sy),dy.extent))}function Ig(){var iy,ly,ry=Pg(this,arguments),sy=Ia.event.changedTouches,dy=sy.length;for(Sp(),Og&&clearTimeout(Og),Og=setTimeout(function(){Og=null},ny),iy=0;iy<dy;++iy)ly=sy[iy],ry.touch0&&ry.touch0[2]===ly.identifier?delete ry.touch0:ry.touch1&&ry.touch1[2]===ly.identifier&&delete ry.touch1;ry.touch1&&!ry.touch0&&(ry.touch0=ry.touch1,delete ry.touch1),ry.touch0?ry.touch0[1]=this.__zoom.invert(ry.touch0[0]):ry.end()}var Ng,Og,jg=Cp,$g=zp,Vg=Up,Bg=0,Zg=1/0,Wg=-Zg,Rg=Zg,Gg=Wg,Jg=Rg,Kg=250,Qg=Nh,ey=[],ty=Sd("start","zoom","end"),ny=500,oy=150,ay=0;return zg.transform=function(iy,ly){var ry=iy.selection?iy.selection():iy;ry.property("__zoom",Mp),iy===ry?ry.interrupt().each(function(){Pg(this,arguments).start().zoom(null,"function"==typeof ly?ly.apply(this,arguments):ly).end()}):Eg(iy,ly)},zg.scaleBy=function(iy,ly){zg.scaleTo(iy,function(){return this.__zoom.k*("function"==typeof ly?ly.apply(this,arguments):ly)})},zg.scaleTo=function(iy,ly){zg.transform(iy,function(){var ry=$g.apply(this,arguments),sy=this.__zoom,dy=Yg(ry),cy=sy.invert(dy);return Ag(Ug(Mg(sy,"function"==typeof ly?ly.apply(this,arguments):ly),dy,cy),ry)})},zg.translateBy=function(iy,ly,ry){zg.transform(iy,function(){return Ag(this.__zoom.translate("function"==typeof ly?ly.apply(this,arguments):ly,"function"==typeof ry?ry.apply(this,arguments):ry),$g.apply(this,arguments))})},zg.translateTo=function(iy,ly,ry){zg.transform(iy,function(){var sy=$g.apply(this,arguments),dy=this.__zoom,cy=Yg(sy);return Ag(cg.translate(cy[0],cy[1]).scale(dy.k).translate("function"==typeof ly?-ly.apply(this,arguments):-ly,"function"==typeof ry?-ry.apply(this,arguments):-ry),sy)})},Dg.prototype={start:function(){return 1==++this.active&&(this.index=ey.push(this)-1,this.emit("start")),this},zoom:function(ly,ry){return this.mouse&&"mouse"!==ly&&(this.mouse[1]=ry.invert(this.mouse[0])),this.touch0&&"touch"!==ly&&(this.touch0[1]=ry.invert(this.touch0[0])),this.touch1&&"touch"!==ly&&(this.touch1[1]=ry.invert(this.touch1[0])),this.that.__zoom=ry,this.emit("zoom"),this},end:function(){return 0==--this.active&&(ey.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(ly){Hd(new wp(zg,ly,this.that.__zoom),ty.apply,ty,[ly,this.that,this.args])}},zg.wheelDelta=function(iy){return arguments.length?(Vg="function"==typeof iy?iy:dg(+iy),zg):Vg},zg.filter=function(iy){return arguments.length?(jg="function"==typeof iy?iy:dg(!!iy),zg):jg},zg.extent=function(iy){return arguments.length?($g="function"==typeof iy?iy:dg([[+iy[0][0],+iy[0][1]],[+iy[1][0],+iy[1][1]]]),zg):$g},zg.scaleExtent=function(iy){return arguments.length?(Bg=+iy[0],Zg=+iy[1],zg):[Bg,Zg]},zg.translateExtent=function(iy){return arguments.length?(Wg=+iy[0][0],Rg=+iy[1][0],Gg=+iy[0][1],Jg=+iy[1][1],zg):[[Wg,Gg],[Rg,Jg]]},zg.duration=function(iy){return arguments.length?(Kg=+iy,zg):Kg},zg.interpolate=function(iy){return arguments.length?(Qg=iy,zg):Qg},zg.on=function(){var iy=ty.on.apply(ty,arguments);return iy===ty?zg:iy},zg.clickDistance=function(iy){return arguments.length?(ay=(iy=+iy)*iy,zg):Math.sqrt(ay)},zg},Ia.zoomIdentity=cg,Ia.zoomTransform=kp,Ia.drag=function(){function zg(Bg){Bg.on("mousedown.drag",Mg).filter(Ec).on("touchstart.drag",Yg).on("touchmove.drag",Eg).on("touchend.drag touchcancel.drag",Pg).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function Mg(){if(!Xg&&qg.apply(this,arguments)){var Bg=Dg("mouse",Ig.apply(this,arguments),bm,this,arguments);Bg&&(Um(Ia.event.view).on("mousemove.drag",Ug,!0).on("mouseup.drag",Ag,!0),Em(Ia.event.view),Cc(),Hg=!1,Fg=Ia.event.clientX,Lg=Ia.event.clientY,Bg("start"))}}function Ug(){if(Ym(),!Hg){var Bg=Ia.event.clientX-Fg,Zg=Ia.event.clientY-Lg;Hg=Bg*Bg+Zg*Zg>Vg}Og.mouse("drag")}function Ag(){Um(Ia.event.view).on("mousemove.drag mouseup.drag",null),zc(Ia.event.view,Hg),Ym(),Og.mouse("end")}function Yg(){if(qg.apply(this,arguments)){var Bg,Zg,Wg=Ia.event.changedTouches,Rg=Ig.apply(this,arguments),Gg=Wg.length;for(Bg=0;Bg<Gg;++Bg)(Zg=Dg(Wg[Bg].identifier,Rg,Am,this,arguments))&&(Cc(),Zg("start"))}}function Eg(){var Bg,Zg,Wg=Ia.event.changedTouches,Rg=Wg.length;for(Bg=0;Bg<Rg;++Bg)(Zg=Og[Wg[Bg].identifier])&&(Ym(),Zg("drag"))}function Pg(){var Bg,Zg,Wg=Ia.event.changedTouches,Rg=Wg.length;for(Xg&&clearTimeout(Xg),Xg=setTimeout(function(){Xg=null},500),Bg=0;Bg<Rg;++Bg)(Zg=Og[Wg[Bg].identifier])&&(Cc(),Zg("end"))}function Dg(Bg,Zg,Wg,Rg,Gg){var Jg,Kg,Qg,ey=Wg(Zg,Bg),ty=jg.copy();if(Hd(new Mc(zg,"beforestart",Jg,Bg,$g,ey[0],ey[1],0,0,ty),function(){return null!=(Ia.event.subject=Jg=Ng.apply(Rg,Gg))&&(Kg=Jg.x-ey[0]||0,Qg=Jg.y-ey[1]||0,!0)}))return function ny(oy){var ay,iy=ey;switch(oy){case"start":Og[Bg]=ny,ay=$g++;break;case"end":delete Og[Bg],--$g;case"drag":ey=Wg(Zg,Bg),ay=$g;}Hd(new Mc(zg,oy,Jg,Bg,ay,ey[0]+Kg,ey[1]+Qg,ey[0]-iy[0],ey[1]-iy[1],ty),ty.apply,ty,[oy,Rg,Gg])}}var Fg,Lg,Hg,Xg,qg=Uc,Ig=Ac,Ng=Yc,Og={},jg=Sd("start","drag","end"),$g=0,Vg=0;return zg.filter=function(Bg){return arguments.length?(qg="function"==typeof Bg?Bg:Pm(!!Bg),zg):qg},zg.container=function(Bg){return arguments.length?(Ig="function"==typeof Bg?Bg:Pm(Bg),zg):Ig},zg.subject=function(Bg){return arguments.length?(Ng="function"==typeof Bg?Bg:Pm(Bg),zg):Ng},zg.on=function(){var Bg=jg.on.apply(jg,arguments);return Bg===jg?zg:Bg},zg.clickDistance=function(Bg){return arguments.length?(Vg=(Bg=+Bg)*Bg,zg):Math.sqrt(Vg)},zg},Ia.brush=function(){return Hp(bg)},Ia.brushX=function(){return Hp(xg)},Ia.brushY=function(){return Hp(vg)},Ia.mouse=bm,Ia.select=Um,Ia.selection=Sc,Ia.selectAll=function(zg){return"string"==typeof zg?new kc([document.querySelectorAll(zg)],[document.documentElement]):new kc([null==zg?[]:zg],Mm)},Ia.selectorAll=Tm,Ia.touch=Am,Ia}({});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_isFullscreen',value:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}},{key:'_getParent',value:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.nodeType==Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}},{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}},{key:'toggleFullscreen',value:function(f){f.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen(),this._resetZoom&&this._resetZoom(f)}},{key:'fullScreenChanged',value:function(){this._fullScreenChanged()}},{key:'_fullScreenChanged',value:function(){var f=this;requestAnimationFrame(function(){var g=f._isFullscreen(),h=f._getParent();g?(f.fullscreen=!0,f.style.position='fixed',f.style.top='0',f.style.left='0',f.style.right='0',f.style.bottom='0',f.style.zIndex='1000',f.style['border-radius']='0px',document.body.style.overflow='hidden',h&&h.classList.add('fullscreen')):(f.fullscreen=!1,f.style.position='',f.style.top='',f.style.left='',f.style.right='',f.style.bottom='',f.style.zIndex='',f.style['border-radius']='',document.body.style.overflow='',h&&h.classList.remove('fullscreen')),f.notifyResize&&f.notifyResize()})}},{key:'computeFullscreenIcon',value:function(f){return f?'fullscreen-exit':'fullscreen'}}],[{key:'properties',get:function(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}}]),c}(a)};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>var DeviceSVG=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_openedChanged',value:function(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}},{key:'open',value:function(d){this.setSvg(d.detail),this.opened=!0}},{key:'close',value:function(){this.opened=!1}},{key:'_srcChanged',value:function(d){d&&this._recentSrc!==d&&(this._recentSrc=d,this._fetch(d,'GET','include','xml').then(this._registerXML.bind(this)).catch(function(f){console.log(d,f)}))}},{key:'_registerXML',value:function(d){if(d&&d.documentElement){var f=document.importNode(d.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(f,this.$.svgContainer.firstChild),this._svg=d3.select(f).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var g=this._svg.attr('viewBox').split(' ');this._width=g[2]-g[0],this._height=g[3]-g[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}},{key:'_initialize',value:function(){var d=this;setTimeout(function(){d._selectableItemsChanged(),d._selectedItemsChanged(),d._exceedingChanged()},0)}},{key:'_initZoom',value:function(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}},{key:'_selectedItemsChanged',value:function(){var d=this.item,f=this.items;d&&Object.keys(d).length||f&&f.length?(!this.src&&(d&&d.svg&&d.svg.path?this.src=d.svg.path:0<f.length&&f[f.length-1].svg&&f[f.length-1].svg.path&&(this.src=f[f.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}},{key:'_exceedingChanged',value:function(){var d=this.exceeding;d&&d.length?(!this.src&&d[d.length-1].svg&&d[d.length-1].svg.path&&(this.src=d[d.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}},{key:'_initialChanged',value:function(d){this.src&&d&&this._resetZoom()}},{key:'_selectableItemsChanged',value:function(){var d=this;!(this._mainG&&this._mainG.node&&this.src)||this.selectableItems&&this.selectableItems.items&&function(){var f=d;for(var g in d.selectableItems.items)d._mainG.selectAll(d.selectableItems.items[g]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',g).on('click',function(){f._zoomToElement(this),f._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==d.selectableItems.minZoom&&(d.minZoom=d.selectableItems.minZoom),void 0!==d.selectableItems.maxZoom&&(d.maxZoom=d.selectableItems.maxZoom),void 0!==d.selectableItems.zoomPartition&&(d.zoomPartition=d.selectableItems.zoomPartition),d._initZoom(),d._inialized=!0}()}},{key:'_zoom',value:function(){this._mainG.attr('transform',d3.event.transform)}},{key:'_zoomToElement',value:function(d){if(void 0!==d&&this._svg.node()){var f=this._calcCenterZoom(d),g=d3.zoomIdentity.translate(f.x,f.y).scale(f.k);this._svg.node().__zoom=g,this._mainG.transition(300).attr('transform',g)}}},{key:'_selectSelected',value:function(){var d=this;requestAnimationFrame(function(){var f=d.multi?d.items||[]:[];d.item&&Object.keys(d.item).length&&-1===f.indexOf(d.item)&&f.push(d.item);var g;if(g=ShadyCSS&&!0===ShadyCSS.nativeShadow?d.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),g&&f&&f.length){for(var h=void 0,l=void 0,m=void 0,n=0;n<f.length;n++)if(f[n]&&f[n].color&&f[n].svg&&f[n].svg.selector&&g&&g.sheet&&g.sheet.cssRules&&g.sheet.insertRule){h=f[n].svg.selector.split(',');for(var o=0;o<h.length;o++){l=h[o]+'.'+d.selectedClass,m=!1;for(var p=0;p<g.sheet.cssRules.length;p++)g.sheet.cssRules[n].selectorText===l&&(m=!0);!1===m&&g.sheet.insertRule(l+' {\nfill: '+f[n].color+' !important;\n}',g.sheet.cssRules.length)}}d.updateStyles(),d.select(f,d.selectedClass)}})}},{key:'_selectExceeds',value:function(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}},{key:'select',value:function(d,f){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+f).classed(f,!1);var g,h,l=[];if(Array.isArray(d)){for(var m=0;m<d.length;m++)d[m].svg&&d[m].svg.selector&&l.push(d[m].svg.selector);h=l.join(',')}else h=d&&d.svg&&d.svg.selector?d.svg.selector:'';if(''===h||(g=this._mainG.selectAll(h)).classed(f,!0).empty())return void(this.opened&&this._resetZoom());var n,o=[];g.each(function(){n=this.getBoundingClientRect(),o[0]=(o[0]>n.left?n.left:o[0])||n.left,o[1]=(o[1]>n.top?n.top:o[1])||n.top,o[2]=(o[2]<n.right?n.right:o[2])||n.right,o[3]=(o[3]<n.bottom?n.bottom:o[3])||n.bottom}),n={left:o[0],top:o[1],height:o[3]-o[1],width:o[2]-o[0]},this.opened&&this._zoomToElement(n)}}},{key:'_calcCenterZoom',value:function(d){var f=this.getBoundingClientRect();if(void 0===f||void 0===d||0===f.height||0===f.width)return{x:0,y:0,k:1};var h,l,g=f.height/f.width;h=void 0===d.nodeType?d:d.getBoundingClientRect();var m=this._mainG.node().getBBox(),n=this._mainG.node().getBoundingClientRect(),o=m.width/n.width||1,p=(h.left-n.left)*o+m.x,q=(h.top-n.top)*o+m.y,r=this._height,u=this._width,v=this._ratio,w=this.zoomPartition;return l=g<v?Math.min(u/(w*h.width*o*g),r/(w*h.height*o)):Math.min(u/(w*h.width*o),u*g/(w*h.height*o)),l<this.minZoom?l=this.minZoom:l>this.maxZoom&&(l=this.maxZoom),g<v?(p=-l*p+(r/g-l*h.width*o)/2,q=-l*q+(r-l*h.height*o)/2):(p=-l*p+(u-l*h.width*o)/2,q=-l*q+(u*g-l*h.height*o)/2),isNaN(p)||isNaN(q)||isNaN(l)?{x:0,y:0,k:1}:{x:p,y:q,k:l}}},{key:'notifyResize',value:function(){this._resetZoom()}},{key:'_resetZoom',value:function(d){var f=this;d&&(d.preventDefault(),d.stopPropagation()),requestAnimationFrame(function(){if(f.opened&&f._mainG&&f._mainG.node&&f.src&&(f._mainG.selectAll('.clicked').classed('clicked',!1),!f.initiallyZoomToAll)){if(f.item&&Object.keys(f.item).length||f.items&&f.items.length)return void f._selectSelected();if(f.exceeding.length)return void f._selectExceeds();if(f.initial){var g=f._mainG.selectAll(f.initial);if(!(g&&g.empty()))return void f.select([{svg:{selector:f.initial}}],'initial')}f._zoomToElement(f._mainG.node())}})}}],[{key:'is',get:function(){return'device-svg'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object},items:{type:Array},exceeding:{type:Array},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}},{key:'observers',get:function(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}}]),b}(WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)));customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_domainXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.domain(f)}},{key:'_domainYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.domain(f).nice()}},{key:'_rangeXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.range(f)}},{key:'_rangeYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.range(f).nice()}},{key:'_computeScaleFn',value:function(f,g,h){if(void 0!==f){var i='time'===f?d3.scaleTime():'ln'===f?d3.scaleLog().base(Math.E):'log'===f?d3.scaleLog().base(g||10):'log\u2082'===f?d3.scaleLog().base(2):'log\u2081\u2080'===f?d3.scaleLog().base(10):'\u221A'===f?d3.scalePow().exponent(0.5):'pow'===f?d3.scalePow().exponent(g||1):d3.scaleLinear();return'x'===h?(i.ticks(this.ticksX||10),this.domainX&&i.domain(this.domainX),this.rangeX&&i.range(this.rangeX)):'y'===h&&(i.ticks(this.ticksY||10),this.domainY&&i.domain(this.domainY),this.rangeY&&i.range(this.rangeY),i.nice()),i}}},{key:'_SCALE_USES_BASE',value:function(f){return'log'===f||'pow'===f}},{key:'_IS_LOG_SCALE',value:function(f){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(f)}}],[{key:'properties',get:function(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}},{key:'observers',get:function(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}},{key:'_VALID_SCALES',get:function(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return function(e){function f(){return babelHelpers.classCallCheck(this,f),babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this))}return babelHelpers.inherits(f,e),babelHelpers.createClass(f,[{key:'_rangeXChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeXChanged',this).call(this,j),j[1]&&(this.ticksX=Math.ceil(j[1]/60))}},{key:'_rangeYChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeYChanged',this).call(this,j),j[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.axisMargin)):this.ticksY=Math.ceil(j[0]/50))}},{key:'_computeAxisNode',value:function(j,k,l,n){if(void 0!==j){var o=this.axisColor||'';l=l||this.axisTitle||'';var p=this._isVertical(k);if(n&&n.node){var q=n.node();q&&q.parentElement&&q.parentElement.removeChild(q),n=null}var r=j.append('svg:g').classed('axis',!0).attr('orient',k).classed('y',p).classed('vertical',p).classed('x',!p).classed('expanded',!0).style('color',o);return r.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,r)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),r.append('svg:title').text(l),r.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,k)),r.node()._genitor=this,r.node()._axis=r,r._left=0,r._right=0,r._bottom=0,r._top=0,r}}},{key:'_updateAxisBrushGenerator',value:function(j,k,l){l=l||8;var n=[[0,0],[j[1],j[0]]];'left'===k?n[0][0]=-l:'right'===k?n[1][0]=l:'top'===k?n[0][1]=-l:'bottom'===k&&(n[1][1]=l),this.extent(n)}},{key:'_computeAxisGenerator',value:function(j,k,l,n){if(j&&void 0!==k&&void 0!==l){var o=this.tickSize||6;return('left'===j?d3.axisLeft(k):'right'===j?d3.axisRight(k):'top'===j?d3.axisTop(k):d3.axisBottom(k)).tickSize(o).tickFormat(this._computeFormatFn(l,n))}}},{key:'_setAxisProperties',value:function(j,k,l){j.classed('expanded',l),k.tickFormat(l?null:'')}},{key:'_removeAxes',value:function(){var j;this.axisX&&this.axisX.node&&(j=this.axisX.node(),j&&j.parentElement&&j.parentElement.removeChild(j),this.axisX=null),this.axisY&&this.axisY.node&&(j=this.axisY.node(),j&&j.parentElement&&j.parentElement.removeChild(j),this.axisY=null),delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}},{key:'_toggleAxis',value:function(j){var k=j.classed('expanded');j.classed('expanded',!k),this.sizeChanged()}},{key:'_onAxisClicked',value:function(j){var k=this;this._activeToggleAxisJob&&clearTimeout(this._axisToggleAxisJob),this._activeToggleAxisJob=setTimeout(function(){k._toggleAxis(j),k._activeToggleAxisJob=null},300)}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault();'left'===j||'right'===j?(this.axisY._isBrushed=!1,this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.scaleX.domain(this.domainX),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}},{key:'_onAxisMouseover',value:function(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}},{key:'_onAxisMouseleave',value:function(){}},{key:'_onAxisDragStart',value:function(){d3.select(this).raise().classed('dragged',!0);var j=d3.select(this).classed('vertical');j?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}},{key:'_onAxisDragged',value:function(){var j=d3.select(this).classed('vertical'),k=0,l=0;j?k=(this._axis._left||0)+d3.event.x-this._startleft:l=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+k+','+l+')')}},{key:'_onAxisDragEnd',value:function(){d3.select(this).classed('dragged',!1);var o,j=d3.select(this).classed('vertical'),k=this._genitor,l=0,n=0;if(j){if(l=(this._axis._left||0)+d3.event.x-this._startleft,o=l>k.rangeX[1]/2?'right':'left',o!==k.axisOrientY)return k.axisGeneratorY=k._computeAxisGenerator(k.axisOrientY=o,k.scaleY,k.scalingY,k.scaleBaseY).ticks(k.ticksY).tickSize(k.tickSize).tickFormat(k.axisY.classed('expanded')?k._computeFormatFn(k.scalingY,k.scaleBaseY):''),k.axisY=k._computeAxisNode(k._axisInsertionPoint,o,k.item&&k.item.mount,k.axisY).classed('expanded',!0).call(k.axisGeneratorY),void k.sizeChanged();l=this._axis._left}else{if(n=(this._axis._top||0)+d3.event.y-this._starttop,o=n>k.rangeY[0]/2?'bottom':'top',o!==k.axisOrientX)return k.axisGeneratorX=k._computeAxisGenerator(k.axisOrientX=o,k.scaleX,k.scalingX,k.scaleBaseX).ticks(k.ticksX).tickFormat(k.axisX.classed('expanded')?k._computeFormatFn(k.scalingX,k.scaleBaseX):''),k.axisX=k._computeAxisNode(k._axisInsertionPoint,o,k.item&&k.item.mount,k.axisX).classed('expanded',!0).call(k.axisGeneratorX),void k.sizeChanged();n=this._axis._top}d3.select(this).attr('transform','translate('+l+','+n+')'),this._startleft=0,this._starttop=0}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){var n;'y'===j?(n=k.map(this.scaleY.invert,this.scaleY).sort(function(o,p){return o>p}),this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)):(n=k.map(this.scaleX.invert,this.scaleX).sort(function(o,p){return o>p}),this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)),this.redraw()}}}},{key:'_axisColorChanged',value:function(j){this.axisX&&this.axisX.style('color',j),this.axisY&&this.axisY.style('color',j)}},{key:'_isVertical',value:function(j){return'left'===j||'right'===j}},{key:'_computeFormatFn',value:function(){return'time'===arguments[0]?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}},{key:'sizeChanged',value:function(){}},{key:'redraw',value:function(){}},{key:'formatTime',value:function(j){return(d3.timeSecond(j)<j?this.timeFormat('.%L'):d3.timeMinute(j)<j?this.timeFormat(':%S'):d3.timeHour(j)<j?this.timeFormat('%H:%M'):d3.timeDay(j)<j?this.timeFormat('%X'):d3.timeMonth(j)<j?d3.timeWeek(j)<j?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(j)<j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeRange',value:function(j,k,l){var n=(k[1]-k[0]).valueOf()/l;return(100>n?this.timeFormat(':%S.%L'):500>n?this.timeFormat(':%M:%S.%L'):5E3>n?this.timeFormat(':%M:%S'):2E4>n?this.timeFormat('%H:%M:%S'):6E4>n?this.timeFormat('%H:%M'):36E5>n?this.timeFormat('%X'):864E5>n?this.timeFormat('%d.%m'):6048E5>n?this.timeFormat('%d.%m'):24192E5>n?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeAbsolute',value:function(j){var k=j%315576E5,l=(j-k)/315576E5,n=k%864E5,o=(k-n)/864E5,p=n%36E5,q=(n-p)/36E5,r=p%6E4,t=(p-r)/6E4,u=r%1E3,v=(r-u)/1E3,w='';return l&&(w+=l+'y '),o&&(w+=o+'d '),q&&(w+=q+'h '),t&&(w+=t+'m '),v&&(w+=v+'s '),u&&(w+=u+'ms'),w}},{key:'formatNumber',value:function(j){return this.numberFormat(',g')(j)}},{key:'formatIndicator',value:function(j,k){return j&&j.from&&j.to?k<j.from||k>j.to?'\u2717':'\u2713':k?'\u2717':'\u2713'}},{key:'_setDateNumberFormat',value:function(j,k){void 0===k||void 0===j||(k&&(this.localeDate=k,d3.timeFormatDefaultLocale(k),this.timeFormat=d3.timeFormatLocale(k).format),j&&(this.localeNumber=j,d3.formatDefaultLocale(j),this.numberFormat=d3.formatLocale(j).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}],[{key:'properties',get:function(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:24},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}},{key:'observers',get:function(){return['_setDateNumberFormat(localeNumber, localeDate)']}},{key:'_VALID_AXIS_POSITIONS',get:function(){return['top','right','bottom','bottom']}}]),f}(WebvisualMixins.ScaleMixin(c))};</script><dom-module id="device-graph"><template><style></style></template><script>var DeviceGraph=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isAttached=!1,c._chart=null,c._areaGenerator=d3.area().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y0(function(f){return f&&c._IS_LOG_SCALE(c.scalingY)?c._chart._height:c.scaleY(0)}).y1(function(f){return c.scaleY(f.y)}),c._lineGenerator=d3.line().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y(function(f){return c.scaleY(f.y)}),c.bisectDate=d3.bisector(function(f,g){return f.x-g}),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-graph'}},{key:'properties',get:function(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3.75},viewLength:{type:Number,value:3e4},storeInside:{type:Boolean,value:!0,readOnly:!0},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}}]),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.item&&this.addNodes()}},{key:'disconnectedCallback',value:function(){this._isAttached=!1,babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.removeNodes()}},{key:'addNodes',value:function(){this._isAttached&&this.clearValues(!0);var f=this._containerRoot;return f&&'DEVICE-CHART'===f.nodeName?f._isAttached?void(this._chart=f,this._axisInsertionPoint=f._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',f)}},{key:'removeNodes',value:function(){var f;this.axisX&&(f=this.axisX.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this.axisY&&(f=this.axisY.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}},{key:'_areaChanged',value:function(f){if(this._chart&&this._chart._area)if(!!f)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var g=this._area.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._area=null}}},{key:'_lineChanged',value:function(f){if(this._chart&&this._chart._line)if(!!f)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var g=this._line.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._line=null}}},{key:'_thresholdChanged',value:function(f){if(this._chart&&this._chart._boundery)if(f)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){var g=this.boundery.node();g&&g.parentElement&&g.parentElement.removeChild(g),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.mount||'#000')}}},{key:'_setColorProperties',value:function(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}},{key:'_itemChanged',value:function(f){return this._isAttached?f&&f.mount?void this.addNodes():void this.removeNodes():void 0}},{key:'insertValues',value:function(f,g){if(void 0!==f){if(g=g||(0<this.viewLength?this.viewLength:f.length),g&&(f=f.slice(f.length-g,f.length)),f.map(function(l){return{x:+l.x,y:+l.y,state:+l.state}}),this.storeInside){this.values=this.values.concat(f);var h=this.min(this.values,'x'),k=this.max(this.values,'x');void 0!==h&&void 0!==k&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(h<this._chart.domainX[0]&&this._chart.set('domainX',[h,this._chart.domainX[1]]),k>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],k])):this.set('domainX',[h,k])),h=this.min(this.values,'y'),k=this.max(this.values,'y'),void 0!==h&&void 0!==k&&(h===k&&(h--,k++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(h<this._chart.domainY[0]&&this._chart.set('domainY',[h,this._chart.domainY[1]]),k>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],k])):this.set('domainY',[h,k]))}this.renderInsertedValues(f)}}},{key:'spliceValues',value:function(f){for(var h,g=0;g<f.length;g++){for(h=void 0,h=this.values.length-1;0<=h&&this.values[h].x!==f[g].x;h--);-1!==h&&this.values.splice(h,1)}this.redraw()}},{key:'renderInsertedValues',value:function(f){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var g;this._chart.domainX&&this._chart.domainX.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainX',this.domainX),g=!0),this._chart.domainY&&this._chart.domainY.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainY',this.domainY),g=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(g=!0),this.redraw(g,f)}}},{key:'sizeChanged',value:function(){this._isAttached&&this._chart.sizeChanged()}},{key:'redraw',value:function(f,g){if(this._isAttached){if(f)return void this._chart.redraw(!0);var h=this.values||g||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(h)),this.hasLine&&this._line.attr('d',this._lineGenerator(h)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var q,k=[],l=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',n=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',o=this.item.color||'#000';void 0!==this.item.threshold.from&&(q=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(q)&&(k.push({o:q+'%',c:n}),k.push({o:q+'%',c:o}))),void 0!==this.item.threshold.to&&(q=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(q)&&(k.push({o:q+'%',c:o}),k.push({o:q+'%',c:l})));var r=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(k);r.attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.enter().append('stop').attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.exit().remove()}}}},{key:'_getDomain',value:function(f,g){var h=this;return new Promise(function(k,l){var n='y'===f,o=n?h.scalingY:h.scalingX;h.requestRange(f).then(function(q){if(void 0!==q[0]&&void 0!==q[1]){n&&q[0]===q[1]&&(q[0]--,q[1]++);var r=h._IS_LOG_SCALE(o);if(r){var s=0<q[0]*q[1];s&&0>=q[0]&&(q[0]=Math.sign(q[1])*Number.EPSILON),s&&0>=q[1]&&(q[1]=Math.sign(q[0])*Number.EPSILON)}g&&('x'===f?h.set('domainX',q):'y'===f&&h.set('domainY',q))}k({domain:q,key:f})}).catch(function(q){l(q)})})}},{key:'_defined',value:function(f){return Number.isFinite(f.y)?0>=f.y&&this._IS_LOG_SCALE(this.scalingY)?null:!0:null}},{key:'_closestPoint',value:function(f){function g(G){var H=h(new Date(G.x))-f[0],I=k(G.y)-f[1];return H*H+I*I}var h=this.scaleX,k=this.scaleY,l=this.values,n=h.invert(f[0]),o=Math.ceil(this._chart._width/l.length),q=Math.pow(Math.ceil(l.length/this._chart._width),2),r=this.bisectDate.left(l,n,0,l.length-1),s=g(l[r]),t=Math.sqrt(s)/q,u=h.invert(f[0]-t),w=this.bisectDate.left(l,u,0,r),z=2*r-w;0>w&&(w=0),z>l.length&&(z=l.length);for(var A=s,B=void 0,C=r,D=w;D<z;D+=o)(B=g(l[D]))<=A&&(r=D,A=B);C=r;for(var E=r+1;E<z&&E<r+o-1;E++)(B=g(l[E]))<=A&&(A=B,C=E);for(var F=r-1;F>w&&F>r-o+1;F--)(B=g(l[F]))<=A&&(A=B,C=F);return l[C]}},{key:'_closestInterpolatedPoint',value:function(f,g){function h(D){var E=D.x-f[0],F=D.y-f[1];return E*E+F*F}g=g||this._area.node()||this._line.node();for(var r,t,k=g.getTotalLength(),l=2*Math.ceil(k/this._chart._width/2),n=void 0,o=void 0,q=Infinity,s=0;s<=k;s+=l)(t=h(r=g.getPointAtLength(s)))<q&&(n=r,o=s,q=t);for(l/=2;0.5<l;){var u=void 0,w=void 0,z=void 0,A=void 0,B=void 0,C=void 0;0<=(z=o-l)&&(B=h(u=g.getPointAtLength(z)))<q?(n=u,o=z,q=B):(A=o+l)<=k&&(C=h(w=g.getPointAtLength(A)))<q?(n=w,o=A,q=C):l/=2}return n={x:this.scaleX(n.x),y:this.scaleY(n.y)},n.distance=Math.sqrt(q),n}},{key:'setColor',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'setColor',this).call(this,f),this._setColorProperties()}},{key:'clearValues',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'clearValues',this).call(this,f)}},{key:'_getStrokeColor',value:function(f){if(this.item.threshold)switch(f.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}},{key:'_lineWidthChanged',value:function(f){this._line&&this._line.attr&&this._line.attr('stroke-width',f)}},{key:'_interpolationChanged',value:function(f){var g;g='Basis Spline'===f?d3.curveBasis:'Monotoner Spline'===f?d3.curveMonotoneX:'Kubischer Spline'===f?d3.curveNatural:'Cardinaler Spline'===f?d3.curveCardinal:'Catmull-Rom-Spline'===f?d3.curveCatmullRom:'Stufe (mitte)'===f?d3.curveStep:'Stufe (davor)'===f?d3.curveStepAfter:'Stufe (danach)'===f?d3.curveStepBefore:d3.curveLinear,this._areaGenerator.curve(g),this._lineGenerator.curve(g),this.redraw()}},{key:'_onAxisClicked',value:function(f){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((f._isBrushed||this._isZoomed)&&this._chart._resetZoom())):void babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisClicked',this).call(this,f)}},{key:'_onAxisMouseover',value:function(f,g){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisMouseover',this).call(this,f,g),this._area&&this._area.raise(),this._line&&this._line.raise()}},{key:'_containerRoot',get:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.host||f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}}],[{key:'observers',get:function(){return['_itemChanged(item)','_lineChanged(hasLine)','_areaChanged(hasArea)','_thresholdChanged(item.threshold)']}}]),b}(WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;}:host(:-webkit-full-screen) *{mix-blend-mode:unset !important;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:visible;font-family:inherit !important;}text{fill:currentColor;stroke:#000;stroke-width:0.2;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;isolation:isolate;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 200ms linear;}.axis:hover path{fill-opacity:0.2;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.8;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;mix-blend-mode:hard-light;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *:not(.dot),
      #delta > *:not(.dot){stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:exclusion;pointer-events:none;}#zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;stroke:#000;stroke-opacity:0.75;stroke-width:1px;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{color:var(--primary-text-color, #111);position:absolute;top:0;right:var(--control-right, 0px);display:flex;flex-direction:column;}.selectbox > select{opacity:1;}[hidden]{display:none !important;}</style><div id="svgContainer"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" on-click="_closeControl"><defs><marker id="arrowToLeft" viewBox="0 0 20 10" refX="0" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 20,0 L 0,5 L 20,10 Z"></path></marker><marker id="arrowToRight" viewBox="0 0 20 10" refX="20" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0,0 L 20,5 L 0,10 Z"></path></marker><marker id="stub" markerWidth="8" markerHeight="6" refX="6" refY="5" orient="auto" markerUnits="strokeWidth" viewBox="0 0 6 10"><path d="M 5,10 M 4,0 H 6 V 10 H 4 Z"></path><path d="M 3,5 M 0,4 H 6 V 6 H 0 Z"></path></marker><filter id="solid"><feFlood flood-color="white" result="out1"></feFlood><feComposite in="SourceGraphic" in2="out1" operator="over"></feComposite></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" on-contextmenu="_resetZoom"></rect><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="âˆš">âˆš</option><option value="ln">ln</option><option value="logâ‚‚">logâ‚‚</option><option value="logâ‚â‚€">logâ‚â‚€</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div><div class="checkbox"><input type="checkbox" name="multiX" checked="{{multiAxesX::change}}">mehrere x-Achsen</div><div class="checkbox"><input type="checkbox" name="multiY" checked="{{multiAxesY::change}}">mehrere y-Achsen</div></iron-collapse><section id="control"><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>var DeviceChart=function(c){function f(){babelHelpers.classCallCheck(this,f);var h=babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return h._width=0,h._height=0,h._graphs=new Set,h}return babelHelpers.inherits(f,c),babelHelpers.createClass(f,null,[{key:'is',get:function(){return'device-chart'}},{key:'properties',get:function(){return{opened:{type:Boolean},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}}]),babelHelpers.createClass(f,[{key:'_localizeChanged',value:function(j){this.set('localeDate',j('date')),this.set('localeNumber',j('number'))}},{key:'_fireResize',value:function(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}},{key:'connectedCallback',value:function(){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'connectedCallback',this).call(this),this._buildLayout()}},{key:'_buildLayout',value:function(){var j=this;this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._controlcontent=d3.select(this.$.controlcontent),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',function(){j._activeHideInfoJob&&clearTimeout(j._activeHideInfoJob)},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([0.95,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',function(){j._debouncedHideInfo(j)},{passive:!0}).on('mousemove',function(){var k=d3.mouse(j._chart.node());requestAnimationFrame(function(){var l,n,o,r;if(j._graphs.forEach(function(u){if(u.values&&u.values.length){var v=u._closestPoint(k),w=Math.pow(k[0]-u.scaleX(v.x),2)+Math.pow(k[1]-u.scaleY(v.y),2);(void 0===o||w<o)&&(o=w,n=v,l=u)}}),n){if(r='#fff',l.item.threshold)switch(n.state){case 1:r=l.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:r=l.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}j._focusedValue=n,j._focusedValue.g=l,j._focusedValue._left=j.multiAxesY?l.axisY._left:j.axisY._left,j._focusedValue._top=j.multiAxesX?l.axisX._top:j.axisX._top,j._focusDot.datum(n).attr('fill',r).attr('r',l.dotRadius),j._showInfo(),j._moveInfo(n)}else j._debouncedHideInfo()})},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[]),this._debouncedHideInfo(),this._fixedValue=null,this._focusedValue=null}},{key:'sizeChanged',value:function(){var j=this;this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(function(){j.sizeLayout()},0))}},{key:'sizeLayout',value:function(){var j=this;if(this.opened&&this._isAttached){var k=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===k.height||0===k.width)return void requestAnimationFrame(function(){j.sizeChanged()});this._debouncedHideInfo(),this._chart._top=-2,this._chart._right=1,this._chart._bottom=1,this._chart._left=-2;var l,n=[],o=[];this._graphs.forEach(function(r){if(r._isAttached){var u;r.axisX.attr('hidden')||(u=r.axisX.classed('expanded')?r.axisSizeX:r.tickSize+r.axisMargin,n.push(j._incremAxisPosition(r.axisX,r.axisOrientX,u))),r.axisY.attr('hidden')||(u=r.axisY.classed('expanded')?r.axisSizeY:r.tickSize+r.axisMargin,n.push(j._incremAxisPosition(r.axisY,r.axisOrientY,u)))}}),this.axisX.attr('hidden')||(l=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.axisMargin,n.push(this._incremAxisPosition(this.axisX,this.axisOrientX,l))),this.axisY.attr('hidden')||(l=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.axisMargin,n.push(this._incremAxisPosition(this.axisY,this.axisOrientY,l))),Promise.all(n).then(function(){var r=j.$.svg.getBoundingClientRect();j._width=Math.abs(r.width-Math.abs(j._chart._left||0)-Math.abs(j._chart._right||0)),j._height=Math.abs(r.height-Math.abs(j._chart._bottom||0)-Math.abs(j._chart._top||0)),j.set('rangeX',[0,j._width]),j.set('rangeY',[j._height,0]),j._zoom.attr('height',j._height).attr('width',j._width),j._zoomBehavior.translateExtent([[0,0],[j._width,j._height]]).extent([[0,0],[j._width,j._height]]),j._graphs.forEach(function(u){u._isAttached&&(!u.axisX.attr('hidden')&&o.push(j._finalizeAxisPosition(u.axisX,u.axisOrientX,j._width,j._height)),!u.axisY.attr('hidden')&&o.push(j._finalizeAxisPosition(u.axisY,u.axisOrientY,j._width,j._height)))}),j.axisX.attr('hidden')||o.push(j._finalizeAxisPosition(j.axisX,j.axisOrientX,j._width,j._height)),j.axisY.attr('hidden')||o.push(j._finalizeAxisPosition(j.axisY,j.axisOrientY,j._width,j._height)),Promise.all(o).then(function(){j._control.transition(100).style('transform','translate('+-j._chart._right+'px,'+-j._chart._bottom+'px)'),j._controlcontent.transition(100).style('transform','translate('+-j._chart._right+'px,'+-j._chart._top+'px)'),j._chart.select('clipPath#clip rect').transition(100).attr('width',j._width).attr('height',j._height),j._chart.select('rect#plot').transition(100).attr('width',j._width).attr('height',j._height),j._chart.transition(100).attr('transform','translate('+(-j._chart._left||0)+','+(-j._chart._top||0)+')'),j._focusY.attr('y1',j._height),j._graphs.forEach(function(u){u._isAttached&&(!u.axisX.attr('hidden')&&(u.axisGeneratorX=u._computeAxisGenerator.call(u,u.axisOrientX,u.scaleX,u.scalingX,u.scaleBaseX).ticks(u.ticksX).tickSize(u.tickSize).tickFormat(u.axisX.classed('expanded')?u._computeFormatFn(u.scalingX,u.scaleBaseX):''),u._updateAxisBrushGenerator.call(u.axisBrushGeneratorX,j.rangeX,u.axisOrientX),u.axisX.select('.brush').raise().call(u.axisBrushGeneratorX),u.axisX.attr('transform','translate('+(u.axisX._left||0)+','+(u.axisX._top||0)+')')),!u.axisY.attr('hidden')&&(u.axisGeneratorY=u._computeAxisGenerator.call(u,u.axisOrientY,u.scaleY,u.scalingY,u.scaleBaseY).ticks(u.ticksY).tickSize(u.tickSize).tickFormat(u.axisY.classed('expanded')?u._computeFormatFn(u.scalingY,u.scaleBaseY):''),u._updateAxisBrushGenerator.call(u.axisBrushGeneratorY,j.rangeY,u.axisOrientY),u.axisY.select('.brush').raise().call(u.axisBrushGeneratorY),u.axisY.attr('transform','translate('+(u.axisY._left||0)+','+(u.axisY._top||0)+')')))}),j.axisX.attr('hidden')||(j.axisGeneratorX=j._computeAxisGenerator(j.axisOrientX,j.scaleX,j.scalingX,j.scaleBaseX).ticks(j.ticksX).tickSize(j.tickSize).tickFormat(j.axisX.classed('expanded')?j._computeFormatFn(j.scalingX,j.scaleBaseX):''),j._updateAxisBrushGenerator.call(j.axisBrushGeneratorX,j.rangeX,j.axisOrientX),j.axisX.select('.brush').raise().call(j.axisBrushGeneratorX),j.axisX.attr('transform','translate('+(j.axisX._left||0)+','+(j.axisX._top||0)+')')),j.axisY.attr('hidden')||(j.axisGeneratorY=j._computeAxisGenerator(j.axisOrientY,j.scaleY,j.scalingY,j.scaleBaseY).ticks(j.ticksY).tickSize(j.tickSize).tickFormat(j.axisY.classed('expanded')?j._computeFormatFn(j.scalingY,j.scaleBaseY):''),j._updateAxisBrushGenerator.call(j.axisBrushGeneratorY,j.rangeY,j.axisOrientY),j.axisY.select('.brush').raise().call(j.axisBrushGeneratorY),j.axisY.attr('transform','translate('+(j.axisY._left||0)+','+(j.axisY._top||0)+')')),j._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!j.domainX||!j.domainY||j.domainX.some(function(u){return void 0===u||null===u})||j.domainY.some(function(u){return void 0===u||null===u})?j.redraw(!0):j.redraw()})})}}},{key:'_incremAxisPosition',value:function(j,k,l){return'left'===k?(j._left=this._chart._left,j._right=0,this._chart._left-=l):'right'===k?(j._left=0,j._right=this._chart._right,this._chart._right+=l):(j._left=0,j._right=0),'top'===k?(j._bottom=0,j._top=top,this._chart._top-=l):'bottom'===k?(j._bottom=this._chart._bottom,j._top=0,this._chart._bottom+=l):(j._bottom=0,j._top=0),!0}},{key:'_finalizeAxisPosition',value:function(j,k,l,n){return j._left+=j._right,j._top+=j._bottom,j._bottom=0,j._right=0,'right'===k?j._left+=l:'bottom'===k&&(j._top+=n),!0}},{key:'_redomain',value:function(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(function(j){j&&console.warn(j)}))}},{key:'redraw',value:function(j){var k=this;return this._isAttached?j?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(function(){k.axisX.attr('hidden')||k.axisX.transition(100).attr('transform','translate('+(k.axisX._left||0)+','+(k.axisX._top||0)+')').call(k.axisGeneratorX),k.axisY.attr('hidden')||k.axisY.transition(100).attr('transform','translate('+(k.axisY._left||0)+','+(k.axisY._top||0)+')').call(k.axisGeneratorY),k._graphs.forEach(function(l){l._isAttached&&(l.axisX.attr('hidden')?l.set('domainX',k.domainX):l.axisX.transition(100).attr('transform','translate('+(l.axisX._left||0)+','+(l.axisX._top||0)+')').call(l.axisGeneratorX),l.axisY.attr('hidden')?l.set('domainY',k.domainY):l.axisY.transition(100).attr('transform','translate('+(l.axisY._left||0)+','+(l.axisY._top||0)+')').call(l.axisGeneratorY),l.redraw())}),k._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),k._updateInfo()},0)):void 0}},{key:'_multiAxesChanged',value:function(j,k){if(this._isAttached){var l;this._graphs.forEach(function(n){n._isAttached&&(l=!j||null,n.axisX.attr('hidden',l),l=!k||null,n.axisY.attr('hidden',l))}),l=!!j||null,this.axisX.attr('hidden',l),l=!!k||null,this.axisY.attr('hidden',l),l=k||j?null:!0,this.axisX.select('.brush').attr('hidden',l),this.axisY.select('.brush').attr('hidden',l),this._redomain(),this.sizeChanged()}}},{key:'_addGraph',value:function(j){this._graphs.add(j),this.sizeChanged()}},{key:'_removeGraph',value:function(j){this._graphs.delete(j),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),j=null,this._fixedValue=null,this._focusedValue=null,this.sizeChanged()}},{key:'_getDomain',value:function(){var j=this;return new Promise(function(k,l){var n=[],o=[];j._graphs.forEach(function(r){n.push(r._getDomain('x',j.multiAxesX)),o.push(r._getDomain('y',j.multiAxesY))}),Promise.all(n).then(function(r){for(var w,u=void 0,v=void 0,z=0;z<r.length;z++)u=void 0===u||u>r[z].domain[0]?r[z].domain[0]:u,v=void 0===v||v<r[z].domain[1]?r[z].domain[1]:v;(void 0===u||void 0===v)&&k(),w=[u,v],j.set('domainX',w),j.scaleX.domain(w),!1===j.multiAxesX&&j._graphs.forEach(function(A){A.axisX._isBrushed=!1,A.set('domainX',w),A.scaleX.domain(w)}),Promise.all(o).then(function(A){for(var D,B=void 0,C=void 0,E=0;E<A.length;E++)B=void 0===B||B>A[E].domain[0]?A[E].domain[0]:B,C=void 0===C||C<A[E].domain[1]?A[E].domain[1]:C;(void 0===B||void 0===C)&&k(),D=[B,C],j.set('domainY',D),!1===j.multiAxesY&&j._graphs.forEach(function(F){F.axisY._isBrushed=!1,F.set('domainY',D)}),k()}).catch(function(A){l(A)})}).catch(function(r){l(r)})})}},{key:'insertValues',value:function(j){this._graphs.forEach(function(k){k&&k._isAttached&&k.item&&k.item.mount&&j[k.item.mount]&&k.insertValues(j[k.item.mount])})}},{key:'clearValues',value:function(){this._graphs.forEach(function(j){j&&j._isAttached&&j.clearValues()})}},{key:'_moveInfo',value:function(j){if(Number.isFinite(j.g.scaleY(j.y))){var k=this._computeFormatFn.call(j.g,j.g.scalingX,j.g.scaleBaseX),l=this._computeFormatFn.call(j.g,j.g.scalingY,j.g.scaleBaseY),n=this._fixedValue;if(this._info.text(k(j.x)+' '+l(j.y)),n){var o=Math.abs(n.x-j.x),r=Math.abs(n.y-j.y);this._infoDeltaX.text(('time'===this.scalingX?j.g.formatTimeAbsolute:k)(o)),this._infoDeltaY.text(('time'===this.scalingY?j.g.formatTimeAbsolute:l)(r))}this._updateInfo()}}},{key:'_showInfo',value:function(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}},{key:'_showDelta',value:function(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}},{key:'_debouncedHideInfo',value:function(){var j=this;this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(function(){j._hideInfo(),j._activeHideInfoJob=null},750)}},{key:'_hideInfo',value:function(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}},{key:'_hideDelta',value:function(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}},{key:'_updateInfo',value:function(){if(this._focusedValue&&''!==this._info.attr('hidden')){var j=this._focusedValue,k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);if(k&&l){if(this._alignText(this._info.node(),k,l,null,1.5*this._focusDot.attr('r')),'delta'===this.modus){var n=this._fixedValue;if(n&&void 0!==n.x&&void 0!==n.y&&(j.x!==n.x||j.y!==n.y)){var o=n.g.scaleX(+n.x),r=n.g.scaleY(+n.y);this._deltaX.attr('x1',k).attr('x2',o),this._deltaY.attr('y1',l).attr('y2',r),r<l?(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(r+l)/2,null,null,null,'middle')):(this._deltaY.attr('x1',o).attr('x2',o),this._alignText(this._infoDeltaY.node(),o,(r+l)/2,null,null,null,'middle')),r<l||o<k?(this._deltaX.attr('y1',r).attr('y2',r),this._alignText(this._infoDeltaX.node(),(o+k)/2,r,null,null,null,'middle')):(this._deltaX.attr('y1',l).attr('y2',l),this._alignText(this._infoDeltaX.node(),(o+k)/2,l,null,null,null,'middle')),this._deltaDot.attr('cy',r).attr('cx',o)}else this._hideDelta()}this._focusX.attr('x1',j._left).attr('x2',k).attr('y2',l).attr('y1',l),this._focusY.attr('y1',j._top).attr('y2',l).attr('x2',k).attr('x1',k),this._focusDot.attr('cy',l).attr('cx',k),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}},{key:'_alignText',value:function(j,k,l,n,o,r,u){n=n||0,o=o||0;var v=j.getBBox(),w=this._height,z=this._width,A=r||'middle',B=u||'ideographic',C=n,D=o;'middle'===A?C+=v.width/2:'end '===A?C+=v.width:void 0,'ideographic'===B?D+=v.height:'middle'===B?D+=v.height/2:'hanging'===B?D-=v.height:void 0,0>=l-D?B='hanging':l+D>w&&(l=w-D),k+C>=z?A='end':0>=k-C&&(A='start'),j.setAttribute('x',k+n),j.setAttribute('y',l-o),j.setAttribute('text-anchor',A),j.setAttribute('alignment-baseline',B)}},{key:'_modusChanged',value:function(j){switch(j){case'zoom':break;case'delta':break;case'integral':break;default:}this._fixedValue=null,this._focusedValue=null}},{key:'_dotClicked',value:function(j){var n,o,r,k=this._zoom.node().__zoom,l=this._fixedValue;switch(this.modus){case'zoom':n=j.g.scaleX(+j.x)-this._width/6,o=(j.g.scaleY(+j.y)||0)-this._height/6,r=3*k.k,o=(k.y-o)/k.k,n=(k.x-n)/k.k,this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(r).translate(n,o));break;case'delta':l&&void 0!==l.x&&void 0!==l.y&&l.x===j.x&&l.y===j.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=j,this._deltaDot.datum(j).attr('cx',function(u){return u.g.scaleX(u.x)}).attr('cy',function(u){return u.g.scaleY(u.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}},{key:'closeMenu',value:function(){this.showMenu=!1}},{key:'changeInterpolation',value:function(j){this._graphs.forEach(function(k){k&&k._isAttached&&k.set('interpolation',j)})}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){if(!this.multiAxesY&&!this.multiAxesX)return'x'===j&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===j&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));var n,o,r,u,v,l='y'===j;l&&(n=k.map(this.scaleY.invert,this.scaleY).sort(function(w,z){return w>z}),this._graphs.forEach(function(w){w.scaleY.domain(n).nice(),w.axisGeneratorY.scale(w.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),o=this._zoom.node().__zoom,r=o.k*this._height/(k[1]-k[0]),u=(o.y-k[0])/o.k,this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(r).translate(0,u))),l||(n=k.map(this.scaleX.invert,this.scaleX).sort(function(w,z){return w>z}),this._graphs.forEach(function(w){w.scaleX.domain(n),w.axisGeneratorX.scale(w.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),o=this._zoom.node().__zoom,r=o.k*this._width/(k[1]-k[0]),v=(o.x-k[0])/o.k,this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(r).translate(v,0))),this._graphs.forEach(function(w){w.redraw()}),this._updateInfo()}}}},{key:'_onZoomed',value:function(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var j=d3.event.transform;if(this.domainX&&this.domainY){var n,k=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),l=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());this.multiAxesX||(n=k.domain(),this._graphs.forEach(function(o){o.scaleX.domain(n),o.axisGeneratorX.scale(o.scaleX)}),this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.multiAxesY||(n=l.domain(),this._graphs.forEach(function(o){o.scaleY.domain(n),o.axisGeneratorY.scale(o.scaleY)}),this.scaleY.domain(n),this.axisY.call(this.axisGeneratorY.scale(l))),this._graphs.forEach(function(o){o.redraw()}),this._isZoomed=1!==j.k||0!==j.x||0!==j.y,this._updateInfo()}}}},{key:'_onAxisClicked',value:function(j){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((j._isBrushed||this._isZoomed)&&this._resetZoom())):void babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_onAxisClicked',this).call(this,j)}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_onAxisContextMenu',this).call(this,j),this._debouncedHideInfo()}},{key:'_closeControl',value:function(){this.showControl=!1}},{key:'_resetZoom',value:function(j){d3.event?d3.event.preventDefault():j&&j.preventDefault&&j.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.transition().duration(200).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(function(k){k.axisX._isBrushed=!1,k.axisY._isBrushed=!1,k.scaleX.domain(k.domainX),k.scaleY.domain(k.domainY),k.axisX.call(k.axisGeneratorX.scale(k.scaleX)),k.axisY.call(k.axisGeneratorY.scale(k.scaleY))}),this._hideInfo(),this._redomain()}},{key:'_self',get:function(){return this}}],[{key:'observers',get:function(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}}]),f}(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))));customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>