<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(b){this.selection.slice().forEach(function(c){(!b||0>b.indexOf(c))&&this.setItemSelected(c,!1)},this)},isSelected:function(b){return 0<=this.selection.indexOf(b)},setItemSelected:function(b,c){if(null!=b&&c!==this.isSelected(b)){if(c)this.selection.push(b);else{var d=this.selection.indexOf(b);0<=d&&this.selection.splice(d,1)}this.selectCallback&&this.selectCallback(b,c)}},select:function(b){this.multi?this.toggle(b):this.get()!==b&&(this.setItemSelected(this.get(),!1),this.setItemSelected(b,!0))},toggle:function(b){this.setItemSelected(b,!this.isSelected(b))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(b){return this.items.indexOf(b)},select:function(b){this.selected=b},selectPrevious:function(){var b=this.items.length,c=(+this._valueToIndex(this.selected)-1+b)%b;this.selected=this._indexToValue(c)},selectNext:function(){var b=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(b)},selectIndex:function(b){this.select(this._indexToValue(b))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(b){this.listen(this,b,'_activateHandler')},_removeListener:function(b){this.unlisten(this,b,'_activateHandler')},_activateEventChanged:function(b,c){this._removeListener(c),this._addListener(b)},_updateItems:function(){var b=Polymer.dom(this).queryDistributedElements(this.selectable||'*');b=Array.prototype.filter.call(b,this._bindFilterItem),this._setItems(b)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var c=this._valueToItem(this.selected);c?this._selection.select(c):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(b){return!this._excludedLocalNames[b.localName]},_valueToItem:function(b){return null==b?null:this.items[this._valueToIndex(b)]},_valueToIndex:function(b){if(this.attrForSelected){for(var d,c=0;d=this.items[c];c++)if(this._valueForItem(d)==b)return c;}else return+b},_indexToValue:function(b){if(this.attrForSelected){var c=this.items[b];if(c)return this._valueForItem(c)}else return b},_valueForItem:function(b){if(!b)return null;var c=b[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?b.getAttribute(this.attrForSelected):c},_applySelection:function(b,c){this.selectedClass&&this.toggleClass(this.selectedClass,c,b),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,c,b),this._selectionChange(),this.fire('iron-'+(c?'select':'deselect'),{item:b})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(b){return Polymer.dom(b).observeNodes(function(c){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',c,{bubbles:!1,cancelable:!1})})},_activateHandler:function(b){for(var f,c=b.target,d=this.items;c&&c!=this;){if(f=d.indexOf(c),0<=f){var g=this._indexToValue(f);return void this._itemActivate(g,c)}c=c.parentNode}},_itemActivate:function(b,c){this.fire('iron-activate',{selected:b,item:c},{cancelable:!0}).defaultPrevented||this.select(b)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(b){this.multi?this._toggleSelected(b):this.selected=b},multiChanged:function(b){this._selection.multi=b,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(b){return this._indexToValue(this.indexOf(b))},this).filter(function(b){return null!=b},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(b){b=b||[];var c=(this._valuesToItems(b)||[]).filter(function(f){return null!==f&&f!==void 0});this._selection.clear(c);for(var d=0;d<c.length;d++)this._selection.setItemSelected(c[d],!0);if(this.fallbackSelection&&!this._selection.get().length){var e=this._valueToItem(this.fallbackSelection);e&&this.select(this.fallbackSelection)}},_selectionChange:function(){var b=this._selection.get();this.multi?(this._setSelectedItems(b),this._setSelectedItem(b.length?b[0]:null)):null!==b&&b!==void 0?(this._setSelectedItems([b]),this._setSelectedItem(b)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(b){var c=this.selectedValues.indexOf(b);0>c?this.push('selectedValues',b):this.splice('selectedValues',c,1)},_valuesToItems:function(b){return null==b?null:b.map(function(c){return this._valueToItem(c)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var b=this.query;b&&(!this.full&&'('!==b[0]&&(b='('+b+')'),this._mq=window.matchMedia(b),this._add(),this.queryHandler(this._mq))},queryHandler:function(b){this._setQueryMatches(b.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>var TabsOverlay=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._lastTarget=void 0,c._transitionsInFlight=[],c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tabs-overlay'}},{key:'properties',get:function(){return{target:{type:Object,observer:'_targetChanged'}}}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('transitionend',function(f){return d._onTransitionend(f)})}},{key:'_targetChanged',value:function(d,f){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(f,d),this._lastTarget=this.target)}},{key:'_onTransitionend',value:function(d){var f=this._transitionsInFlight.indexOf(d.propertyName);0<=f&&this._transitionsInFlight.splice(f,1),this._transitionsInFlight.length||this._moveComplete()}},{key:'_moveComplete',value:function(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}},{key:'_move',value:function(d,f){var g=this,h=d||f,j=f||d;if(h||j){var k=d?1:0,l=f?1:0;Polymer.dom.flush();var m=this.getBoundingClientRect(),n=window.getComputedStyle(this),o=h.getBoundingClientRect(),p=j.getBoundingClientRect();if(0===p.top&&0===p.right&&0===p.bottom&&0===p.left&&0===p.width&&0===p.height)return this.style.transitionProperty='none',this.style.opacity=l,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';var q=parseFloat(n.top||'0')+(o.top-m.top),r=parseFloat(n.right||'0')-(o.right-m.right),s=parseFloat(n.bottom||'0')-(o.bottom-m.bottom),t=parseFloat(n.left||'0')+(o.left-m.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';var u=[this.style.top=q+'px',this.style.right=r+'px',this.style.bottom=s+'px',this.style.left=t+'px',this.style.opacity=k+''];q+=p.top-o.top,r-=p.right-o.right,s-=p.bottom-o.bottom,t+=p.left-o.left;var v=[0.2,0.2,0.2,0.2,0.2],w=[0,0,0,0,0];o.left<p.left&&o.right<p.right?w[3]=0.1:o.left>p.left&&o.right>p.right&&(w[1]=0.1),o.top<p.top&&o.bottom<p.bottom?w[0]=0.1:o.top>p.top&&o.bottom>p.bottom&&(w[2]=0.1);for(var y=[q+'px',r+'px',s+'px',t+'px',l+''],z=['top','right','bottom','left','opacity'],A=0;A<u.length;A++)u[A]!==y[A]&&(0===v[A]&&0===w[A]||this._transitionsInFlight.push(z[A]));requestAnimationFrame(function(){g.style.transitionDuration=v.map(function(B){return B+'s'}).join(', '),g.style.transitionDelay=w.map(function(B){return B+'s'}).join(', '),g.style.top=q+'px',g.style.right=r+'px',g.style.bottom=s+'px',g.style.left=t+'px',g.style.opacity=l+''})}}}]),b}(Polymer.Element);customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>var TabsContainer=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addScrollListeners()}},{key:'_addScrollListeners',value:function(){var d=this;this.$.container.addEventListener('scroll',function(f){return d._onScroll(f)},{passive:!0}),this.$.container.addEventListener('wheel',function(f){return d._onWheel(f)},{passive:!0})}},{key:'_onSelectedItemChanged',value:function(d){var f=this;d&&(!this.multi&&(this.$.overlay.target=d),requestAnimationFrame(function(){f.vertical?f.$.container.scrollTop=d.offsetTop-f.$.container.offsetTop-f.$.container.clientHeight/2+d.clientHeight/2:f.$.container.scrollLeft=d.offsetLeft-f.$.container.offsetLeft-f.$.container.clientWidth/2+d.clientWidth/2}))}},{key:'_onWheel',value:function(d){if(d){var f,g;switch(d.deltaMode){case 0:g=0.2;break;case 1:g=20;break;case 2:g=this.$.container.offsetHeight;break;default:g=1;}this.vertical?(f=d.deltaY||0,this.$.container.scrollTop+=f*g):(f=d.deltaX||0,this.$.container.scrollLeft+=f*g)}}},{key:'_onScroll',value:function(d,f){d.stopImmediatePropagation();var g;this.vertical?(g=f&&-f.ddy||0,this.$.container.scrollTop+=g):(g=f&&-f.ddx||0,this.$.container.scrollLeft+=g)}},{key:'reset',value:function(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}],[{key:'is',get:function(){return'tabs-container'}},{key:'properties',get:function(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_onSelectedItemChanged(selectedItem)']}}]),b}(Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element));customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(b){Polymer.IronButtonStateImpl._downHandler.call(this,b),this.pressed&&this.ensureRipple(b)},ensureRipple:function(b){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var c=this._rippleContainer||this.root;if(c&&Polymer.dom(c).appendChild(this._ripple),b){var d=Polymer.dom(this._rippleContainer||this),e=Polymer.dom(b).rootTarget;d.deepContains(e)&&this._ripple.uiDownAction(b)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(b){this.hasRipple()&&(this._ripple.noink=b)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>var RippleContainer=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isDown=!1,c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'ripple-container'}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('focus',function(f){return d._onFocus(f)},!0),this.addEventListener('blur',function(f){return d._onBlur(f)},!0),this.addEventListener('down',function(f){return d._rippleDown(f)}),this.addEventListener('up',function(f){return d._rippleUp(f)})}},{key:'_onFocus',value:function(d){this._isDown||this._rippleDown(d)}},{key:'_onBlur',value:function(d){this._rippleUp(d)}},{key:'_rippleDown',value:function(d){this._isDown=!0,this.getRipple().downAction(d)}},{key:'_rippleUp',value:function(d){this._isDown=!1,this.getRipple().upAction(d)}}]),b}(Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element));customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>var TabElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tab-element'}}]),b}(Polymer.Element);customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ü" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>var LogoElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addListners()}},{key:'_addListners',value:function(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}},{key:'_addClass',value:function(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.add('animated')})}.bind(this))}},{key:'_removeClass',value:function(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.remove('animated')})}.bind(this))}}],[{key:'is',get:function(){return'logo-element'}},{key:'properties',get:function(){return{href:{type:String}}}}]),b}(Polymer.Element);customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>var ToggleButton=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.Gestures.addListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.addListener(this,'track',function(f){return d._ontrack(f)})}},{key:'disconnectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),Polymer.Gestures.removeListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.removeListener(this,'track',function(f){return d._ontrack(f)})}},{key:'_ontrack',value:function(d){var f=d.detail;'start'===f.state?this._trackStart(f):'track'===f.state?this._trackMove(f):'end'===f.state&&this._trackEnd(f)}},{key:'_trackStart',value:function(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}},{key:'_trackMove',value:function(d){var f=d.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+f:f)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}},{key:'_trackEnd',value:function(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}},{key:'_onclicked',value:function(){this.checked=!this.checked}}],[{key:'is',get:function(){return'toggle-button'}},{key:'properties',get:function(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}}]),b}(Polymer.Element);customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>var SVGData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_fetchSvgSource',value:function(d){if(d){var h=d.split('/').filter(function(j){return''!==j});if(2===h.length){var i=h[0]+'+'+h[1]+'+svgSource.json';this._fetch(i,'GET','include','json','data').catch(function(j){console.log(j)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}],[{key:'is',get:function(){return'svg-data'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}},{key:'observers',get:function(){return['_fetchSvgSource(room, loggedIn)']}}]),b}(WebvisualMixins.FetchMixin(Polymer.Element));customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>var DeviceSocketData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_connect',value:function(d,e){d&&e?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}},{key:'_createSocketConnection',value:function(d,e){var f=this;d&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(function(){Webvisual.assignStatusNotifications(f),Webvisual.createSocketConnection(d,e),f.socketRoom&&f.connect(f.socketRoom)},0)}},{key:'connect',value:function(d){return d=d||this.socketRoom,d?void('/'===d.substring(0,1)&&(d=d.slice(1,d.length)),Webvisual.setupConnection(d),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}},{key:'disconnect',value:function(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}],[{key:'is',get:function(){return'device-socket-data'}},{key:'properties',get:function(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}},{key:'observers',get:function(){return['_connect(loggedIn, lazyConnect)']}}]),b}(Polymer.Element);customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>var CaptionElement=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.setAttribute('unresolved',''),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-caption'}},{key:'properties',get:function(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}}]),babelHelpers.createClass(b,[{key:'getKey',value:function(d){return this.keys&&this.keys[d]}},{key:'_computeReducedCaptionKeys',value:function(d,e){var h=Object.keys(e||{});if(0===h.length)return[];var i=[];return!0===this.withoutGroupedKey?i=h.filter(function(j){return d!==j}):!0===this.onlyGroupedKey&&(i=h.filter(function(j){return d===j})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===i.length?h:i}},{key:'isEmptyCaption',value:function(d){return!this.keys[d]}}]),b}(Polymer.Element);customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return function(d){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return babelHelpers.inherits(e,d),babelHelpers.createClass(e,[{key:'connectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'connectedCallback',this).call(this),this._linkElement(this.item,this.noLink)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'disconnectedCallback',this).call(this),this._unlinkElement(),this.clearValues()}},{key:'_linkElement',value:function(g,h){var j=this;if(g&&g.mount){if(this._olditem){if(g.mount===this._olditem.mount&&!h)return;this._unlinkElement(this._olditem)}return h?void this._unlinkElement(g):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=g,this._initialized&&(this.clearValues(),this.reset()),this.requestValues(null,null,this.viewLength).then(function(k){for(var l in k)if(l===j.item.mount){j.insertValues(k[l]);break}}).catch(function(){})))}}},{key:'_unlinkElement',value:function(g){var h=this;g=g||this.item||this._olditem,setTimeout(function(){window.Webvisual&&Webvisual.retractElement&&g&&g.mount&&(window.Webvisual.retractElement(h,g),h._olditem=null)},0)}},{key:'getElement',value:function(){return this.properties}},{key:'computeDate',value:function(g){return g?864E5>Math.abs(Date.now()-g)?new Date(g).toLocaleTimeString():new Date(g).toLocaleString():''}},{key:'computeValue',value:function(g,h){return this.item&&this.item.isIndicatorLamp?h?'\u2717':'\u2713':g}},{key:'insertValues',value:function(g,h){var j=this;if(void 0!==g){var h=h||this.viewLength;if(this._initialized||(this._initialized=!0),!h)this.item&&!0===this.item.exceedable&&g.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(g)),this.renderInsertedValues(g);else{var k=g.slice(g.length-h,g.length);this.item&&!0===this.item.exceedable&&k.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(k)),this.renderInsertedValues(k),k.length=0}g.length=0}}},{key:'spliceValues',value:function(g){g&&(!0===this.storeInside&&(this.values=this.values.filter(function(h){return-1===g.indexOf(h)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(g))}},{key:'resetValues',value:function(g){this.values=g,this.notifyPath('values'),this.renderInsertedValues(this.values)}},{key:'clearValues',value:function(){this.values=[],this.notifyPath('values')}},{key:'requestValues',value:function(g,h,j){var k=this;if(!(this.item&&this.item.mount))return new Promise(function(m,o){o()});j=j||this.viewLength||1;var l={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:j||1}};return window.Webvisual?new Promise(function(m){window.Webvisual.request(l,m)}):new Promise(function(m,o){k.values?m(k.values.slice(k.values.length-j,k.values.length)):o()})}},{key:'requestRange',value:function(g){var h=this;if(!(this.item&&this.item.mount))return new Promise(function(k){k([void 0,void 0])});var j={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:g}};return!this.storeInside&&window.Webvisual?new Promise(function(k){window.Webvisual.request(j,k)}):new Promise(function(k){if(h.values&&h.values.length){var m=h.min(h.values,g),o=h.max(h.values,g);void 0===m&&void 0===o||k([m,o])}k([void 0,void 0])})}},{key:'min',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k>l&&(k=l);return k}},{key:'max',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k<l&&(k=l);return k}},{key:'renderInsertedValues',value:function(){}},{key:'renderSplicedValues',value:function(){}},{key:'renderClearing',value:function(){}},{key:'checkExceedingState',value:function(g){this.item&&!1!==this.item.exceedable&&void 0!==g&&(0===g.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}},{key:'_exceedingChanged',value:function(g){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:g}}))}},{key:'_hasExceededChanged',value:function(){}},{key:'reset',value:function(){this.resetColor&&this.resetColor(),babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this)&&babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this).call(this),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}],[{key:'properties',get:function(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}},{key:'observers',get:function(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}}]),e}(c)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'setColor',value:function(e){e&&(this.updateStyles({"--device-color":e||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":e||null})),this.updateStyles()}},{key:'resetColor',value:function(){this.setColor(this.item&&this.item.color||'')}},{key:'getComputedStyleValue',value:function(e){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,e):getComputedStyle(this).getPropertyValue(e)}}],[{key:'observers',get:function(){return['setColor(item.color)']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}},{key:'_addTouchListeners',value:function(f,g,h){var i=this;if(void 0!==g)if(f)this._removeTouchListeners();else{var j=this.eventTarget;j=j?this.$[j]:this,h?(Polymer.Gestures.addListener(j,'down',function(k){return i._handleTouch(k)}),Polymer.Gestures.addListener(j,'up',function(k){return i._handleTouch(k)})):g?Polymer.Gestures.addListener(j,'tap',function(){return i.select()}):this._removeTouchListeners()}}},{key:'_removeTouchListeners',value:function(){var f=this,g=this.eventTarget;g=g?this.$[g]:this,Polymer.Gestures.removeListener(g,'down',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'up',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'tap',function(){return f.select()})}},{key:'_handleTouch',value:function(f){'down'===f.type?this._lastEvent=f:this._lastEvent&&f.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}},{key:'_checkedChanged',value:function(){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:this.checked}}))}},{key:'select',value:function(f,g){!0===this.selectable&&(this._preventSelectEvent=g,void 0===f?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=f)}},{key:'deselect',value:function(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}},{key:'reset',value:function(){this._initialized&&(babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this)&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this).call(this),this.deselect())}}],[{key:'properties',get:function(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}},{key:'observers',get:function(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}}]),c}(a)};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>var DeviceSign=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var f=this;d&&d.length?setTimeout(function(){f._initialized||(f._initialized=!0);var g=d[d.length-1];f.item.isIndicatorLamp||(f.$.value.textContent=f.computeValue(g.y)),f.showDate&&(f.$.dateSection.textContent=f.computeDate(g.x)),f.item.exceedable&&(f.checkExceedingState(g),(!f.hasAttribute('state')||f.state!==g.state)&&f.setAttribute('state',g.state))},0):this.renderClearing()}},{key:'computeValue',value:function(d){return d}},{key:'renderClearing',value:function(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}},{key:'_requestExceedingDetails',value:function(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}],[{key:'is',get:function(){return'device-sign'}},{key:'properties',get:function(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}}]),b}(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>var DeviceCheckbox=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){if(d&&d.length){this._initialized||(this._initialized=!0);var e=d[d.length-1];this.item.exceedable&&(this.checkExceedingState(e),(!this.hasAttribute('state')||this.state!==e.state)&&this.setAttribute('state',e.state))}else this.renderClearing()}},{key:'renderClearing',value:function(){this._initialized=!1,this.setAttribute('state',null)}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.RenderStatus.afterNextRender(this,function(){var d=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!d||'-1px'===d){var e=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,f=Math.floor(8/3*e);f%2!==e%2&&f++,this.updateStyles({"--box-ink-size":f+'px'})}})}}],[{key:'is',get:function(){return'device-checkbox'}},{key:'properties',get:function(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}}]),b}(WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var n=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,n-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(o){this.style.webkitOverflowScrolling=o===this?'touch':'',this.style.overflowY=o===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var o=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(o['padding-top'],10),this._isRTL=!('rtl'!==o.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var o=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),p=o-this._scrollPosition,q=0<=p;if(this._scrollPosition=o,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(p)>this._physicalSize&&0<this._physicalSize){p-=this._scrollOffset;var r=Math.round(p/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=r,this._physicalStart+=r,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var s=this._getReusables(q);q?(this._physicalTop=s.physicalTop,this._virtualStart+=s.indexes.length,this._physicalStart+=s.indexes.length):(this._virtualStart-=s.indexes.length,this._physicalStart-=s.indexes.length),this._update(s.indexes,q?null:s.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(o){var p,q,r,s,t=[],u=this._hiddenContentSize*this._ratio,w=this._virtualStart,z=this._virtualEnd,A=this._physicalCount,B=this._physicalTop+this._scrollOffset,C=this._physicalBottom+this._scrollOffset,D=this._scrollTop,E=this._scrollBottom;for(o?(p=this._physicalStart,q=this._physicalEnd,r=D-B):(p=this._physicalEnd,q=this._physicalStart,r=C-E);s=this._getPhysicalSizeIncrement(p),r-=s,!(t.length>=A||r<=u);)if(o){if(z+t.length+1>=this._virtualCount)break;if(B+s>=D-this._scrollOffset)break;t.push(p),B+=s,p=(p+1)%A}else{if(0>=w-t.length)break;if(B+this._physicalSize-s<=E)break;t.push(p),B-=s,p=0===p?A-1:p-1}return{indexes:t,physicalTop:B-this._scrollOffset}},_update:function(o,p){if(!(o&&0===o.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(o),this._updateMetrics(o),p)for(;p.length;){var q=p.pop();this._physicalTop-=this._getPhysicalSizeIncrement(q)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(o){this._ensureTemplatized();var p,q,r=Array(o);for(p=0;p<o;p++)q=this.stamp(null),r[p]=q.root.querySelector('*'),this._itemsParent.appendChild(q.root);return r},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(o){var p=this._clamp(this._physicalCount+o,c,this._virtualCount-this._virtualStart);if(p=this._convertIndexToCompleteRow(p),this.grid){var q=p%this._itemsPerRow;q&&p-q<=this._physicalCount&&(p+=this._itemsPerRow),p-=q}var r=p-this._physicalCount,s=Math.round(0.5*this._physicalCount);if(!(0>r)){if(0<r){var t=window.performance.now();[].push.apply(this._physicalItems,this._createPool(r)),[].push.apply(this._physicalSizes,Array(r)),this._physicalCount+=r,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=r),this._update(),this._templateCost=(window.performance.now()-t)/r,s=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===s||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,s)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,s),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var o=this._getReusables(!0);this._physicalTop=o.physicalTop,this._virtualStart+=o.indexes.length,this._physicalStart+=o.indexes.length,this._update(o.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var o={};o.__key__=!0,o[this.as]=!0,o[this.indexAs]=!0,o[this.selectedAs]=!0,o.tabIndex=!0,this._instanceProps=o,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(o,p){'undefined'===typeof p||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),o&&this._updateGridMetrics())},_itemsChanged:function(o){if('items'===o.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===o.path){this._adjustVirtualIndex(o.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var p=o.value.indexSplices.some(function(q){return this._isIndexRendered(q.index)},this);(!this._isClientFull()||p)&&this._debounceRender(this._render,k)}else'items.length'!==o.path&&this._forwardItemPath(o.path,o.value)},_forwardItemPath:function(o,p){o=o.slice(6);var q=o.indexOf('.')+1;0===q&&(q=o.length);var r=j?parseInt(o.substring(0,q),10):parseInt(o.substring(1,q),10),s=this._offscreenFocusedItem,t=this._isIndexRendered(r),u;t?u=this.modelForElement(this._physicalItems[this._getPhysicalIndex(r)]):s&&(u=this.modelForElement(s));u&&u[this.indexAs]===r&&(o=o.substring(q),o=this.as+(o?'.'+o:''),j?u._setPendingPropertyOrPath(o,p,!1,!0):u.notifyPath(o,p,!0),u._flushProperties&&u._flushProperties(!0),t&&(this._updateMetrics([r]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(o){o.forEach(function(p){if(p.removed.forEach(this._removeItem,this),p.index<this._virtualStart){var q=Math.max(p.addedCount-p.removed.length,p.index-this._virtualStart);this._virtualStart+=q,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=q)}},this)},_removeItem:function(o){this.$.selector.deselect(o),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===o&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())},_iterateItems:function(o,p){var q,r,s,t;if(2===arguments.length&&p){for(t=0;t<p.length;t++)if(q=p[t],r=this._computeVidx(q),null!=(s=o.call(this,q,r)))return s;}else{for(q=this._physicalStart,r=this._virtualStart;q<this._physicalCount;q++,r++)if(null!=(s=o.call(this,q,r)))return s;for(q=0;q<this._physicalStart;q++,r++)if(null!=(s=o.call(this,q,r)))return s}},_computeVidx:function(o){return o>=this._physicalStart?this._virtualStart+(o-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+o},_assignModels:function(o){this._iterateItems(function(p,q){var r=this._physicalItems[p],s=this.items&&this.items[q];if(null!=s){var t=this.modelForElement(r);t.__key__=this._collection?this._collection.getKey(s):null,this._forwardProperty(t,this.as,s),this._forwardProperty(t,this.selectedAs,this.$.selector.isSelected(s)),this._forwardProperty(t,this.indexAs,q),this._forwardProperty(t,'tabIndex',this._focusedVirtualIndex===q?0:-1),this._physicalIndexForKey[t.__key__]=p,t._flushProperties&&t._flushProperties(!0),r.removeAttribute('hidden')}else r.setAttribute('hidden','')},o)},_updateMetrics:function(o){Polymer.flush?Polymer.flush():Polymer.dom.flush();var p=0,q=0,r=this._physicalAverageCount,s=this._physicalAverage;this._iterateItems(function(t){q+=this._physicalSizes[t]||0,this._physicalSizes[t]=this._physicalItems[t].offsetHeight,p+=this._physicalSizes[t],this._physicalAverageCount+=this._physicalSizes[t]?1:0},o),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(q=1===this._itemsPerRow?q:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+p-q,this._itemsPerRow=1),this._physicalAverageCount!==r&&(this._physicalAverage=Math.round((s*r+p)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var o=this._physicalTop;if(this.grid){var p=this._itemsPerRow*this._itemWidth,q=(this._viewportWidth-p)/2;this._iterateItems(function(r,s){var t=s%this._itemsPerRow,u=Math.floor(t*this._itemWidth+q);this._isRTL&&(u*=-1),this.translate3d(u+'px',o+'px',0,this._physicalItems[r]),this._shouldRenderNextRow(s)&&(o+=this._rowHeight)})}else this._iterateItems(function(r){this.translate3d(0,o+'px',0,this._physicalItems[r]),o+=this._physicalSizes[r]})},_getPhysicalSizeIncrement:function(o){return this.grid?this._computeVidx(o)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[o]},_shouldRenderNextRow:function(o){return o%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var o=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==o){this._physicalTop-=o;var p=this._scrollTop;!b&&0<p&&this._resetScrollPosition(p-o)}},_resetScrollPosition:function(o){this.scrollTarget&&0<=o&&(this._scrollTop=o,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(o){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,o=o||0===this._scrollHeight,o=o||this._scrollPosition>=this._estScrollHeight-this._physicalSize,o=o||this.grid&&this.$.items.style.height<this._estScrollHeight,(o||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(o){return this.scrollToIndex(this.items.indexOf(o))},scrollToIndex:function(o){if(!('number'!==typeof o||0>o||o>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){o=this._clamp(o,0,this._virtualCount-1),(!this._isIndexRendered(o)||o>=this._maxVirtualStart)&&(this._virtualStart=this.grid?o-2*this._itemsPerRow:o-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var p=this._physicalStart,q=this._virtualStart,r=0,s=this._hiddenContentSize;q<o&&r<=s;)r+=this._getPhysicalSizeIncrement(p),p=(p+1)%this._physicalCount,q++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+r),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(o){return this.selectIndex(this.items.indexOf(o))},selectIndex:function(o){if(!(0>o||o>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(o)){var p=this.modelForElement(this._physicalItems[this._getPhysicalIndex(o)]);p&&(p[this.selectedAs]=!0),this.updateSizeForIndex(o)}this.$.selector.selectIndex?this.$.selector.selectIndex(o):this.$.selector.select(this.items[o])}},deselectItem:function(o){return this.deselectIndex(this.items.indexOf(o))},deselectIndex:function(o){if(!(0>o||o>=this._virtualCount)){if(this._isIndexRendered(o)){var p=this.modelForElement(this._physicalItems[this._getPhysicalIndex(o)]);p[this.selectedAs]=!1,this.updateSizeForIndex(o)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(o):this.$.selector.deselect(this.items[o])}},toggleSelectionForItem:function(o){return this.toggleSelectionForIndex(this.items.indexOf(o))},toggleSelectionForIndex:function(o){var p=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(o):this.$.selector.isSelected(this.items[o]);p?this.deselectIndex(o):this.selectIndex(o)},clearSelection:function(){this._iterateItems(function(o){this.modelForElement(this._physicalItems[o])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(o){var p=o?this.listen:this.unlisten;p.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(o){var p=this.modelForElement(o.target);if(p){var q,r,s=Polymer.dom(o).path[0],t=this._itemsParent.node.domHost,u=Polymer.dom(t?t.root:document).activeElement,w=this._physicalItems[this._getPhysicalIndex(p[this.indexAs])];'input'!==s.localName&&'button'!==s.localName&&'select'!==s.localName&&(q=p.tabIndex,p.tabIndex=h,r=u?u.tabIndex:-1,p.tabIndex=q,u&&w!==u&&w.contains(u)&&r!==h||this.toggleSelectionForItem(p[this.as]))}},_multiSelectionChanged:function(o){this.clearSelection(),this.$.selector.multi=o},updateSizeForItem:function(o){return this.updateSizeForIndex(this.items.indexOf(o))},updateSizeForIndex:function(o){return this._isIndexRendered(o)?(this._updateMetrics([this._getPhysicalIndex(o)]),this._positionItems(),null):null},_manageFocus:function(){var o=this._focusedVirtualIndex;0<=o&&o<this._virtualCount?this._isIndexRendered(o)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(o){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(o/this._itemsPerRow)*this._itemsPerRow:o},_isIndexRendered:function(o){return o>=this._virtualStart&&o<=this._virtualEnd},_isIndexVisible:function(o){return o>=this.firstVisibleIndex&&o<=this.lastVisibleIndex},_getPhysicalIndex:function(o){return(this._physicalStart+(o-this._virtualStart))%this._physicalCount},focusItem:function(o){this._focusPhysicalItem(o)},_focusPhysicalItem:function(o){if(!(0>o||o>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(o)||this.scrollToIndex(o);var r,p=this._physicalItems[this._getPhysicalIndex(o)],q=this.modelForElement(p);q.tabIndex=h,p.tabIndex===h&&(r=p),r||(r=Polymer.dom(p).querySelector('[tabindex="'+h+'"]')),q.tabIndex=0,this._focusedVirtualIndex=o,r&&r.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var o=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var p=this.stamp(null);this._focusBackfillItem=p.root.querySelector('*'),this._itemsParent.appendChild(p.root)}this._offscreenFocusedItem=this._physicalItems[o],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[o]=this._focusBackfillItem,this._focusedPhysicalIndex=o,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var o=this._focusedPhysicalIndex,p=this._physicalItems[o];if(p){var q=this.modelForElement(p),r=this.modelForElement(this._offscreenFocusedItem);q[this.as]===r[this.as]?(this._focusBackfillItem=p,q.tabIndex=-1,this._physicalItems[o]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(o){var p=this.modelForElement(o.target),q=this.modelForElement(this._focusedItem),r=null!==this._offscreenFocusedItem,s=this._focusedVirtualIndex;p&&(q===p?!this._isIndexVisible(s)&&this.scrollToIndex(s):(this._restoreFocusedItem(),q&&(q.tabIndex=-1),p.tabIndex=0,s=p[this.indexAs],this._focusedVirtualIndex=s,this._focusedPhysicalIndex=this._getPhysicalIndex(s),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],r&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(o){switch(o.keyCode){case 40:o.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(o);}},_clamp:function(o,p,q){return Math.min(q,Math.max(p,o))},_debounceRender:function(o,p){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,p,o.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(o)},_forwardProperty:function(o,p,q){j?o._setPendingProperty(p,q):o[p]=q},_forwardHostPropV2:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&this.modelForElement(q).forwardHostProp(o,p)},this)},_notifyInstancePropV2:function(o,p,q){if(Polymer.Path.matches(this.as,p)){var r=o[this.indexAs];p==this.as&&(this.items[r]=q),this.notifyPath(Polymer.Path.translate(this.as,'items.'+r,p),q)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(o,p,q){0===p.indexOf(this.as+'.')&&this.notifyPath('items.'+o.__key__+'.'+p.slice(this.as.length+1),q)},_forwardParentPath:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&this.modelForElement(q).notifyPath(o,p,!0)},this)},_forwardParentProp:function(o,p){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(q){q&&(this.modelForElement(q)[o]=p)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[item.unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>var DeviceTable=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var e=this;d&&d.length?setTimeout(function(){if(!e._initialized)e.set('values',d.reverse()),e._initialized=!0;else for(var f=0;f<d.length;f++)e.unshift('values',d[f])},0):!this._initialized&&this.renderClearing()}},{key:'spliceValues',value:function(d){var e=this;setTimeout(function(){for(var f=[],g=0;g<d.length;g++){for(var h=e.values.length-1;0<=h&&e.values[h].x!==d[g].x;h--);-1!==h&&(e.values.splice(h,1),f.push({index:h,removed:[e.values[h]],addedCount:0,object:e.values,type:'splice'}))}e.notifySplices('values',f)},0)}},{key:'renderClearing',value:function(){this.$.list.set('items',[])}},{key:'_computeKeysForCaption',value:function(d,e){if(d&&e&&e.keys){var f='';for(var g in this.item.keys)f+=this.item.keys[g]+' ';this.$.caption.textContent=f}else this.caption&&(this.$.caption.textContent=this.caption)}},{key:'_toggleGridView',value:function(){this.$.list.grid=!!!this.$.list.grid}}],[{key:'is',get:function(){return'device-table'}},{key:'properties',get:function(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_computeKeysForCaption(keysForCaption, item)']}}]),b}(WebvisualMixins.DeviceMixin(Polymer.Element));customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>var DeviceTableGroup=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_shouldHideTabs',value:function(d){2>d?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===d&&this.set('selectedItemMount',this.items[0].mount)}},{key:'reset',value:function(){this.set('items',[]),this.set('selectedItemMount','')}}],[{key:'is',get:function(){return'device-table-group'}},{key:'properties',get:function(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}},{key:'observers',get:function(){return['_shouldHideTabs(items.length)']}}]),b}(Polymer.Element);customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">!function(el){"use strict";function tl(xx){return function(vx,bx){return Th(xx(vx),bx)}}function nl(xx,vx,bx){var wx=(vx-xx)/Math.max(0,bx),Tx=Math.floor(Math.log(wx)/Math.LN10),kx=wx/Math.pow(10,Tx);return 0<=Tx?(kx>=zh?10:kx>=Mh?5:kx>=Uh?2:1)*Math.pow(10,Tx):-Math.pow(10,-Tx)/(kx>=zh?10:kx>=Mh?5:kx>=Uh?2:1)}function ol(xx,vx,bx){var wx=Math.abs(vx-xx)/Math.max(0,bx),Tx=Math.pow(10,Math.floor(Math.log(wx)/Math.LN10)),kx=wx/Tx;return kx>=zh?Tx*=10:kx>=Mh?Tx*=5:kx>=Uh&&(Tx*=2),vx<xx?-Tx:Tx}function al(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function il(){return new al}function ll(xx){this._context=xx}function rl(xx){return xx[0]}function dl(xx){return xx[1]}function sl(xx,vx,bx){xx._context.bezierCurveTo((2*xx._x0+xx._x1)/3,(2*xx._y0+xx._y1)/3,(xx._x0+2*xx._x1)/3,(xx._y0+2*xx._y1)/3,(xx._x0+4*xx._x1+vx)/6,(xx._y0+4*xx._y1+bx)/6)}function cl(xx){this._context=xx}function ul(xx,vx,bx){xx._context.bezierCurveTo(xx._x1+xx._k*(xx._x2-xx._x0),xx._y1+xx._k*(xx._y2-xx._y0),xx._x2+xx._k*(xx._x1-vx),xx._y2+xx._k*(xx._y1-bx),xx._x2,xx._y2)}function pl(xx,vx){this._context=xx,this._k=(1-vx)/6}function _l(xx,vx,bx){var wx=xx._x1,Tx=xx._y1,kx=xx._x2,Sx=xx._y2;if(xx._l01_a>Hh){var Cx=2*xx._l01_2a+3*xx._l01_a*xx._l12_a+xx._l12_2a,zx=3*xx._l01_a*(xx._l01_a+xx._l12_a);wx=(wx*Cx-xx._x0*xx._l12_2a+xx._x2*xx._l01_2a)/zx,Tx=(Tx*Cx-xx._y0*xx._l12_2a+xx._y2*xx._l01_2a)/zx}if(xx._l23_a>Hh){var Mx=2*xx._l23_2a+3*xx._l23_a*xx._l12_a+xx._l12_2a,Ux=3*xx._l23_a*(xx._l23_a+xx._l12_a);kx=(kx*Mx+xx._x1*xx._l23_2a-vx*xx._l12_2a)/Ux,Sx=(Sx*Mx+xx._y1*xx._l23_2a-bx*xx._l12_2a)/Ux}xx._context.bezierCurveTo(wx,Tx,kx,Sx,xx._x2,xx._y2)}function hl(xx,vx){this._context=xx,this._alpha=vx}function ml(xx){return 0>xx?-1:1}function gl(xx,vx,bx){var wx=xx._x1-xx._x0,Tx=vx-xx._x1,kx=(xx._y1-xx._y0)/(wx||0>Tx&&-0),Sx=(bx-xx._y1)/(Tx||0>wx&&-0);return(ml(kx)+ml(Sx))*Math.min(Math.abs(kx),Math.abs(Sx),.5*Math.abs((kx*Tx+Sx*wx)/(wx+Tx)))||0}function yl(xx,vx){var bx=xx._x1-xx._x0;return bx?(3*(xx._y1-xx._y0)/bx-vx)/2:vx}function fl(xx,vx,bx){var wx=xx._x0,Tx=xx._y0,kx=xx._x1,Sx=xx._y1,Cx=(kx-wx)/3;xx._context.bezierCurveTo(wx+Cx,Tx+Cx*vx,kx-Cx,Sx-Cx*bx,kx,Sx)}function xl(xx){this._context=xx}function bl(xx){this._context=xx}function Tl(xx){this._context=xx}function kl(xx){var vx,bx,wx=xx.length-1,Tx=Array(wx),kx=Array(wx),Sx=Array(wx);for(Tx[0]=0,kx[0]=2,Sx[0]=xx[0]+2*xx[1],vx=1;vx<wx-1;++vx)Tx[vx]=1,kx[vx]=4,Sx[vx]=4*xx[vx]+2*xx[vx+1];for(Tx[wx-1]=2,kx[wx-1]=7,Sx[wx-1]=8*xx[wx-1]+xx[wx],vx=1;vx<wx;++vx)bx=Tx[vx]/kx[vx-1],kx[vx]-=bx,Sx[vx]-=bx*Sx[vx-1];for(Tx[wx-1]=Sx[wx-1]/kx[wx-1],vx=wx-2;0<=vx;--vx)Tx[vx]=(Sx[vx]-Tx[vx+1])/kx[vx];for(kx[wx-1]=(xx[wx]+Tx[wx-1])/2,vx=0;vx<wx-1;++vx)kx[vx]=2*xx[vx+1]-Tx[vx+1];return[Tx,kx]}function Sl(xx,vx){this._context=xx,this._t=vx}function Ml(xx,vx,bx,wx){function Tx(kx){return xx(kx=new Date(+kx)),kx}return Tx.floor=Tx,Tx.ceil=function(kx){return xx(kx=new Date(kx-1)),vx(kx,1),xx(kx),kx},Tx.round=function(kx){var Sx=Tx(kx),Cx=Tx.ceil(kx);return kx-Sx<Cx-kx?Sx:Cx},Tx.offset=function(kx,Sx){return vx(kx=new Date(+kx),null==Sx?1:Math.floor(Sx)),kx},Tx.range=function(kx,Sx,Cx){var zx=[];if(kx=Tx.ceil(kx),Cx=null==Cx?1:Math.floor(Cx),!(kx<Sx&&0<Cx))return zx;do zx.push(new Date(+kx));while((vx(kx,Cx),xx(kx),kx<Sx));return zx},Tx.filter=function(kx){return Ml(function(Sx){if(Sx>=Sx)for(;xx(Sx),!kx(Sx);)Sx.setTime(Sx-1)},function(Sx,Cx){if(Sx>=Sx)for(;0<=--Cx;)for(;vx(Sx,1),!kx(Sx););})},bx&&(Tx.count=function(kx,Sx){return Bh.setTime(+kx),Zh.setTime(+Sx),xx(Bh),xx(Zh),Math.floor(bx(Bh,Zh))},Tx.every=function(kx){return kx=Math.floor(kx),isFinite(kx)&&0<kx?1<kx?Tx.filter(wx?function(Sx){return 0==wx(Sx)%kx}:function(Sx){return 0==Tx.count(0,Sx)%kx}):Tx:null}),Tx}function Ul(xx){return Ml(function(vx){vx.setDate(vx.getDate()-(vx.getDay()+7-xx)%7),vx.setHours(0,0,0,0)},function(vx,bx){vx.setDate(vx.getDate()+7*bx)},function(vx,bx){return(bx-vx-(bx.getTimezoneOffset()-vx.getTimezoneOffset())*Rh)/Jh})}function Al(xx){return Ml(function(vx){vx.setUTCDate(vx.getUTCDate()-(vx.getUTCDay()+7-xx)%7),vx.setUTCHours(0,0,0,0)},function(vx,bx){vx.setUTCDate(vx.getUTCDate()+7*bx)},function(vx,bx){return(bx-vx)/Jh})}function Yl(xx){return new El(xx)}function El(xx){if(!(vx=gm.exec(xx)))throw new Error("invalid format: "+xx);var vx,bx=vx[1]||" ",wx=vx[2]||">",Tx=vx[3]||"-",kx=vx[4]||"",Sx=!!vx[5],Cx=vx[6]&&+vx[6],zx=!!vx[7],Mx=vx[8]&&+vx[8].slice(1),Ux=vx[9]||"";"n"===Ux?(zx=!0,Ux="g"):mm[Ux]||(Ux=""),(Sx||"0"===bx&&"="===wx)&&(Sx=!0,bx="0",wx="="),this.fill=bx,this.align=wx,this.sign=Tx,this.symbol=kx,this.zero=Sx,this.width=Cx,this.comma=zx,this.precision=Mx,this.type=Ux}function Pl(xx){return ym=bm(xx),el.format=ym.format,fm=ym.formatPrefix,ym}function Dl(xx){if(0<=xx.y&&100>xx.y){var vx=new Date(-1,xx.m,xx.d,xx.H,xx.M,xx.S,xx.L);return vx.setFullYear(xx.y),vx}return new Date(xx.y,xx.m,xx.d,xx.H,xx.M,xx.S,xx.L)}function Fl(xx){if(0<=xx.y&&100>xx.y){var vx=new Date(Date.UTC(-1,xx.m,xx.d,xx.H,xx.M,xx.S,xx.L));return vx.setUTCFullYear(xx.y),vx}return new Date(Date.UTC(xx.y,xx.m,xx.d,xx.H,xx.M,xx.S,xx.L))}function Ll(xx){return{y:xx,m:0,d:1,H:0,M:0,S:0,L:0}}function Hl(xx){function vx(dv,sv){return function(cv){var uv,pv,_v,hv=[],mv=-1,gv=0,yv=dv.length;for(cv instanceof Date||(cv=new Date(+cv));++mv<yv;)37===dv.charCodeAt(mv)&&(hv.push(dv.slice(gv,mv)),null==(pv=Mm[uv=dv.charAt(++mv)])?pv="e"===uv?" ":"0":uv=dv.charAt(++mv),(_v=sv[uv])&&(uv=_v(cv,pv)),hv.push(uv),gv=mv+1);return hv.push(dv.slice(gv,mv)),hv.join("")}}function bx(dv,sv){return function(cv){var uv=Ll(1900);if(wx(uv,dv,cv+="",0)!=cv.length)return null;if("p"in uv&&(uv.H=uv.H%12+12*uv.p),"W"in uv||"U"in uv){"w"in uv||(uv.w="W"in uv?1:0);var pv="Z"in uv?Fl(Ll(uv.y)).getUTCDay():sv(Ll(uv.y)).getDay();uv.m=0,uv.d="W"in uv?(uv.w+6)%7+7*uv.W-(pv+5)%7:uv.w+7*uv.U-(pv+6)%7}return"Z"in uv?(uv.H+=0|uv.Z/100,uv.M+=uv.Z%100,Fl(uv)):sv(uv)}}function wx(dv,sv,cv,uv){for(var pv,_v,hv=0,mv=sv.length,gv=cv.length;hv<mv;){if(uv>=gv)return-1;if(37===(pv=sv.charCodeAt(hv++))){if(pv=sv.charAt(hv++),!(_v=rv[pv in Mm?sv.charAt(hv++):pv])||0>(uv=_v(dv,cv,uv)))return-1;}else if(pv!=cv.charCodeAt(uv++))return-1}return uv}var Nx=xx.dateTime,Ox=xx.date,$x=xx.time,jx=xx.periods,Vx=xx.days,Bx=xx.shortDays,Zx=xx.months,Wx=xx.shortMonths,Rx=Il(jx),Jx=Nl(jx),Gx=Il(Vx),Kx=Nl(Vx),Qx=Il(Bx),ev=Nl(Bx),tv=Il(Zx),nv=Nl(Zx),ov=Il(Wx),av=Nl(Wx),iv={a:function(dv){return Bx[dv.getDay()]},A:function(dv){return Vx[dv.getDay()]},b:function(dv){return Wx[dv.getMonth()]},B:function(dv){return Zx[dv.getMonth()]},c:null,d:nd,e:nd,H:od,I:ad,j:id,L:ld,m:rd,M:dd,p:function(dv){return jx[+(12<=dv.getHours())]},S:sd,U:cd,w:ud,W:pd,x:null,X:null,y:_d,Y:hd,Z:md,"%":Ad},lv={a:function(dv){return Bx[dv.getUTCDay()]},A:function(dv){return Vx[dv.getUTCDay()]},b:function(dv){return Wx[dv.getUTCMonth()]},B:function(dv){return Zx[dv.getUTCMonth()]},c:null,d:gd,e:gd,H:yd,I:fd,j:xd,L:vd,m:bd,M:wd,p:function(dv){return jx[+(12<=dv.getUTCHours())]},S:Td,U:kd,w:Sd,W:Cd,x:null,X:null,y:zd,Y:Md,Z:Ud,"%":Ad},rv={a:function(dv,sv,cv){var uv=Qx.exec(sv.slice(cv));return uv?(dv.w=ev[uv[0].toLowerCase()],cv+uv[0].length):-1},A:function(dv,sv,cv){var uv=Gx.exec(sv.slice(cv));return uv?(dv.w=Kx[uv[0].toLowerCase()],cv+uv[0].length):-1},b:function(dv,sv,cv){var uv=ov.exec(sv.slice(cv));return uv?(dv.m=av[uv[0].toLowerCase()],cv+uv[0].length):-1},B:function(dv,sv,cv){var uv=tv.exec(sv.slice(cv));return uv?(dv.m=nv[uv[0].toLowerCase()],cv+uv[0].length):-1},c:function(dv,sv,cv){return wx(dv,Nx,sv,cv)},d:Rl,e:Rl,H:Gl,I:Gl,j:Jl,L:ed,m:Wl,M:Kl,p:function(dv,sv,cv){var uv=Rx.exec(sv.slice(cv));return uv?(dv.p=Jx[uv[0].toLowerCase()],cv+uv[0].length):-1},S:Ql,U:$l,w:Ol,W:jl,x:function(dv,sv,cv){return wx(dv,Ox,sv,cv)},X:function(dv,sv,cv){return wx(dv,$x,sv,cv)},y:Bl,Y:Vl,Z:Zl,"%":td};return iv.x=vx(Ox,iv),iv.X=vx($x,iv),iv.c=vx(Nx,iv),lv.x=vx(Ox,lv),lv.X=vx($x,lv),lv.c=vx(Nx,lv),{format:function(sv){var cv=vx(sv+="",iv);return cv.toString=function(){return sv},cv},parse:function(sv){var cv=bx(sv+="",Dl);return cv.toString=function(){return sv},cv},utcFormat:function(sv){var cv=vx(sv+="",lv);return cv.toString=function(){return sv},cv},utcParse:function(sv){var cv=bx(sv,Fl);return cv.toString=function(){return sv},cv}}}function Xl(xx,vx,bx){var wx=0>xx?"-":"",Tx=(wx?-xx:xx)+"",kx=Tx.length;return wx+(kx<bx?Array(bx-kx+1).join(vx)+Tx:Tx)}function ql(xx){return xx.replace(Ym,"\\$&")}function Il(xx){return new RegExp("^(?:"+xx.map(ql).join("|")+")","i")}function Nl(xx){for(var vx={},bx=-1,wx=xx.length;++bx<wx;)vx[xx[bx].toLowerCase()]=bx;return vx}function Ol(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+1));return wx?(xx.w=+wx[0],bx+wx[0].length):-1}function $l(xx,vx,bx){var wx=Um.exec(vx.slice(bx));return wx?(xx.U=+wx[0],bx+wx[0].length):-1}function jl(xx,vx,bx){var wx=Um.exec(vx.slice(bx));return wx?(xx.W=+wx[0],bx+wx[0].length):-1}function Vl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+4));return wx?(xx.y=+wx[0],bx+wx[0].length):-1}function Bl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.y=+wx[0]+(68<+wx[0]?1900:2e3),bx+wx[0].length):-1}function Zl(xx,vx,bx){var wx=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(vx.slice(bx,bx+6));return wx?(xx.Z=wx[1]?0:-(wx[2]+(wx[3]||"00")),bx+wx[0].length):-1}function Wl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.m=wx[0]-1,bx+wx[0].length):-1}function Rl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.d=+wx[0],bx+wx[0].length):-1}function Jl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+3));return wx?(xx.m=0,xx.d=+wx[0],bx+wx[0].length):-1}function Gl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.H=+wx[0],bx+wx[0].length):-1}function Kl(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.M=+wx[0],bx+wx[0].length):-1}function Ql(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+2));return wx?(xx.S=+wx[0],bx+wx[0].length):-1}function ed(xx,vx,bx){var wx=Um.exec(vx.slice(bx,bx+3));return wx?(xx.L=+wx[0],bx+wx[0].length):-1}function td(xx,vx,bx){var wx=Am.exec(vx.slice(bx,bx+1));return wx?bx+wx[0].length:-1}function nd(xx,vx){return Xl(xx.getDate(),vx,2)}function od(xx,vx){return Xl(xx.getHours(),vx,2)}function ad(xx,vx){return Xl(xx.getHours()%12||12,vx,2)}function id(xx,vx){return Xl(1+em.count(am(xx),xx),vx,3)}function ld(xx,vx){return Xl(xx.getMilliseconds(),vx,3)}function rd(xx,vx){return Xl(xx.getMonth()+1,vx,2)}function dd(xx,vx){return Xl(xx.getMinutes(),vx,2)}function sd(xx,vx){return Xl(xx.getSeconds(),vx,2)}function cd(xx,vx){return Xl(tm.count(am(xx),xx),vx,2)}function ud(xx){return xx.getDay()}function pd(xx,vx){return Xl(nm.count(am(xx),xx),vx,2)}function _d(xx,vx){return Xl(xx.getFullYear()%100,vx,2)}function hd(xx,vx){return Xl(xx.getFullYear()%1e4,vx,4)}function md(xx){var vx=xx.getTimezoneOffset();return(0<vx?"-":(vx*=-1,"+"))+Xl(0|vx/60,"0",2)+Xl(vx%60,"0",2)}function gd(xx,vx){return Xl(xx.getUTCDate(),vx,2)}function yd(xx,vx){return Xl(xx.getUTCHours(),vx,2)}function fd(xx,vx){return Xl(xx.getUTCHours()%12||12,vx,2)}function xd(xx,vx){return Xl(1+im.count(dm(xx),xx),vx,3)}function vd(xx,vx){return Xl(xx.getUTCMilliseconds(),vx,3)}function bd(xx,vx){return Xl(xx.getUTCMonth()+1,vx,2)}function wd(xx,vx){return Xl(xx.getUTCMinutes(),vx,2)}function Td(xx,vx){return Xl(xx.getUTCSeconds(),vx,2)}function kd(xx,vx){return Xl(lm.count(dm(xx),xx),vx,2)}function Sd(xx){return xx.getUTCDay()}function Cd(xx,vx){return Xl(rm.count(dm(xx),xx),vx,2)}function zd(xx,vx){return Xl(xx.getUTCFullYear()%100,vx,2)}function Md(xx,vx){return Xl(xx.getUTCFullYear()%1e4,vx,4)}function Ud(){return"+0000"}function Ad(){return"%"}function Yd(xx){return wm=Hl(xx),el.timeFormat=wm.format,el.timeParse=wm.parse,Tm=wm.utcFormat,km=wm.utcParse,wm}function Dd(){}function Fd(xx,vx){var bx=new Dd;if(xx instanceof Dd)xx.each(function(Cx,zx){bx.set(zx,Cx)});else if(Array.isArray(xx)){var wx,Tx=-1,kx=xx.length;if(null==vx)for(;++Tx<kx;)bx.set(Tx,xx[Tx]);else for(;++Tx<kx;)bx.set(vx(wx=xx[Tx],Tx,xx),wx)}else if(xx)for(var Sx in xx)bx.set(Sx,xx[Sx]);return bx}function Ld(){}function Xd(xx,vx){var bx=Object.create(xx.prototype);for(var wx in vx)bx[wx]=vx[wx];return bx}function qd(){}function Id(xx){var vx;return xx=(xx+"").trim().toLowerCase(),(vx=Im.exec(xx))?(vx=parseInt(vx[1],16),new Vd(15&vx>>8|240&vx>>4,15&vx>>4|240&vx,(15&vx)<<4|15&vx,1)):(vx=Nm.exec(xx))?Nd(parseInt(vx[1],16)):(vx=Om.exec(xx))?new Vd(vx[1],vx[2],vx[3],1):(vx=$m.exec(xx))?new Vd(255*vx[1]/100,255*vx[2]/100,255*vx[3]/100,1):(vx=jm.exec(xx))?Od(vx[1],vx[2],vx[3],vx[4]):(vx=Vm.exec(xx))?Od(255*vx[1]/100,255*vx[2]/100,255*vx[3]/100,vx[4]):(vx=Bm.exec(xx))?Bd(vx[1],vx[2]/100,vx[3]/100,1):(vx=Zm.exec(xx))?Bd(vx[1],vx[2]/100,vx[3]/100,vx[4]):Wm.hasOwnProperty(xx)?Nd(Wm[xx]):"transparent"===xx?new Vd(NaN,NaN,NaN,0):null}function Nd(xx){return new Vd(255&xx>>16,255&xx>>8,255&xx,1)}function Od(xx,vx,bx,wx){return 0>=wx&&(xx=vx=bx=NaN),new Vd(xx,vx,bx,wx)}function $d(xx){return xx instanceof qd||(xx=Id(xx)),xx?(xx=xx.rgb(),new Vd(xx.r,xx.g,xx.b,xx.opacity)):new Vd}function jd(xx,vx,bx,wx){return 1===arguments.length?$d(xx):new Vd(xx,vx,bx,null==wx?1:wx)}function Vd(xx,vx,bx,wx){this.r=+xx,this.g=+vx,this.b=+bx,this.opacity=+wx}function Bd(xx,vx,bx,wx){return 0>=wx?xx=vx=bx=NaN:0>=bx||1<=bx?xx=vx=NaN:0>=vx&&(xx=NaN),new Rd(xx,vx,bx,wx)}function Zd(xx){if(xx instanceof Rd)return new Rd(xx.h,xx.s,xx.l,xx.opacity);if(xx instanceof qd||(xx=Id(xx)),!xx)return new Rd;if(xx instanceof Rd)return xx;var vx=(xx=xx.rgb()).r/255,bx=xx.g/255,wx=xx.b/255,Tx=Math.min(vx,bx,wx),kx=Math.max(vx,bx,wx),Sx=NaN,Cx=kx-Tx,zx=(kx+Tx)/2;return Cx?(Sx=vx===kx?(bx-wx)/Cx+6*(bx<wx):bx===kx?(wx-vx)/Cx+2:(vx-bx)/Cx+4,Cx/=.5>zx?kx+Tx:2-kx-Tx,Sx*=60):Cx=0<zx&&1>zx?0:Sx,new Rd(Sx,Cx,zx,xx.opacity)}function Rd(xx,vx,bx,wx){this.h=+xx,this.s=+vx,this.l=+bx,this.opacity=+wx}function Jd(xx,vx,bx){return 255*(60>xx?vx+(bx-vx)*xx/60:180>xx?bx:240>xx?vx+(bx-vx)*(240-xx)/60:vx)}function Gd(xx){if(xx instanceof Qd)return new Qd(xx.l,xx.a,xx.b,xx.opacity);if(xx instanceof gc){var vx=xx.h*Rm;return new Qd(xx.l,Math.cos(vx)*xx.c,Math.sin(vx)*xx.c,xx.opacity)}xx instanceof Vd||(xx=$d(xx));var bx=_c(xx.r),wx=_c(xx.g),Tx=_c(xx.b),kx=lc((.4124564*bx+.3575761*wx+.1804375*Tx)/Gm),Sx=lc((.2126729*bx+.7151522*wx+.072175*Tx)/Km);return new Qd(116*Sx-16,500*(kx-Sx),200*(Sx-lc((.0193339*bx+.119192*wx+.9503041*Tx)/Qm)),xx.opacity)}function Qd(xx,vx,bx,wx){this.l=+xx,this.a=+vx,this.b=+bx,this.opacity=+wx}function lc(xx){return xx>og?Math.pow(xx,1/3):xx/ng+eg}function dc(xx){return xx>tg?xx*xx*xx:ng*(xx-eg)}function pc(xx){return 255*(.0031308>=xx?12.92*xx:1.055*Math.pow(xx,1/2.4)-.055)}function _c(xx){return .04045>=(xx/=255)?xx/12.92:Math.pow((xx+.055)/1.055,2.4)}function hc(xx){if(xx instanceof gc)return new gc(xx.h,xx.c,xx.l,xx.opacity);xx instanceof Qd||(xx=Gd(xx));var vx=Math.atan2(xx.b,xx.a)*Jm;return new gc(0>vx?vx+360:vx,Math.sqrt(xx.a*xx.a+xx.b*xx.b),xx.l,xx.opacity)}function gc(xx,vx,bx,wx){this.h=+xx,this.c=+vx,this.l=+bx,this.opacity=+wx}function yc(xx){if(xx instanceof xc)return new xc(xx.h,xx.s,xx.l,xx.opacity);xx instanceof Vd||(xx=$d(xx));var vx=xx.r/255,bx=xx.g/255,wx=xx.b/255,Tx=(ug*wx+sg*vx-cg*bx)/(ug+sg-cg),kx=wx-Tx,Sx=(dg*(bx-Tx)-lg*kx)/rg,Cx=Math.sqrt(Sx*Sx+kx*kx)/(dg*Tx*(1-Tx)),zx=Cx?Math.atan2(Sx,kx)*Jm-120:NaN;return new xc(0>zx?zx+360:zx,Cx,Tx,xx.opacity)}function fc(xx,vx,bx,wx){return 1===arguments.length?yc(xx):new xc(xx,vx,bx,null==wx?1:wx)}function xc(xx,vx,bx,wx){this.h=+xx,this.s=+vx,this.l=+bx,this.opacity=+wx}function vc(xx,vx){return function(bx){return xx+bx*vx}}function bc(xx,vx,bx){return xx=Math.pow(xx,bx),vx=Math.pow(vx,bx)-xx,bx=1/bx,function(wx){return Math.pow(xx+wx*vx,bx)}}function Tc(xx){return 1==(xx=+xx)?kc:function(vx,bx){return bx-vx?bc(vx,bx,xx):gg(isNaN(vx)?bx:vx)}}function kc(xx,vx){var bx=vx-xx;return bx?vc(xx,bx):gg(isNaN(xx)?vx:xx)}function Sc(xx){return function(){return xx}}function Cc(xx){return function(vx){return xx(vx)+""}}function Uc(xx,vx,bx,wx){function Tx(Mx){return Mx.length?Mx.pop()+" ":""}function kx(Mx,Ux,Ax,Yx,Ex,Px){if(Mx!==Ax||Ux!==Yx){var Dx=Ex.push("translate(",null,vx,null,bx);Px.push({i:Dx-4,x:vg(Mx,Ax)},{i:Dx-2,x:vg(Ux,Yx)})}else(Ax||Yx)&&Ex.push("translate("+Ax+vx+Yx+bx)}function Sx(Mx,Ux,Ax,Yx){Mx===Ux?Ux&&Ax.push(Tx(Ax)+"rotate("+Ux+wx):(180<Mx-Ux?Ux+=360:180<Ux-Mx&&(Mx+=360),Yx.push({i:Ax.push(Tx(Ax)+"rotate(",null,wx)-2,x:vg(Mx,Ux)}))}function Cx(Mx,Ux,Ax,Yx){Mx===Ux?Ux&&Ax.push(Tx(Ax)+"skewX("+Ux+wx):Yx.push({i:Ax.push(Tx(Ax)+"skewX(",null,wx)-2,x:vg(Mx,Ux)})}function zx(Mx,Ux,Ax,Yx,Ex,Px){if(Mx!==Ax||Ux!==Yx){var Dx=Ex.push(Tx(Ex)+"scale(",null,",",null,")");Px.push({i:Dx-4,x:vg(Mx,Ax)},{i:Dx-2,x:vg(Ux,Yx)})}else 1===Ax&&1===Yx||Ex.push(Tx(Ex)+"scale("+Ax+","+Yx+")")}return function(Mx,Ux){var Ax=[],Yx=[];return Mx=xx(Mx),Ux=xx(Ux),kx(Mx.translateX,Mx.translateY,Ux.translateX,Ux.translateY,Ax,Yx),Sx(Mx.rotate,Ux.rotate,Ax,Yx),Cx(Mx.skewX,Ux.skewX,Ax,Yx),zx(Mx.scaleX,Mx.scaleY,Ux.scaleX,Ux.scaleY,Ax,Yx),Mx=Ux=null,function(Ex){for(var Px,Dx=-1,Fx=Yx.length;++Dx<Fx;)Ax[(Px=Yx[Dx]).i]=Px.x(Ex);return Ax.join("")}}}function Ac(xx){return((xx=Math.exp(xx))+1/xx)/2}function Yc(xx){return((xx=Math.exp(xx))-1/xx)/2}function Ec(xx){return((xx=Math.exp(2*xx))-1)/(xx+1)}function Pc(xx){return function vx(bx){function wx(Tx,kx){var Sx=xx((Tx=fc(Tx)).h,(kx=fc(kx)).h),Cx=kc(Tx.s,kx.s),zx=kc(Tx.l,kx.l),Mx=kc(Tx.opacity,kx.opacity);return function(Ux){return Tx.h=Sx(Ux),Tx.s=Cx(Ux),Tx.l=zx(Math.pow(Ux,bx)),Tx.opacity=Mx(Ux),Tx+""}}return bx=+bx,wx.gamma=vx,wx}(1)}function Dc(xx,vx){return(vx-=xx=+xx)?function(bx){return(bx-xx)/vx}:Fg(vx)}function Fc(xx){return function(vx,bx){var wx=xx(vx=+vx,bx=+bx);return function(Tx){return Tx<=vx?0:Tx>=bx?1:wx(Tx)}}}function Lc(xx){return function(vx,bx){var wx=xx(vx=+vx,bx=+bx);return function(Tx){return 0>=Tx?vx:1<=Tx?bx:wx(Tx)}}}function Hc(xx,vx,bx,wx){var Tx=xx[0],kx=xx[1],Sx=vx[0],Cx=vx[1];return kx<Tx?(Tx=bx(kx,Tx),Sx=wx(Cx,Sx)):(Tx=bx(Tx,kx),Sx=wx(Sx,Cx)),function(zx){return Sx(Tx(zx))}}function Xc(xx,vx,bx,wx){var Tx=Math.min(xx.length,vx.length)-1,kx=Array(Tx),Sx=Array(Tx),Cx=-1;for(xx[Tx]<xx[0]&&(xx=xx.slice().reverse(),vx=vx.slice().reverse());++Cx<Tx;)kx[Cx]=bx(xx[Cx],xx[Cx+1]),Sx[Cx]=wx(vx[Cx],vx[Cx+1]);return function(zx){var Mx=Sh(xx,zx,1,Tx)-1;return Sx[Mx](kx[Mx](zx))}}function qc(xx,vx){return vx.domain(xx.domain()).range(xx.range()).interpolate(xx.interpolate()).clamp(xx.clamp())}function Ic(xx,vx){function bx(){return Tx=2<Math.min(Cx.length,zx.length)?Xc:Hc,kx=Sx=null,wx}function wx(Ax){return(kx||(kx=Tx(Cx,zx,Ux?Fc(xx):xx,Mx)))(+Ax)}var Tx,kx,Sx,Cx=Hg,zx=Hg,Mx=Sg,Ux=!1;return wx.invert=function(Ax){return(Sx||(Sx=Tx(zx,Cx,Dc,Ux?Lc(vx):vx)))(+Ax)},wx.domain=function(Ax){return arguments.length?(Cx=Dm.call(Ax,Lg),bx()):Cx.slice()},wx.range=function(Ax){return arguments.length?(zx=Fm.call(Ax),bx()):zx.slice()},wx.rangeRound=function(Ax){return zx=Fm.call(Ax),Mx=Cg,bx()},wx.clamp=function(Ax){return arguments.length?(Ux=!!Ax,bx()):Ux},wx.interpolate=function(Ax){return arguments.length?(Mx=Ax,bx()):Mx},bx()}function Nc(xx){var vx=xx.domain;return xx.ticks=function(bx){var wx=vx();return Ah(wx[0],wx[wx.length-1],null==bx?10:bx)},xx.tickFormat=function(bx,wx){return Xg(vx(),bx,wx)},xx.nice=function(bx){null==bx&&(bx=10);var wx,Tx=vx(),kx=0,Sx=Tx.length-1,Cx=Tx[kx],zx=Tx[Sx];return zx<Cx&&(wx=Cx,Cx=zx,zx=wx,wx=kx,kx=Sx,Sx=wx),wx=nl(Cx,zx,bx),0<wx?wx=nl(Cx=Math.floor(Cx/wx)*wx,zx=Math.ceil(zx/wx)*wx,bx):0>wx&&(wx=nl(Cx=Math.ceil(Cx*wx)/wx,zx=Math.floor(zx*wx)/wx,bx)),0<wx?(Tx[kx]=Math.floor(Cx/wx)*wx,Tx[Sx]=Math.ceil(zx/wx)*wx,vx(Tx)):0>wx&&(Tx[kx]=Math.ceil(Cx*wx)/wx,Tx[Sx]=Math.floor(zx*wx)/wx,vx(Tx)),xx},xx}function Oc(){var xx=Ic(Dc,vg);return xx.copy=function(){return qc(xx,Oc())},Nc(xx)}function $c(xx,vx){return(vx=Math.log(vx/xx))?function(bx){return Math.log(bx/xx)/vx}:Fg(vx)}function jc(xx,vx){return 0>xx?function(bx){return-Math.pow(-vx,bx)*Math.pow(-xx,1-bx)}:function(bx){return Math.pow(vx,bx)*Math.pow(xx,1-bx)}}function Vc(xx){return isFinite(xx)?+("1e"+xx):0>xx?0:xx}function Bc(xx){return 10===xx?Vc:xx===Math.E?Math.exp:function(vx){return Math.pow(xx,vx)}}function Zc(xx){return xx===Math.E?Math.log:10===xx&&Math.log10||2===xx&&Math.log2||(xx=Math.log(xx),function(vx){return Math.log(vx)/xx})}function Wc(xx){return function(vx){return-xx(-vx)}}function Rc(){function xx(){return Tx=Zc(wx),kx=Bc(wx),0>bx()[0]&&(Tx=Wc(Tx),kx=Wc(kx)),vx}var vx=Ic($c,jc).domain([1,10]),bx=vx.domain,wx=10,Tx=Zc(10),kx=Bc(10);return vx.base=function(Sx){return arguments.length?(wx=+Sx,xx()):wx},vx.domain=function(Sx){return arguments.length?(bx(Sx),xx()):bx()},vx.ticks=function(Sx){var Cx,zx=bx(),Mx=zx[0],Ux=zx[zx.length-1];(Cx=Ux<Mx)&&(Px=Mx,Mx=Ux,Ux=Px);var Ax,Yx,Ex,Px=Tx(Mx),Dx=Tx(Ux),Fx=null==Sx?10:+Sx,Lx=[];if(!(!(wx%1)&&Dx-Px<Fx))Lx=Ah(Px,Dx,Math.min(Dx-Px,Fx)).map(kx);else if(Px=Math.round(Px)-1,Dx=Math.round(Dx)+1,0<Mx){for(;Px<Dx;++Px)for(Yx=1,Ax=kx(Px);Yx<wx;++Yx)if(!((Ex=Ax*Yx)<Mx)){if(Ex>Ux)break;Lx.push(Ex)}}else for(;Px<Dx;++Px)for(Yx=wx-1,Ax=kx(Px);1<=Yx;--Yx)if(!((Ex=Ax*Yx)<Mx)){if(Ex>Ux)break;Lx.push(Ex)}return Cx?Lx.reverse():Lx},vx.tickFormat=function(Sx,Cx){if(null==Cx&&(Cx=10===wx?".0e":","),"function"!=typeof Cx&&(Cx=el.format(Cx)),Sx===1/0)return Cx;null==Sx&&(Sx=10);var zx=Math.max(1,wx*Sx/vx.ticks().length);return function(Mx){var Ux=Mx/kx(Math.round(Tx(Mx)));return Ux*wx<wx-.5&&(Ux*=wx),Ux<=zx?Cx(Mx):""}},vx.nice=function(){return bx(qg(bx(),{floor:function(Cx){return kx(Math.floor(Tx(Cx)))},ceil:function(Cx){return kx(Math.ceil(Tx(Cx)))}}))},vx.copy=function(){return qc(vx,Rc().base(wx))},vx}function Jc(xx,vx){return 0>xx?-Math.pow(-xx,vx):Math.pow(xx,vx)}function Gc(){var bx=1,wx=Ic(function(kx,Sx){return(Sx=Jc(Sx,bx)-(kx=Jc(kx,bx)))?function(Cx){return(Jc(Cx,bx)-kx)/Sx}:Fg(Sx)},function(kx,Sx){return Sx=Jc(Sx,bx)-(kx=Jc(kx,bx)),function(Cx){return Jc(kx+Sx*Cx,1/bx)}}),Tx=wx.domain;return wx.exponent=function(kx){return arguments.length?(bx=+kx,Tx(Tx())):bx},wx.copy=function(){return qc(wx,Gc().exponent(bx))},Nc(wx)}function Kc(xx){return new Date(xx)}function Qc(xx){return xx instanceof Date?+xx:+new Date(+xx)}function ep(xx,vx,bx,wx,Tx,kx,Sx,Cx,zx){function Mx(Ox){return(Sx(Ox)<Ox?Px:kx(Ox)<Ox?Dx:Tx(Ox)<Ox?Fx:wx(Ox)<Ox?Lx:vx(Ox)<Ox?bx(Ox)<Ox?Hx:Xx:xx(Ox)<Ox?qx:Ix)(Ox)}function Ux(Ox,$x,jx,Vx){if(null==Ox&&(Ox=10),"number"==typeof Ox){var Bx=Math.abs(jx-$x)/Ox,Zx=kh(function(Wx){return Wx[2]}).right(Nx,Bx);Zx===Nx.length?(Vx=ol($x/Bg,jx/Bg,Ox),Ox=xx):Zx?(Vx=(Zx=Nx[Bx/Nx[Zx-1][2]<Nx[Zx][2]/Bx?Zx-1:Zx])[1],Ox=Zx[0]):(Vx=ol($x,jx,Ox),Ox=Cx)}return null==Vx?Ox:Ox.every(Vx)}var Ax=Ic(Dc,vg),Yx=Ax.invert,Ex=Ax.domain,Px=zx(".%L"),Dx=zx(":%S"),Fx=zx("%I:%M"),Lx=zx("%I %p"),Hx=zx("%a %d"),Xx=zx("%b %d"),qx=zx("%B"),Ix=zx("%Y"),Nx=[[Sx,1,Ig],[Sx,5,5*Ig],[Sx,15,15*Ig],[Sx,30,30*Ig],[kx,1,Ng],[kx,5,5*Ng],[kx,15,15*Ng],[kx,30,30*Ng],[Tx,1,Og],[Tx,3,3*Og],[Tx,6,6*Og],[Tx,12,12*Og],[wx,1,$g],[wx,2,2*$g],[bx,1,jg],[vx,1,Vg],[vx,3,3*Vg],[xx,1,Bg]];return Ax.invert=function(Ox){return new Date(Yx(Ox))},Ax.domain=function(Ox){return arguments.length?Ex(Dm.call(Ox,Qc)):Ex().map(Kc)},Ax.ticks=function(Ox,$x){var jx,Vx=Ex(),Bx=Vx[0],Zx=Vx[Vx.length-1],Wx=Zx<Bx;return Wx&&(jx=Bx,Bx=Zx,Zx=jx),jx=Ux(Ox,Bx,Zx,$x),jx=jx?jx.range(Bx,Zx+1):[],Wx?jx.reverse():jx},Ax.tickFormat=function(Ox,$x){return null==$x?Mx:zx($x)},Ax.nice=function(Ox,$x){var jx=Ex();return(Ox=Ux(Ox,jx[0],jx[jx.length-1],$x))?Ex(qg(jx,Ox)):Ax},Ax.copy=function(){return qc(Ax,ep(xx,vx,bx,wx,Tx,kx,Sx,Cx,zx))},Ax}function tp(xx){return"translate("+(xx+.5)+",0)"}function np(xx){return"translate(0,"+(xx+.5)+")"}function op(xx){var vx=Math.max(0,xx.bandwidth()-1)/2;return xx.round()&&(vx=Math.round(vx)),function(bx){return xx(bx)+vx}}function ap(){return!this.__axis}function ip(xx,vx){function bx(Yx){var Ex=null==Tx?vx.ticks?vx.ticks.apply(vx,wx):vx.domain():Tx,Px=null==kx?vx.tickFormat?vx.tickFormat.apply(vx,wx):Jg:kx,Dx=Math.max(Sx,0)+zx,Fx=vx.range(),Lx=Fx[0]+.5,Hx=Fx[Fx.length-1]+.5,Xx=(vx.bandwidth?op:Jg)(vx.copy()),qx=Yx.selection?Yx.selection():Yx,Ix=qx.selectAll(".domain").data([null]),Nx=qx.selectAll(".tick").data(Ex,vx).order(),Ox=Nx.exit(),$x=Nx.enter().append("g").attr("class","tick"),jx=Nx.select("line"),Vx=Nx.select("text");Ix=Ix.merge(Ix.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Nx=Nx.merge($x),jx=jx.merge($x.append("line").attr("stroke","#000").attr(Ux+"2",Mx*Sx)),Vx=Vx.merge($x.append("text").attr("fill","#000").attr(Ux,Mx*Dx).attr("dy",xx===Gg?"0em":xx===Qg?"0.71em":"0.32em")),Yx!==qx&&(Ix=Ix.transition(Yx),Nx=Nx.transition(Yx),jx=jx.transition(Yx),Vx=Vx.transition(Yx),Ox=Ox.transition(Yx).attr("opacity",ty).attr("transform",function(Bx){return isFinite(Bx=Xx(Bx))?Ax(Bx):this.getAttribute("transform")}),$x.attr("opacity",ty).attr("transform",function(Bx){var Zx=this.parentNode.__axis;return Ax(Zx&&isFinite(Zx=Zx(Bx))?Zx:Xx(Bx))})),Ox.remove(),Ix.attr("d",xx===ey||xx==Kg?"M"+Mx*Cx+","+Lx+"H0.5V"+Hx+"H"+Mx*Cx:"M"+Lx+","+Mx*Cx+"V0.5H"+Hx+"V"+Mx*Cx),Nx.attr("opacity",1).attr("transform",function(Bx){return Ax(Xx(Bx))}),jx.attr(Ux+"2",Mx*Sx),Vx.attr(Ux,Mx*Dx).text(Px),qx.filter(ap).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",xx===Kg?"start":xx===ey?"end":"middle"),qx.each(function(){this.__axis=Xx})}var wx=[],Tx=null,kx=null,Sx=6,Cx=6,zx=3,Mx=xx===Gg||xx===ey?-1:1,Ux=xx===ey||xx===Kg?"x":"y",Ax=xx===Gg||xx===Qg?tp:np;return bx.scale=function(Yx){return arguments.length?(vx=Yx,bx):vx},bx.ticks=function(){return wx=Rg.call(arguments),bx},bx.tickArguments=function(Yx){return arguments.length?(wx=null==Yx?[]:Rg.call(Yx),bx):wx.slice()},bx.tickValues=function(Yx){return arguments.length?(Tx=null==Yx?null:Rg.call(Yx),bx):Tx&&Tx.slice()},bx.tickFormat=function(Yx){return arguments.length?(kx=Yx,bx):kx},bx.tickSize=function(Yx){return arguments.length?(Sx=Cx=+Yx,bx):Sx},bx.tickSizeInner=function(Yx){return arguments.length?(Sx=+Yx,bx):Sx},bx.tickSizeOuter=function(Yx){return arguments.length?(Cx=+Yx,bx):Cx},bx.tickPadding=function(Yx){return arguments.length?(zx=+Yx,bx):zx},bx}function cp(){for(var xx,vx=0,bx=arguments.length,wx={};vx<bx;++vx){if(!(xx=arguments[vx]+"")||xx in wx)throw new Error("illegal type: "+xx);wx[xx]=[]}return new up(wx)}function up(xx){this._=xx}function pp(xx,vx){return xx.trim().split(/^|\s+/).map(function(bx){var wx="",Tx=bx.indexOf(".");if(0<=Tx&&(wx=bx.slice(Tx+1),bx=bx.slice(0,Tx)),bx&&!vx.hasOwnProperty(bx))throw new Error("unknown type: "+bx);return{type:bx,name:wx}})}function _p(xx,vx){for(var bx,wx=0,Tx=xx.length;wx<Tx;++wx)if((bx=xx[wx]).name===vx)return bx.value}function hp(xx,vx,bx){for(var wx=0,Tx=xx.length;wx<Tx;++wx)if(xx[wx].name===vx){xx[wx]=ny,xx=xx.slice(0,wx).concat(xx.slice(wx+1));break}return null!=bx&&xx.push({name:vx,value:bx}),xx}function mp(xx){return function(){var vx=this.ownerDocument,bx=this.namespaceURI;return bx===oy&&vx.documentElement.namespaceURI===oy?vx.createElement(xx):vx.createElementNS(bx,xx)}}function gp(xx){return function(){return this.ownerDocument.createElementNS(xx.space,xx.local)}}function yp(xx,vx,bx){return xx=fp(xx,vx,bx),function(wx){var Tx=wx.relatedTarget;Tx&&(Tx===this||8&Tx.compareDocumentPosition(this))||xx.call(this,wx)}}function fp(xx,vx,bx){return function(wx){var Tx=el.event;el.event=wx;try{xx.call(this,this.__data__,vx,bx)}finally{el.event=Tx}}}function xp(xx){return xx.trim().split(/^|\s+/).map(function(vx){var bx="",wx=vx.indexOf(".");return 0<=wx&&(bx=vx.slice(wx+1),vx=vx.slice(0,wx)),{type:vx,name:bx}})}function vp(xx){return function(){var vx=this.__on;if(vx){for(var bx,wx=0,Tx=-1,kx=vx.length;wx<kx;++wx)bx=vx[wx],xx.type&&bx.type!==xx.type||bx.name!==xx.name?vx[++Tx]=bx:this.removeEventListener(bx.type,bx.listener,bx.capture);++Tx?vx.length=Tx:delete this.__on}}}function bp(xx,vx,bx){var wx=uy.hasOwnProperty(xx.type)?yp:fp;return function(Tx,kx,Sx){var Cx,zx=this.__on,Mx=wx(vx,kx,Sx);if(zx)for(var Ux=0,Ax=zx.length;Ux<Ax;++Ux)if((Cx=zx[Ux]).type===xx.type&&Cx.name===xx.name)return this.removeEventListener(Cx.type,Cx.listener,Cx.capture),this.addEventListener(Cx.type,Cx.listener=Mx,Cx.capture=bx),void(Cx.value=vx);this.addEventListener(xx.type,Mx,bx),Cx={type:xx.type,name:xx.name,value:vx,listener:Mx,capture:bx},zx?zx.push(Cx):this.__on=[Cx]}}function wp(xx,vx,bx,wx){var Tx=el.event;xx.sourceEvent=el.event,el.event=xx;try{return vx.apply(bx,wx)}finally{el.event=Tx}}function Tp(){}function kp(){return[]}function Sp(xx,vx){this.ownerDocument=xx.ownerDocument,this.namespaceURI=xx.namespaceURI,this._next=null,this._parent=xx,this.__data__=vx}function Cp(xx,vx,bx,wx,Tx,kx){for(var Sx,Cx=0,zx=vx.length,Mx=kx.length;Cx<Mx;++Cx)(Sx=vx[Cx])?(Sx.__data__=kx[Cx],wx[Cx]=Sx):bx[Cx]=new Sp(xx,kx[Cx]);for(;Cx<zx;++Cx)(Sx=vx[Cx])&&(Tx[Cx]=Sx)}function zp(xx,vx,bx,wx,Tx,kx,Sx){var Cx,zx,Mx,Ux={},Ax=vx.length,Yx=kx.length,Ex=Array(Ax);for(Cx=0;Cx<Ax;++Cx)(zx=vx[Cx])&&(Ex[Cx]=Mx=ky+Sx.call(zx,zx.__data__,Cx,vx),Mx in Ux?Tx[Cx]=zx:Ux[Mx]=zx);for(Cx=0;Cx<Yx;++Cx)(zx=Ux[Mx=ky+Sx.call(xx,kx[Cx],Cx,kx)])?(wx[Cx]=zx,zx.__data__=kx[Cx],Ux[Mx]=null):bx[Cx]=new Sp(xx,kx[Cx]);for(Cx=0;Cx<Ax;++Cx)(zx=vx[Cx])&&Ux[Ex[Cx]]===zx&&(Tx[Cx]=zx)}function Mp(xx,vx){return xx<vx?-1:xx>vx?1:xx>=vx?0:NaN}function Up(xx){return function(){this.removeAttribute(xx)}}function Ap(xx){return function(){this.removeAttributeNS(xx.space,xx.local)}}function Yp(xx,vx){return function(){this.setAttribute(xx,vx)}}function Ep(xx,vx){return function(){this.setAttributeNS(xx.space,xx.local,vx)}}function Pp(xx,vx){return function(){var bx=vx.apply(this,arguments);null==bx?this.removeAttribute(xx):this.setAttribute(xx,bx)}}function Dp(xx,vx){return function(){var bx=vx.apply(this,arguments);null==bx?this.removeAttributeNS(xx.space,xx.local):this.setAttributeNS(xx.space,xx.local,bx)}}function Fp(xx){return function(){this.style.removeProperty(xx)}}function Lp(xx,vx,bx){return function(){this.style.setProperty(xx,vx,bx)}}function Hp(xx,vx,bx){return function(){var wx=vx.apply(this,arguments);null==wx?this.style.removeProperty(xx):this.style.setProperty(xx,wx,bx)}}function Xp(xx,vx){return xx.style.getPropertyValue(vx)||Hy(xx).getComputedStyle(xx,null).getPropertyValue(vx)}function qp(xx){return function(){delete this[xx]}}function Ip(xx,vx){return function(){this[xx]=vx}}function Np(xx,vx){return function(){var bx=vx.apply(this,arguments);null==bx?delete this[xx]:this[xx]=bx}}function Op(xx){return xx.trim().split(/^|\s+/)}function $p(xx){return xx.classList||new jp(xx)}function jp(xx){this._node=xx,this._names=Op(xx.getAttribute("class")||"")}function Vp(xx,vx){for(var bx=$p(xx),wx=-1,Tx=vx.length;++wx<Tx;)bx.add(vx[wx])}function Bp(xx,vx){for(var bx=$p(xx),wx=-1,Tx=vx.length;++wx<Tx;)bx.remove(vx[wx])}function Zp(xx){return function(){Vp(this,xx)}}function Wp(xx){return function(){Bp(this,xx)}}function Rp(xx,vx){return function(){(vx.apply(this,arguments)?Vp:Bp)(this,xx)}}function Jp(){this.textContent=""}function Gp(xx){return function(){this.textContent=xx}}function Kp(xx){return function(){var vx=xx.apply(this,arguments);this.textContent=null==vx?"":vx}}function Qp(){this.innerHTML=""}function e_(xx){return function(){this.innerHTML=xx}}function t_(xx){return function(){var vx=xx.apply(this,arguments);this.innerHTML=null==vx?"":vx}}function n_(){this.nextSibling&&this.parentNode.appendChild(this)}function o_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a_(){return null}function i_(){var xx=this.parentNode;xx&&xx.removeChild(this)}function l_(xx,vx,bx){var wx=Hy(xx),Tx=wx.CustomEvent;"function"==typeof Tx?Tx=new Tx(vx,bx):(Tx=wx.document.createEvent("Event"),bx?(Tx.initEvent(vx,bx.bubbles,bx.cancelable),Tx.detail=bx.detail):Tx.initEvent(vx,!1,!1)),xx.dispatchEvent(Tx)}function r_(xx,vx){return function(){return l_(this,xx,vx)}}function d_(xx,vx){return function(){return l_(this,xx,vx.apply(this,arguments))}}function s_(xx,vx){this._groups=xx,this._parents=vx}function c_(){return new s_([[document.documentElement]],Jy)}function u_(){el.event.stopImmediatePropagation()}function p_(xx,vx){var bx=xx.document.documentElement,wx=Gy(xx).on("dragstart.drag",null);vx&&(wx.on("click.drag",ef,!0),setTimeout(function(){wx.on("click.drag",null)},0)),"onselectstart"in bx?wx.on("selectstart.drag",null):(bx.style.MozUserSelect=bx.__noselect,delete bx.__noselect)}function __(xx,vx,bx,wx,Tx,kx,Sx,Cx,zx,Mx){this.target=xx,this.type=vx,this.subject=bx,this.identifier=wx,this.active=Tx,this.x=kx,this.y=Sx,this.dx=Cx,this.dy=zx,this._=Mx}function h_(){return!el.event.button}function m_(){return this.parentNode}function g_(xx){return null==xx?{x:el.event.x,y:el.event.y}:xx}function y_(){return pf||(mf(f_),pf=hf.now()+_f)}function f_(){pf=0}function x_(){this._call=this._time=this._next=null}function v_(xx,vx,bx){var wx=new x_;return wx.restart(xx,vx,bx),wx}function b_(){y_(),++rf;for(var xx,vx=of;vx;)0<=(xx=pf-vx._time)&&vx._call.call(null,xx),vx=vx._next;--rf}function w_(){pf=(uf=hf.now())+_f,rf=df=0;try{b_()}finally{rf=0,k_(),pf=0}}function T_(){var xx=hf.now(),vx=xx-uf;vx>cf&&(_f-=vx,uf=xx)}function k_(){for(var xx,vx,bx=of,wx=1/0;bx;)bx._call?(wx>bx._time&&(wx=bx._time),xx=bx,bx=bx._next):(vx=bx._next,bx._next=null,bx=xx?xx._next=vx:of=vx);af=xx,S_(wx)}function S_(xx){if(!rf){df&&(df=clearTimeout(df));var vx=xx-pf;24<vx?(xx<1/0&&(df=setTimeout(w_,vx)),sf&&(sf=clearInterval(sf))):(sf||(uf=pf,sf=setInterval(T_,cf)),rf=1,mf(w_))}}function C_(xx,vx){var bx=xx.__transition;if(!bx||!(bx=bx[vx])||bx.state>xf)throw new Error("too late");return bx}function z_(xx,vx){var bx=xx.__transition;if(!bx||!(bx=bx[vx])||bx.state>bf)throw new Error("too late");return bx}function M_(xx,vx){var bx=xx.__transition;if(!bx||!(bx=bx[vx]))throw new Error("too late");return bx}function U_(xx,vx,bx){function Tx(Mx){var Ux,Ax,Yx,Ex;if(bx.state!==vf)return Sx();for(Ux in zx)if((Ex=zx[Ux]).name===bx.name){if(Ex.state===wf)return gf(Tx);Ex.state===Tf?(Ex.state=Sf,Ex.timer.stop(),Ex.on.call("interrupt",xx,xx.__data__,Ex.index,Ex.group),delete zx[Ux]):+Ux<vx&&(Ex.state=Sf,Ex.timer.stop(),delete zx[Ux])}if(gf(function(){bx.state===wf&&(bx.state=Tf,bx.timer.restart(kx,bx.delay,bx.time),kx(Mx))}),bx.state=bf,bx.on.call("start",xx,xx.__data__,bx.index,bx.group),bx.state===bf){for(bx.state=wf,Cx=Array(Yx=bx.tween.length),Ux=0,Ax=-1;Ux<Yx;++Ux)(Ex=bx.tween[Ux].value.call(xx,xx.__data__,bx.index,bx.group))&&(Cx[++Ax]=Ex);Cx.length=Ax+1}}function kx(Mx){for(var Ux=Mx<bx.duration?bx.ease.call(null,Mx/bx.duration):(bx.timer.restart(Sx),bx.state=kf,1),Ax=-1,Yx=Cx.length;++Ax<Yx;)Cx[Ax].call(null,Ux);bx.state===kf&&(bx.on.call("end",xx,xx.__data__,bx.index,bx.group),Sx())}function Sx(){for(var Mx in bx.state=Sf,bx.timer.stop(),delete zx[vx],zx)return;delete xx.__transition}var Cx,zx=xx.__transition;zx[vx]=bx,bx.timer=v_(function(Mx){bx.state=vf,bx.timer.restart(Tx,bx.delay,bx.time),bx.delay<=Mx&&Tx(Mx-bx.delay)},0,bx.time)}function A_(xx,vx){var bx,wx;return function(){var Tx=z_(this,xx),kx=Tx.tween;if(kx!==bx)for(var Sx=0,Cx=(wx=bx=kx).length;Sx<Cx;++Sx)if(wx[Sx].name===vx){(wx=wx.slice()).splice(Sx,1);break}Tx.tween=wx}}function Y_(xx,vx,bx){var wx,Tx;if("function"!=typeof bx)throw new Error;return function(){var kx=z_(this,xx),Sx=kx.tween;if(Sx!==wx){Tx=(wx=Sx).slice();for(var Cx={name:vx,value:bx},zx=0,Mx=Tx.length;zx<Mx;++zx)if(Tx[zx].name===vx){Tx[zx]=Cx;break}zx===Mx&&Tx.push(Cx)}kx.tween=Tx}}function E_(xx,vx,bx){var wx=xx._id;return xx.each(function(){var Tx=z_(this,wx);(Tx.value||(Tx.value={}))[vx]=bx.apply(this,arguments)}),function(Tx){return M_(Tx,wx).value[vx]}}function P_(xx){return function(){this.removeAttribute(xx)}}function D_(xx){return function(){this.removeAttributeNS(xx.space,xx.local)}}function F_(xx,vx,bx){var wx,Tx;return function(){var kx=this.getAttribute(xx);return kx===bx?null:kx===wx?Tx:Tx=vx(wx=kx,bx)}}function L_(xx,vx,bx){var wx,Tx;return function(){var kx=this.getAttributeNS(xx.space,xx.local);return kx===bx?null:kx===wx?Tx:Tx=vx(wx=kx,bx)}}function H_(xx,vx,bx){var wx,Tx,kx;return function(){var Sx,Cx=bx(this);return null==Cx?void this.removeAttribute(xx):(Sx=this.getAttribute(xx),Sx===Cx?null:Sx===wx&&Cx===Tx?kx:kx=vx(wx=Sx,Tx=Cx))}}function X_(xx,vx,bx){var wx,Tx,kx;return function(){var Sx,Cx=bx(this);return null==Cx?void this.removeAttributeNS(xx.space,xx.local):(Sx=this.getAttributeNS(xx.space,xx.local),Sx===Cx?null:Sx===wx&&Cx===Tx?kx:kx=vx(wx=Sx,Tx=Cx))}}function q_(xx,vx){function bx(){var wx=this,Tx=vx.apply(wx,arguments);return Tx&&function(kx){wx.setAttributeNS(xx.space,xx.local,Tx(kx))}}return bx._value=vx,bx}function I_(xx,vx){function bx(){var wx=this,Tx=vx.apply(wx,arguments);return Tx&&function(kx){wx.setAttribute(xx,Tx(kx))}}return bx._value=vx,bx}function N_(xx,vx){return function(){C_(this,xx).delay=+vx.apply(this,arguments)}}function O_(xx,vx){return vx=+vx,function(){C_(this,xx).delay=vx}}function $_(xx,vx){return function(){z_(this,xx).duration=+vx.apply(this,arguments)}}function j_(xx,vx){return vx=+vx,function(){z_(this,xx).duration=vx}}function V_(xx,vx){if("function"!=typeof vx)throw new Error;return function(){z_(this,xx).ease=vx}}function B_(xx){return(xx+"").trim().split(/^|\s+/).every(function(vx){var bx=vx.indexOf(".");return 0<=bx&&(vx=vx.slice(0,bx)),!vx||"start"===vx})}function Z_(xx,vx,bx){var wx,Tx,kx=B_(vx)?C_:z_;return function(){var Sx=kx(this,xx),Cx=Sx.on;Cx!==wx&&(Tx=(wx=Cx).copy()).on(vx,bx),Sx.on=Tx}}function W_(xx){return function(){var vx=this.parentNode;for(var bx in this.__transition)if(+bx!==xx)return;vx&&vx.removeChild(this)}}function R_(xx,vx){var bx,wx,Tx;return function(){var kx=Xp(this,xx),Sx=(this.style.removeProperty(xx),Xp(this,xx));return kx===Sx?null:kx===bx&&Sx===wx?Tx:Tx=vx(bx=kx,wx=Sx)}}function J_(xx){return function(){this.style.removeProperty(xx)}}function G_(xx,vx,bx){var wx,Tx;return function(){var kx=Xp(this,xx);return kx===bx?null:kx===wx?Tx:Tx=vx(wx=kx,bx)}}function K_(xx,vx,bx){var wx,Tx,kx;return function(){var Sx=Xp(this,xx),Cx=bx(this);return null==Cx&&(this.style.removeProperty(xx),Cx=Xp(this,xx)),Sx===Cx?null:Sx===wx&&Cx===Tx?kx:kx=vx(wx=Sx,Tx=Cx)}}function Q_(xx,vx,bx){function wx(){var Tx=this,kx=vx.apply(Tx,arguments);return kx&&function(Sx){Tx.style.setProperty(xx,kx(Sx),bx)}}return wx._value=vx,wx}function eh(xx){return function(){this.textContent=xx}}function th(xx){return function(){var vx=xx(this);this.textContent=null==vx?"":vx}}function nh(xx,vx,bx,wx){this._groups=xx,this._parents=vx,this._name=bx,this._id=wx}function ah(){return++Wf}function lh(xx,vx){for(var bx;!(bx=xx.__transition)||!(bx=bx[vx]);)if(!(xx=xx.parentNode))return Gf.time=y_(),Gf;return bx}function rh(xx,vx,bx){this.target=xx,this.type=vx,this.transform=bx}function dh(xx,vx,bx){this.k=xx,this.x=vx,this.y=bx}function sh(xx){return xx.__zoom||ex}function ch(){el.event.stopImmediatePropagation()}function uh(){return!el.event.button}function ph(){var xx,vx,bx=this;return bx instanceof SVGElement?(xx=(bx=bx.ownerSVGElement||bx).width.baseVal.value,vx=bx.height.baseVal.value):(xx=bx.clientWidth,vx=bx.clientHeight),[[0,0],[xx,vx]]}function _h(){return this.__zoom||ex}function hh(){el.event.stopImmediatePropagation()}function mh(xx){return{type:xx}}function gh(){return!el.event.button}function yh(){var xx=this.ownerSVGElement||this;return[[0,0],[xx.width.baseVal.value,xx.height.baseVal.value]]}function fh(xx){for(;!xx.__brush;)if(!(xx=xx.parentNode))return;return xx.__brush}function xh(xx){return xx[0][0]===xx[1][0]||xx[0][1]===xx[1][1]}function wh(xx){function vx(Yx){var Ex=Yx.property("__brush",Sx).selectAll(".overlay").data([mh("overlay")]);Ex.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_x.overlay).merge(Ex).each(function(){var Dx=fh(this).extent;Gy(this).attr("x",Dx[0][0]).attr("y",Dx[0][1]).attr("width",Dx[1][0]-Dx[0][0]).attr("height",Dx[1][1]-Dx[0][1])}),Yx.selectAll(".selection").data([mh("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_x.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Px=Yx.selectAll(".handle").data(xx.handles,function(Dx){return Dx.type});Px.exit().remove(),Px.enter().append("rect").attr("class",function(Dx){return"handle handle--"+Dx.type}).attr("cursor",function(Dx){return _x[Dx.type]}),Yx.each(bx).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",kx)}function bx(){var Yx=Gy(this),Ex=fh(this).selection;Ex?(Yx.selectAll(".selection").style("display",null).attr("x",Ex[0][0]).attr("y",Ex[0][1]).attr("width",Ex[1][0]-Ex[0][0]).attr("height",Ex[1][1]-Ex[0][1]),Yx.selectAll(".handle").style("display",null).attr("x",function(Px){return"e"===Px.type[Px.type.length-1]?Ex[1][0]-Ax/2:Ex[0][0]-Ax/2}).attr("y",function(Px){return"s"===Px.type[0]?Ex[1][1]-Ax/2:Ex[0][1]-Ax/2}).attr("width",function(Px){return"n"===Px.type||"s"===Px.type?Ex[1][0]-Ex[0][0]+Ax:Ax}).attr("height",function(Px){return"e"===Px.type||"w"===Px.type?Ex[1][1]-Ex[0][1]+Ax:Ax})):Yx.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function wx(Yx,Ex){return Yx.__brush.emitter||new Tx(Yx,Ex)}function Tx(Yx,Ex){this.that=Yx,this.args=Ex,this.state=Yx.__brush,this.active=0}function kx(){function Yx(){var hv=my(Rx);!rv||Zx||Wx||(Math.abs(hv[0]-sv[0])>Math.abs(hv[1]-sv[1])?Wx=!0:Zx=!0),sv=hv,Bx=!0,ix(),Ex()}function Ex(){var hv;switch(jx=sv[0]-dv[0],Vx=sv[1]-dv[1],Gx){case rx:case lx:Kx&&(jx=Math.max(ov-Lx,Math.min(iv-Ix,jx)),Hx=Lx+jx,Nx=Ix+jx),Qx&&(Vx=Math.max(av-Xx,Math.min(lv-Ox,Vx)),qx=Xx+Vx,$x=Ox+Vx);break;case dx:0>Kx?(jx=Math.max(ov-Lx,Math.min(iv-Lx,jx)),Hx=Lx+jx,Nx=Ix):0<Kx&&(jx=Math.max(ov-Ix,Math.min(iv-Ix,jx)),Hx=Lx,Nx=Ix+jx),0>Qx?(Vx=Math.max(av-Xx,Math.min(lv-Xx,Vx)),qx=Xx+Vx,$x=Ox):0<Qx&&(Vx=Math.max(av-Ox,Math.min(lv-Ox,Vx)),qx=Xx,$x=Ox+Vx);break;case sx:Kx&&(Hx=Math.max(ov,Math.min(iv,Lx-jx*Kx)),Nx=Math.max(ov,Math.min(iv,Ix+jx*Kx))),Qx&&(qx=Math.max(av,Math.min(lv,Xx-Vx*Qx)),$x=Math.max(av,Math.min(lv,Ox+Vx*Qx)));}Nx<Hx&&(Kx*=-1,hv=Lx,Lx=Ix,Ix=hv,hv=Hx,Hx=Nx,Nx=hv,Jx in hx&&pv.attr("cursor",_x[Jx=hx[Jx]])),$x<qx&&(Qx*=-1,hv=Xx,Xx=Ox,Ox=hv,hv=qx,qx=$x,$x=hv,Jx in mx&&pv.attr("cursor",_x[Jx=mx[Jx]])),ev.selection&&(nv=ev.selection),Zx&&(Hx=nv[0][0],Nx=nv[1][0]),Wx&&(qx=nv[0][1],$x=nv[1][1]),nv[0][0]===Hx&&nv[0][1]===qx&&nv[1][0]===Nx&&nv[1][1]===$x||(ev.selection=[[Hx,qx],[Nx,$x]],bx.call(Rx),cv.brush())}function Px(){if(hh(),el.event.touches){if(el.event.touches.length)return;Cx&&clearTimeout(Cx),Cx=setTimeout(function(){Cx=null},500),uv.on("touchmove.brush touchend.brush touchcancel.brush",null)}else p_(el.event.view,Bx),_v.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);uv.attr("pointer-events","all"),pv.attr("cursor",_x.overlay),ev.selection&&(nv=ev.selection),xh(nv)&&(ev.selection=null,bx.call(Rx)),cv.end()}function Dx(){switch(el.event.keyCode){case 16:rv=Kx&&Qx;break;case 18:Gx===dx&&(Kx&&(Ix=Nx-jx*Kx,Lx=Hx+jx*Kx),Qx&&(Ox=$x-Vx*Qx,Xx=qx+Vx*Qx),Gx=sx,Ex());break;case 32:Gx!==dx&&Gx!==sx||(0>Kx?Ix=Nx-jx:0<Kx&&(Lx=Hx-jx),0>Qx?Ox=$x-Vx:0<Qx&&(Xx=qx-Vx),Gx=rx,pv.attr("cursor",_x.selection),Ex());break;default:return;}ix()}function Fx(){switch(el.event.keyCode){case 16:rv&&(Zx=Wx=rv=!1,Ex());break;case 18:Gx===sx&&(0>Kx?Ix=Nx:0<Kx&&(Lx=Hx),0>Qx?Ox=$x:0<Qx&&(Xx=qx),Gx=dx,Ex());break;case 32:Gx===rx&&(el.event.altKey?(Kx&&(Ix=Nx-jx*Kx,Lx=Hx+jx*Kx),Qx&&(Ox=$x-Vx*Qx,Xx=qx+Vx*Qx),Gx=sx):(0>Kx?Ix=Nx:0<Kx&&(Lx=Hx),0>Qx?Ox=$x:0<Qx&&(Xx=qx),Gx=dx),pv.attr("cursor",_x[Jx]),Ex());break;default:return;}ix()}if(el.event.touches){if(el.event.changedTouches.length<el.event.touches.length)return ix();}else if(Cx)return;if(Mx.apply(this,arguments)){var Lx,Hx,Xx,qx,Ix,Nx,Ox,$x,jx,Vx,Bx,Zx,Wx,Rx=this,Jx=el.event.target.__data__.type,Gx="selection"===(el.event.metaKey?Jx="overlay":Jx)?lx:el.event.altKey?sx:dx,Kx=xx===ux?null:gx[Jx],Qx=xx===cx?null:yx[Jx],ev=fh(Rx),tv=ev.extent,nv=ev.selection,ov=tv[0][0],av=tv[0][1],iv=tv[1][0],lv=tv[1][1],rv=Kx&&Qx&&el.event.shiftKey,dv=my(Rx),sv=dv,cv=wx(Rx,arguments).beforestart();"overlay"===Jx?ev.selection=nv=[[Lx=xx===ux?ov:dv[0],Xx=xx===cx?av:dv[1]],[Ix=xx===ux?iv:Lx,Ox=xx===cx?lv:Xx]]:(Lx=nv[0][0],Xx=nv[0][1],Ix=nv[1][0],Ox=nv[1][1]),Hx=Lx,qx=Xx,Nx=Ix,$x=Ox;var uv=Gy(Rx).attr("pointer-events","none"),pv=uv.selectAll(".overlay").attr("cursor",_x[Jx]);if(el.event.touches)uv.on("touchmove.brush",Yx,!0).on("touchend.brush touchcancel.brush",Px,!0);else{var _v=Gy(el.event.view).on("keydown.brush",Dx,!0).on("keyup.brush",Fx,!0).on("mousemove.brush",Yx,!0).on("mouseup.brush",Px,!0);tf(el.event.view)}hh(),zf(Rx),bx.call(Rx),cv.start()}}function Sx(){var Yx=this.__brush||{selection:null};return Yx.extent=zx.apply(this,arguments),Yx.dim=xx,Yx}var Cx,zx=yh,Mx=gh,Ux=cp(vx,"start","brush","end"),Ax=6;return vx.move=function(Yx,Ex){Yx.selection?Yx.on("start.brush",function(){wx(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){wx(this,arguments).end()}).tween("brush",function(){function Px(Ix){Fx.selection=1===Ix&&xh(Xx)?null:qx(Ix),bx.call(Dx),Lx.brush()}var Dx=this,Fx=Dx.__brush,Lx=wx(Dx,arguments),Hx=Fx.selection,Xx=xx.input("function"==typeof Ex?Ex.apply(this,arguments):Ex,Fx.extent),qx=Sg(Hx,Xx);return Hx&&Xx?Px:Px(1)}):Yx.each(function(){var Px=this,Dx=arguments,Fx=Px.__brush,Lx=xx.input("function"==typeof Ex?Ex.apply(Px,Dx):Ex,Fx.extent),Hx=wx(Px,Dx).beforestart();zf(Px),Fx.selection=null==Lx||xh(Lx)?null:Lx,bx.call(Px),Hx.start().brush().end()})},Tx.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Ex){wp(new ax(vx,Ex,xx.output(this.state.selection)),Ux.apply,Ux,[Ex,this.that,this.args])}},vx.extent=function(Yx){return arguments.length?(zx="function"==typeof Yx?Yx:ox([[+Yx[0][0],+Yx[0][1]],[+Yx[1][0],+Yx[1][1]]]),vx):zx},vx.filter=function(Yx){return arguments.length?(Mx="function"==typeof Yx?Yx:ox(!!Yx),vx):Mx},vx.handleSize=function(Yx){return arguments.length?(Ax=+Yx,vx):Ax},vx.on=function(){var Yx=Ux.on.apply(Ux,arguments);return Yx===Ux?vx:Yx},vx}var Th=function(vx,bx){return vx<bx?-1:vx>bx?1:vx>=bx?0:NaN},kh=function(vx){return 1===vx.length&&(vx=tl(vx)),{left:function(wx,Tx,kx,Sx){for(null==kx&&(kx=0),null==Sx&&(Sx=wx.length);kx<Sx;){var Cx=kx+Sx>>>1;0>vx(wx[Cx],Tx)?kx=Cx+1:Sx=Cx}return kx},right:function(wx,Tx,kx,Sx){for(null==kx&&(kx=0),null==Sx&&(Sx=wx.length);kx<Sx;){var Cx=kx+Sx>>>1;0<vx(wx[Cx],Tx)?Sx=Cx:kx=Cx+1}return kx}}},Sh=kh(Th).right,zh=Math.sqrt(50),Mh=Math.sqrt(10),Uh=Math.sqrt(2),Ah=function(vx,bx,wx){var Tx,kx,Sx,Cx=bx<vx,zx=-1;if(Cx&&(Tx=vx,vx=bx,bx=Tx),0===(Sx=nl(vx,bx,wx))||!isFinite(Sx))return[];if(0<Sx)for(vx=Math.ceil(vx/Sx),bx=Math.floor(bx/Sx),kx=Array(Tx=Math.ceil(bx-vx+1));++zx<Tx;)kx[zx]=(vx+zx)*Sx;else for(vx=Math.floor(vx*Sx),bx=Math.ceil(bx*Sx),kx=Array(Tx=Math.ceil(vx-bx+1));++zx<Tx;)kx[zx]=(vx-zx)/Sx;return Cx&&kx.reverse(),kx},Ph=Math.PI,Dh=2*Ph;al.prototype=il.prototype={constructor:al,moveTo:function(vx,bx){this._+="M"+(this._x0=this._x1=+vx)+","+(this._y0=this._y1=+bx)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(vx,bx){this._+="L"+(this._x1=+vx)+","+(this._y1=+bx)},quadraticCurveTo:function(vx,bx,wx,Tx){this._+="Q"+ +vx+","+ +bx+","+(this._x1=+wx)+","+(this._y1=+Tx)},bezierCurveTo:function(vx,bx,wx,Tx,kx,Sx){this._+="C"+ +vx+","+ +bx+","+ +wx+","+ +Tx+","+(this._x1=+kx)+","+(this._y1=+Sx)},arcTo:function(vx,bx,wx,Tx,kx){vx=+vx,bx=+bx,wx=+wx,Tx=+Tx,kx=+kx;var Sx=this._x1,Cx=this._y1,zx=wx-vx,Mx=Tx-bx,Ux=Sx-vx,Ax=Cx-bx,Yx=Ux*Ux+Ax*Ax;if(0>kx)throw new Error("negative radius: "+kx);if(null===this._x1)this._+="M"+(this._x1=vx)+","+(this._y1=bx);else if(!(1e-6<Yx));else if(1e-6<Math.abs(Ax*zx-Mx*Ux)&&kx){var Ex=wx-Sx,Px=Tx-Cx,Dx=zx*zx+Mx*Mx,Lx=Math.sqrt(Dx),Hx=Math.sqrt(Yx),Xx=kx*Math.tan((Ph-Math.acos((Dx+Yx-(Ex*Ex+Px*Px))/(2*Lx*Hx)))/2),qx=Xx/Hx,Ix=Xx/Lx;1e-6<Math.abs(qx-1)&&(this._+="L"+(vx+qx*Ux)+","+(bx+qx*Ax)),this._+="A"+kx+","+kx+",0,0,"+ +(Ax*Ex>Ux*Px)+","+(this._x1=vx+Ix*zx)+","+(this._y1=bx+Ix*Mx)}else this._+="L"+(this._x1=vx)+","+(this._y1=bx)},arc:function(vx,bx,wx,Tx,kx,Sx){vx=+vx,bx=+bx;var Cx=(wx=+wx)*Math.cos(Tx),zx=wx*Math.sin(Tx),Mx=vx+Cx,Ux=bx+zx,Ax=1^Sx,Yx=Sx?Tx-kx:kx-Tx;if(0>wx)throw new Error("negative radius: "+wx);null===this._x1?this._+="M"+Mx+","+Ux:(1e-6<Math.abs(this._x1-Mx)||1e-6<Math.abs(this._y1-Ux))&&(this._+="L"+Mx+","+Ux),wx&&(0>Yx&&(Yx=Yx%Dh+Dh),Yx>Dh-1e-6?this._+="A"+wx+","+wx+",0,1,"+Ax+","+(vx-Cx)+","+(bx-zx)+"A"+wx+","+wx+",0,1,"+Ax+","+(this._x1=Mx)+","+(this._y1=Ux):1e-6<Yx&&(this._+="A"+wx+","+wx+",0,"+ +(Yx>=Ph)+","+Ax+","+(this._x1=vx+wx*Math.cos(kx))+","+(this._y1=bx+wx*Math.sin(kx))))},rect:function(vx,bx,wx,Tx){this._+="M"+(this._x0=this._x1=+vx)+","+(this._y0=this._y1=+bx)+"h"+ +wx+"v"+ +Tx+"h"+-wx+"Z"},toString:function(){return this._}};var Lh=function(vx){return function(){return vx}},Hh=1e-12;ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(vx,bx){switch(vx=+vx,bx=+bx,this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2;default:this._context.lineTo(vx,bx);}}};var Xh=function(vx){return new ll(vx)},qh=function(){function vx(zx){var Mx,Ux,Ax,Yx=zx.length,Ex=!1;for(null==kx&&(Cx=Sx(Ax=il())),Mx=0;Mx<=Yx;++Mx)!(Mx<Yx&&Tx(Ux=zx[Mx],Mx,zx))===Ex&&((Ex=!Ex)?Cx.lineStart():Cx.lineEnd()),Ex&&Cx.point(+bx(Ux,Mx,zx),+wx(Ux,Mx,zx));if(Ax)return Cx=null,Ax+""||null}var bx=rl,wx=dl,Tx=Lh(!0),kx=null,Sx=Xh,Cx=null;return vx.x=function(zx){return arguments.length?(bx="function"==typeof zx?zx:Lh(+zx),vx):bx},vx.y=function(zx){return arguments.length?(wx="function"==typeof zx?zx:Lh(+zx),vx):wx},vx.defined=function(zx){return arguments.length?(Tx="function"==typeof zx?zx:Lh(!!zx),vx):Tx},vx.curve=function(zx){return arguments.length?(Sx=zx,null!=kx&&(Cx=Sx(kx)),vx):Sx},vx.context=function(zx){return arguments.length?(null==zx?kx=Cx=null:Cx=Sx(kx=zx),vx):kx},vx};cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(vx,bx){switch(vx=+vx,bx=+bx,this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sl(this,vx,bx);}this._x0=this._x1,this._x1=vx,this._y0=this._y1,this._y1=bx}};pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ul(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(vx,bx){switch(vx=+vx,bx=+bx,this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2,this._x1=vx,this._y1=bx;break;case 2:this._point=3;default:ul(this,vx,bx);}this._x0=this._x1,this._x1=this._x2,this._x2=vx,this._y0=this._y1,this._y1=this._y2,this._y2=bx}};var Oh=function xx(vx){function bx(wx){return new pl(wx,vx)}return bx.tension=function(wx){return xx(+wx)},bx}(0);hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(vx,bx){if(vx=+vx,bx=+bx,this._point){var wx=this._x2-vx,Tx=this._y2-bx;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(wx*wx+Tx*Tx,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2;break;case 2:this._point=3;default:_l(this,vx,bx);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=vx,this._y0=this._y1,this._y1=this._y2,this._y2=bx}};var $h=function xx(vx){function bx(wx){return vx?new hl(wx,vx):new pl(wx,0)}return bx.alpha=function(wx){return xx(+wx)},bx}(.5);xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fl(this,this._t0,yl(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(vx,bx){var wx=NaN;if(vx=+vx,bx=+bx,vx!==this._x1||bx!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2;break;case 2:this._point=3,fl(this,yl(this,wx=gl(this,vx,bx)),wx);break;default:fl(this,this._t0,wx=gl(this,vx,bx));}this._x0=this._x1,this._x1=vx,this._y0=this._y1,this._y1=bx,this._t0=wx}}},(function(xx){this._context=new bl(xx)}.prototype=Object.create(xl.prototype)).point=function(xx,vx){xl.prototype.point.call(this,vx,xx)},bl.prototype={moveTo:function(vx,bx){this._context.moveTo(bx,vx)},closePath:function(){this._context.closePath()},lineTo:function(vx,bx){this._context.lineTo(bx,vx)},bezierCurveTo:function(vx,bx,wx,Tx,kx,Sx){this._context.bezierCurveTo(bx,vx,Tx,wx,Sx,kx)}},Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var vx=this._x,bx=this._y,wx=vx.length;if(wx)if(this._line?this._context.lineTo(vx[0],bx[0]):this._context.moveTo(vx[0],bx[0]),2===wx)this._context.lineTo(vx[1],bx[1]);else for(var Tx=kl(vx),kx=kl(bx),Sx=0,Cx=1;Cx<wx;++Sx,++Cx)this._context.bezierCurveTo(Tx[0][Sx],kx[0][Sx],Tx[1][Sx],kx[1][Sx],vx[Cx],bx[Cx]);(this._line||0!==this._line&&1===wx)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(vx,bx){this._x.push(+vx),this._y.push(+bx)}};Sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(vx,bx){switch(vx=+vx,bx=+bx,this._point){case 0:this._point=1,this._line?this._context.lineTo(vx,bx):this._context.moveTo(vx,bx);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,bx),this._context.lineTo(vx,bx);else{var wx=this._x*(1-this._t)+vx*this._t;this._context.lineTo(wx,this._y),this._context.lineTo(wx,bx)}}this._x=vx,this._y=bx}};var Bh=new Date,Zh=new Date,Wh=Ml(function(){},function(xx,vx){xx.setTime(+xx+vx)},function(xx,vx){return vx-xx});Wh.every=function(xx){return xx=Math.floor(xx),isFinite(xx)&&0<xx?1<xx?Ml(function(vx){vx.setTime(Math.floor(vx/xx)*xx)},function(vx,bx){vx.setTime(+vx+bx*xx)},function(vx,bx){return(bx-vx)/xx}):Wh:null};var Rh=6e4,Jh=6048e5,Gh=Ml(function(xx){xx.setTime(1e3*Math.floor(xx/1e3))},function(xx,vx){xx.setTime(+xx+1e3*vx)},function(xx,vx){return(vx-xx)/1e3},function(xx){return xx.getUTCSeconds()}),Kh=Ml(function(xx){xx.setTime(Math.floor(xx/Rh)*Rh)},function(xx,vx){xx.setTime(+xx+vx*Rh)},function(xx,vx){return(vx-xx)/Rh},function(xx){return xx.getMinutes()}),Qh=Ml(function(xx){var vx=xx.getTimezoneOffset()*Rh%36e5;0>vx&&(vx+=36e5),xx.setTime(36e5*Math.floor((+xx-vx)/36e5)+vx)},function(xx,vx){xx.setTime(+xx+36e5*vx)},function(xx,vx){return(vx-xx)/36e5},function(xx){return xx.getHours()}),em=Ml(function(xx){xx.setHours(0,0,0,0)},function(xx,vx){xx.setDate(xx.getDate()+vx)},function(xx,vx){return(vx-xx-(vx.getTimezoneOffset()-xx.getTimezoneOffset())*Rh)/864e5},function(xx){return xx.getDate()-1}),tm=Ul(0),nm=Ul(1),om=(Ul(2),Ul(3),Ul(4),Ul(5),Ul(6),Ml(function(xx){xx.setDate(1),xx.setHours(0,0,0,0)},function(xx,vx){xx.setMonth(xx.getMonth()+vx)},function(xx,vx){return vx.getMonth()-xx.getMonth()+12*(vx.getFullYear()-xx.getFullYear())},function(xx){return xx.getMonth()})),am=Ml(function(xx){xx.setMonth(0,1),xx.setHours(0,0,0,0)},function(xx,vx){xx.setFullYear(xx.getFullYear()+vx)},function(xx,vx){return vx.getFullYear()-xx.getFullYear()},function(xx){return xx.getFullYear()});am.every=function(xx){return isFinite(xx=Math.floor(xx))&&0<xx?Ml(function(vx){vx.setFullYear(Math.floor(vx.getFullYear()/xx)*xx),vx.setMonth(0,1),vx.setHours(0,0,0,0)},function(vx,bx){vx.setFullYear(vx.getFullYear()+bx*xx)}):null},Ml(function(xx){xx.setUTCSeconds(0,0)},function(xx,vx){xx.setTime(+xx+vx*Rh)},function(xx,vx){return(vx-xx)/Rh},function(xx){return xx.getUTCMinutes()}),Ml(function(xx){xx.setUTCMinutes(0,0,0)},function(xx,vx){xx.setTime(+xx+36e5*vx)},function(xx,vx){return(vx-xx)/36e5},function(xx){return xx.getUTCHours()});var im=Ml(function(xx){xx.setUTCHours(0,0,0,0)},function(xx,vx){xx.setUTCDate(xx.getUTCDate()+vx)},function(xx,vx){return(vx-xx)/864e5},function(xx){return xx.getUTCDate()-1}),lm=Al(0),rm=Al(1),dm=(Al(2),Al(3),Al(4),Al(5),Al(6),Ml(function(xx){xx.setUTCDate(1),xx.setUTCHours(0,0,0,0)},function(xx,vx){xx.setUTCMonth(xx.getUTCMonth()+vx)},function(xx,vx){return vx.getUTCMonth()-xx.getUTCMonth()+12*(vx.getUTCFullYear()-xx.getUTCFullYear())},function(xx){return xx.getUTCMonth()}),Ml(function(xx){xx.setUTCMonth(0,1),xx.setUTCHours(0,0,0,0)},function(xx,vx){xx.setUTCFullYear(xx.getUTCFullYear()+vx)},function(xx,vx){return vx.getUTCFullYear()-xx.getUTCFullYear()},function(xx){return xx.getUTCFullYear()}));dm.every=function(xx){return isFinite(xx=Math.floor(xx))&&0<xx?Ml(function(vx){vx.setUTCFullYear(Math.floor(vx.getUTCFullYear()/xx)*xx),vx.setUTCMonth(0,1),vx.setUTCHours(0,0,0,0)},function(vx,bx){vx.setUTCFullYear(vx.getUTCFullYear()+bx*xx)}):null};var sm,cm=function(vx,bx){if(0>(wx=(vx=bx?vx.toExponential(bx-1):vx.toExponential()).indexOf("e")))return null;var wx,Tx=vx.slice(0,wx);return[1<Tx.length?Tx[0]+Tx.slice(2):Tx,+vx.slice(wx+1)]},um=function(vx){return vx=cm(Math.abs(vx)),vx?vx[1]:NaN},pm=function(vx,bx){return function(wx,Tx){for(var kx=wx.length,Sx=[],Cx=0,zx=vx[0],Mx=0;0<kx&&0<zx&&(Mx+zx+1>Tx&&(zx=Math.max(1,Tx-Mx)),Sx.push(wx.substring(kx-=zx,kx+zx)),!((Mx+=zx+1)>Tx));)zx=vx[Cx=(Cx+1)%vx.length];return Sx.reverse().join(bx)}},_m=function(vx){return function(bx){return bx.replace(/[0-9]/g,function(wx){return vx[+wx]})}},hm=function(vx,bx){var wx=cm(vx,bx);if(!wx)return vx+"";var Tx=wx[0],kx=wx[1];return 0>kx?"0."+Array(-kx).join("0")+Tx:Tx.length>kx+1?Tx.slice(0,kx+1)+"."+Tx.slice(kx+1):Tx+Array(kx-Tx.length+2).join("0")},mm={"":function(vx,bx){t:for(var wx,Tx=(vx=vx.toPrecision(bx)).length,kx=1,Sx=-1;kx<Tx;++kx)switch(vx[kx]){case".":Sx=wx=kx;break;case"0":0===Sx&&(Sx=kx),wx=kx;break;case"e":break t;default:0<Sx&&(Sx=0);}return 0<Sx?vx.slice(0,Sx)+vx.slice(wx+1):vx},"%":function(vx,bx){return(100*vx).toFixed(bx)},b:function(vx){return Math.round(vx).toString(2)},c:function(vx){return vx+""},d:function(vx){return Math.round(vx).toString(10)},e:function(vx,bx){return vx.toExponential(bx)},f:function(vx,bx){return vx.toFixed(bx)},g:function(vx,bx){return vx.toPrecision(bx)},o:function(vx){return Math.round(vx).toString(8)},p:function(vx,bx){return hm(100*vx,bx)},r:hm,s:function(vx,bx){var wx=cm(vx,bx);if(!wx)return vx+"";var Tx=wx[0],kx=wx[1],Sx=kx-(sm=3*Math.max(-8,Math.min(8,Math.floor(kx/3))))+1,Cx=Tx.length;return Sx===Cx?Tx:Sx>Cx?Tx+Array(Sx-Cx+1).join("0"):0<Sx?Tx.slice(0,Sx)+"."+Tx.slice(Sx):"0."+Array(1-Sx).join("0")+cm(vx,Math.max(0,bx+Sx-1))[0]},X:function(vx){return Math.round(vx).toString(16).toUpperCase()},x:function(vx){return Math.round(vx).toString(16)}},gm=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Yl.prototype=El.prototype,El.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var ym,fm,xm=function(vx){return vx},vm=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],bm=function(vx){function bx(Mx){function Ux($x){var jx,Vx,Bx,Zx=qx,Wx=Ix;if("c"===Xx)Wx=Nx($x)+Wx,$x="";else{var Rx=0>($x=+$x);if($x=Nx(Math.abs($x),Hx),Rx&&0==+$x&&(Rx=!1),Zx=(Rx?"("===Ex?Ex:"-":"-"===Ex||"("===Ex?"":Ex)+Zx,Wx=Wx+("s"===Xx?vm[8+sm/3]:"")+(Rx&&"("===Ex?")":""),Ox)for(jx=-1,Vx=$x.length;++jx<Vx;)if(48>(Bx=$x.charCodeAt(jx))||57<Bx){Wx=(46===Bx?Sx+$x.slice(jx+1):$x.slice(jx))+Wx,$x=$x.slice(0,jx);break}}Lx&&!Dx&&($x=Tx($x,1/0));var Jx=Zx.length+$x.length+Wx.length,Gx=Jx<Fx?Array(Fx-Jx+1).join(Ax):"";switch(Lx&&Dx&&($x=Tx(Gx+$x,Gx.length?Fx-Wx.length:1/0),Gx=""),Yx){case"<":$x=Zx+$x+Wx+Gx;break;case"=":$x=Zx+Gx+$x+Wx;break;case"^":$x=Gx.slice(0,Jx=Gx.length>>1)+Zx+$x+Wx+Gx.slice(Jx);break;default:$x=Gx+Zx+$x+Wx;}return Cx($x)}var Ax=(Mx=Yl(Mx)).fill,Yx=Mx.align,Ex=Mx.sign,Px=Mx.symbol,Dx=Mx.zero,Fx=Mx.width,Lx=Mx.comma,Hx=Mx.precision,Xx=Mx.type,qx="$"===Px?kx[0]:"#"===Px&&/[boxX]/.test(Xx)?"0"+Xx.toLowerCase():"",Ix="$"===Px?kx[1]:/[%p]/.test(Xx)?zx:"",Nx=mm[Xx],Ox=!Xx||/[defgprs%]/.test(Xx);return Hx=null==Hx?Xx?6:12:/[gprs]/.test(Xx)?Math.max(1,Math.min(21,Hx)):Math.max(0,Math.min(20,Hx)),Ux.toString=function(){return Mx+""},Ux}var Tx=vx.grouping&&vx.thousands?pm(vx.grouping,vx.thousands):xm,kx=vx.currency,Sx=vx.decimal,Cx=vx.numerals?_m(vx.numerals):xm,zx=vx.percent||"%";return{format:bx,formatPrefix:function(Mx,Ux){var Ax=bx((Mx=Yl(Mx),Mx.type="f",Mx)),Yx=3*Math.max(-8,Math.min(8,Math.floor(um(Ux)/3))),Ex=Math.pow(10,-Yx),Px=vm[8+Yx/3];return function(Dx){return Ax(Ex*Dx)+Px}}}};Pl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var wm,Tm,km,Sm=function(vx){return Math.max(0,-um(Math.abs(vx)))},Cm=function(vx,bx){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(um(bx)/3)))-um(Math.abs(vx)))},zm=function(vx,bx){return vx=Math.abs(vx),bx=Math.abs(bx)-vx,Math.max(0,um(bx)-um(vx))+1},Mm={"-":"",_:" ",0:"0"},Um=/^\s*\d+/,Am=/^%/,Ym=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Yd({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||Tm("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||km("%Y-%m-%dT%H:%M:%S.%LZ"),Dd.prototype=Fd.prototype={constructor:Dd,has:function(vx){return"$"+vx in this},get:function(vx){return this["$"+vx]},set:function(vx,bx){return this["$"+vx]=bx,this},remove:function(vx){var bx="$"+vx;return bx in this&&delete this[bx]},clear:function(){for(var vx in this)"$"===vx[0]&&delete this[vx]},keys:function(){var vx=[];for(var bx in this)"$"===bx[0]&&vx.push(bx.slice(1));return vx},values:function(){var vx=[];for(var bx in this)"$"===bx[0]&&vx.push(this[bx]);return vx},entries:function(){var vx=[];for(var bx in this)"$"===bx[0]&&vx.push({key:bx.slice(1),value:this[bx]});return vx},size:function(){var vx=0;for(var bx in this)"$"===bx[0]&&++vx;return vx},empty:function(){for(var vx in this)if("$"===vx[0])return!1;return!0},each:function(vx){for(var bx in this)"$"===bx[0]&&vx(this[bx],bx.slice(1),this)}};var Em=Fd.prototype;Ld.prototype=function(xx,vx){var bx=new Ld;if(xx instanceof Ld)xx.each(function(kx){bx.add(kx)});else if(xx){var wx=-1,Tx=xx.length;if(null==vx)for(;++wx<Tx;)bx.add(xx[wx]);else for(;++wx<Tx;)bx.add(vx(xx[wx],wx,xx))}return bx}.prototype={constructor:Ld,has:Em.has,add:function(vx){return vx+="",this["$"+vx]=vx,this},remove:Em.remove,clear:Em.clear,values:Em.keys,size:Em.size,empty:Em.empty,each:Em.each};var Pm=Array.prototype,Dm=Pm.map,Fm=Pm.slice,Lm=function(vx,bx,wx){vx.prototype=bx.prototype=wx,wx.constructor=vx},Im=/^#([0-9a-f]{3})$/,Nm=/^#([0-9a-f]{6})$/,Om=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,$m=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,jm=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Vm=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Bm=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Zm=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Wm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Lm(qd,Id,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Lm(Vd,jd,Xd(qd,{brighter:function(vx){return vx=null==vx?1/.7:Math.pow(1/.7,vx),new Vd(this.r*vx,this.g*vx,this.b*vx,this.opacity)},darker:function(vx){return vx=null==vx?.7:Math.pow(.7,vx),new Vd(this.r*vx,this.g*vx,this.b*vx,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var vx=this.opacity;return vx=isNaN(vx)?1:Math.max(0,Math.min(1,vx)),(1===vx?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===vx?")":", "+vx+")")}})),Lm(Rd,function(xx,vx,bx,wx){return 1===arguments.length?Zd(xx):new Rd(xx,vx,bx,null==wx?1:wx)},Xd(qd,{brighter:function(vx){return vx=null==vx?1/.7:Math.pow(1/.7,vx),new Rd(this.h,this.s,this.l*vx,this.opacity)},darker:function(vx){return vx=null==vx?.7:Math.pow(.7,vx),new Rd(this.h,this.s,this.l*vx,this.opacity)},rgb:function(){var vx=this.h%360+360*(0>this.h),bx=isNaN(vx)||isNaN(this.s)?0:this.s,wx=this.l,Tx=wx+(.5>wx?wx:1-wx)*bx,kx=2*wx-Tx;return new Vd(Jd(240<=vx?vx-240:vx+120,kx,Tx),Jd(vx,kx,Tx),Jd(120>vx?vx+240:vx-120,kx,Tx),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Rm=Math.PI/180,Jm=180/Math.PI,Gm=.95047,Km=1,Qm=1.08883,eg=4/29,tg=6/29,ng=3*tg*tg,og=tg*tg*tg;Lm(Qd,function(xx,vx,bx,wx){return 1===arguments.length?Gd(xx):new Qd(xx,vx,bx,null==wx?1:wx)},Xd(qd,{brighter:function(vx){return new Qd(this.l+18*(null==vx?1:vx),this.a,this.b,this.opacity)},darker:function(vx){return new Qd(this.l-18*(null==vx?1:vx),this.a,this.b,this.opacity)},rgb:function(){var vx=(this.l+16)/116,bx=isNaN(this.a)?vx:vx+this.a/500,wx=isNaN(this.b)?vx:vx-this.b/200;return vx=Km*dc(vx),bx=Gm*dc(bx),wx=Qm*dc(wx),new Vd(pc(3.2404542*bx-1.5371385*vx-.4985314*wx),pc(-.969266*bx+1.8760108*vx+.041556*wx),pc(.0556434*bx-.2040259*vx+1.0572252*wx),this.opacity)}})),Lm(gc,function(xx,vx,bx,wx){return 1===arguments.length?hc(xx):new gc(xx,vx,bx,null==wx?1:wx)},Xd(qd,{brighter:function(vx){return new gc(this.h,this.c,this.l+18*(null==vx?1:vx),this.opacity)},darker:function(vx){return new gc(this.h,this.c,this.l-18*(null==vx?1:vx),this.opacity)},rgb:function(){return Gd(this).rgb()}}));var ag=-.14861,ig=1.78277,lg=-.29227,rg=-.90649,dg=1.97294,sg=dg*rg,cg=dg*ig,ug=ig*lg-rg*ag;Lm(xc,fc,Xd(qd,{brighter:function(vx){return vx=null==vx?1/.7:Math.pow(1/.7,vx),new xc(this.h,this.s,this.l*vx,this.opacity)},darker:function(vx){return vx=null==vx?.7:Math.pow(.7,vx),new xc(this.h,this.s,this.l*vx,this.opacity)},rgb:function(){var vx=isNaN(this.h)?0:(this.h+120)*Rm,bx=+this.l,wx=isNaN(this.s)?0:this.s*bx*(1-bx),Tx=Math.cos(vx),kx=Math.sin(vx);return new Vd(255*(bx+wx*(ag*Tx+ig*kx)),255*(bx+wx*(lg*Tx+rg*kx)),255*(bx+wx*(dg*Tx)),this.opacity)}}));var pg,_g,hg,mg,gg=function(vx){return function(){return vx}},yg=function xx(vx){function bx(Tx,kx){var Sx=wx((Tx=jd(Tx)).r,(kx=jd(kx)).r),Cx=wx(Tx.g,kx.g),zx=wx(Tx.b,kx.b),Mx=kc(Tx.opacity,kx.opacity);return function(Ux){return Tx.r=Sx(Ux),Tx.g=Cx(Ux),Tx.b=zx(Ux),Tx.opacity=Mx(Ux),Tx+""}}var wx=Tc(vx);return bx.gamma=xx,bx}(1),fg=function(vx,bx){var wx,Tx=bx?bx.length:0,kx=vx?Math.min(Tx,vx.length):0,Sx=Array(Tx),Cx=Array(Tx);for(wx=0;wx<kx;++wx)Sx[wx]=Sg(vx[wx],bx[wx]);for(;wx<Tx;++wx)Cx[wx]=bx[wx];return function(zx){for(wx=0;wx<kx;++wx)Cx[wx]=Sx[wx](zx);return Cx}},xg=function(vx,bx){var wx=new Date;return vx=+vx,bx-=vx,function(Tx){return wx.setTime(vx+bx*Tx),wx}},vg=function(vx,bx){return vx=+vx,bx-=vx,function(wx){return vx+bx*wx}},bg=function(vx,bx){var wx,Tx={},kx={};for(wx in null!==vx&&"object"==("undefined"===typeof vx?"undefined":babelHelpers.typeof(vx))||(vx={}),null!==bx&&"object"==("undefined"===typeof bx?"undefined":babelHelpers.typeof(bx))||(bx={}),bx)wx in vx?Tx[wx]=Sg(vx[wx],bx[wx]):kx[wx]=bx[wx];return function(Sx){for(wx in Tx)kx[wx]=Tx[wx](Sx);return kx}},wg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tg=new RegExp(wg.source,"g"),kg=function(vx,bx){var wx,Tx,kx,Sx=wg.lastIndex=Tg.lastIndex=0,Cx=-1,zx=[],Mx=[];for(vx+="",bx+="";(wx=wg.exec(vx))&&(Tx=Tg.exec(bx));)(kx=Tx.index)>Sx&&(kx=bx.slice(Sx,kx),zx[Cx]?zx[Cx]+=kx:zx[++Cx]=kx),(wx=wx[0])===(Tx=Tx[0])?zx[Cx]?zx[Cx]+=Tx:zx[++Cx]=Tx:(zx[++Cx]=null,Mx.push({i:Cx,x:vg(wx,Tx)})),Sx=Tg.lastIndex;return Sx<bx.length&&(kx=bx.slice(Sx),zx[Cx]?zx[Cx]+=kx:zx[++Cx]=kx),2>zx.length?Mx[0]?Cc(Mx[0].x):Sc(bx):(bx=Mx.length,function(Ux){for(var Ax,Yx=0;Yx<bx;++Yx)zx[(Ax=Mx[Yx]).i]=Ax.x(Ux);return zx.join("")})},Sg=function(vx,bx){var wx,Tx="undefined"===typeof bx?"undefined":babelHelpers.typeof(bx);return null==bx||"boolean"===Tx?gg(bx):("number"===Tx?vg:"string"===Tx?(wx=Id(bx))?(bx=wx,yg):kg:bx instanceof Id?yg:bx instanceof Date?xg:Array.isArray(bx)?fg:"function"!=typeof bx.valueOf&&"function"!=typeof bx.toString||isNaN(bx)?bg:vg)(vx,bx)},Cg=function(vx,bx){return vx=+vx,bx-=vx,function(wx){return Math.round(vx+bx*wx)}},zg=180/Math.PI,Mg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ug=function(vx,bx,wx,Tx,kx,Sx){var Cx,zx,Mx;return(Cx=Math.sqrt(vx*vx+bx*bx))&&(vx/=Cx,bx/=Cx),(Mx=vx*wx+bx*Tx)&&(wx-=vx*Mx,Tx-=bx*Mx),(zx=Math.sqrt(wx*wx+Tx*Tx))&&(wx/=zx,Tx/=zx,Mx/=zx),vx*Tx<bx*wx&&(vx=-vx,bx=-bx,Mx=-Mx,Cx=-Cx),{translateX:kx,translateY:Sx,rotate:Math.atan2(bx,vx)*zg,skewX:Math.atan(Mx)*zg,scaleX:Cx,scaleY:zx}},Ag=Uc(function(xx){return"none"===xx?Mg:(pg||(pg=document.createElement("DIV"),_g=document.documentElement,hg=document.defaultView),pg.style.transform=xx,xx=hg.getComputedStyle(_g.appendChild(pg),null).getPropertyValue("transform"),_g.removeChild(pg),xx=xx.slice(7,-1).split(","),Ug(+xx[0],+xx[1],+xx[2],+xx[3],+xx[4],+xx[5]))},"px, ","px)","deg)"),Yg=Uc(function(xx){return null==xx?Mg:(mg||(mg=document.createElementNS("http://www.w3.org/2000/svg","g")),mg.setAttribute("transform",xx),(xx=mg.transform.baseVal.consolidate())?(xx=xx.matrix,Ug(xx.a,xx.b,xx.c,xx.d,xx.e,xx.f)):Mg)},", ",")",")"),Eg=Math.SQRT2,Pg=function(vx,bx){var wx,Tx,kx=vx[0],Sx=vx[1],Cx=vx[2],zx=bx[0],Mx=bx[1],Ux=bx[2],Ax=zx-kx,Yx=Mx-Sx,Ex=Ax*Ax+Yx*Yx;if(1e-12>Ex)Tx=Math.log(Ux/Cx)/Eg,wx=function(qx){return[kx+qx*Ax,Sx+qx*Yx,Cx*Math.exp(Eg*qx*Tx)]};else{var Px=Math.sqrt(Ex),Dx=(Ux*Ux-Cx*Cx+4*Ex)/(2*(2*Cx)*Px),Fx=(Ux*Ux-Cx*Cx-4*Ex)/(2*(2*Ux)*Px),Lx=Math.log(Math.sqrt(Dx*Dx+1)-Dx),Hx=Math.log(Math.sqrt(Fx*Fx+1)-Fx);Tx=(Hx-Lx)/Eg,wx=function(qx){var Ix=qx*Tx,Xx=Ac(Lx),Nx=Cx/(2*Px)*(Xx*Ec(Eg*Ix+Lx)-Yc(Lx));return[kx+Nx*Ax,Sx+Nx*Yx,Cx*Xx/Ac(Eg*Ix+Lx)]}}return wx.duration=1e3*Tx,wx};Pc(function(xx,vx){var bx=vx-xx;return bx?vc(xx,180<bx||-180>bx?bx-360*Math.round(bx/360):bx):gg(isNaN(xx)?vx:xx)});var Dg=Pc(kc),Fg=function(vx){return function(){return vx}},Lg=function(vx){return+vx},Hg=[0,1],Xg=function(vx,bx,wx){var Tx,kx=vx[0],Sx=vx[vx.length-1],Cx=ol(kx,Sx,null==bx?10:bx);switch((wx=Yl(null==wx?",f":wx)).type){case"s":var zx=Math.max(Math.abs(kx),Math.abs(Sx));return null!=wx.precision||isNaN(Tx=Cm(Cx,zx))||(wx.precision=Tx),fm(wx,zx);case"":case"e":case"g":case"p":case"r":null!=wx.precision||isNaN(Tx=zm(Cx,Math.max(Math.abs(kx),Math.abs(Sx))))||(wx.precision=Tx-("e"===wx.type));break;case"f":case"%":null!=wx.precision||isNaN(Tx=Sm(Cx))||(wx.precision=Tx-2*("%"===wx.type));}return el.format(wx)},qg=function(vx,bx){var wx,Tx=0,kx=(vx=vx.slice()).length-1,Sx=vx[Tx],Cx=vx[kx];return Cx<Sx&&(wx=Tx,Tx=kx,kx=wx,wx=Sx,Sx=Cx,Cx=wx),vx[Tx]=bx.floor(Sx),vx[kx]=bx.ceil(Cx),vx},Ig=1e3,Ng=60*Ig,Og=60*Ng,$g=24*Og,jg=7*$g,Vg=30*$g,Bg=365*$g,Wg=function(vx){return vx.match(/.{6}/g).map(function(bx){return"#"+bx})};Wg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Wg("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Wg("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Wg("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Dg(fc(300,.5,0),fc(-240,.5,1)),Dg(fc(-100,.75,.35),fc(80,1.5,.8)),Dg(fc(260,.75,.35),fc(80,1.5,.8)),fc();var Rg=Array.prototype.slice,Jg=function(vx){return vx},Gg=1,Kg=2,Qg=3,ey=4,ty=1e-6,ny={value:function(){}};up.prototype=cp.prototype={constructor:up,on:function(vx,bx){var wx,Tx=this._,kx=pp(vx+"",Tx),Sx=-1,Cx=kx.length;{if(!(2>arguments.length)){if(null!=bx&&"function"!=typeof bx)throw new Error("invalid callback: "+bx);for(;++Sx<Cx;)if(wx=(vx=kx[Sx]).type)Tx[wx]=hp(Tx[wx],vx.name,bx);else if(null==bx)for(wx in Tx)Tx[wx]=hp(Tx[wx],vx.name,null);return this}for(;++Sx<Cx;)if((wx=(vx=kx[Sx]).type)&&(wx=_p(Tx[wx],vx.name)))return wx}},copy:function(){var vx={},bx=this._;for(var wx in bx)vx[wx]=bx[wx].slice();return new up(vx)},call:function(vx,bx){if(0<(wx=arguments.length-2))for(var wx,Tx,kx=Array(wx),Sx=0;Sx<wx;++Sx)kx[Sx]=arguments[Sx+2];if(!this._.hasOwnProperty(vx))throw new Error("unknown type: "+vx);for(Sx=0,wx=(Tx=this._[vx]).length;Sx<wx;++Sx)Tx[Sx].value.apply(bx,kx)},apply:function(vx,bx,wx){if(!this._.hasOwnProperty(vx))throw new Error("unknown type: "+vx);for(var Tx=this._[vx],kx=0,Sx=Tx.length;kx<Sx;++kx)Tx[kx].value.apply(bx,wx)}};var oy="http://www.w3.org/1999/xhtml",ay={svg:"http://www.w3.org/2000/svg",xhtml:oy,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},iy=function(vx){var bx=vx+="",wx=bx.indexOf(":");return 0<=wx&&"xmlns"!==(bx=vx.slice(0,wx))&&(vx=vx.slice(wx+1)),ay.hasOwnProperty(bx)?{space:ay[bx],local:vx}:vx},ly=function(vx){var bx=iy(vx);return(bx.local?gp:mp)(bx)},ry=function(vx){return function(){return this.matches(vx)}};if("undefined"!=typeof document){var dy=document.documentElement;if(!dy.matches){var sy=dy.webkitMatchesSelector||dy.msMatchesSelector||dy.mozMatchesSelector||dy.oMatchesSelector;ry=function(vx){return function(){return sy.call(this,vx)}}}}var cy=ry,uy={};el.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(uy={mouseenter:"mouseover",mouseleave:"mouseout"}));var _y=function(){for(var vx,bx=el.event;vx=bx.sourceEvent;)bx=vx;return bx},hy=function(vx,bx){var wx=vx.ownerSVGElement||vx;if(wx.createSVGPoint){var Tx=wx.createSVGPoint();return Tx.x=bx.clientX,Tx.y=bx.clientY,Tx=Tx.matrixTransform(vx.getScreenCTM().inverse()),[Tx.x,Tx.y]}var kx=vx.getBoundingClientRect();return[bx.clientX-kx.left-vx.clientLeft,bx.clientY-kx.top-vx.clientTop]},my=function(vx){var bx=_y();return bx.changedTouches&&(bx=bx.changedTouches[0]),hy(vx,bx)},gy=function(vx){return null==vx?Tp:function(){return this.querySelector(vx)}},fy=function(vx){return null==vx?kp:function(){return this.querySelectorAll(vx)}},by=function(vx){return Array(vx.length)};Sp.prototype={constructor:Sp,appendChild:function(vx){return this._parent.insertBefore(vx,this._next)},insertBefore:function(vx,bx){return this._parent.insertBefore(vx,bx)},querySelector:function(vx){return this._parent.querySelector(vx)},querySelectorAll:function(vx){return this._parent.querySelectorAll(vx)}};var Ty=function(vx){return function(){return vx}},ky="$",Hy=function(vx){return vx.ownerDocument&&vx.ownerDocument.defaultView||vx.document&&vx||vx.defaultView};jp.prototype={add:function(vx){0>this._names.indexOf(vx)&&(this._names.push(vx),this._node.setAttribute("class",this._names.join(" ")))},remove:function(vx){var bx=this._names.indexOf(vx);0<=bx&&(this._names.splice(bx,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(vx){return 0<=this._names.indexOf(vx)}};var Jy=[null];s_.prototype=c_.prototype={constructor:s_,select:function(vx){"function"!=typeof vx&&(vx=gy(vx));for(var bx=this._groups,wx=bx.length,Tx=Array(wx),kx=0;kx<wx;++kx)for(var Sx,Cx,zx=bx[kx],Mx=zx.length,Ux=Tx[kx]=Array(Mx),Ax=0;Ax<Mx;++Ax)(Sx=zx[Ax])&&(Cx=vx.call(Sx,Sx.__data__,Ax,zx))&&("__data__"in Sx&&(Cx.__data__=Sx.__data__),Ux[Ax]=Cx);return new s_(Tx,this._parents)},selectAll:function(vx){"function"!=typeof vx&&(vx=fy(vx));for(var bx=this._groups,wx=bx.length,Tx=[],kx=[],Sx=0;Sx<wx;++Sx)for(var Cx,zx=bx[Sx],Mx=zx.length,Ux=0;Ux<Mx;++Ux)(Cx=zx[Ux])&&(Tx.push(vx.call(Cx,Cx.__data__,Ux,zx)),kx.push(Cx));return new s_(Tx,kx)},filter:function(vx){"function"!=typeof vx&&(vx=cy(vx));for(var bx=this._groups,wx=bx.length,Tx=Array(wx),kx=0;kx<wx;++kx)for(var Sx,Cx=bx[kx],zx=Cx.length,Mx=Tx[kx]=[],Ux=0;Ux<zx;++Ux)(Sx=Cx[Ux])&&vx.call(Sx,Sx.__data__,Ux,Cx)&&Mx.push(Sx);return new s_(Tx,this._parents)},data:function(vx,bx){if(!vx)return Px=Array(this.size()),Ux=-1,this.each(function(Nx){Px[++Ux]=Nx}),Px;var wx=bx?zp:Cp,Tx=this._parents,kx=this._groups;"function"!=typeof vx&&(vx=Ty(vx));for(var Sx=kx.length,Cx=Array(Sx),zx=Array(Sx),Mx=Array(Sx),Ux=0;Ux<Sx;++Ux){var Ax=Tx[Ux],Yx=kx[Ux],Ex=Yx.length,Px=vx.call(Ax,Ax&&Ax.__data__,Ux,Tx),Dx=Px.length,Fx=zx[Ux]=Array(Dx),Lx=Cx[Ux]=Array(Dx);wx(Ax,Yx,Fx,Lx,Mx[Ux]=Array(Ex),Px,bx);for(var Hx,Xx,qx=0,Ix=0;qx<Dx;++qx)if(Hx=Fx[qx]){for(qx>=Ix&&(Ix=qx+1);!(Xx=Lx[Ix])&&++Ix<Dx;);Hx._next=Xx||null}}return Cx=new s_(Cx,Tx),Cx._enter=zx,Cx._exit=Mx,Cx},enter:function(){return new s_(this._enter||this._groups.map(by),this._parents)},exit:function(){return new s_(this._exit||this._groups.map(by),this._parents)},merge:function(vx){for(var bx=this._groups,wx=vx._groups,Tx=bx.length,kx=wx.length,Sx=Math.min(Tx,kx),Cx=Array(Tx),zx=0;zx<Sx;++zx)for(var Mx,Ux=bx[zx],Ax=wx[zx],Yx=Ux.length,Ex=Cx[zx]=Array(Yx),Px=0;Px<Yx;++Px)(Mx=Ux[Px]||Ax[Px])&&(Ex[Px]=Mx);for(;zx<Tx;++zx)Cx[zx]=bx[zx];return new s_(Cx,this._parents)},order:function(){for(var vx=this._groups,bx=-1,wx=vx.length;++bx<wx;)for(var Tx,kx=vx[bx],Sx=kx.length-1,Cx=kx[Sx];0<=--Sx;)(Tx=kx[Sx])&&(Cx&&Cx!==Tx.nextSibling&&Cx.parentNode.insertBefore(Tx,Cx),Cx=Tx);return this},sort:function(vx){function bx(Yx,Ex){return Yx&&Ex?vx(Yx.__data__,Ex.__data__):!Yx-!Ex}vx||(vx=Mp);for(var wx=this._groups,Tx=wx.length,kx=Array(Tx),Sx=0;Sx<Tx;++Sx){for(var Cx,zx=wx[Sx],Mx=zx.length,Ux=kx[Sx]=Array(Mx),Ax=0;Ax<Mx;++Ax)(Cx=zx[Ax])&&(Ux[Ax]=Cx);Ux.sort(bx)}return new s_(kx,this._parents).order()},call:function(){var vx=arguments[0];return arguments[0]=this,vx.apply(null,arguments),this},nodes:function(){var vx=Array(this.size()),bx=-1;return this.each(function(){vx[++bx]=this}),vx},node:function(){for(var vx=this._groups,bx=0,wx=vx.length;bx<wx;++bx)for(var Cx,Tx=vx[bx],kx=0,Sx=Tx.length;kx<Sx;++kx)if(Cx=Tx[kx],Cx)return Cx;return null},size:function(){var vx=0;return this.each(function(){++vx}),vx},empty:function(){return!this.node()},each:function(vx){for(var bx=this._groups,wx=0,Tx=bx.length;wx<Tx;++wx)for(var kx,Sx=bx[wx],Cx=0,zx=Sx.length;Cx<zx;++Cx)(kx=Sx[Cx])&&vx.call(kx,kx.__data__,Cx,Sx);return this},attr:function(vx,bx){var wx=iy(vx);if(2>arguments.length){var Tx=this.node();return wx.local?Tx.getAttributeNS(wx.space,wx.local):Tx.getAttribute(wx)}return this.each((null==bx?wx.local?Ap:Up:"function"==typeof bx?wx.local?Dp:Pp:wx.local?Ep:Yp)(wx,bx))},style:function(vx,bx,wx){return 1<arguments.length?this.each((null==bx?Fp:"function"==typeof bx?Hp:Lp)(vx,bx,null==wx?"":wx)):Xp(this.node(),vx)},property:function(vx,bx){return 1<arguments.length?this.each((null==bx?qp:"function"==typeof bx?Np:Ip)(vx,bx)):this.node()[vx]},classed:function(vx,bx){var wx=Op(vx+"");if(2>arguments.length){for(var Tx=$p(this.node()),kx=-1,Sx=wx.length;++kx<Sx;)if(!Tx.contains(wx[kx]))return!1;return!0}return this.each(("function"==typeof bx?Rp:bx?Zp:Wp)(wx,bx))},text:function(vx){return arguments.length?this.each(null==vx?Jp:("function"==typeof vx?Kp:Gp)(vx)):this.node().textContent},html:function(vx){return arguments.length?this.each(null==vx?Qp:("function"==typeof vx?t_:e_)(vx)):this.node().innerHTML},raise:function(){return this.each(n_)},lower:function(){return this.each(o_)},append:function(vx){var bx="function"==typeof vx?vx:ly(vx);return this.select(function(){return this.appendChild(bx.apply(this,arguments))})},insert:function(vx,bx){var wx="function"==typeof vx?vx:ly(vx),Tx=null==bx?a_:"function"==typeof bx?bx:gy(bx);return this.select(function(){return this.insertBefore(wx.apply(this,arguments),Tx.apply(this,arguments)||null)})},remove:function(){return this.each(i_)},datum:function(vx){return arguments.length?this.property("__data__",vx):this.node().__data__},on:function(vx,bx,wx){var Tx,kx,Sx=xp(vx+""),Cx=Sx.length;{if(!(2>arguments.length)){for(zx=bx?bp:vp,null==wx&&(wx=!1),Tx=0;Tx<Cx;++Tx)this.each(zx(Sx[Tx],bx,wx));return this}var zx=this.node().__on;if(zx)for(var Mx,Ux=0,Ax=zx.length;Ux<Ax;++Ux)for(Tx=0,Mx=zx[Ux];Tx<Cx;++Tx)if((kx=Sx[Tx]).type===Mx.type&&kx.name===Mx.name)return Mx.value}},dispatch:function(vx,bx){return this.each(("function"==typeof bx?d_:r_)(vx,bx))}};var Gy=function(vx){return"string"==typeof vx?new s_([[document.querySelector(vx)]],[document.documentElement]):new s_([[vx]],Jy)},Qy=function(vx,bx,wx){3>arguments.length&&(wx=bx,bx=_y().changedTouches);for(var Tx,kx=0,Sx=bx?bx.length:0;kx<Sx;++kx)if((Tx=bx[kx]).identifier===wx)return hy(vx,Tx);return null},ef=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},tf=function(vx){var bx=vx.document.documentElement,wx=Gy(vx).on("dragstart.drag",ef,!0);"onselectstart"in bx?wx.on("selectstart.drag",ef,!0):(bx.__noselect=bx.style.MozUserSelect,bx.style.MozUserSelect="none")},nf=function(vx){return function(){return vx}};__.prototype.on=function(){var xx=this._.on.apply(this._,arguments);return xx===this._?this:xx};var of,af,rf=0,df=0,sf=0,cf=1e3,uf=0,pf=0,_f=0,hf="object"==("undefined"===typeof performance?"undefined":babelHelpers.typeof(performance))&&performance.now?performance:Date,mf="function"==typeof requestAnimationFrame?requestAnimationFrame:function(xx){setTimeout(xx,17)};x_.prototype=v_.prototype={constructor:x_,restart:function(vx,bx,wx){if("function"!=typeof vx)throw new TypeError("callback is not a function");wx=(null==wx?y_():+wx)+(null==bx?0:+bx),this._next||af===this||(af?af._next=this:of=this,af=this),this._call=vx,this._time=wx,S_()},stop:function(){this._call&&(this._call=null,this._time=1/0,S_())}};var gf=function(vx,bx,wx){var Tx=new x_;return bx=null==bx?0:+bx,Tx.restart(function(kx){Tx.stop(),vx(kx+bx)},bx,wx),Tx},yf=cp("start","end","interrupt"),ff=[],xf=0,vf=1,bf=2,wf=3,Tf=4,kf=5,Sf=6,Cf=function(vx,bx,wx,Tx,kx,Sx){var Cx=vx.__transition;if(!Cx)vx.__transition={};else if(wx in Cx)return;U_(vx,wx,{name:bx,index:Tx,group:kx,on:yf,tween:ff,time:Sx.time,delay:Sx.delay,duration:Sx.duration,ease:Sx.ease,timer:null,state:xf})},zf=function(vx,bx){var wx,Tx,kx,Sx=vx.__transition,Cx=!0;if(Sx){for(kx in bx=null==bx?null:bx+"",Sx)(wx=Sx[kx]).name===bx?(Tx=wx.state>bf&&wx.state<kf,wx.state=Sf,wx.timer.stop(),Tx&&wx.on.call("interrupt",vx,vx.__data__,wx.index,wx.group),delete Sx[kx]):Cx=!1;Cx&&delete vx.__transition}},Af=function(vx,bx){var wx;return("number"==typeof bx?vg:bx instanceof Id?yg:(wx=Id(bx))?(bx=wx,yg):kg)(vx,bx)},Of=c_.prototype.constructor,Wf=0,Rf=c_.prototype;nh.prototype=function(xx){return c_().transition(xx)}.prototype={constructor:nh,select:function(vx){var bx=this._name,wx=this._id;"function"!=typeof vx&&(vx=gy(vx));for(var Tx=this._groups,kx=Tx.length,Sx=Array(kx),Cx=0;Cx<kx;++Cx)for(var zx,Mx,Ux=Tx[Cx],Ax=Ux.length,Yx=Sx[Cx]=Array(Ax),Ex=0;Ex<Ax;++Ex)(zx=Ux[Ex])&&(Mx=vx.call(zx,zx.__data__,Ex,Ux))&&("__data__"in zx&&(Mx.__data__=zx.__data__),Yx[Ex]=Mx,Cf(Yx[Ex],bx,wx,Ex,Yx,M_(zx,wx)));return new nh(Sx,this._parents,bx,wx)},selectAll:function(vx){var bx=this._name,wx=this._id;"function"!=typeof vx&&(vx=fy(vx));for(var Tx=this._groups,kx=Tx.length,Sx=[],Cx=[],zx=0;zx<kx;++zx)for(var Mx,Ux=Tx[zx],Ax=Ux.length,Yx=0;Yx<Ax;++Yx)if(Mx=Ux[Yx]){for(var Ex,Px=vx.call(Mx,Mx.__data__,Yx,Ux),Dx=M_(Mx,wx),Fx=0,Lx=Px.length;Fx<Lx;++Fx)(Ex=Px[Fx])&&Cf(Ex,bx,wx,Fx,Px,Dx);Sx.push(Px),Cx.push(Mx)}return new nh(Sx,Cx,bx,wx)},filter:function(vx){"function"!=typeof vx&&(vx=cy(vx));for(var bx=this._groups,wx=bx.length,Tx=Array(wx),kx=0;kx<wx;++kx)for(var Sx,Cx=bx[kx],zx=Cx.length,Mx=Tx[kx]=[],Ux=0;Ux<zx;++Ux)(Sx=Cx[Ux])&&vx.call(Sx,Sx.__data__,Ux,Cx)&&Mx.push(Sx);return new nh(Tx,this._parents,this._name,this._id)},merge:function(vx){if(vx._id!==this._id)throw new Error;for(var bx=this._groups,wx=vx._groups,Tx=bx.length,kx=wx.length,Sx=Math.min(Tx,kx),Cx=Array(Tx),zx=0;zx<Sx;++zx)for(var Mx,Ux=bx[zx],Ax=wx[zx],Yx=Ux.length,Ex=Cx[zx]=Array(Yx),Px=0;Px<Yx;++Px)(Mx=Ux[Px]||Ax[Px])&&(Ex[Px]=Mx);for(;zx<Tx;++zx)Cx[zx]=bx[zx];return new nh(Cx,this._parents,this._name,this._id)},selection:function(){return new Of(this._groups,this._parents)},transition:function(){for(var vx=this._name,bx=this._id,wx=ah(),Tx=this._groups,kx=Tx.length,Sx=0;Sx<kx;++Sx)for(var Cx,zx=Tx[Sx],Mx=zx.length,Ux=0;Ux<Mx;++Ux)if(Cx=zx[Ux]){var Ax=M_(Cx,bx);Cf(Cx,vx,wx,Ux,zx,{time:Ax.time+Ax.delay+Ax.duration,delay:0,duration:Ax.duration,ease:Ax.ease})}return new nh(Tx,this._parents,vx,wx)},call:Rf.call,nodes:Rf.nodes,node:Rf.node,size:Rf.size,empty:Rf.empty,each:Rf.each,on:function(vx,bx){var wx=this._id;return 2>arguments.length?M_(this.node(),wx).on.on(vx):this.each(Z_(wx,vx,bx))},attr:function(vx,bx){var wx=iy(vx),Tx="transform"===wx?Yg:Af;return this.attrTween(vx,"function"==typeof bx?(wx.local?X_:H_)(wx,Tx,E_(this,"attr."+vx,bx)):null==bx?(wx.local?D_:P_)(wx):(wx.local?L_:F_)(wx,Tx,bx+""))},attrTween:function(vx,bx){var wx="attr."+vx;if(2>arguments.length)return(wx=this.tween(wx))&&wx._value;if(null==bx)return this.tween(wx,null);if("function"!=typeof bx)throw new Error;var Tx=iy(vx);return this.tween(wx,(Tx.local?q_:I_)(Tx,bx))},style:function(vx,bx,wx){var Tx="transform"==(vx+="")?Ag:Af;return null==bx?this.styleTween(vx,R_(vx,Tx)).on("end.style."+vx,J_(vx)):this.styleTween(vx,"function"==typeof bx?K_(vx,Tx,E_(this,"style."+vx,bx)):G_(vx,Tx,bx+""),wx)},styleTween:function(vx,bx,wx){var Tx="style."+(vx+="");if(2>arguments.length)return(Tx=this.tween(Tx))&&Tx._value;if(null==bx)return this.tween(Tx,null);if("function"!=typeof bx)throw new Error;return this.tween(Tx,Q_(vx,bx,null==wx?"":wx))},text:function(vx){return this.tween("text","function"==typeof vx?th(E_(this,"text",vx)):eh(null==vx?"":vx+""))},remove:function(){return this.on("end.remove",W_(this._id))},tween:function(vx,bx){var wx=this._id;if(vx+="",2>arguments.length){for(var Tx,kx=M_(this.node(),wx).tween,Sx=0,Cx=kx.length;Sx<Cx;++Sx)if((Tx=kx[Sx]).name===vx)return Tx.value;return null}return this.each((null==bx?A_:Y_)(wx,vx,bx))},delay:function(vx){var bx=this._id;return arguments.length?this.each(("function"==typeof vx?N_:O_)(bx,vx)):M_(this.node(),bx).delay},duration:function(vx){var bx=this._id;return arguments.length?this.each(("function"==typeof vx?$_:j_)(bx,vx)):M_(this.node(),bx).duration},ease:function(vx){var bx=this._id;return arguments.length?this.each(V_(bx,vx)):M_(this.node(),bx).ease}},function xx(vx){function bx(wx){return Math.pow(wx,vx)}return vx=+vx,bx.exponent=xx,bx}(3),function xx(vx){function bx(wx){return 1-Math.pow(1-wx,vx)}return vx=+vx,bx.exponent=xx,bx}(3),function xx(vx){function bx(wx){return(1>=(wx*=2)?Math.pow(wx,vx):2-Math.pow(2-wx,vx))/2}return vx=+vx,bx.exponent=xx,bx}(3),function xx(vx){function bx(wx){return wx*wx*((vx+1)*wx-vx)}return vx=+vx,bx.overshoot=xx,bx}(1.70158),function xx(vx){function bx(wx){return--wx*wx*((vx+1)*wx+vx)+1}return vx=+vx,bx.overshoot=xx,bx}(1.70158),function xx(vx){function bx(wx){return(1>(wx*=2)?wx*wx*((vx+1)*wx-vx):(wx-=2)*wx*((vx+1)*wx+vx)+2)/2}return vx=+vx,bx.overshoot=xx,bx}(1.70158);var Jf=2*Math.PI,Gf=(function xx(vx,bx){function wx(kx){return vx*Math.pow(2,10*--kx)*Math.sin((Tx-kx)/bx)}var Tx=Math.asin(1/(vx=Math.max(1,vx)))*(bx/=Jf);return wx.amplitude=function(kx){return xx(kx,bx*Jf)},wx.period=function(kx){return xx(vx,kx)},wx}(1,.3),function xx(vx,bx){function wx(kx){return 1-vx*Math.pow(2,-10*(kx=+kx))*Math.sin((kx+Tx)/bx)}var Tx=Math.asin(1/(vx=Math.max(1,vx)))*(bx/=Jf);return wx.amplitude=function(kx){return xx(kx,bx*Jf)},wx.period=function(kx){return xx(vx,kx)},wx}(1,.3),function xx(vx,bx){function wx(kx){return(0>(kx=2*kx-1)?vx*Math.pow(2,10*kx)*Math.sin((Tx-kx)/bx):2-vx*Math.pow(2,-10*kx)*Math.sin((Tx+kx)/bx))/2}var Tx=Math.asin(1/(vx=Math.max(1,vx)))*(bx/=Jf);return wx.amplitude=function(kx){return xx(kx,bx*Jf)},wx.period=function(kx){return xx(vx,kx)},wx}(1,.3),{time:null,delay:0,duration:250,ease:function(xx){return(1>=(xx*=2)?xx*xx*xx:(xx-=2)*xx*xx+2)/2}});c_.prototype.interrupt=function(vx){return this.each(function(){zf(this,vx)})},c_.prototype.transition=function(vx){var bx,wx;vx instanceof nh?(bx=vx._id,vx=vx._name):(bx=ah(),(wx=Gf).time=y_(),vx=null==vx?null:vx+"");for(var Tx=this._groups,kx=Tx.length,Sx=0;Sx<kx;++Sx)for(var Cx,zx=Tx[Sx],Mx=zx.length,Ux=0;Ux<Mx;++Ux)(Cx=zx[Ux])&&Cf(Cx,vx,bx,Ux,zx,wx||lh(Cx,bx));return new nh(Tx,this._parents,vx,bx)};var Qf=function(vx){return function(){return vx}};dh.prototype={constructor:dh,scale:function(vx){return 1===vx?this:new dh(this.k*vx,this.x,this.y)},translate:function(vx,bx){return 0===vx&0===bx?this:new dh(this.k,this.x+this.k*vx,this.y+this.k*bx)},apply:function(vx){return[vx[0]*this.k+this.x,vx[1]*this.k+this.y]},applyX:function(vx){return vx*this.k+this.x},applyY:function(vx){return vx*this.k+this.y},invert:function(vx){return[(vx[0]-this.x)/this.k,(vx[1]-this.y)/this.k]},invertX:function(vx){return(vx-this.x)/this.k},invertY:function(vx){return(vx-this.y)/this.k},rescaleX:function(vx){return vx.copy().domain(vx.range().map(this.invertX,this).map(vx.invert,vx))},rescaleY:function(vx){return vx.copy().domain(vx.range().map(this.invertY,this).map(vx.invert,vx))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ex=new dh(1,0,0);sh.prototype=dh.prototype;var tx=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},ox=function(vx){return function(){return vx}},ax=function(vx,bx,wx){this.target=vx,this.type=bx,this.selection=wx},ix=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},lx={name:"drag"},rx={name:"space"},dx={name:"handle"},sx={name:"center"},cx={name:"x",handles:["e","w"].map(mh),input:function(vx,bx){return vx&&[[vx[0],bx[0][1]],[vx[1],bx[1][1]]]},output:function(vx){return vx&&[vx[0][0],vx[1][0]]}},ux={name:"y",handles:["n","s"].map(mh),input:function(vx,bx){return vx&&[[bx[0][0],vx[0]],[bx[1][0],vx[1]]]},output:function(vx){return vx&&[vx[0][1],vx[1][1]]}},px={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(mh),input:function(vx){return vx},output:function(vx){return vx}},_x={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hx={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mx={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gx={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yx={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};el.bisector=kh,el.extent=function(vx,bx){var wx,Tx,kx,Sx=vx.length,Cx=-1;if(null==bx){for(;++Cx<Sx;)if(null!=(wx=vx[Cx])&&wx>=wx)for(Tx=kx=wx;++Cx<Sx;)null!=(wx=vx[Cx])&&(Tx>wx&&(Tx=wx),kx<wx&&(kx=wx));}else for(;++Cx<Sx;)if(null!=(wx=bx(vx[Cx],Cx,vx))&&wx>=wx)for(Tx=kx=wx;++Cx<Sx;)null!=(wx=bx(vx[Cx],Cx,vx))&&(Tx>wx&&(Tx=wx),kx<wx&&(kx=wx));return[Tx,kx]},el.max=function(vx,bx){var wx,Tx,kx=vx.length,Sx=-1;if(null==bx){for(;++Sx<kx;)if(null!=(wx=vx[Sx])&&wx>=wx)for(Tx=wx;++Sx<kx;)null!=(wx=vx[Sx])&&wx>Tx&&(Tx=wx);}else for(;++Sx<kx;)if(null!=(wx=bx(vx[Sx],Sx,vx))&&wx>=wx)for(Tx=wx;++Sx<kx;)null!=(wx=bx(vx[Sx],Sx,vx))&&wx>Tx&&(Tx=wx);return Tx},el.min=function(vx,bx){var wx,Tx,kx=vx.length,Sx=-1;if(null==bx){for(;++Sx<kx;)if(null!=(wx=vx[Sx])&&wx>=wx)for(Tx=wx;++Sx<kx;)null!=(wx=vx[Sx])&&Tx>wx&&(Tx=wx);}else for(;++Sx<kx;)if(null!=(wx=bx(vx[Sx],Sx,vx))&&wx>=wx)for(Tx=wx;++Sx<kx;)null!=(wx=bx(vx[Sx],Sx,vx))&&Tx>wx&&(Tx=wx);return Tx},el.line=qh,el.area=function(){function vx(Ax){var Yx,Ex,Px,Dx,Fx,Lx=Ax.length,Hx=!1,Xx=Array(Lx),qx=Array(Lx);for(null==zx&&(Ux=Mx(Fx=il())),Yx=0;Yx<=Lx;++Yx){if(!(Yx<Lx&&Cx(Dx=Ax[Yx],Yx,Ax))===Hx)if(Hx=!Hx)Ex=Yx,Ux.areaStart(),Ux.lineStart();else{for(Ux.lineEnd(),Ux.lineStart(),Px=Yx-1;Px>=Ex;--Px)Ux.point(Xx[Px],qx[Px]);Ux.lineEnd(),Ux.areaEnd()}Hx&&(Xx[Yx]=+wx(Dx,Yx,Ax),qx[Yx]=+kx(Dx,Yx,Ax),Ux.point(Tx?+Tx(Dx,Yx,Ax):Xx[Yx],Sx?+Sx(Dx,Yx,Ax):qx[Yx]))}if(Fx)return Ux=null,Fx+""||null}function bx(){return qh().defined(Cx).curve(Mx).context(zx)}var wx=rl,Tx=null,kx=Lh(0),Sx=dl,Cx=Lh(!0),zx=null,Mx=Xh,Ux=null;return vx.x=function(Ax){return arguments.length?(wx="function"==typeof Ax?Ax:Lh(+Ax),Tx=null,vx):wx},vx.x0=function(Ax){return arguments.length?(wx="function"==typeof Ax?Ax:Lh(+Ax),vx):wx},vx.x1=function(Ax){return arguments.length?(Tx=null==Ax?null:"function"==typeof Ax?Ax:Lh(+Ax),vx):Tx},vx.y=function(Ax){return arguments.length?(kx="function"==typeof Ax?Ax:Lh(+Ax),Sx=null,vx):kx},vx.y0=function(Ax){return arguments.length?(kx="function"==typeof Ax?Ax:Lh(+Ax),vx):kx},vx.y1=function(Ax){return arguments.length?(Sx=null==Ax?null:"function"==typeof Ax?Ax:Lh(+Ax),vx):Sx},vx.lineX0=vx.lineY0=function(){return bx().x(wx).y(kx)},vx.lineY1=function(){return bx().x(wx).y(Sx)},vx.lineX1=function(){return bx().x(Tx).y(kx)},vx.defined=function(Ax){return arguments.length?(Cx="function"==typeof Ax?Ax:Lh(!!Ax),vx):Cx},vx.curve=function(Ax){return arguments.length?(Mx=Ax,null!=zx&&(Ux=Mx(zx)),vx):Mx},vx.context=function(Ax){return arguments.length?(null==Ax?zx=Ux=null:Ux=Mx(zx=Ax),vx):zx},vx},el.curveBasis=function(vx){return new cl(vx)},el.curveMonotoneX=function(xx){return new xl(xx)},el.curveNatural=function(vx){return new Tl(vx)},el.curveCardinal=Oh,el.curveCatmullRom=$h,el.curveStep=function(vx){return new Sl(vx,.5)},el.curveStepAfter=function(xx){return new Sl(xx,1)},el.curveStepBefore=function(xx){return new Sl(xx,0)},el.curveLinear=Xh,el.timeMillisecond=Wh,el.timeSecond=Gh,el.timeMinute=Kh,el.timeHour=Qh,el.timeDay=em,el.timeWeek=tm,el.timeMonth=om,el.timeYear=am,el.formatDefaultLocale=Pl,el.formatLocale=bm,el.timeFormatLocale=Hl,el.timeFormatDefaultLocale=Yd,el.scaleLinear=Oc,el.scaleLog=Rc,el.scalePow=Gc,el.scaleTime=function(){return ep(am,om,tm,em,Qh,Kh,Gh,Wh,el.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},el.axisRight=function(xx){return ip(Kg,xx)},el.axisTop=function(xx){return ip(Gg,xx)},el.axisBottom=function(xx){return ip(Qg,xx)},el.axisLeft=function(xx){return ip(ey,xx)},el.zoom=function(){function vx(Gx){Gx.on("wheel.zoom",Mx).on("mousedown.zoom",Ux).on("dblclick.zoom",Ax).on("touchstart.zoom",Yx).on("touchmove.zoom",Ex).on("touchend.zoom touchcancel.zoom",Px).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",_h)}function bx(Gx,Kx){return Kx=Math.max(Xx,Math.min(qx,Kx)),Kx===Gx.k?Gx:new dh(Kx,Gx.x,Gx.y)}function wx(Gx,Kx,Qx){var ev=Kx[0]-Qx[0]*Gx.k,tv=Kx[1]-Qx[1]*Gx.k;return ev===Gx.x&&tv===Gx.y?Gx:new dh(Gx.k,ev,tv)}function Tx(Gx,Kx){var Qx=Gx.invertX(Kx[0][0])-Ix,ev=Gx.invertX(Kx[1][0])-Nx,tv=Gx.invertY(Kx[0][1])-Ox,nv=Gx.invertY(Kx[1][1])-$x;return Gx.translate(ev>Qx?(Qx+ev)/2:Math.min(0,Qx)||Math.max(0,ev),nv>tv?(tv+nv)/2:Math.min(0,tv)||Math.max(0,nv))}function kx(Gx){return[(+Gx[0][0]+ +Gx[1][0])/2,(+Gx[0][1]+ +Gx[1][1])/2]}function Sx(Gx,Kx,Qx){Gx.on("start.zoom",function(){Cx(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){Cx(this,arguments).end()}).tween("zoom",function(){var ev=this,tv=arguments,nv=Cx(ev,tv),ov=Hx.apply(ev,tv),av=Qx||kx(ov),iv=Math.max(ov[1][0]-ov[0][0],ov[1][1]-ov[0][1]),lv=ev.__zoom,rv="function"==typeof Kx?Kx.apply(ev,tv):Kx,dv=Vx(lv.invert(av).concat(iv/lv.k),rv.invert(av).concat(iv/rv.k));return function(sv){if(1===sv)sv=rv;else{var cv=dv(sv),uv=iv/cv[2];sv=new dh(uv,av[0]-cv[0]*uv,av[1]-cv[1]*uv)}nv.zoom(null,sv)}})}function Cx(Gx,Kx){for(var Qx,ev=0,tv=Bx.length;ev<tv;++ev)if((Qx=Bx[ev]).that===Gx)return Qx;return new zx(Gx,Kx)}function zx(Gx,Kx){this.that=Gx,this.args=Kx,this.index=-1,this.active=0,this.extent=Hx.apply(Gx,Kx)}function Mx(){function Gx(){Kx.wheel=null,Kx.end()}if(Lx.apply(this,arguments)){var Kx=Cx(this,arguments),Qx=this.__zoom,ev=Math.max(Xx,Math.min(qx,Qx.k*Math.pow(2,-el.event.deltaY*(el.event.deltaMode?120:1)/500))),tv=my(this);if(Kx.wheel)Kx.mouse[0][0]===tv[0]&&Kx.mouse[0][1]===tv[1]||(Kx.mouse[1]=Qx.invert(Kx.mouse[0]=tv)),clearTimeout(Kx.wheel);else{if(Qx.k===ev)return;Kx.mouse=[tv,Qx.invert(tv)],zf(this),Kx.start()}tx(),Kx.wheel=setTimeout(Gx,Rx),Kx.zoom("mouse",Tx(wx(bx(Qx,ev),Kx.mouse[0],Kx.mouse[1]),Kx.extent))}}function Ux(){function Gx(){if(tx(),!Qx.moved){var av=el.event.clientX-nv,iv=el.event.clientY-ov;Qx.moved=av*av+iv*iv>Jx}Qx.zoom("mouse",Tx(wx(Qx.that.__zoom,Qx.mouse[0]=my(Qx.that),Qx.mouse[1]),Qx.extent))}function Kx(){ev.on("mousemove.zoom mouseup.zoom",null),p_(el.event.view,Qx.moved),tx(),Qx.end()}if(!Fx&&Lx.apply(this,arguments)){var Qx=Cx(this,arguments),ev=Gy(el.event.view).on("mousemove.zoom",Gx,!0).on("mouseup.zoom",Kx,!0),tv=my(this),nv=el.event.clientX,ov=el.event.clientY;tf(el.event.view),ch(),Qx.mouse=[tv,this.__zoom.invert(tv)],zf(this),Qx.start()}}function Ax(){if(Lx.apply(this,arguments)){var Gx=this.__zoom,Kx=my(this),Qx=Gx.invert(Kx),ev=Tx(wx(bx(Gx,Gx.k*(el.event.shiftKey?.5:2)),Kx,Qx),Hx.apply(this,arguments));tx(),0<jx?Gy(this).transition().duration(jx).call(Sx,ev,Kx):Gy(this).call(vx.transform,ev)}}function Yx(){if(Lx.apply(this,arguments)){var Gx,Kx,Qx,ev,tv=Cx(this,arguments),nv=el.event.changedTouches,ov=nv.length;for(ch(),Kx=0;Kx<ov;++Kx)Qx=nv[Kx],ev=[ev=Qy(this,nv,Qx.identifier),this.__zoom.invert(ev),Qx.identifier],tv.touch0?tv.touch1||(tv.touch1=ev):(tv.touch0=ev,Gx=!0);if(Dx&&(Dx=clearTimeout(Dx),!tv.touch1))return tv.end(),void((ev=Gy(this).on("dblclick.zoom"))&&ev.apply(this,arguments));Gx&&(Dx=setTimeout(function(){Dx=null},Wx),zf(this),tv.start())}}function Ex(){var Gx,Kx,Qx,ev,tv=Cx(this,arguments),nv=el.event.changedTouches,ov=nv.length;for(tx(),Dx&&(Dx=clearTimeout(Dx)),Gx=0;Gx<ov;++Gx)Kx=nv[Gx],Qx=Qy(this,nv,Kx.identifier),tv.touch0&&tv.touch0[2]===Kx.identifier?tv.touch0[0]=Qx:tv.touch1&&tv.touch1[2]===Kx.identifier&&(tv.touch1[0]=Qx);if(Kx=tv.that.__zoom,tv.touch1){var av=tv.touch0[0],iv=tv.touch0[1],lv=tv.touch1[0],rv=tv.touch1[1],dv=(dv=lv[0]-av[0])*dv+(dv=lv[1]-av[1])*dv,sv=(sv=rv[0]-iv[0])*sv+(sv=rv[1]-iv[1])*sv;Kx=bx(Kx,Math.sqrt(dv/sv)),Qx=[(av[0]+lv[0])/2,(av[1]+lv[1])/2],ev=[(iv[0]+rv[0])/2,(iv[1]+rv[1])/2]}else{if(!tv.touch0)return;Qx=tv.touch0[0],ev=tv.touch0[1]}tv.zoom("touch",Tx(wx(Kx,Qx,ev),tv.extent))}function Px(){var Gx,Kx,Qx=Cx(this,arguments),ev=el.event.changedTouches,tv=ev.length;for(ch(),Fx&&clearTimeout(Fx),Fx=setTimeout(function(){Fx=null},Wx),Gx=0;Gx<tv;++Gx)Kx=ev[Gx],Qx.touch0&&Qx.touch0[2]===Kx.identifier?delete Qx.touch0:Qx.touch1&&Qx.touch1[2]===Kx.identifier&&delete Qx.touch1;Qx.touch1&&!Qx.touch0&&(Qx.touch0=Qx.touch1,delete Qx.touch1),Qx.touch0?Qx.touch0[1]=this.__zoom.invert(Qx.touch0[0]):Qx.end()}var Dx,Fx,Lx=uh,Hx=ph,Xx=0,qx=1/0,Ix=-qx,Nx=qx,Ox=Ix,$x=Nx,jx=250,Vx=Pg,Bx=[],Zx=cp("start","zoom","end"),Wx=500,Rx=150,Jx=0;return vx.transform=function(Gx,Kx){var Qx=Gx.selection?Gx.selection():Gx;Qx.property("__zoom",_h),Gx===Qx?Qx.interrupt().each(function(){Cx(this,arguments).start().zoom(null,"function"==typeof Kx?Kx.apply(this,arguments):Kx).end()}):Sx(Gx,Kx)},vx.scaleBy=function(Gx,Kx){vx.scaleTo(Gx,function(){return this.__zoom.k*("function"==typeof Kx?Kx.apply(this,arguments):Kx)})},vx.scaleTo=function(Gx,Kx){vx.transform(Gx,function(){var Qx=Hx.apply(this,arguments),ev=this.__zoom,tv=kx(Qx),nv=ev.invert(tv);return Tx(wx(bx(ev,"function"==typeof Kx?Kx.apply(this,arguments):Kx),tv,nv),Qx)})},vx.translateBy=function(Gx,Kx,Qx){vx.transform(Gx,function(){return Tx(this.__zoom.translate("function"==typeof Kx?Kx.apply(this,arguments):Kx,"function"==typeof Qx?Qx.apply(this,arguments):Qx),Hx.apply(this,arguments))})},zx.prototype={start:function(){return 1==++this.active&&(this.index=Bx.push(this)-1,this.emit("start")),this},zoom:function(Kx,Qx){return this.mouse&&"mouse"!==Kx&&(this.mouse[1]=Qx.invert(this.mouse[0])),this.touch0&&"touch"!==Kx&&(this.touch0[1]=Qx.invert(this.touch0[0])),this.touch1&&"touch"!==Kx&&(this.touch1[1]=Qx.invert(this.touch1[0])),this.that.__zoom=Qx,this.emit("zoom"),this},end:function(){return 0==--this.active&&(Bx.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(Kx){wp(new rh(vx,Kx,this.that.__zoom),Zx.apply,Zx,[Kx,this.that,this.args])}},vx.filter=function(Gx){return arguments.length?(Lx="function"==typeof Gx?Gx:Qf(!!Gx),vx):Lx},vx.extent=function(Gx){return arguments.length?(Hx="function"==typeof Gx?Gx:Qf([[+Gx[0][0],+Gx[0][1]],[+Gx[1][0],+Gx[1][1]]]),vx):Hx},vx.scaleExtent=function(Gx){return arguments.length?(Xx=+Gx[0],qx=+Gx[1],vx):[Xx,qx]},vx.translateExtent=function(Gx){return arguments.length?(Ix=+Gx[0][0],Nx=+Gx[1][0],Ox=+Gx[0][1],$x=+Gx[1][1],vx):[[Ix,Ox],[Nx,$x]]},vx.duration=function(Gx){return arguments.length?(jx=+Gx,vx):jx},vx.interpolate=function(Gx){return arguments.length?(Vx=Gx,vx):Vx},vx.on=function(){var Gx=Zx.on.apply(Zx,arguments);return Gx===Zx?vx:Gx},vx.clickDistance=function(Gx){return arguments.length?(Jx=(Gx=+Gx)*Gx,vx):Math.sqrt(Jx)},vx},el.zoomIdentity=ex,el.zoomTransform=sh,el.drag=function(){function vx(qx){qx.on("mousedown.drag",bx).on("touchstart.drag",kx).on("touchmove.drag",Sx).on("touchend.drag touchcancel.drag",Cx).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function bx(){if(!Yx&&Ex.apply(this,arguments)){var qx=zx("mouse",Px.apply(this,arguments),my,this,arguments);qx&&(Gy(el.event.view).on("mousemove.drag",wx,!0).on("mouseup.drag",Tx,!0),tf(el.event.view),u_(),Ax=!1,Mx=el.event.clientX,Ux=el.event.clientY,qx("start"))}}function wx(){if(ef(),!Ax){var qx=el.event.clientX-Mx,Ix=el.event.clientY-Ux;Ax=qx*qx+Ix*Ix>Xx}Fx.mouse("drag")}function Tx(){Gy(el.event.view).on("mousemove.drag mouseup.drag",null),p_(el.event.view,Ax),ef(),Fx.mouse("end")}function kx(){if(Ex.apply(this,arguments)){var qx,Ix,Nx=el.event.changedTouches,Ox=Px.apply(this,arguments),$x=Nx.length;for(qx=0;qx<$x;++qx)(Ix=zx(Nx[qx].identifier,Ox,Qy,this,arguments))&&(u_(),Ix("start"))}}function Sx(){var qx,Ix,Nx=el.event.changedTouches,Ox=Nx.length;for(qx=0;qx<Ox;++qx)(Ix=Fx[Nx[qx].identifier])&&(ef(),Ix("drag"))}function Cx(){var qx,Ix,Nx=el.event.changedTouches,Ox=Nx.length;for(Yx&&clearTimeout(Yx),Yx=setTimeout(function(){Yx=null},500),qx=0;qx<Ox;++qx)(Ix=Fx[Nx[qx].identifier])&&(u_(),Ix("end"))}function zx(qx,Ix,Nx,Ox,$x){var jx,Vx,Bx,Zx=Nx(Ix,qx),Wx=Lx.copy();if(wp(new __(vx,"beforestart",jx,qx,Hx,Zx[0],Zx[1],0,0,Wx),function(){return null!=(el.event.subject=jx=Dx.apply(Ox,$x))&&(Vx=jx.x-Zx[0]||0,Bx=jx.y-Zx[1]||0,!0)}))return function Rx(Jx){var Gx,Kx=Zx;switch(Jx){case"start":Fx[qx]=Rx,Gx=Hx++;break;case"end":delete Fx[qx],--Hx;case"drag":Zx=Nx(Ix,qx),Gx=Hx;}wp(new __(vx,Jx,jx,qx,Gx,Zx[0]+Vx,Zx[1]+Bx,Zx[0]-Kx[0],Zx[1]-Kx[1],Wx),Wx.apply,Wx,[Jx,Ox,$x])}}var Mx,Ux,Ax,Yx,Ex=h_,Px=m_,Dx=g_,Fx={},Lx=cp("start","drag","end"),Hx=0,Xx=0;return vx.filter=function(qx){return arguments.length?(Ex="function"==typeof qx?qx:nf(!!qx),vx):Ex},vx.container=function(qx){return arguments.length?(Px="function"==typeof qx?qx:nf(qx),vx):Px},vx.subject=function(qx){return arguments.length?(Dx="function"==typeof qx?qx:nf(qx),vx):Dx},vx.on=function(){var qx=Lx.on.apply(Lx,arguments);return qx===Lx?vx:qx},vx.clickDistance=function(qx){return arguments.length?(Xx=(qx=+qx)*qx,vx):Math.sqrt(Xx)},vx},el.brush=function(){return wh(px)},el.brushX=function(){return wh(cx)},el.brushY=function(){return wh(ux)},el.mouse=my,el.select=Gy,el.selection=c_,el.selectAll=function(vx){return"string"==typeof vx?new s_([document.querySelectorAll(vx)],[document.documentElement]):new s_([null==vx?[]:vx],Jy)},el.selectorAll=fy,el.touch=Qy}(this.d3=this.d3||{});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_isFullscreen',value:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}},{key:'_getParent',value:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.nodeType==Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}},{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}},{key:'toggleFullscreen',value:function(f){f.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen(),this._resetZoom&&this._resetZoom(f)}},{key:'fullScreenChanged',value:function(){this._fullScreenChanged()}},{key:'_fullScreenChanged',value:function(){var f=this;requestAnimationFrame(function(){var g=f._isFullscreen(),h=f._getParent();g?(f.fullscreen=!0,f.style.position='fixed',f.style.top='0',f.style.left='0',f.style.right='0',f.style.bottom='0',f.style.zIndex='1000',f.style['border-radius']='0px',document.body.style.overflow='hidden',h&&h.classList.add('fullscreen')):(f.fullscreen=!1,f.style.position='',f.style.top='',f.style.left='',f.style.right='',f.style.bottom='',f.style.zIndex='',f.style['border-radius']='',document.body.style.overflow='',h&&h.classList.remove('fullscreen')),f.notifyResize&&f.notifyResize()})}},{key:'computeFullscreenIcon',value:function(f){return f?'fullscreen-exit':'fullscreen'}}],[{key:'properties',get:function(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}}]),c}(a)};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>var DeviceSVG=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_openedChanged',value:function(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}},{key:'open',value:function(d){this.setSvg(d.detail),this.opened=!0}},{key:'close',value:function(){this.opened=!1}},{key:'_srcChanged',value:function(d){d&&this._recentSrc!==d&&(this._recentSrc=d,this._fetch(d,'GET','include','xml').then(this._registerXML.bind(this)).catch(function(f){console.log(d,f)}))}},{key:'_registerXML',value:function(d){if(d&&d.documentElement){var f=document.importNode(d.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(f,this.$.svgContainer.firstChild),this._svg=d3.select(f).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var g=this._svg.attr('viewBox').split(' ');this._width=g[2]-g[0],this._height=g[3]-g[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}},{key:'_initialize',value:function(){var d=this;setTimeout(function(){d._selectableItemsChanged(),d._selectedItemsChanged(),d._exceedingChanged()},0)}},{key:'_initZoom',value:function(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}},{key:'_selectedItemsChanged',value:function(){var d=this.item,f=this.items;d&&Object.keys(d).length||f&&f.length?(!this.src&&(d&&d.svg&&d.svg.path?this.src=d.svg.path:0<f.length&&f[f.length-1].svg&&f[f.length-1].svg.path&&(this.src=f[f.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}},{key:'_exceedingChanged',value:function(){var d=this.exceeding;d&&d.length?(!this.src&&d[d.length-1].svg&&d[d.length-1].svg.path&&(this.src=d[d.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}},{key:'_initialChanged',value:function(d){this.src&&d&&this._resetZoom()}},{key:'_selectableItemsChanged',value:function(){if(this._mainG&&this._mainG.node&&this.src&&this.selectableItems&&this.selectableItems.items){var d=this;for(var f in this.selectableItems.items)this._mainG.selectAll(this.selectableItems.items[f]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',f).on('click',function(){d._zoomToElement(this),d._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==this.selectableItems.minZoom&&(this.minZoom=this.selectableItems.minZoom),void 0!==this.selectableItems.maxZoom&&(this.maxZoom=this.selectableItems.maxZoom),void 0!==this.selectableItems.zoomPartition&&(this.zoomPartition=this.selectableItems.zoomPartition),this._initZoom(),this._inialized=!0}}},{key:'_zoom',value:function(){this._mainG.attr('transform',d3.event.transform)}},{key:'_zoomToElement',value:function(d){if(void 0!==d&&this._svg.node()){var f=this._calcCenterZoom(d),g=d3.zoomIdentity.translate(f.x,f.y).scale(f.k);this._svg.node().__zoom=g,this._mainG.transition(300).attr('transform',g)}}},{key:'_selectSelected',value:function(){var d=this;requestAnimationFrame(function(){var f=d.multi?d.items||[]:[];d.item&&Object.keys(d.item).length&&-1===f.indexOf(d.item)&&f.push(d.item);var g;if(g=ShadyCSS&&!0===ShadyCSS.nativeShadow?d.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),g&&f&&f.length){for(var l,m,n,o=0;o<f.length;o++)if(f[o]&&f[o].color&&f[o].svg&&f[o].svg.selector&&g&&g.sheet&&g.sheet.cssRules&&g.sheet.insertRule){l=f[o].svg.selector.split(',');for(var p=0;p<l.length;p++){m=l[p]+'.'+d.selectedClass,n=!1;for(var q=0;q<g.sheet.cssRules.length;q++)g.sheet.cssRules[o].selectorText===m&&(n=!0);!1===n&&g.sheet.insertRule(m+' {\nfill: '+f[o].color+' !important;\n}',g.sheet.cssRules.length)}}d.updateStyles(),d.select(f,d.selectedClass)}})}},{key:'_selectExceeds',value:function(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}},{key:'select',value:function(d,f){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+f).classed(f,!1);var g,h=[];if(Array.isArray(d)){for(var l=0;l<d.length;l++)d[l].svg&&d[l].svg.selector&&h.push(d[l].svg.selector);h=h.join(',')}else h=d&&d.svg&&d.svg.selector?d.svg.selector:'';if(''===h||(g=this._mainG.selectAll(h)).classed(f,!0).empty())return void(this.opened&&this._resetZoom());var m,n=[],o=this;g.each(function(){m=this.getBoundingClientRect(),n[0]=(n[0]>m.left?m.left:n[0])||m.left,n[1]=(n[1]>m.top?m.top:n[1])||m.top,n[2]=(n[2]<m.right?m.right:n[2])||m.right,n[3]=(n[3]<m.bottom?m.bottom:n[3])||m.bottom}),m={left:n[0],top:n[1],height:n[3]-n[1],width:n[2]-n[0]},this.opened&&this._zoomToElement(m)}}},{key:'_calcCenterZoom',value:function(d){var f=this.getBoundingClientRect();if(void 0===f||void 0===d||0===f.height||0===f.width)return{x:0,y:0,k:1};var g,m,l=f.height/f.width;g=void 0===d.nodeType?d:d.getBoundingClientRect();var n=this._mainG.node().getBBox(),o=this._mainG.node().getBoundingClientRect(),p=n.width/o.width||1,q=(g.left-o.left)*p+n.x,r=(g.top-o.top)*p+n.y,s=this._height,u=this._width,v=this._ratio,w=this.zoomPartition;return m=l<v?Math.min(u/(w*g.width*p*l),s/(w*g.height*p)):Math.min(u/(w*g.width*p),u*l/(w*g.height*p)),m<this.minZoom?m=this.minZoom:m>this.maxZoom&&(m=this.maxZoom),l<v?(q=-m*q+(s/l-m*g.width*p)/2,r=-m*r+(s-m*g.height*p)/2):(q=-m*q+(u-m*g.width*p)/2,r=-m*r+(u*l-m*g.height*p)/2),isNaN(q)||isNaN(r)||isNaN(m)?{x:0,y:0,k:1}:{x:q,y:r,k:m}}},{key:'notifyResize',value:function(){this._resetZoom()}},{key:'_resetZoom',value:function(d){var f=this;d&&(d.preventDefault(),d.stopPropagation()),requestAnimationFrame(function(){if(f.opened&&f._mainG&&f._mainG.node&&f.src&&(f._mainG.selectAll('.clicked').classed('clicked',!1),!f.initiallyZoomToAll)){if(f.item&&Object.keys(f.item).length||f.items&&f.items.length)return void f._selectSelected();if(f.exceeding.length)return void f._selectExceeds();if(f.initial){var g;if(!(g=f._mainG.selectAll(f.initial)).empty())return void f.select([{svg:{selector:f.initial}}],'initial')}f._zoomToElement(f._mainG.node())}})}}],[{key:'is',get:function(){return'device-svg'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object},items:{type:Array},exceeding:{type:Array},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}},{key:'observers',get:function(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}}]),b}(WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)));customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_domainXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.domain(f)}},{key:'_domainYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.domain(f).nice()}},{key:'_rangeXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.range(f)}},{key:'_rangeYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.range(f).nice()}},{key:'_computeScaleFn',value:function(f,g,h){if(void 0!==f){var i='time'===f?d3.scaleTime():'ln'===f?d3.scaleLog().base(Math.E):'log'===f?d3.scaleLog().base(g||10):'log\u2082'===f?d3.scaleLog().base(2):'log\u2081\u2080'===f?d3.scaleLog().base(10):'\u221A'===f?d3.scalePow().exponent(0.5):'pow'===f?d3.scalePow().exponent(g||1):d3.scaleLinear();return'x'===h?(i.ticks(this.ticksX||10),this.domainX&&i.domain(this.domainX),this.rangeX&&i.range(this.rangeX)):'y'===h&&(i.ticks(this.ticksY||10),this.domainY&&i.domain(this.domainY),this.rangeY&&i.range(this.rangeY),i.nice()),i}}},{key:'_SCALE_USES_BASE',value:function(f){return'log'===f||'pow'===f}},{key:'_IS_LOG_SCALE',value:function(f){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(f)}}],[{key:'properties',get:function(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}},{key:'observers',get:function(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}},{key:'_VALID_SCALES',get:function(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return function(e){function f(){return babelHelpers.classCallCheck(this,f),babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this))}return babelHelpers.inherits(f,e),babelHelpers.createClass(f,[{key:'_rangeXChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeXChanged',this).call(this,j),j[1]&&(this.ticksX=Math.ceil(j[1]/60))}},{key:'_rangeYChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeYChanged',this).call(this,j),j[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.axisMargin)):this.ticksY=Math.ceil(j[0]/50))}},{key:'_computeAxisNode',value:function(j,k,l,n){if(void 0!==j){var o=this.axisColor||'';l=l||this.axisTitle||'';var p=this._isVertical(k);if(n&&n.node){var q=n.node();q&&q.parentElement&&q.parentElement.removeChild(q),n=null}var r=j.append('svg:g').classed('axis',!0).attr('orient',k).classed('y',p).classed('vertical',p).classed('x',!p).classed('expanded',!0).style('color',o);return r.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,r)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),r.append('svg:title').text(l),r.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,k)),r.node()._genitor=this,r.node()._axis=r,r._left=0,r._right=0,r._bottom=0,r._top=0,r}}},{key:'_updateAxisBrushGenerator',value:function(j,k,l){l=l||8;var n=[[0,0],[j[1],j[0]]];'left'===k?n[0][0]=-l:'right'===k?n[1][0]=l:'top'===k?n[0][1]=-l:'bottom'===k&&(n[1][1]=l),this.extent(n)}},{key:'_computeAxisGenerator',value:function(j,k,l,n){if(j&&void 0!==k&&void 0!==l){var o=this.tickSize||6;return('left'===j?d3.axisLeft(k):'right'===j?d3.axisRight(k):'top'===j?d3.axisTop(k):d3.axisBottom(k)).tickSize(o).tickFormat(this._computeFormatFn(l,n))}}},{key:'_setAxisProperties',value:function(j,k,l){j.classed('expanded',l),k.tickFormat(l?null:'')}},{key:'_removeAxes',value:function(){if(this.axisX&&this.axisX.node){var j=this.axisX.node();j&&j.parentElement&&j.parentElement.removeChild(j),this.axisX=null}if(this.axisY&&this.axisY.node){var j=this.axisY.node();j&&j.parentElement&&j.parentElement.removeChild(j),this.axisY=null}delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}},{key:'_toggleAxis',value:function(j){var k=j.classed('expanded');j.classed('expanded',!k),this.sizeChanged()}},{key:'_onAxisClicked',value:function(j){var k=this;this._activeToggleAxisJob&&clearTimeout(this._axisToggleAxisJob),this._activeToggleAxisJob=setTimeout(function(){k._toggleAxis(j),k._activeToggleAxisJob=null},300)}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault();'left'===j||'right'===j?(this.axisY._isBrushed=!1,this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.scaleX.domain(this.domainX),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}},{key:'_onAxisMouseover',value:function(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}},{key:'_onAxisMouseleave',value:function(){}},{key:'_onAxisDragStart',value:function(){d3.select(this).raise().classed('dragged',!0);var j=d3.select(this).classed('vertical');j?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}},{key:'_onAxisDragged',value:function(){var j=d3.select(this).classed('vertical'),k=0,l=0;j?k=(this._axis._left||0)+d3.event.x-this._startleft:l=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+k+','+l+')')}},{key:'_onAxisDragEnd',value:function(){d3.select(this).classed('dragged',!1);var n,j=d3.select(this).classed('vertical'),k=0,l=0,o=this._genitor;if(j){if(k=(this._axis._left||0)+d3.event.x-this._startleft,n=k>o.rangeX[1]/2?'right':'left',n!==o.axisOrientY)return o.axisGeneratorY=o._computeAxisGenerator(o.axisOrientY=n,o.scaleY,o.scalingY,o.scaleBaseY).ticks(o.ticksY).tickSize(o.tickSize).tickFormat(o.axisY.classed('expanded')?o._computeFormatFn(o.scalingY,o.scaleBaseY):''),o.axisY=o._computeAxisNode(o._axisInsertionPoint,n,o.item&&o.item.mount,o.axisY).classed('expanded',!0).call(o.axisGeneratorY),void o.sizeChanged();k=this._axis._left}else{if(l=(this._axis._top||0)+d3.event.y-this._starttop,n=l>o.rangeY[0]/2?'bottom':'top',n!==o.axisOrientX)return o.axisGeneratorX=o._computeAxisGenerator(o.axisOrientX=n,o.scaleX,o.scalingX,o.scaleBaseX).ticks(o.ticksX).tickFormat(o.axisX.classed('expanded')?o._computeFormatFn(o.scalingX,o.scaleBaseX):''),o.axisX=o._computeAxisNode(o._axisInsertionPoint,n,o.item&&o.item.mount,o.axisX).classed('expanded',!0).call(o.axisGeneratorX),void o.sizeChanged();l=this._axis._top}d3.select(this).attr('transform','translate('+k+','+l+')'),this._startleft=0,this._starttop=0}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){if('y'===j){var n=k.map(this.scaleY.invert,this.scaleY).sort(function(o,p){return o>p});this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)}else{var n=k.map(this.scaleX.invert,this.scaleX).sort(function(o,p){return o>p});this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)}this.redraw()}}}},{key:'_axisColorChanged',value:function(j){this.axisX&&this.axisX.style('color',j),this.axisY&&this.axisY.style('color',j)}},{key:'_isVertical',value:function(j){return'left'===j||'right'===j}},{key:'_computeFormatFn',value:function(j){return'time'===j?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}},{key:'sizeChanged',value:function(){}},{key:'redraw',value:function(){}},{key:'formatTime',value:function(j){return(d3.timeSecond(j)<j?this.timeFormat('.%L'):d3.timeMinute(j)<j?this.timeFormat(':%S'):d3.timeHour(j)<j?this.timeFormat('%H:%M'):d3.timeDay(j)<j?this.timeFormat('%X'):d3.timeMonth(j)<j?d3.timeWeek(j)<j?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(j)<j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeRange',value:function(j,k,l){var n=(k[1]-k[0]).valueOf()/l;return(100>n?this.timeFormat(':%S.%L'):500>n?this.timeFormat(':%M:%S.%L'):5E3>n?this.timeFormat(':%M:%S'):2E4>n?this.timeFormat('%H:%M:%S'):6E4>n?this.timeFormat('%H:%M'):36E5>n?this.timeFormat('%X'):864E5>n?this.timeFormat('%d.%m'):6048E5>n?this.timeFormat('%d.%m'):24192E5>n?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeAbsolute',value:function(j){var k=j%315576E5,l=(j-k)/315576E5,n=k%864E5,o=(k-n)/864E5,p=n%36E5,q=(n-p)/36E5,r=p%6E4,t=(p-r)/6E4,u=r%1E3,v=(r-u)/1E3,w='';return l&&(w+=l+'y '),o&&(w+=o+'d '),q&&(w+=q+'h '),t&&(w+=t+'m '),v&&(w+=v+'s '),u&&(w+=u+'ms'),w}},{key:'formatNumber',value:function(j){return this.numberFormat(',g')(j)}},{key:'formatIndicator',value:function(j,k){return j&&j.from&&j.to?k<j.from||k>j.to?'\u2717':'\u2713':k?'\u2717':'\u2713'}},{key:'_setDateNumberFormat',value:function(j,k){void 0===k||void 0===j||(k&&(this.localeDate=k,d3.timeFormatDefaultLocale(k),this.timeFormat=d3.timeFormatLocale(k).format),j&&(this.localeNumber=j,d3.formatDefaultLocale(j),this.numberFormat=d3.formatLocale(j).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}],[{key:'properties',get:function(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:24},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}},{key:'observers',get:function(){return['_setDateNumberFormat(localeNumber, localeDate)']}},{key:'_VALID_AXIS_POSITIONS',get:function(){return['top','right','bottom','bottom']}}]),f}(WebvisualMixins.ScaleMixin(c))};</script><dom-module id="device-graph"><template><style></style></template><script>var DeviceGraph=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isAttached=!1,c._chart=null,c._areaGenerator=d3.area().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y0(function(){return c.keys&&c.keys.y&&c._IS_LOG_SCALE(c.keys.y.scale)?c._chart._height:c.scaleY(0)}).y1(function(f){return c.scaleY(f.y)}),c._lineGenerator=d3.line().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y(function(f){return c.scaleY(f.y)}),c.bisectDate=d3.bisector(function(f,g){return f.x-g}),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-graph'}},{key:'properties',get:function(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3.75},viewLength:{type:Number,value:3e4},storeInside:{type:Boolean,value:!0,readOnly:!0},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}}]),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.item&&this.addNodes()}},{key:'disconnectedCallback',value:function(){this._isAttached=!1,babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.removeNodes()}},{key:'addNodes',value:function(){this._isAttached&&this.clearValues(!0);var f=this._containerRoot;return f&&'DEVICE-CHART'===f.nodeName?f._isAttached?void(this._chart=f,this._axisInsertionPoint=f._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',f)}},{key:'removeNodes',value:function(){var f;this.axisX&&(f=this.axisX.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this.axisY&&(f=this.axisY.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}},{key:'_areaChanged',value:function(f){if(this._chart&&this._chart._area)if(!!f)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var g=this._area.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._area=null}}},{key:'_lineChanged',value:function(f){if(this._chart&&this._chart._line)if(!!f)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var g=this._line.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._line=null}}},{key:'_thresholdChanged',value:function(f){if(this._chart&&this._chart._boundery)if(f)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){var g=this.boundery.node();g&&g.parentElement&&g.parentElement.removeChild(g),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.mount||'#000')}}},{key:'_setColorProperties',value:function(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}},{key:'_itemChanged',value:function(f){return this._isAttached?f&&f.mount?void this.addNodes():void this.removeNodes():void 0}},{key:'insertValues',value:function(f,g){if(void 0!==f){var g=g||(0<this.viewLength?this.viewLength:f.length);if(g&&(f=f.slice(f.length-g,f.length)),f.map(function(l){return{x:+l.x,y:+l.y,state:+l.state}}),this.storeInside){this.values=this.values.concat(f);var h=this.min(this.values,'x'),k=this.max(this.values,'x');void 0!==h&&void 0!==k&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(h<this._chart.domainX[0]&&this._chart.set('domainX',[h,this._chart.domainX[1]]),k>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],k])):this.set('domainX',[h,k])),h=this.min(this.values,'y'),k=this.max(this.values,'y'),void 0!==h&&void 0!==k&&(h===k&&(h--,k++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(h<this._chart.domainY[0]&&this._chart.set('domainY',[h,this._chart.domainY[1]]),k>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],k])):this.set('domainY',[h,k]))}this.renderInsertedValues(f)}}},{key:'spliceValues',value:function(f){for(var g=0;g<f.length;g++){for(var h=this.values.length-1;0<=h&&this.values[h].x!==f[g].x;h--);-1!==h&&this.values.splice(h,1)}this.redraw()}},{key:'renderInsertedValues',value:function(f){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var g;this._chart.domainX&&this._chart.domainX.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainX',this.domainX),g=!0),this._chart.domainY&&this._chart.domainY.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainY',this.domainY),g=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(g=!0),this.redraw(g,f)}}},{key:'sizeChanged',value:function(){this._isAttached&&this._chart.sizeChanged()}},{key:'redraw',value:function(f){if(this._isAttached){if(f)return void this._chart.redraw(!0);var h=this.values||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(h)),this.hasLine&&this._line.attr('d',this._lineGenerator(h)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var l,k=[],n=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',o=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',q=this.item.color||'#000';void 0!==this.item.threshold.from&&(l=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(k.push({o:l+'%',c:o}),k.push({o:l+'%',c:q}))),void 0!==this.item.threshold.to&&(l=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(k.push({o:l+'%',c:q}),k.push({o:l+'%',c:n})));var r=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(k);r.attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.enter().append('stop').attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.exit().remove()}}}},{key:'_getDomain',value:function(f,g){var h=this;return new Promise(function(k,l){var n='y'===f,o=n?h.scalingY:h.scalingX;h.requestRange(f).then(function(q){if(void 0!==q[0]&&void 0!==q[1]){n&&q[0]===q[1]&&(q[0]--,q[1]++);var r=h._IS_LOG_SCALE(o);if(r){var s=0<q[0]*q[1];s&&0>=q[0]&&(q[0]=Math.sign(q[1])*Number.EPSILON),s&&0>=q[1]&&(q[1]=Math.sign(q[0])*Number.EPSILON)}g&&('x'===f?h.set('domainX',q):'y'===f&&h.set('domainY',q))}k({domain:q,key:f})}).catch(function(q){l(q)})})}},{key:'_defined',value:function(f){return Number.isFinite(f.y)?0>=f.y&&this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?null:!0:null}},{key:'_closestPoint',value:function(f){function g(E){var F=h(new Date(E.x))-f[0],G=k(E.y)-f[1];return F*F+G*G}var h=this.scaleX,k=this.scaleY,l=this.values,n=h.invert(f[0]),o=Math.ceil(this._chart._width/l.length),q=Math.pow(Math.ceil(l.length/this._chart._width),2),r=this.bisectDate.left(l,n,0,l.length-1),s=g(l[r]),t=Math.sqrt(s)/q,u=h.invert(f[0]-t),w=this.bisectDate.left(l,u,0,r),z=2*r-w;0>w&&(w=0),z>l.length&&(z=l.length);var B,A=s,C=r;for(D=w;D<z;D+=o)(B=g(l[D]))<=A&&(r=D,A=B);C=r;for(var D=r+1;D<z&&D<r+o-1;D++)(B=g(l[D]))<=A&&(A=B,C=D);for(var D=r-1;D>w&&D>r-o+1;D--)(B=g(l[D]))<=A&&(A=B,C=D);return l[C]}},{key:'_closestInterpolatedPoint',value:function(f,g){function h(D){var E=D.x-f[0],F=D.y-f[1];return E*E+F*F}g=g||this._area.node()||this._line.node();for(var n,o,r,t,k=g.getTotalLength(),l=2*Math.ceil(k/this._chart._width/2),q=Infinity,s=0;s<=k;s+=l)(t=h(r=g.getPointAtLength(s)))<q&&(n=r,o=s,q=t);for(l/=2;0.5<l;){var u,w,z,A,B,C;0<=(z=o-l)&&(B=h(u=g.getPointAtLength(z)))<q?(n=u,o=z,q=B):(A=o+l)<=k&&(C=h(w=g.getPointAtLength(A)))<q?(n=w,o=A,q=C):l/=2}return n={x:this.scaleX(n.x),y:this.scaleY(n.y)},n.distance=Math.sqrt(q),n}},{key:'setColor',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'setColor',this).call(this,f),this._setColorProperties()}},{key:'clearValues',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'clearValues',this).call(this,f)}},{key:'_getStrokeColor',value:function(f){if(this.item.threshold)switch(f.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}},{key:'_lineWidthChanged',value:function(f){this._line&&this._line.attr&&this._line.attr('stroke-width',f)}},{key:'_interpolationChanged',value:function(f){var g;g='Basis Spline'===f?d3.curveBasis:'Monotoner Spline'===f?d3.curveMonotoneX:'Kubischer Spline'===f?d3.curveNatural:'Cardinaler Spline'===f?d3.curveCardinal:'Catmull-Rom-Spline'===f?d3.curveCatmullRom:'Stufe (mitte)'===f?d3.curveStep:'Stufe (davor)'===f?d3.curveStepAfter:'Stufe (danach)'===f?d3.curveStepBefore:d3.curveLinear,this._areaGenerator.curve(g),this._lineGenerator.curve(g),this.redraw()}},{key:'_onAxisClicked',value:function(f){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((f._isBrushed||this._isZoomed)&&this._chart._resetZoom())):void babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisClicked',this).call(this,f)}},{key:'_onAxisMouseover',value:function(f,g){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisMouseover',this).call(this,f,g),this._area&&this._area.raise(),this._line&&this._line.raise()}},{key:'_containerRoot',get:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.host||f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}}],[{key:'observers',get:function(){return['_itemChanged(item)','_lineChanged(hasLine)','_areaChanged(hasArea)','_thresholdChanged(item.threshold)']}}]),b}(WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:visible;font-family:inherit !important;}text{fill:currentColor;stroke:#000;stroke-width:0.2;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;}.grid{mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 200ms linear;}.axis:hover path{fill-opacity:0.2;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.8;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;mix-blend-mode:hard-light;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *:not(.dot),
      #delta > *:not(.dot){stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:exclusion;pointer-events:none;}#zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;stroke:#000;stroke-opacity:0.75;stroke-width:1px;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{color:var(--primary-text-color, #111);position:absolute;top:0;right:var(--control-right, 0px);display:flex;flex-direction:column;}.selectbox > select{opacity:1;}[hidden]{display:none !important;}</style><div id="svgContainer"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" on-click="_closeControl"><defs><marker id="arrowToLeft" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m 5.29167,-1.7197893 v 3.439581 L 0,2.6966667e-6 Z"></path></marker><marker id="arrowToRight" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m -5.2916667,-1.7197893 v 3.439581 L 3.3333333e-6,2.6966667e-6 Z"></path></marker><marker id="stub" markerWidth="5" markerHeight="5" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-1 -5 2 10"><path d="M0,0 m-1,-5 L1,-5 L1,5 L-1,5 z"></path><path d="M -2,0 M -5,-1 H 1 V 1 H -5 Z"></path></marker><filter x="0" y="0" width="1" height="1" id="solid"><feFlood flood-color="white"></feFlood><feComposite in="SourceGraphic"></feComposite></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" on-contextmenu="_resetZoom"></rect><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="√">√</option><option value="ln">ln</option><option value="log₂">log₂</option><option value="log₁₀">log₁₀</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div><div class="checkbox"><input type="checkbox" name="multiX" checked="{{multiAxesX::change}}">mehrere x-Achsen</div><div class="checkbox"><input type="checkbox" name="multiY" checked="{{multiAxesY::change}}">mehrere y-Achsen</div></iron-collapse><section id="control"><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>var DeviceChart=function(c){function f(){babelHelpers.classCallCheck(this,f);var h=babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return h._width=0,h._height=0,h._graphs=new Set,h}return babelHelpers.inherits(f,c),babelHelpers.createClass(f,null,[{key:'is',get:function(){return'device-chart'}},{key:'properties',get:function(){return{opened:{type:Boolean},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}}]),babelHelpers.createClass(f,[{key:'_localizeChanged',value:function(j){this.set('localeDate',j('date')),this.set('localeNumber',j('number'))}},{key:'_fireResize',value:function(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}},{key:'connectedCallback',value:function(){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'connectedCallback',this).call(this),this._buildLayout()}},{key:'_buildLayout',value:function(){var j=this;this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._controlcontent=d3.select(this.$.controlcontent),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',function(){j._activeHideInfoJob&&clearTimeout(j._activeHideInfoJob)},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([0.95,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',function(){j._debouncedHideInfo(j)},{passive:!0}).on('mousemove',function(){var k=d3.mouse(j._chart.node());requestAnimationFrame(function(){var l,n,o;if(j._graphs.forEach(function(u){if(u.values&&u.values.length){var v=u._closestPoint(k),w=Math.pow(k[0]-u.scaleX(v.x),2)+Math.pow(k[1]-u.scaleY(v.y),2);(void 0===o||w<o)&&(o=w,n=v,l=u)}}),n){var r='#fff';if(l.item.threshold)switch(n.state){case 1:r=l.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:r=l.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}j._focusedValue=n,j._focusedValue.g=l,j._focusedValue._left=j.multiAxesY?l.axisY._left:j.axisY._left,j._focusedValue._top=j.multiAxesX?l.axisX._top:j.axisX._top,j._focusDot.datum(n).attr('fill',r).attr('r',l.dotRadius),j._showInfo(),j._moveInfo(n)}else j._debouncedHideInfo()})},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[]),this._debouncedHideInfo(),this._fixedValue=null,this._focusedValue=null}},{key:'sizeChanged',value:function(){var j=this;this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(function(){j.sizeLayout()},0))}},{key:'sizeLayout',value:function(){function j(A,B){return'left'===A?(this._left=v,this._right=0,v-=B):'right'===A?(this._left=0,this._right=r,r+=B):(this._left=0,this._right=0),'top'===A?(this._bottom=0,this._top=o,o-=B):'bottom'===A?(this._bottom=u,this._top=0,u+=B):(this._bottom=0,this._top=0),!0}function k(A,B,C){return this._left+=this._right,this._top+=this._bottom,this._bottom=0,this._right=0,'right'===A?this._left+=B:'bottom'===A&&(this._top+=C),!0}var l=this;if(this.opened&&this._isAttached){var n=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===n.height||0===n.width)return void requestAnimationFrame(function(){l.sizeChanged()});this._debouncedHideInfo();var o=-2,r=1,u=1,v=-2,w=[];if(this._graphs.forEach(function(A){if(A._isAttached){if(!A.axisX.attr('hidden')){var B=A.axisX.classed('expanded')?A.axisSizeX:A.tickSize+A.axisMargin;w.push(j.call(A.axisX,A.axisOrientX,B))}if(!A.axisY.attr('hidden')){var B=A.axisY.classed('expanded')?A.axisSizeY:A.tickSize+A.axisMargin;w.push(j.call(A.axisY,A.axisOrientY,B))}}}),!this.axisX.attr('hidden')){var z=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.axisMargin;w.push(j.call(this.axisX,this.axisOrientX,z))}if(!this.axisY.attr('hidden')){var z=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.axisMargin;w.push(j.call(this.axisY,this.axisOrientY,z))}Promise.all(w).then(function(){var A=l.$.svg.getBoundingClientRect();l._width=Math.abs(A.width-Math.abs(v||0)-Math.abs(r||0)),l._height=Math.abs(A.height-Math.abs(u||0)-Math.abs(o||0)),l.set('rangeX',[0,l._width]),l.set('rangeY',[l._height,0]),l._zoom.attr('height',l._height).attr('width',l._width),l._zoomBehavior.translateExtent([[0,0],[l._width,l._height]]).extent([[0,0],[l._width,l._height]]);var B=[];l._graphs.forEach(function(C){C._isAttached&&(!C.axisX.attr('hidden')&&B.push(k.call(C.axisX,C.axisOrientX,l._width,l._height)),!C.axisY.attr('hidden')&&B.push(k.call(C.axisY,C.axisOrientY,l._width,l._height)))}),l.axisX.attr('hidden')||B.push(k.call(l.axisX,l.axisOrientX,l._width,l._height)),l.axisY.attr('hidden')||B.push(k.call(l.axisY,l.axisOrientY,l._width,l._height)),Promise.all(B).then(function(){l._chart._top=o,l._chart._right=r,l._chart._bottom=u,l._chart._left=v,l._control.transition(100).style('transform','translate('+-l._chart._right+'px,'+-l._chart._bottom+'px)'),l._controlcontent.transition(100).style('transform','translate('+-l._chart._right+'px,'+-l._chart._top+'px)'),l._chart.select('clipPath#clip rect').transition(100).attr('width',l._width).attr('height',l._height),l._chart.select('rect#plot').transition(100).attr('width',l._width).attr('height',l._height),l._chart.transition(100).attr('transform','translate('+(-l._chart._left||0)+','+(-l._chart._top||0)+')'),l._focusY.attr('y1',l._height),l._graphs.forEach(function(C){C._isAttached&&(!C.axisX.attr('hidden')&&(C.axisGeneratorX=C._computeAxisGenerator.call(C,C.axisOrientX,C.scaleX,C.scalingX,C.scaleBaseX).ticks(C.ticksX).tickSize(C.tickSize).tickFormat(C.axisX.classed('expanded')?C._computeFormatFn(C.scalingX,C.scaleBaseX):''),C._updateAxisBrushGenerator.call(C.axisBrushGeneratorX,l.rangeX,C.axisOrientX),C.axisX.select('.brush').raise().call(C.axisBrushGeneratorX),C.axisX.attr('transform','translate('+(C.axisX._left||0)+','+(C.axisX._top||0)+')')),!C.axisY.attr('hidden')&&(C.axisGeneratorY=C._computeAxisGenerator.call(C,C.axisOrientY,C.scaleY,C.scalingY,C.scaleBaseY).ticks(C.ticksY).tickSize(C.tickSize).tickFormat(C.axisY.classed('expanded')?C._computeFormatFn(C.scalingY,C.scaleBaseY):''),C._updateAxisBrushGenerator.call(C.axisBrushGeneratorY,l.rangeY,C.axisOrientY),C.axisY.select('.brush').raise().call(C.axisBrushGeneratorY),C.axisY.attr('transform','translate('+(C.axisY._left||0)+','+(C.axisY._top||0)+')')))}),l.axisX.attr('hidden')||(l.axisGeneratorX=l._computeAxisGenerator(l.axisOrientX,l.scaleX,l.scalingX,l.scaleBaseX).ticks(l.ticksX).tickSize(l.tickSize).tickFormat(l.axisX.classed('expanded')?l._computeFormatFn(l.scalingX,l.scaleBaseX):''),l._updateAxisBrushGenerator.call(l.axisBrushGeneratorX,l.rangeX,l.axisOrientX),l.axisX.select('.brush').raise().call(l.axisBrushGeneratorX),l.axisX.attr('transform','translate('+(l.axisX._left||0)+','+(l.axisX._top||0)+')')),l.axisY.attr('hidden')||(l.axisGeneratorY=l._computeAxisGenerator(l.axisOrientY,l.scaleY,l.scalingY,l.scaleBaseY).ticks(l.ticksY).tickSize(l.tickSize).tickFormat(l.axisY.classed('expanded')?l._computeFormatFn(l.scalingY,l.scaleBaseY):''),l._updateAxisBrushGenerator.call(l.axisBrushGeneratorY,l.rangeY,l.axisOrientY),l.axisY.select('.brush').raise().call(l.axisBrushGeneratorY),l.axisY.attr('transform','translate('+(l.axisY._left||0)+','+(l.axisY._top||0)+')')),l._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!l.domainX||!l.domainY||l.domainX.some(function(C){return void 0===C||null===C})||l.domainY.some(function(C){return void 0===C||null===C})?l.redraw(!0):l.redraw()})})}}},{key:'_redomain',value:function(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(function(j){j&&console.warn(j)}))}},{key:'redraw',value:function(j){var k=this;return this._isAttached?j?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(function(){k.axisX.attr('hidden')||k.axisX.transition(100).attr('transform','translate('+(k.axisX._left||0)+','+(k.axisX._top||0)+')').call(k.axisGeneratorX),k.axisY.attr('hidden')||k.axisY.transition(100).attr('transform','translate('+(k.axisY._left||0)+','+(k.axisY._top||0)+')').call(k.axisGeneratorY),k._graphs.forEach(function(l){l._isAttached&&(l.axisX.attr('hidden')?l.set('domainX',k.domainX):l.axisX.transition(100).attr('transform','translate('+(l.axisX._left||0)+','+(l.axisX._top||0)+')').call(l.axisGeneratorX),l.axisY.attr('hidden')?l.set('domainY',k.domainY):l.axisY.transition(100).attr('transform','translate('+(l.axisY._left||0)+','+(l.axisY._top||0)+')').call(l.axisGeneratorY),l.redraw())}),k._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),k._updateInfo()},0)):void 0}},{key:'_multiAxesChanged',value:function(j,k){if(this._isAttached){var l;this._graphs.forEach(function(n){n._isAttached&&(l=!j||null,n.axisX.attr('hidden',l),l=!k||null,n.axisY.attr('hidden',l))}),l=!!j||null,this.axisX.attr('hidden',l),l=!!k||null,this.axisY.attr('hidden',l),l=k||j?null:!0,this.axisX.select('.brush').attr('hidden',l),this.axisY.select('.brush').attr('hidden',l),this._redomain(),this.sizeChanged()}}},{key:'_addGraph',value:function(j){this._graphs.add(j),this.sizeChanged()}},{key:'_removeGraph',value:function(j){this._graphs.delete(j),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),j=null,this._fixedValue=null,this._focusedValue=null,this.sizeChanged()}},{key:'_getDomain',value:function(){var j=this;return new Promise(function(k,l){var n=[],o=[];j._graphs.forEach(function(r){n.push(r._getDomain('x',j.multiAxesX)),o.push(r._getDomain('y',j.multiAxesY))}),Promise.all(n).then(function(r){for(var u,v,w,z=0;z<r.length;z++)u=void 0===u||u>r[z].domain[0]?r[z].domain[0]:u,v=void 0===v||v<r[z].domain[1]?r[z].domain[1]:v;(void 0===u||void 0===v)&&k(),w=[u,v],j.set('domainX',w),j.scaleX.domain(w),!1===j.multiAxesX&&j._graphs.forEach(function(A){A.axisX._isBrushed=!1,A.set('domainX',w),A.scaleX.domain(w)}),Promise.all(o).then(function(A){for(var B,C,D,E=0;E<A.length;E++)B=void 0===B||B>A[E].domain[0]?A[E].domain[0]:B,C=void 0===C||C<A[E].domain[1]?A[E].domain[1]:C;(void 0===B||void 0===C)&&k(),D=[B,C],j.set('domainY',D),!1===j.multiAxesY&&j._graphs.forEach(function(F){F.axisY._isBrushed=!1,F.set('domainY',D)}),k()}).catch(function(A){l(A)})}).catch(function(r){l(r)})})}},{key:'insertValues',value:function(j){this._graphs.forEach(function(k){k&&k._isAttached&&k.item&&k.item.mount&&j[k.item.mount]&&k.insertValues(j[k.item.mount])})}},{key:'clearValues',value:function(){this._graphs.forEach(function(j){j&&j._isAttached&&j.clearValues()})}},{key:'_moveInfo',value:function(j){if(Number.isFinite(j.g.scaleY(j.y))){this._info.text(this.formatTime(+j.x)+' '+this.formatNumber(+j.y));var k=this._fixedValue;if(k){var l=Math.abs(k.x-j.x),n=Math.abs(k.y-j.y);this._infoDeltaX.text(this.formatTimeAbsolute(l)),this._infoDeltaY.text(this.formatNumber(n))}this._updateInfo()}}},{key:'_showInfo',value:function(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}},{key:'_showDelta',value:function(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}},{key:'_debouncedHideInfo',value:function(){var j=this;this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(function(){j._hideInfo(),j._activeHideInfoJob=null},750)}},{key:'_hideInfo',value:function(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}},{key:'_hideDelta',value:function(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}},{key:'_updateInfo',value:function(){if(this._focusedValue&&''!==this._info.attr('hidden')){var j=this._focusedValue,k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);if(k&&l){switch(this._alignText(this._info.node(),k,l,null,1.5*this._focusDot.attr('r')),this.modus){case'delta':var n=this._fixedValue;if(n&&n.x&&j.x!==n.x&&n.y&&j.y!==n.y){var o=n.g.scaleX(+n.x),r=n.g.scaleY(+n.y);this._deltaX.attr('x1',k).attr('x2',o),this._deltaY.attr('y1',l).attr('y2',r),r<l?(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(r+l)/2,null,null,null,'middle')):(this._deltaY.attr('x1',o).attr('x2',o),this._alignText(this._infoDeltaY.node(),o,(r+l)/2,null,null,null,'middle')),r<l||o<k?(this._deltaX.attr('y1',r).attr('y2',r),this._alignText(this._infoDeltaX.node(),(o+k)/2,r,null,null,null,'middle')):(this._deltaX.attr('y1',l).attr('y2',l),this._alignText(this._infoDeltaX.node(),(o+k)/2,l,null,null,null,'middle')),this._deltaDot.attr('cy',r).attr('cx',o)}else this._hideDelta();case'integral':default:this._focusX.attr('x1',j._left).attr('x2',k).attr('y2',l).attr('y1',l),this._focusY.attr('y1',j._top).attr('y2',l).attr('x2',k).attr('x1',k),this._focusDot.attr('cy',l).attr('cx',k);}this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}},{key:'_alignText',value:function(j,k,l,n,o,r,u){n=n||0,o=o||0;var v=j.getBBox(),w=this._height,z=this._width,r=r||'middle',u=u||'ideographic',A=n,B=o;'middle'===r?A+=v.width/2:'end '===r?A+=v.width:void 0,'ideographic'===u?B+=v.height:'middle'===u?B+=v.height/2:'hanging'===u?B-=v.height:void 0,0>=l-B?u='hanging':l+B>w&&(l=w-B),k+A>=z?r='end':0>=k-A&&(r='start'),j.setAttribute('x',k+n),j.setAttribute('y',l-o),j.setAttribute('text-anchor',r),j.setAttribute('alignment-baseline',u)}},{key:'_modusChanged',value:function(j){switch(j){case'zoom':break;case'delta':break;case'integral':break;default:}this._fixedValue=null,this._focusedValue=null}},{key:'_dotClicked',value:function(j){switch(this.modus){case'zoom':var k=this._zoom.node().__zoom,l=j.g.scaleX(+j.x)-this._width/6,n=(j.g.scaleY(+j.y)||0)-this._height/6,o=3*k.k;n=(k.y-n)/k.k,l=(k.x-l)/k.k,this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(o).translate(l,n));break;case'delta':var r=this._fixedValue;r&&r.x&&r.y&&r.x===j.x&&r.y===j.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=j,this._deltaDot.datum(this._fixedValue).attr('cx',function(u){return u.g.scaleX(u.x)}).attr('cy',function(u){return u.g.scaleY(u.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}},{key:'closeMenu',value:function(){this.showMenu=!1}},{key:'changeInterpolation',value:function(j){this._graphs.forEach(function(l){l&&l._isAttached&&l.set('interpolation',j)})}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){if(!this.multiAxesY&&!this.multiAxesX)return'x'===j&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===j&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));var l='y'===j;if(l){var n=k.map(this.scaleY.invert,this.scaleY).sort(function(w,z){return w>z});this._graphs.forEach(function(w){w.scaleY.domain(n).nice(),w.axisGeneratorY.scale(w.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null);var o=this._zoom.node().__zoom,r=o.k*this._height/(k[1]-k[0]),u=(o.y-k[0])/o.k;this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(r).translate(0,u))}if(!l){var n=k.map(this.scaleX.invert,this.scaleX).sort(function(w,z){return w>z});this._graphs.forEach(function(w){w.scaleX.domain(n),w.axisGeneratorX.scale(w.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null);var o=this._zoom.node().__zoom,r=o.k*this._width/(k[1]-k[0]),v=(o.x-k[0])/o.k;this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(r).translate(v,0))}this._graphs.forEach(function(w){w.redraw()}),this._updateInfo()}}}},{key:'_onZoomed',value:function(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var j=d3.event.transform;if(this.domainX&&this.domainY){var n,k=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),l=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());this.multiAxesX||(n=k.domain(),this._graphs.forEach(function(o){o.scaleX.domain(n),o.axisGeneratorX.scale(o.scaleX)}),this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.multiAxesY||(n=l.domain(),this._graphs.forEach(function(o){o.scaleY.domain(n),o.axisGeneratorY.scale(o.scaleY)}),this.scaleY.domain(n),this.axisY.call(this.axisGeneratorY.scale(l))),this._graphs.forEach(function(o){o.redraw()}),this._isZoomed=1!==j.k||0!==j.x||0!==j.y,this._updateInfo()}}}},{key:'_onAxisClicked',value:function(j){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((j._isBrushed||this._isZoomed)&&this._resetZoom())):void babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_onAxisClicked',this).call(this,j)}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_onAxisContextMenu',this).call(this,j),this._debouncedHideInfo()}},{key:'_closeControl',value:function(){this.showControl=!1}},{key:'_resetZoom',value:function(j){d3.event?d3.event.preventDefault():j&&j.preventDefault&&j.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.transition().duration(200).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(function(k){k.axisX._isBrushed=!1,k.axisY._isBrushed=!1,k.scaleX.domain(k.domainX),k.scaleY.domain(k.domainY),k.axisX.call(k.axisGeneratorX.scale(k.scaleX)),k.axisY.call(k.axisGeneratorY.scale(k.scaleY))}),this._hideInfo(),this._redomain()}},{key:'_self',get:function(){return this}}],[{key:'observers',get:function(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}}]),f}(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))));customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>