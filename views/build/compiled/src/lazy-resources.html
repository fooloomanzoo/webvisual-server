<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(b){this.selection.slice().forEach(function(c){(!b||0>b.indexOf(c))&&this.setItemSelected(c,!1)},this)},isSelected:function(b){return 0<=this.selection.indexOf(b)},setItemSelected:function(b,c){if(null!=b&&c!==this.isSelected(b)){if(c)this.selection.push(b);else{var d=this.selection.indexOf(b);0<=d&&this.selection.splice(d,1)}this.selectCallback&&this.selectCallback(b,c)}},select:function(b){this.multi?this.toggle(b):this.get()!==b&&(this.setItemSelected(this.get(),!1),this.setItemSelected(b,!0))},toggle:function(b){this.setItemSelected(b,!this.isSelected(b))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(b){return this.items.indexOf(b)},select:function(b){this.selected=b},selectPrevious:function(){var b=this.items.length,c=(+this._valueToIndex(this.selected)-1+b)%b;this.selected=this._indexToValue(c)},selectNext:function(){var b=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(b)},selectIndex:function(b){this.select(this._indexToValue(b))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(b){this.listen(this,b,'_activateHandler')},_removeListener:function(b){this.unlisten(this,b,'_activateHandler')},_activateEventChanged:function(b,c){this._removeListener(c),this._addListener(b)},_updateItems:function(){var b=Polymer.dom(this).queryDistributedElements(this.selectable||'*');b=Array.prototype.filter.call(b,this._bindFilterItem),this._setItems(b)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var c=this._valueToItem(this.selected);c?this._selection.select(c):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(b){return!this._excludedLocalNames[b.localName]},_valueToItem:function(b){return null==b?null:this.items[this._valueToIndex(b)]},_valueToIndex:function(b){if(this.attrForSelected){for(var d,c=0;d=this.items[c];c++)if(this._valueForItem(d)==b)return c;}else return+b},_indexToValue:function(b){if(this.attrForSelected){var c=this.items[b];if(c)return this._valueForItem(c)}else return b},_valueForItem:function(b){if(!b)return null;var c=b[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?b.getAttribute(this.attrForSelected):c},_applySelection:function(b,c){this.selectedClass&&this.toggleClass(this.selectedClass,c,b),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,c,b),this._selectionChange(),this.fire('iron-'+(c?'select':'deselect'),{item:b})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(b){return Polymer.dom(b).observeNodes(function(c){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',c,{bubbles:!1,cancelable:!1})})},_activateHandler:function(b){for(var f,c=b.target,d=this.items;c&&c!=this;){if(f=d.indexOf(c),0<=f){var g=this._indexToValue(f);return void this._itemActivate(g,c)}c=c.parentNode}},_itemActivate:function(b,c){this.fire('iron-activate',{selected:b,item:c},{cancelable:!0}).defaultPrevented||this.select(b)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(b){this.multi?this._toggleSelected(b):this.selected=b},multiChanged:function(b){this._selection.multi=b,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(b){return this._indexToValue(this.indexOf(b))},this).filter(function(b){return null!=b},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(b){b=b||[];var c=(this._valuesToItems(b)||[]).filter(function(f){return null!==f&&f!==void 0});this._selection.clear(c);for(var d=0;d<c.length;d++)this._selection.setItemSelected(c[d],!0);if(this.fallbackSelection&&!this._selection.get().length){var e=this._valueToItem(this.fallbackSelection);e&&this.select(this.fallbackSelection)}},_selectionChange:function(){var b=this._selection.get();this.multi?(this._setSelectedItems(b),this._setSelectedItem(b.length?b[0]:null)):null!==b&&b!==void 0?(this._setSelectedItems([b]),this._setSelectedItem(b)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(b){var c=this.selectedValues.indexOf(b);0>c?this.push('selectedValues',b):this.splice('selectedValues',c,1)},_valuesToItems:function(b){return null==b?null:b.map(function(c){return this._valueToItem(c)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var b=this.query;b&&(!this.full&&'('!==b[0]&&(b='('+b+')'),this._mq=window.matchMedia(b),this._add(),this.queryHandler(this._mq))},queryHandler:function(b){this._setQueryMatches(b.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>var TabsOverlay=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._lastTarget=void 0,c._transitionsInFlight=[],c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tabs-overlay'}},{key:'properties',get:function(){return{target:{type:Object,observer:'_targetChanged'}}}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('transitionend',function(f){return d._onTransitionend(f)})}},{key:'_targetChanged',value:function(d,f){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(f,d),this._lastTarget=this.target)}},{key:'_onTransitionend',value:function(d){var f=this._transitionsInFlight.indexOf(d.propertyName);0<=f&&this._transitionsInFlight.splice(f,1),this._transitionsInFlight.length||this._moveComplete()}},{key:'_moveComplete',value:function(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}},{key:'_move',value:function(d,f){var g=this,h=d||f,j=f||d;if(h||j){var k=d?1:0,l=f?1:0;Polymer.dom.flush();var m=this.getBoundingClientRect(),n=window.getComputedStyle(this),o=h.getBoundingClientRect(),p=j.getBoundingClientRect();if(0===p.top&&0===p.right&&0===p.bottom&&0===p.left&&0===p.width&&0===p.height)return this.style.transitionProperty='none',this.style.opacity=l,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';var q=parseFloat(n.top||'0')+(o.top-m.top),r=parseFloat(n.right||'0')-(o.right-m.right),s=parseFloat(n.bottom||'0')-(o.bottom-m.bottom),t=parseFloat(n.left||'0')+(o.left-m.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';var u=[this.style.top=q+'px',this.style.right=r+'px',this.style.bottom=s+'px',this.style.left=t+'px',this.style.opacity=k+''];q+=p.top-o.top,r-=p.right-o.right,s-=p.bottom-o.bottom,t+=p.left-o.left;var v=[0.2,0.2,0.2,0.2,0.2],w=[0,0,0,0,0];o.left<p.left&&o.right<p.right?w[3]=0.1:o.left>p.left&&o.right>p.right&&(w[1]=0.1),o.top<p.top&&o.bottom<p.bottom?w[0]=0.1:o.top>p.top&&o.bottom>p.bottom&&(w[2]=0.1);for(var y=[q+'px',r+'px',s+'px',t+'px',l+''],z=['top','right','bottom','left','opacity'],A=0;A<u.length;A++)u[A]!==y[A]&&(0===v[A]&&0===w[A]||this._transitionsInFlight.push(z[A]));requestAnimationFrame(function(){g.style.transitionDuration=v.map(function(B){return B+'s'}).join(', '),g.style.transitionDelay=w.map(function(B){return B+'s'}).join(', '),g.style.top=q+'px',g.style.right=r+'px',g.style.bottom=s+'px',g.style.left=t+'px',g.style.opacity=l+''})}}}]),b}(Polymer.Element);customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>var TabsContainer=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addScrollListeners()}},{key:'_addScrollListeners',value:function(){var d=this;this.$.container.addEventListener('scroll',function(f){return d._onScroll(f)},{passive:!0}),this.$.container.addEventListener('wheel',function(f){return d._onWheel(f)},{passive:!0})}},{key:'_onSelectedItemChanged',value:function(d){var f=this;d&&(!this.multi&&(this.$.overlay.target=d),requestAnimationFrame(function(){f.vertical?f.$.container.scrollTop=d.offsetTop-f.$.container.offsetTop-f.$.container.clientHeight/2+d.clientHeight/2:f.$.container.scrollLeft=d.offsetLeft-f.$.container.offsetLeft-f.$.container.clientWidth/2+d.clientWidth/2}))}},{key:'_onWheel',value:function(d){if(d){var f,g;switch(d.deltaMode){case 0:g=0.2;break;case 1:g=20;break;case 2:g=this.$.container.offsetHeight;break;default:g=1;}this.vertical?(f=d.deltaY||0,this.$.container.scrollTop+=f*g):(f=d.deltaX||0,this.$.container.scrollLeft+=f*g)}}},{key:'_onScroll',value:function(d,f){d.stopImmediatePropagation();var g;this.vertical?(g=f&&-f.ddy||0,this.$.container.scrollTop+=g):(g=f&&-f.ddx||0,this.$.container.scrollLeft+=g)}},{key:'reset',value:function(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}],[{key:'is',get:function(){return'tabs-container'}},{key:'properties',get:function(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_onSelectedItemChanged(selectedItem)']}}]),b}(Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element));customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(b){Polymer.IronButtonStateImpl._downHandler.call(this,b),this.pressed&&this.ensureRipple(b)},ensureRipple:function(b){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var c=this._rippleContainer||this.root;if(c&&Polymer.dom(c).appendChild(this._ripple),b){var d=Polymer.dom(this._rippleContainer||this),e=Polymer.dom(b).rootTarget;d.deepContains(e)&&this._ripple.uiDownAction(b)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(b){this.hasRipple()&&(this._ripple.noink=b)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>var RippleContainer=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isDown=!1,c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'ripple-container'}}]),babelHelpers.createClass(b,[{key:'ready',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this.addEventListener('focus',function(f){return d._onFocus(f)},!0),this.addEventListener('blur',function(f){return d._onBlur(f)},!0),this.addEventListener('down',function(f){return d._rippleDown(f)}),this.addEventListener('up',function(f){return d._rippleUp(f)})}},{key:'_onFocus',value:function(d){this._isDown||this._rippleDown(d)}},{key:'_onBlur',value:function(d){this._rippleUp(d)}},{key:'_rippleDown',value:function(d){this._isDown=!0,this.getRipple().downAction(d)}},{key:'_rippleUp',value:function(d){this._isDown=!1,this.getRipple().upAction(d)}}]),b}(Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element));customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>var TabElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tab-element'}}]),b}(Polymer.Element);customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ü" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>var LogoElement=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._addListners()}},{key:'_addListners',value:function(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}},{key:'_addClass',value:function(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.add('animated')})}.bind(this))}},{key:'_removeClass',value:function(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(e){e.classList&&e.classList.remove('animated')})}.bind(this))}}],[{key:'is',get:function(){return'logo-element'}},{key:'properties',get:function(){return{href:{type:String}}}}]),b}(Polymer.Element);customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>var ToggleButton=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.Gestures.addListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.addListener(this,'track',function(f){return d._ontrack(f)})}},{key:'disconnectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),Polymer.Gestures.removeListener(this,'tap',function(f){return d._onclicked(f)}),Polymer.Gestures.removeListener(this,'track',function(f){return d._ontrack(f)})}},{key:'_ontrack',value:function(d){var f=d.detail;'start'===f.state?this._trackStart(f):'track'===f.state?this._trackMove(f):'end'===f.state&&this._trackEnd(f)}},{key:'_trackStart',value:function(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}},{key:'_trackMove',value:function(d){var f=d.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+f:f)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}},{key:'_trackEnd',value:function(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}},{key:'_onclicked',value:function(){this.checked=!this.checked}}],[{key:'is',get:function(){return'toggle-button'}},{key:'properties',get:function(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}}]),b}(Polymer.Element);customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>var SVGData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_fetchSvgSource',value:function(d){if(d){var h=d.split('/').filter(function(j){return''!==j});if(2===h.length){var i=h[0]+'+'+h[1]+'+svgSource.json';this._fetch(i,'GET','include','json','data').catch(function(j){console.log(j)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}],[{key:'is',get:function(){return'svg-data'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}},{key:'observers',get:function(){return['_fetchSvgSource(room, loggedIn)']}}]),b}(WebvisualMixins.FetchMixin(Polymer.Element));customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>var DeviceSocketData=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_connect',value:function(d,e){d&&e?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}},{key:'_createSocketConnection',value:function(d,e){var f=this;d&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(function(){Webvisual.assignStatusNotifications(f),Webvisual.createSocketConnection(d,e),f.socketRoom&&f.connect(f.socketRoom)},0)}},{key:'connect',value:function(d){return d=d||this.socketRoom,d?void('/'===d.substring(0,1)&&(d=d.slice(1,d.length)),Webvisual.setupConnection(d),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}},{key:'disconnect',value:function(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}],[{key:'is',get:function(){return'device-socket-data'}},{key:'properties',get:function(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}},{key:'observers',get:function(){return['_connect(loggedIn, lazyConnect)']}}]),b}(Polymer.Element);customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>var CaptionElement=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.setAttribute('unresolved',''),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-caption'}},{key:'properties',get:function(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}}]),babelHelpers.createClass(b,[{key:'getKey',value:function(d){return this.keys&&this.keys[d]}},{key:'_computeReducedCaptionKeys',value:function(d,e){var h=Object.keys(e||{});if(0===h.length)return[];var i=[];return!0===this.withoutGroupedKey?i=h.filter(function(j){return d!==j}):!0===this.onlyGroupedKey&&(i=h.filter(function(j){return d===j})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===i.length?h:i}},{key:'isEmptyCaption',value:function(d){return!this.keys[d]}}]),b}(Polymer.Element);customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return function(d){function e(){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return babelHelpers.inherits(e,d),babelHelpers.createClass(e,[{key:'connectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'connectedCallback',this).call(this),this._linkElement(this.item,this.noLink)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'disconnectedCallback',this).call(this),this._unlinkElement(),this.clearValues()}},{key:'_linkElement',value:function(g,h){var j=this;if(g&&g.mount){if(this._olditem){if(g.mount===this._olditem.mount&&!h)return;this._unlinkElement(this._olditem)}return h?void this._unlinkElement(g):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=g,this.clearValues(),this.reset(),this.requestValues(null,null,this.viewLength).then(function(k){for(var l in k)if(l===j.item.mount){j.insertValues(k[l]);break}}).catch(function(){})))}}},{key:'_unlinkElement',value:function(g){g=g||this.item||this._olditem,window.Webvisual&&Webvisual.retractElement&&g&&g.mount&&(window.Webvisual.retractElement(this,g),this._olditem=null)}},{key:'getElement',value:function(){return this.properties}},{key:'computeDate',value:function(g){return g?864E5>Math.abs(Date.now()-g)?new Date(g).toLocaleTimeString():new Date(g).toLocaleString():''}},{key:'computeValue',value:function(g,h){return this.item&&this.item.isIndicatorLamp?h?'\u2717':'\u2713':g}},{key:'insertValues',value:function(g,h){var j=this;if(void 0!==g){var h=h||this.viewLength;if(this._initialized||(this._initialized=!0),!h)this.item&&!0===this.item.exceedable&&g.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(g)),this.renderInsertedValues(g);else{var k=g.slice(g.length-h,g.length);this.item&&!0===this.item.exceedable&&k.forEach(function(l){j.checkExceedingState(l)}),this.storeInside&&(this.values=this.values.concat(k)),this.renderInsertedValues(k),k.length=0}g.length=0}}},{key:'spliceValues',value:function(g){g&&(!0===this.storeInside&&(this.values=this.values.filter(function(h){return-1===g.indexOf(h)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(g))}},{key:'resetValues',value:function(g){this.values=g,this.notifyPath('values'),this.renderInsertedValues(this.values)}},{key:'clearValues',value:function(){this.values=[],this.notifyPath('values')}},{key:'requestValues',value:function(g,h,j){var k=this;if(!(this.item&&this.item.mount))return new Promise(function(m,o){o()});j=j||this.viewLength||1;var l={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:j||1}};return window.Webvisual?new Promise(function(m){window.Webvisual.request(l,m)}):new Promise(function(m,o){k.values?m(k.values.slice(k.values.length-j,k.values.length)):o()})}},{key:'requestRange',value:function(g){var h=this;if(!(this.item&&this.item.mount))return new Promise(function(k){k([void 0,void 0])});var j={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:g}};return!this.storeInside&&window.Webvisual?new Promise(function(k){window.Webvisual.request(j,k)}):new Promise(function(k){if(h.values&&h.values.length){var m=h.min(h.values,g),o=h.max(h.values,g);void 0===m&&void 0===o||k([m,o])}k([void 0,void 0])})}},{key:'min',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k>l&&(k=l);return k}},{key:'max',value:function(g,h){for(var k,l,j=-1,m=g.length;++j<m;)if(null!==(l=g[j][h])&&l>=l){k=l;break}for(;++j<m;)null!==(l=g[j][h])&&k<l&&(k=l);return k}},{key:'renderInsertedValues',value:function(){}},{key:'renderSplicedValues',value:function(){}},{key:'renderClearing',value:function(){}},{key:'checkExceedingState',value:function(g){this.item&&!1!==this.item.exceedable&&void 0!==g&&(0===g.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}},{key:'_exceedingChanged',value:function(g){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:g}}))}},{key:'_hasExceededChanged',value:function(){}},{key:'reset',value:function(){this.resetColor&&this.resetColor(),babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this)&&babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),'reset',this).call(this),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}],[{key:'properties',get:function(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}},{key:'observers',get:function(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}}]),e}(c)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'setColor',value:function(e){e&&(this.updateStyles({"--device-color":e||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":e||null})),this.updateStyles()}},{key:'resetColor',value:function(){this.setColor(this.item&&this.item.color||'')}},{key:'getComputedStyleValue',value:function(e){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,e):getComputedStyle(this).getPropertyValue(e)}}],[{key:'observers',get:function(){return['setColor(item.color)']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}},{key:'_addTouchListeners',value:function(f,g,h){var i=this;if(void 0!==g)if(f)this._removeTouchListeners();else{var j=this.eventTarget;j=j?this.$[j]:this,h?(Polymer.Gestures.addListener(j,'down',function(k){return i._handleTouch(k)}),Polymer.Gestures.addListener(j,'up',function(k){return i._handleTouch(k)})):g?Polymer.Gestures.addListener(j,'tap',function(){return i.select()}):this._removeTouchListeners()}}},{key:'_removeTouchListeners',value:function(){var f=this,g=this.eventTarget;g=g?this.$[g]:this,Polymer.Gestures.removeListener(g,'down',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'up',function(h){return f._handleTouch(h)}),Polymer.Gestures.removeListener(g,'tap',function(){return f.select()})}},{key:'_handleTouch',value:function(f){'down'===f.type?this._lastEvent=f:this._lastEvent&&f.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}},{key:'_checkedChanged',value:function(){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:this.checked}}))}},{key:'select',value:function(f,g){!0===this.selectable&&(this._preventSelectEvent=g,void 0===f?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=f)}},{key:'deselect',value:function(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}},{key:'reset',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this)&&babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'reset',this).call(this),this.deselect()}}],[{key:'properties',get:function(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}},{key:'observers',get:function(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}}]),c}(a)};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>var DeviceSign=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var f=this;d&&d.length?setTimeout(function(){f._initialized||(f._initialized=!0);var g=d[d.length-1];f.item.isIndicatorLamp||(f.$.value.textContent=f.computeValue(g.y)),f.showDate&&(f.$.dateSection.textContent=f.computeDate(g.x)),f.item.exceedable&&(f.checkExceedingState(g),(!f.hasAttribute('state')||f.state!==g.state)&&f.setAttribute('state',g.state))},0):this.renderClearing()}},{key:'computeValue',value:function(d){return d}},{key:'renderClearing',value:function(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}},{key:'_requestExceedingDetails',value:function(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}],[{key:'is',get:function(){return'device-sign'}},{key:'properties',get:function(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}}]),b}(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>var DeviceCheckbox=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){if(d&&d.length){this._initialized||(this._initialized=!0);var e=d[d.length-1];this.item.exceedable&&(this.checkExceedingState(e),(!this.hasAttribute('state')||this.state!==e.state)&&this.setAttribute('state',e.state))}else this.renderClearing()}},{key:'renderClearing',value:function(){this._initialized=!1,this.setAttribute('state',null)}},{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),Polymer.RenderStatus.afterNextRender(this,function(){var d=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!d||'-1px'===d){var e=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,f=Math.floor(8/3*e);f%2!==e%2&&f++,this.updateStyles({"--box-ink-size":f+'px'})}})}}],[{key:'is',get:function(){return'device-checkbox'}},{key:'properties',get:function(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}}]),b}(WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a,b,c,d,f=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),g=f&&8<=f[1],h=3,j='-10000px',m=-100,n=null!=Polymer.flush,o=n?Polymer.Async.animationFrame:0,p=n?Polymer.Async.idlePeriod:1,q=n?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer((c={is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var r=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return r-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var r=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,r-this._physicalCount)},set _virtualStart(r){r=this._clamp(r,0,this._maxVirtualStart),this.grid&&(r-=r%this._itemsPerRow),this._virtualStartVal=r},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(r){r%=this._physicalCount,0>r&&(r=this._physicalCount+r),this.grid&&(r-=r%this._itemsPerRow),this._physicalStartVal=r},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(r){this._physicalCountVal=r},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var r=this._firstVisibleIndexVal;if(null==r){var s=this._physicalTop+this._scrollOffset;r=this._iterateItems(function(t,u){return s+=this._getPhysicalSizeIncrement(t),s>this._scrollPosition?this.grid?u-u%this._itemsPerRow:u:this.grid&&this._virtualCount-1===u?u-u%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=r}return r},get lastVisibleIndex(){var r=this._lastVisibleIndexVal;if(null==r){if(this.grid)r=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var s=this._physicalTop+this._scrollOffset;this._iterateItems(function(t,u){s<this._scrollBottom&&(r=u),s+=this._getPhysicalSizeIncrement(t)})}this._lastVisibleIndexVal=r}return r},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)}},a='_itemsParent',d={},d[a]=d[a]||{},d[a].get=function(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},b='_scrollOffset',d[b]=d[b]||{},d[b].get=function(){return this._scrollerPaddingTop+this.scrollOffset},babelHelpers.defineProperty(c,'ready',function(){this.addEventListener('focus',this._didFocus.bind(this),!0)}),babelHelpers.defineProperty(c,'attached',function(){this._debounceRender(this._render,o),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')}),babelHelpers.defineProperty(c,'detached',function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')}),babelHelpers.defineProperty(c,'_setOverflow',function(s){this.style.webkitOverflowScrolling=s===this?'touch':'',this.style.overflowY=s===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,o)}),babelHelpers.defineProperty(c,'updateViewportBoundaries',function(){var s=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(s['padding-top'],10),this._isRTL=!('rtl'!==s.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()}),babelHelpers.defineProperty(c,'_scrollHandler',function(){var s=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),t=s-this._scrollPosition,u=0<=t;if(this._scrollPosition=s,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(t)>this._physicalSize&&0<this._physicalSize){t-=this._scrollOffset;var w=Math.round(t/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=w,this._physicalStart+=w,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var z=this._getReusables(u);u?(this._physicalTop=z.physicalTop,this._virtualStart+=z.indexes.length,this._physicalStart+=z.indexes.length):(this._virtualStart-=z.indexes.length,this._physicalStart-=z.indexes.length),this._update(z.indexes,u?null:z.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),q)}}),babelHelpers.defineProperty(c,'_getReusables',function(s){var t,u,w,z,A=[],B=this._hiddenContentSize*this._ratio,C=this._virtualStart,D=this._virtualEnd,E=this._physicalCount,F=this._physicalTop+this._scrollOffset,G=this._physicalBottom+this._scrollOffset,H=this._scrollTop,I=this._scrollBottom;for(s?(t=this._physicalStart,u=this._physicalEnd,w=H-F):(t=this._physicalEnd,u=this._physicalStart,w=G-I);z=this._getPhysicalSizeIncrement(t),w-=z,!(A.length>=E||w<=B);)if(s){if(D+A.length+1>=this._virtualCount)break;if(F+z>=H-this._scrollOffset)break;A.push(t),F+=z,t=(t+1)%E}else{if(0>=C-A.length)break;if(F+this._physicalSize-z<=I)break;A.push(t),F-=z,t=0===t?E-1:t-1}return{indexes:A,physicalTop:F-this._scrollOffset}}),babelHelpers.defineProperty(c,'_update',function(s,t){if(!(s&&0===s.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(s),this._updateMetrics(s),t)for(;t.length;){var u=t.pop();this._physicalTop-=this._getPhysicalSizeIncrement(u)}this._positionItems(),this._updateScrollerSize()}}),babelHelpers.defineProperty(c,'_createPool',function(s){this._ensureTemplatized();var t,u,w=Array(s);for(t=0;t<s;t++)u=this.stamp(null),w[t]=u.root.querySelector('*'),this._itemsParent.appendChild(u.root);return w}),babelHelpers.defineProperty(c,'_isClientFull',function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition}),babelHelpers.defineProperty(c,'_increasePoolIfNeeded',function(s){var t=this._clamp(this._physicalCount+s,h,this._virtualCount-this._virtualStart);if(t=this._convertIndexToCompleteRow(t),this.grid){var u=t%this._itemsPerRow;u&&t-u<=this._physicalCount&&(t+=this._itemsPerRow),t-=u}var w=t-this._physicalCount,z=Math.round(0.5*this._physicalCount);if(!(0>w)){if(0<w){var A=window.performance.now();[].push.apply(this._physicalItems,this._createPool(w)),[].push.apply(this._physicalSizes,Array(w)),this._physicalCount+=w,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=w),this._update(),this._templateCost=(window.performance.now()-A)/w,z=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===z||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,z)),p):this._debounceRender(this._increasePoolIfNeeded.bind(this,z),q))}}),babelHelpers.defineProperty(c,'_render',function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var s=this._getReusables(!0);this._physicalTop=s.physicalTop,this._virtualStart+=s.indexes.length,this._physicalStart+=s.indexes.length,this._update(s.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(h))}),babelHelpers.defineProperty(c,'_ensureTemplatized',function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var s={};s.__key__=!0,s[this.as]=!0,s[this.indexAs]=!0,s[this.selectedAs]=!0,s.tabIndex=!0,this._instanceProps=s,this.templatize(this._userTemplate,this.mutableData)}}),babelHelpers.defineProperty(c,'_gridChanged',function(s,t){'undefined'===typeof t||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),s&&this._updateGridMetrics())}),babelHelpers.defineProperty(c,'_itemsChanged',function(s){if('items'===s.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,o);else if('items.splices'===s.path){this._adjustVirtualIndex(s.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var t=s.value.indexSplices.some(function(u){return this._isIndexRendered(u.index)},this);(!this._isClientFull()||t)&&this._debounceRender(this._render,o)}else'items.length'!==s.path&&this._forwardItemPath(s.path,s.value)}),babelHelpers.defineProperty(c,'_forwardItemPath',function(s,t){s=s.slice(6);var u=s.indexOf('.')+1;0===u&&(u=s.length);var w=n?parseInt(s.substring(0,u),10):parseInt(s.substring(1,u),10),z=this._offscreenFocusedItem,A=this._isIndexRendered(w),B;A?B=this.modelForElement(this._physicalItems[this._getPhysicalIndex(w)]):z&&(B=this.modelForElement(z));B&&B[this.indexAs]===w&&(s=s.substring(u),s=this.as+(s?'.'+s:''),n?B._setPendingPropertyOrPath(s,t,!1,!0):B.notifyPath(s,t,!0),B._flushProperties&&B._flushProperties(!0),A&&(this._updateMetrics([w]),this._positionItems(),this._updateScrollerSize()))}),babelHelpers.defineProperty(c,'_adjustVirtualIndex',function(s){s.forEach(function(t){if(t.removed.forEach(this._removeItem,this),t.index<this._virtualStart){var u=Math.max(t.addedCount-t.removed.length,t.index-this._virtualStart);this._virtualStart+=u,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=u)}},this)}),babelHelpers.defineProperty(c,'_removeItem',function(s){this.$.selector.deselect(s),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===s&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())}),babelHelpers.defineProperty(c,'_iterateItems',function(s,t){var u,w,z,A;if(2===arguments.length&&t){for(A=0;A<t.length;A++)if(u=t[A],w=this._computeVidx(u),null!=(z=s.call(this,u,w)))return z;}else{for(u=this._physicalStart,w=this._virtualStart;u<this._physicalCount;u++,w++)if(null!=(z=s.call(this,u,w)))return z;for(u=0;u<this._physicalStart;u++,w++)if(null!=(z=s.call(this,u,w)))return z}}),babelHelpers.defineProperty(c,'_computeVidx',function(s){return s>=this._physicalStart?this._virtualStart+(s-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+s}),babelHelpers.defineProperty(c,'_assignModels',function(s){this._iterateItems(function(t,u){var w=this._physicalItems[t],z=this.items&&this.items[u];if(null!=z){var A=this.modelForElement(w);A.__key__=this._collection?this._collection.getKey(z):null,this._forwardProperty(A,this.as,z),this._forwardProperty(A,this.selectedAs,this.$.selector.isSelected(z)),this._forwardProperty(A,this.indexAs,u),this._forwardProperty(A,'tabIndex',this._focusedVirtualIndex===u?0:-1),this._physicalIndexForKey[A.__key__]=t,A._flushProperties&&A._flushProperties(!0),w.removeAttribute('hidden')}else w.setAttribute('hidden','')},s)}),babelHelpers.defineProperty(c,'_updateMetrics',function(s){Polymer.flush?Polymer.flush():Polymer.dom.flush();var t=0,u=0,w=this._physicalAverageCount,z=this._physicalAverage;this._iterateItems(function(A){u+=this._physicalSizes[A]||0,this._physicalSizes[A]=this._physicalItems[A].offsetHeight,t+=this._physicalSizes[A],this._physicalAverageCount+=this._physicalSizes[A]?1:0},s),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(u=1===this._itemsPerRow?u:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+t-u,this._itemsPerRow=1),this._physicalAverageCount!==w&&(this._physicalAverage=Math.round((z*w+t)/this._physicalAverageCount))}),babelHelpers.defineProperty(c,'_updateGridMetrics',function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow}),babelHelpers.defineProperty(c,'_positionItems',function(){this._adjustScrollPosition();var s=this._physicalTop;if(this.grid){var t=this._itemsPerRow*this._itemWidth,u=(this._viewportWidth-t)/2;this._iterateItems(function(w,z){var A=z%this._itemsPerRow,B=Math.floor(A*this._itemWidth+u);this._isRTL&&(B*=-1),this.translate3d(B+'px',s+'px',0,this._physicalItems[w]),this._shouldRenderNextRow(z)&&(s+=this._rowHeight)})}else this._iterateItems(function(w){this.translate3d(0,s+'px',0,this._physicalItems[w]),s+=this._physicalSizes[w]})}),babelHelpers.defineProperty(c,'_getPhysicalSizeIncrement',function(s){return this.grid?this._computeVidx(s)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[s]}),babelHelpers.defineProperty(c,'_shouldRenderNextRow',function(s){return s%this._itemsPerRow===this._itemsPerRow-1}),babelHelpers.defineProperty(c,'_adjustScrollPosition',function(){var s=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==s){this._physicalTop-=s;var t=this._scrollTop;!g&&0<t&&this._resetScrollPosition(t-s)}}),babelHelpers.defineProperty(c,'_resetScrollPosition',function(s){this.scrollTarget&&0<=s&&(this._scrollTop=s,this._scrollPosition=this._scrollTop)}),babelHelpers.defineProperty(c,'_updateScrollerSize',function(s){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,s=s||0===this._scrollHeight,s=s||this._scrollPosition>=this._estScrollHeight-this._physicalSize,s=s||this.grid&&this.$.items.style.height<this._estScrollHeight,(s||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)}),babelHelpers.defineProperty(c,'scrollToItem',function(s){return this.scrollToIndex(this.items.indexOf(s))}),babelHelpers.defineProperty(c,'scrollToIndex',function(s){if(!('number'!==typeof s||0>s||s>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){s=this._clamp(s,0,this._virtualCount-1),(!this._isIndexRendered(s)||s>=this._maxVirtualStart)&&(this._virtualStart=this.grid?s-2*this._itemsPerRow:s-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var t=this._physicalStart,u=this._virtualStart,w=0,z=this._hiddenContentSize;u<s&&w<=z;)w+=this._getPhysicalSizeIncrement(t),t=(t+1)%this._physicalCount,u++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+w),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}}),babelHelpers.defineProperty(c,'_resetAverage',function(){this._physicalAverage=0,this._physicalAverageCount=0}),babelHelpers.defineProperty(c,'_resizeHandler',function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},o)}),babelHelpers.defineProperty(c,'selectItem',function(s){return this.selectIndex(this.items.indexOf(s))}),babelHelpers.defineProperty(c,'selectIndex',function(s){if(!(0>s||s>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(s)){var t=this.modelForElement(this._physicalItems[this._getPhysicalIndex(s)]);t&&(t[this.selectedAs]=!0),this.updateSizeForIndex(s)}this.$.selector.selectIndex?this.$.selector.selectIndex(s):this.$.selector.select(this.items[s])}}),babelHelpers.defineProperty(c,'deselectItem',function(s){return this.deselectIndex(this.items.indexOf(s))}),babelHelpers.defineProperty(c,'deselectIndex',function(s){if(!(0>s||s>=this._virtualCount)){if(this._isIndexRendered(s)){var t=this.modelForElement(this._physicalItems[this._getPhysicalIndex(s)]);t[this.selectedAs]=!1,this.updateSizeForIndex(s)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(s):this.$.selector.deselect(this.items[s])}}),babelHelpers.defineProperty(c,'toggleSelectionForItem',function(s){return this.toggleSelectionForIndex(this.items.indexOf(s))}),babelHelpers.defineProperty(c,'toggleSelectionForIndex',function(s){var t=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(s):this.$.selector.isSelected(this.items[s]);t?this.deselectIndex(s):this.selectIndex(s)}),babelHelpers.defineProperty(c,'clearSelection',function(){this._iterateItems(function(s){this.modelForElement(this._physicalItems[s])[this.selectedAs]=!1}),this.$.selector.clearSelection()}),babelHelpers.defineProperty(c,'_selectionEnabledChanged',function(s){var t=s?this.listen:this.unlisten;t.call(this,this,'tap','_selectionHandler')}),babelHelpers.defineProperty(c,'_selectionHandler',function(s){var t=this.modelForElement(s.target);if(t){var u,w,z=Polymer.dom(s).path[0],A=this._itemsParent.node.domHost,B=Polymer.dom(A?A.root:document).activeElement,C=this._physicalItems[this._getPhysicalIndex(t[this.indexAs])];'input'!==z.localName&&'button'!==z.localName&&'select'!==z.localName&&(u=t.tabIndex,t.tabIndex=m,w=B?B.tabIndex:-1,t.tabIndex=u,B&&C!==B&&C.contains(B)&&w!==m||this.toggleSelectionForItem(t[this.as]))}}),babelHelpers.defineProperty(c,'_multiSelectionChanged',function(s){this.clearSelection(),this.$.selector.multi=s}),babelHelpers.defineProperty(c,'updateSizeForItem',function(s){return this.updateSizeForIndex(this.items.indexOf(s))}),babelHelpers.defineProperty(c,'updateSizeForIndex',function(s){return this._isIndexRendered(s)?(this._updateMetrics([this._getPhysicalIndex(s)]),this._positionItems(),null):null}),babelHelpers.defineProperty(c,'_manageFocus',function(){var s=this._focusedVirtualIndex;0<=s&&s<this._virtualCount?this._isIndexRendered(s)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])}),babelHelpers.defineProperty(c,'_convertIndexToCompleteRow',function(s){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(s/this._itemsPerRow)*this._itemsPerRow:s}),babelHelpers.defineProperty(c,'_isIndexRendered',function(s){return s>=this._virtualStart&&s<=this._virtualEnd}),babelHelpers.defineProperty(c,'_isIndexVisible',function(s){return s>=this.firstVisibleIndex&&s<=this.lastVisibleIndex}),babelHelpers.defineProperty(c,'_getPhysicalIndex',function(s){return(this._physicalStart+(s-this._virtualStart))%this._physicalCount}),babelHelpers.defineProperty(c,'focusItem',function(s){this._focusPhysicalItem(s)}),babelHelpers.defineProperty(c,'_focusPhysicalItem',function(s){if(!(0>s||s>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(s)||this.scrollToIndex(s);var w,t=this._physicalItems[this._getPhysicalIndex(s)],u=this.modelForElement(t);u.tabIndex=m,t.tabIndex===m&&(w=t),w||(w=Polymer.dom(t).querySelector('[tabindex="'+m+'"]')),u.tabIndex=0,this._focusedVirtualIndex=s,w&&w.focus()}}),babelHelpers.defineProperty(c,'_removeFocusedItem',function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1}),babelHelpers.defineProperty(c,'_createFocusBackfillItem',function(){var s=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var t=this.stamp(null);this._focusBackfillItem=t.root.querySelector('*'),this._itemsParent.appendChild(t.root)}this._offscreenFocusedItem=this._physicalItems[s],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[s]=this._focusBackfillItem,this._focusedPhysicalIndex=s,this.translate3d(0,j,0,this._offscreenFocusedItem)}}),babelHelpers.defineProperty(c,'_restoreFocusedItem',function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var s=this._focusedPhysicalIndex,t=this._physicalItems[s];if(t){var u=this.modelForElement(t),w=this.modelForElement(this._offscreenFocusedItem);u[this.as]===w[this.as]?(this._focusBackfillItem=t,u.tabIndex=-1,this._physicalItems[s]=this._offscreenFocusedItem,this.translate3d(0,j,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}}),babelHelpers.defineProperty(c,'_didFocus',function(s){var t=this.modelForElement(s.target),u=this.modelForElement(this._focusedItem),w=null!==this._offscreenFocusedItem,z=this._focusedVirtualIndex;t&&(u===t?!this._isIndexVisible(z)&&this.scrollToIndex(z):(this._restoreFocusedItem(),u&&(u.tabIndex=-1),t.tabIndex=0,z=t[this.indexAs],this._focusedVirtualIndex=z,this._focusedPhysicalIndex=this._getPhysicalIndex(z),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],w&&!this._offscreenFocusedItem&&this._update()))}),babelHelpers.defineProperty(c,'_keydownHandler',function(s){switch(s.keyCode){case 40:s.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(s);}}),babelHelpers.defineProperty(c,'_clamp',function(s,t,u){return Math.min(u,Math.max(t,s))}),babelHelpers.defineProperty(c,'_debounceRender',function(s,t){n?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,t,s.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(s)}),babelHelpers.defineProperty(c,'_forwardProperty',function(s,t,u){n?s._setPendingProperty(t,u):s[t]=u}),babelHelpers.defineProperty(c,'_forwardHostPropV2',function(s,t){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(u){u&&this.modelForElement(u).forwardHostProp(s,t)},this)}),babelHelpers.defineProperty(c,'_notifyInstancePropV2',function(s,t,u){if(Polymer.Path.matches(this.as,t)){var w=s[this.indexAs];t==this.as&&(this.items[w]=u),this.notifyPath(Polymer.Path.translate(this.as,'items.'+w,t),u)}}),babelHelpers.defineProperty(c,'_getStampedChildren',function(){return this._physicalItems}),babelHelpers.defineProperty(c,'_forwardInstancePath',function(s,t,u){0===t.indexOf(this.as+'.')&&this.notifyPath('items.'+s.__key__+'.'+t.slice(this.as.length+1),u)}),babelHelpers.defineProperty(c,'_forwardParentPath',function(s,t){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(u){u&&this.modelForElement(u).notifyPath(s,t,!0)},this)}),babelHelpers.defineProperty(c,'_forwardParentProp',function(s,t){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(u){u&&(this.modelForElement(u)[s]=t)},this)}),babelHelpers.defineEnumerableProperties(c,d),c))})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>var DeviceTable=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'insertValues',value:function(d){var e=this;d&&d.length?setTimeout(function(){if(!e._initialized)e.set('values',d.reverse()),e._initialized=!0;else for(var f=0;f<d.length;f++)e.unshift('values',d[f])},0):!this._initialized&&this.renderClearing()}},{key:'spliceValues',value:function(d){var e=this;setTimeout(function(){for(var f=[],g=0;g<d.length;g++){for(var h=e.values.length-1;0<=h&&e.values[h].x!==d[g].x;h--);-1!==h&&(e.values.splice(h,1),f.push({index:h,removed:[e.values[h]],addedCount:0,object:e.values,type:'splice'}))}e.notifySplices('values',f)},0)}},{key:'renderClearing',value:function(){this.$.list.set('items',[])}},{key:'_computeKeysForCaption',value:function(d,e){if(d&&e&&e.keys){var f='';for(var g in this.item.keys)f+=this.item.keys[g]+' ';this.$.caption.textContent=f}else this.caption&&(this.$.caption.textContent=this.caption)}},{key:'_toggleGridView',value:function(){this.$.list.grid=!!!this.$.list.grid}}],[{key:'is',get:function(){return'device-table'}},{key:'properties',get:function(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}},{key:'observers',get:function(){return['_computeKeysForCaption(keysForCaption, item)']}}]),b}(WebvisualMixins.DeviceMixin(Polymer.Element));customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>var DeviceTableGroup=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_shouldHideTabs',value:function(d){2>d?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===d&&this.set('selectedItemMount',this.items[0].mount)}},{key:'reset',value:function(){this.set('items',[]),this.set('selectedItemMount','')}}],[{key:'is',get:function(){return'device-table-group'}},{key:'properties',get:function(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}},{key:'observers',get:function(){return['_shouldHideTabs(items.length)']}}]),b}(Polymer.Element);customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">!function(Pa){"use strict";function La(yg){return function(fg,xg){return Mp(yg(fg),xg)}}function Ha(yg,fg,xg){var vg=(fg-yg)/Math.max(0,xg),bg=Math.floor(Math.log(vg)/Math.LN10),wg=vg/Math.pow(10,bg);return 0<=bg?(wg>=Yp?10:wg>=Ep?5:wg>=Pp?2:1)*Math.pow(10,bg):-Math.pow(10,-bg)/(wg>=Yp?10:wg>=Ep?5:wg>=Pp?2:1)}function Xa(yg,fg,xg){var vg=Math.abs(fg-yg)/Math.max(0,xg),bg=Math.pow(10,Math.floor(Math.log(vg)/Math.LN10)),wg=vg/bg;return wg>=Yp?bg*=10:wg>=Ep?bg*=5:wg>=Pp&&(bg*=2),fg<yg?-bg:bg}function qa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ia(){return new qa}function Oa(yg){this._context=yg}function $a(yg){return yg[0]}function ja(yg){return yg[1]}function Va(yg,fg,xg){yg._context.bezierCurveTo((2*yg._x0+yg._x1)/3,(2*yg._y0+yg._y1)/3,(yg._x0+2*yg._x1)/3,(yg._y0+2*yg._y1)/3,(yg._x0+4*yg._x1+fg)/6,(yg._y0+4*yg._y1+xg)/6)}function Ba(yg){this._context=yg}function Za(yg,fg,xg){yg._context.bezierCurveTo(yg._x1+yg._k*(yg._x2-yg._x0),yg._y1+yg._k*(yg._y2-yg._y0),yg._x2+yg._k*(yg._x1-fg),yg._y2+yg._k*(yg._y1-xg),yg._x2,yg._y2)}function Wa(yg,fg){this._context=yg,this._k=(1-fg)/6}function Ra(yg,fg,xg){var vg=yg._x1,bg=yg._y1,wg=yg._x2,Tg=yg._y2;if(yg._l01_a>qp){var kg=2*yg._l01_2a+3*yg._l01_a*yg._l12_a+yg._l12_2a,Sg=3*yg._l01_a*(yg._l01_a+yg._l12_a);vg=(vg*kg-yg._x0*yg._l12_2a+yg._x2*yg._l01_2a)/Sg,bg=(bg*kg-yg._y0*yg._l12_2a+yg._y2*yg._l01_2a)/Sg}if(yg._l23_a>qp){var Cg=2*yg._l23_2a+3*yg._l23_a*yg._l12_a+yg._l12_2a,zg=3*yg._l23_a*(yg._l23_a+yg._l12_a);wg=(wg*Cg+yg._x1*yg._l23_2a-fg*yg._l12_2a)/zg,Tg=(Tg*Cg+yg._y1*yg._l23_2a-xg*yg._l12_2a)/zg}yg._context.bezierCurveTo(vg,bg,wg,Tg,yg._x2,yg._y2)}function Ga(yg,fg){this._context=yg,this._alpha=fg}function Ja(yg){return 0>yg?-1:1}function Ka(yg,fg,xg){var vg=yg._x1-yg._x0,bg=fg-yg._x1,wg=(yg._y1-yg._y0)/(vg||0>bg&&-0),Tg=(xg-yg._y1)/(bg||0>vg&&-0);return(Ja(wg)+Ja(Tg))*Math.min(Math.abs(wg),Math.abs(Tg),.5*Math.abs((wg*bg+Tg*vg)/(vg+bg)))||0}function Qa(yg,fg){var xg=yg._x1-yg._x0;return xg?(3*(yg._y1-yg._y0)/xg-fg)/2:fg}function el(yg,fg,xg){var vg=yg._x0,bg=yg._y0,wg=yg._x1,Tg=yg._y1,kg=(wg-vg)/3;yg._context.bezierCurveTo(vg+kg,bg+kg*fg,wg-kg,Tg-kg*xg,wg,Tg)}function tl(yg){this._context=yg}function nl(yg){this._context=yg}function ol(yg){this._context=yg}function al(yg){var fg,xg,vg=yg.length-1,bg=Array(vg),wg=Array(vg),Tg=Array(vg);for(bg[0]=0,wg[0]=2,Tg[0]=yg[0]+2*yg[1],fg=1;fg<vg-1;++fg)bg[fg]=1,wg[fg]=4,Tg[fg]=4*yg[fg]+2*yg[fg+1];for(bg[vg-1]=2,wg[vg-1]=7,Tg[vg-1]=8*yg[vg-1]+yg[vg],fg=1;fg<vg;++fg)xg=bg[fg]/wg[fg-1],wg[fg]-=xg,Tg[fg]-=xg*Tg[fg-1];for(bg[vg-1]=Tg[vg-1]/wg[vg-1],fg=vg-2;0<=fg;--fg)bg[fg]=(Tg[fg]-bg[fg+1])/wg[fg];for(wg[vg-1]=(yg[vg]+bg[vg-1])/2,fg=0;fg<vg-1;++fg)wg[fg]=2*yg[fg+1]-bg[fg+1];return[bg,wg]}function il(yg,fg){this._context=yg,this._t=fg}function ll(yg,fg,xg,vg){function bg(wg){return yg(wg=new Date(+wg)),wg}return bg.floor=bg,bg.ceil=function(wg){return yg(wg=new Date(wg-1)),fg(wg,1),yg(wg),wg},bg.round=function(wg){var Tg=bg(wg),kg=bg.ceil(wg);return wg-Tg<kg-wg?Tg:kg},bg.offset=function(wg,Tg){return fg(wg=new Date(+wg),null==Tg?1:Math.floor(Tg)),wg},bg.range=function(wg,Tg,kg){var Sg=[];if(wg=bg.ceil(wg),kg=null==kg?1:Math.floor(kg),!(wg<Tg&&0<kg))return Sg;do Sg.push(new Date(+wg));while((fg(wg,kg),yg(wg),wg<Tg));return Sg},bg.filter=function(wg){return ll(function(Tg){if(Tg>=Tg)for(;yg(Tg),!wg(Tg);)Tg.setTime(Tg-1)},function(Tg,kg){if(Tg>=Tg)for(;0<=--kg;)for(;fg(Tg,1),!wg(Tg););})},xg&&(bg.count=function(wg,Tg){return jp.setTime(+wg),Vp.setTime(+Tg),yg(jp),yg(Vp),Math.floor(xg(jp,Vp))},bg.every=function(wg){return wg=Math.floor(wg),isFinite(wg)&&0<wg?1<wg?bg.filter(vg?function(Tg){return 0==vg(Tg)%wg}:function(Tg){return 0==bg.count(0,Tg)%wg}):bg:null}),bg}function rl(yg){return ll(function(fg){fg.setDate(fg.getDate()-(fg.getDay()+7-yg)%7),fg.setHours(0,0,0,0)},function(fg,xg){fg.setDate(fg.getDate()+7*xg)},function(fg,xg){return(xg-fg-(xg.getTimezoneOffset()-fg.getTimezoneOffset())*Zp)/Wp})}function dl(yg){return ll(function(fg){fg.setUTCDate(fg.getUTCDate()-(fg.getUTCDay()+7-yg)%7),fg.setUTCHours(0,0,0,0)},function(fg,xg){fg.setUTCDate(fg.getUTCDate()+7*xg)},function(fg,xg){return(xg-fg)/Wp})}function sl(yg){return new cl(yg)}function cl(yg){if(!(fg=h_.exec(yg)))throw new Error("invalid format: "+yg);var fg,xg=fg[1]||" ",vg=fg[2]||">",bg=fg[3]||"-",wg=fg[4]||"",Tg=!!fg[5],kg=fg[6]&&+fg[6],Sg=!!fg[7],Cg=fg[8]&&+fg[8].slice(1),zg=fg[9]||"";"n"===zg?(Sg=!0,zg="g"):__[zg]||(zg=""),(Tg||"0"===xg&&"="===vg)&&(Tg=!0,xg="0",vg="="),this.fill=xg,this.align=vg,this.sign=bg,this.symbol=wg,this.zero=Tg,this.width=kg,this.comma=Sg,this.precision=Cg,this.type=zg}function ul(yg){return m_=x_(yg),Pa.format=m_.format,g_=m_.formatPrefix,m_}function pl(yg){if(0<=yg.y&&100>yg.y){var fg=new Date(-1,yg.m,yg.d,yg.H,yg.M,yg.S,yg.L);return fg.setFullYear(yg.y),fg}return new Date(yg.y,yg.m,yg.d,yg.H,yg.M,yg.S,yg.L)}function _l(yg){if(0<=yg.y&&100>yg.y){var fg=new Date(Date.UTC(-1,yg.m,yg.d,yg.H,yg.M,yg.S,yg.L));return fg.setUTCFullYear(yg.y),fg}return new Date(Date.UTC(yg.y,yg.m,yg.d,yg.H,yg.M,yg.S,yg.L))}function hl(yg){return{y:yg,m:0,d:1,H:0,M:0,S:0,L:0}}function ml(yg){function fg(Og,$g){return function(jg){var Vg,Bg,Zg,Wg=[],Rg=-1,Gg=0,Jg=Og.length;for(jg instanceof Date||(jg=new Date(+jg));++Rg<Jg;)37===Og.charCodeAt(Rg)&&(Wg.push(Og.slice(Gg,Rg)),null==(Bg=C_[Vg=Og.charAt(++Rg)])?Bg="e"===Vg?" ":"0":Vg=Og.charAt(++Rg),(Zg=$g[Vg])&&(Vg=Zg(jg,Bg)),Wg.push(Vg),Gg=Rg+1);return Wg.push(Og.slice(Gg,Rg)),Wg.join("")}}function xg(Og,$g){return function(jg){var Vg=hl(1900);if(vg(Vg,Og,jg+="",0)!=jg.length)return null;if("p"in Vg&&(Vg.H=Vg.H%12+12*Vg.p),"W"in Vg||"U"in Vg){"w"in Vg||(Vg.w="W"in Vg?1:0);var Bg="Z"in Vg?_l(hl(Vg.y)).getUTCDay():$g(hl(Vg.y)).getDay();Vg.m=0,Vg.d="W"in Vg?(Vg.w+6)%7+7*Vg.W-(Bg+5)%7:Vg.w+7*Vg.U-(Bg+6)%7}return"Z"in Vg?(Vg.H+=0|Vg.Z/100,Vg.M+=Vg.Z%100,_l(Vg)):$g(Vg)}}function vg(Og,$g,jg,Vg){for(var Bg,Zg,Wg=0,Rg=$g.length,Gg=jg.length;Wg<Rg;){if(Vg>=Gg)return-1;if(37===(Bg=$g.charCodeAt(Wg++))){if(Bg=$g.charAt(Wg++),!(Zg=Ng[Bg in C_?$g.charAt(Wg++):Bg])||0>(Vg=Zg(Og,jg,Vg)))return-1;}else if(Bg!=jg.charCodeAt(Vg++))return-1}return Vg}var bg=yg.dateTime,wg=yg.date,Tg=yg.time,kg=yg.periods,Sg=yg.days,Cg=yg.shortDays,zg=yg.months,Mg=yg.shortMonths,Ug=fl(kg),Ag=xl(kg),Yg=fl(Sg),Eg=xl(Sg),Pg=fl(Cg),Dg=xl(Cg),Fg=fl(zg),Lg=xl(zg),Hg=fl(Mg),Xg=xl(Mg),qg={a:function($g){return Cg[$g.getDay()]},A:function($g){return Sg[$g.getDay()]},b:function($g){return Mg[$g.getMonth()]},B:function($g){return zg[$g.getMonth()]},c:null,d:Dl,e:Dl,H:Fl,I:Ll,j:Hl,L:Xl,m:ql,M:Il,p:function($g){return kg[+(12<=$g.getHours())]},S:Nl,U:Ol,w:$l,W:jl,x:null,X:null,y:Vl,Y:Bl,Z:Zl,"%":dd},Ig={a:function($g){return Cg[$g.getUTCDay()]},A:function($g){return Sg[$g.getUTCDay()]},b:function($g){return Mg[$g.getUTCMonth()]},B:function($g){return zg[$g.getUTCMonth()]},c:null,d:Wl,e:Wl,H:Rl,I:Gl,j:Jl,L:Kl,m:Ql,M:ed,p:function($g){return kg[+(12<=$g.getUTCHours())]},S:td,U:nd,w:od,W:ad,x:null,X:null,y:id,Y:ld,Z:rd,"%":dd},Ng={a:function($g,jg,Vg){var Bg=Pg.exec(jg.slice(Vg));return Bg?($g.w=Dg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},A:function($g,jg,Vg){var Bg=Yg.exec(jg.slice(Vg));return Bg?($g.w=Eg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},b:function($g,jg,Vg){var Bg=Hg.exec(jg.slice(Vg));return Bg?($g.m=Xg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},B:function($g,jg,Vg){var Bg=Fg.exec(jg.slice(Vg));return Bg?($g.m=Lg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},c:function($g,jg,Vg){return vg($g,bg,jg,Vg)},d:zl,e:zl,H:Ul,I:Ul,j:Ml,L:El,m:Cl,M:Al,p:function($g,jg,Vg){var Bg=Ug.exec(jg.slice(Vg));return Bg?($g.p=Ag[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},S:Yl,U:bl,w:vl,W:wl,x:function($g,jg,Vg){return vg($g,wg,jg,Vg)},X:function($g,jg,Vg){return vg($g,Tg,jg,Vg)},y:kl,Y:Tl,Z:Sl,"%":Pl};return qg.x=fg(wg,qg),qg.X=fg(Tg,qg),qg.c=fg(bg,qg),Ig.x=fg(wg,Ig),Ig.X=fg(Tg,Ig),Ig.c=fg(bg,Ig),{format:function($g){var jg=fg($g+="",qg);return jg.toString=function(){return $g},jg},parse:function($g){var jg=xg($g+="",pl);return jg.toString=function(){return $g},jg},utcFormat:function($g){var jg=fg($g+="",Ig);return jg.toString=function(){return $g},jg},utcParse:function($g){var jg=xg($g,_l);return jg.toString=function(){return $g},jg}}}function gl(yg,fg,xg){var vg=0>yg?"-":"",bg=(vg?-yg:yg)+"",wg=bg.length;return vg+(wg<xg?Array(xg-wg+1).join(fg)+bg:bg)}function yl(yg){return yg.replace(U_,"\\$&")}function fl(yg){return new RegExp("^(?:"+yg.map(yl).join("|")+")","i")}function xl(yg){for(var fg={},xg=-1,vg=yg.length;++xg<vg;)fg[yg[xg].toLowerCase()]=xg;return fg}function vl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+1));return vg?(yg.w=+vg[0],xg+vg[0].length):-1}function bl(yg,fg,xg){var vg=z_.exec(fg.slice(xg));return vg?(yg.U=+vg[0],xg+vg[0].length):-1}function wl(yg,fg,xg){var vg=z_.exec(fg.slice(xg));return vg?(yg.W=+vg[0],xg+vg[0].length):-1}function Tl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+4));return vg?(yg.y=+vg[0],xg+vg[0].length):-1}function kl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.y=+vg[0]+(68<+vg[0]?1900:2e3),xg+vg[0].length):-1}function Sl(yg,fg,xg){var vg=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(fg.slice(xg,xg+6));return vg?(yg.Z=vg[1]?0:-(vg[2]+(vg[3]||"00")),xg+vg[0].length):-1}function Cl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.m=vg[0]-1,xg+vg[0].length):-1}function zl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.d=+vg[0],xg+vg[0].length):-1}function Ml(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+3));return vg?(yg.m=0,yg.d=+vg[0],xg+vg[0].length):-1}function Ul(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.H=+vg[0],xg+vg[0].length):-1}function Al(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.M=+vg[0],xg+vg[0].length):-1}function Yl(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+2));return vg?(yg.S=+vg[0],xg+vg[0].length):-1}function El(yg,fg,xg){var vg=z_.exec(fg.slice(xg,xg+3));return vg?(yg.L=+vg[0],xg+vg[0].length):-1}function Pl(yg,fg,xg){var vg=M_.exec(fg.slice(xg,xg+1));return vg?xg+vg[0].length:-1}function Dl(yg,fg){return gl(yg.getDate(),fg,2)}function Fl(yg,fg){return gl(yg.getHours(),fg,2)}function Ll(yg,fg){return gl(yg.getHours()%12||12,fg,2)}function Hl(yg,fg){return gl(1+Kp.count(n_(yg),yg),fg,3)}function Xl(yg,fg){return gl(yg.getMilliseconds(),fg,3)}function ql(yg,fg){return gl(yg.getMonth()+1,fg,2)}function Il(yg,fg){return gl(yg.getMinutes(),fg,2)}function Nl(yg,fg){return gl(yg.getSeconds(),fg,2)}function Ol(yg,fg){return gl(Qp.count(n_(yg),yg),fg,2)}function $l(yg){return yg.getDay()}function jl(yg,fg){return gl(e_.count(n_(yg),yg),fg,2)}function Vl(yg,fg){return gl(yg.getFullYear()%100,fg,2)}function Bl(yg,fg){return gl(yg.getFullYear()%1e4,fg,4)}function Zl(yg){var fg=yg.getTimezoneOffset();return(0<fg?"-":(fg*=-1,"+"))+gl(0|fg/60,"0",2)+gl(fg%60,"0",2)}function Wl(yg,fg){return gl(yg.getUTCDate(),fg,2)}function Rl(yg,fg){return gl(yg.getUTCHours(),fg,2)}function Gl(yg,fg){return gl(yg.getUTCHours()%12||12,fg,2)}function Jl(yg,fg){return gl(1+o_.count(l_(yg),yg),fg,3)}function Kl(yg,fg){return gl(yg.getUTCMilliseconds(),fg,3)}function Ql(yg,fg){return gl(yg.getUTCMonth()+1,fg,2)}function ed(yg,fg){return gl(yg.getUTCMinutes(),fg,2)}function td(yg,fg){return gl(yg.getUTCSeconds(),fg,2)}function nd(yg,fg){return gl(a_.count(l_(yg),yg),fg,2)}function od(yg){return yg.getUTCDay()}function ad(yg,fg){return gl(i_.count(l_(yg),yg),fg,2)}function id(yg,fg){return gl(yg.getUTCFullYear()%100,fg,2)}function ld(yg,fg){return gl(yg.getUTCFullYear()%1e4,fg,4)}function rd(){return"+0000"}function dd(){return"%"}function sd(yg){return v_=ml(yg),Pa.timeFormat=v_.format,Pa.timeParse=v_.parse,b_=v_.utcFormat,w_=v_.utcParse,v_}function cd(){}function ud(yg,fg){var xg=new cd;if(yg instanceof cd)yg.each(function(kg,Sg){xg.set(Sg,kg)});else if(Array.isArray(yg)){var vg,bg=-1,wg=yg.length;if(null==fg)for(;++bg<wg;)xg.set(bg,yg[bg]);else for(;++bg<wg;)xg.set(fg(vg=yg[bg],bg,yg),vg)}else if(yg)for(var Tg in yg)xg.set(Tg,yg[Tg]);return xg}function pd(){}function _d(yg,fg){var xg=Object.create(yg.prototype);for(var vg in fg)xg[vg]=fg[vg];return xg}function hd(){}function md(yg){var fg;return yg=(yg+"").trim().toLowerCase(),(fg=X_.exec(yg))?(fg=parseInt(fg[1],16),new vd(15&fg>>8|240&fg>>4,15&fg>>4|240&fg,(15&fg)<<4|15&fg,1)):(fg=q_.exec(yg))?gd(parseInt(fg[1],16)):(fg=I_.exec(yg))?new vd(fg[1],fg[2],fg[3],1):(fg=N_.exec(yg))?new vd(255*fg[1]/100,255*fg[2]/100,255*fg[3]/100,1):(fg=O_.exec(yg))?yd(fg[1],fg[2],fg[3],fg[4]):(fg=$_.exec(yg))?yd(255*fg[1]/100,255*fg[2]/100,255*fg[3]/100,fg[4]):(fg=j_.exec(yg))?bd(fg[1],fg[2]/100,fg[3]/100,1):(fg=V_.exec(yg))?bd(fg[1],fg[2]/100,fg[3]/100,fg[4]):B_.hasOwnProperty(yg)?gd(B_[yg]):"transparent"===yg?new vd(NaN,NaN,NaN,0):null}function gd(yg){return new vd(255&yg>>16,255&yg>>8,255&yg,1)}function yd(yg,fg,xg,vg){return 0>=vg&&(yg=fg=xg=NaN),new vd(yg,fg,xg,vg)}function fd(yg){return yg instanceof hd||(yg=md(yg)),yg?(yg=yg.rgb(),new vd(yg.r,yg.g,yg.b,yg.opacity)):new vd}function xd(yg,fg,xg,vg){return 1===arguments.length?fd(yg):new vd(yg,fg,xg,null==vg?1:vg)}function vd(yg,fg,xg,vg){this.r=+yg,this.g=+fg,this.b=+xg,this.opacity=+vg}function bd(yg,fg,xg,vg){return 0>=vg?yg=fg=xg=NaN:0>=xg||1<=xg?yg=fg=NaN:0>=fg&&(yg=NaN),new Td(yg,fg,xg,vg)}function wd(yg){if(yg instanceof Td)return new Td(yg.h,yg.s,yg.l,yg.opacity);if(yg instanceof hd||(yg=md(yg)),!yg)return new Td;if(yg instanceof Td)return yg;var fg=(yg=yg.rgb()).r/255,xg=yg.g/255,vg=yg.b/255,bg=Math.min(fg,xg,vg),wg=Math.max(fg,xg,vg),Tg=NaN,kg=wg-bg,Sg=(wg+bg)/2;return kg?(Tg=fg===wg?(xg-vg)/kg+6*(xg<vg):xg===wg?(vg-fg)/kg+2:(fg-xg)/kg+4,kg/=.5>Sg?wg+bg:2-wg-bg,Tg*=60):kg=0<Sg&&1>Sg?0:Tg,new Td(Tg,kg,Sg,yg.opacity)}function Td(yg,fg,xg,vg){this.h=+yg,this.s=+fg,this.l=+xg,this.opacity=+vg}function kd(yg,fg,xg){return 255*(60>yg?fg+(xg-fg)*yg/60:180>yg?xg:240>yg?fg+(xg-fg)*(240-yg)/60:fg)}function Sd(yg){if(yg instanceof Cd)return new Cd(yg.l,yg.a,yg.b,yg.opacity);if(yg instanceof Ed){var fg=yg.h*Z_;return new Cd(yg.l,Math.cos(fg)*yg.c,Math.sin(fg)*yg.c,yg.opacity)}yg instanceof vd||(yg=fd(yg));var xg=Ad(yg.r),vg=Ad(yg.g),bg=Ad(yg.b),wg=zd((.4124564*xg+.3575761*vg+.1804375*bg)/R_),Tg=zd((.2126729*xg+.7151522*vg+.072175*bg)/G_);return new Cd(116*Tg-16,500*(wg-Tg),200*(Tg-zd((.0193339*xg+.119192*vg+.9503041*bg)/J_)),yg.opacity)}function Cd(yg,fg,xg,vg){this.l=+yg,this.a=+fg,this.b=+xg,this.opacity=+vg}function zd(yg){return yg>th?Math.pow(yg,1/3):yg/eh+K_}function Md(yg){return yg>Q_?yg*yg*yg:eh*(yg-K_)}function Ud(yg){return 255*(.0031308>=yg?12.92*yg:1.055*Math.pow(yg,1/2.4)-.055)}function Ad(yg){return .04045>=(yg/=255)?yg/12.92:Math.pow((yg+.055)/1.055,2.4)}function Yd(yg){if(yg instanceof Ed)return new Ed(yg.h,yg.c,yg.l,yg.opacity);yg instanceof Cd||(yg=Sd(yg));var fg=Math.atan2(yg.b,yg.a)*W_;return new Ed(0>fg?fg+360:fg,Math.sqrt(yg.a*yg.a+yg.b*yg.b),yg.l,yg.opacity)}function Ed(yg,fg,xg,vg){this.h=+yg,this.c=+fg,this.l=+xg,this.opacity=+vg}function Pd(yg){if(yg instanceof Fd)return new Fd(yg.h,yg.s,yg.l,yg.opacity);yg instanceof vd||(yg=fd(yg));var fg=yg.r/255,xg=yg.g/255,vg=yg.b/255,bg=(sh*vg+rh*fg-dh*xg)/(sh+rh-dh),wg=vg-bg,Tg=(lh*(xg-bg)-ah*wg)/ih,kg=Math.sqrt(Tg*Tg+wg*wg)/(lh*bg*(1-bg)),Sg=kg?Math.atan2(Tg,wg)*W_-120:NaN;return new Fd(0>Sg?Sg+360:Sg,kg,bg,yg.opacity)}function Dd(yg,fg,xg,vg){return 1===arguments.length?Pd(yg):new Fd(yg,fg,xg,null==vg?1:vg)}function Fd(yg,fg,xg,vg){this.h=+yg,this.s=+fg,this.l=+xg,this.opacity=+vg}function Ld(yg,fg){return function(xg){return yg+xg*fg}}function Hd(yg,fg,xg){return yg=Math.pow(yg,xg),fg=Math.pow(fg,xg)-yg,xg=1/xg,function(vg){return Math.pow(yg+vg*fg,xg)}}function Xd(yg){return 1==(yg=+yg)?qd:function(fg,xg){return xg-fg?Hd(fg,xg,yg):hh(isNaN(fg)?xg:fg)}}function qd(yg,fg){var xg=fg-yg;return xg?Ld(yg,xg):hh(isNaN(yg)?fg:yg)}function Id(yg){return function(){return yg}}function Nd(yg){return function(fg){return yg(fg)+""}}function Od(yg,fg,xg,vg){function bg(Cg){return Cg.length?Cg.pop()+" ":""}function wg(Cg,zg,Mg,Ug,Ag,Yg){if(Cg!==Mg||zg!==Ug){var Eg=Ag.push("translate(",null,fg,null,xg);Yg.push({i:Eg-4,x:fh(Cg,Mg)},{i:Eg-2,x:fh(zg,Ug)})}else(Mg||Ug)&&Ag.push("translate("+Mg+fg+Ug+xg)}function Tg(Cg,zg,Mg,Ug){Cg===zg?zg&&Mg.push(bg(Mg)+"rotate("+zg+vg):(180<Cg-zg?zg+=360:180<zg-Cg&&(Cg+=360),Ug.push({i:Mg.push(bg(Mg)+"rotate(",null,vg)-2,x:fh(Cg,zg)}))}function kg(Cg,zg,Mg,Ug){Cg===zg?zg&&Mg.push(bg(Mg)+"skewX("+zg+vg):Ug.push({i:Mg.push(bg(Mg)+"skewX(",null,vg)-2,x:fh(Cg,zg)})}function Sg(Cg,zg,Mg,Ug,Ag,Yg){if(Cg!==Mg||zg!==Ug){var Eg=Ag.push(bg(Ag)+"scale(",null,",",null,")");Yg.push({i:Eg-4,x:fh(Cg,Mg)},{i:Eg-2,x:fh(zg,Ug)})}else 1===Mg&&1===Ug||Ag.push(bg(Ag)+"scale("+Mg+","+Ug+")")}return function(Cg,zg){var Mg=[],Ug=[];return Cg=yg(Cg),zg=yg(zg),wg(Cg.translateX,Cg.translateY,zg.translateX,zg.translateY,Mg,Ug),Tg(Cg.rotate,zg.rotate,Mg,Ug),kg(Cg.skewX,zg.skewX,Mg,Ug),Sg(Cg.scaleX,Cg.scaleY,zg.scaleX,zg.scaleY,Mg,Ug),Cg=zg=null,function(Ag){for(var Yg,Eg=-1,Pg=Ug.length;++Eg<Pg;)Mg[(Yg=Ug[Eg]).i]=Yg.x(Ag);return Mg.join("")}}}function $d(yg){return((yg=Math.exp(yg))+1/yg)/2}function jd(yg){return((yg=Math.exp(yg))-1/yg)/2}function Vd(yg){return((yg=Math.exp(2*yg))-1)/(yg+1)}function Bd(yg){return function fg(xg){function vg(bg,wg){var Tg=yg((bg=Dd(bg)).h,(wg=Dd(wg)).h),kg=qd(bg.s,wg.s),Sg=qd(bg.l,wg.l),Cg=qd(bg.opacity,wg.opacity);return function(zg){return bg.h=Tg(zg),bg.s=kg(zg),bg.l=Sg(Math.pow(zg,xg)),bg.opacity=Cg(zg),bg+""}}return xg=+xg,vg.gamma=fg,vg}(1)}function Zd(yg,fg){return(fg-=yg=+yg)?function(xg){return(xg-yg)/fg}:Ph(fg)}function Wd(yg){return function(fg,xg){var vg=yg(fg=+fg,xg=+xg);return function(bg){return bg<=fg?0:bg>=xg?1:vg(bg)}}}function Rd(yg){return function(fg,xg){var vg=yg(fg=+fg,xg=+xg);return function(bg){return 0>=bg?fg:1<=bg?xg:vg(bg)}}}function Gd(yg,fg,xg,vg){var bg=yg[0],wg=yg[1],Tg=fg[0],kg=fg[1];return wg<bg?(bg=xg(wg,bg),Tg=vg(kg,Tg)):(bg=xg(bg,wg),Tg=vg(Tg,kg)),function(Sg){return Tg(bg(Sg))}}function Jd(yg,fg,xg,vg){var bg=Math.min(yg.length,fg.length)-1,wg=Array(bg),Tg=Array(bg),kg=-1;for(yg[bg]<yg[0]&&(yg=yg.slice().reverse(),fg=fg.slice().reverse());++kg<bg;)wg[kg]=xg(yg[kg],yg[kg+1]),Tg[kg]=vg(fg[kg],fg[kg+1]);return function(Sg){var Cg=Ap(yg,Sg,1,bg)-1;return Tg[Cg](wg[Cg](Sg))}}function Kd(yg,fg){return fg.domain(yg.domain()).range(yg.range()).interpolate(yg.interpolate()).clamp(yg.clamp())}function Qd(yg,fg){function xg(){return bg=2<Math.min(kg.length,Sg.length)?Jd:Gd,wg=Tg=null,vg}function vg(Mg){return(wg||(wg=bg(kg,Sg,zg?Wd(yg):yg,Cg)))(+Mg)}var bg,wg,Tg,kg=Fh,Sg=Fh,Cg=Th,zg=!1;return vg.invert=function(Mg){return(Tg||(Tg=bg(Sg,kg,Zd,zg?Rd(fg):fg)))(+Mg)},vg.domain=function(Mg){return arguments.length?(kg=E_.call(Mg,Dh),xg()):kg.slice()},vg.range=function(Mg){return arguments.length?(Sg=P_.call(Mg),xg()):Sg.slice()},vg.rangeRound=function(Mg){return Sg=P_.call(Mg),Cg=kh,xg()},vg.clamp=function(Mg){return arguments.length?(zg=!!Mg,xg()):zg},vg.interpolate=function(Mg){return arguments.length?(Cg=Mg,xg()):Cg},xg()}function es(yg){var fg=yg.domain;return yg.ticks=function(xg){var vg=fg();return Dp(vg[0],vg[vg.length-1],null==xg?10:xg)},yg.tickFormat=function(xg,vg){return Lh(fg(),xg,vg)},yg.nice=function(xg){null==xg&&(xg=10);var vg,bg=fg(),wg=0,Tg=bg.length-1,kg=bg[wg],Sg=bg[Tg];return Sg<kg&&(vg=kg,kg=Sg,Sg=vg,vg=wg,wg=Tg,Tg=vg),0<(vg=Ha(kg,Sg,xg))?vg=Ha(kg=Math.floor(kg/vg)*vg,Sg=Math.ceil(Sg/vg)*vg,xg):0>vg&&(vg=Ha(kg=Math.ceil(kg*vg)/vg,Sg=Math.floor(Sg*vg)/vg,xg)),0<vg?(bg[wg]=Math.floor(kg/vg)*vg,bg[Tg]=Math.ceil(Sg/vg)*vg,fg(bg)):0>vg&&(bg[wg]=Math.ceil(kg*vg)/vg,bg[Tg]=Math.floor(Sg*vg)/vg,fg(bg)),yg},yg}function ts(){var yg=Qd(Zd,fh);return yg.copy=function(){return Kd(yg,ts())},es(yg)}function ns(yg,fg){return(fg=Math.log(fg/yg))?function(xg){return Math.log(xg/yg)/fg}:Ph(fg)}function os(yg,fg){return 0>yg?function(xg){return-Math.pow(-fg,xg)*Math.pow(-yg,1-xg)}:function(xg){return Math.pow(fg,xg)*Math.pow(yg,1-xg)}}function as(yg){return isFinite(yg)?+("1e"+yg):0>yg?0:yg}function is(yg){return 10===yg?as:yg===Math.E?Math.exp:function(fg){return Math.pow(yg,fg)}}function ls(yg){return yg===Math.E?Math.log:10===yg&&Math.log10||2===yg&&Math.log2||(yg=Math.log(yg),function(fg){return Math.log(fg)/yg})}function rs(yg){return function(fg){return-yg(-fg)}}function ds(){function yg(){return bg=ls(vg),wg=is(vg),0>xg()[0]&&(bg=rs(bg),wg=rs(wg)),fg}var fg=Qd(ns,os).domain([1,10]),xg=fg.domain,vg=10,bg=ls(10),wg=is(10);return fg.base=function(Tg){return arguments.length?(vg=+Tg,yg()):vg},fg.domain=function(Tg){return arguments.length?(xg(Tg),yg()):xg()},fg.ticks=function(Tg){var kg,Sg=xg(),Cg=Sg[0],zg=Sg[Sg.length-1];(kg=zg<Cg)&&(Yg=Cg,Cg=zg,zg=Yg);var Mg,Ug,Ag,Yg=bg(Cg),Eg=bg(zg),Pg=null==Tg?10:+Tg,Dg=[];if(!(!(vg%1)&&Eg-Yg<Pg))Dg=Dp(Yg,Eg,Math.min(Eg-Yg,Pg)).map(wg);else if(Yg=Math.round(Yg)-1,Eg=Math.round(Eg)+1,0<Cg){for(;Yg<Eg;++Yg)for(Ug=1,Mg=wg(Yg);Ug<vg;++Ug)if(!((Ag=Mg*Ug)<Cg)){if(Ag>zg)break;Dg.push(Ag)}}else for(;Yg<Eg;++Yg)for(Ug=vg-1,Mg=wg(Yg);1<=Ug;--Ug)if(!((Ag=Mg*Ug)<Cg)){if(Ag>zg)break;Dg.push(Ag)}return kg?Dg.reverse():Dg},fg.tickFormat=function(Tg,kg){if(null==kg&&(kg=10===vg?".0e":","),"function"!=typeof kg&&(kg=Pa.format(kg)),Tg===1/0)return kg;null==Tg&&(Tg=10);var Sg=Math.max(1,vg*Tg/fg.ticks().length);return function(Cg){var zg=Cg/wg(Math.round(bg(Cg)));return zg*vg<vg-.5&&(zg*=vg),zg<=Sg?kg(Cg):""}},fg.nice=function(){return xg(Hh(xg(),{floor:function(kg){return wg(Math.floor(bg(kg)))},ceil:function(kg){return wg(Math.ceil(bg(kg)))}}))},fg.copy=function(){return Kd(fg,ds().base(vg))},fg}function ss(yg,fg){return 0>yg?-Math.pow(-yg,fg):Math.pow(yg,fg)}function cs(){var yg=1,fg=Qd(function(vg,bg){return(bg=ss(bg,yg)-(vg=ss(vg,yg)))?function(wg){return(ss(wg,yg)-vg)/bg}:Ph(bg)},function(vg,bg){return bg=ss(bg,yg)-(vg=ss(vg,yg)),function(wg){return ss(vg+bg*wg,1/yg)}}),xg=fg.domain;return fg.exponent=function(vg){return arguments.length?(yg=+vg,xg(xg())):yg},fg.copy=function(){return Kd(fg,cs().exponent(yg))},es(fg)}function us(yg){return new Date(yg)}function ps(yg){return yg instanceof Date?+yg:+new Date(+yg)}function _s(yg,fg,xg,vg,bg,wg,Tg,kg,Sg){function Cg(Ig){return(Tg(Ig)<Ig?Yg:wg(Ig)<Ig?Eg:bg(Ig)<Ig?Pg:vg(Ig)<Ig?Dg:fg(Ig)<Ig?xg(Ig)<Ig?Fg:Lg:yg(Ig)<Ig?Hg:Xg)(Ig)}function zg(Ig,Ng,Og,$g){if(null==Ig&&(Ig=10),"number"==typeof Ig){var jg=Math.abs(Og-Ng)/Ig,Vg=Up(function(Bg){return Bg[2]}).right(qg,jg);Vg===qg.length?($g=Xa(Ng/jh,Og/jh,Ig),Ig=yg):Vg?($g=(Vg=qg[jg/qg[Vg-1][2]<qg[Vg][2]/jg?Vg-1:Vg])[1],Ig=Vg[0]):($g=Xa(Ng,Og,Ig),Ig=kg)}return null==$g?Ig:Ig.every($g)}var Mg=Qd(Zd,fh),Ug=Mg.invert,Ag=Mg.domain,Yg=Sg(".%L"),Eg=Sg(":%S"),Pg=Sg("%I:%M"),Dg=Sg("%I %p"),Fg=Sg("%a %d"),Lg=Sg("%b %d"),Hg=Sg("%B"),Xg=Sg("%Y"),qg=[[Tg,1,Xh],[Tg,5,5*Xh],[Tg,15,15*Xh],[Tg,30,30*Xh],[wg,1,qh],[wg,5,5*qh],[wg,15,15*qh],[wg,30,30*qh],[bg,1,Ih],[bg,3,3*Ih],[bg,6,6*Ih],[bg,12,12*Ih],[vg,1,Nh],[vg,2,2*Nh],[xg,1,Oh],[fg,1,$h],[fg,3,3*$h],[yg,1,jh]];return Mg.invert=function(Ig){return new Date(Ug(Ig))},Mg.domain=function(Ig){return arguments.length?Ag(E_.call(Ig,ps)):Ag().map(us)},Mg.ticks=function(Ig,Ng){var Og,$g=Ag(),jg=$g[0],Vg=$g[$g.length-1],Bg=Vg<jg;return Bg&&(Og=jg,jg=Vg,Vg=Og),Og=zg(Ig,jg,Vg,Ng),Og=Og?Og.range(jg,Vg+1):[],Bg?Og.reverse():Og},Mg.tickFormat=function(Ig,Ng){return null==Ng?Cg:Sg(Ng)},Mg.nice=function(Ig,Ng){var Og=Ag();return(Ig=zg(Ig,Og[0],Og[Og.length-1],Ng))?Ag(Hh(Og,Ig)):Mg},Mg.copy=function(){return Kd(Mg,_s(yg,fg,xg,vg,bg,wg,Tg,kg,Sg))},Mg}function hs(yg){return"translate("+(yg+.5)+",0)"}function ms(yg){return"translate(0,"+(yg+.5)+")"}function gs(yg){var fg=Math.max(0,yg.bandwidth()-1)/2;return yg.round()&&(fg=Math.round(fg)),function(xg){return yg(xg)+fg}}function ys(){return!this.__axis}function fs(yg,fg){function xg(Ug){var Ag=null==bg?fg.ticks?fg.ticks.apply(fg,vg):fg.domain():bg,Yg=null==wg?fg.tickFormat?fg.tickFormat.apply(fg,vg):Zh:wg,Eg=Math.max(Tg,0)+Sg,Pg=fg.range(),Dg=Pg[0]+.5,Fg=Pg[Pg.length-1]+.5,Lg=(fg.bandwidth?gs:Zh)(fg.copy()),Hg=Ug.selection?Ug.selection():Ug,Xg=Hg.selectAll(".domain").data([null]),qg=Hg.selectAll(".tick").data(Ag,fg).order(),Ig=qg.exit(),Ng=qg.enter().append("g").attr("class","tick"),Og=qg.select("line"),$g=qg.select("text");Xg=Xg.merge(Xg.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),qg=qg.merge(Ng),Og=Og.merge(Ng.append("line").attr("stroke","#000").attr(zg+"2",Cg*Tg)),$g=$g.merge(Ng.append("text").attr("fill","#000").attr(zg,Cg*Eg).attr("dy",yg===Wh?"0em":yg===Gh?"0.71em":"0.32em")),Ug!==Hg&&(Xg=Xg.transition(Ug),qg=qg.transition(Ug),Og=Og.transition(Ug),$g=$g.transition(Ug),Ig=Ig.transition(Ug).attr("opacity",Kh).attr("transform",function(jg){return isFinite(jg=Lg(jg))?Mg(jg):this.getAttribute("transform")}),Ng.attr("opacity",Kh).attr("transform",function(jg){var Vg=this.parentNode.__axis;return Mg(Vg&&isFinite(Vg=Vg(jg))?Vg:Lg(jg))})),Ig.remove(),Xg.attr("d",yg===Jh||yg==Rh?"M"+Cg*kg+","+Dg+"H0.5V"+Fg+"H"+Cg*kg:"M"+Dg+","+Cg*kg+"V0.5H"+Fg+"V"+Cg*kg),qg.attr("opacity",1).attr("transform",function(jg){return Mg(Lg(jg))}),Og.attr(zg+"2",Cg*Tg),$g.attr(zg,Cg*Eg).text(Yg),Hg.filter(ys).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",yg===Rh?"start":yg===Jh?"end":"middle"),Hg.each(function(){this.__axis=Lg})}var vg=[],bg=null,wg=null,Tg=6,kg=6,Sg=3,Cg=yg===Wh||yg===Jh?-1:1,zg=yg===Jh||yg===Rh?"x":"y",Mg=yg===Wh||yg===Gh?hs:ms;return xg.scale=function(Ug){return arguments.length?(fg=Ug,xg):fg},xg.ticks=function(){return vg=Bh.call(arguments),xg},xg.tickArguments=function(Ug){return arguments.length?(vg=null==Ug?[]:Bh.call(Ug),xg):vg.slice()},xg.tickValues=function(Ug){return arguments.length?(bg=null==Ug?null:Bh.call(Ug),xg):bg&&bg.slice()},xg.tickFormat=function(Ug){return arguments.length?(wg=Ug,xg):wg},xg.tickSize=function(Ug){return arguments.length?(Tg=kg=+Ug,xg):Tg},xg.tickSizeInner=function(Ug){return arguments.length?(Tg=+Ug,xg):Tg},xg.tickSizeOuter=function(Ug){return arguments.length?(kg=+Ug,xg):kg},xg.tickPadding=function(Ug){return arguments.length?(Sg=+Ug,xg):Sg},xg}function xs(){for(var yg,fg=0,xg=arguments.length,vg={};fg<xg;++fg){if(!(yg=arguments[fg]+"")||yg in vg)throw new Error("illegal type: "+yg);vg[yg]=[]}return new vs(vg)}function vs(yg){this._=yg}function bs(yg,fg){return yg.trim().split(/^|\s+/).map(function(xg){var vg="",bg=xg.indexOf(".");if(0<=bg&&(vg=xg.slice(bg+1),xg=xg.slice(0,bg)),xg&&!fg.hasOwnProperty(xg))throw new Error("unknown type: "+xg);return{type:xg,name:vg}})}function ws(yg,fg){for(var xg,vg=0,bg=yg.length;vg<bg;++vg)if((xg=yg[vg]).name===fg)return xg.value}function Ts(yg,fg,xg){for(var vg=0,bg=yg.length;vg<bg;++vg)if(yg[vg].name===fg){yg[vg]=Qh,yg=yg.slice(0,vg).concat(yg.slice(vg+1));break}return null!=xg&&yg.push({name:fg,value:xg}),yg}function ks(yg){return function(){var fg=this.ownerDocument,xg=this.namespaceURI;return xg===em&&fg.documentElement.namespaceURI===em?fg.createElement(yg):fg.createElementNS(xg,yg)}}function Ss(yg){return function(){return this.ownerDocument.createElementNS(yg.space,yg.local)}}function Cs(yg,fg,xg){return yg=zs(yg,fg,xg),function(vg){var bg=vg.relatedTarget;bg&&(bg===this||8&bg.compareDocumentPosition(this))||yg.call(this,vg)}}function zs(yg,fg,xg){return function(vg){var bg=Pa.event;Pa.event=vg;try{yg.call(this,this.__data__,fg,xg)}finally{Pa.event=bg}}}function Ms(yg){return yg.trim().split(/^|\s+/).map(function(fg){var xg="",vg=fg.indexOf(".");return 0<=vg&&(xg=fg.slice(vg+1),fg=fg.slice(0,vg)),{type:fg,name:xg}})}function Us(yg){return function(){var fg=this.__on;if(fg){for(var xg,vg=0,bg=-1,wg=fg.length;vg<wg;++vg)xg=fg[vg],yg.type&&xg.type!==yg.type||xg.name!==yg.name?fg[++bg]=xg:this.removeEventListener(xg.type,xg.listener,xg.capture);++bg?fg.length=bg:delete this.__on}}}function As(yg,fg,xg){var vg=dm.hasOwnProperty(yg.type)?Cs:zs;return function(bg,wg,Tg){var kg,Sg=this.__on,Cg=vg(fg,wg,Tg);if(Sg)for(var zg=0,Mg=Sg.length;zg<Mg;++zg)if((kg=Sg[zg]).type===yg.type&&kg.name===yg.name)return this.removeEventListener(kg.type,kg.listener,kg.capture),this.addEventListener(kg.type,kg.listener=Cg,kg.capture=xg),void(kg.value=fg);this.addEventListener(yg.type,Cg,xg),kg={type:yg.type,name:yg.name,value:fg,listener:Cg,capture:xg},Sg?Sg.push(kg):this.__on=[kg]}}function Ys(yg,fg,xg,vg){var bg=Pa.event;yg.sourceEvent=Pa.event,Pa.event=yg;try{return fg.apply(xg,vg)}finally{Pa.event=bg}}function Es(){}function Ps(){return[]}function Ds(yg,fg){this.ownerDocument=yg.ownerDocument,this.namespaceURI=yg.namespaceURI,this._next=null,this._parent=yg,this.__data__=fg}function Fs(yg,fg,xg,vg,bg,wg){for(var Tg,kg=0,Sg=fg.length,Cg=wg.length;kg<Cg;++kg)(Tg=fg[kg])?(Tg.__data__=wg[kg],vg[kg]=Tg):xg[kg]=new Ds(yg,wg[kg]);for(;kg<Sg;++kg)(Tg=fg[kg])&&(bg[kg]=Tg)}function Ls(yg,fg,xg,vg,bg,wg,Tg){var kg,Sg,Cg,zg={},Mg=fg.length,Ug=wg.length,Ag=Array(Mg);for(kg=0;kg<Mg;++kg)(Sg=fg[kg])&&(Ag[kg]=Cg=gm+Tg.call(Sg,Sg.__data__,kg,fg),Cg in zg?bg[kg]=Sg:zg[Cg]=Sg);for(kg=0;kg<Ug;++kg)(Sg=zg[Cg=gm+Tg.call(yg,wg[kg],kg,wg)])?(vg[kg]=Sg,Sg.__data__=wg[kg],zg[Cg]=null):xg[kg]=new Ds(yg,wg[kg]);for(kg=0;kg<Mg;++kg)(Sg=fg[kg])&&zg[Ag[kg]]===Sg&&(bg[kg]=Sg)}function Hs(yg,fg){return yg<fg?-1:yg>fg?1:yg>=fg?0:NaN}function Xs(yg){return function(){this.removeAttribute(yg)}}function qs(yg){return function(){this.removeAttributeNS(yg.space,yg.local)}}function Is(yg,fg){return function(){this.setAttribute(yg,fg)}}function Ns(yg,fg){return function(){this.setAttributeNS(yg.space,yg.local,fg)}}function Os(yg,fg){return function(){var xg=fg.apply(this,arguments);null==xg?this.removeAttribute(yg):this.setAttribute(yg,xg)}}function $s(yg,fg){return function(){var xg=fg.apply(this,arguments);null==xg?this.removeAttributeNS(yg.space,yg.local):this.setAttributeNS(yg.space,yg.local,xg)}}function js(yg){return function(){this.style.removeProperty(yg)}}function Vs(yg,fg,xg){return function(){this.style.setProperty(yg,fg,xg)}}function Bs(yg,fg,xg){return function(){var vg=fg.apply(this,arguments);null==vg?this.style.removeProperty(yg):this.style.setProperty(yg,vg,xg)}}function Zs(yg,fg){return yg.style.getPropertyValue(fg)||ym(yg).getComputedStyle(yg,null).getPropertyValue(fg)}function Ws(yg){return function(){delete this[yg]}}function Rs(yg,fg){return function(){this[yg]=fg}}function Gs(yg,fg){return function(){var xg=fg.apply(this,arguments);null==xg?delete this[yg]:this[yg]=xg}}function Js(yg){return yg.trim().split(/^|\s+/)}function Ks(yg){return yg.classList||new Qs(yg)}function Qs(yg){this._node=yg,this._names=Js(yg.getAttribute("class")||"")}function ec(yg,fg){for(var xg=Ks(yg),vg=-1,bg=fg.length;++vg<bg;)xg.add(fg[vg])}function tc(yg,fg){for(var xg=Ks(yg),vg=-1,bg=fg.length;++vg<bg;)xg.remove(fg[vg])}function nc(yg){return function(){ec(this,yg)}}function oc(yg){return function(){tc(this,yg)}}function ac(yg,fg){return function(){(fg.apply(this,arguments)?ec:tc)(this,yg)}}function ic(){this.textContent=""}function lc(yg){return function(){this.textContent=yg}}function rc(yg){return function(){var fg=yg.apply(this,arguments);this.textContent=null==fg?"":fg}}function dc(){this.innerHTML=""}function sc(yg){return function(){this.innerHTML=yg}}function cc(yg){return function(){var fg=yg.apply(this,arguments);this.innerHTML=null==fg?"":fg}}function uc(){this.nextSibling&&this.parentNode.appendChild(this)}function pc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _c(){return null}function hc(){var yg=this.parentNode;yg&&yg.removeChild(this)}function mc(yg,fg,xg){var vg=ym(yg),bg=vg.CustomEvent;"function"==typeof bg?bg=new bg(fg,xg):(bg=vg.document.createEvent("Event"),xg?(bg.initEvent(fg,xg.bubbles,xg.cancelable),bg.detail=xg.detail):bg.initEvent(fg,!1,!1)),yg.dispatchEvent(bg)}function gc(yg,fg){return function(){return mc(this,yg,fg)}}function yc(yg,fg){return function(){return mc(this,yg,fg.apply(this,arguments))}}function fc(yg,fg){this._groups=yg,this._parents=fg}function xc(){return new fc([[document.documentElement]],fm)}function vc(){Pa.event.stopImmediatePropagation()}function bc(yg,fg){var xg=yg.document.documentElement,vg=xm(yg).on("dragstart.drag",null);fg&&(vg.on("click.drag",bm,!0),setTimeout(function(){vg.on("click.drag",null)},0)),"onselectstart"in xg?vg.on("selectstart.drag",null):(xg.style.MozUserSelect=xg.__noselect,delete xg.__noselect)}function wc(yg,fg,xg,vg,bg,wg,Tg,kg,Sg,Cg){this.target=yg,this.type=fg,this.subject=xg,this.identifier=vg,this.active=bg,this.x=wg,this.y=Tg,this.dx=kg,this.dy=Sg,this._=Cg}function Tc(){return!Pa.event.button}function kc(){return this.parentNode}function Sc(yg){return null==yg?{x:Pa.event.x,y:Pa.event.y}:yg}function Cc(){return Ym||(Dm(zc),Ym=Pm.now()+Em)}function zc(){Ym=0}function Mc(){this._call=this._time=this._next=null}function Uc(yg,fg,xg){var vg=new Mc;return vg.restart(yg,fg,xg),vg}function Ac(){Cc(),++Cm;for(var yg,fg=km;fg;)0<=(yg=Ym-fg._time)&&fg._call.call(null,yg),fg=fg._next;--Cm}function Yc(){Ym=(Am=Pm.now())+Em,Cm=zm=0;try{Ac()}finally{Cm=0,Pc(),Ym=0}}function Ec(){var yg=Pm.now(),fg=yg-Am;fg>Um&&(Em-=fg,Am=yg)}function Pc(){for(var yg,fg,xg=km,vg=1/0;xg;)xg._call?(vg>xg._time&&(vg=xg._time),yg=xg,xg=xg._next):(fg=xg._next,xg._next=null,xg=yg?yg._next=fg:km=fg);Sm=yg,Dc(vg)}function Dc(yg){if(!Cm){zm&&(zm=clearTimeout(zm));var fg=yg-Ym;24<fg?(yg<1/0&&(zm=setTimeout(Yc,fg)),Mm&&(Mm=clearInterval(Mm))):(Mm||(Am=Ym,Mm=setInterval(Ec,Um)),Cm=1,Dm(Yc))}}function Fc(yg,fg){var xg=yg.__transition;if(!xg||!(xg=xg[fg])||xg.state>Xm)throw new Error("too late");return xg}function Lc(yg,fg){var xg=yg.__transition;if(!xg||!(xg=xg[fg])||xg.state>Im)throw new Error("too late");return xg}function Hc(yg,fg){var xg=yg.__transition;if(!xg||!(xg=xg[fg]))throw new Error("too late");return xg}function Xc(yg,fg,xg){function vg(Sg){var Cg,zg,Mg,Ug;if(xg.state!==qm)return wg();for(Cg in kg)if((Ug=kg[Cg]).name===xg.name){if(Ug.state===Nm)return Fm(vg);Ug.state===Om?(Ug.state=jm,Ug.timer.stop(),Ug.on.call("interrupt",yg,yg.__data__,Ug.index,Ug.group),delete kg[Cg]):+Cg<fg&&(Ug.state=jm,Ug.timer.stop(),delete kg[Cg])}if(Fm(function(){xg.state===Nm&&(xg.state=Om,xg.timer.restart(bg,xg.delay,xg.time),bg(Sg))}),xg.state=Im,xg.on.call("start",yg,yg.__data__,xg.index,xg.group),xg.state===Im){for(xg.state=Nm,Tg=Array(Mg=xg.tween.length),Cg=0,zg=-1;Cg<Mg;++Cg)(Ug=xg.tween[Cg].value.call(yg,yg.__data__,xg.index,xg.group))&&(Tg[++zg]=Ug);Tg.length=zg+1}}function bg(Sg){for(var Cg=Sg<xg.duration?xg.ease.call(null,Sg/xg.duration):(xg.timer.restart(wg),xg.state=$m,1),zg=-1,Mg=Tg.length;++zg<Mg;)Tg[zg].call(null,Cg);xg.state===$m&&(xg.on.call("end",yg,yg.__data__,xg.index,xg.group),wg())}function wg(){for(var Sg in xg.state=jm,xg.timer.stop(),delete kg[fg],kg)return;delete yg.__transition}var Tg,kg=yg.__transition;kg[fg]=xg,xg.timer=Uc(function(Sg){xg.state=qm,xg.timer.restart(vg,xg.delay,xg.time),xg.delay<=Sg&&vg(Sg-xg.delay)},0,xg.time)}function qc(yg,fg){var xg,vg;return function(){var bg=Lc(this,yg),wg=bg.tween;if(wg!==xg)for(var Tg=0,kg=(vg=xg=wg).length;Tg<kg;++Tg)if(vg[Tg].name===fg){(vg=vg.slice()).splice(Tg,1);break}bg.tween=vg}}function Ic(yg,fg,xg){var vg,bg;if("function"!=typeof xg)throw new Error;return function(){var wg=Lc(this,yg),Tg=wg.tween;if(Tg!==vg){bg=(vg=Tg).slice();for(var kg={name:fg,value:xg},Sg=0,Cg=bg.length;Sg<Cg;++Sg)if(bg[Sg].name===fg){bg[Sg]=kg;break}Sg===Cg&&bg.push(kg)}wg.tween=bg}}function Nc(yg,fg,xg){var vg=yg._id;return yg.each(function(){var bg=Lc(this,vg);(bg.value||(bg.value={}))[fg]=xg.apply(this,arguments)}),function(bg){return Hc(bg,vg).value[fg]}}function Oc(yg){return function(){this.removeAttribute(yg)}}function $c(yg){return function(){this.removeAttributeNS(yg.space,yg.local)}}function jc(yg,fg,xg){var vg,bg;return function(){var wg=this.getAttribute(yg);return wg===xg?null:wg===vg?bg:bg=fg(vg=wg,xg)}}function Vc(yg,fg,xg){var vg,bg;return function(){var wg=this.getAttributeNS(yg.space,yg.local);return wg===xg?null:wg===vg?bg:bg=fg(vg=wg,xg)}}function Bc(yg,fg,xg){var vg,bg,wg;return function(){var Tg,kg=xg(this);{if(null!=kg)return(Tg=this.getAttribute(yg))===kg?null:Tg===vg&&kg===bg?wg:wg=fg(vg=Tg,bg=kg);this.removeAttribute(yg)}}}function Zc(yg,fg,xg){var vg,bg,wg;return function(){var Tg,kg=xg(this);{if(null!=kg)return(Tg=this.getAttributeNS(yg.space,yg.local))===kg?null:Tg===vg&&kg===bg?wg:wg=fg(vg=Tg,bg=kg);this.removeAttributeNS(yg.space,yg.local)}}}function Wc(yg,fg){function xg(){var vg=this,bg=fg.apply(vg,arguments);return bg&&function(wg){vg.setAttributeNS(yg.space,yg.local,bg(wg))}}return xg._value=fg,xg}function Rc(yg,fg){function xg(){var vg=this,bg=fg.apply(vg,arguments);return bg&&function(wg){vg.setAttribute(yg,bg(wg))}}return xg._value=fg,xg}function Gc(yg,fg){return function(){Fc(this,yg).delay=+fg.apply(this,arguments)}}function Jc(yg,fg){return fg=+fg,function(){Fc(this,yg).delay=fg}}function Kc(yg,fg){return function(){Lc(this,yg).duration=+fg.apply(this,arguments)}}function Qc(yg,fg){return fg=+fg,function(){Lc(this,yg).duration=fg}}function ep(yg,fg){if("function"!=typeof fg)throw new Error;return function(){Lc(this,yg).ease=fg}}function tp(yg){return(yg+"").trim().split(/^|\s+/).every(function(fg){var xg=fg.indexOf(".");return 0<=xg&&(fg=fg.slice(0,xg)),!fg||"start"===fg})}function np(yg,fg,xg){var vg,bg,wg=tp(fg)?Fc:Lc;return function(){var Tg=wg(this,yg),kg=Tg.on;kg!==vg&&(bg=(vg=kg).copy()).on(fg,xg),Tg.on=bg}}function op(yg){return function(){var fg=this.parentNode;for(var xg in this.__transition)if(+xg!==yg)return;fg&&fg.removeChild(this)}}function ap(yg,fg){var xg,vg,bg;return function(){var wg=Zs(this,yg),Tg=(this.style.removeProperty(yg),Zs(this,yg));return wg===Tg?null:wg===xg&&Tg===vg?bg:bg=fg(xg=wg,vg=Tg)}}function ip(yg){return function(){this.style.removeProperty(yg)}}function lp(yg,fg,xg){var vg,bg;return function(){var wg=Zs(this,yg);return wg===xg?null:wg===vg?bg:bg=fg(vg=wg,xg)}}function rp(yg,fg,xg){var vg,bg,wg;return function(){var Tg=Zs(this,yg),kg=xg(this);return null==kg&&(this.style.removeProperty(yg),kg=Zs(this,yg)),Tg===kg?null:Tg===vg&&kg===bg?wg:wg=fg(vg=Tg,bg=kg)}}function dp(yg,fg,xg){function vg(){var bg=this,wg=fg.apply(bg,arguments);return wg&&function(Tg){bg.style.setProperty(yg,wg(Tg),xg)}}return vg._value=fg,vg}function sp(yg){return function(){this.textContent=yg}}function cp(yg){return function(){var fg=yg(this);this.textContent=null==fg?"":fg}}function up(yg,fg,xg,vg){this._groups=yg,this._parents=fg,this._name=xg,this._id=vg}function pp(){return++Rm}function hp(yg,fg){for(var xg;!(xg=yg.__transition)||!(xg=xg[fg]);)if(!(yg=yg.parentNode))return Km.time=Cc(),Km;return xg}function mp(yg,fg,xg){this.target=yg,this.type=fg,this.transform=xg}function gp(yg,fg,xg){this.k=yg,this.x=fg,this.y=xg}function yp(){Pa.event.stopImmediatePropagation()}function fp(){return!Pa.event.button}function xp(){var yg,fg,xg=this;return xg instanceof SVGElement?(yg=(xg=xg.ownerSVGElement||xg).width.baseVal.value,fg=xg.height.baseVal.value):(yg=xg.clientWidth,fg=xg.clientHeight),[[0,0],[yg,fg]]}function vp(){return this.__zoom||eg}function bp(){Pa.event.stopImmediatePropagation()}function wp(yg){return{type:yg}}function Tp(){return!Pa.event.button}function kp(){var yg=this.ownerSVGElement||this;return[[0,0],[yg.width.baseVal.value,yg.height.baseVal.value]]}function Sp(yg){for(;!yg.__brush;)if(!(yg=yg.parentNode))return;return yg.__brush}function Cp(yg){return yg[0][0]===yg[1][0]||yg[0][1]===yg[1][1]}function zp(yg){function fg(Ug){var Ag=Ug.property("__brush",Tg).selectAll(".overlay").data([wp("overlay")]);Ag.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",pg.overlay).merge(Ag).each(function(){var Eg=Sp(this).extent;xm(this).attr("x",Eg[0][0]).attr("y",Eg[0][1]).attr("width",Eg[1][0]-Eg[0][0]).attr("height",Eg[1][1]-Eg[0][1])}),Ug.selectAll(".selection").data([wp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",pg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Yg=Ug.selectAll(".handle").data(yg.handles,function(Eg){return Eg.type});Yg.exit().remove(),Yg.enter().append("rect").attr("class",function(Eg){return"handle handle--"+Eg.type}).attr("cursor",function(Eg){return pg[Eg.type]}),Ug.each(xg).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",wg)}function xg(){var Ug=xm(this),Ag=Sp(this).selection;Ag?(Ug.selectAll(".selection").style("display",null).attr("x",Ag[0][0]).attr("y",Ag[0][1]).attr("width",Ag[1][0]-Ag[0][0]).attr("height",Ag[1][1]-Ag[0][1]),Ug.selectAll(".handle").style("display",null).attr("x",function(Yg){return"e"===Yg.type[Yg.type.length-1]?Ag[1][0]-Mg/2:Ag[0][0]-Mg/2}).attr("y",function(Yg){return"s"===Yg.type[0]?Ag[1][1]-Mg/2:Ag[0][1]-Mg/2}).attr("width",function(Yg){return"n"===Yg.type||"s"===Yg.type?Ag[1][0]-Ag[0][0]+Mg:Mg}).attr("height",function(Yg){return"e"===Yg.type||"w"===Yg.type?Ag[1][1]-Ag[0][1]+Mg:Mg})):Ug.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function vg(Ug,Ag){return Ug.__brush.emitter||new bg(Ug,Ag)}function bg(Ug,Ag){this.that=Ug,this.args=Ag,this.state=Ug.__brush,this.active=0}function wg(){function Ug(){var cy=um(Vg);!oy||$g||jg||(Math.abs(cy[0]-iy[0])>Math.abs(cy[1]-iy[1])?jg=!0:$g=!0),iy=cy,Og=!0,ag(),Ag()}function Ag(){var cy;switch(Ig=iy[0]-ay[0],Ng=iy[1]-ay[1],Zg){case lg:case ig:Wg&&(Ig=Math.max(Qg-Eg,Math.min(ty-Lg,Ig)),Pg=Eg+Ig,Hg=Lg+Ig),Rg&&(Ng=Math.max(ey-Dg,Math.min(ny-Xg,Ng)),Fg=Dg+Ng,qg=Xg+Ng);break;case rg:0>Wg?(Ig=Math.max(Qg-Eg,Math.min(ty-Eg,Ig)),Pg=Eg+Ig,Hg=Lg):0<Wg&&(Ig=Math.max(Qg-Lg,Math.min(ty-Lg,Ig)),Pg=Eg,Hg=Lg+Ig),0>Rg?(Ng=Math.max(ey-Dg,Math.min(ny-Dg,Ng)),Fg=Dg+Ng,qg=Xg):0<Rg&&(Ng=Math.max(ey-Xg,Math.min(ny-Xg,Ng)),Fg=Dg,qg=Xg+Ng);break;case dg:Wg&&(Pg=Math.max(Qg,Math.min(ty,Eg-Ig*Wg)),Hg=Math.max(Qg,Math.min(ty,Lg+Ig*Wg))),Rg&&(Fg=Math.max(ey,Math.min(ny,Dg-Ng*Rg)),qg=Math.max(ey,Math.min(ny,Xg+Ng*Rg)));}Hg<Pg&&(Wg*=-1,cy=Eg,Eg=Lg,Lg=cy,cy=Pg,Pg=Hg,Hg=cy,Bg in _g&&dy.attr("cursor",pg[Bg=_g[Bg]])),qg<Fg&&(Rg*=-1,cy=Dg,Dg=Xg,Xg=cy,cy=Fg,Fg=qg,qg=cy,Bg in hg&&dy.attr("cursor",pg[Bg=hg[Bg]])),Gg.selection&&(Kg=Gg.selection),$g&&(Pg=Kg[0][0],Hg=Kg[1][0]),jg&&(Fg=Kg[0][1],qg=Kg[1][1]),Kg[0][0]===Pg&&Kg[0][1]===Fg&&Kg[1][0]===Hg&&Kg[1][1]===qg||(Gg.selection=[[Pg,Fg],[Hg,qg]],xg.call(Vg),ly.brush())}function Yg(){if(bp(),Pa.event.touches){if(Pa.event.touches.length)return;kg&&clearTimeout(kg),kg=setTimeout(function(){kg=null},500),ry.on("touchmove.brush touchend.brush touchcancel.brush",null)}else bc(Pa.event.view,Og),sy.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ry.attr("pointer-events","all"),dy.attr("cursor",pg.overlay),Gg.selection&&(Kg=Gg.selection),Cp(Kg)&&(Gg.selection=null,xg.call(Vg)),ly.end()}if(Pa.event.touches){if(Pa.event.changedTouches.length<Pa.event.touches.length)return ag();}else if(kg)return;if(Cg.apply(this,arguments)){var Eg,Pg,Dg,Fg,Lg,Hg,Xg,qg,Ig,Ng,Og,$g,jg,Vg=this,Bg=Pa.event.target.__data__.type,Zg="selection"===(Pa.event.metaKey?Bg="overlay":Bg)?ig:Pa.event.altKey?dg:rg,Wg=yg===cg?null:mg[Bg],Rg=yg===sg?null:gg[Bg],Gg=Sp(Vg),Jg=Gg.extent,Kg=Gg.selection,Qg=Jg[0][0],ey=Jg[0][1],ty=Jg[1][0],ny=Jg[1][1],oy=Wg&&Rg&&Pa.event.shiftKey,ay=um(Vg),iy=ay,ly=vg(Vg,arguments).beforestart();"overlay"===Bg?Gg.selection=Kg=[[Eg=yg===cg?Qg:ay[0],Dg=yg===sg?ey:ay[1]],[Lg=yg===cg?ty:Eg,Xg=yg===sg?ny:Dg]]:(Eg=Kg[0][0],Dg=Kg[0][1],Lg=Kg[1][0],Xg=Kg[1][1]),Pg=Eg,Fg=Dg,Hg=Lg,qg=Xg;var ry=xm(Vg).attr("pointer-events","none"),dy=ry.selectAll(".overlay").attr("cursor",pg[Bg]);if(Pa.event.touches)ry.on("touchmove.brush",Ug,!0).on("touchend.brush touchcancel.brush",Yg,!0);else{var sy=xm(Pa.event.view).on("keydown.brush",function(){switch(Pa.event.keyCode){case 16:oy=Wg&&Rg;break;case 18:Zg===rg&&(Wg&&(Lg=Hg-Ig*Wg,Eg=Pg+Ig*Wg),Rg&&(Xg=qg-Ng*Rg,Dg=Fg+Ng*Rg),Zg=dg,Ag());break;case 32:Zg!==rg&&Zg!==dg||(0>Wg?Lg=Hg-Ig:0<Wg&&(Eg=Pg-Ig),0>Rg?Xg=qg-Ng:0<Rg&&(Dg=Fg-Ng),Zg=lg,dy.attr("cursor",pg.selection),Ag());break;default:return;}ag()},!0).on("keyup.brush",function(){switch(Pa.event.keyCode){case 16:oy&&($g=jg=oy=!1,Ag());break;case 18:Zg===dg&&(0>Wg?Lg=Hg:0<Wg&&(Eg=Pg),0>Rg?Xg=qg:0<Rg&&(Dg=Fg),Zg=rg,Ag());break;case 32:Zg===lg&&(Pa.event.altKey?(Wg&&(Lg=Hg-Ig*Wg,Eg=Pg+Ig*Wg),Rg&&(Xg=qg-Ng*Rg,Dg=Fg+Ng*Rg),Zg=dg):(0>Wg?Lg=Hg:0<Wg&&(Eg=Pg),0>Rg?Xg=qg:0<Rg&&(Dg=Fg),Zg=rg),dy.attr("cursor",pg[Bg]),Ag());break;default:return;}ag()},!0).on("mousemove.brush",Ug,!0).on("mouseup.brush",Yg,!0);wm(Pa.event.view)}bp(),Bm(Vg),xg.call(Vg),ly.start()}}function Tg(){var Ug=this.__brush||{selection:null};return Ug.extent=Sg.apply(this,arguments),Ug.dim=yg,Ug}var kg,Sg=kp,Cg=Tp,zg=xs(fg,"start","brush","end"),Mg=6;return fg.move=function(Ug,Ag){Ug.selection?Ug.on("start.brush",function(){vg(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){vg(this,arguments).end()}).tween("brush",function(){function Yg(Xg){Pg.selection=1===Xg&&Cp(Lg)?null:Hg(Xg),xg.call(Eg),Dg.brush()}var Eg=this,Pg=Eg.__brush,Dg=vg(Eg,arguments),Fg=Pg.selection,Lg=yg.input("function"==typeof Ag?Ag.apply(this,arguments):Ag,Pg.extent),Hg=Th(Fg,Lg);return Fg&&Lg?Yg:Yg(1)}):Ug.each(function(){var Yg=this,Eg=arguments,Pg=Yg.__brush,Dg=yg.input("function"==typeof Ag?Ag.apply(Yg,Eg):Ag,Pg.extent),Fg=vg(Yg,Eg).beforestart();Bm(Yg),Pg.selection=null==Dg||Cp(Dg)?null:Dg,xg.call(Yg),Fg.start().brush().end()})},bg.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Ag){Ys(new og(fg,Ag,yg.output(this.state.selection)),zg.apply,zg,[Ag,this.that,this.args])}},fg.extent=function(Ug){return arguments.length?(Sg="function"==typeof Ug?Ug:ng([[+Ug[0][0],+Ug[0][1]],[+Ug[1][0],+Ug[1][1]]]),fg):Sg},fg.filter=function(Ug){return arguments.length?(Cg="function"==typeof Ug?Ug:ng(!!Ug),fg):Cg},fg.handleSize=function(Ug){return arguments.length?(Mg=+Ug,fg):Mg},fg.on=function(){var Ug=zg.on.apply(zg,arguments);return Ug===zg?fg:Ug},fg}var Mp=function(fg,xg){return fg<xg?-1:fg>xg?1:fg>=xg?0:NaN},Up=function(fg){return 1===fg.length&&(fg=La(fg)),{left:function(vg,bg,wg,Tg){for(null==wg&&(wg=0),null==Tg&&(Tg=vg.length);wg<Tg;){var kg=wg+Tg>>>1;0>fg(vg[kg],bg)?wg=kg+1:Tg=kg}return wg},right:function(vg,bg,wg,Tg){for(null==wg&&(wg=0),null==Tg&&(Tg=vg.length);wg<Tg;){var kg=wg+Tg>>>1;0<fg(vg[kg],bg)?Tg=kg:wg=kg+1}return wg}}},Ap=Up(Mp).right,Yp=Math.sqrt(50),Ep=Math.sqrt(10),Pp=Math.sqrt(2),Dp=function(fg,xg,vg){var bg,wg,Tg,kg=xg<fg,Sg=-1;if(kg&&(bg=fg,fg=xg,xg=bg),0===(Tg=Ha(fg,xg,vg))||!isFinite(Tg))return[];if(0<Tg)for(fg=Math.ceil(fg/Tg),xg=Math.floor(xg/Tg),wg=Array(bg=Math.ceil(xg-fg+1));++Sg<bg;)wg[Sg]=(fg+Sg)*Tg;else for(fg=Math.floor(fg*Tg),xg=Math.ceil(xg*Tg),wg=Array(bg=Math.ceil(fg-xg+1));++Sg<bg;)wg[Sg]=(fg-Sg)/Tg;return kg&&wg.reverse(),wg},Fp=Math.PI,Lp=2*Fp;qa.prototype=Ia.prototype={constructor:qa,moveTo:function(fg,xg){this._+="M"+(this._x0=this._x1=+fg)+","+(this._y0=this._y1=+xg)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(fg,xg){this._+="L"+(this._x1=+fg)+","+(this._y1=+xg)},quadraticCurveTo:function(fg,xg,vg,bg){this._+="Q"+ +fg+","+ +xg+","+(this._x1=+vg)+","+(this._y1=+bg)},bezierCurveTo:function(fg,xg,vg,bg,wg,Tg){this._+="C"+ +fg+","+ +xg+","+ +vg+","+ +bg+","+(this._x1=+wg)+","+(this._y1=+Tg)},arcTo:function(fg,xg,vg,bg,wg){fg=+fg,xg=+xg,vg=+vg,bg=+bg,wg=+wg;var Tg=this._x1,kg=this._y1,Sg=vg-fg,Cg=bg-xg,zg=Tg-fg,Mg=kg-xg,Ug=zg*zg+Mg*Mg;if(0>wg)throw new Error("negative radius: "+wg);if(null===this._x1)this._+="M"+(this._x1=fg)+","+(this._y1=xg);else if(!(1e-6<Ug));else if(1e-6<Math.abs(Mg*Sg-Cg*zg)&&wg){var Ag=vg-Tg,Yg=bg-kg,Eg=Sg*Sg+Cg*Cg,Dg=Math.sqrt(Eg),Fg=Math.sqrt(Ug),Lg=wg*Math.tan((Fp-Math.acos((Eg+Ug-(Ag*Ag+Yg*Yg))/(2*Dg*Fg)))/2),Hg=Lg/Fg,Xg=Lg/Dg;1e-6<Math.abs(Hg-1)&&(this._+="L"+(fg+Hg*zg)+","+(xg+Hg*Mg)),this._+="A"+wg+","+wg+",0,0,"+ +(Mg*Ag>zg*Yg)+","+(this._x1=fg+Xg*Sg)+","+(this._y1=xg+Xg*Cg)}else this._+="L"+(this._x1=fg)+","+(this._y1=xg)},arc:function(fg,xg,vg,bg,wg,Tg){fg=+fg,xg=+xg;var kg=(vg=+vg)*Math.cos(bg),Sg=vg*Math.sin(bg),Cg=fg+kg,zg=xg+Sg,Mg=1^Tg,Ug=Tg?bg-wg:wg-bg;if(0>vg)throw new Error("negative radius: "+vg);null===this._x1?this._+="M"+Cg+","+zg:(1e-6<Math.abs(this._x1-Cg)||1e-6<Math.abs(this._y1-zg))&&(this._+="L"+Cg+","+zg),vg&&(0>Ug&&(Ug=Ug%Lp+Lp),Ug>Lp-1e-6?this._+="A"+vg+","+vg+",0,1,"+Mg+","+(fg-kg)+","+(xg-Sg)+"A"+vg+","+vg+",0,1,"+Mg+","+(this._x1=Cg)+","+(this._y1=zg):1e-6<Ug&&(this._+="A"+vg+","+vg+",0,"+ +(Ug>=Fp)+","+Mg+","+(this._x1=fg+vg*Math.cos(wg))+","+(this._y1=xg+vg*Math.sin(wg))))},rect:function(fg,xg,vg,bg){this._+="M"+(this._x0=this._x1=+fg)+","+(this._y0=this._y1=+xg)+"h"+ +vg+"v"+ +bg+"h"+-vg+"Z"},toString:function(){return this._}};var Xp=function(fg){return function(){return fg}},qp=1e-12;Oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;default:this._context.lineTo(fg,xg);}}};var Ip=function(fg){return new Oa(fg)},Np=function(){function fg(Sg){var Cg,zg,Mg,Ug=Sg.length,Ag=!1;for(null==wg&&(kg=Tg(Mg=Ia())),Cg=0;Cg<=Ug;++Cg)!(Cg<Ug&&bg(zg=Sg[Cg],Cg,Sg))===Ag&&((Ag=!Ag)?kg.lineStart():kg.lineEnd()),Ag&&kg.point(+xg(zg,Cg,Sg),+vg(zg,Cg,Sg));if(Mg)return kg=null,Mg+""||null}var xg=$a,vg=ja,bg=Xp(!0),wg=null,Tg=Ip,kg=null;return fg.x=function(Sg){return arguments.length?(xg="function"==typeof Sg?Sg:Xp(+Sg),fg):xg},fg.y=function(Sg){return arguments.length?(vg="function"==typeof Sg?Sg:Xp(+Sg),fg):vg},fg.defined=function(Sg){return arguments.length?(bg="function"==typeof Sg?Sg:Xp(!!Sg),fg):bg},fg.curve=function(Sg){return arguments.length?(Tg=Sg,null!=wg&&(kg=Tg(wg)),fg):Tg},fg.context=function(Sg){return arguments.length?(null==Sg?wg=kg=null:kg=Tg(wg=Sg),fg):wg},fg};Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Va(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Va(this,fg,xg);}this._x0=this._x1,this._x1=fg,this._y0=this._y1,this._y1=xg}},Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Za(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2,this._x1=fg,this._y1=xg;break;case 2:this._point=3;default:Za(this,fg,xg);}this._x0=this._x1,this._x1=this._x2,this._x2=fg,this._y0=this._y1,this._y1=this._y2,this._y2=xg}};var Op=function yg(fg){function xg(vg){return new Wa(vg,fg)}return xg.tension=function(vg){return yg(+vg)},xg}(0);Ga.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){if(fg=+fg,xg=+xg,this._point){var vg=this._x2-fg,bg=this._y2-xg;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vg*vg+bg*bg,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3;default:Ra(this,fg,xg);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=fg,this._y0=this._y1,this._y1=this._y2,this._y2=xg}};var $p=function yg(fg){function xg(vg){return fg?new Ga(vg,fg):new Wa(vg,0)}return xg.alpha=function(vg){return yg(+vg)},xg}(.5);tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:el(this,this._t0,Qa(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){var vg=NaN;if(fg=+fg,xg=+xg,fg!==this._x1||xg!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3,el(this,Qa(this,vg=Ka(this,fg,xg)),vg);break;default:el(this,this._t0,vg=Ka(this,fg,xg));}this._x0=this._x1,this._x1=fg,this._y0=this._y1,this._y1=xg,this._t0=vg}}},(function(yg){this._context=new nl(yg)}.prototype=Object.create(tl.prototype)).point=function(yg,fg){tl.prototype.point.call(this,fg,yg)},nl.prototype={moveTo:function(fg,xg){this._context.moveTo(xg,fg)},closePath:function(){this._context.closePath()},lineTo:function(fg,xg){this._context.lineTo(xg,fg)},bezierCurveTo:function(fg,xg,vg,bg,wg,Tg){this._context.bezierCurveTo(xg,fg,bg,vg,Tg,wg)}},ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var fg=this._x,xg=this._y,vg=fg.length;if(vg)if(this._line?this._context.lineTo(fg[0],xg[0]):this._context.moveTo(fg[0],xg[0]),2===vg)this._context.lineTo(fg[1],xg[1]);else for(var bg=al(fg),wg=al(xg),Tg=0,kg=1;kg<vg;++Tg,++kg)this._context.bezierCurveTo(bg[0][Tg],wg[0][Tg],bg[1][Tg],wg[1][Tg],fg[kg],xg[kg]);(this._line||0!==this._line&&1===vg)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(fg,xg){this._x.push(+fg),this._y.push(+xg)}},il.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,xg),this._context.lineTo(fg,xg);else{var vg=this._x*(1-this._t)+fg*this._t;this._context.lineTo(vg,this._y),this._context.lineTo(vg,xg)}}this._x=fg,this._y=xg}};var jp=new Date,Vp=new Date,Bp=ll(function(){},function(yg,fg){yg.setTime(+yg+fg)},function(yg,fg){return fg-yg});Bp.every=function(yg){return yg=Math.floor(yg),isFinite(yg)&&0<yg?1<yg?ll(function(fg){fg.setTime(Math.floor(fg/yg)*yg)},function(fg,xg){fg.setTime(+fg+xg*yg)},function(fg,xg){return(xg-fg)/yg}):Bp:null};var Zp=6e4,Wp=6048e5,Rp=ll(function(yg){yg.setTime(1e3*Math.floor(yg/1e3))},function(yg,fg){yg.setTime(+yg+1e3*fg)},function(yg,fg){return(fg-yg)/1e3},function(yg){return yg.getUTCSeconds()}),Gp=ll(function(yg){yg.setTime(Math.floor(yg/Zp)*Zp)},function(yg,fg){yg.setTime(+yg+fg*Zp)},function(yg,fg){return(fg-yg)/Zp},function(yg){return yg.getMinutes()}),Jp=ll(function(yg){var fg=yg.getTimezoneOffset()*Zp%36e5;0>fg&&(fg+=36e5),yg.setTime(36e5*Math.floor((+yg-fg)/36e5)+fg)},function(yg,fg){yg.setTime(+yg+36e5*fg)},function(yg,fg){return(fg-yg)/36e5},function(yg){return yg.getHours()}),Kp=ll(function(yg){yg.setHours(0,0,0,0)},function(yg,fg){yg.setDate(yg.getDate()+fg)},function(yg,fg){return(fg-yg-(fg.getTimezoneOffset()-yg.getTimezoneOffset())*Zp)/864e5},function(yg){return yg.getDate()-1}),Qp=rl(0),e_=rl(1),t_=(rl(2),rl(3),rl(4),rl(5),rl(6),ll(function(yg){yg.setDate(1),yg.setHours(0,0,0,0)},function(yg,fg){yg.setMonth(yg.getMonth()+fg)},function(yg,fg){return fg.getMonth()-yg.getMonth()+12*(fg.getFullYear()-yg.getFullYear())},function(yg){return yg.getMonth()})),n_=ll(function(yg){yg.setMonth(0,1),yg.setHours(0,0,0,0)},function(yg,fg){yg.setFullYear(yg.getFullYear()+fg)},function(yg,fg){return fg.getFullYear()-yg.getFullYear()},function(yg){return yg.getFullYear()});n_.every=function(yg){return isFinite(yg=Math.floor(yg))&&0<yg?ll(function(fg){fg.setFullYear(Math.floor(fg.getFullYear()/yg)*yg),fg.setMonth(0,1),fg.setHours(0,0,0,0)},function(fg,xg){fg.setFullYear(fg.getFullYear()+xg*yg)}):null},ll(function(yg){yg.setUTCSeconds(0,0)},function(yg,fg){yg.setTime(+yg+fg*Zp)},function(yg,fg){return(fg-yg)/Zp},function(yg){return yg.getUTCMinutes()}),ll(function(yg){yg.setUTCMinutes(0,0,0)},function(yg,fg){yg.setTime(+yg+36e5*fg)},function(yg,fg){return(fg-yg)/36e5},function(yg){return yg.getUTCHours()});var o_=ll(function(yg){yg.setUTCHours(0,0,0,0)},function(yg,fg){yg.setUTCDate(yg.getUTCDate()+fg)},function(yg,fg){return(fg-yg)/864e5},function(yg){return yg.getUTCDate()-1}),a_=dl(0),i_=dl(1),l_=(dl(2),dl(3),dl(4),dl(5),dl(6),ll(function(yg){yg.setUTCDate(1),yg.setUTCHours(0,0,0,0)},function(yg,fg){yg.setUTCMonth(yg.getUTCMonth()+fg)},function(yg,fg){return fg.getUTCMonth()-yg.getUTCMonth()+12*(fg.getUTCFullYear()-yg.getUTCFullYear())},function(yg){return yg.getUTCMonth()}),ll(function(yg){yg.setUTCMonth(0,1),yg.setUTCHours(0,0,0,0)},function(yg,fg){yg.setUTCFullYear(yg.getUTCFullYear()+fg)},function(yg,fg){return fg.getUTCFullYear()-yg.getUTCFullYear()},function(yg){return yg.getUTCFullYear()}));l_.every=function(yg){return isFinite(yg=Math.floor(yg))&&0<yg?ll(function(fg){fg.setUTCFullYear(Math.floor(fg.getUTCFullYear()/yg)*yg),fg.setUTCMonth(0,1),fg.setUTCHours(0,0,0,0)},function(fg,xg){fg.setUTCFullYear(fg.getUTCFullYear()+xg*yg)}):null};var r_,d_=function(fg,xg){if(0>(vg=(fg=xg?fg.toExponential(xg-1):fg.toExponential()).indexOf("e")))return null;var vg,bg=fg.slice(0,vg);return[1<bg.length?bg[0]+bg.slice(2):bg,+fg.slice(vg+1)]},s_=function(fg){return(fg=d_(Math.abs(fg)))?fg[1]:NaN},c_=function(fg,xg){return function(vg,bg){for(var wg=vg.length,Tg=[],kg=0,Sg=fg[0],Cg=0;0<wg&&0<Sg&&(Cg+Sg+1>bg&&(Sg=Math.max(1,bg-Cg)),Tg.push(vg.substring(wg-=Sg,wg+Sg)),!((Cg+=Sg+1)>bg));)Sg=fg[kg=(kg+1)%fg.length];return Tg.reverse().join(xg)}},u_=function(fg){return function(xg){return xg.replace(/[0-9]/g,function(vg){return fg[+vg]})}},p_=function(fg,xg){var vg=d_(fg,xg);if(!vg)return fg+"";var bg=vg[0],wg=vg[1];return 0>wg?"0."+Array(-wg).join("0")+bg:bg.length>wg+1?bg.slice(0,wg+1)+"."+bg.slice(wg+1):bg+Array(wg-bg.length+2).join("0")},__={"":function(fg,xg){t:for(var vg,bg=(fg=fg.toPrecision(xg)).length,wg=1,Tg=-1;wg<bg;++wg)switch(fg[wg]){case".":Tg=vg=wg;break;case"0":0===Tg&&(Tg=wg),vg=wg;break;case"e":break t;default:0<Tg&&(Tg=0);}return 0<Tg?fg.slice(0,Tg)+fg.slice(vg+1):fg},"%":function(fg,xg){return(100*fg).toFixed(xg)},b:function(fg){return Math.round(fg).toString(2)},c:function(fg){return fg+""},d:function(fg){return Math.round(fg).toString(10)},e:function(fg,xg){return fg.toExponential(xg)},f:function(fg,xg){return fg.toFixed(xg)},g:function(fg,xg){return fg.toPrecision(xg)},o:function(fg){return Math.round(fg).toString(8)},p:function(fg,xg){return p_(100*fg,xg)},r:p_,s:function(fg,xg){var vg=d_(fg,xg);if(!vg)return fg+"";var bg=vg[0],wg=vg[1],Tg=wg-(r_=3*Math.max(-8,Math.min(8,Math.floor(wg/3))))+1,kg=bg.length;return Tg===kg?bg:Tg>kg?bg+Array(Tg-kg+1).join("0"):0<Tg?bg.slice(0,Tg)+"."+bg.slice(Tg):"0."+Array(1-Tg).join("0")+d_(fg,Math.max(0,xg+Tg-1))[0]},X:function(fg){return Math.round(fg).toString(16).toUpperCase()},x:function(fg){return Math.round(fg).toString(16)}},h_=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;sl.prototype=cl.prototype,cl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var m_,g_,y_=function(fg){return fg},f_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],x_=function(fg){function xg(Sg){function Cg(Ig){var Ng,Og,$g,jg=Lg,Vg=Hg;if("c"===Fg)Vg=Xg(Ig)+Vg,Ig="";else{var Bg=0>(Ig=+Ig);if(Ig=Xg(Math.abs(Ig),Dg),Bg&&0==+Ig&&(Bg=!1),jg=(Bg?"("===Ug?Ug:"-":"-"===Ug||"("===Ug?"":Ug)+jg,Vg=Vg+("s"===Fg?f_[8+r_/3]:"")+(Bg&&"("===Ug?")":""),qg)for(Ng=-1,Og=Ig.length;++Ng<Og;)if(48>($g=Ig.charCodeAt(Ng))||57<$g){Vg=(46===$g?wg+Ig.slice(Ng+1):Ig.slice(Ng))+Vg,Ig=Ig.slice(0,Ng);break}}Pg&&!Yg&&(Ig=vg(Ig,1/0));var Zg=jg.length+Ig.length+Vg.length,Wg=Zg<Eg?Array(Eg-Zg+1).join(zg):"";switch(Pg&&Yg&&(Ig=vg(Wg+Ig,Wg.length?Eg-Vg.length:1/0),Wg=""),Mg){case"<":Ig=jg+Ig+Vg+Wg;break;case"=":Ig=jg+Wg+Ig+Vg;break;case"^":Ig=Wg.slice(0,Zg=Wg.length>>1)+jg+Ig+Vg+Wg.slice(Zg);break;default:Ig=Wg+jg+Ig+Vg;}return Tg(Ig)}var zg=(Sg=sl(Sg)).fill,Mg=Sg.align,Ug=Sg.sign,Ag=Sg.symbol,Yg=Sg.zero,Eg=Sg.width,Pg=Sg.comma,Dg=Sg.precision,Fg=Sg.type,Lg="$"===Ag?bg[0]:"#"===Ag&&/[boxX]/.test(Fg)?"0"+Fg.toLowerCase():"",Hg="$"===Ag?bg[1]:/[%p]/.test(Fg)?kg:"",Xg=__[Fg],qg=!Fg||/[defgprs%]/.test(Fg);return Dg=null==Dg?Fg?6:12:/[gprs]/.test(Fg)?Math.max(1,Math.min(21,Dg)):Math.max(0,Math.min(20,Dg)),Cg.toString=function(){return Sg+""},Cg}var vg=fg.grouping&&fg.thousands?c_(fg.grouping,fg.thousands):y_,bg=fg.currency,wg=fg.decimal,Tg=fg.numerals?u_(fg.numerals):y_,kg=fg.percent||"%";return{format:xg,formatPrefix:function(Cg,zg){var Mg=xg((Cg=sl(Cg),Cg.type="f",Cg)),Ug=3*Math.max(-8,Math.min(8,Math.floor(s_(zg)/3))),Ag=Math.pow(10,-Ug),Yg=f_[8+Ug/3];return function(Eg){return Mg(Ag*Eg)+Yg}}}};ul({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var v_,b_,w_,T_=function(fg){return Math.max(0,-s_(Math.abs(fg)))},k_=function(fg,xg){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(s_(xg)/3)))-s_(Math.abs(fg)))},S_=function(fg,xg){return fg=Math.abs(fg),xg=Math.abs(xg)-fg,Math.max(0,s_(xg)-s_(fg))+1},C_={"-":"",_:" ",0:"0"},z_=/^\s*\d+/,M_=/^%/,U_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;sd({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||b_("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||w_("%Y-%m-%dT%H:%M:%S.%LZ"),cd.prototype=ud.prototype={constructor:cd,has:function(fg){return"$"+fg in this},get:function(fg){return this["$"+fg]},set:function(fg,xg){return this["$"+fg]=xg,this},remove:function(fg){var xg="$"+fg;return xg in this&&delete this[xg]},clear:function(){for(var fg in this)"$"===fg[0]&&delete this[fg]},keys:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push(xg.slice(1));return fg},values:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push(this[xg]);return fg},entries:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push({key:xg.slice(1),value:this[xg]});return fg},size:function(){var fg=0;for(var xg in this)"$"===xg[0]&&++fg;return fg},empty:function(){for(var fg in this)if("$"===fg[0])return!1;return!0},each:function(fg){for(var xg in this)"$"===xg[0]&&fg(this[xg],xg.slice(1),this)}};var A_=ud.prototype;pd.prototype=function(yg,fg){var xg=new pd;if(yg instanceof pd)yg.each(function(wg){xg.add(wg)});else if(yg){var vg=-1,bg=yg.length;if(null==fg)for(;++vg<bg;)xg.add(yg[vg]);else for(;++vg<bg;)xg.add(fg(yg[vg],vg,yg))}return xg}.prototype={constructor:pd,has:A_.has,add:function(fg){return fg+="",this["$"+fg]=fg,this},remove:A_.remove,clear:A_.clear,values:A_.keys,size:A_.size,empty:A_.empty,each:A_.each};var Y_=Array.prototype,E_=Y_.map,P_=Y_.slice,D_=function(fg,xg,vg){fg.prototype=xg.prototype=vg,vg.constructor=fg},X_=/^#([0-9a-f]{3})$/,q_=/^#([0-9a-f]{6})$/,I_=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,N_=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,O_=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,$_=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,j_=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,V_=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,B_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};D_(hd,md,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),D_(vd,xd,_d(hd,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new vd(this.r*fg,this.g*fg,this.b*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new vd(this.r*fg,this.g*fg,this.b*fg,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var fg=this.opacity;return(1===(fg=isNaN(fg)?1:Math.max(0,Math.min(1,fg)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===fg?")":", "+fg+")")}})),D_(Td,function(yg,fg,xg,vg){return 1===arguments.length?wd(yg):new Td(yg,fg,xg,null==vg?1:vg)},_d(hd,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new Td(this.h,this.s,this.l*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new Td(this.h,this.s,this.l*fg,this.opacity)},rgb:function(){var fg=this.h%360+360*(0>this.h),xg=isNaN(fg)||isNaN(this.s)?0:this.s,vg=this.l,bg=vg+(.5>vg?vg:1-vg)*xg,wg=2*vg-bg;return new vd(kd(240<=fg?fg-240:fg+120,wg,bg),kd(fg,wg,bg),kd(120>fg?fg+240:fg-120,wg,bg),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Z_=Math.PI/180,W_=180/Math.PI,R_=.95047,G_=1,J_=1.08883,K_=4/29,Q_=6/29,eh=3*Q_*Q_,th=Q_*Q_*Q_;D_(Cd,function(yg,fg,xg,vg){return 1===arguments.length?Sd(yg):new Cd(yg,fg,xg,null==vg?1:vg)},_d(hd,{brighter:function(fg){return new Cd(this.l+18*(null==fg?1:fg),this.a,this.b,this.opacity)},darker:function(fg){return new Cd(this.l-18*(null==fg?1:fg),this.a,this.b,this.opacity)},rgb:function(){var fg=(this.l+16)/116,xg=isNaN(this.a)?fg:fg+this.a/500,vg=isNaN(this.b)?fg:fg-this.b/200;return fg=G_*Md(fg),xg=R_*Md(xg),vg=J_*Md(vg),new vd(Ud(3.2404542*xg-1.5371385*fg-.4985314*vg),Ud(-.969266*xg+1.8760108*fg+.041556*vg),Ud(.0556434*xg-.2040259*fg+1.0572252*vg),this.opacity)}})),D_(Ed,function(yg,fg,xg,vg){return 1===arguments.length?Yd(yg):new Ed(yg,fg,xg,null==vg?1:vg)},_d(hd,{brighter:function(fg){return new Ed(this.h,this.c,this.l+18*(null==fg?1:fg),this.opacity)},darker:function(fg){return new Ed(this.h,this.c,this.l-18*(null==fg?1:fg),this.opacity)},rgb:function(){return Sd(this).rgb()}}));var nh=-.14861,oh=1.78277,ah=-.29227,ih=-.90649,lh=1.97294,rh=lh*ih,dh=lh*oh,sh=oh*ah-ih*nh;D_(Fd,Dd,_d(hd,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new Fd(this.h,this.s,this.l*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new Fd(this.h,this.s,this.l*fg,this.opacity)},rgb:function(){var fg=isNaN(this.h)?0:(this.h+120)*Z_,xg=+this.l,vg=isNaN(this.s)?0:this.s*xg*(1-xg),bg=Math.cos(fg),wg=Math.sin(fg);return new vd(255*(xg+vg*(nh*bg+oh*wg)),255*(xg+vg*(ah*bg+ih*wg)),255*(xg+vg*(lh*bg)),this.opacity)}}));var ch,uh,ph,_h,hh=function(fg){return function(){return fg}},mh=function yg(fg){function xg(bg,wg){var Tg=vg((bg=xd(bg)).r,(wg=xd(wg)).r),kg=vg(bg.g,wg.g),Sg=vg(bg.b,wg.b),Cg=qd(bg.opacity,wg.opacity);return function(zg){return bg.r=Tg(zg),bg.g=kg(zg),bg.b=Sg(zg),bg.opacity=Cg(zg),bg+""}}var vg=Xd(fg);return xg.gamma=yg,xg}(1),gh=function(fg,xg){var vg,bg=xg?xg.length:0,wg=fg?Math.min(bg,fg.length):0,Tg=Array(bg),kg=Array(bg);for(vg=0;vg<wg;++vg)Tg[vg]=Th(fg[vg],xg[vg]);for(;vg<bg;++vg)kg[vg]=xg[vg];return function(Sg){for(vg=0;vg<wg;++vg)kg[vg]=Tg[vg](Sg);return kg}},yh=function(fg,xg){var vg=new Date;return fg=+fg,xg-=fg,function(bg){return vg.setTime(fg+xg*bg),vg}},fh=function(fg,xg){return fg=+fg,xg-=fg,function(vg){return fg+xg*vg}},xh=function(fg,xg){var vg,bg={},wg={};for(vg in null!==fg&&"object"==("undefined"===typeof fg?"undefined":babelHelpers.typeof(fg))||(fg={}),null!==xg&&"object"==("undefined"===typeof xg?"undefined":babelHelpers.typeof(xg))||(xg={}),xg)vg in fg?bg[vg]=Th(fg[vg],xg[vg]):wg[vg]=xg[vg];return function(Tg){for(vg in bg)wg[vg]=bg[vg](Tg);return wg}},vh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bh=new RegExp(vh.source,"g"),wh=function(fg,xg){var vg,bg,wg,Tg=vh.lastIndex=bh.lastIndex=0,kg=-1,Sg=[],Cg=[];for(fg+="",xg+="";(vg=vh.exec(fg))&&(bg=bh.exec(xg));)(wg=bg.index)>Tg&&(wg=xg.slice(Tg,wg),Sg[kg]?Sg[kg]+=wg:Sg[++kg]=wg),(vg=vg[0])===(bg=bg[0])?Sg[kg]?Sg[kg]+=bg:Sg[++kg]=bg:(Sg[++kg]=null,Cg.push({i:kg,x:fh(vg,bg)})),Tg=bh.lastIndex;return Tg<xg.length&&(wg=xg.slice(Tg),Sg[kg]?Sg[kg]+=wg:Sg[++kg]=wg),2>Sg.length?Cg[0]?Nd(Cg[0].x):Id(xg):(xg=Cg.length,function(zg){for(var Mg,Ug=0;Ug<xg;++Ug)Sg[(Mg=Cg[Ug]).i]=Mg.x(zg);return Sg.join("")})},Th=function(fg,xg){var vg,bg="undefined"===typeof xg?"undefined":babelHelpers.typeof(xg);return null==xg||"boolean"===bg?hh(xg):("number"===bg?fh:"string"===bg?(vg=md(xg))?(xg=vg,mh):wh:xg instanceof md?mh:xg instanceof Date?yh:Array.isArray(xg)?gh:"function"!=typeof xg.valueOf&&"function"!=typeof xg.toString||isNaN(xg)?xh:fh)(fg,xg)},kh=function(fg,xg){return fg=+fg,xg-=fg,function(vg){return Math.round(fg+xg*vg)}},Sh=180/Math.PI,Ch={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},zh=function(fg,xg,vg,bg,wg,Tg){var kg,Sg,Cg;return(kg=Math.sqrt(fg*fg+xg*xg))&&(fg/=kg,xg/=kg),(Cg=fg*vg+xg*bg)&&(vg-=fg*Cg,bg-=xg*Cg),(Sg=Math.sqrt(vg*vg+bg*bg))&&(vg/=Sg,bg/=Sg,Cg/=Sg),fg*bg<xg*vg&&(fg=-fg,xg=-xg,Cg=-Cg,kg=-kg),{translateX:wg,translateY:Tg,rotate:Math.atan2(xg,fg)*Sh,skewX:Math.atan(Cg)*Sh,scaleX:kg,scaleY:Sg}},Mh=Od(function(yg){return"none"===yg?Ch:(ch||(ch=document.createElement("DIV"),uh=document.documentElement,ph=document.defaultView),ch.style.transform=yg,yg=ph.getComputedStyle(uh.appendChild(ch),null).getPropertyValue("transform"),uh.removeChild(ch),yg=yg.slice(7,-1).split(","),zh(+yg[0],+yg[1],+yg[2],+yg[3],+yg[4],+yg[5]))},"px, ","px)","deg)"),Uh=Od(function(yg){return null==yg?Ch:(_h||(_h=document.createElementNS("http://www.w3.org/2000/svg","g")),_h.setAttribute("transform",yg),(yg=_h.transform.baseVal.consolidate())?(yg=yg.matrix,zh(yg.a,yg.b,yg.c,yg.d,yg.e,yg.f)):Ch)},", ",")",")"),Ah=Math.SQRT2,Yh=function(fg,xg){var vg,bg,wg=fg[0],Tg=fg[1],kg=fg[2],Sg=xg[0],Cg=xg[1],zg=xg[2],Mg=Sg-wg,Ug=Cg-Tg,Ag=Mg*Mg+Ug*Ug;if(1e-12>Ag)bg=Math.log(zg/kg)/Ah,vg=function(Hg){return[wg+Hg*Mg,Tg+Hg*Ug,kg*Math.exp(Ah*Hg*bg)]};else{var Yg=Math.sqrt(Ag),Eg=(zg*zg-kg*kg+4*Ag)/(2*(2*kg)*Yg),Pg=(zg*zg-kg*kg-4*Ag)/(2*(2*zg)*Yg),Dg=Math.log(Math.sqrt(Eg*Eg+1)-Eg),Fg=Math.log(Math.sqrt(Pg*Pg+1)-Pg);bg=(Fg-Dg)/Ah,vg=function(Hg){var Xg=Hg*bg,Lg=$d(Dg),qg=kg/(2*Yg)*(Lg*Vd(Ah*Xg+Dg)-jd(Dg));return[wg+qg*Mg,Tg+qg*Ug,kg*Lg/$d(Ah*Xg+Dg)]}}return vg.duration=1e3*bg,vg};Bd(function(yg,fg){var xg=fg-yg;return xg?Ld(yg,180<xg||-180>xg?xg-360*Math.round(xg/360):xg):hh(isNaN(yg)?fg:yg)});var Eh=Bd(qd),Ph=function(fg){return function(){return fg}},Dh=function(fg){return+fg},Fh=[0,1],Lh=function(fg,xg,vg){var bg,wg=fg[0],Tg=fg[fg.length-1],kg=Xa(wg,Tg,null==xg?10:xg);switch((vg=sl(null==vg?",f":vg)).type){case"s":var Sg=Math.max(Math.abs(wg),Math.abs(Tg));return null!=vg.precision||isNaN(bg=k_(kg,Sg))||(vg.precision=bg),g_(vg,Sg);case"":case"e":case"g":case"p":case"r":null!=vg.precision||isNaN(bg=S_(kg,Math.max(Math.abs(wg),Math.abs(Tg))))||(vg.precision=bg-("e"===vg.type));break;case"f":case"%":null!=vg.precision||isNaN(bg=T_(kg))||(vg.precision=bg-2*("%"===vg.type));}return Pa.format(vg)},Hh=function(fg,xg){var vg,bg=0,wg=(fg=fg.slice()).length-1,Tg=fg[bg],kg=fg[wg];return kg<Tg&&(vg=bg,bg=wg,wg=vg,vg=Tg,Tg=kg,kg=vg),fg[bg]=xg.floor(Tg),fg[wg]=xg.ceil(kg),fg},Xh=1e3,qh=60*Xh,Ih=60*qh,Nh=24*Ih,Oh=7*Nh,$h=30*Nh,jh=365*Nh,Vh=function(fg){return fg.match(/.{6}/g).map(function(xg){return"#"+xg})};Vh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Vh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Vh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Vh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Eh(Dd(300,.5,0),Dd(-240,.5,1)),Eh(Dd(-100,.75,.35),Dd(80,1.5,.8)),Eh(Dd(260,.75,.35),Dd(80,1.5,.8)),Dd();var Bh=Array.prototype.slice,Zh=function(fg){return fg},Wh=1,Rh=2,Gh=3,Jh=4,Kh=1e-6,Qh={value:function(){}};vs.prototype=xs.prototype={constructor:vs,on:function(fg,xg){var vg,bg=this._,wg=bs(fg+"",bg),Tg=-1,kg=wg.length;{if(!(2>arguments.length)){if(null!=xg&&"function"!=typeof xg)throw new Error("invalid callback: "+xg);for(;++Tg<kg;)if(vg=(fg=wg[Tg]).type)bg[vg]=Ts(bg[vg],fg.name,xg);else if(null==xg)for(vg in bg)bg[vg]=Ts(bg[vg],fg.name,null);return this}for(;++Tg<kg;)if((vg=(fg=wg[Tg]).type)&&(vg=ws(bg[vg],fg.name)))return vg}},copy:function(){var fg={},xg=this._;for(var vg in xg)fg[vg]=xg[vg].slice();return new vs(fg)},call:function(fg,xg){if(0<(vg=arguments.length-2))for(var vg,bg,wg=Array(vg),Tg=0;Tg<vg;++Tg)wg[Tg]=arguments[Tg+2];if(!this._.hasOwnProperty(fg))throw new Error("unknown type: "+fg);for(Tg=0,vg=(bg=this._[fg]).length;Tg<vg;++Tg)bg[Tg].value.apply(xg,wg)},apply:function(fg,xg,vg){if(!this._.hasOwnProperty(fg))throw new Error("unknown type: "+fg);for(var bg=this._[fg],wg=0,Tg=bg.length;wg<Tg;++wg)bg[wg].value.apply(xg,vg)}};var em="http://www.w3.org/1999/xhtml",tm={svg:"http://www.w3.org/2000/svg",xhtml:em,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nm=function(fg){var xg=fg+="",vg=xg.indexOf(":");return 0<=vg&&"xmlns"!==(xg=fg.slice(0,vg))&&(fg=fg.slice(vg+1)),tm.hasOwnProperty(xg)?{space:tm[xg],local:fg}:fg},om=function(fg){var xg=nm(fg);return(xg.local?Ss:ks)(xg)},am=function(fg){return function(){return this.matches(fg)}};if("undefined"!=typeof document){var im=document.documentElement;if(!im.matches){var lm=im.webkitMatchesSelector||im.msMatchesSelector||im.mozMatchesSelector||im.oMatchesSelector;am=function(fg){return function(){return lm.call(this,fg)}}}}var rm=am,dm={};Pa.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(dm={mouseenter:"mouseover",mouseleave:"mouseout"}));var sm=function(){for(var fg,xg=Pa.event;fg=xg.sourceEvent;)xg=fg;return xg},cm=function(fg,xg){var vg=fg.ownerSVGElement||fg;if(vg.createSVGPoint){var bg=vg.createSVGPoint();return bg.x=xg.clientX,bg.y=xg.clientY,bg=bg.matrixTransform(fg.getScreenCTM().inverse()),[bg.x,bg.y]}var wg=fg.getBoundingClientRect();return[xg.clientX-wg.left-fg.clientLeft,xg.clientY-wg.top-fg.clientTop]},um=function(fg){var xg=sm();return xg.changedTouches&&(xg=xg.changedTouches[0]),cm(fg,xg)},pm=function(fg){return null==fg?Es:function(){return this.querySelector(fg)}},_m=function(fg){return null==fg?Ps:function(){return this.querySelectorAll(fg)}},hm=function(fg){return Array(fg.length)};Ds.prototype={constructor:Ds,appendChild:function(fg){return this._parent.insertBefore(fg,this._next)},insertBefore:function(fg,xg){return this._parent.insertBefore(fg,xg)},querySelector:function(fg){return this._parent.querySelector(fg)},querySelectorAll:function(fg){return this._parent.querySelectorAll(fg)}};var mm=function(fg){return function(){return fg}},gm="$",ym=function(fg){return fg.ownerDocument&&fg.ownerDocument.defaultView||fg.document&&fg||fg.defaultView};Qs.prototype={add:function(fg){0>this._names.indexOf(fg)&&(this._names.push(fg),this._node.setAttribute("class",this._names.join(" ")))},remove:function(fg){var xg=this._names.indexOf(fg);0<=xg&&(this._names.splice(xg,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(fg){return 0<=this._names.indexOf(fg)}};var fm=[null];fc.prototype=xc.prototype={constructor:fc,select:function(fg){"function"!=typeof fg&&(fg=pm(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg,Sg=xg[wg],Cg=Sg.length,zg=bg[wg]=Array(Cg),Mg=0;Mg<Cg;++Mg)(Tg=Sg[Mg])&&(kg=fg.call(Tg,Tg.__data__,Mg,Sg))&&("__data__"in Tg&&(kg.__data__=Tg.__data__),zg[Mg]=kg);return new fc(bg,this._parents)},selectAll:function(fg){"function"!=typeof fg&&(fg=_m(fg));for(var xg=this._groups,vg=xg.length,bg=[],wg=[],Tg=0;Tg<vg;++Tg)for(var kg,Sg=xg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)(kg=Sg[zg])&&(bg.push(fg.call(kg,kg.__data__,zg,Sg)),wg.push(kg));return new fc(bg,wg)},filter:function(fg){"function"!=typeof fg&&(fg=rm(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=[],zg=0;zg<Sg;++zg)(Tg=kg[zg])&&fg.call(Tg,Tg.__data__,zg,kg)&&Cg.push(Tg);return new fc(bg,this._parents)},data:function(fg,xg){if(!fg)return Yg=Array(this.size()),zg=-1,this.each(function(qg){Yg[++zg]=qg}),Yg;var vg=xg?Ls:Fs,bg=this._parents,wg=this._groups;"function"!=typeof fg&&(fg=mm(fg));for(var Tg=wg.length,kg=Array(Tg),Sg=Array(Tg),Cg=Array(Tg),zg=0;zg<Tg;++zg){var Mg=bg[zg],Ug=wg[zg],Ag=Ug.length,Yg=fg.call(Mg,Mg&&Mg.__data__,zg,bg),Eg=Yg.length,Pg=Sg[zg]=Array(Eg),Dg=kg[zg]=Array(Eg);vg(Mg,Ug,Pg,Dg,Cg[zg]=Array(Ag),Yg,xg);for(var Fg,Lg,Hg=0,Xg=0;Hg<Eg;++Hg)if(Fg=Pg[Hg]){for(Hg>=Xg&&(Xg=Hg+1);!(Lg=Dg[Xg])&&++Xg<Eg;);Fg._next=Lg||null}}return kg=new fc(kg,bg),kg._enter=Sg,kg._exit=Cg,kg},enter:function(){return new fc(this._enter||this._groups.map(hm),this._parents)},exit:function(){return new fc(this._exit||this._groups.map(hm),this._parents)},merge:function(fg){for(var xg=this._groups,vg=fg._groups,bg=xg.length,wg=vg.length,Tg=Math.min(bg,wg),kg=Array(bg),Sg=0;Sg<Tg;++Sg)for(var Cg,zg=xg[Sg],Mg=vg[Sg],Ug=zg.length,Ag=kg[Sg]=Array(Ug),Yg=0;Yg<Ug;++Yg)(Cg=zg[Yg]||Mg[Yg])&&(Ag[Yg]=Cg);for(;Sg<bg;++Sg)kg[Sg]=xg[Sg];return new fc(kg,this._parents)},order:function(){for(var fg=this._groups,xg=-1,vg=fg.length;++xg<vg;)for(var bg,wg=fg[xg],Tg=wg.length-1,kg=wg[Tg];0<=--Tg;)(bg=wg[Tg])&&(kg&&kg!==bg.nextSibling&&kg.parentNode.insertBefore(bg,kg),kg=bg);return this},sort:function(fg){fg||(fg=Hs);for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg){for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=Array(Sg),zg=0;zg<Sg;++zg)(Tg=kg[zg])&&(Cg[zg]=Tg);Cg.sort(function(Mg,Ug){return Mg&&Ug?fg(Mg.__data__,Ug.__data__):!Mg-!Ug})}return new fc(bg,this._parents).order()},call:function(){var fg=arguments[0];return arguments[0]=this,fg.apply(null,arguments),this},nodes:function(){var fg=Array(this.size()),xg=-1;return this.each(function(){fg[++xg]=this}),fg},node:function(){for(var fg=this._groups,xg=0,vg=fg.length;xg<vg;++xg)for(var kg,bg=fg[xg],wg=0,Tg=bg.length;wg<Tg;++wg)if(kg=bg[wg],kg)return kg;return null},size:function(){var fg=0;return this.each(function(){++fg}),fg},empty:function(){return!this.node()},each:function(fg){for(var xg=this._groups,vg=0,bg=xg.length;vg<bg;++vg)for(var wg,Tg=xg[vg],kg=0,Sg=Tg.length;kg<Sg;++kg)(wg=Tg[kg])&&fg.call(wg,wg.__data__,kg,Tg);return this},attr:function(fg,xg){var vg=nm(fg);if(2>arguments.length){var bg=this.node();return vg.local?bg.getAttributeNS(vg.space,vg.local):bg.getAttribute(vg)}return this.each((null==xg?vg.local?qs:Xs:"function"==typeof xg?vg.local?$s:Os:vg.local?Ns:Is)(vg,xg))},style:function(fg,xg,vg){return 1<arguments.length?this.each((null==xg?js:"function"==typeof xg?Bs:Vs)(fg,xg,null==vg?"":vg)):Zs(this.node(),fg)},property:function(fg,xg){return 1<arguments.length?this.each((null==xg?Ws:"function"==typeof xg?Gs:Rs)(fg,xg)):this.node()[fg]},classed:function(fg,xg){var vg=Js(fg+"");if(2>arguments.length){for(var bg=Ks(this.node()),wg=-1,Tg=vg.length;++wg<Tg;)if(!bg.contains(vg[wg]))return!1;return!0}return this.each(("function"==typeof xg?ac:xg?nc:oc)(vg,xg))},text:function(fg){return arguments.length?this.each(null==fg?ic:("function"==typeof fg?rc:lc)(fg)):this.node().textContent},html:function(fg){return arguments.length?this.each(null==fg?dc:("function"==typeof fg?cc:sc)(fg)):this.node().innerHTML},raise:function(){return this.each(uc)},lower:function(){return this.each(pc)},append:function(fg){var xg="function"==typeof fg?fg:om(fg);return this.select(function(){return this.appendChild(xg.apply(this,arguments))})},insert:function(fg,xg){var vg="function"==typeof fg?fg:om(fg),bg=null==xg?_c:"function"==typeof xg?xg:pm(xg);return this.select(function(){return this.insertBefore(vg.apply(this,arguments),bg.apply(this,arguments)||null)})},remove:function(){return this.each(hc)},datum:function(fg){return arguments.length?this.property("__data__",fg):this.node().__data__},on:function(fg,xg,vg){var bg,wg,Tg=Ms(fg+""),kg=Tg.length;{if(!(2>arguments.length)){for(Sg=xg?As:Us,null==vg&&(vg=!1),bg=0;bg<kg;++bg)this.each(Sg(Tg[bg],xg,vg));return this}var Sg=this.node().__on;if(Sg)for(var Cg,zg=0,Mg=Sg.length;zg<Mg;++zg)for(bg=0,Cg=Sg[zg];bg<kg;++bg)if((wg=Tg[bg]).type===Cg.type&&wg.name===Cg.name)return Cg.value}},dispatch:function(fg,xg){return this.each(("function"==typeof xg?yc:gc)(fg,xg))}};var xm=function(fg){return"string"==typeof fg?new fc([[document.querySelector(fg)]],[document.documentElement]):new fc([[fg]],fm)},vm=function(fg,xg,vg){3>arguments.length&&(vg=xg,xg=sm().changedTouches);for(var bg,wg=0,Tg=xg?xg.length:0;wg<Tg;++wg)if((bg=xg[wg]).identifier===vg)return cm(fg,bg);return null},bm=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},wm=function(fg){var xg=fg.document.documentElement,vg=xm(fg).on("dragstart.drag",bm,!0);"onselectstart"in xg?vg.on("selectstart.drag",bm,!0):(xg.__noselect=xg.style.MozUserSelect,xg.style.MozUserSelect="none")},Tm=function(fg){return function(){return fg}};wc.prototype.on=function(){var yg=this._.on.apply(this._,arguments);return yg===this._?this:yg};var km,Sm,Cm=0,zm=0,Mm=0,Um=1e3,Am=0,Ym=0,Em=0,Pm="object"==("undefined"===typeof performance?"undefined":babelHelpers.typeof(performance))&&performance.now?performance:Date,Dm="function"==typeof requestAnimationFrame?requestAnimationFrame:function(yg){setTimeout(yg,17)};Mc.prototype=Uc.prototype={constructor:Mc,restart:function(fg,xg,vg){if("function"!=typeof fg)throw new TypeError("callback is not a function");vg=(null==vg?Cc():+vg)+(null==xg?0:+xg),this._next||Sm===this||(Sm?Sm._next=this:km=this,Sm=this),this._call=fg,this._time=vg,Dc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dc())}};var Fm=function(fg,xg,vg){var bg=new Mc;return xg=null==xg?0:+xg,bg.restart(function(wg){bg.stop(),fg(wg+xg)},xg,vg),bg},Lm=xs("start","end","interrupt"),Hm=[],Xm=0,qm=1,Im=2,Nm=3,Om=4,$m=5,jm=6,Vm=function(fg,xg,vg,bg,wg,Tg){var kg=fg.__transition;if(!kg)fg.__transition={};else if(vg in kg)return;Xc(fg,vg,{name:xg,index:bg,group:wg,on:Lm,tween:Hm,time:Tg.time,delay:Tg.delay,duration:Tg.duration,ease:Tg.ease,timer:null,state:Xm})},Bm=function(fg,xg){var vg,bg,wg,Tg=fg.__transition,kg=!0;if(Tg){for(wg in xg=null==xg?null:xg+"",Tg)(vg=Tg[wg]).name===xg?(bg=vg.state>Im&&vg.state<$m,vg.state=jm,vg.timer.stop(),bg&&vg.on.call("interrupt",fg,fg.__data__,vg.index,vg.group),delete Tg[wg]):kg=!1;kg&&delete fg.__transition}},Zm=function(fg,xg){var vg;return("number"==typeof xg?fh:xg instanceof md?mh:(vg=md(xg))?(xg=vg,mh):wh)(fg,xg)},Wm=xc.prototype.constructor,Rm=0,Gm=xc.prototype;up.prototype=function(yg){return xc().transition(yg)}.prototype={constructor:up,select:function(fg){var xg=this._name,vg=this._id;"function"!=typeof fg&&(fg=pm(fg));for(var bg=this._groups,wg=bg.length,Tg=Array(wg),kg=0;kg<wg;++kg)for(var Sg,Cg,zg=bg[kg],Mg=zg.length,Ug=Tg[kg]=Array(Mg),Ag=0;Ag<Mg;++Ag)(Sg=zg[Ag])&&(Cg=fg.call(Sg,Sg.__data__,Ag,zg))&&("__data__"in Sg&&(Cg.__data__=Sg.__data__),Ug[Ag]=Cg,Vm(Ug[Ag],xg,vg,Ag,Ug,Hc(Sg,vg)));return new up(Tg,this._parents,xg,vg)},selectAll:function(fg){var xg=this._name,vg=this._id;"function"!=typeof fg&&(fg=_m(fg));for(var bg=this._groups,wg=bg.length,Tg=[],kg=[],Sg=0;Sg<wg;++Sg)for(var Cg,zg=bg[Sg],Mg=zg.length,Ug=0;Ug<Mg;++Ug)if(Cg=zg[Ug]){for(var Ag,Yg=fg.call(Cg,Cg.__data__,Ug,zg),Eg=Hc(Cg,vg),Pg=0,Dg=Yg.length;Pg<Dg;++Pg)(Ag=Yg[Pg])&&Vm(Ag,xg,vg,Pg,Yg,Eg);Tg.push(Yg),kg.push(Cg)}return new up(Tg,kg,xg,vg)},filter:function(fg){"function"!=typeof fg&&(fg=rm(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=[],zg=0;zg<Sg;++zg)(Tg=kg[zg])&&fg.call(Tg,Tg.__data__,zg,kg)&&Cg.push(Tg);return new up(bg,this._parents,this._name,this._id)},merge:function(fg){if(fg._id!==this._id)throw new Error;for(var xg=this._groups,vg=fg._groups,bg=xg.length,wg=vg.length,Tg=Math.min(bg,wg),kg=Array(bg),Sg=0;Sg<Tg;++Sg)for(var Cg,zg=xg[Sg],Mg=vg[Sg],Ug=zg.length,Ag=kg[Sg]=Array(Ug),Yg=0;Yg<Ug;++Yg)(Cg=zg[Yg]||Mg[Yg])&&(Ag[Yg]=Cg);for(;Sg<bg;++Sg)kg[Sg]=xg[Sg];return new up(kg,this._parents,this._name,this._id)},selection:function(){return new Wm(this._groups,this._parents)},transition:function(){for(var fg=this._name,xg=this._id,vg=pp(),bg=this._groups,wg=bg.length,Tg=0;Tg<wg;++Tg)for(var kg,Sg=bg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)if(kg=Sg[zg]){var Mg=Hc(kg,xg);Vm(kg,fg,vg,zg,Sg,{time:Mg.time+Mg.delay+Mg.duration,delay:0,duration:Mg.duration,ease:Mg.ease})}return new up(bg,this._parents,fg,vg)},call:Gm.call,nodes:Gm.nodes,node:Gm.node,size:Gm.size,empty:Gm.empty,each:Gm.each,on:function(fg,xg){var vg=this._id;return 2>arguments.length?Hc(this.node(),vg).on.on(fg):this.each(np(vg,fg,xg))},attr:function(fg,xg){var vg=nm(fg),bg="transform"===vg?Uh:Zm;return this.attrTween(fg,"function"==typeof xg?(vg.local?Zc:Bc)(vg,bg,Nc(this,"attr."+fg,xg)):null==xg?(vg.local?$c:Oc)(vg):(vg.local?Vc:jc)(vg,bg,xg+""))},attrTween:function(fg,xg){var vg="attr."+fg;if(2>arguments.length)return(vg=this.tween(vg))&&vg._value;if(null==xg)return this.tween(vg,null);if("function"!=typeof xg)throw new Error;var bg=nm(fg);return this.tween(vg,(bg.local?Wc:Rc)(bg,xg))},style:function(fg,xg,vg){var bg="transform"==(fg+="")?Mh:Zm;return null==xg?this.styleTween(fg,ap(fg,bg)).on("end.style."+fg,ip(fg)):this.styleTween(fg,"function"==typeof xg?rp(fg,bg,Nc(this,"style."+fg,xg)):lp(fg,bg,xg+""),vg)},styleTween:function(fg,xg,vg){var bg="style."+(fg+="");if(2>arguments.length)return(bg=this.tween(bg))&&bg._value;if(null==xg)return this.tween(bg,null);if("function"!=typeof xg)throw new Error;return this.tween(bg,dp(fg,xg,null==vg?"":vg))},text:function(fg){return this.tween("text","function"==typeof fg?cp(Nc(this,"text",fg)):sp(null==fg?"":fg+""))},remove:function(){return this.on("end.remove",op(this._id))},tween:function(fg,xg){var vg=this._id;if(fg+="",2>arguments.length){for(var bg,wg=Hc(this.node(),vg).tween,Tg=0,kg=wg.length;Tg<kg;++Tg)if((bg=wg[Tg]).name===fg)return bg.value;return null}return this.each((null==xg?qc:Ic)(vg,fg,xg))},delay:function(fg){var xg=this._id;return arguments.length?this.each(("function"==typeof fg?Gc:Jc)(xg,fg)):Hc(this.node(),xg).delay},duration:function(fg){var xg=this._id;return arguments.length?this.each(("function"==typeof fg?Kc:Qc)(xg,fg)):Hc(this.node(),xg).duration},ease:function(fg){var xg=this._id;return arguments.length?this.each(ep(xg,fg)):Hc(this.node(),xg).ease}},function yg(fg){function xg(vg){return Math.pow(vg,fg)}return fg=+fg,xg.exponent=yg,xg}(3),function yg(fg){function xg(vg){return 1-Math.pow(1-vg,fg)}return fg=+fg,xg.exponent=yg,xg}(3),function yg(fg){function xg(vg){return(1>=(vg*=2)?Math.pow(vg,fg):2-Math.pow(2-vg,fg))/2}return fg=+fg,xg.exponent=yg,xg}(3),function yg(fg){function xg(vg){return vg*vg*((fg+1)*vg-fg)}return fg=+fg,xg.overshoot=yg,xg}(1.70158),function yg(fg){function xg(vg){return--vg*vg*((fg+1)*vg+fg)+1}return fg=+fg,xg.overshoot=yg,xg}(1.70158),function yg(fg){function xg(vg){return(1>(vg*=2)?vg*vg*((fg+1)*vg-fg):(vg-=2)*vg*((fg+1)*vg+fg)+2)/2}return fg=+fg,xg.overshoot=yg,xg}(1.70158);var Jm=2*Math.PI,Km=(function yg(fg,xg){function vg(wg){return fg*Math.pow(2,10*--wg)*Math.sin((bg-wg)/xg)}var bg=Math.asin(1/(fg=Math.max(1,fg)))*(xg/=Jm);return vg.amplitude=function(wg){return yg(wg,xg*Jm)},vg.period=function(wg){return yg(fg,wg)},vg}(1,.3),function yg(fg,xg){function vg(wg){return 1-fg*Math.pow(2,-10*(wg=+wg))*Math.sin((wg+bg)/xg)}var bg=Math.asin(1/(fg=Math.max(1,fg)))*(xg/=Jm);return vg.amplitude=function(wg){return yg(wg,xg*Jm)},vg.period=function(wg){return yg(fg,wg)},vg}(1,.3),function yg(fg,xg){function vg(wg){return(0>(wg=2*wg-1)?fg*Math.pow(2,10*wg)*Math.sin((bg-wg)/xg):2-fg*Math.pow(2,-10*wg)*Math.sin((bg+wg)/xg))/2}var bg=Math.asin(1/(fg=Math.max(1,fg)))*(xg/=Jm);return vg.amplitude=function(wg){return yg(wg,xg*Jm)},vg.period=function(wg){return yg(fg,wg)},vg}(1,.3),{time:null,delay:0,duration:250,ease:function(fg){return(1>=(fg*=2)?fg*fg*fg:(fg-=2)*fg*fg+2)/2}});xc.prototype.interrupt=function(yg){return this.each(function(){Bm(this,yg)})},xc.prototype.transition=function(yg){var fg,xg;yg instanceof up?(fg=yg._id,yg=yg._name):(fg=pp(),(xg=Km).time=Cc(),yg=null==yg?null:yg+"");for(var vg=this._groups,bg=vg.length,wg=0;wg<bg;++wg)for(var Tg,kg=vg[wg],Sg=kg.length,Cg=0;Cg<Sg;++Cg)(Tg=kg[Cg])&&Vm(Tg,yg,fg,Cg,kg,xg||hp(Tg,fg));return new up(vg,this._parents,yg,fg)};var Qm=function(fg){return function(){return fg}};gp.prototype={constructor:gp,scale:function(fg){return 1===fg?this:new gp(this.k*fg,this.x,this.y)},translate:function(fg,xg){return 0===fg&0===xg?this:new gp(this.k,this.x+this.k*fg,this.y+this.k*xg)},apply:function(fg){return[fg[0]*this.k+this.x,fg[1]*this.k+this.y]},applyX:function(fg){return fg*this.k+this.x},applyY:function(fg){return fg*this.k+this.y},invert:function(fg){return[(fg[0]-this.x)/this.k,(fg[1]-this.y)/this.k]},invertX:function(fg){return(fg-this.x)/this.k},invertY:function(fg){return(fg-this.y)/this.k},rescaleX:function(fg){return fg.copy().domain(fg.range().map(this.invertX,this).map(fg.invert,fg))},rescaleY:function(fg){return fg.copy().domain(fg.range().map(this.invertY,this).map(fg.invert,fg))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var eg=new gp(1,0,0),tg=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},ng=function(fg){return function(){return fg}},og=function(fg,xg,vg){this.target=fg,this.type=xg,this.selection=vg},ag=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},ig={name:"drag"},lg={name:"space"},rg={name:"handle"},dg={name:"center"},sg={name:"x",handles:["e","w"].map(wp),input:function(fg,xg){return fg&&[[fg[0],xg[0][1]],[fg[1],xg[1][1]]]},output:function(fg){return fg&&[fg[0][0],fg[1][0]]}},cg={name:"y",handles:["n","s"].map(wp),input:function(fg,xg){return fg&&[[xg[0][0],fg[0]],[xg[1][0],fg[1]]]},output:function(fg){return fg&&[fg[0][1],fg[1][1]]}},ug={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(wp),input:function(fg){return fg},output:function(fg){return fg}},pg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_g={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},hg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gg={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};Pa.bisector=Up,Pa.extent=function(yg,fg){var xg,vg,bg,wg=yg.length,Tg=-1;if(null==fg){for(;++Tg<wg;)if(null!=(xg=yg[Tg])&&xg>=xg)for(vg=bg=xg;++Tg<wg;)null!=(xg=yg[Tg])&&(vg>xg&&(vg=xg),bg<xg&&(bg=xg));}else for(;++Tg<wg;)if(null!=(xg=fg(yg[Tg],Tg,yg))&&xg>=xg)for(vg=bg=xg;++Tg<wg;)null!=(xg=fg(yg[Tg],Tg,yg))&&(vg>xg&&(vg=xg),bg<xg&&(bg=xg));return[vg,bg]},Pa.max=function(yg,fg){var xg,vg,bg=yg.length,wg=-1;if(null==fg){for(;++wg<bg;)if(null!=(xg=yg[wg])&&xg>=xg)for(vg=xg;++wg<bg;)null!=(xg=yg[wg])&&xg>vg&&(vg=xg);}else for(;++wg<bg;)if(null!=(xg=fg(yg[wg],wg,yg))&&xg>=xg)for(vg=xg;++wg<bg;)null!=(xg=fg(yg[wg],wg,yg))&&xg>vg&&(vg=xg);return vg},Pa.min=function(yg,fg){var xg,vg,bg=yg.length,wg=-1;if(null==fg){for(;++wg<bg;)if(null!=(xg=yg[wg])&&xg>=xg)for(vg=xg;++wg<bg;)null!=(xg=yg[wg])&&vg>xg&&(vg=xg);}else for(;++wg<bg;)if(null!=(xg=fg(yg[wg],wg,yg))&&xg>=xg)for(vg=xg;++wg<bg;)null!=(xg=fg(yg[wg],wg,yg))&&vg>xg&&(vg=xg);return vg},Pa.line=Np,Pa.area=function(){function yg(zg){var Mg,Ug,Ag,Yg,Eg,Pg=zg.length,Dg=!1,Fg=Array(Pg),Lg=Array(Pg);for(null==kg&&(Cg=Sg(Eg=Ia())),Mg=0;Mg<=Pg;++Mg){if(!(Mg<Pg&&Tg(Yg=zg[Mg],Mg,zg))===Dg)if(Dg=!Dg)Ug=Mg,Cg.areaStart(),Cg.lineStart();else{for(Cg.lineEnd(),Cg.lineStart(),Ag=Mg-1;Ag>=Ug;--Ag)Cg.point(Fg[Ag],Lg[Ag]);Cg.lineEnd(),Cg.areaEnd()}Dg&&(Fg[Mg]=+xg(Yg,Mg,zg),Lg[Mg]=+bg(Yg,Mg,zg),Cg.point(vg?+vg(Yg,Mg,zg):Fg[Mg],wg?+wg(Yg,Mg,zg):Lg[Mg]))}if(Eg)return Cg=null,Eg+""||null}function fg(){return Np().defined(Tg).curve(Sg).context(kg)}var xg=$a,vg=null,bg=Xp(0),wg=ja,Tg=Xp(!0),kg=null,Sg=Ip,Cg=null;return yg.x=function(zg){return arguments.length?(xg="function"==typeof zg?zg:Xp(+zg),vg=null,yg):xg},yg.x0=function(zg){return arguments.length?(xg="function"==typeof zg?zg:Xp(+zg),yg):xg},yg.x1=function(zg){return arguments.length?(vg=null==zg?null:"function"==typeof zg?zg:Xp(+zg),yg):vg},yg.y=function(zg){return arguments.length?(bg="function"==typeof zg?zg:Xp(+zg),wg=null,yg):bg},yg.y0=function(zg){return arguments.length?(bg="function"==typeof zg?zg:Xp(+zg),yg):bg},yg.y1=function(zg){return arguments.length?(wg=null==zg?null:"function"==typeof zg?zg:Xp(+zg),yg):wg},yg.lineX0=yg.lineY0=function(){return fg().x(xg).y(bg)},yg.lineY1=function(){return fg().x(xg).y(wg)},yg.lineX1=function(){return fg().x(vg).y(bg)},yg.defined=function(zg){return arguments.length?(Tg="function"==typeof zg?zg:Xp(!!zg),yg):Tg},yg.curve=function(zg){return arguments.length?(Sg=zg,null!=kg&&(Cg=Sg(kg)),yg):Sg},yg.context=function(zg){return arguments.length?(null==zg?kg=Cg=null:Cg=Sg(kg=zg),yg):kg},yg},Pa.curveBasis=function(yg){return new Ba(yg)},Pa.curveMonotoneX=function(yg){return new tl(yg)},Pa.curveNatural=function(yg){return new ol(yg)},Pa.curveCardinal=Op,Pa.curveCatmullRom=$p,Pa.curveStep=function(yg){return new il(yg,.5)},Pa.curveStepAfter=function(yg){return new il(yg,1)},Pa.curveStepBefore=function(yg){return new il(yg,0)},Pa.curveLinear=Ip,Pa.timeMillisecond=Bp,Pa.timeSecond=Rp,Pa.timeMinute=Gp,Pa.timeHour=Jp,Pa.timeDay=Kp,Pa.timeWeek=Qp,Pa.timeMonth=t_,Pa.timeYear=n_,Pa.formatDefaultLocale=ul,Pa.formatLocale=x_,Pa.timeFormatLocale=ml,Pa.timeFormatDefaultLocale=sd,Pa.scaleLinear=ts,Pa.scaleLog=ds,Pa.scalePow=cs,Pa.scaleTime=function(){return _s(n_,t_,Qp,Kp,Jp,Gp,Rp,Bp,Pa.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Pa.axisRight=function(yg){return fs(Rh,yg)},Pa.axisTop=function(yg){return fs(Wh,yg)},Pa.axisBottom=function(yg){return fs(Gh,yg)},Pa.axisLeft=function(yg){return fs(Jh,yg)},Pa.zoom=function(){function yg(Wg){Wg.on("wheel.zoom",Sg).on("mousedown.zoom",Cg).on("dblclick.zoom",zg).on("touchstart.zoom",Mg).on("touchmove.zoom",Ug).on("touchend.zoom touchcancel.zoom",Ag).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",vp)}function fg(Wg,Rg){return(Rg=Math.max(Fg,Math.min(Lg,Rg)))===Wg.k?Wg:new gp(Rg,Wg.x,Wg.y)}function xg(Wg,Rg,Gg){var Jg=Rg[0]-Gg[0]*Wg.k,Kg=Rg[1]-Gg[1]*Wg.k;return Jg===Wg.x&&Kg===Wg.y?Wg:new gp(Wg.k,Jg,Kg)}function vg(Wg,Rg){var Gg=Wg.invertX(Rg[0][0])-Hg,Jg=Wg.invertX(Rg[1][0])-Xg,Kg=Wg.invertY(Rg[0][1])-qg,Qg=Wg.invertY(Rg[1][1])-Ig;return Wg.translate(Jg>Gg?(Gg+Jg)/2:Math.min(0,Gg)||Math.max(0,Jg),Qg>Kg?(Kg+Qg)/2:Math.min(0,Kg)||Math.max(0,Qg))}function bg(Wg){return[(+Wg[0][0]+ +Wg[1][0])/2,(+Wg[0][1]+ +Wg[1][1])/2]}function wg(Wg,Rg,Gg){Wg.on("start.zoom",function(){Tg(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){Tg(this,arguments).end()}).tween("zoom",function(){var Jg=this,Kg=arguments,Qg=Tg(Jg,Kg),ey=Dg.apply(Jg,Kg),ty=Gg||bg(ey),ny=Math.max(ey[1][0]-ey[0][0],ey[1][1]-ey[0][1]),oy=Jg.__zoom,ay="function"==typeof Rg?Rg.apply(Jg,Kg):Rg,iy=Og(oy.invert(ty).concat(ny/oy.k),ay.invert(ty).concat(ny/ay.k));return function(ly){if(1===ly)ly=ay;else{var ry=iy(ly),dy=ny/ry[2];ly=new gp(dy,ty[0]-ry[0]*dy,ty[1]-ry[1]*dy)}Qg.zoom(null,ly)}})}function Tg(Wg,Rg){for(var Gg,Jg=0,Kg=$g.length;Jg<Kg;++Jg)if((Gg=$g[Jg]).that===Wg)return Gg;return new kg(Wg,Rg)}function kg(Wg,Rg){this.that=Wg,this.args=Rg,this.index=-1,this.active=0,this.extent=Dg.apply(Wg,Rg)}function Sg(){if(Pg.apply(this,arguments)){var Wg=Tg(this,arguments),Rg=this.__zoom,Gg=Math.max(Fg,Math.min(Lg,Rg.k*Math.pow(2,-Pa.event.deltaY*(Pa.event.deltaMode?120:1)/500))),Jg=um(this);if(Wg.wheel)Wg.mouse[0][0]===Jg[0]&&Wg.mouse[0][1]===Jg[1]||(Wg.mouse[1]=Rg.invert(Wg.mouse[0]=Jg)),clearTimeout(Wg.wheel);else{if(Rg.k===Gg)return;Wg.mouse=[Jg,Rg.invert(Jg)],Bm(this),Wg.start()}tg(),Wg.wheel=setTimeout(function(){Wg.wheel=null,Wg.end()},Bg),Wg.zoom("mouse",vg(xg(fg(Rg,Gg),Wg.mouse[0],Wg.mouse[1]),Wg.extent))}}function Cg(){if(!Eg&&Pg.apply(this,arguments)){var Wg=Tg(this,arguments),Rg=xm(Pa.event.view).on("mousemove.zoom",function(){if(tg(),!Wg.moved){var Qg=Pa.event.clientX-Jg,ey=Pa.event.clientY-Kg;Wg.moved=Qg*Qg+ey*ey>Zg}Wg.zoom("mouse",vg(xg(Wg.that.__zoom,Wg.mouse[0]=um(Wg.that),Wg.mouse[1]),Wg.extent))},!0).on("mouseup.zoom",function(){Rg.on("mousemove.zoom mouseup.zoom",null),bc(Pa.event.view,Wg.moved),tg(),Wg.end()},!0),Gg=um(this),Jg=Pa.event.clientX,Kg=Pa.event.clientY;wm(Pa.event.view),yp(),Wg.mouse=[Gg,this.__zoom.invert(Gg)],Bm(this),Wg.start()}}function zg(){if(Pg.apply(this,arguments)){var Wg=this.__zoom,Rg=um(this),Gg=Wg.invert(Rg),Jg=vg(xg(fg(Wg,Wg.k*(Pa.event.shiftKey?.5:2)),Rg,Gg),Dg.apply(this,arguments));tg(),0<Ng?xm(this).transition().duration(Ng).call(wg,Jg,Rg):xm(this).call(yg.transform,Jg)}}function Mg(){if(Pg.apply(this,arguments)){var Wg,Rg,Gg,Jg,Kg=Tg(this,arguments),Qg=Pa.event.changedTouches,ey=Qg.length;for(yp(),Rg=0;Rg<ey;++Rg)Gg=Qg[Rg],Jg=[Jg=vm(this,Qg,Gg.identifier),this.__zoom.invert(Jg),Gg.identifier],Kg.touch0?Kg.touch1||(Kg.touch1=Jg):(Kg.touch0=Jg,Wg=!0);if(Yg&&(Yg=clearTimeout(Yg),!Kg.touch1))return Kg.end(),void((Jg=xm(this).on("dblclick.zoom"))&&Jg.apply(this,arguments));Wg&&(Yg=setTimeout(function(){Yg=null},Vg),Bm(this),Kg.start())}}function Ug(){var Wg,Rg,Gg,Jg,Kg=Tg(this,arguments),Qg=Pa.event.changedTouches,ey=Qg.length;for(tg(),Yg&&(Yg=clearTimeout(Yg)),Wg=0;Wg<ey;++Wg)Rg=Qg[Wg],Gg=vm(this,Qg,Rg.identifier),Kg.touch0&&Kg.touch0[2]===Rg.identifier?Kg.touch0[0]=Gg:Kg.touch1&&Kg.touch1[2]===Rg.identifier&&(Kg.touch1[0]=Gg);if(Rg=Kg.that.__zoom,Kg.touch1){var ty=Kg.touch0[0],ny=Kg.touch0[1],oy=Kg.touch1[0],ay=Kg.touch1[1],iy=(iy=oy[0]-ty[0])*iy+(iy=oy[1]-ty[1])*iy,ly=(ly=ay[0]-ny[0])*ly+(ly=ay[1]-ny[1])*ly;Rg=fg(Rg,Math.sqrt(iy/ly)),Gg=[(ty[0]+oy[0])/2,(ty[1]+oy[1])/2],Jg=[(ny[0]+ay[0])/2,(ny[1]+ay[1])/2]}else{if(!Kg.touch0)return;Gg=Kg.touch0[0],Jg=Kg.touch0[1]}Kg.zoom("touch",vg(xg(Rg,Gg,Jg),Kg.extent))}function Ag(){var Wg,Rg,Gg=Tg(this,arguments),Jg=Pa.event.changedTouches,Kg=Jg.length;for(yp(),Eg&&clearTimeout(Eg),Eg=setTimeout(function(){Eg=null},Vg),Wg=0;Wg<Kg;++Wg)Rg=Jg[Wg],Gg.touch0&&Gg.touch0[2]===Rg.identifier?delete Gg.touch0:Gg.touch1&&Gg.touch1[2]===Rg.identifier&&delete Gg.touch1;Gg.touch1&&!Gg.touch0&&(Gg.touch0=Gg.touch1,delete Gg.touch1),Gg.touch0?Gg.touch0[1]=this.__zoom.invert(Gg.touch0[0]):Gg.end()}var Yg,Eg,Pg=fp,Dg=xp,Fg=0,Lg=1/0,Hg=-Lg,Xg=Lg,qg=Hg,Ig=Xg,Ng=250,Og=Yh,$g=[],jg=xs("start","zoom","end"),Vg=500,Bg=150,Zg=0;return yg.transform=function(Wg,Rg){var Gg=Wg.selection?Wg.selection():Wg;Gg.property("__zoom",vp),Wg===Gg?Gg.interrupt().each(function(){Tg(this,arguments).start().zoom(null,"function"==typeof Rg?Rg.apply(this,arguments):Rg).end()}):wg(Wg,Rg)},yg.scaleBy=function(Wg,Rg){yg.scaleTo(Wg,function(){return this.__zoom.k*("function"==typeof Rg?Rg.apply(this,arguments):Rg)})},yg.scaleTo=function(Wg,Rg){yg.transform(Wg,function(){var Gg=Dg.apply(this,arguments),Jg=this.__zoom,Kg=bg(Gg),Qg=Jg.invert(Kg);return vg(xg(fg(Jg,"function"==typeof Rg?Rg.apply(this,arguments):Rg),Kg,Qg),Gg)})},yg.translateBy=function(Wg,Rg,Gg){yg.transform(Wg,function(){return vg(this.__zoom.translate("function"==typeof Rg?Rg.apply(this,arguments):Rg,"function"==typeof Gg?Gg.apply(this,arguments):Gg),Dg.apply(this,arguments))})},kg.prototype={start:function(){return 1==++this.active&&(this.index=$g.push(this)-1,this.emit("start")),this},zoom:function(Rg,Gg){return this.mouse&&"mouse"!==Rg&&(this.mouse[1]=Gg.invert(this.mouse[0])),this.touch0&&"touch"!==Rg&&(this.touch0[1]=Gg.invert(this.touch0[0])),this.touch1&&"touch"!==Rg&&(this.touch1[1]=Gg.invert(this.touch1[0])),this.that.__zoom=Gg,this.emit("zoom"),this},end:function(){return 0==--this.active&&($g.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(Rg){Ys(new mp(yg,Rg,this.that.__zoom),jg.apply,jg,[Rg,this.that,this.args])}},yg.filter=function(Wg){return arguments.length?(Pg="function"==typeof Wg?Wg:Qm(!!Wg),yg):Pg},yg.extent=function(Wg){return arguments.length?(Dg="function"==typeof Wg?Wg:Qm([[+Wg[0][0],+Wg[0][1]],[+Wg[1][0],+Wg[1][1]]]),yg):Dg},yg.scaleExtent=function(Wg){return arguments.length?(Fg=+Wg[0],Lg=+Wg[1],yg):[Fg,Lg]},yg.translateExtent=function(Wg){return arguments.length?(Hg=+Wg[0][0],Xg=+Wg[1][0],qg=+Wg[0][1],Ig=+Wg[1][1],yg):[[Hg,qg],[Xg,Ig]]},yg.duration=function(Wg){return arguments.length?(Ng=+Wg,yg):Ng},yg.interpolate=function(Wg){return arguments.length?(Og=Wg,yg):Og},yg.on=function(){var Wg=jg.on.apply(jg,arguments);return Wg===jg?yg:Wg},yg.clickDistance=function(Wg){return arguments.length?(Zg=(Wg=+Wg)*Wg,yg):Math.sqrt(Zg)},yg},Pa.zoomIdentity=eg,Pa.drag=function(){function yg(Lg){Lg.on("mousedown.drag",fg).on("touchstart.drag",bg).on("touchmove.drag",wg).on("touchend.drag touchcancel.drag",Tg).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function fg(){if(!Mg&&Ug.apply(this,arguments)){var Lg=kg("mouse",Ag.apply(this,arguments),um,this,arguments);Lg&&(xm(Pa.event.view).on("mousemove.drag",xg,!0).on("mouseup.drag",vg,!0),wm(Pa.event.view),vc(),zg=!1,Sg=Pa.event.clientX,Cg=Pa.event.clientY,Lg("start"))}}function xg(){if(bm(),!zg){var Lg=Pa.event.clientX-Sg,Hg=Pa.event.clientY-Cg;zg=Lg*Lg+Hg*Hg>Fg}Eg.mouse("drag")}function vg(){xm(Pa.event.view).on("mousemove.drag mouseup.drag",null),bc(Pa.event.view,zg),bm(),Eg.mouse("end")}function bg(){if(Ug.apply(this,arguments)){var Lg,Hg,Xg=Pa.event.changedTouches,qg=Ag.apply(this,arguments),Ig=Xg.length;for(Lg=0;Lg<Ig;++Lg)(Hg=kg(Xg[Lg].identifier,qg,vm,this,arguments))&&(vc(),Hg("start"))}}function wg(){var Lg,Hg,Xg=Pa.event.changedTouches,qg=Xg.length;for(Lg=0;Lg<qg;++Lg)(Hg=Eg[Xg[Lg].identifier])&&(bm(),Hg("drag"))}function Tg(){var Lg,Hg,Xg=Pa.event.changedTouches,qg=Xg.length;for(Mg&&clearTimeout(Mg),Mg=setTimeout(function(){Mg=null},500),Lg=0;Lg<qg;++Lg)(Hg=Eg[Xg[Lg].identifier])&&(vc(),Hg("end"))}function kg(Lg,Hg,Xg,qg,Ig){var Ng,Og,$g,jg=Xg(Hg,Lg),Vg=Pg.copy();if(Ys(new wc(yg,"beforestart",Ng,Lg,Dg,jg[0],jg[1],0,0,Vg),function(){return null!=(Pa.event.subject=Ng=Yg.apply(qg,Ig))&&(Og=Ng.x-jg[0]||0,$g=Ng.y-jg[1]||0,!0)}))return function Bg(Zg){var Wg,Rg=jg;switch(Zg){case"start":Eg[Lg]=Bg,Wg=Dg++;break;case"end":delete Eg[Lg],--Dg;case"drag":jg=Xg(Hg,Lg),Wg=Dg;}Ys(new wc(yg,Zg,Ng,Lg,Wg,jg[0]+Og,jg[1]+$g,jg[0]-Rg[0],jg[1]-Rg[1],Vg),Vg.apply,Vg,[Zg,qg,Ig])}}var Sg,Cg,zg,Mg,Ug=Tc,Ag=kc,Yg=Sc,Eg={},Pg=xs("start","drag","end"),Dg=0,Fg=0;return yg.filter=function(Lg){return arguments.length?(Ug="function"==typeof Lg?Lg:Tm(!!Lg),yg):Ug},yg.container=function(Lg){return arguments.length?(Ag="function"==typeof Lg?Lg:Tm(Lg),yg):Ag},yg.subject=function(Lg){return arguments.length?(Yg="function"==typeof Lg?Lg:Tm(Lg),yg):Yg},yg.on=function(){var Lg=Pg.on.apply(Pg,arguments);return Lg===Pg?yg:Lg},yg.clickDistance=function(Lg){return arguments.length?(Fg=(Lg=+Lg)*Lg,yg):Math.sqrt(Fg)},yg},Pa.brush=function(){return zp(ug)},Pa.brushX=function(){return zp(sg)},Pa.brushY=function(){return zp(cg)},Pa.mouse=um,Pa.select=xm,Pa.selection=xc,Pa.selectAll=function(yg){return"string"==typeof yg?new fc([document.querySelectorAll(yg)],[document.documentElement]):new fc([null==yg?[]:yg],fm)},Pa.selectorAll=_m,Pa.touch=vm}(this.d3=this.d3||{});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_isFullscreen',value:function(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}},{key:'_getParent',value:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.nodeType==Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}},{key:'connectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'connectedCallback',this).call(this),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}},{key:'disconnectedCallback',value:function(){babelHelpers.get(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),'disconnectedCallback',this).call(this),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}},{key:'toggleFullscreen',value:function(f){f.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen()}},{key:'fullScreenChanged',value:function(){this._fullScreenChanged()}},{key:'_fullScreenChanged',value:function(){var f=this;requestAnimationFrame(function(){var g=f._isFullscreen(),h=f._getParent();g?(f.fullscreen=!0,f.style.position='fixed',f.style.top='0',f.style.left='0',f.style.right='0',f.style.bottom='0',f.style.zIndex='1000',f.style['border-radius']='0px',document.body.style.overflow='hidden',h&&h.classList.add('fullscreen')):(f.fullscreen=!1,f.style.position='',f.style.top='',f.style.left='',f.style.right='',f.style.bottom='',f.style.zIndex='',f.style['border-radius']='',document.body.style.overflow='',h&&h.classList.remove('fullscreen')),f.notifyResize&&f.notifyResize()})}},{key:'computeFullscreenIcon',value:function(f){return f?'fullscreen-exit':'fullscreen'}}],[{key:'properties',get:function(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}}]),c}(a)};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>var DeviceSVG=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_openedChanged',value:function(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}},{key:'open',value:function(d){this.setSvg(d.detail),this.opened=!0}},{key:'close',value:function(){this.opened=!1}},{key:'_srcChanged',value:function(d){d&&this._recentSrc!==d&&(this._recentSrc=d,this._fetch(d,'GET','include','xml').then(this._registerXML.bind(this)).catch(function(f){console.log(d,f)}))}},{key:'_registerXML',value:function(d){if(d&&d.documentElement){var f=document.importNode(d.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(f,this.$.svgContainer.firstChild),this._svg=d3.select(f).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var g=this._svg.attr('viewBox').split(' ');this._width=g[2]-g[0],this._height=g[3]-g[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}},{key:'_initialize',value:function(){var d=this;setTimeout(function(){d._selectableItemsChanged(),d._selectSelected(),d._selectExceeds()},0)}},{key:'_initZoom',value:function(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}},{key:'_selectedItemsChanged',value:function(){var d=this.item,f=this.items;d&&Object.keys(d).length||f&&f.length?(!this.src&&(d&&d.svg&&d.svg.path?this.src=d.svg.path:0<f.length&&f[f.length-1].svg&&f[f.length-1].svg.path&&(this.src=f[f.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}},{key:'_exceedingChanged',value:function(){var d=this.exceeding;d&&d.length?(!this.src&&d[d.length-1].svg&&d[d.length-1].svg.path&&(this.src=d[d.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}},{key:'_initialChanged',value:function(d){this.src&&d&&this._resetZoom()}},{key:'_selectableItemsChanged',value:function(){if(this._mainG&&this._mainG.node&&this.src&&this.selectableItems&&this.selectableItems.items){var d=this;for(var f in this.selectableItems.items)this._mainG.selectAll(this.selectableItems.items[f]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',f).on('click',function(){d._zoomToElement(this),d._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==this.selectableItems.minZoom&&(this.minZoom=this.selectableItems.minZoom),void 0!==this.selectableItems.maxZoom&&(this.maxZoom=this.selectableItems.maxZoom),void 0!==this.selectableItems.zoomPartition&&(this.zoomPartition=this.selectableItems.zoomPartition),this._initZoom(),this._inialized=!0}}},{key:'_zoom',value:function(){this._mainG.attr('transform',d3.event.transform)}},{key:'_zoomToElement',value:function(d){if(void 0!==d&&this._svg.node()){var f=this._calcCenterZoom(d),g=d3.zoomIdentity.translate(f.x,f.y).scale(f.k);this._svg.node().__zoom=g,this._mainG.transition(300).attr('transform',g)}}},{key:'_selectSelected',value:function(){var d=this;requestAnimationFrame(function(){var f=d.multi?d.items||[]:[];d.item&&Object.keys(d.item).length&&-1===f.indexOf(d.item)&&f.push(d.item);var g;if(g=ShadyCSS&&!0===ShadyCSS.nativeShadow?d.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),g&&f&&f.length){for(var l,m,n,o=0;o<f.length;o++)if(f[o]&&f[o].color&&f[o].svg&&f[o].svg.selector&&g&&g.sheet&&g.sheet.cssRules&&g.sheet.insertRule){l=f[o].svg.selector.split(',');for(var p=0;p<l.length;p++){m=l[p]+'.'+d.selectedClass,n=!1;for(var q=0;q<g.sheet.cssRules.length;q++)g.sheet.cssRules[o].selectorText===m&&(n=!0);!1===n&&g.sheet.insertRule(m+' {\nfill: '+f[o].color+' !important;\n}',g.sheet.cssRules.length)}}d.updateStyles(),d.select(f,d.selectedClass)}})}},{key:'_selectExceeds',value:function(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}},{key:'select',value:function(d,f){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+f).classed(f,!1);var g,h=[];if(Array.isArray(d)){for(var l=0;l<d.length;l++)d[l].svg&&d[l].svg.selector&&h.push(d[l].svg.selector);h=h.join(',')}else h=d&&d.svg&&d.svg.selector?d.svg.selector:'';if(''===h||(g=this._mainG.selectAll(h)).classed(f,!0).empty())return void(this.opened&&this._resetZoom());var m,n=[],o=this;g.each(function(){m=this.getBoundingClientRect(),n[0]=(n[0]>m.left?m.left:n[0])||m.left,n[1]=(n[1]>m.top?m.top:n[1])||m.top,n[2]=(n[2]<m.right?m.right:n[2])||m.right,n[3]=(n[3]<m.bottom?m.bottom:n[3])||m.bottom}),m={left:n[0],top:n[1],height:n[3]-n[1],width:n[2]-n[0]},this.opened&&this._zoomToElement(m)}}},{key:'_calcCenterZoom',value:function(d){var f=this.getBoundingClientRect();if(void 0===f||void 0===d||0===f.height||0===f.width)return{x:0,y:0,k:1};var g,m,l=f.height/f.width;g=void 0===d.nodeType?d:d.getBoundingClientRect();var n=this._mainG.node().getBBox(),o=this._mainG.node().getBoundingClientRect(),p=n.width/o.width||1,q=(g.left-o.left)*p+n.x,r=(g.top-o.top)*p+n.y,s=this._height,u=this._width,v=this._ratio,w=this.zoomPartition;return m=l<v?Math.min(u/(w*g.width*p*l),s/(w*g.height*p)):Math.min(u/(w*g.width*p),u*l/(w*g.height*p)),m<this.minZoom?m=this.minZoom:m>this.maxZoom&&(m=this.maxZoom),l<v?(q=-m*q+(s/l-m*g.width*p)/2,r=-m*r+(s-m*g.height*p)/2):(q=-m*q+(u-m*g.width*p)/2,r=-m*r+(u*l-m*g.height*p)/2),isNaN(q)||isNaN(r)||isNaN(m)?{x:0,y:0,k:1}:{x:q,y:r,k:m}}},{key:'notifyResize',value:function(){this._resetZoom()}},{key:'_resetZoom',value:function(d){var f=this;d&&(d.preventDefault(),d.stopPropagation()),requestAnimationFrame(function(){if(f.opened&&f._mainG&&f._mainG.node&&f.src&&(f._mainG.selectAll('.clicked').classed('clicked',!1),!f.initiallyZoomToAll)){if(f.item&&Object.keys(f.item).length||f.items&&f.items.length)return void f._selectSelected();if(f.exceeding.length)return void f._selectExceeds();if(f.initial){var g;if(!(g=f._mainG.selectAll(f.initial)).empty())return void f.select([{svg:{selector:f.initial}}],'initial')}f._zoomToElement(f._mainG.node())}})}}],[{key:'is',get:function(){return'device-svg'}},{key:'properties',get:function(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object,value:function(){return{}}},items:{type:Array,value:function(){return[]}},exceeding:{type:Array,value:function(){return[]}},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}},{key:'observers',get:function(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}}]),b}(WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)));customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return function(b){function c(){return babelHelpers.classCallCheck(this,c),babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).call(this))}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:'_domainXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.domain(f)}},{key:'_domainYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.domain(f).nice()}},{key:'_rangeXChanged',value:function(f){void 0===f||void 0===this.scaleX||f.some(function(g){return void 0===g||null===g})||this.scaleX.range(f)}},{key:'_rangeYChanged',value:function(f){void 0===f||void 0===this.scaleY||f.some(function(g){return void 0===g||null===g})||this.scaleY.range(f).nice()}},{key:'_computeScaleFn',value:function(f,g,h){if(void 0!==f){var i='time'===f?d3.scaleTime():'ln'===f?d3.scaleLog().base(Math.E):'log'===f?d3.scaleLog().base(g||10):'log\u2082'===f?d3.scaleLog().base(2):'log\u2081\u2080'===f?d3.scaleLog().base(10):'\u221A'===f?d3.scalePow().exponent(0.5):'pow'===f?d3.scalePow().exponent(g||1):d3.scaleLinear();return'x'===h?(i.ticks(this.ticksX||10),this.domainX&&i.domain(this.domainX),this.rangeX&&i.range(this.rangeX)):'y'===h&&(i.ticks(this.ticksY||10),this.domainY&&i.domain(this.domainY),this.rangeY&&i.range(this.rangeY),i.nice()),i}}},{key:'_SCALE_USES_BASE',value:function(f){return'log'===f||'pow'===f}},{key:'_IS_LOG_SCALE',value:function(f){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(f)}}],[{key:'properties',get:function(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}},{key:'observers',get:function(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}},{key:'_VALID_SCALES',get:function(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}}]),c}(a)};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return function(e){function f(){return babelHelpers.classCallCheck(this,f),babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this))}return babelHelpers.inherits(f,e),babelHelpers.createClass(f,[{key:'_rangeXChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeXChanged',this).call(this,j),j[1]&&(this.ticksX=Math.ceil(j[1]/50))}},{key:'_rangeYChanged',value:function(j){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_rangeYChanged',this).call(this,j),j[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.axisMargin)):this.ticksY=Math.ceil(j[0]/50))}},{key:'_computeAxisNode',value:function(j,k,l,n){if(void 0!==j){var o=this.axisColor||'';l=l||this.axisTitle||'';var p=this._isVertical(k);if(n&&n.node){var q=n.node();q&&q.parentElement&&q.parentElement.removeChild(q),n=null}var r=j.append('svg:g').classed('axis',!0).attr('orient',k).classed('y',p).classed('vertical',p).classed('x',!p).classed('expanded',!0).style('color',o);return r.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,r)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),r.append('svg:title').text(l),r.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,k)),r.node()._genitor=this,r.node()._axis=r,r._left=0,r._right=0,r._bottom=0,r._top=0,r}}},{key:'_updateAxisBrushGenerator',value:function(j,k,l){l=l||8;var n=[[0,0],[j[1],j[0]]];'left'===k?n[0][0]=-l:'right'===k?n[1][0]=l:'top'===k?n[0][1]=-l:'bottom'===k&&(n[1][1]=l),this.extent(n)}},{key:'_computeAxisGenerator',value:function(j,k,l,n){if(j&&void 0!==k&&void 0!==l){var o=this.tickSize||6;return('left'===j?d3.axisLeft(k):'right'===j?d3.axisRight(k):'top'===j?d3.axisTop(k):d3.axisBottom(k)).tickSize(o).tickFormat(this._computeFormatFn(l,n))}}},{key:'_setAxisProperties',value:function(j,k,l){j.classed('expanded',l),k.tickFormat(l?null:'')}},{key:'_removeAxes',value:function(){if(this.axisX&&this.axisX.node){var j=this.axisX.node();j&&j.parentElement&&j.parentElement.removeChild(j),this.axisX=null}if(this.axisY&&this.axisY.node){var j=this.axisY.node();j&&j.parentElement&&j.parentElement.removeChild(j),this.axisY=null}delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}},{key:'_onAxisClicked',value:function(j){var k=j.classed('expanded');j.classed('expanded',!k),this.sizeChanged()}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault();'left'===j||'right'===j?(this.axisY._isBrushed=!1,this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.scaleX.domain(this.domainX),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}},{key:'_onAxisMouseover',value:function(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}},{key:'_onAxisMouseleave',value:function(){}},{key:'_onAxisDragStart',value:function(){d3.select(this).raise().classed('dragged',!0);var j=d3.select(this).classed('vertical');j?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}},{key:'_onAxisDragged',value:function(){var j=d3.select(this).classed('vertical'),k=0,l=0;j?k=(this._axis._left||0)+d3.event.x-this._startleft:l=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+k+','+l+')')}},{key:'_onAxisDragEnd',value:function(){d3.select(this).classed('dragged',!1);var n,j=d3.select(this).classed('vertical'),k=0,l=0,o=this._genitor;if(j){if(k=(this._axis._left||0)+d3.event.x-this._startleft,n=k>o.rangeX[1]/2?'right':'left',n!==o.axisOrientY)return o.axisGeneratorY=o._computeAxisGenerator(o.axisOrientY=n,o.scaleY,o.scalingY,o.scaleBaseY).ticks(o.ticksY).tickSize(o.tickSize).tickFormat(o.axisY.classed('expanded')?o._computeFormatFn(o.scalingY,o.scaleBaseY):''),o.axisY=o._computeAxisNode(o._axisInsertionPoint,n,o.item&&o.item.mount,o.axisY).classed('expanded',!0).call(o.axisGeneratorY),void o.sizeChanged();k=this._axis._left}else{if(l=(this._axis._top||0)+d3.event.y-this._starttop,n=l>o.rangeY[0]/2?'bottom':'top',n!==o.axisOrientX)return o.axisGeneratorX=o._computeAxisGenerator(o.axisOrientX=n,o.scaleX,o.scalingX,o.scaleBaseX).ticks(o.ticksX).tickFormat(o.axisX.classed('expanded')?o._computeFormatFn(o.scalingX,o.scaleBaseX):''),o.axisX=o._computeAxisNode(o._axisInsertionPoint,n,o.item&&o.item.mount,o.axisX).classed('expanded',!0).call(o.axisGeneratorX),void o.sizeChanged();l=this._axis._top}d3.select(this).attr('transform','translate('+k+','+l+')'),this._startleft=0,this._starttop=0}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){if('y'===j){var n=k.map(this.scaleY.invert,this.scaleY).sort(function(o,p){return o>p});this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)}else{var n=k.map(this.scaleX.invert,this.scaleX).sort(function(o,p){return o>p});this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)}this.redraw()}}}},{key:'_axisColorChanged',value:function(j){this.axisX&&this.axisX.style('color',j),this.axisY&&this.axisY.style('color',j)}},{key:'_isVertical',value:function(j){return'left'===j||'right'===j}},{key:'_computeFormatFn',value:function(j){return'time'===j?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}},{key:'sizeChanged',value:function(){}},{key:'redraw',value:function(){}},{key:'formatTime',value:function(j){return(d3.timeSecond(j)<j?this.timeFormat('.%L'):d3.timeMinute(j)<j?this.timeFormat(':%S'):d3.timeHour(j)<j?this.timeFormat('%H:%M'):d3.timeDay(j)<j?this.timeFormat('%X'):d3.timeMonth(j)<j?d3.timeWeek(j)<j?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(j)<j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeRange',value:function(j,k,l){var n=(k[1]-k[0]).valueOf()/l;return(100>n?this.timeFormat(':%S.%L'):500>n?this.timeFormat(':%M:%S.%L'):5E3>n?this.timeFormat(':%M:%S'):2E4>n?this.timeFormat('%H:%M:%S'):6E4>n?this.timeFormat('%H:%M'):36E5>n?this.timeFormat('%X'):864E5>n?this.timeFormat('%d.%m'):6048E5>n?this.timeFormat('%d.%m'):24192E5>n?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(j)}},{key:'formatTimeAbsolute',value:function(j){var k=j%315576E5,l=(j-k)/315576E5,n=k%864E5,o=(k-n)/864E5,p=n%36E5,q=(n-p)/36E5,r=p%6E4,t=(p-r)/6E4,u=r%1E3,v=(r-u)/1E3,w='';return l&&(w+=l+'y '),o&&(w+=o+'d '),q&&(w+=q+'h '),t&&(w+=t+'m '),v&&(w+=v+'s '),u&&(w+=u+'ms'),w}},{key:'formatNumber',value:function(j){return this.numberFormat(',g')(j)}},{key:'formatIndicator',value:function(j,k){return j&&j.from&&j.to?k<j.from||k>j.to?'\u2717':'\u2713':k?'\u2717':'\u2713'}},{key:'_setDateNumberFormat',value:function(j,k){void 0===k||void 0===j||(k&&(this.localeDate=k,d3.timeFormatDefaultLocale(k),this.timeFormat=d3.timeFormatLocale(k).format),j&&(this.localeNumber=j,d3.formatDefaultLocale(j),this.numberFormat=d3.formatLocale(j).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}],[{key:'properties',get:function(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:24},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}},{key:'observers',get:function(){return['_setDateNumberFormat(localeNumber, localeDate)']}},{key:'_VALID_AXIS_POSITIONS',get:function(){return['top','right','bottom','bottom']}}]),f}(WebvisualMixins.ScaleMixin(c))};</script><dom-module id="device-graph"><template><style></style></template><script>var DeviceGraph=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c._isAttached=!1,c._chart=null,c._areaGenerator=d3.area().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y0(function(){return c.keys&&c.keys.y&&c._IS_LOG_SCALE(c.keys.y.scale)?c._chart._height:c.scaleY(0)}).y1(function(f){return c.scaleY(f.y)}),c._lineGenerator=d3.line().defined(c._defined.bind(c)).x(function(f){return c.scaleX(f.x)}).y(function(f){return c.scaleY(f.y)}),c.bisectDate=d3.bisector(function(f,g){return f.x-g}),c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'device-graph'}},{key:'properties',get:function(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3},viewLength:{type:Number,value:2e4},storeInside:{type:Boolean,value:!0,readOnly:!0},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}}]),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.item&&this.addNodes()}},{key:'disconnectedCallback',value:function(){this._isAttached=!1,babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),this.removeNodes()}},{key:'addNodes',value:function(){this._isAttached&&this.clearValues(!0);var f=this._containerRoot;return f&&'DEVICE-CHART'===f.nodeName?f._isAttached?void(this._chart=f,this._axisInsertionPoint=f._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',f)}},{key:'removeNodes',value:function(){var f;this.axisX&&(f=this.axisX.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this.axisY&&(f=this.axisY.node(),f&&f.parentElement&&f.parentElement.removeChild(f)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}},{key:'_areaChanged',value:function(f){if(this._chart&&this._chart._area)if(!!f)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var g=this._area.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._area=null}}},{key:'_lineChanged',value:function(f){if(this._chart&&this._chart._line)if(!!f)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var g=this._line.node();g&&g.parentElement&&g.parentElement.removeChild(g),this._line=null}}},{key:'_thresholdChanged',value:function(f){if(this._chart&&this._chart._boundery)if(f)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){var g=this.boundery.node();g&&g.parentElement&&g.parentElement.removeChild(g),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.mount||'#000')}}},{key:'_setColorProperties',value:function(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}},{key:'_itemChanged',value:function(f){return this._isAttached?f&&f.mount?void this.addNodes():void this.removeNodes():void 0}},{key:'insertValues',value:function(f,g){if(void 0!==f){var g=g||(0<this.viewLength?this.viewLength:f.length);if(g&&(f=f.slice(f.length-g,f.length)),f.map(function(l){return{x:+l.x,y:+l.y,state:+l.state}}),this.storeInside){this.values=this.values.concat(f);var h=this.min(this.values,'x'),k=this.max(this.values,'x');void 0!==h&&void 0!==k&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(h<this._chart.domainX[0]&&this._chart.set('domainX',[h,this._chart.domainX[1]]),k>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],k])):this.set('domainX',[h,k])),h=this.min(this.values,'y'),k=this.max(this.values,'y'),void 0!==h&&void 0!==k&&(h===k&&(h--,k++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(h<this._chart.domainY[0]&&this._chart.set('domainY',[h,this._chart.domainY[1]]),k>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],k])):this.set('domainY',[h,k]))}this.renderInsertedValues(f)}}},{key:'spliceValues',value:function(f){for(var g=0;g<f.length;g++){for(var h=this.values.length-1;0<=h&&this.values[h].x!==f[g].x;h--);-1!==h&&this.values.splice(h,1)}this.redraw()}},{key:'renderInsertedValues',value:function(f){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var g;this._chart.domainX&&this._chart.domainX.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainX',this.domainX),g=!0),this._chart.domainY&&this._chart.domainY.some(function(h){return void 0===h||null===h})&&(this._chart.set('domainY',this.domainY),g=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(g=!0),this.redraw(g,f)}}},{key:'sizeChanged',value:function(){this._isAttached&&this._chart.sizeChanged()}},{key:'redraw',value:function(f){if(this._isAttached){if(f)return void this._chart.redraw(!0);var h=this.values||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(h)),this.hasLine&&this._line.attr('d',this._lineGenerator(h)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var l,k=[],n=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',o=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',q=this.item.color||'#000';void 0!==this.item.threshold.from&&(l=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(k.push({o:l+'%',c:o}),k.push({o:l+'%',c:q}))),void 0!==this.item.threshold.to&&(l=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(k.push({o:l+'%',c:q}),k.push({o:l+'%',c:n})));var r=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(k);r.attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.enter().append('stop').attr('offset',function(s){return s.o}).attr('stop-color',function(s){return s.c}),r.exit().remove()}}}},{key:'_getDomain',value:function(f,g){var h=this;return new Promise(function(k,l){var n='y'===f,o=n?h.scalingY:h.scalingX;h.requestRange(f).then(function(q){if(void 0!==q[0]&&void 0!==q[1]){n&&q[0]===q[1]&&(q[0]--,q[1]++);var r=h._IS_LOG_SCALE(o);if(r){var s=0<q[0]*q[1];s&&0>=q[0]&&(q[0]=Math.sign(q[1])*Number.EPSILON),s&&0>=q[1]&&(q[1]=Math.sign(q[0])*Number.EPSILON)}g&&('x'===f?h.set('domainX',q):'y'===f&&h.set('domainY',q))}k({domain:q,key:f})}).catch(function(q){l(q)})})}},{key:'_defined',value:function(f){return Number.isFinite(f.y)?0>=f.y&&this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?null:!0:null}},{key:'_closestPoint',value:function(f){function g(E){var F=h(new Date(E.x))-f[0],G=k(E.y)-f[1];return F*F+G*G}var h=this.scaleX,k=this.scaleY,l=this.values,n=h.invert(f[0]),o=Math.ceil(this._chart._width/l.length),q=Math.pow(Math.ceil(l.length/this._chart._width),2),r=this.bisectDate.left(l,n,0,l.length-1),s=g(l[r]),t=Math.sqrt(s)/q,u=h.invert(f[0]-t),w=this.bisectDate.left(l,u,0,r),z=2*r-w;0>w&&(w=0),z>l.length&&(z=l.length);var B,A=s,C=r;for(D=w;D<z;D+=o)(B=g(l[D]))<A&&(r=D,A=B);C=r;for(var D=r+1;D<z&&D<r+o-1;D++)(B=g(l[D]))<A&&(A=B,C=D);for(var D=r-1;D>w&&D>r-o+1;D--)(B=g(l[D]))<A&&(A=B,C=D);return l[C]}},{key:'_closestInterpolatedPoint',value:function(f,g){function h(D){var E=D.x-f[0],F=D.y-f[1];return E*E+F*F}g=g||this._area.node()||this._line.node();for(var n,o,r,t,k=g.getTotalLength(),l=2*Math.ceil(k/this._chart._width/2),q=Infinity,s=0;s<=k;s+=l)(t=h(r=g.getPointAtLength(s)))<q&&(n=r,o=s,q=t);for(l/=2;0.5<l;){var u,w,z,A,B,C;0<=(z=o-l)&&(B=h(u=g.getPointAtLength(z)))<q?(n=u,o=z,q=B):(A=o+l)<=k&&(C=h(w=g.getPointAtLength(A)))<q?(n=w,o=A,q=C):l/=2}return n={x:this.scaleX(n.x),y:this.scaleY(n.y)},n.distance=Math.sqrt(q),n}},{key:'setColor',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'setColor',this).call(this,f),this._setColorProperties()}},{key:'clearValues',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'clearValues',this).call(this,f)}},{key:'_getStrokeColor',value:function(f){if(this.item.threshold)switch(f.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}},{key:'_lineWidthChanged',value:function(f){this._line&&this._line.attr&&this._line.attr('stroke-width',f)}},{key:'_interpolationChanged',value:function(f){var g;g='Basis Spline'===f?d3.curveBasis:'Monotoner Spline'===f?d3.curveMonotoneX:'Kubischer Spline'===f?d3.curveNatural:'Cardinaler Spline'===f?d3.curveCardinal:'Catmull-Rom-Spline'===f?d3.curveCatmullRom:'Stufe (mitte)'===f?d3.curveStep:'Stufe (davor)'===f?d3.curveStepAfter:'Stufe (danach)'===f?d3.curveStepBefore:d3.curveLinear,this._areaGenerator.curve(g),this._lineGenerator.curve(g),this.redraw()}},{key:'_onAxisClicked',value:function(f){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisClicked',this).call(this,f)}},{key:'_onAxisMouseover',value:function(f,g){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'_onAxisMouseover',this).call(this,f,g),this._area&&this._area.raise(),this._line&&this._line.raise()}},{key:'_containerRoot',get:function(){var f=Polymer.dom(this).getOwnerRoot();return f?f.host||f.nodeType===Node.DOCUMENT_FRAGMENT_NODE?f.host:void 0:Polymer.dom(this).parentNode}}],[{key:'observers',get:function(){return['_itemChanged(item)','_lineChanged(hasLine)','_areaChanged(hasArea)','_thresholdChanged(item.threshold)']}}]),b}(WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))));customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:visible;font-family:inherit !important;}text{fill:currentColor;stroke:white;stroke-width:0.1;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;}.grid{mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 200ms linear;}.axis:hover path{fill-opacity:0.3;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.5;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;mix-blend-mode:hard-light;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *,
      #delta > *{stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:overlay;pointer-events:none;}#zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{color:var(--primary-text-color, #111);position:absolute;top:0;right:var(--control-right, 0px);display:flex;flex-direction:column;}.selectbox > select{opacity:1;}[hidden]{display:none !important;}</style><div id="svgContainer"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" on-click="_closeControl"><defs><marker id="arrowToLeft" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m 5.29167,-1.7197893 v 3.439581 L 0,2.6966667e-6 Z"></path></marker><marker id="arrowToRight" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m -5.2916667,-1.7197893 v 3.439581 L 3.3333333e-6,2.6966667e-6 Z"></path></marker><marker id="stub" markerWidth="5" markerHeight="5" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-1 -5 2 10"><path d="M0,0 m-1,-5 L1,-5 L1,5 L-1,5 z"></path><path d="M -2,0 M -5,-1 H 1 V 1 H -5 Z"></path></marker><filter x="0" y="0" width="1" height="1" id="solid"><feFlood flood-color="white"></feFlood><feComposite in="SourceGraphic"></feComposite></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" on-contextmenu="_resetZoom"></rect><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="√">√</option><option value="ln">ln</option><option value="log₂">log₂</option><option value="log₁₀">log₁₀</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div><div class="checkbox"><input type="checkbox" name="multiX" checked="{{multiAxesX::change}}">mehrere x-Achsen</div><div class="checkbox"><input type="checkbox" name="multiY" checked="{{multiAxesY::change}}">mehrere y-Achsen</div></iron-collapse><section id="control"><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>var DeviceChart=function(c){function f(){babelHelpers.classCallCheck(this,f);var h=babelHelpers.possibleConstructorReturn(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return h._width=0,h._height=0,h._graphs=new Set,h}return babelHelpers.inherits(f,c),babelHelpers.createClass(f,null,[{key:'is',get:function(){return'device-chart'}},{key:'properties',get:function(){return{opened:{type:Boolean},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}}]),babelHelpers.createClass(f,[{key:'_localizeChanged',value:function(j){this.set('localeDate',j('date')),this.set('localeNumber',j('number'))}},{key:'_fireResize',value:function(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}},{key:'connectedCallback',value:function(){babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'connectedCallback',this).call(this),this._buildLayout()}},{key:'_buildLayout',value:function(){var j=this;this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._controlcontent=d3.select(this.$.controlcontent),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',function(){j.cancelDebouncer('hideinfo')},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([0.99,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',this._debouncedHideInfo.bind(this),{passive:!0}).on('mousemove',function(){var k=d3.mouse(j._chart.node());requestAnimationFrame(function(){var l,n,o;if(j._graphs.forEach(function(u){if(u.values&&u.values.length){var v=u._closestPoint(k),w=Math.pow(k[0]-u.scaleX(v.x),2)+Math.pow(k[1]-u.scaleY(v.y),2);(void 0===o||w<o)&&(o=w,n=v,l=u)}}),n){var r='#fff';if(l.item.threshold)switch(n.state){case 1:r=l.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:r=l.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}j._focusedValue=n,j._focusedValue.g=l,j._focusedValue._left=j.multiAxesY?l.axisY._left:j.axisY._left,j._focusedValue._top=j.multiAxesX?l.axisX._top:j.axisX._top,j._focusDot.datum(n).attr('fill',r).attr('r',l.dotRadius),j._showInfo(),j._moveInfo(n)}else j._debouncedHideInfo()})},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}},{key:'reset',value:function(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}},{key:'sizeChanged',value:function(){var j=this;this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(function(){j.sizeLayout()},0))}},{key:'sizeLayout',value:function(){function j(A,B){return'left'===A?(this._left=v,this._right=0,v-=B):'right'===A?(this._left=0,this._right=r,r+=B):(this._left=0,this._right=0),'top'===A?(this._bottom=0,this._top=o,o-=B):'bottom'===A?(this._bottom=u,this._top=0,u+=B):(this._bottom=0,this._top=0),!0}function k(A,B,C){return this._left+=this._right,this._top+=this._bottom,this._bottom=0,this._right=0,'right'===A?this._left+=B:'bottom'===A&&(this._top+=C),!0}var l=this;if(this.opened&&this._isAttached){var n=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===n.height||0===n.width)return void requestAnimationFrame(function(){l.sizeChanged()});var o=-2,r=1,u=1,v=-2,w=[];if(this._graphs.forEach(function(A){if(A._isAttached){if(!A.axisX.attr('hidden')){var B=A.axisX.classed('expanded')?A.axisSizeX:A.tickSize+A.axisMargin;w.push(j.call(A.axisX,A.axisOrientX,B))}if(!A.axisY.attr('hidden')){var B=A.axisY.classed('expanded')?A.axisSizeY:A.tickSize+A.axisMargin;w.push(j.call(A.axisY,A.axisOrientY,B))}}}),!this.axisX.attr('hidden')){var z=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.axisMargin;w.push(j.call(this.axisX,this.axisOrientX,z))}if(!this.axisY.attr('hidden')){var z=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.axisMargin;w.push(j.call(this.axisY,this.axisOrientY,z))}Promise.all(w).then(function(){var A=l.$.svg.getBoundingClientRect();l._width=Math.abs(A.width-Math.abs(v||0)-Math.abs(r||0)),l._height=Math.abs(A.height-Math.abs(u||0)-Math.abs(o||0)),l.set('rangeX',[0,l._width]),l.set('rangeY',[l._height,0]),l._zoom.attr('height',l._height).attr('width',l._width),l._zoomBehavior.translateExtent([[0,0],[l._width,l._height]]).extent([[0,0],[l._width,l._height]]);var B=[];l._graphs.forEach(function(C){C._isAttached&&(!C.axisX.attr('hidden')&&B.push(k.call(C.axisX,C.axisOrientX,l._width,l._height)),!C.axisY.attr('hidden')&&B.push(k.call(C.axisY,C.axisOrientY,l._width,l._height)))}),l.axisX.attr('hidden')||B.push(k.call(l.axisX,l.axisOrientX,l._width,l._height)),l.axisY.attr('hidden')||B.push(k.call(l.axisY,l.axisOrientY,l._width,l._height)),Promise.all(B).then(function(){l._chart._top=o,l._chart._right=r,l._chart._bottom=u,l._chart._left=v,l._control.transition(100).style('transform','translate('+-l._chart._right+'px,'+-l._chart._bottom+'px)'),l._controlcontent.transition(100).style('transform','translate('+-l._chart._right+'px,'+-l._chart._top+'px)'),l._chart.select('clipPath#clip rect').transition(100).attr('width',l._width).attr('height',l._height),l._chart.select('rect#plot').transition(100).attr('width',l._width).attr('height',l._height),l._chart.transition(100).attr('transform','translate('+(-l._chart._left||0)+','+(-l._chart._top||0)+')'),l._focusY.attr('y1',l._height),l._graphs.forEach(function(C){C._isAttached&&(!C.axisX.attr('hidden')&&(C.axisGeneratorX=C._computeAxisGenerator.call(C,C.axisOrientX,C.scaleX,C.scalingX,C.scaleBaseX).ticks(C.ticksX).tickSize(C.tickSize).tickFormat(C.axisX.classed('expanded')?C._computeFormatFn(C.scalingX,C.scaleBaseX):''),C._updateAxisBrushGenerator.call(C.axisBrushGeneratorX,l.rangeX,C.axisOrientX),C.axisX.select('.brush').raise().call(C.axisBrushGeneratorX),C.axisX.attr('transform','translate('+(C.axisX._left||0)+','+(C.axisX._top||0)+')')),!C.axisY.attr('hidden')&&(C.axisGeneratorY=C._computeAxisGenerator.call(C,C.axisOrientY,C.scaleY,C.scalingY,C.scaleBaseY).ticks(C.ticksY).tickSize(C.tickSize).tickFormat(C.axisY.classed('expanded')?C._computeFormatFn(C.scalingY,C.scaleBaseY):''),C._updateAxisBrushGenerator.call(C.axisBrushGeneratorY,l.rangeY,C.axisOrientY),C.axisY.select('.brush').raise().call(C.axisBrushGeneratorY),C.axisY.attr('transform','translate('+(C.axisY._left||0)+','+(C.axisY._top||0)+')')))}),l.axisX.attr('hidden')||(l.axisGeneratorX=l._computeAxisGenerator(l.axisOrientX,l.scaleX,l.scalingX,l.scaleBaseX).ticks(l.ticksX).tickSize(l.tickSize).tickFormat(l.axisX.classed('expanded')?l._computeFormatFn(l.scalingX,l.scaleBaseX):''),l._updateAxisBrushGenerator.call(l.axisBrushGeneratorX,l.rangeX,l.axisOrientX),l.axisX.select('.brush').raise().call(l.axisBrushGeneratorX),l.axisX.attr('transform','translate('+(l.axisX._left||0)+','+(l.axisX._top||0)+')')),l.axisY.attr('hidden')||(l.axisGeneratorY=l._computeAxisGenerator(l.axisOrientY,l.scaleY,l.scalingY,l.scaleBaseY).ticks(l.ticksY).tickSize(l.tickSize).tickFormat(l.axisY.classed('expanded')?l._computeFormatFn(l.scalingY,l.scaleBaseY):''),l._updateAxisBrushGenerator.call(l.axisBrushGeneratorY,l.rangeY,l.axisOrientY),l.axisY.select('.brush').raise().call(l.axisBrushGeneratorY),l.axisY.attr('transform','translate('+(l.axisY._left||0)+','+(l.axisY._top||0)+')')),l._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!l.domainX||!l.domainY||l.domainX.some(function(C){return void 0===C||null===C})||l.domainY.some(function(C){return void 0===C||null===C})?l.redraw(!0):l.redraw()})})}}},{key:'_redomain',value:function(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(function(j){j&&console.warn(j)}))}},{key:'redraw',value:function(j){var k=this;return this._isAttached?j?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(function(){k.axisX.attr('hidden')||k.axisX.transition(100).attr('transform','translate('+(k.axisX._left||0)+','+(k.axisX._top||0)+')').call(k.axisGeneratorX),k.axisY.attr('hidden')||k.axisY.transition(100).attr('transform','translate('+(k.axisY._left||0)+','+(k.axisY._top||0)+')').call(k.axisGeneratorY),k._graphs.forEach(function(l){l._isAttached&&(l.axisX.attr('hidden')?l.set('domainX',k.domainX):l.axisX.transition(100).attr('transform','translate('+(l.axisX._left||0)+','+(l.axisX._top||0)+')').call(l.axisGeneratorX),l.axisY.attr('hidden')?l.set('domainY',k.domainY):l.axisY.transition(100).attr('transform','translate('+(l.axisY._left||0)+','+(l.axisY._top||0)+')').call(l.axisGeneratorY),l.redraw())}),k._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),k._updateInfo()},0)):void 0}},{key:'_multiAxesChanged',value:function(j,k){if(this._isAttached){var l;this._graphs.forEach(function(n){n._isAttached&&(l=!j||null,n.axisX.attr('hidden',l),l=!k||null,n.axisY.attr('hidden',l))}),l=!!j||null,this.axisX.attr('hidden',l),l=!!k||null,this.axisY.attr('hidden',l),this._redomain(),this.sizeChanged()}}},{key:'_addGraph',value:function(j){this._graphs.add(j),this.sizeChanged()}},{key:'_removeGraph',value:function(j){this._graphs.delete(j),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),j=null,this.sizeChanged()}},{key:'_getDomain',value:function(){var j=this;return new Promise(function(k,l){var n=[],o=[];j._graphs.forEach(function(r){n.push(r._getDomain('x',j.multiAxesX)),o.push(r._getDomain('y',j.multiAxesY))}),Promise.all(n).then(function(r){for(var u,v,w,z=0;z<r.length;z++)u=void 0===u||u>r[z].domain[0]?r[z].domain[0]:u,v=void 0===v||v<r[z].domain[1]?r[z].domain[1]:v;(void 0===u||void 0===v)&&k(),w=[u,v],j.set('domainX',w),j.scaleX.domain(w),!1===j.multiAxesX&&j._graphs.forEach(function(A){A.axisX._isBrushed=!1,A.set('domainX',w),A.scaleX.domain(w)}),Promise.all(o).then(function(A){for(var B,C,D,E=0;E<A.length;E++)B=void 0===B||B>A[E].domain[0]?A[E].domain[0]:B,C=void 0===C||C<A[E].domain[1]?A[E].domain[1]:C;(void 0===B||void 0===C)&&k(),D=[B,C],j.set('domainY',D),!1===j.multiAxesY&&j._graphs.forEach(function(F){F.axisY._isBrushed=!1,F.set('domainY',D)}),k()}).catch(function(A){l(A)})}).catch(function(r){l(r)})})}},{key:'insertValues',value:function(j){this._graphs.forEach(function(k){k&&k._isAttached&&k.item&&k.item.mount&&j[k.item.mount]&&k.insertValues(j[k.item.mount])})}},{key:'clearValues',value:function(){this._graphs.forEach(function(j){j&&j._isAttached&&j.clearValues()})}},{key:'_moveInfo',value:function(j){if(Number.isFinite(j.g.scaleY(j.y))){this._info.text(this.formatTime(+j.x)+' '+this.formatNumber(+j.y));var k=this._fixedValue;if(k){var l=Math.abs(k.x-j.x),n=Math.abs(k.y-j.y);this._infoDeltaX.text(this.formatTimeAbsolute(l)),this._infoDeltaY.text(this.formatNumber(n))}this._updateInfo()}}},{key:'_showInfo',value:function(){this.cancelDebouncer('hideinfo'),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}},{key:'_showDelta',value:function(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}},{key:'_debouncedHideInfo',value:function(){var j=this;this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(function(){j._hideInfo()},1e3)}},{key:'_hideInfo',value:function(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}},{key:'_hideDelta',value:function(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}},{key:'_updateInfo',value:function(){if(this._focusedValue&&''!==this._info.attr('hidden')){var j=this._focusedValue,k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);if(k&&l){switch(this._alignText(this._info.node(),k,l,null,1.5*this._focusDot.attr('r')),this.modus){case'delta':var n=this._fixedValue;if(n&&n.x&&j.x!==n.x&&n.y&&j.y!==n.y){var o=n.g.scaleX(+n.x),r=n.g.scaleY(+n.y);this._deltaX.attr('x1',k).attr('x2',o).attr('y1',r).attr('y2',r),this._deltaY.attr('y1',l).attr('y2',r),r<l||k<o?(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(r+l)/2,null,null,null,'middle')):(this._deltaY.attr('x1',o).attr('x2',o),this._alignText(this._infoDeltaY.node(),o,(r+l)/2,null,null,null,'middle')),this._deltaX,this._alignText(this._infoDeltaX.node(),(o+k)/2,r,null,null,null,'middle'),this._deltaDot.attr('cy',r).attr('cx',o)}else this._hideDelta();case'integral':default:this._focusX.attr('x1',j._left).attr('x2',k).attr('y2',l).attr('y1',l),this._focusY.attr('y1',j._top).attr('y2',l).attr('x2',k).attr('x1',k),this._focusDot.attr('cy',l).attr('cx',k);}this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}},{key:'_alignText',value:function(j,k,l,n,o,r,u){n=n||0,o=o||0;var v=j.getBBox(),w=this._height,z=this._width,r=r||'middle',u=u||'ideographic',A=n,B=o;'middle'===r?A+=v.width/2:'end '===r?A+=v.width:void 0,'ideographic'===u?B+=v.height:'middle'===u?B+=v.height/2:'hanging'===u?B-=v.height:void 0,0>l-B?u='hanging':l+B>w&&(l=w-B),k+A>z?r='end':0>k-A&&(r='start'),j.setAttribute('x',k+n),j.setAttribute('y',l-o),j.setAttribute('text-anchor',r),j.setAttribute('alignment-baseline',u)}},{key:'_modusChanged',value:function(j){switch(j){case'zoom':break;case'delta':break;case'integral':break;default:}}},{key:'_dotClicked',value:function(j){switch(this.modus){case'zoom':var k=(j.g.domainX[1]-j.g.domainX[0])/4,l=(j.g.domainY[1]-j.g.domainY[0])/4,n=j.g.scaleX(+j.x),o=j.g.scaleY(+j.y)||0;d3.event.selection=[[n-k,o-l],[n+k,o+l]];break;case'delta':var r=this._fixedValue;r&&r.x&&r.y&&r.x===j.x&&r.y===j.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=j,this._deltaDot.datum(this._fixedValue).attr('cx',function(u){return u.g.scaleX(u.x)}).attr('cy',function(u){return u.g.scaleY(u.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}},{key:'closeMenu',value:function(){this.showMenu=!1}},{key:'changeInterpolation',value:function(j){this._graphs.forEach(function(l){l&&l._isAttached&&l.set('interpolation',j)})}},{key:'_onAxisBrushEnd',value:function(j){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var k=d3.event.selection;if(k){if(!this.multiAxesY&&!this.multiAxesX)return'x'===j&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===j&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));var l='y'===j;if(l){var n=k.map(this.scaleY.invert,this.scaleY).sort(function(o,r){return o>r});this._graphs.forEach(function(o){o.scaleY.domain(n).nice(),o.axisGeneratorY.scale(o.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(n).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(this._height/(k[1]-k[0])).translate(0,-k[0]))}if(!l){var n=k.map(this.scaleX.invert,this.scaleX).sort(function(o,r){return o>r});this._graphs.forEach(function(o){o.scaleX.domain(n),o.axisGeneratorX.scale(o.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(this._width/(k[1]-k[0])).translate(-k[0],0))}this._graphs.forEach(function(o){o.redraw()})}}}},{key:'_onZoomed',value:function(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var j=d3.event.transform;if(this.domainX&&this.domainY){var n,k=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),l=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());this.multiAxesX||(n=k.domain(),this._graphs.forEach(function(o){o.scaleX.domain(n),o.axisGeneratorX.scale(o.scaleX)}),this.scaleX.domain(n),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.multiAxesY||(n=l.domain(),this._graphs.forEach(function(o){o.scaleY.domain(n),o.axisGeneratorY.scale(o.scaleY)}),this.scaleY.domain(n),this.axisY.call(this.axisGeneratorY.scale(l))),this._graphs.forEach(function(o){o.redraw()}),this._isZoomed=1!==j.k||0!==j.x||0!==j.y}}}},{key:'_onAxisContextMenu',value:function(j){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():babelHelpers.get(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),'_onAxisContextMenu',this).call(this,j)}},{key:'_closeControl',value:function(){this.showControl=!1}},{key:'_resetZoom',value:function(j){d3.event?d3.event.preventDefault():j&&j.preventDefault&&j.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(function(k){k.axisX._isBrushed=!1,k.axisY._isBrushed=!1,k.scaleX.domain(k.domainX),k.scaleY.domain(k.domainY),k.axisX.call(k.axisGeneratorX.scale(k.scaleX)),k.axisY.call(k.axisGeneratorY.scale(k.scaleY))}),this._hideInfo(),this._redomain()}},{key:'_self',get:function(){return this}}],[{key:'observers',get:function(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}}]),f}(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))));customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>