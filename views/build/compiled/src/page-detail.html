<html><head></head><body><dom-module id="page-detail"><template strip-whitespace=""><style include="selectbox-style">:host{--control-icon-size-fine:18px;--control-icon-size-coarse:22px;--control-icon-padding-fine:4px;--control-icon-padding-coarse:6px;--drawer-width:16em;--drawer-background:rgba(255,255,255,0.25);--drawer-content:{padding:0;position:absolute;};}#content{display:flex;flex-direction:column;margin:0;box-sizing:border-box;position:relative;height:100%;}#chart,
      #svg{max-height:50%;-webkit-flex-basis:50%;flex-basis:50%;color:var(--bright-text-color);}#svg{overflow:hidden;--control-bottom:16px;--control-right:8px;}#chart{padding-left:8px;--chart-plot-background-color:#fff;--chart-plot-background-opacity:0.8;--control-top:14px;--control-bottom:auto;--control-right:8px;}#chart[fullheight]{padding-bottom:8px;max-height:100%;-webkit-flex-basis:1px;flex-basis:1px;flex-grow:1;}:host([dark]) #chart{--chart-plot-background-opacity:0.2;--focus-opacity:1;}:host([dark]) #chart[fullheight]{--chart-plot-background-opacity:0.4;}:host([dark][plain]) #chart[fullheight]{--focus-color:#000;}.spacer{flex:0 0 auto;padding:0.25em;}#table,
      #tabs{flex:1 0 1px;width:100%;position:relative;box-sizing:border-box;}#tabs{padding-bottom:0.1em;--highlight-color:var(--secondary-color, white);}#table{padding-top:0.1em;}#drawer{position:absolute;}:host(.fullscreen) #drawer{display:none;}.checkbox{width:100%;--checkbox-unchecked-color:var(--bright-text-color);--checkbox-checked-color:var(--primary-text-color);--checkbox-checked-background:{background-color:rgba(255, 255, 255, 0.75);border-top:thin solid rgba(0,0,0,0.2);border-left:medium solid rgba(0,0,0,0.5);};--checkbox-unchecked-background:{background-color:transparent;border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}.groupbox{box-sizing:border-box;flex-shrink:0;display:inline-flex;flex-direction:row;align-items:center;background-color:rgba(0,0,0,0.0625);border-bottom:thin solid rgba(0,0,0,0.5);transition:background-color 150ms linear;}.groupbox:hover{background-color:rgba(0,0,0,0.25);}.groupbox > .selectbox{flex:1 0 1px;padding:0 !important;margin:0.5em 0 0.5em 0.5em;}@media (max-width: 600px){#drawer{--drawer-background:rgba(255,255,255,0.33);}#svg{--control-right:16px;}#chart{--control-right:16px;}}@media (min-width: 601px){#content{margin-right:16em;}#drawer{right:-16em;--drawer-background:rgba(255,255,255,0.0);}}[hidden]{display:none !important;}</style><iron-location query="{{query}}"></iron-location><iron-query-params params-string="{{query}}" params-object="{{queryParams}}"></iron-query-params><iron-media-query query="(max-width: 600px)" query-matches="{{narrowLayout}}"></iron-media-query><group-data room="[[queryParams.room]]" subgroups="{{subgroups}}" group-by="{{groupBy}}" grouping-keys="{{groupingKeys}}"></group-data><svg-data room="[[queryParams.room]]" data="{{svgData}}"></svg-data><div id="content"><device-chart id="chart" opened$="[[visible]]" fullheight$="[[!_withSvg]]" items="[[items]]" multi=""></device-chart><template is="dom-if" if="[[_withSvg]]"><device-svg id="svg" opened$="[[visible]]" url-prefix="/images" src="[[_svgSrcPath]]" selectable="[[_getSvgSelectable(item.svg.path, svgData)]]" items="[[items]]" multi="" exceeding="[[exceeding]]"></device-svg></template><drawer-element id="drawer" opened$="[[_ensureOpened(narrowLayout)]]" swipe-open$="[[narrowLayout]]" scrim="" persistent$="[[!narrowLayout]]" align="right" stretch=""><template is="dom-if" if="[[visible]]"><div class="groupbox"><div class="selectbox" title="[[groupBy]]"><select value="{{groupBy::change}}"><template is="dom-repeat" items="[[groupingKeys]]" sort="_sort"><option value="[[item]]">[[item]]</option></template></select></div><div class="selectbox" title="[[selectedSubgroupTitle]]"><select value="{{selectedSubgroupTitle::change}}"><template is="dom-repeat" items="[[subgroups]]" sort="_sortSubgroupTitles"><option value="[[item.title]]">[[item.title]]</option></template></select></div><icon-button icon="close" on-click="clearItems"></icon-button></div><tabs-container id="tabs" multi="" vertical="" items="{{checkboxes}}" attr-for-selected="item-id" activate-event="item-select"><template id="tablist" is="dom-repeat" items="[[elements]]" filter="[[_computeFilter(selectedSubgroupTitle, subgroups)]]" sort="_sortItems" restamp="" restamp-key="mount"><device-checkbox class="checkbox" item-id$="[[item.id]]" item="[[item]]" title$="[[item.title]]" selectable=""><device-caption class="caption" title$="[[item.title]]" keys="[[item.keys]]"></device-caption></device-checkbox></template></tabs-container><device-table-group id="table" items="[[items]]" selected-mount="[[item.mount]]" hidden$="[[nothingSelected]]"></device-table-group></template></drawer-element></div></template><script>var PageDetail=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this._debounceResize()}},{key:'_selectedIdsChanged',value:function(a,b,c){var d=this;if(void 0!==a&&b&&0!==b.length&&c){var e=a.split('/').filter(function(a){return d.elements.some(function(b){return b.id===a})});b.forEach(function(a){-1===e.indexOf(a.getAttribute('item-id'))||a.checked||(a.checked=!0)})}}},{key:'select',value:function(a){if(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'select',this).call(this,a),!!this.visible){var c=(this.queryParams&&this.queryParams.ids||'').split('/').filter(function(a){return''!==a});-1===c.indexOf(a.id)&&(c.push(a.id),this.set('queryParams.ids',c.join('/')))}}},{key:'deselect',value:function(a){if(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'deselect',this).call(this,a),!!this.visible){var c,d=(this.queryParams&&this.queryParams.ids||'').split('/').filter(function(a){return''!==a});-1!==(c=d.indexOf(a.id))&&(d.splice(c,1),this.set('queryParams.ids',d.join('/')))}}},{key:'clearItems',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'clearItems',this).call(this),Array.prototype.forEach.call(this.root.querySelectorAll('device-checkbox'),function(a){a.checked=!1})}},{key:'_computeFilter',value:function(a,b){if(void 0===a||void 0===b)return null;for(var c,d=0;d<b.length;){if(b[d].title===a){c=b[d];break}d++}return d===b.length?null:function(a){return-1!==c.items.indexOf(a.id)}}},{key:'_sort',value:function(c,a){return c.localeCompare(a)}},{key:'_sortSubgroupTitles',value:function(c,a){return c.title.localeCompare(a.title)}},{key:'_sortItems',value:function(c,a){var b=c.keys.title?'title':c.keys.name?'name':Object.keys(c.keys)[0];return c.keys[b].localeCompare(a.keys[b])}},{key:'_hasSvg',value:function(a,b){var c=!!(a&&b);return c!==this._withSvg&&this._debounceResize(),c}},{key:'_computeSvgSrcPath',value:function(a,b,c){var d;return a&&this.item&&this.item.svg&&this.item.svg.path&&c&&c[this.item.svg.path]&&(d='/'+a+'/'+this.item.svg.path),d}},{key:'_getSvgSelectable',value:function(a,b){return b[a]||{}}},{key:'_ensureOpened',value:function(){return!0}},{key:'_computeShowToggleIcon',value:function(a,b){return a&&b}},{key:'_computeNothingSelected',value:function(a){return!a}},{key:'toggleControlDrawer',value:function(){this._drawer||(this._drawer=this.root.querySelector('#drawer')),this._drawer&&this._drawer.toggle()}},{key:'_fireResize',value:function(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this}))}},{key:'_debounceResize',value:function(){var a=this;setTimeout(function(){a.narrowLayout&&(!a._drawer&&(a._drawer=a.root.querySelector('#drawer')),a._drawer&&(a._drawer.opened=!0)),a.notifyResize()},0)}},{key:'_visibleChanged',value:function(a){!0===a?this._debounceResize():(this.clearItems(),this.clearExceedings())}}],[{key:'is',get:function(){return'page-detail'}},{key:'properties',get:function(){return{queryParams:{type:Object},checkboxes:{type:Array,notify:!0},groupingKeys:{type:Array,notify:!0},subgroups:{type:Array,notify:!0},groupBy:{type:String,notify:!0},selectedSubgroupTitle:{type:String,notify:!0},elements:{type:Array,value:function(){return[]}},multi:{type:Boolean,value:!0},svgData:{type:Object},visible:{type:Boolean,notify:!0,observer:'_visibleChanged'},_withSvg:{type:Boolean,computed:'_hasSvg(_svgSrcPath, visible)'},_svgSrcPath:{type:Boolean,computed:'_computeSvgSrcPath(queryParams.room, item, svgData)'},selectNotify:{type:Boolean,value:!0},exceedNotify:{type:Boolean,value:!0},narrowLayout:{type:Boolean,value:!1,notify:!0},showToggleIcon:{type:Boolean,notify:!0,computed:'_computeShowToggleIcon(narrowLayout, visible)'},nothingSelected:{type:Boolean,notify:!0,computed:'_computeNothingSelected(items.length)'}}}},{key:'observers',get:function(){return['_selectedIdsChanged(queryParams.ids, checkboxes, visible)']}}]),b}(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.ContainerMixin(Polymer.Element)));customElements.define(PageDetail.is,PageDetail);</script></dom-module></body></html>