(function(){function a(a,b,c){this.mount=a,this.indexKey=b||"x",this.maxCount=c&&c.maxCount?c.maxCount:3e4,this.values=[],this._splices=[],this._heap=[],Object.defineProperty(this,"splices",{get:function(){return this._splices.splice(0,this._splices.length)},enumerable:!1,configurable:!0}),Object.defineProperty(this,"heap",{get:function(){return this._heap.splice(0,this._heap.length)},enumerable:!1,configurable:!0})}a.prototype={clear:function(){this._splices.length=0,this._heap.length=0,this.values.length=0},get:function(a,b,c){var d=Number.isFinite;if(d(a)&&d(b)){let e,f;for(e=this.values.length-1;0<=e&&!(this.values[e][this.indexKey]>=a);e--);for(f=0;f<this.values.length&&!(this.values[f][this.indexKey]<=b);f++);return d(c)&&f-e>c&&(e=f-c),this.values.slice(e,f)}else{const a=d(c)&&0<=c&&c<this.values.length?this.values.length-c-1:0;return this.values.slice(a)}},set:function(a){a.sort(this.compareFn(this.indexKey)),0===this.values.length?this.values=a:(a=a.filter((a)=>a[this.indexKey]>this.values[this.values.length-1][this.indexKey]),this.values=this.values.concat(a)),this._heap=this._heap.concat(a),this.values.length>this.maxCount&&(this._splices=this._splices.concat(this.values.splice(0,this.values.length-this.maxCount)))},range:function(a){return new Promise(function(b){a===void 0?b([this.first(),this.last()]):b([this.min(a),this.max(a)])}.bind(this))},last:function(){return this.values[this.values.length-1][this.indexKey]},first:function(){return this.values[0][this.indexKey]},max:function(c){let d,a,b=-1;const e=this.values.length;for(;++b<e;)if(null!==(a=this.values[b][c])&&a>=a){d=a;break}for(;++b<e;)null!==(a=this.values[b][c])&&d<a&&(d=a);return d},min:function(c){let d,a,b=-1;const e=this.values.length;for(;++b<e;)if(null!==(a=this.values[b][c])&&a>=a){d=a;break}for(;++b<e;)null!==(a=this.values[b][c])&&d>a&&(d=a);return d},compareFn:function(c,d){return d=d||1,function(e,a){return e[c]<a[c]?-1*d:e[c]>a[c]?1*d:0}}},self?self.ClientCache=a:window&&(window.ClientCache=a)})();