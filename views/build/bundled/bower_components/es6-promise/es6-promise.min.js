!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.ES6Promise=b()}(this,function(){"use strict";function f(a){var b=typeof a;return null!==a&&("object"===b||"function"===b)}function q(a){return"function"==typeof a}function e(){return"undefined"==typeof N?i():function(){N(c)}}function i(){var a=setTimeout;return function(){return a(c,1)}}function c(){for(var a=0;a<M;a+=2){var b=Q[a],c=Q[a+1];b(c),Q[a]=void 0,Q[a+1]=void 0}M=0}function a(a,b){var c=this,d=new this.constructor(h);void 0===d[S]&&x(d);var e=c._state;if(e){var f=arguments[e-1];B(function(){return F(e,d,f,c._result)})}else j(c,d,a,b);return d}function l(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(h);return v(c,a),c}function h(){}function o(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function d(a){try{return a.then}catch(a){return V.error=a,V}}function s(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function u(a,b,c){B(function(a){var d=!1,e=s(c,b,function(c){d||(d=!0,b===c?w(a,c):v(a,c))},function(b){d||(d=!0,y(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,y(a,e))},a)}function m(a,b){b._state===T?w(a,b._result):b._state===U?y(a,b._result):j(b,void 0,function(b){return v(a,b)},function(b){return y(a,b)})}function b(b,c,d){c.constructor===b.constructor&&d===a&&c.constructor.resolve===l?m(b,c):d===V?(y(b,V.error),V.error=null):void 0===d?w(b,c):q(d)?u(b,c,d):w(b,c)}function v(a,c){a===c?y(a,o()):f(c)?b(a,c,d(c)):w(a,c)}function g(a){a._onerror&&a._onerror(a._result),A(a)}function w(a,b){a._state===R&&(a._result=b,a._state=T,0!==a._subscribers.length&&B(A,a))}function y(a,b){a._state===R&&(a._state=U,a._result=b,B(g,a))}function j(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+T]=c,e[f+U]=d,0===f&&a._state&&B(A,a)}function A(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?F(c,d,e,f):e(f);a._subscribers.length=0}}function E(a,b){try{return a(b)}catch(a){return V.error=a,V}}function F(b,d,e,f){var g,h,j,c,a=q(e);if(!a)g=f,j=!0;else if(g=E(e,f),g===V?(c=!0,h=g.error,g.error=null):j=!0,d===g)return void y(d,p());d._state!==R||(a&&j?v(d,g):c?y(d,h):b===T?w(d,g):b===U&&y(d,g))}function n(a,b){try{b(function(b){v(a,b)},function(b){y(a,b)})}catch(b){y(a,b)}}function r(){return W++}function x(a){a[S]=W++,a._state=void 0,a._result=void 0,a._subscribers=[]}function C(){return new Error("Array Methods must be provided an Array")}function k(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var t=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var K,L=t,M=0,N=void 0,O=void 0,B=function(a,b){Q[M]=a,Q[M+1]=b,M+=2,2===M&&(O?O(c):K())},G="undefined"==typeof window?void 0:window,H=G||{},I=H.MutationObserver||H.WebKitMutationObserver,J="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=Array(1e3);K=J?function(){return function(){return process.nextTick(c)}}():I?function(){var a=0,b=new I(c),d=document.createTextNode("");return b.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}():P?function(){var a=new MessageChannel;return a.port1.onmessage=c,function(){return a.port2.postMessage(0)}}():void 0===G&&"function"==typeof require?function(){try{var a=Function("return this")().require("vertx");return N=a.runOnLoop||a.runOnContext,e()}catch(a){return i()}}():i();var R,S=Math.random().toString(36).substring(2),T=1,U=2,V={error:null},W=0,X=function(){function c(a,b){this._instanceConstructor=a,this.promise=new a(h),this.promise[S]||x(this.promise),L(b)?(this.length=b.length,this._remaining=b.length,this._result=Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&w(this.promise,this._result))):y(this.promise,C())}return c.prototype._enumerate=function(a){for(var b=0;this._state===R&&b<a.length;b++)this._eachEntry(a[b],b)},c.prototype._eachEntry=function(c,f){var e=this._instanceConstructor,g=e.resolve;if(g===l){var j=d(c);if(j===a&&c._state!==R)this._settledAt(c._state,f,c._result);else if("function"!=typeof j)this._remaining--,this._result[f]=c;else if(e===Y){var k=new e(h);b(k,c,j),this._willSettleAt(k,f)}else this._willSettleAt(new e(function(a){return a(c)}),f)}else this._willSettleAt(g(c),f)},c.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===R&&(this._remaining--,a===U?y(d,c):this._result[b]=c),0===this._remaining&&w(d,this._result)},c.prototype._willSettleAt=function(a,b){var c=this;j(a,void 0,function(a){return c._settledAt(T,b,a)},function(a){return c._settledAt(U,b,a)})},c}(),Y=function(){function a(b){this[S]=r(),this._result=this._state=void 0,this._subscribers=[],h!==b&&("function"!=typeof b&&k(),this instanceof a?n(this,b):D())}return a.prototype["catch"]=function(a){return this.then(null,a)},a.prototype["finally"]=function(a){var b=this,c=b.constructor;return b.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b})})},a}();return Y.prototype.then=a,Y.all=function(a){return new X(this,a).promise},Y.race=function(a){var b=this;return new b(L(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})},Y.resolve=l,Y.reject=function(a){var b=this,c=new b(h);return y(c,a),c},Y._setScheduler=function(a){O=a},Y._setAsap=function(a){B=a},Y._asap=B,Y.polyfill=function(){var a;if("undefined"!=typeof global)a=global;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===c&&!b.cast)return}a.Promise=Y},Y.Promise=Y,Y});