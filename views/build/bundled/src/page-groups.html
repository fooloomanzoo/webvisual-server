<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="device-group-card" assetpath="../bower_components/webvisual-elements/device/"><template strip-whitespace=""><style include="control-style">:host{display:block;position:relative;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);background:var(--device-group-card-background, #ebebeb);--device-group-card-header-height:3em;}#header{@apply --layout-fit;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:var(--device-group-card-header-height);border-top-left-radius:inherit;border-top-right-radius:inherit;color:var(--device-group-card-header-color, var(--bright-text-color));transition-property:color;transition-duration:500ms;transition-timing-function:cubic-bezier(0.6,0,0.2,1);}#header.opened{height:calc(15vh + 120px);color:var(--device-group-card-header-opened-color, --primary-text-color);}#title{@apply --layout-fit;@apply --layout-inline;@apply --layout-center;@apply --layout-justified;bottom:auto;pointer-events:none;height:var(--device-group-card-header-height);width:100%;mix-blend-mode:exclusion;}#title > *{pointer-events:all;}#title > .title-text{margin-left:1em;font-size:1.1em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;padding-top:0.0825em;}#title > .expand-button{margin-right:0.5em;flex-shrink:0;}#title:hover .expand-button{opacity:1;}#mainContent{@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-start;@apply --layout-start-justified;pointer-events:none;border-color:inherit;border-radius:inherit;position:relative;box-sizing:border-box;}#headerBackground{position:relative;min-height:var(--device-group-card-header-height);box-sizing:border-box;width:100%;border-top-left-radius:inherit;border-top-right-radius:inherit;border-bottom-style:solid;border-bottom-width:thin;border-color:transparent;color:var(--device-group-card-header-color, var(--bright-text-color));background-color:var(--device-group-card-header-background, var(--bright-primary-color));padding-top:var(--device-group-card-header-height);transition-property:padding-top, background-color, border-color;transition-duration:500ms;transition-timing-function:cubic-bezier(0.6,0,0.2,1);}#headerBackground.opened{bottom:0;padding-top:calc(15vh + 120px);color:var(--device-group-card-header-opened-color, var(--bright-text-color));background-color:var(--device-group-card-header-opened-background, tranparent);border-color:var(--device-group-card-header-border, currentColor);}#headerBackground:not(.opened)::before{@apply --layout-fit;content:'';border-top-left-radius:inherit;border-top-right-radius:inherit;pointer-events:none;background:var(--device-group-card-header-shim);}::slotted(*){pointer-events:auto;}#addons{@apply --layout-fit;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;transform-origin:top center;transform:rotateX(90deg) scale(0.5);transition-property:transform;transition-duration:500ms;transition-timing-function:cubic-bezier(0.6,0,0.2,1);}#addons.opened{transform:rotateX(0deg) scale(1);}#addons > *{@apply --layout-fit;background:transparent;}#headerContent{@apply --layout-fit;isolation:isolate;-webkit-perspective:50vmin;perspective:50vmin;-webkit-perspective-origin:center top;-moz-perspective-origin:center top;perspective-origin:center top;}#control{position:absolute;transition-property:opacity;transition-duration:500ms;transition-timing-function:cubic-bezier(0.6, 0, 0.2, 1);pointer-events:none;visibility:hidden;opacity:0;}#control.opened{visibility:visible;opacity:1;}device-table-group[opened]{margin-top:calc(var(--device-group-card-header-height) - 0.1em);margin-left:0;margin-bottom:calc(var(--control-icon-size-fine, var(--icon-size)) + 2*var(--control-icon-padding-fine, var(--icon-padding)));margin-right:0;--table-background:rgba(255,255,255,0.5);}device-chart{--options-scrim-background:transparent;}device-chart[opened]{margin-top:calc(var(--device-group-card-header-height) - 0.1em);padding-bottom:calc(var(--control-icon-size-fine, var(--icon-size)) + 2*var(--control-icon-padding-fine, var(--icon-padding)));}@media (-moz-touch-enabled: 1), (pointer: coarse){device-chart[opened]{padding-bottom:calc(var(--control-icon-size-coarse, var(--icon-size)) + 2*var(--control-icon-padding-coarse, var(--icon-padding)));}device-table-group[opened]{margin-bottom:calc(var(--control-icon-size-coarse, var(--icon-size)) + 2*var(--control-icon-padding-coarse, var(--icon-padding)));}}[hidden]{display:none !important;}</style><section id="mainContent"><section id="headerBackground"></section><slot></slot></section><section id="header"><section id="headerContent"><iron-pages id="addons" selected="[[view]]" selectable=".view" selected-attribute="opened"><template is="dom-if" if="[[svgSrcPath]]"><device-svg class="view" url-prefix="[[svgUrlPrefix]]" src="[[svgSrcPath]]" selectable="[[svgSelectable]]" items="[[items]]" multi="" exceeding="[[exceeding]]"></device-svg></template><template is="dom-if" if="[[_shouldRenderExtensions]]"><device-chart class="view" multi="" margin="{&quot;left&quot;: 5, &quot;right&quot;: 5, &quot;top&quot;: 0, &quot;bottom&quot;: 0}" items="[[items]]"></device-chart><device-table-group class="view" items="[[items]]" selected-mount="[[item.mount]]"></device-table-group></template></iron-pages><section id="title"><span class="title-text" on-click="toggle">[[title]]</span><icon-button title="expand" on-click="toggle" class="expand-button" icon="[[expandIcon]]"></icon-button></section><section id="control" class="left bottom"><iron-selector selected="{{view}}" selectable=".button"><template is="dom-if" if="[[svgSrcPath]]"><icon-button title="map" icon="map" class="button" hidden$="[[!svgSrcPath]]"></icon-button></template><template is="dom-if" if="[[_shouldRenderExtensions]]"><icon-button title="chart" icon="show-chart" class="button" hidden$="[[!_shouldRenderExtensions]]"></icon-button><icon-button title="table" icon="list" class="button" hidden$="[[!_shouldRenderExtensions]]"></icon-button></template></iron-selector></section></section></section></template><script>class GroupCard extends WebvisualMixins.ContainerMixin(Polymer.Element){static get is(){return'device-group-card'}static get properties(){return{title:{type:String,value:'',reflectToAttribute:!0},opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},expandIcon:{type:String,value:'unfold-more',computed:'_computeExpandIcon(opened)'},svgUrlPrefix:{type:String},svgSrcPath:{type:String},svgSelectable:{type:Object},view:{type:Number,value:0,observer:'_viewChanged'},transitionDuration:{type:Number,value:500,observer:'_transitionDurationChanged'},_shouldRenderExtensions:{type:Boolean,computed:'_computeShouldRenderExtensions(items.length)'},_state:{type:Number,value:0}}}toggle(){this.opened?this.close():this.open()}open(){this._state=this._STATE.OPENING,this._transitionStart()}close(){this._state=this._STATE.CLOSING,this._transitionStart()}_openedChanged(a,b){b===void 0&&(this.view=0),a&&this._state!==this._STATE.OPENING?this.open():!1===a&&this._state!==this._STATE.CLOSING&&this.close()}_resetTransitionState(){requestAnimationFrame(()=>{this.$.control.style['will-change']='',this.$.control.style.transition='none',this.$.addons.style['will-change']='',this.$.headerBackground.style['will-change']='',this.$.headerBackground.style.transition='none',this.$.control.classList.remove('opened'),this.$.addons.classList.remove('opened'),this.$.header.classList.remove('opened'),this.$.headerBackground.classList.remove('opened'),this.$.addons.style.display='none',this.opened=!1,this._state=this._STATE.STATIC})}_transitionStart(){requestAnimationFrame(()=>{this.$.addons.style.display='',this.$.addons.style['will-change']='transform',requestAnimationFrame(()=>{this.$.headerBackground.style.transition='',this.$.headerBackground.style['will-change']='padding-top',this._state===this._STATE.OPENING?(this.$.addons.classList.add('opened'),this.$.header.classList.add('opened'),this.$.headerBackground.classList.add('opened')):this._state===this._STATE.CLOSING&&(this.$.control.classList.remove('opened'),this.$.addons.classList.remove('opened'),this.$.headerBackground.classList.remove('opened')),setTimeout(()=>{this._transitionEnd()},this.transitionDuration)})})}_transitionEnd(){requestAnimationFrame(()=>{this._state===this._STATE.CLOSING?(this.$.addons.style.display='none',this.$.header.classList.remove('opened'),this.opened=!1):this._state===this._STATE.OPENING&&(this.$.control.classList.add('opened'),this.opened=!0,this._viewChanged()),this.$.addons.style['will-change']='',this.$.headerBackground.style['will-change']='',this._state=this._STATE.STATIC})}_transitionDurationChanged(a){const b=a+'ms';this.$.headerBackground.style['transition-duration']=b,this.$.addons.style['transition-duration']=b,this.$.control.style['transition-duration']=b}_computeExpandIcon(a){return a?'unfold-less':'unfold-more'}_computeShouldRenderExtensions(a){return 0<a}_viewChanged(){this.opened&&this.$.addons.selectedItem&&this.$.addons.selectedItem.notifyResize&&this.$.addons.selectedItem.notifyResize()}get _STATE(){return{STATIC:0,OPENING:1,CLOSING:2}}}customElements.define(GroupCard.is,GroupCard);</script></dom-module></div><dom-module id="page-groups"><template strip-whitespace=""><style include="grid-layout">:host(:not([plain])) .grid.sign li > *{border-radius:12px;}:host([plain]) .grid.sign li > *{border-radius:8px;}.grid.sign li > *{box-shadow:none !important;border:thin solid var(--grid-border-color, rgba(0,0,0,0.5));}.grid.sign li > :first-child{border-bottom-left-radius:0px !important;border-bottom-right-radius:0px !important;border-bottom-width:0px !important;}.grid.sign li > :last-child{border-top-left-radius:0px !important;border-top-right-radius:0px !important;}@media (min-width: 1981px){.grid.sign li{-webkit-flex-basis:25%;flex-basis:25%;max-width:25%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:6.6%;flex-basis:6.6%;max-width:6.6%;}}@media (max-width: 1980px){.grid.sign li{-webkit-flex-basis:25%;flex-basis:25%;max-width:25%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:8.25%;flex-basis:8.25%;max-width:8.25%;}}@media (max-width: 1280px){.grid.sign li{-webkit-flex-basis:33.3%;flex-basis:33.3%;max-width:33.3%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:11.1%;flex-basis:11.1%;max-width:11.1%;}}@media (min-width: 768px) and (max-width: 900px){.grid.sign li{-webkit-flex-basis:50%;flex-basis:50%;max-width:50%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:14.2%;flex-basis:14.2%;max-width:14.2%;}}@media (min-width: 521px) and (max-width: 767px){.grid.sign li{-webkit-flex-basis:33%;flex-basis:33%;max-width:33%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:16.6%;flex-basis:16.6%;max-width:16.6%;}}@media (max-width: 520px){.grid.sign li{-webkit-flex-basis:25%;flex-basis:25%;max-width:25%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:25%;flex-basis:25%;max-width:25%;}}@media (max-width: 360px){.grid.sign li{-webkit-flex-basis:33.3%;flex-basis:33.3%;max-width:33.3%;}.grid li:only-of-type .grid.sign li{-webkit-flex-basis:33%;flex-basis:33%;max-width:33%;}}:host(:-webkit-full-screen-ancestor) device-group-card:not(.fullscreen){visibility:hidden;}[hidden]{display:none !important;}</style><iron-location query="{{query}}"></iron-location><iron-query-params params-string="{{query}}" params-object="{{queryParams}}"></iron-query-params><group-data room="[[queryParams.room]]" subgroups="{{subgroups}}" group-by="{{groupBy}}" grouping-keys="{{groupingKeys}}"></group-data><svg-data room="[[queryParams.room]]" data="{{svgData}}"></svg-data><template is="dom-if" if="[[visible]]"><ul class="grid"><template is="dom-repeat" id="cards" items="[[_getSubGroups(subgroups)]]" as="group"><li><device-group-card title="[[group.title]]" open-on-select="" open-on-exceed="" multi="" svg-url-prefix="/images/[[queryParams.room]]/" svg-src-path="[[group.svg]]" svg-selectable="[[_getSvgSelectable(group.svg, svgData)]]"><ul class="grid sign"><template is="dom-repeat" items="[[group.items]]" as="id" sort="_sort"><li><device-sign item="[[_getItem(id, elements, visible)]]" title$="[[item.title]]" show-date="" no-link="[[!visible]]" selectable=""></device-sign><device-caption vertical="" title$="[[item.title]]" keys="[[_getItemKeys(id, elements)]]" group-by="[[groupBy]]" without-group-by=""></device-caption></li></template></ul></device-group-card></li></template></ul></template></template><script>class PageGroups extends Polymer.Element{static get is(){return'page-groups'}static get properties(){return{elements:{type:Array,notify:!0},groupingKeys:{type:Array,notify:!0},subgroups:{type:Array,notify:!0},groupBy:{type:String,notify:!0,observer:'_groupByChanged'},visible:{type:Boolean},svgData:{type:Object}}}_getSubGroups(a){if(a){if(1===a.length)return a;if(1<a.length)return a.filter((a)=>''!==a.title)}return[{},{},{},{},{}]}_getItem(a,b){if(a&&b)for(let c,d=0;c=b[d];++d)if(c.id===a)return c;return{}}_getItemKeys(a,b){if(a&&b)for(let c,d=0;c=b[d];++d)if(c.id===a)return c.keys;return{}}_getSvgSelectable(a,b){return b&&b[a]||{}}_sort(c,a){return c.localeCompare(a)}_groupByChanged(a,b){if(b!==void 0){const a=Polymer.dom(this.root).querySelectorAll('[is-device]');a.forEach(function(a){a.reset()});const b=Polymer.dom(this.root).querySelectorAll('device-group-card');b.forEach(function(a){a.clearItems(),a._resetTransitionState()})}}}customElements.define(PageGroups.is,PageGroups);</script></dom-module></body></html>