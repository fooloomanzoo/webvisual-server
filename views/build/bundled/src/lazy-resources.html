<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var b=this._valueToItem(this.selected);b?this._selection.select(b):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var c,b=0;c=this.items[b];b++)if(this._valueForItem(c)==a)return b;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return b==void 0?a.getAttribute(this.attrForSelected):b},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var d,b=a.target,c=this.items;b&&b!=this;){if(d=c.indexOf(b),0<=d){var f=this._indexToValue(d);return void this._itemActivate(f,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(e){return null!==e&&e!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>class TabsOverlay extends Polymer.Element{static get is(){return'tabs-overlay'}static get properties(){return{target:{type:Object,observer:'_targetChanged'}}}constructor(){super(),this._lastTarget=void 0,this._transitionsInFlight=[]}ready(){super.ready(),this.addEventListener('transitionend',a=>this._onTransitionend(a))}_targetChanged(a,b){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(b,a),this._lastTarget=this.target)}_onTransitionend(a){let b=this._transitionsInFlight.indexOf(a.propertyName);0<=b&&this._transitionsInFlight.splice(b,1),this._transitionsInFlight.length||this._moveComplete()}_moveComplete(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}_move(a,b){let c=a||b,d=b||a;if(c||d){let f=a?1:0,g=b?1:0;Polymer.dom.flush();let h=this.getBoundingClientRect(),j=window.getComputedStyle(this),k=c.getBoundingClientRect(),l=d.getBoundingClientRect();if(0===l.top&&0===l.right&&0===l.bottom&&0===l.left&&0===l.width&&0===l.height)return this.style.transitionProperty='none',this.style.opacity=g,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';let m=parseFloat(j.top||'0')+(k.top-h.top),n=parseFloat(j.right||'0')-(k.right-h.right),o=parseFloat(j.bottom||'0')-(k.bottom-h.bottom),p=parseFloat(j.left||'0')+(k.left-h.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';let q=[this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=f+''];m+=l.top-k.top,n-=l.right-k.right,o-=l.bottom-k.bottom,p+=l.left-k.left;let r=[0.2,0.2,0.2,0.2,0.2],s=[0,0,0,0,0];k.left<l.left&&k.right<l.right?s[3]=0.1:k.left>l.left&&k.right>l.right&&(s[1]=0.1),k.top<l.top&&k.bottom<l.bottom?s[0]=0.1:k.top>l.top&&k.bottom>l.bottom&&(s[2]=0.1);let t=[m+'px',n+'px',o+'px',p+'px',g+''],u=['top','right','bottom','left','opacity'];for(let v=0;v<q.length;v++)q[v]!==t[v]&&(0===r[v]&&0===s[v]||this._transitionsInFlight.push(u[v]));requestAnimationFrame(()=>{this.style.transitionDuration=r.map(v=>{return v+'s'}).join(', '),this.style.transitionDelay=s.map(v=>{return v+'s'}).join(', '),this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=g+''})}}}customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>class TabsContainer extends Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element){static get is(){return'tabs-container'}static get properties(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}static get observers(){return['_onSelectedItemChanged(selectedItem)']}connectedCallback(){super.connectedCallback(),this._addScrollListeners()}_addScrollListeners(){this.$.container.addEventListener('scroll',a=>this._onScroll(a),{passive:!0}),this.$.container.addEventListener('wheel',a=>this._onWheel(a),{passive:!0})}_onSelectedItemChanged(a){a&&(!this.multi&&(this.$.overlay.target=a),requestAnimationFrame(()=>{this.vertical?this.$.container.scrollTop=a.offsetTop-this.$.container.offsetTop-this.$.container.clientHeight/2+a.clientHeight/2:this.$.container.scrollLeft=a.offsetLeft-this.$.container.offsetLeft-this.$.container.clientWidth/2+a.clientWidth/2}))}_onWheel(a){if(a){var b,c;switch(a.deltaMode){case 0:c=0.2;break;case 1:c=20;break;case 2:c=this.$.container.offsetHeight;break;default:c=1;}this.vertical?(b=a.deltaY||0,this.$.container.scrollTop+=b*c):(b=a.deltaX||0,this.$.container.scrollLeft+=b*c)}}_onScroll(a,b){a.stopImmediatePropagation();var c;this.vertical?(c=b&&-b.ddy||0,this.$.container.scrollTop+=c):(c=b&&-b.ddx||0,this.$.container.scrollLeft+=c)}reset(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>class RippleContainer extends Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element){static get is(){return'ripple-container'}constructor(){super(),this._isDown=!1}ready(){super.ready(),this.addEventListener('focus',a=>this._onFocus(a),!0),this.addEventListener('blur',a=>this._onBlur(a),!0),this.addEventListener('down',a=>this._rippleDown(a)),this.addEventListener('up',a=>this._rippleUp(a))}_onFocus(a){this._isDown||this._rippleDown(a)}_onBlur(a){this._rippleUp(a)}_rippleDown(a){this._isDown=!0,this.getRipple().downAction(a)}_rippleUp(a){this._isDown=!1,this.getRipple().upAction(a)}}customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>class TabElement extends Polymer.Element{static get is(){return'tab-element'}}customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ãœ" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>class LogoElement extends Polymer.Element{static get is(){return'logo-element'}static get properties(){return{href:{type:String}}}connectedCallback(){super.connectedCallback(),this._addListners()}_addListners(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}_addClass(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.add('animated')})}.bind(this))}_removeClass(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.remove('animated')})}.bind(this))}}customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>class ToggleButton extends Polymer.Element{static get is(){return'toggle-button'}static get properties(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}connectedCallback(){super.connectedCallback(),Polymer.Gestures.addListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.addListener(this,'track',a=>this._ontrack(a))}disconnectedCallback(){super.disconnectedCallback(),Polymer.Gestures.removeListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.removeListener(this,'track',a=>this._ontrack(a))}_ontrack(a){var b=a.detail;'start'===b.state?this._trackStart(b):'track'===b.state?this._trackMove(b):'end'===b.state&&this._trackEnd(b)}_trackStart(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}_trackMove(a){var b=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+b:b)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}_trackEnd(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}_onclicked(){this.checked=!this.checked}}customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>class SVGData extends WebvisualMixins.FetchMixin(Polymer.Element){static get is(){return'svg-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}static get observers(){return['_fetchSvgSource(room, loggedIn)']}_fetchSvgSource(a){if(a){var e=a.split('/').filter(function(g){return''!==g});if(2===e.length){var f=e[0]+'+'+e[1]+'+svgSource.json';this._fetch(f,'GET','include','json','data').catch(g=>{console.log(g)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>class DeviceSocketData extends Polymer.Element{static get is(){return'device-socket-data'}static get properties(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}static get observers(){return['_connect(loggedIn, lazyConnect)']}_connect(a,b){a&&b?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}_createSocketConnection(a,b){a&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(()=>{Webvisual.assignStatusNotifications(this),Webvisual.createSocketConnection(a,b),this.socketRoom&&this.connect(this.socketRoom)},0)}connect(a){return a=a||this.socketRoom,a?void('/'===a.substring(0,1)&&(a=a.slice(1,a.length)),Webvisual.setupConnection(a),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}disconnect(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>class CaptionElement extends Polymer.Element{static get is(){return'device-caption'}static get properties(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}constructor(){super(),this.setAttribute('unresolved','')}getKey(a){return this.keys&&this.keys[a]}_computeReducedCaptionKeys(a,b){var e=Object.keys(b||{});if(0===e.length)return[];var f=[];return!0===this.withoutGroupedKey?f=e.filter(function(g){return a!==g}):!0===this.onlyGroupedKey&&(f=e.filter(function(g){return a===g})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===f.length?e:f}isEmptyCaption(a){return!this.keys[a]}}customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return class extends c{constructor(){super()}static get properties(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}static get observers(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}connectedCallback(){super.connectedCallback(),this._linkElement(this.item,this.noLink)}disconnectedCallback(){super.disconnectedCallback(),this._unlinkElement(),this.clearValues()}_linkElement(d,e){if(d&&d.mount){if(this._olditem){if(d.mount===this._olditem.mount&&!e)return;this._unlinkElement(this._olditem)}return e?void this._unlinkElement(d):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=d,this.clearValues(),this.reset(),this.requestValues(null,null,this.viewLength).then(f=>{for(var g in f)if(g===this.item.mount){this.insertValues(f[g]);break}}).catch(()=>{})))}}_unlinkElement(d){d=d||this.item||this._olditem,setTimeout(()=>{window.Webvisual&&Webvisual.retractElement&&d&&d.mount&&(window.Webvisual.retractElement(this,d),this._olditem=null)},0)}getElement(){return this.properties}computeDate(d){return d?864E5>Math.abs(Date.now()-d)?new Date(d).toLocaleTimeString():new Date(d).toLocaleString():''}computeValue(d,e){return this.item&&this.item.isIndicatorLamp?e?'\u2717':'\u2713':d}insertValues(d,e){if(void 0!==d){var e=e||this.viewLength;if(this._initialized||(this._initialized=!0),!e)this.item&&!0===this.item.exceedable&&d.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(d)),this.renderInsertedValues(d);else{var f=d.slice(d.length-e,d.length);this.item&&!0===this.item.exceedable&&f.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(f)),this.renderInsertedValues(f),f.length=0}d.length=0}}spliceValues(d){d&&(!0===this.storeInside&&(this.values=this.values.filter(e=>{return-1===d.indexOf(e)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(d))}resetValues(d){this.values=d,this.notifyPath('values'),this.renderInsertedValues(this.values)}clearValues(){this.values=[],this.notifyPath('values')}requestValues(d,e,f){if(!(this.item&&this.item.mount))return new Promise((h,j)=>{j()});f=f||this.viewLength||1;var g={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:f||1}};return window.Webvisual?new Promise(h=>{window.Webvisual.request(g,h)}):new Promise((h,j)=>{this.values?h(this.values.slice(this.values.length-f,this.values.length)):j()})}requestRange(d){if(!(this.item&&this.item.mount))return new Promise(f=>{f([void 0,void 0])});var e={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:d}};return!this.storeInside&&window.Webvisual?new Promise(f=>{window.Webvisual.request(e,f)}):new Promise(f=>{if(this.values&&this.values.length){var h=this.min(this.values,d),j=this.max(this.values,d);void 0===h&&void 0===j||f([h,j])}f([void 0,void 0])})}min(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g>h&&(g=h);return g}max(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g<h&&(g=h);return g}renderInsertedValues(){}renderSplicedValues(){}renderClearing(){}checkExceedingState(d){this.item&&!1!==this.item.exceedable&&void 0!==d&&(0===d.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}_exceedingChanged(d){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:d}}))}_hasExceededChanged(){}reset(){this.resetColor&&this.resetColor(),super.reset&&super.reset(),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return class extends a{static get observers(){return['setColor(item.color)']}setColor(b){b&&(this.updateStyles({"--device-color":b||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":b||null})),this.updateStyles()}resetColor(){this.setColor(this.item&&this.item.color||'')}getComputedStyleValue(b){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,b):getComputedStyle(this).getPropertyValue(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}static get observers(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}_addTouchListeners(b,c,d){if(void 0!==c)if(b)this._removeTouchListeners();else{var f=this.eventTarget;f=f?this.$[f]:this,d?(Polymer.Gestures.addListener(f,'down',g=>this._handleTouch(g)),Polymer.Gestures.addListener(f,'up',g=>this._handleTouch(g))):c?Polymer.Gestures.addListener(f,'tap',()=>this.select()):this._removeTouchListeners()}}_removeTouchListeners(){var b=this.eventTarget;b=b?this.$[b]:this,Polymer.Gestures.removeListener(b,'down',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'up',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'tap',()=>this.select())}_handleTouch(b){'down'===b.type?this._lastEvent=b:this._lastEvent&&b.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}_checkedChanged(){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:this.checked}}))}select(b,c){!0===this.selectable&&(this._preventSelectEvent=c,b===void 0?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=b)}deselect(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}reset(){super.reset&&super.reset(),this.deselect()}}};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>class DeviceSign extends WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-sign'}static get properties(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}insertValues(a){a&&a.length?setTimeout(()=>{this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.isIndicatorLamp||(this.$.value.textContent=this.computeValue(b.y)),this.showDate&&(this.$.dateSection.textContent=this.computeDate(b.x)),this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))},0):this.renderClearing()}computeValue(a){return a}renderClearing(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}_requestExceedingDetails(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>class DeviceCheckbox extends WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-checkbox'}static get properties(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}insertValues(a){if(a&&a.length){this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))}else this.renderClearing()}renderClearing(){this._initialized=!1,this.setAttribute('state',null)}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!a||'-1px'===a){var b=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,c=Math.floor(8/3*b);c%2!==b%2&&c++,this.updateStyles({"--box-ink-size":c+'px'})}})}}customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var n=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,n-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(n){this.style.webkitOverflowScrolling=n===this?'touch':'',this.style.overflowY=n===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var n=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(n['padding-top'],10),this._isRTL=!('rtl'!==n.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var n=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),o=n-this._scrollPosition,p=0<=o;if(this._scrollPosition=n,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(o)>this._physicalSize&&0<this._physicalSize){o-=this._scrollOffset;var q=Math.round(o/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=q,this._physicalStart+=q,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var r=this._getReusables(p);p?(this._physicalTop=r.physicalTop,this._virtualStart+=r.indexes.length,this._physicalStart+=r.indexes.length):(this._virtualStart-=r.indexes.length,this._physicalStart-=r.indexes.length),this._update(r.indexes,p?null:r.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(n){var o,p,q,r,s=[],t=this._hiddenContentSize*this._ratio,u=this._virtualStart,w=this._virtualEnd,z=this._physicalCount,A=this._physicalTop+this._scrollOffset,B=this._physicalBottom+this._scrollOffset,C=this._scrollTop,D=this._scrollBottom;for(n?(o=this._physicalStart,p=this._physicalEnd,q=C-A):(o=this._physicalEnd,p=this._physicalStart,q=B-D);r=this._getPhysicalSizeIncrement(o),q-=r,!(s.length>=z||q<=t);)if(n){if(w+s.length+1>=this._virtualCount)break;if(A+r>=C-this._scrollOffset)break;s.push(o),A+=r,o=(o+1)%z}else{if(0>=u-s.length)break;if(A+this._physicalSize-r<=D)break;s.push(o),A-=r,o=0===o?z-1:o-1}return{indexes:s,physicalTop:A-this._scrollOffset}},_update:function(n,o){if(!(n&&0===n.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(n),this._updateMetrics(n),o)for(;o.length;){var p=o.pop();this._physicalTop-=this._getPhysicalSizeIncrement(p)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(n){this._ensureTemplatized();var o,p,q=Array(n);for(o=0;o<n;o++)p=this.stamp(null),q[o]=p.root.querySelector('*'),this._itemsParent.appendChild(p.root);return q},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(n){var o=this._clamp(this._physicalCount+n,c,this._virtualCount-this._virtualStart);if(o=this._convertIndexToCompleteRow(o),this.grid){var p=o%this._itemsPerRow;p&&o-p<=this._physicalCount&&(o+=this._itemsPerRow),o-=p}var q=o-this._physicalCount,r=Math.round(0.5*this._physicalCount);if(!(0>q)){if(0<q){var s=window.performance.now();[].push.apply(this._physicalItems,this._createPool(q)),[].push.apply(this._physicalSizes,Array(q)),this._physicalCount+=q,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=q),this._update(),this._templateCost=(window.performance.now()-s)/q,r=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===r||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,r)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,r),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var n=this._getReusables(!0);this._physicalTop=n.physicalTop,this._virtualStart+=n.indexes.length,this._physicalStart+=n.indexes.length,this._update(n.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var n={};n.__key__=!0,n[this.as]=!0,n[this.indexAs]=!0,n[this.selectedAs]=!0,n.tabIndex=!0,this._instanceProps=n,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(n,o){'undefined'===typeof o||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),n&&this._updateGridMetrics())},_itemsChanged:function(n){if('items'===n.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===n.path){this._adjustVirtualIndex(n.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var o=n.value.indexSplices.some(function(p){return this._isIndexRendered(p.index)},this);(!this._isClientFull()||o)&&this._debounceRender(this._render,k)}else'items.length'!==n.path&&this._forwardItemPath(n.path,n.value)},_forwardItemPath:function(n,o){n=n.slice(6);var p=n.indexOf('.')+1;0===p&&(p=n.length);var q=j?parseInt(n.substring(0,p),10):parseInt(n.substring(1,p),10),r=this._offscreenFocusedItem,s=this._isIndexRendered(q),t;s?t=this.modelForElement(this._physicalItems[this._getPhysicalIndex(q)]):r&&(t=this.modelForElement(r));t&&t[this.indexAs]===q&&(n=n.substring(p),n=this.as+(n?'.'+n:''),j?t._setPendingPropertyOrPath(n,o,!1,!0):t.notifyPath(n,o,!0),t._flushProperties&&t._flushProperties(!0),s&&(this._updateMetrics([q]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(n){n.forEach(function(o){if(o.removed.forEach(this._removeItem,this),o.index<this._virtualStart){var p=Math.max(o.addedCount-o.removed.length,o.index-this._virtualStart);this._virtualStart+=p,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=p)}},this)},_removeItem:function(n){this.$.selector.deselect(n),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===n&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())},_iterateItems:function(n,o){var p,q,r,s;if(2===arguments.length&&o){for(s=0;s<o.length;s++)if(p=o[s],q=this._computeVidx(p),null!=(r=n.call(this,p,q)))return r;}else{for(p=this._physicalStart,q=this._virtualStart;p<this._physicalCount;p++,q++)if(null!=(r=n.call(this,p,q)))return r;for(p=0;p<this._physicalStart;p++,q++)if(null!=(r=n.call(this,p,q)))return r}},_computeVidx:function(n){return n>=this._physicalStart?this._virtualStart+(n-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+n},_assignModels:function(n){this._iterateItems(function(o,p){var q=this._physicalItems[o],r=this.items&&this.items[p];if(null!=r){var s=this.modelForElement(q);s.__key__=this._collection?this._collection.getKey(r):null,this._forwardProperty(s,this.as,r),this._forwardProperty(s,this.selectedAs,this.$.selector.isSelected(r)),this._forwardProperty(s,this.indexAs,p),this._forwardProperty(s,'tabIndex',this._focusedVirtualIndex===p?0:-1),this._physicalIndexForKey[s.__key__]=o,s._flushProperties&&s._flushProperties(!0),q.removeAttribute('hidden')}else q.setAttribute('hidden','')},n)},_updateMetrics:function(n){Polymer.flush?Polymer.flush():Polymer.dom.flush();var o=0,p=0,q=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems(function(s){p+=this._physicalSizes[s]||0,this._physicalSizes[s]=this._physicalItems[s].offsetHeight,o+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},n),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(p=1===this._itemsPerRow?p:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+o-p,this._itemsPerRow=1),this._physicalAverageCount!==q&&(this._physicalAverage=Math.round((r*q+o)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var n=this._physicalTop;if(this.grid){var o=this._itemsPerRow*this._itemWidth,p=(this._viewportWidth-o)/2;this._iterateItems(function(q,r){var s=r%this._itemsPerRow,t=Math.floor(s*this._itemWidth+p);this._isRTL&&(t*=-1),this.translate3d(t+'px',n+'px',0,this._physicalItems[q]),this._shouldRenderNextRow(r)&&(n+=this._rowHeight)})}else this._iterateItems(function(q){this.translate3d(0,n+'px',0,this._physicalItems[q]),n+=this._physicalSizes[q]})},_getPhysicalSizeIncrement:function(n){return this.grid?this._computeVidx(n)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[n]},_shouldRenderNextRow:function(n){return n%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var n=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==n){this._physicalTop-=n;var o=this._scrollTop;!b&&0<o&&this._resetScrollPosition(o-n)}},_resetScrollPosition:function(n){this.scrollTarget&&0<=n&&(this._scrollTop=n,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(n){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,n=n||0===this._scrollHeight,n=n||this._scrollPosition>=this._estScrollHeight-this._physicalSize,n=n||this.grid&&this.$.items.style.height<this._estScrollHeight,(n||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(n){return this.scrollToIndex(this.items.indexOf(n))},scrollToIndex:function(n){if(!('number'!==typeof n||0>n||n>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){n=this._clamp(n,0,this._virtualCount-1),(!this._isIndexRendered(n)||n>=this._maxVirtualStart)&&(this._virtualStart=this.grid?n-2*this._itemsPerRow:n-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var o=this._physicalStart,p=this._virtualStart,q=0,r=this._hiddenContentSize;p<n&&q<=r;)q+=this._getPhysicalSizeIncrement(o),o=(o+1)%this._physicalCount,p++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+q),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(n){return this.selectIndex(this.items.indexOf(n))},selectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o&&(o[this.selectedAs]=!0),this.updateSizeForIndex(n)}this.$.selector.selectIndex?this.$.selector.selectIndex(n):this.$.selector.select(this.items[n])}},deselectItem:function(n){return this.deselectIndex(this.items.indexOf(n))},deselectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o[this.selectedAs]=!1,this.updateSizeForIndex(n)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(n):this.$.selector.deselect(this.items[n])}},toggleSelectionForItem:function(n){return this.toggleSelectionForIndex(this.items.indexOf(n))},toggleSelectionForIndex:function(n){var o=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(n):this.$.selector.isSelected(this.items[n]);o?this.deselectIndex(n):this.selectIndex(n)},clearSelection:function(){this._iterateItems(function(n){this.modelForElement(this._physicalItems[n])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(n){var o=n?this.listen:this.unlisten;o.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(n){var o=this.modelForElement(n.target);if(o){var p,q,r=Polymer.dom(n).path[0],s=this._itemsParent.node.domHost,t=Polymer.dom(s?s.root:document).activeElement,u=this._physicalItems[this._getPhysicalIndex(o[this.indexAs])];'input'!==r.localName&&'button'!==r.localName&&'select'!==r.localName&&(p=o.tabIndex,o.tabIndex=h,q=t?t.tabIndex:-1,o.tabIndex=p,t&&u!==t&&u.contains(t)&&q!==h||this.toggleSelectionForItem(o[this.as]))}},_multiSelectionChanged:function(n){this.clearSelection(),this.$.selector.multi=n},updateSizeForItem:function(n){return this.updateSizeForIndex(this.items.indexOf(n))},updateSizeForIndex:function(n){return this._isIndexRendered(n)?(this._updateMetrics([this._getPhysicalIndex(n)]),this._positionItems(),null):null},_manageFocus:function(){var n=this._focusedVirtualIndex;0<=n&&n<this._virtualCount?this._isIndexRendered(n)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(n){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(n/this._itemsPerRow)*this._itemsPerRow:n},_isIndexRendered:function(n){return n>=this._virtualStart&&n<=this._virtualEnd},_isIndexVisible:function(n){return n>=this.firstVisibleIndex&&n<=this.lastVisibleIndex},_getPhysicalIndex:function(n){return(this._physicalStart+(n-this._virtualStart))%this._physicalCount},focusItem:function(n){this._focusPhysicalItem(n)},_focusPhysicalItem:function(n){if(!(0>n||n>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(n)||this.scrollToIndex(n);var q,o=this._physicalItems[this._getPhysicalIndex(n)],p=this.modelForElement(o);p.tabIndex=h,o.tabIndex===h&&(q=o),q||(q=Polymer.dom(o).querySelector('[tabindex="'+h+'"]')),p.tabIndex=0,this._focusedVirtualIndex=n,q&&q.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var n=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var o=this.stamp(null);this._focusBackfillItem=o.root.querySelector('*'),this._itemsParent.appendChild(o.root)}this._offscreenFocusedItem=this._physicalItems[n],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[n]=this._focusBackfillItem,this._focusedPhysicalIndex=n,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var n=this._focusedPhysicalIndex,o=this._physicalItems[n];if(o){var p=this.modelForElement(o),q=this.modelForElement(this._offscreenFocusedItem);p[this.as]===q[this.as]?(this._focusBackfillItem=o,p.tabIndex=-1,this._physicalItems[n]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(n){var o=this.modelForElement(n.target),p=this.modelForElement(this._focusedItem),q=null!==this._offscreenFocusedItem,r=this._focusedVirtualIndex;o&&(p===o?!this._isIndexVisible(r)&&this.scrollToIndex(r):(this._restoreFocusedItem(),p&&(p.tabIndex=-1),o.tabIndex=0,r=o[this.indexAs],this._focusedVirtualIndex=r,this._focusedPhysicalIndex=this._getPhysicalIndex(r),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],q&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(n){switch(n.keyCode){case 40:n.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(n);}},_clamp:function(n,o,p){return Math.min(p,Math.max(o,n))},_debounceRender:function(n,o){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,o,n.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(n)},_forwardProperty(n,o,p){j?n._setPendingProperty(o,p):n[o]=p},_forwardHostPropV2:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).forwardHostProp(n,o)},this)},_notifyInstancePropV2:function(n,o,p){if(Polymer.Path.matches(this.as,o)){var q=n[this.indexAs];o==this.as&&(this.items[q]=p),this.notifyPath(Polymer.Path.translate(this.as,'items.'+q,o),p)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(n,o,p){0===o.indexOf(this.as+'.')&&this.notifyPath('items.'+n.__key__+'.'+o.slice(this.as.length+1),p)},_forwardParentPath:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).notifyPath(n,o,!0)},this)},_forwardParentProp:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&(this.modelForElement(p)[n]=o)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>class DeviceTable extends WebvisualMixins.DeviceMixin(Polymer.Element){static get is(){return'device-table'}static get properties(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}static get observers(){return['_computeKeysForCaption(keysForCaption, item)']}insertValues(a){a&&a.length?setTimeout(()=>{if(!this._initialized)this.set('values',a.reverse()),this._initialized=!0;else for(var b=0;b<a.length;b++)this.unshift('values',a[b])},0):!this._initialized&&this.renderClearing()}spliceValues(a){setTimeout(()=>{for(var b=[],c=0;c<a.length;c++){for(var d=this.values.length-1;0<=d&&!(this.values[d].x===a[c].x);d--);-1!==d&&(this.values.splice(d,1),b.push({index:d,removed:[this.values[d]],addedCount:0,object:this.values,type:'splice'}))}this.notifySplices('values',b)},0)}renderClearing(){this.$.list.set('items',[])}_computeKeysForCaption(a,b){if(a&&b&&b.keys){var c='';for(var d in this.item.keys)c+=this.item.keys[d]+' ';this.$.caption.textContent=c}else this.caption&&(this.$.caption.textContent=this.caption)}_toggleGridView(){this.$.list.grid=!!!this.$.list.grid}}customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>class DeviceTableGroup extends Polymer.Element{static get is(){return'device-table-group'}static get properties(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}static get observers(){return['_shouldHideTabs(items.length)']}_shouldHideTabs(a){2>a?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===a&&this.set('selectedItemMount',this.items[0].mount)}reset(){this.set('items',[]),this.set('selectedItemMount','')}}customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">!function(La){"use strict";function Ha(fg){return function(xg,vg){return Up(fg(xg),vg)}}function Xa(fg,xg,vg){var bg=(xg-fg)/Math.max(0,vg),wg=Math.floor(Math.log(bg)/Math.LN10),Tg=bg/Math.pow(10,wg);return 0<=wg?(Tg>=Ep?10:Tg>=Pp?5:Tg>=Dp?2:1)*Math.pow(10,wg):-Math.pow(10,-wg)/(Tg>=Ep?10:Tg>=Pp?5:Tg>=Dp?2:1)}function qa(fg,xg,vg){var bg=Math.abs(xg-fg)/Math.max(0,vg),wg=Math.pow(10,Math.floor(Math.log(bg)/Math.LN10)),Tg=bg/wg;return Tg>=Ep?wg*=10:Tg>=Pp?wg*=5:Tg>=Dp&&(wg*=2),xg<fg?-wg:wg}function Ia(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Oa(){return new Ia}function $a(fg){this._context=fg}function ja(fg){return fg[0]}function Va(fg){return fg[1]}function Ba(fg,xg,vg){fg._context.bezierCurveTo((2*fg._x0+fg._x1)/3,(2*fg._y0+fg._y1)/3,(fg._x0+2*fg._x1)/3,(fg._y0+2*fg._y1)/3,(fg._x0+4*fg._x1+xg)/6,(fg._y0+4*fg._y1+vg)/6)}function Za(fg){this._context=fg}function Wa(fg,xg,vg){fg._context.bezierCurveTo(fg._x1+fg._k*(fg._x2-fg._x0),fg._y1+fg._k*(fg._y2-fg._y0),fg._x2+fg._k*(fg._x1-xg),fg._y2+fg._k*(fg._y1-vg),fg._x2,fg._y2)}function Ra(fg,xg){this._context=fg,this._k=(1-xg)/6}function Ga(fg,xg,vg){var bg=fg._x1,wg=fg._y1,Tg=fg._x2,kg=fg._y2;if(fg._l01_a>Ip){var Sg=2*fg._l01_2a+3*fg._l01_a*fg._l12_a+fg._l12_2a,Cg=3*fg._l01_a*(fg._l01_a+fg._l12_a);bg=(bg*Sg-fg._x0*fg._l12_2a+fg._x2*fg._l01_2a)/Cg,wg=(wg*Sg-fg._y0*fg._l12_2a+fg._y2*fg._l01_2a)/Cg}if(fg._l23_a>Ip){var zg=2*fg._l23_2a+3*fg._l23_a*fg._l12_a+fg._l12_2a,Mg=3*fg._l23_a*(fg._l23_a+fg._l12_a);Tg=(Tg*zg+fg._x1*fg._l23_2a-xg*fg._l12_2a)/Mg,kg=(kg*zg+fg._y1*fg._l23_2a-vg*fg._l12_2a)/Mg}fg._context.bezierCurveTo(bg,wg,Tg,kg,fg._x2,fg._y2)}function Ja(fg,xg){this._context=fg,this._alpha=xg}function Ka(fg){return 0>fg?-1:1}function Qa(fg,xg,vg){var bg=fg._x1-fg._x0,wg=xg-fg._x1,Tg=(fg._y1-fg._y0)/(bg||0>wg&&-0),kg=(vg-fg._y1)/(wg||0>bg&&-0);return(Ka(Tg)+Ka(kg))*Math.min(Math.abs(Tg),Math.abs(kg),.5*Math.abs((Tg*wg+kg*bg)/(bg+wg)))||0}function el(fg,xg){var vg=fg._x1-fg._x0;return vg?(3*(fg._y1-fg._y0)/vg-xg)/2:xg}function tl(fg,xg,vg){var bg=fg._x0,wg=fg._y0,Tg=fg._x1,kg=fg._y1,Sg=(Tg-bg)/3;fg._context.bezierCurveTo(bg+Sg,wg+Sg*xg,Tg-Sg,kg-Sg*vg,Tg,kg)}function nl(fg){this._context=fg}function ol(fg){this._context=fg}function al(fg){this._context=fg}function il(fg){var xg,vg,bg=fg.length-1,wg=Array(bg),Tg=Array(bg),kg=Array(bg);for(wg[0]=0,Tg[0]=2,kg[0]=fg[0]+2*fg[1],xg=1;xg<bg-1;++xg)wg[xg]=1,Tg[xg]=4,kg[xg]=4*fg[xg]+2*fg[xg+1];for(wg[bg-1]=2,Tg[bg-1]=7,kg[bg-1]=8*fg[bg-1]+fg[bg],xg=1;xg<bg;++xg)vg=wg[xg]/Tg[xg-1],Tg[xg]-=vg,kg[xg]-=vg*kg[xg-1];for(wg[bg-1]=kg[bg-1]/Tg[bg-1],xg=bg-2;0<=xg;--xg)wg[xg]=(kg[xg]-wg[xg+1])/Tg[xg];for(Tg[bg-1]=(fg[bg]+wg[bg-1])/2,xg=0;xg<bg-1;++xg)Tg[xg]=2*fg[xg+1]-wg[xg+1];return[wg,Tg]}function ll(fg,xg){this._context=fg,this._t=xg}function rl(fg,xg,vg,bg){function wg(Tg){return fg(Tg=new Date(+Tg)),Tg}return wg.floor=wg,wg.ceil=function(Tg){return fg(Tg=new Date(Tg-1)),xg(Tg,1),fg(Tg),Tg},wg.round=function(Tg){var kg=wg(Tg),Sg=wg.ceil(Tg);return Tg-kg<Sg-Tg?kg:Sg},wg.offset=function(Tg,kg){return xg(Tg=new Date(+Tg),null==kg?1:Math.floor(kg)),Tg},wg.range=function(Tg,kg,Sg){var Cg=[];if(Tg=wg.ceil(Tg),Sg=null==Sg?1:Math.floor(Sg),!(Tg<kg&&0<Sg))return Cg;do Cg.push(new Date(+Tg));while((xg(Tg,Sg),fg(Tg),Tg<kg));return Cg},wg.filter=function(Tg){return rl(function(kg){if(kg>=kg)for(;fg(kg),!Tg(kg);)kg.setTime(kg-1)},function(kg,Sg){if(kg>=kg)for(;0<=--Sg;)for(;xg(kg,1),!Tg(kg););})},vg&&(wg.count=function(Tg,kg){return Vp.setTime(+Tg),Bp.setTime(+kg),fg(Vp),fg(Bp),Math.floor(vg(Vp,Bp))},wg.every=function(Tg){return Tg=Math.floor(Tg),isFinite(Tg)&&0<Tg?1<Tg?wg.filter(bg?function(kg){return 0==bg(kg)%Tg}:function(kg){return 0==wg.count(0,kg)%Tg}):wg:null}),wg}function sl(fg){return rl(function(xg){xg.setDate(xg.getDate()-(xg.getDay()+7-fg)%7),xg.setHours(0,0,0,0)},function(xg,vg){xg.setDate(xg.getDate()+7*vg)},function(xg,vg){return(vg-xg-(vg.getTimezoneOffset()-xg.getTimezoneOffset())*Wp)/Rp})}function dl(fg){return rl(function(xg){xg.setUTCDate(xg.getUTCDate()-(xg.getUTCDay()+7-fg)%7),xg.setUTCHours(0,0,0,0)},function(xg,vg){xg.setUTCDate(xg.getUTCDate()+7*vg)},function(xg,vg){return(vg-xg)/Rp})}function cl(fg){return new ul(fg)}function ul(fg){if(!(xg=m_.exec(fg)))throw new Error("invalid format: "+fg);var xg,vg=xg[1]||" ",bg=xg[2]||">",wg=xg[3]||"-",Tg=xg[4]||"",kg=!!xg[5],Sg=xg[6]&&+xg[6],Cg=!!xg[7],zg=xg[8]&&+xg[8].slice(1),Mg=xg[9]||"";"n"===Mg?(Cg=!0,Mg="g"):h_[Mg]||(Mg=""),(kg||"0"===vg&&"="===bg)&&(kg=!0,vg="0",bg="="),this.fill=vg,this.align=bg,this.sign=wg,this.symbol=Tg,this.zero=kg,this.width=Sg,this.comma=Cg,this.precision=zg,this.type=Mg}function pl(fg){return g_=v_(fg),La.format=g_.format,y_=g_.formatPrefix,g_}function _l(fg){if(0<=fg.y&&100>fg.y){var xg=new Date(-1,fg.m,fg.d,fg.H,fg.M,fg.S,fg.L);return xg.setFullYear(fg.y),xg}return new Date(fg.y,fg.m,fg.d,fg.H,fg.M,fg.S,fg.L)}function hl(fg){if(0<=fg.y&&100>fg.y){var xg=new Date(Date.UTC(-1,fg.m,fg.d,fg.H,fg.M,fg.S,fg.L));return xg.setUTCFullYear(fg.y),xg}return new Date(Date.UTC(fg.y,fg.m,fg.d,fg.H,fg.M,fg.S,fg.L))}function ml(fg){return{y:fg,m:0,d:1,H:0,M:0,S:0,L:0}}function gl(fg){function xg($g,jg){return function(Vg){var Bg,Zg,Wg,Rg=[],Gg=-1,Jg=0,Kg=$g.length;for(Vg instanceof Date||(Vg=new Date(+Vg));++Gg<Kg;)37===$g.charCodeAt(Gg)&&(Rg.push($g.slice(Jg,Gg)),null==(Zg=z_[Bg=$g.charAt(++Gg)])?Zg="e"===Bg?" ":"0":Bg=$g.charAt(++Gg),(Wg=jg[Bg])&&(Bg=Wg(Vg,Zg)),Rg.push(Bg),Jg=Gg+1);return Rg.push($g.slice(Jg,Gg)),Rg.join("")}}function vg($g,jg){return function(Vg){var Bg=ml(1900);if(bg(Bg,$g,Vg+="",0)!=Vg.length)return null;if("p"in Bg&&(Bg.H=Bg.H%12+12*Bg.p),"W"in Bg||"U"in Bg){"w"in Bg||(Bg.w="W"in Bg?1:0);var Zg="Z"in Bg?hl(ml(Bg.y)).getUTCDay():jg(ml(Bg.y)).getDay();Bg.m=0,Bg.d="W"in Bg?(Bg.w+6)%7+7*Bg.W-(Zg+5)%7:Bg.w+7*Bg.U-(Zg+6)%7}return"Z"in Bg?(Bg.H+=0|Bg.Z/100,Bg.M+=Bg.Z%100,hl(Bg)):jg(Bg)}}function bg($g,jg,Vg,Bg){for(var Zg,Wg,Rg=0,Gg=jg.length,Jg=Vg.length;Rg<Gg;){if(Bg>=Jg)return-1;if(37===(Zg=jg.charCodeAt(Rg++))){if(Zg=jg.charAt(Rg++),!(Wg=Og[Zg in z_?jg.charAt(Rg++):Zg])||0>(Bg=Wg($g,Vg,Bg)))return-1;}else if(Zg!=Vg.charCodeAt(Bg++))return-1}return Bg}var wg=fg.dateTime,Tg=fg.date,kg=fg.time,Sg=fg.periods,Cg=fg.days,zg=fg.shortDays,Mg=fg.months,Ug=fg.shortMonths,Ag=xl(Sg),Yg=vl(Sg),Eg=xl(Cg),Pg=vl(Cg),Dg=xl(zg),Fg=vl(zg),Lg=xl(Mg),Hg=vl(Mg),Xg=xl(Ug),qg=vl(Ug),Ig={a:function($g){return zg[$g.getDay()]},A:function($g){return Cg[$g.getDay()]},b:function($g){return Ug[$g.getMonth()]},B:function($g){return Mg[$g.getMonth()]},c:null,d:Fl,e:Fl,H:Ll,I:Hl,j:Xl,L:ql,m:Il,M:Nl,p:function($g){return Sg[+(12<=$g.getHours())]},S:Ol,U:$l,w:jl,W:Vl,x:null,X:null,y:Bl,Y:Zl,Z:Wl,"%":ds},Ng={a:function($g){return zg[$g.getUTCDay()]},A:function($g){return Cg[$g.getUTCDay()]},b:function($g){return Ug[$g.getUTCMonth()]},B:function($g){return Mg[$g.getUTCMonth()]},c:null,d:Rl,e:Rl,H:Gl,I:Jl,j:Kl,L:Ql,m:es,M:ts,p:function($g){return Sg[+(12<=$g.getUTCHours())]},S:ns,U:os,w:as,W:is,x:null,X:null,y:ls,Y:rs,Z:ss,"%":ds},Og={a:function($g,jg,Vg){var Bg=Dg.exec(jg.slice(Vg));return Bg?($g.w=Fg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},A:function($g,jg,Vg){var Bg=Eg.exec(jg.slice(Vg));return Bg?($g.w=Pg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},b:function($g,jg,Vg){var Bg=Xg.exec(jg.slice(Vg));return Bg?($g.m=qg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},B:function($g,jg,Vg){var Bg=Lg.exec(jg.slice(Vg));return Bg?($g.m=Hg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},c:function($g,jg,Vg){return bg($g,wg,jg,Vg)},d:Ml,e:Ml,H:Al,I:Al,j:Ul,L:Pl,m:zl,M:Yl,p:function($g,jg,Vg){var Bg=Ag.exec(jg.slice(Vg));return Bg?($g.p=Yg[Bg[0].toLowerCase()],Vg+Bg[0].length):-1},S:El,U:wl,w:bl,W:Tl,x:function($g,jg,Vg){return bg($g,Tg,jg,Vg)},X:function($g,jg,Vg){return bg($g,kg,jg,Vg)},y:Sl,Y:kl,Z:Cl,"%":Dl};return Ig.x=xg(Tg,Ig),Ig.X=xg(kg,Ig),Ig.c=xg(wg,Ig),Ng.x=xg(Tg,Ng),Ng.X=xg(kg,Ng),Ng.c=xg(wg,Ng),{format:function($g){var jg=xg($g+="",Ig);return jg.toString=function(){return $g},jg},parse:function($g){var jg=vg($g+="",_l);return jg.toString=function(){return $g},jg},utcFormat:function($g){var jg=xg($g+="",Ng);return jg.toString=function(){return $g},jg},utcParse:function($g){var jg=vg($g,hl);return jg.toString=function(){return $g},jg}}}function yl(fg,xg,vg){var bg=0>fg?"-":"",wg=(bg?-fg:fg)+"",Tg=wg.length;return bg+(Tg<vg?Array(vg-Tg+1).join(xg)+wg:wg)}function fl(fg){return fg.replace(A_,"\\$&")}function xl(fg){return new RegExp("^(?:"+fg.map(fl).join("|")+")","i")}function vl(fg){for(var xg={},vg=-1,bg=fg.length;++vg<bg;)xg[fg[vg].toLowerCase()]=vg;return xg}function bl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+1));return bg?(fg.w=+bg[0],vg+bg[0].length):-1}function wl(fg,xg,vg){var bg=M_.exec(xg.slice(vg));return bg?(fg.U=+bg[0],vg+bg[0].length):-1}function Tl(fg,xg,vg){var bg=M_.exec(xg.slice(vg));return bg?(fg.W=+bg[0],vg+bg[0].length):-1}function kl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+4));return bg?(fg.y=+bg[0],vg+bg[0].length):-1}function Sl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.y=+bg[0]+(68<+bg[0]?1900:2e3),vg+bg[0].length):-1}function Cl(fg,xg,vg){var bg=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(xg.slice(vg,vg+6));return bg?(fg.Z=bg[1]?0:-(bg[2]+(bg[3]||"00")),vg+bg[0].length):-1}function zl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.m=bg[0]-1,vg+bg[0].length):-1}function Ml(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.d=+bg[0],vg+bg[0].length):-1}function Ul(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+3));return bg?(fg.m=0,fg.d=+bg[0],vg+bg[0].length):-1}function Al(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.H=+bg[0],vg+bg[0].length):-1}function Yl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.M=+bg[0],vg+bg[0].length):-1}function El(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+2));return bg?(fg.S=+bg[0],vg+bg[0].length):-1}function Pl(fg,xg,vg){var bg=M_.exec(xg.slice(vg,vg+3));return bg?(fg.L=+bg[0],vg+bg[0].length):-1}function Dl(fg,xg,vg){var bg=U_.exec(xg.slice(vg,vg+1));return bg?vg+bg[0].length:-1}function Fl(fg,xg){return yl(fg.getDate(),xg,2)}function Ll(fg,xg){return yl(fg.getHours(),xg,2)}function Hl(fg,xg){return yl(fg.getHours()%12||12,xg,2)}function Xl(fg,xg){return yl(1+Qp.count(o_(fg),fg),xg,3)}function ql(fg,xg){return yl(fg.getMilliseconds(),xg,3)}function Il(fg,xg){return yl(fg.getMonth()+1,xg,2)}function Nl(fg,xg){return yl(fg.getMinutes(),xg,2)}function Ol(fg,xg){return yl(fg.getSeconds(),xg,2)}function $l(fg,xg){return yl(e_.count(o_(fg),fg),xg,2)}function jl(fg){return fg.getDay()}function Vl(fg,xg){return yl(t_.count(o_(fg),fg),xg,2)}function Bl(fg,xg){return yl(fg.getFullYear()%100,xg,2)}function Zl(fg,xg){return yl(fg.getFullYear()%1e4,xg,4)}function Wl(fg){var xg=fg.getTimezoneOffset();return(0<xg?"-":(xg*=-1,"+"))+yl(0|xg/60,"0",2)+yl(xg%60,"0",2)}function Rl(fg,xg){return yl(fg.getUTCDate(),xg,2)}function Gl(fg,xg){return yl(fg.getUTCHours(),xg,2)}function Jl(fg,xg){return yl(fg.getUTCHours()%12||12,xg,2)}function Kl(fg,xg){return yl(1+a_.count(r_(fg),fg),xg,3)}function Ql(fg,xg){return yl(fg.getUTCMilliseconds(),xg,3)}function es(fg,xg){return yl(fg.getUTCMonth()+1,xg,2)}function ts(fg,xg){return yl(fg.getUTCMinutes(),xg,2)}function ns(fg,xg){return yl(fg.getUTCSeconds(),xg,2)}function os(fg,xg){return yl(i_.count(r_(fg),fg),xg,2)}function as(fg){return fg.getUTCDay()}function is(fg,xg){return yl(l_.count(r_(fg),fg),xg,2)}function ls(fg,xg){return yl(fg.getUTCFullYear()%100,xg,2)}function rs(fg,xg){return yl(fg.getUTCFullYear()%1e4,xg,4)}function ss(){return"+0000"}function ds(){return"%"}function cs(fg){return b_=gl(fg),La.timeFormat=b_.format,La.timeParse=b_.parse,w_=b_.utcFormat,T_=b_.utcParse,b_}function us(){}function ps(fg,xg){var vg=new us;if(fg instanceof us)fg.each(function(Sg,Cg){vg.set(Cg,Sg)});else if(Array.isArray(fg)){var bg,wg=-1,Tg=fg.length;if(null==xg)for(;++wg<Tg;)vg.set(wg,fg[wg]);else for(;++wg<Tg;)vg.set(xg(bg=fg[wg],wg,fg),bg)}else if(fg)for(var kg in fg)vg.set(kg,fg[kg]);return vg}function _s(){}function hs(fg,xg){var vg=Object.create(fg.prototype);for(var bg in xg)vg[bg]=xg[bg];return vg}function ms(){}function gs(fg){var xg;return fg=(fg+"").trim().toLowerCase(),(xg=q_.exec(fg))?(xg=parseInt(xg[1],16),new bs(15&xg>>8|240&xg>>4,15&xg>>4|240&xg,(15&xg)<<4|15&xg,1)):(xg=I_.exec(fg))?ys(parseInt(xg[1],16)):(xg=N_.exec(fg))?new bs(xg[1],xg[2],xg[3],1):(xg=O_.exec(fg))?new bs(255*xg[1]/100,255*xg[2]/100,255*xg[3]/100,1):(xg=$_.exec(fg))?fs(xg[1],xg[2],xg[3],xg[4]):(xg=j_.exec(fg))?fs(255*xg[1]/100,255*xg[2]/100,255*xg[3]/100,xg[4]):(xg=V_.exec(fg))?ws(xg[1],xg[2]/100,xg[3]/100,1):(xg=B_.exec(fg))?ws(xg[1],xg[2]/100,xg[3]/100,xg[4]):Z_.hasOwnProperty(fg)?ys(Z_[fg]):"transparent"===fg?new bs(NaN,NaN,NaN,0):null}function ys(fg){return new bs(255&fg>>16,255&fg>>8,255&fg,1)}function fs(fg,xg,vg,bg){return 0>=bg&&(fg=xg=vg=NaN),new bs(fg,xg,vg,bg)}function xs(fg){return fg instanceof ms||(fg=gs(fg)),fg?(fg=fg.rgb(),new bs(fg.r,fg.g,fg.b,fg.opacity)):new bs}function vs(fg,xg,vg,bg){return 1===arguments.length?xs(fg):new bs(fg,xg,vg,null==bg?1:bg)}function bs(fg,xg,vg,bg){this.r=+fg,this.g=+xg,this.b=+vg,this.opacity=+bg}function ws(fg,xg,vg,bg){return 0>=bg?fg=xg=vg=NaN:0>=vg||1<=vg?fg=xg=NaN:0>=xg&&(fg=NaN),new ks(fg,xg,vg,bg)}function Ts(fg){if(fg instanceof ks)return new ks(fg.h,fg.s,fg.l,fg.opacity);if(fg instanceof ms||(fg=gs(fg)),!fg)return new ks;if(fg instanceof ks)return fg;var xg=(fg=fg.rgb()).r/255,vg=fg.g/255,bg=fg.b/255,wg=Math.min(xg,vg,bg),Tg=Math.max(xg,vg,bg),kg=NaN,Sg=Tg-wg,Cg=(Tg+wg)/2;return Sg?(kg=xg===Tg?(vg-bg)/Sg+6*(vg<bg):vg===Tg?(bg-xg)/Sg+2:(xg-vg)/Sg+4,Sg/=.5>Cg?Tg+wg:2-Tg-wg,kg*=60):Sg=0<Cg&&1>Cg?0:kg,new ks(kg,Sg,Cg,fg.opacity)}function ks(fg,xg,vg,bg){this.h=+fg,this.s=+xg,this.l=+vg,this.opacity=+bg}function Ss(fg,xg,vg){return 255*(60>fg?xg+(vg-xg)*fg/60:180>fg?vg:240>fg?xg+(vg-xg)*(240-fg)/60:xg)}function Cs(fg){if(fg instanceof zs)return new zs(fg.l,fg.a,fg.b,fg.opacity);if(fg instanceof Ps){var xg=fg.h*W_;return new zs(fg.l,Math.cos(xg)*fg.c,Math.sin(xg)*fg.c,fg.opacity)}fg instanceof bs||(fg=xs(fg));var vg=Ys(fg.r),bg=Ys(fg.g),wg=Ys(fg.b),Tg=Ms((.4124564*vg+.3575761*bg+.1804375*wg)/G_),kg=Ms((.2126729*vg+.7151522*bg+.072175*wg)/J_);return new zs(116*kg-16,500*(Tg-kg),200*(kg-Ms((.0193339*vg+.119192*bg+.9503041*wg)/K_)),fg.opacity)}function zs(fg,xg,vg,bg){this.l=+fg,this.a=+xg,this.b=+vg,this.opacity=+bg}function Ms(fg){return fg>nh?Math.pow(fg,1/3):fg/th+Q_}function Us(fg){return fg>eh?fg*fg*fg:th*(fg-Q_)}function As(fg){return 255*(.0031308>=fg?12.92*fg:1.055*Math.pow(fg,1/2.4)-.055)}function Ys(fg){return .04045>=(fg/=255)?fg/12.92:Math.pow((fg+.055)/1.055,2.4)}function Es(fg){if(fg instanceof Ps)return new Ps(fg.h,fg.c,fg.l,fg.opacity);fg instanceof zs||(fg=Cs(fg));var xg=Math.atan2(fg.b,fg.a)*R_;return new Ps(0>xg?xg+360:xg,Math.sqrt(fg.a*fg.a+fg.b*fg.b),fg.l,fg.opacity)}function Ps(fg,xg,vg,bg){this.h=+fg,this.c=+xg,this.l=+vg,this.opacity=+bg}function Ds(fg){if(fg instanceof Ls)return new Ls(fg.h,fg.s,fg.l,fg.opacity);fg instanceof bs||(fg=xs(fg));var xg=fg.r/255,vg=fg.g/255,bg=fg.b/255,wg=(ch*bg+sh*xg-dh*vg)/(ch+sh-dh),Tg=bg-wg,kg=(rh*(vg-wg)-ih*Tg)/lh,Sg=Math.sqrt(kg*kg+Tg*Tg)/(rh*wg*(1-wg)),Cg=Sg?Math.atan2(kg,Tg)*R_-120:NaN;return new Ls(0>Cg?Cg+360:Cg,Sg,wg,fg.opacity)}function Fs(fg,xg,vg,bg){return 1===arguments.length?Ds(fg):new Ls(fg,xg,vg,null==bg?1:bg)}function Ls(fg,xg,vg,bg){this.h=+fg,this.s=+xg,this.l=+vg,this.opacity=+bg}function Hs(fg,xg){return function(vg){return fg+vg*xg}}function Xs(fg,xg,vg){return fg=Math.pow(fg,vg),xg=Math.pow(xg,vg)-fg,vg=1/vg,function(bg){return Math.pow(fg+bg*xg,vg)}}function qs(fg){return 1==(fg=+fg)?Is:function(xg,vg){return vg-xg?Xs(xg,vg,fg):mh(isNaN(xg)?vg:xg)}}function Is(fg,xg){var vg=xg-fg;return vg?Hs(fg,vg):mh(isNaN(fg)?xg:fg)}function Ns(fg){return function(){return fg}}function Os(fg){return function(xg){return fg(xg)+""}}function $s(fg,xg,vg,bg){function wg(zg){return zg.length?zg.pop()+" ":""}function Tg(zg,Mg,Ug,Ag,Yg,Eg){if(zg!==Ug||Mg!==Ag){var Pg=Yg.push("translate(",null,xg,null,vg);Eg.push({i:Pg-4,x:xh(zg,Ug)},{i:Pg-2,x:xh(Mg,Ag)})}else(Ug||Ag)&&Yg.push("translate("+Ug+xg+Ag+vg)}function kg(zg,Mg,Ug,Ag){zg===Mg?Mg&&Ug.push(wg(Ug)+"rotate("+Mg+bg):(180<zg-Mg?Mg+=360:180<Mg-zg&&(zg+=360),Ag.push({i:Ug.push(wg(Ug)+"rotate(",null,bg)-2,x:xh(zg,Mg)}))}function Sg(zg,Mg,Ug,Ag){zg===Mg?Mg&&Ug.push(wg(Ug)+"skewX("+Mg+bg):Ag.push({i:Ug.push(wg(Ug)+"skewX(",null,bg)-2,x:xh(zg,Mg)})}function Cg(zg,Mg,Ug,Ag,Yg,Eg){if(zg!==Ug||Mg!==Ag){var Pg=Yg.push(wg(Yg)+"scale(",null,",",null,")");Eg.push({i:Pg-4,x:xh(zg,Ug)},{i:Pg-2,x:xh(Mg,Ag)})}else 1===Ug&&1===Ag||Yg.push(wg(Yg)+"scale("+Ug+","+Ag+")")}return function(zg,Mg){var Ug=[],Ag=[];return zg=fg(zg),Mg=fg(Mg),Tg(zg.translateX,zg.translateY,Mg.translateX,Mg.translateY,Ug,Ag),kg(zg.rotate,Mg.rotate,Ug,Ag),Sg(zg.skewX,Mg.skewX,Ug,Ag),Cg(zg.scaleX,zg.scaleY,Mg.scaleX,Mg.scaleY,Ug,Ag),zg=Mg=null,function(Yg){for(var Eg,Pg=-1,Dg=Ag.length;++Pg<Dg;)Ug[(Eg=Ag[Pg]).i]=Eg.x(Yg);return Ug.join("")}}}function js(fg){return((fg=Math.exp(fg))+1/fg)/2}function Vs(fg){return((fg=Math.exp(fg))-1/fg)/2}function Bs(fg){return((fg=Math.exp(2*fg))-1)/(fg+1)}function Zs(fg){return function xg(vg){function bg(wg,Tg){var kg=fg((wg=Fs(wg)).h,(Tg=Fs(Tg)).h),Sg=Is(wg.s,Tg.s),Cg=Is(wg.l,Tg.l),zg=Is(wg.opacity,Tg.opacity);return function(Mg){return wg.h=kg(Mg),wg.s=Sg(Mg),wg.l=Cg(Math.pow(Mg,vg)),wg.opacity=zg(Mg),wg+""}}return vg=+vg,bg.gamma=xg,bg}(1)}function Ws(fg,xg){return(xg-=fg=+fg)?function(vg){return(vg-fg)/xg}:Dh(xg)}function Rs(fg){return function(xg,vg){var bg=fg(xg=+xg,vg=+vg);return function(wg){return wg<=xg?0:wg>=vg?1:bg(wg)}}}function Gs(fg){return function(xg,vg){var bg=fg(xg=+xg,vg=+vg);return function(wg){return 0>=wg?xg:1<=wg?vg:bg(wg)}}}function Js(fg,xg,vg,bg){var wg=fg[0],Tg=fg[1],kg=xg[0],Sg=xg[1];return Tg<wg?(wg=vg(Tg,wg),kg=bg(Sg,kg)):(wg=vg(wg,Tg),kg=bg(kg,Sg)),function(Cg){return kg(wg(Cg))}}function Ks(fg,xg,vg,bg){var wg=Math.min(fg.length,xg.length)-1,Tg=Array(wg),kg=Array(wg),Sg=-1;for(fg[wg]<fg[0]&&(fg=fg.slice().reverse(),xg=xg.slice().reverse());++Sg<wg;)Tg[Sg]=vg(fg[Sg],fg[Sg+1]),kg[Sg]=bg(xg[Sg],xg[Sg+1]);return function(Cg){var zg=Yp(fg,Cg,1,wg)-1;return kg[zg](Tg[zg](Cg))}}function Qs(fg,xg){return xg.domain(fg.domain()).range(fg.range()).interpolate(fg.interpolate()).clamp(fg.clamp())}function ed(fg,xg){function vg(){return wg=2<Math.min(Sg.length,Cg.length)?Ks:Js,Tg=kg=null,bg}function bg(Ug){return(Tg||(Tg=wg(Sg,Cg,Mg?Rs(fg):fg,zg)))(+Ug)}var wg,Tg,kg,Sg=Lh,Cg=Lh,zg=kh,Mg=!1;return bg.invert=function(Ug){return(kg||(kg=wg(Cg,Sg,Ws,Mg?Gs(xg):xg)))(+Ug)},bg.domain=function(Ug){return arguments.length?(Sg=P_.call(Ug,Fh),vg()):Sg.slice()},bg.range=function(Ug){return arguments.length?(Cg=D_.call(Ug),vg()):Cg.slice()},bg.rangeRound=function(Ug){return Cg=D_.call(Ug),zg=Sh,vg()},bg.clamp=function(Ug){return arguments.length?(Mg=!!Ug,vg()):Mg},bg.interpolate=function(Ug){return arguments.length?(zg=Ug,vg()):zg},vg()}function td(fg){var xg=fg.domain;return fg.ticks=function(vg){var bg=xg();return Fp(bg[0],bg[bg.length-1],null==vg?10:vg)},fg.tickFormat=function(vg,bg){return Hh(xg(),vg,bg)},fg.nice=function(vg){null==vg&&(vg=10);var bg,wg=xg(),Tg=0,kg=wg.length-1,Sg=wg[Tg],Cg=wg[kg];return Cg<Sg&&(bg=Sg,Sg=Cg,Cg=bg,bg=Tg,Tg=kg,kg=bg),0<(bg=Xa(Sg,Cg,vg))?bg=Xa(Sg=Math.floor(Sg/bg)*bg,Cg=Math.ceil(Cg/bg)*bg,vg):0>bg&&(bg=Xa(Sg=Math.ceil(Sg*bg)/bg,Cg=Math.floor(Cg*bg)/bg,vg)),0<bg?(wg[Tg]=Math.floor(Sg/bg)*bg,wg[kg]=Math.ceil(Cg/bg)*bg,xg(wg)):0>bg&&(wg[Tg]=Math.ceil(Sg*bg)/bg,wg[kg]=Math.floor(Cg*bg)/bg,xg(wg)),fg},fg}function nd(){var fg=ed(Ws,xh);return fg.copy=function(){return Qs(fg,nd())},td(fg)}function od(fg,xg){return(xg=Math.log(xg/fg))?function(vg){return Math.log(vg/fg)/xg}:Dh(xg)}function ad(fg,xg){return 0>fg?function(vg){return-Math.pow(-xg,vg)*Math.pow(-fg,1-vg)}:function(vg){return Math.pow(xg,vg)*Math.pow(fg,1-vg)}}function id(fg){return isFinite(fg)?+("1e"+fg):0>fg?0:fg}function ld(fg){return 10===fg?id:fg===Math.E?Math.exp:function(xg){return Math.pow(fg,xg)}}function rd(fg){return fg===Math.E?Math.log:10===fg&&Math.log10||2===fg&&Math.log2||(fg=Math.log(fg),function(xg){return Math.log(xg)/fg})}function sd(fg){return function(xg){return-fg(-xg)}}function dd(){function fg(){return wg=rd(bg),Tg=ld(bg),0>vg()[0]&&(wg=sd(wg),Tg=sd(Tg)),xg}var xg=ed(od,ad).domain([1,10]),vg=xg.domain,bg=10,wg=rd(10),Tg=ld(10);return xg.base=function(kg){return arguments.length?(bg=+kg,fg()):bg},xg.domain=function(kg){return arguments.length?(vg(kg),fg()):vg()},xg.ticks=function(kg){var Sg,Cg=vg(),zg=Cg[0],Mg=Cg[Cg.length-1];(Sg=Mg<zg)&&(Eg=zg,zg=Mg,Mg=Eg);var Ug,Ag,Yg,Eg=wg(zg),Pg=wg(Mg),Dg=null==kg?10:+kg,Fg=[];if(!(!(bg%1)&&Pg-Eg<Dg))Fg=Fp(Eg,Pg,Math.min(Pg-Eg,Dg)).map(Tg);else if(Eg=Math.round(Eg)-1,Pg=Math.round(Pg)+1,0<zg){for(;Eg<Pg;++Eg)for(Ag=1,Ug=Tg(Eg);Ag<bg;++Ag)if(!((Yg=Ug*Ag)<zg)){if(Yg>Mg)break;Fg.push(Yg)}}else for(;Eg<Pg;++Eg)for(Ag=bg-1,Ug=Tg(Eg);1<=Ag;--Ag)if(!((Yg=Ug*Ag)<zg)){if(Yg>Mg)break;Fg.push(Yg)}return Sg?Fg.reverse():Fg},xg.tickFormat=function(kg,Sg){if(null==Sg&&(Sg=10===bg?".0e":","),"function"!=typeof Sg&&(Sg=La.format(Sg)),kg===1/0)return Sg;null==kg&&(kg=10);var Cg=Math.max(1,bg*kg/xg.ticks().length);return function(zg){var Mg=zg/Tg(Math.round(wg(zg)));return Mg*bg<bg-.5&&(Mg*=bg),Mg<=Cg?Sg(zg):""}},xg.nice=function(){return vg(Xh(vg(),{floor:function(kg){return Tg(Math.floor(wg(kg)))},ceil:function(kg){return Tg(Math.ceil(wg(kg)))}}))},xg.copy=function(){return Qs(xg,dd().base(bg))},xg}function cd(fg,xg){return 0>fg?-Math.pow(-fg,xg):Math.pow(fg,xg)}function ud(){var fg=1,xg=ed(function(bg,wg){return(wg=cd(wg,fg)-(bg=cd(bg,fg)))?function(Tg){return(cd(Tg,fg)-bg)/wg}:Dh(wg)},function(bg,wg){return wg=cd(wg,fg)-(bg=cd(bg,fg)),function(Tg){return cd(bg+wg*Tg,1/fg)}}),vg=xg.domain;return xg.exponent=function(bg){return arguments.length?(fg=+bg,vg(vg())):fg},xg.copy=function(){return Qs(xg,ud().exponent(fg))},td(xg)}function pd(fg){return new Date(fg)}function _d(fg){return fg instanceof Date?+fg:+new Date(+fg)}function hd(fg,xg,vg,bg,wg,Tg,kg,Sg,Cg){function zg(Ng){return(kg(Ng)<Ng?Eg:Tg(Ng)<Ng?Pg:wg(Ng)<Ng?Dg:bg(Ng)<Ng?Fg:xg(Ng)<Ng?vg(Ng)<Ng?Lg:Hg:fg(Ng)<Ng?Xg:qg)(Ng)}function Mg(Ng,Og,$g,jg){if(null==Ng&&(Ng=10),"number"==typeof Ng){var Vg=Math.abs($g-Og)/Ng,Bg=Ap(function(Zg){return Zg[2]}).right(Ig,Vg);Bg===Ig.length?(jg=qa(Og/Vh,$g/Vh,Ng),Ng=fg):Bg?(jg=(Bg=Ig[Vg/Ig[Bg-1][2]<Ig[Bg][2]/Vg?Bg-1:Bg])[1],Ng=Bg[0]):(jg=qa(Og,$g,Ng),Ng=Sg)}return null==jg?Ng:Ng.every(jg)}var Ug=ed(Ws,xh),Ag=Ug.invert,Yg=Ug.domain,Eg=Cg(".%L"),Pg=Cg(":%S"),Dg=Cg("%I:%M"),Fg=Cg("%I %p"),Lg=Cg("%a %d"),Hg=Cg("%b %d"),Xg=Cg("%B"),qg=Cg("%Y"),Ig=[[kg,1,qh],[kg,5,5*qh],[kg,15,15*qh],[kg,30,30*qh],[Tg,1,Ih],[Tg,5,5*Ih],[Tg,15,15*Ih],[Tg,30,30*Ih],[wg,1,Nh],[wg,3,3*Nh],[wg,6,6*Nh],[wg,12,12*Nh],[bg,1,Oh],[bg,2,2*Oh],[vg,1,$h],[xg,1,jh],[xg,3,3*jh],[fg,1,Vh]];return Ug.invert=function(Ng){return new Date(Ag(Ng))},Ug.domain=function(Ng){return arguments.length?Yg(P_.call(Ng,_d)):Yg().map(pd)},Ug.ticks=function(Ng,Og){var $g,jg=Yg(),Vg=jg[0],Bg=jg[jg.length-1],Zg=Bg<Vg;return Zg&&($g=Vg,Vg=Bg,Bg=$g),$g=Mg(Ng,Vg,Bg,Og),$g=$g?$g.range(Vg,Bg+1):[],Zg?$g.reverse():$g},Ug.tickFormat=function(Ng,Og){return null==Og?zg:Cg(Og)},Ug.nice=function(Ng,Og){var $g=Yg();return(Ng=Mg(Ng,$g[0],$g[$g.length-1],Og))?Yg(Xh($g,Ng)):Ug},Ug.copy=function(){return Qs(Ug,hd(fg,xg,vg,bg,wg,Tg,kg,Sg,Cg))},Ug}function md(fg){return"translate("+(fg+.5)+",0)"}function gd(fg){return"translate(0,"+(fg+.5)+")"}function yd(fg){var xg=Math.max(0,fg.bandwidth()-1)/2;return fg.round()&&(xg=Math.round(xg)),function(vg){return fg(vg)+xg}}function fd(){return!this.__axis}function xd(fg,xg){function vg(Ag){var Yg=null==wg?xg.ticks?xg.ticks.apply(xg,bg):xg.domain():wg,Eg=null==Tg?xg.tickFormat?xg.tickFormat.apply(xg,bg):Wh:Tg,Pg=Math.max(kg,0)+Cg,Dg=xg.range(),Fg=Dg[0]+.5,Lg=Dg[Dg.length-1]+.5,Hg=(xg.bandwidth?yd:Wh)(xg.copy()),Xg=Ag.selection?Ag.selection():Ag,qg=Xg.selectAll(".domain").data([null]),Ig=Xg.selectAll(".tick").data(Yg,xg).order(),Ng=Ig.exit(),Og=Ig.enter().append("g").attr("class","tick"),$g=Ig.select("line"),jg=Ig.select("text");qg=qg.merge(qg.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Ig=Ig.merge(Og),$g=$g.merge(Og.append("line").attr("stroke","#000").attr(Mg+"2",zg*kg)),jg=jg.merge(Og.append("text").attr("fill","#000").attr(Mg,zg*Pg).attr("dy",fg===Rh?"0em":fg===Jh?"0.71em":"0.32em")),Ag!==Xg&&(qg=qg.transition(Ag),Ig=Ig.transition(Ag),$g=$g.transition(Ag),jg=jg.transition(Ag),Ng=Ng.transition(Ag).attr("opacity",Qh).attr("transform",function(Vg){return isFinite(Vg=Hg(Vg))?Ug(Vg):this.getAttribute("transform")}),Og.attr("opacity",Qh).attr("transform",function(Vg){var Bg=this.parentNode.__axis;return Ug(Bg&&isFinite(Bg=Bg(Vg))?Bg:Hg(Vg))})),Ng.remove(),qg.attr("d",fg===Kh||fg==Gh?"M"+zg*Sg+","+Fg+"H0.5V"+Lg+"H"+zg*Sg:"M"+Fg+","+zg*Sg+"V0.5H"+Lg+"V"+zg*Sg),Ig.attr("opacity",1).attr("transform",function(Vg){return Ug(Hg(Vg))}),$g.attr(Mg+"2",zg*kg),jg.attr(Mg,zg*Pg).text(Eg),Xg.filter(fd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",fg===Gh?"start":fg===Kh?"end":"middle"),Xg.each(function(){this.__axis=Hg})}var bg=[],wg=null,Tg=null,kg=6,Sg=6,Cg=3,zg=fg===Rh||fg===Kh?-1:1,Mg=fg===Kh||fg===Gh?"x":"y",Ug=fg===Rh||fg===Jh?md:gd;return vg.scale=function(Ag){return arguments.length?(xg=Ag,vg):xg},vg.ticks=function(){return bg=Zh.call(arguments),vg},vg.tickArguments=function(Ag){return arguments.length?(bg=null==Ag?[]:Zh.call(Ag),vg):bg.slice()},vg.tickValues=function(Ag){return arguments.length?(wg=null==Ag?null:Zh.call(Ag),vg):wg&&wg.slice()},vg.tickFormat=function(Ag){return arguments.length?(Tg=Ag,vg):Tg},vg.tickSize=function(Ag){return arguments.length?(kg=Sg=+Ag,vg):kg},vg.tickSizeInner=function(Ag){return arguments.length?(kg=+Ag,vg):kg},vg.tickSizeOuter=function(Ag){return arguments.length?(Sg=+Ag,vg):Sg},vg.tickPadding=function(Ag){return arguments.length?(Cg=+Ag,vg):Cg},vg}function vd(){for(var fg,xg=0,vg=arguments.length,bg={};xg<vg;++xg){if(!(fg=arguments[xg]+"")||fg in bg)throw new Error("illegal type: "+fg);bg[fg]=[]}return new bd(bg)}function bd(fg){this._=fg}function wd(fg,xg){return fg.trim().split(/^|\s+/).map(function(vg){var bg="",wg=vg.indexOf(".");if(0<=wg&&(bg=vg.slice(wg+1),vg=vg.slice(0,wg)),vg&&!xg.hasOwnProperty(vg))throw new Error("unknown type: "+vg);return{type:vg,name:bg}})}function Td(fg,xg){for(var vg,bg=0,wg=fg.length;bg<wg;++bg)if((vg=fg[bg]).name===xg)return vg.value}function kd(fg,xg,vg){for(var bg=0,wg=fg.length;bg<wg;++bg)if(fg[bg].name===xg){fg[bg]=em,fg=fg.slice(0,bg).concat(fg.slice(bg+1));break}return null!=vg&&fg.push({name:xg,value:vg}),fg}function Sd(fg){return function(){var xg=this.ownerDocument,vg=this.namespaceURI;return vg===tm&&xg.documentElement.namespaceURI===tm?xg.createElement(fg):xg.createElementNS(vg,fg)}}function Cd(fg){return function(){return this.ownerDocument.createElementNS(fg.space,fg.local)}}function zd(fg,xg,vg){return fg=Md(fg,xg,vg),function(bg){var wg=bg.relatedTarget;wg&&(wg===this||8&wg.compareDocumentPosition(this))||fg.call(this,bg)}}function Md(fg,xg,vg){return function(bg){var wg=La.event;La.event=bg;try{fg.call(this,this.__data__,xg,vg)}finally{La.event=wg}}}function Ud(fg){return fg.trim().split(/^|\s+/).map(function(xg){var vg="",bg=xg.indexOf(".");return 0<=bg&&(vg=xg.slice(bg+1),xg=xg.slice(0,bg)),{type:xg,name:vg}})}function Ad(fg){return function(){var xg=this.__on;if(xg){for(var vg,bg=0,wg=-1,Tg=xg.length;bg<Tg;++bg)vg=xg[bg],fg.type&&vg.type!==fg.type||vg.name!==fg.name?xg[++wg]=vg:this.removeEventListener(vg.type,vg.listener,vg.capture);++wg?xg.length=wg:delete this.__on}}}function Yd(fg,xg,vg){var bg=dm.hasOwnProperty(fg.type)?zd:Md;return function(wg,Tg,kg){var Sg,Cg=this.__on,zg=bg(xg,Tg,kg);if(Cg)for(var Mg=0,Ug=Cg.length;Mg<Ug;++Mg)if((Sg=Cg[Mg]).type===fg.type&&Sg.name===fg.name)return this.removeEventListener(Sg.type,Sg.listener,Sg.capture),this.addEventListener(Sg.type,Sg.listener=zg,Sg.capture=vg),void(Sg.value=xg);this.addEventListener(fg.type,zg,vg),Sg={type:fg.type,name:fg.name,value:xg,listener:zg,capture:vg},Cg?Cg.push(Sg):this.__on=[Sg]}}function Ed(fg,xg,vg,bg){var wg=La.event;fg.sourceEvent=La.event,La.event=fg;try{return xg.apply(vg,bg)}finally{La.event=wg}}function Pd(){}function Dd(){return[]}function Fd(fg,xg){this.ownerDocument=fg.ownerDocument,this.namespaceURI=fg.namespaceURI,this._next=null,this._parent=fg,this.__data__=xg}function Ld(fg,xg,vg,bg,wg,Tg){for(var kg,Sg=0,Cg=xg.length,zg=Tg.length;Sg<zg;++Sg)(kg=xg[Sg])?(kg.__data__=Tg[Sg],bg[Sg]=kg):vg[Sg]=new Fd(fg,Tg[Sg]);for(;Sg<Cg;++Sg)(kg=xg[Sg])&&(wg[Sg]=kg)}function Hd(fg,xg,vg,bg,wg,Tg,kg){var Sg,Cg,zg,Mg={},Ug=xg.length,Ag=Tg.length,Yg=Array(Ug);for(Sg=0;Sg<Ug;++Sg)(Cg=xg[Sg])&&(Yg[Sg]=zg=ym+kg.call(Cg,Cg.__data__,Sg,xg),zg in Mg?wg[Sg]=Cg:Mg[zg]=Cg);for(Sg=0;Sg<Ag;++Sg)(Cg=Mg[zg=ym+kg.call(fg,Tg[Sg],Sg,Tg)])?(bg[Sg]=Cg,Cg.__data__=Tg[Sg],Mg[zg]=null):vg[Sg]=new Fd(fg,Tg[Sg]);for(Sg=0;Sg<Ug;++Sg)(Cg=xg[Sg])&&Mg[Yg[Sg]]===Cg&&(wg[Sg]=Cg)}function Xd(fg,xg){return fg<xg?-1:fg>xg?1:fg>=xg?0:NaN}function qd(fg){return function(){this.removeAttribute(fg)}}function Id(fg){return function(){this.removeAttributeNS(fg.space,fg.local)}}function Nd(fg,xg){return function(){this.setAttribute(fg,xg)}}function Od(fg,xg){return function(){this.setAttributeNS(fg.space,fg.local,xg)}}function $d(fg,xg){return function(){var vg=xg.apply(this,arguments);null==vg?this.removeAttribute(fg):this.setAttribute(fg,vg)}}function jd(fg,xg){return function(){var vg=xg.apply(this,arguments);null==vg?this.removeAttributeNS(fg.space,fg.local):this.setAttributeNS(fg.space,fg.local,vg)}}function Vd(fg){return function(){this.style.removeProperty(fg)}}function Bd(fg,xg,vg){return function(){this.style.setProperty(fg,xg,vg)}}function Zd(fg,xg,vg){return function(){var bg=xg.apply(this,arguments);null==bg?this.style.removeProperty(fg):this.style.setProperty(fg,bg,vg)}}function Wd(fg,xg){return fg.style.getPropertyValue(xg)||fm(fg).getComputedStyle(fg,null).getPropertyValue(xg)}function Rd(fg){return function(){delete this[fg]}}function Gd(fg,xg){return function(){this[fg]=xg}}function Jd(fg,xg){return function(){var vg=xg.apply(this,arguments);null==vg?delete this[fg]:this[fg]=vg}}function Kd(fg){return fg.trim().split(/^|\s+/)}function Qd(fg){return fg.classList||new ec(fg)}function ec(fg){this._node=fg,this._names=Kd(fg.getAttribute("class")||"")}function tc(fg,xg){for(var vg=Qd(fg),bg=-1,wg=xg.length;++bg<wg;)vg.add(xg[bg])}function nc(fg,xg){for(var vg=Qd(fg),bg=-1,wg=xg.length;++bg<wg;)vg.remove(xg[bg])}function oc(fg){return function(){tc(this,fg)}}function ac(fg){return function(){nc(this,fg)}}function ic(fg,xg){return function(){(xg.apply(this,arguments)?tc:nc)(this,fg)}}function lc(){this.textContent=""}function rc(fg){return function(){this.textContent=fg}}function sc(fg){return function(){var xg=fg.apply(this,arguments);this.textContent=null==xg?"":xg}}function dc(){this.innerHTML=""}function cc(fg){return function(){this.innerHTML=fg}}function uc(fg){return function(){var xg=fg.apply(this,arguments);this.innerHTML=null==xg?"":xg}}function pc(){this.nextSibling&&this.parentNode.appendChild(this)}function _c(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hc(){return null}function mc(){var fg=this.parentNode;fg&&fg.removeChild(this)}function gc(fg,xg,vg){var bg=fm(fg),wg=bg.CustomEvent;"function"==typeof wg?wg=new wg(xg,vg):(wg=bg.document.createEvent("Event"),vg?(wg.initEvent(xg,vg.bubbles,vg.cancelable),wg.detail=vg.detail):wg.initEvent(xg,!1,!1)),fg.dispatchEvent(wg)}function yc(fg,xg){return function(){return gc(this,fg,xg)}}function fc(fg,xg){return function(){return gc(this,fg,xg.apply(this,arguments))}}function xc(fg,xg){this._groups=fg,this._parents=xg}function vc(){return new xc([[document.documentElement]],xm)}function bc(){La.event.stopImmediatePropagation()}function wc(fg,xg){var vg=fg.document.documentElement,bg=vm(fg).on("dragstart.drag",null);xg&&(bg.on("click.drag",wm,!0),setTimeout(function(){bg.on("click.drag",null)},0)),"onselectstart"in vg?bg.on("selectstart.drag",null):(vg.style.MozUserSelect=vg.__noselect,delete vg.__noselect)}function Tc(fg,xg,vg,bg,wg,Tg,kg,Sg,Cg,zg){this.target=fg,this.type=xg,this.subject=vg,this.identifier=bg,this.active=wg,this.x=Tg,this.y=kg,this.dx=Sg,this.dy=Cg,this._=zg}function kc(){return!La.event.button}function Sc(){return this.parentNode}function Cc(fg){return null==fg?{x:La.event.x,y:La.event.y}:fg}function zc(){return Em||(Fm(Mc),Em=Dm.now()+Pm)}function Mc(){Em=0}function Uc(){this._call=this._time=this._next=null}function Ac(fg,xg,vg){var bg=new Uc;return bg.restart(fg,xg,vg),bg}function Yc(){zc(),++zm;for(var fg,xg=Sm;xg;)0<=(fg=Em-xg._time)&&xg._call.call(null,fg),xg=xg._next;--zm}function Ec(){Em=(Ym=Dm.now())+Pm,zm=Mm=0;try{Yc()}finally{zm=0,Dc(),Em=0}}function Pc(){var fg=Dm.now(),xg=fg-Ym;xg>Am&&(Pm-=xg,Ym=fg)}function Dc(){for(var fg,xg,vg=Sm,bg=1/0;vg;)vg._call?(bg>vg._time&&(bg=vg._time),fg=vg,vg=vg._next):(xg=vg._next,vg._next=null,vg=fg?fg._next=xg:Sm=xg);Cm=fg,Fc(bg)}function Fc(fg){if(!zm){Mm&&(Mm=clearTimeout(Mm));var xg=fg-Em;24<xg?(fg<1/0&&(Mm=setTimeout(Ec,xg)),Um&&(Um=clearInterval(Um))):(Um||(Ym=Em,Um=setInterval(Pc,Am)),zm=1,Fm(Ec))}}function Lc(fg,xg){var vg=fg.__transition;if(!vg||!(vg=vg[xg])||vg.state>qm)throw new Error("too late");return vg}function Hc(fg,xg){var vg=fg.__transition;if(!vg||!(vg=vg[xg])||vg.state>Nm)throw new Error("too late");return vg}function Xc(fg,xg){var vg=fg.__transition;if(!vg||!(vg=vg[xg]))throw new Error("too late");return vg}function qc(fg,xg,vg){function bg(Cg){var zg,Mg,Ug,Ag;if(vg.state!==Im)return Tg();for(zg in Sg)if((Ag=Sg[zg]).name===vg.name){if(Ag.state===Om)return Lm(bg);Ag.state===$m?(Ag.state=Vm,Ag.timer.stop(),Ag.on.call("interrupt",fg,fg.__data__,Ag.index,Ag.group),delete Sg[zg]):+zg<xg&&(Ag.state=Vm,Ag.timer.stop(),delete Sg[zg])}if(Lm(function(){vg.state===Om&&(vg.state=$m,vg.timer.restart(wg,vg.delay,vg.time),wg(Cg))}),vg.state=Nm,vg.on.call("start",fg,fg.__data__,vg.index,vg.group),vg.state===Nm){for(vg.state=Om,kg=Array(Ug=vg.tween.length),zg=0,Mg=-1;zg<Ug;++zg)(Ag=vg.tween[zg].value.call(fg,fg.__data__,vg.index,vg.group))&&(kg[++Mg]=Ag);kg.length=Mg+1}}function wg(Cg){for(var zg=Cg<vg.duration?vg.ease.call(null,Cg/vg.duration):(vg.timer.restart(Tg),vg.state=jm,1),Mg=-1,Ug=kg.length;++Mg<Ug;)kg[Mg].call(null,zg);vg.state===jm&&(vg.on.call("end",fg,fg.__data__,vg.index,vg.group),Tg())}function Tg(){for(var Cg in vg.state=Vm,vg.timer.stop(),delete Sg[xg],Sg)return;delete fg.__transition}var kg,Sg=fg.__transition;Sg[xg]=vg,vg.timer=Ac(function(Cg){vg.state=Im,vg.timer.restart(bg,vg.delay,vg.time),vg.delay<=Cg&&bg(Cg-vg.delay)},0,vg.time)}function Ic(fg,xg){var vg,bg;return function(){var wg=Hc(this,fg),Tg=wg.tween;if(Tg!==vg)for(var kg=0,Sg=(bg=vg=Tg).length;kg<Sg;++kg)if(bg[kg].name===xg){(bg=bg.slice()).splice(kg,1);break}wg.tween=bg}}function Nc(fg,xg,vg){var bg,wg;if("function"!=typeof vg)throw new Error;return function(){var Tg=Hc(this,fg),kg=Tg.tween;if(kg!==bg){wg=(bg=kg).slice();for(var Sg={name:xg,value:vg},Cg=0,zg=wg.length;Cg<zg;++Cg)if(wg[Cg].name===xg){wg[Cg]=Sg;break}Cg===zg&&wg.push(Sg)}Tg.tween=wg}}function Oc(fg,xg,vg){var bg=fg._id;return fg.each(function(){var wg=Hc(this,bg);(wg.value||(wg.value={}))[xg]=vg.apply(this,arguments)}),function(wg){return Xc(wg,bg).value[xg]}}function $c(fg){return function(){this.removeAttribute(fg)}}function jc(fg){return function(){this.removeAttributeNS(fg.space,fg.local)}}function Vc(fg,xg,vg){var bg,wg;return function(){var Tg=this.getAttribute(fg);return Tg===vg?null:Tg===bg?wg:wg=xg(bg=Tg,vg)}}function Bc(fg,xg,vg){var bg,wg;return function(){var Tg=this.getAttributeNS(fg.space,fg.local);return Tg===vg?null:Tg===bg?wg:wg=xg(bg=Tg,vg)}}function Zc(fg,xg,vg){var bg,wg,Tg;return function(){var kg,Sg=vg(this);{if(null!=Sg)return(kg=this.getAttribute(fg))===Sg?null:kg===bg&&Sg===wg?Tg:Tg=xg(bg=kg,wg=Sg);this.removeAttribute(fg)}}}function Wc(fg,xg,vg){var bg,wg,Tg;return function(){var kg,Sg=vg(this);{if(null!=Sg)return(kg=this.getAttributeNS(fg.space,fg.local))===Sg?null:kg===bg&&Sg===wg?Tg:Tg=xg(bg=kg,wg=Sg);this.removeAttributeNS(fg.space,fg.local)}}}function Rc(fg,xg){function vg(){var bg=this,wg=xg.apply(bg,arguments);return wg&&function(Tg){bg.setAttributeNS(fg.space,fg.local,wg(Tg))}}return vg._value=xg,vg}function Gc(fg,xg){function vg(){var bg=this,wg=xg.apply(bg,arguments);return wg&&function(Tg){bg.setAttribute(fg,wg(Tg))}}return vg._value=xg,vg}function Jc(fg,xg){return function(){Lc(this,fg).delay=+xg.apply(this,arguments)}}function Kc(fg,xg){return xg=+xg,function(){Lc(this,fg).delay=xg}}function Qc(fg,xg){return function(){Hc(this,fg).duration=+xg.apply(this,arguments)}}function ep(fg,xg){return xg=+xg,function(){Hc(this,fg).duration=xg}}function tp(fg,xg){if("function"!=typeof xg)throw new Error;return function(){Hc(this,fg).ease=xg}}function np(fg){return(fg+"").trim().split(/^|\s+/).every(function(xg){var vg=xg.indexOf(".");return 0<=vg&&(xg=xg.slice(0,vg)),!xg||"start"===xg})}function op(fg,xg,vg){var bg,wg,Tg=np(xg)?Lc:Hc;return function(){var kg=Tg(this,fg),Sg=kg.on;Sg!==bg&&(wg=(bg=Sg).copy()).on(xg,vg),kg.on=wg}}function ap(fg){return function(){var xg=this.parentNode;for(var vg in this.__transition)if(+vg!==fg)return;xg&&xg.removeChild(this)}}function ip(fg,xg){var vg,bg,wg;return function(){var Tg=Wd(this,fg),kg=(this.style.removeProperty(fg),Wd(this,fg));return Tg===kg?null:Tg===vg&&kg===bg?wg:wg=xg(vg=Tg,bg=kg)}}function lp(fg){return function(){this.style.removeProperty(fg)}}function rp(fg,xg,vg){var bg,wg;return function(){var Tg=Wd(this,fg);return Tg===vg?null:Tg===bg?wg:wg=xg(bg=Tg,vg)}}function sp(fg,xg,vg){var bg,wg,Tg;return function(){var kg=Wd(this,fg),Sg=vg(this);return null==Sg&&(this.style.removeProperty(fg),Sg=Wd(this,fg)),kg===Sg?null:kg===bg&&Sg===wg?Tg:Tg=xg(bg=kg,wg=Sg)}}function dp(fg,xg,vg){function bg(){var wg=this,Tg=xg.apply(wg,arguments);return Tg&&function(kg){wg.style.setProperty(fg,Tg(kg),vg)}}return bg._value=xg,bg}function cp(fg){return function(){this.textContent=fg}}function up(fg){return function(){var xg=fg(this);this.textContent=null==xg?"":xg}}function pp(fg,xg,vg,bg){this._groups=fg,this._parents=xg,this._name=vg,this._id=bg}function _p(){return++Gm}function hp(fg,xg){for(var vg;!(vg=fg.__transition)||!(vg=vg[xg]);)if(!(fg=fg.parentNode))return Qm.time=zc(),Qm;return vg}function mp(fg,xg,vg){this.target=fg,this.type=xg,this.transform=vg}function gp(fg,xg,vg){this.k=fg,this.x=xg,this.y=vg}function yp(fg){return fg.__zoom||tg}function fp(){La.event.stopImmediatePropagation()}function xp(){return!La.event.button}function vp(){var fg,xg,vg=this;return vg instanceof SVGElement?(fg=(vg=vg.ownerSVGElement||vg).width.baseVal.value,xg=vg.height.baseVal.value):(fg=vg.clientWidth,xg=vg.clientHeight),[[0,0],[fg,xg]]}function bp(){return this.__zoom||tg}function wp(){La.event.stopImmediatePropagation()}function Tp(fg){return{type:fg}}function kp(){return!La.event.button}function Sp(){var fg=this.ownerSVGElement||this;return[[0,0],[fg.width.baseVal.value,fg.height.baseVal.value]]}function Cp(fg){for(;!fg.__brush;)if(!(fg=fg.parentNode))return;return fg.__brush}function zp(fg){return fg[0][0]===fg[1][0]||fg[0][1]===fg[1][1]}function Mp(fg){function xg(Ag){var Yg=Ag.property("__brush",kg).selectAll(".overlay").data([Tp("overlay")]);Yg.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_g.overlay).merge(Yg).each(function(){var Pg=Cp(this).extent;vm(this).attr("x",Pg[0][0]).attr("y",Pg[0][1]).attr("width",Pg[1][0]-Pg[0][0]).attr("height",Pg[1][1]-Pg[0][1])}),Ag.selectAll(".selection").data([Tp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_g.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Eg=Ag.selectAll(".handle").data(fg.handles,function(Pg){return Pg.type});Eg.exit().remove(),Eg.enter().append("rect").attr("class",function(Pg){return"handle handle--"+Pg.type}).attr("cursor",function(Pg){return _g[Pg.type]}),Ag.each(vg).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",Tg)}function vg(){var Ag=vm(this),Yg=Cp(this).selection;Yg?(Ag.selectAll(".selection").style("display",null).attr("x",Yg[0][0]).attr("y",Yg[0][1]).attr("width",Yg[1][0]-Yg[0][0]).attr("height",Yg[1][1]-Yg[0][1]),Ag.selectAll(".handle").style("display",null).attr("x",function(Eg){return"e"===Eg.type[Eg.type.length-1]?Yg[1][0]-Ug/2:Yg[0][0]-Ug/2}).attr("y",function(Eg){return"s"===Eg.type[0]?Yg[1][1]-Ug/2:Yg[0][1]-Ug/2}).attr("width",function(Eg){return"n"===Eg.type||"s"===Eg.type?Yg[1][0]-Yg[0][0]+Ug:Ug}).attr("height",function(Eg){return"e"===Eg.type||"w"===Eg.type?Yg[1][1]-Yg[0][1]+Ug:Ug})):Ag.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function bg(Ag,Yg){return Ag.__brush.emitter||new wg(Ag,Yg)}function wg(Ag,Yg){this.that=Ag,this.args=Yg,this.state=Ag.__brush,this.active=0}function Tg(){function Ag(){var uy=pm(Bg);!ay||jg||Vg||(Math.abs(uy[0]-ly[0])>Math.abs(uy[1]-ly[1])?Vg=!0:jg=!0),ly=uy,$g=!0,ig(),Yg()}function Yg(){var uy;switch(Ng=ly[0]-iy[0],Og=ly[1]-iy[1],Wg){case rg:case lg:Rg&&(Ng=Math.max(ey-Pg,Math.min(ny-Hg,Ng)),Dg=Pg+Ng,Xg=Hg+Ng),Gg&&(Og=Math.max(ty-Fg,Math.min(oy-qg,Og)),Lg=Fg+Og,Ig=qg+Og);break;case sg:0>Rg?(Ng=Math.max(ey-Pg,Math.min(ny-Pg,Ng)),Dg=Pg+Ng,Xg=Hg):0<Rg&&(Ng=Math.max(ey-Hg,Math.min(ny-Hg,Ng)),Dg=Pg,Xg=Hg+Ng),0>Gg?(Og=Math.max(ty-Fg,Math.min(oy-Fg,Og)),Lg=Fg+Og,Ig=qg):0<Gg&&(Og=Math.max(ty-qg,Math.min(oy-qg,Og)),Lg=Fg,Ig=qg+Og);break;case dg:Rg&&(Dg=Math.max(ey,Math.min(ny,Pg-Ng*Rg)),Xg=Math.max(ey,Math.min(ny,Hg+Ng*Rg))),Gg&&(Lg=Math.max(ty,Math.min(oy,Fg-Og*Gg)),Ig=Math.max(ty,Math.min(oy,qg+Og*Gg)));}Xg<Dg&&(Rg*=-1,uy=Pg,Pg=Hg,Hg=uy,uy=Dg,Dg=Xg,Xg=uy,Zg in hg&&dy.attr("cursor",_g[Zg=hg[Zg]])),Ig<Lg&&(Gg*=-1,uy=Fg,Fg=qg,qg=uy,uy=Lg,Lg=Ig,Ig=uy,Zg in mg&&dy.attr("cursor",_g[Zg=mg[Zg]])),Jg.selection&&(Qg=Jg.selection),jg&&(Dg=Qg[0][0],Xg=Qg[1][0]),Vg&&(Lg=Qg[0][1],Ig=Qg[1][1]),Qg[0][0]===Dg&&Qg[0][1]===Lg&&Qg[1][0]===Xg&&Qg[1][1]===Ig||(Jg.selection=[[Dg,Lg],[Xg,Ig]],vg.call(Bg),ry.brush())}function Eg(){if(wp(),La.event.touches){if(La.event.touches.length)return;Sg&&clearTimeout(Sg),Sg=setTimeout(function(){Sg=null},500),sy.on("touchmove.brush touchend.brush touchcancel.brush",null)}else wc(La.event.view,$g),cy.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);sy.attr("pointer-events","all"),dy.attr("cursor",_g.overlay),Jg.selection&&(Qg=Jg.selection),zp(Qg)&&(Jg.selection=null,vg.call(Bg)),ry.end()}if(La.event.touches){if(La.event.changedTouches.length<La.event.touches.length)return ig();}else if(Sg)return;if(zg.apply(this,arguments)){var Pg,Dg,Fg,Lg,Hg,Xg,qg,Ig,Ng,Og,$g,jg,Vg,Bg=this,Zg=La.event.target.__data__.type,Wg="selection"===(La.event.metaKey?Zg="overlay":Zg)?lg:La.event.altKey?dg:sg,Rg=fg===ug?null:gg[Zg],Gg=fg===cg?null:yg[Zg],Jg=Cp(Bg),Kg=Jg.extent,Qg=Jg.selection,ey=Kg[0][0],ty=Kg[0][1],ny=Kg[1][0],oy=Kg[1][1],ay=Rg&&Gg&&La.event.shiftKey,iy=pm(Bg),ly=iy,ry=bg(Bg,arguments).beforestart();"overlay"===Zg?Jg.selection=Qg=[[Pg=fg===ug?ey:iy[0],Fg=fg===cg?ty:iy[1]],[Hg=fg===ug?ny:Pg,qg=fg===cg?oy:Fg]]:(Pg=Qg[0][0],Fg=Qg[0][1],Hg=Qg[1][0],qg=Qg[1][1]),Dg=Pg,Lg=Fg,Xg=Hg,Ig=qg;var sy=vm(Bg).attr("pointer-events","none"),dy=sy.selectAll(".overlay").attr("cursor",_g[Zg]);if(La.event.touches)sy.on("touchmove.brush",Ag,!0).on("touchend.brush touchcancel.brush",Eg,!0);else{var cy=vm(La.event.view).on("keydown.brush",function(){switch(La.event.keyCode){case 16:ay=Rg&&Gg;break;case 18:Wg===sg&&(Rg&&(Hg=Xg-Ng*Rg,Pg=Dg+Ng*Rg),Gg&&(qg=Ig-Og*Gg,Fg=Lg+Og*Gg),Wg=dg,Yg());break;case 32:Wg!==sg&&Wg!==dg||(0>Rg?Hg=Xg-Ng:0<Rg&&(Pg=Dg-Ng),0>Gg?qg=Ig-Og:0<Gg&&(Fg=Lg-Og),Wg=rg,dy.attr("cursor",_g.selection),Yg());break;default:return;}ig()},!0).on("keyup.brush",function(){switch(La.event.keyCode){case 16:ay&&(jg=Vg=ay=!1,Yg());break;case 18:Wg===dg&&(0>Rg?Hg=Xg:0<Rg&&(Pg=Dg),0>Gg?qg=Ig:0<Gg&&(Fg=Lg),Wg=sg,Yg());break;case 32:Wg===rg&&(La.event.altKey?(Rg&&(Hg=Xg-Ng*Rg,Pg=Dg+Ng*Rg),Gg&&(qg=Ig-Og*Gg,Fg=Lg+Og*Gg),Wg=dg):(0>Rg?Hg=Xg:0<Rg&&(Pg=Dg),0>Gg?qg=Ig:0<Gg&&(Fg=Lg),Wg=sg),dy.attr("cursor",_g[Zg]),Yg());break;default:return;}ig()},!0).on("mousemove.brush",Ag,!0).on("mouseup.brush",Eg,!0);Tm(La.event.view)}wp(),Zm(Bg),vg.call(Bg),ry.start()}}function kg(){var Ag=this.__brush||{selection:null};return Ag.extent=Cg.apply(this,arguments),Ag.dim=fg,Ag}var Sg,Cg=Sp,zg=kp,Mg=vd(xg,"start","brush","end"),Ug=6;return xg.move=function(Ag,Yg){Ag.selection?Ag.on("start.brush",function(){bg(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){bg(this,arguments).end()}).tween("brush",function(){function Eg(qg){Dg.selection=1===qg&&zp(Hg)?null:Xg(qg),vg.call(Pg),Fg.brush()}var Pg=this,Dg=Pg.__brush,Fg=bg(Pg,arguments),Lg=Dg.selection,Hg=fg.input("function"==typeof Yg?Yg.apply(this,arguments):Yg,Dg.extent),Xg=kh(Lg,Hg);return Lg&&Hg?Eg:Eg(1)}):Ag.each(function(){var Eg=this,Pg=arguments,Dg=Eg.__brush,Fg=fg.input("function"==typeof Yg?Yg.apply(Eg,Pg):Yg,Dg.extent),Lg=bg(Eg,Pg).beforestart();Zm(Eg),Dg.selection=null==Fg||zp(Fg)?null:Fg,vg.call(Eg),Lg.start().brush().end()})},wg.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Ag){Ed(new ag(xg,Ag,fg.output(this.state.selection)),Mg.apply,Mg,[Ag,this.that,this.args])}},xg.extent=function(Ag){return arguments.length?(Cg="function"==typeof Ag?Ag:og([[+Ag[0][0],+Ag[0][1]],[+Ag[1][0],+Ag[1][1]]]),xg):Cg},xg.filter=function(Ag){return arguments.length?(zg="function"==typeof Ag?Ag:og(!!Ag),xg):zg},xg.handleSize=function(Ag){return arguments.length?(Ug=+Ag,xg):Ug},xg.on=function(){var Ag=Mg.on.apply(Mg,arguments);return Ag===Mg?xg:Ag},xg}var Up=function(fg,xg){return fg<xg?-1:fg>xg?1:fg>=xg?0:NaN},Ap=function(fg){return 1===fg.length&&(fg=Ha(fg)),{left:function(xg,vg,bg,wg){for(null==bg&&(bg=0),null==wg&&(wg=xg.length);bg<wg;){var Tg=bg+wg>>>1;0>fg(xg[Tg],vg)?bg=Tg+1:wg=Tg}return bg},right:function(xg,vg,bg,wg){for(null==bg&&(bg=0),null==wg&&(wg=xg.length);bg<wg;){var Tg=bg+wg>>>1;0<fg(xg[Tg],vg)?wg=Tg:bg=Tg+1}return bg}}},Yp=Ap(Up).right,Ep=Math.sqrt(50),Pp=Math.sqrt(10),Dp=Math.sqrt(2),Fp=function(fg,xg,vg){var bg,wg,Tg,kg=xg<fg,Sg=-1;if(kg&&(bg=fg,fg=xg,xg=bg),0===(Tg=Xa(fg,xg,vg))||!isFinite(Tg))return[];if(0<Tg)for(fg=Math.ceil(fg/Tg),xg=Math.floor(xg/Tg),wg=Array(bg=Math.ceil(xg-fg+1));++Sg<bg;)wg[Sg]=(fg+Sg)*Tg;else for(fg=Math.floor(fg*Tg),xg=Math.ceil(xg*Tg),wg=Array(bg=Math.ceil(fg-xg+1));++Sg<bg;)wg[Sg]=(fg-Sg)/Tg;return kg&&wg.reverse(),wg},Lp=Math.PI,Hp=2*Lp;Ia.prototype=Oa.prototype={constructor:Ia,moveTo:function(fg,xg){this._+="M"+(this._x0=this._x1=+fg)+","+(this._y0=this._y1=+xg)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(fg,xg){this._+="L"+(this._x1=+fg)+","+(this._y1=+xg)},quadraticCurveTo:function(fg,xg,vg,bg){this._+="Q"+ +fg+","+ +xg+","+(this._x1=+vg)+","+(this._y1=+bg)},bezierCurveTo:function(fg,xg,vg,bg,wg,Tg){this._+="C"+ +fg+","+ +xg+","+ +vg+","+ +bg+","+(this._x1=+wg)+","+(this._y1=+Tg)},arcTo:function(fg,xg,vg,bg,wg){fg=+fg,xg=+xg,vg=+vg,bg=+bg,wg=+wg;var Tg=this._x1,kg=this._y1,Sg=vg-fg,Cg=bg-xg,zg=Tg-fg,Mg=kg-xg,Ug=zg*zg+Mg*Mg;if(0>wg)throw new Error("negative radius: "+wg);if(null===this._x1)this._+="M"+(this._x1=fg)+","+(this._y1=xg);else if(!(1e-6<Ug));else if(1e-6<Math.abs(Mg*Sg-Cg*zg)&&wg){var Ag=vg-Tg,Yg=bg-kg,Eg=Sg*Sg+Cg*Cg,Dg=Math.sqrt(Eg),Fg=Math.sqrt(Ug),Lg=wg*Math.tan((Lp-Math.acos((Eg+Ug-(Ag*Ag+Yg*Yg))/(2*Dg*Fg)))/2),Hg=Lg/Fg,Xg=Lg/Dg;1e-6<Math.abs(Hg-1)&&(this._+="L"+(fg+Hg*zg)+","+(xg+Hg*Mg)),this._+="A"+wg+","+wg+",0,0,"+ +(Mg*Ag>zg*Yg)+","+(this._x1=fg+Xg*Sg)+","+(this._y1=xg+Xg*Cg)}else this._+="L"+(this._x1=fg)+","+(this._y1=xg)},arc:function(fg,xg,vg,bg,wg,Tg){fg=+fg,xg=+xg;var kg=(vg=+vg)*Math.cos(bg),Sg=vg*Math.sin(bg),Cg=fg+kg,zg=xg+Sg,Mg=1^Tg,Ug=Tg?bg-wg:wg-bg;if(0>vg)throw new Error("negative radius: "+vg);null===this._x1?this._+="M"+Cg+","+zg:(1e-6<Math.abs(this._x1-Cg)||1e-6<Math.abs(this._y1-zg))&&(this._+="L"+Cg+","+zg),vg&&(0>Ug&&(Ug=Ug%Hp+Hp),Ug>Hp-1e-6?this._+="A"+vg+","+vg+",0,1,"+Mg+","+(fg-kg)+","+(xg-Sg)+"A"+vg+","+vg+",0,1,"+Mg+","+(this._x1=Cg)+","+(this._y1=zg):1e-6<Ug&&(this._+="A"+vg+","+vg+",0,"+ +(Ug>=Lp)+","+Mg+","+(this._x1=fg+vg*Math.cos(wg))+","+(this._y1=xg+vg*Math.sin(wg))))},rect:function(fg,xg,vg,bg){this._+="M"+(this._x0=this._x1=+fg)+","+(this._y0=this._y1=+xg)+"h"+ +vg+"v"+ +bg+"h"+-vg+"Z"},toString:function(){return this._}};var qp=function(fg){return function(){return fg}},Ip=1e-12;$a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;default:this._context.lineTo(fg,xg);}}};var Np=function(fg){return new $a(fg)},Op=function(){function fg(Sg){var Cg,zg,Mg,Ug=Sg.length,Ag=!1;for(null==wg&&(kg=Tg(Mg=Oa())),Cg=0;Cg<=Ug;++Cg)!(Cg<Ug&&bg(zg=Sg[Cg],Cg,Sg))===Ag&&((Ag=!Ag)?kg.lineStart():kg.lineEnd()),Ag&&kg.point(+xg(zg,Cg,Sg),+vg(zg,Cg,Sg));if(Mg)return kg=null,Mg+""||null}var xg=ja,vg=Va,bg=qp(!0),wg=null,Tg=Np,kg=null;return fg.x=function(Sg){return arguments.length?(xg="function"==typeof Sg?Sg:qp(+Sg),fg):xg},fg.y=function(Sg){return arguments.length?(vg="function"==typeof Sg?Sg:qp(+Sg),fg):vg},fg.defined=function(Sg){return arguments.length?(bg="function"==typeof Sg?Sg:qp(!!Sg),fg):bg},fg.curve=function(Sg){return arguments.length?(Tg=Sg,null!=wg&&(kg=Tg(wg)),fg):Tg},fg.context=function(Sg){return arguments.length?(null==Sg?wg=kg=null:kg=Tg(wg=Sg),fg):wg},fg};Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ba(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ba(this,fg,xg);}this._x0=this._x1,this._x1=fg,this._y0=this._y1,this._y1=xg}},Ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wa(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2,this._x1=fg,this._y1=xg;break;case 2:this._point=3;default:Wa(this,fg,xg);}this._x0=this._x1,this._x1=this._x2,this._x2=fg,this._y0=this._y1,this._y1=this._y2,this._y2=xg}};var $p=function fg(xg){function vg(bg){return new Ra(bg,xg)}return vg.tension=function(bg){return fg(+bg)},vg}(0);Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){if(fg=+fg,xg=+xg,this._point){var vg=this._x2-fg,bg=this._y2-xg;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(vg*vg+bg*bg,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3;default:Ga(this,fg,xg);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=fg,this._y0=this._y1,this._y1=this._y2,this._y2=xg}};var jp=function fg(xg){function vg(bg){return xg?new Ja(bg,xg):new Ra(bg,0)}return vg.alpha=function(bg){return fg(+bg)},vg}(.5);nl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tl(this,this._t0,el(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(fg,xg){var vg=NaN;if(fg=+fg,xg=+xg,fg!==this._x1||xg!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;break;case 2:this._point=3,tl(this,el(this,vg=Qa(this,fg,xg)),vg);break;default:tl(this,this._t0,vg=Qa(this,fg,xg));}this._x0=this._x1,this._x1=fg,this._y0=this._y1,this._y1=xg,this._t0=vg}}},(function(fg){this._context=new ol(fg)}.prototype=Object.create(nl.prototype)).point=function(fg,xg){nl.prototype.point.call(this,xg,fg)},ol.prototype={moveTo:function(fg,xg){this._context.moveTo(xg,fg)},closePath:function(){this._context.closePath()},lineTo:function(fg,xg){this._context.lineTo(xg,fg)},bezierCurveTo:function(fg,xg,vg,bg,wg,Tg){this._context.bezierCurveTo(xg,fg,bg,vg,Tg,wg)}},al.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var fg=this._x,xg=this._y,vg=fg.length;if(vg)if(this._line?this._context.lineTo(fg[0],xg[0]):this._context.moveTo(fg[0],xg[0]),2===vg)this._context.lineTo(fg[1],xg[1]);else for(var bg=il(fg),wg=il(xg),Tg=0,kg=1;kg<vg;++Tg,++kg)this._context.bezierCurveTo(bg[0][Tg],wg[0][Tg],bg[1][Tg],wg[1][Tg],fg[kg],xg[kg]);(this._line||0!==this._line&&1===vg)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(fg,xg){this._x.push(+fg),this._y.push(+xg)}},ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(fg,xg){switch(fg=+fg,xg=+xg,this._point){case 0:this._point=1,this._line?this._context.lineTo(fg,xg):this._context.moveTo(fg,xg);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,xg),this._context.lineTo(fg,xg);else{var vg=this._x*(1-this._t)+fg*this._t;this._context.lineTo(vg,this._y),this._context.lineTo(vg,xg)}}this._x=fg,this._y=xg}};var Vp=new Date,Bp=new Date,Zp=rl(function(){},function(fg,xg){fg.setTime(+fg+xg)},function(fg,xg){return xg-fg});Zp.every=function(fg){return fg=Math.floor(fg),isFinite(fg)&&0<fg?1<fg?rl(function(xg){xg.setTime(Math.floor(xg/fg)*fg)},function(xg,vg){xg.setTime(+xg+vg*fg)},function(xg,vg){return(vg-xg)/fg}):Zp:null};var Wp=6e4,Rp=6048e5,Gp=rl(function(fg){fg.setTime(1e3*Math.floor(fg/1e3))},function(fg,xg){fg.setTime(+fg+1e3*xg)},function(fg,xg){return(xg-fg)/1e3},function(fg){return fg.getUTCSeconds()}),Jp=rl(function(fg){fg.setTime(Math.floor(fg/Wp)*Wp)},function(fg,xg){fg.setTime(+fg+xg*Wp)},function(fg,xg){return(xg-fg)/Wp},function(fg){return fg.getMinutes()}),Kp=rl(function(fg){var xg=fg.getTimezoneOffset()*Wp%36e5;0>xg&&(xg+=36e5),fg.setTime(36e5*Math.floor((+fg-xg)/36e5)+xg)},function(fg,xg){fg.setTime(+fg+36e5*xg)},function(fg,xg){return(xg-fg)/36e5},function(fg){return fg.getHours()}),Qp=rl(function(fg){fg.setHours(0,0,0,0)},function(fg,xg){fg.setDate(fg.getDate()+xg)},function(fg,xg){return(xg-fg-(xg.getTimezoneOffset()-fg.getTimezoneOffset())*Wp)/864e5},function(fg){return fg.getDate()-1}),e_=sl(0),t_=sl(1),n_=(sl(2),sl(3),sl(4),sl(5),sl(6),rl(function(fg){fg.setDate(1),fg.setHours(0,0,0,0)},function(fg,xg){fg.setMonth(fg.getMonth()+xg)},function(fg,xg){return xg.getMonth()-fg.getMonth()+12*(xg.getFullYear()-fg.getFullYear())},function(fg){return fg.getMonth()})),o_=rl(function(fg){fg.setMonth(0,1),fg.setHours(0,0,0,0)},function(fg,xg){fg.setFullYear(fg.getFullYear()+xg)},function(fg,xg){return xg.getFullYear()-fg.getFullYear()},function(fg){return fg.getFullYear()});o_.every=function(fg){return isFinite(fg=Math.floor(fg))&&0<fg?rl(function(xg){xg.setFullYear(Math.floor(xg.getFullYear()/fg)*fg),xg.setMonth(0,1),xg.setHours(0,0,0,0)},function(xg,vg){xg.setFullYear(xg.getFullYear()+vg*fg)}):null},rl(function(fg){fg.setUTCSeconds(0,0)},function(fg,xg){fg.setTime(+fg+xg*Wp)},function(fg,xg){return(xg-fg)/Wp},function(fg){return fg.getUTCMinutes()}),rl(function(fg){fg.setUTCMinutes(0,0,0)},function(fg,xg){fg.setTime(+fg+36e5*xg)},function(fg,xg){return(xg-fg)/36e5},function(fg){return fg.getUTCHours()});var a_=rl(function(fg){fg.setUTCHours(0,0,0,0)},function(fg,xg){fg.setUTCDate(fg.getUTCDate()+xg)},function(fg,xg){return(xg-fg)/864e5},function(fg){return fg.getUTCDate()-1}),i_=dl(0),l_=dl(1),r_=(dl(2),dl(3),dl(4),dl(5),dl(6),rl(function(fg){fg.setUTCDate(1),fg.setUTCHours(0,0,0,0)},function(fg,xg){fg.setUTCMonth(fg.getUTCMonth()+xg)},function(fg,xg){return xg.getUTCMonth()-fg.getUTCMonth()+12*(xg.getUTCFullYear()-fg.getUTCFullYear())},function(fg){return fg.getUTCMonth()}),rl(function(fg){fg.setUTCMonth(0,1),fg.setUTCHours(0,0,0,0)},function(fg,xg){fg.setUTCFullYear(fg.getUTCFullYear()+xg)},function(fg,xg){return xg.getUTCFullYear()-fg.getUTCFullYear()},function(fg){return fg.getUTCFullYear()}));r_.every=function(fg){return isFinite(fg=Math.floor(fg))&&0<fg?rl(function(xg){xg.setUTCFullYear(Math.floor(xg.getUTCFullYear()/fg)*fg),xg.setUTCMonth(0,1),xg.setUTCHours(0,0,0,0)},function(xg,vg){xg.setUTCFullYear(xg.getUTCFullYear()+vg*fg)}):null};var s_,d_=function(fg,xg){if(0>(vg=(fg=xg?fg.toExponential(xg-1):fg.toExponential()).indexOf("e")))return null;var vg,bg=fg.slice(0,vg);return[1<bg.length?bg[0]+bg.slice(2):bg,+fg.slice(vg+1)]},c_=function(fg){return(fg=d_(Math.abs(fg)))?fg[1]:NaN},u_=function(fg,xg){return function(vg,bg){for(var wg=vg.length,Tg=[],kg=0,Sg=fg[0],Cg=0;0<wg&&0<Sg&&(Cg+Sg+1>bg&&(Sg=Math.max(1,bg-Cg)),Tg.push(vg.substring(wg-=Sg,wg+Sg)),!((Cg+=Sg+1)>bg));)Sg=fg[kg=(kg+1)%fg.length];return Tg.reverse().join(xg)}},p_=function(fg){return function(xg){return xg.replace(/[0-9]/g,function(vg){return fg[+vg]})}},__=function(fg,xg){var vg=d_(fg,xg);if(!vg)return fg+"";var bg=vg[0],wg=vg[1];return 0>wg?"0."+Array(-wg).join("0")+bg:bg.length>wg+1?bg.slice(0,wg+1)+"."+bg.slice(wg+1):bg+Array(wg-bg.length+2).join("0")},h_={"":function(fg,xg){t:for(var vg,bg=(fg=fg.toPrecision(xg)).length,wg=1,Tg=-1;wg<bg;++wg)switch(fg[wg]){case".":Tg=vg=wg;break;case"0":0===Tg&&(Tg=wg),vg=wg;break;case"e":break t;default:0<Tg&&(Tg=0);}return 0<Tg?fg.slice(0,Tg)+fg.slice(vg+1):fg},"%":function(fg,xg){return(100*fg).toFixed(xg)},b:function(fg){return Math.round(fg).toString(2)},c:function(fg){return fg+""},d:function(fg){return Math.round(fg).toString(10)},e:function(fg,xg){return fg.toExponential(xg)},f:function(fg,xg){return fg.toFixed(xg)},g:function(fg,xg){return fg.toPrecision(xg)},o:function(fg){return Math.round(fg).toString(8)},p:function(fg,xg){return __(100*fg,xg)},r:__,s:function(fg,xg){var vg=d_(fg,xg);if(!vg)return fg+"";var bg=vg[0],wg=vg[1],Tg=wg-(s_=3*Math.max(-8,Math.min(8,Math.floor(wg/3))))+1,kg=bg.length;return Tg===kg?bg:Tg>kg?bg+Array(Tg-kg+1).join("0"):0<Tg?bg.slice(0,Tg)+"."+bg.slice(Tg):"0."+Array(1-Tg).join("0")+d_(fg,Math.max(0,xg+Tg-1))[0]},X:function(fg){return Math.round(fg).toString(16).toUpperCase()},x:function(fg){return Math.round(fg).toString(16)}},m_=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;cl.prototype=ul.prototype,ul.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var g_,y_,f_=function(fg){return fg},x_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],v_=function(fg){function xg(Sg){function Cg(Ig){var Ng,Og,$g,jg=Lg,Vg=Hg;if("c"===Fg)Vg=Xg(Ig)+Vg,Ig="";else{var Bg=0>(Ig=+Ig);if(Ig=Xg(Math.abs(Ig),Dg),Bg&&0==+Ig&&(Bg=!1),jg=(Bg?"("===Ug?Ug:"-":"-"===Ug||"("===Ug?"":Ug)+jg,Vg=Vg+("s"===Fg?x_[8+s_/3]:"")+(Bg&&"("===Ug?")":""),qg)for(Ng=-1,Og=Ig.length;++Ng<Og;)if(48>($g=Ig.charCodeAt(Ng))||57<$g){Vg=(46===$g?wg+Ig.slice(Ng+1):Ig.slice(Ng))+Vg,Ig=Ig.slice(0,Ng);break}}Pg&&!Yg&&(Ig=vg(Ig,1/0));var Zg=jg.length+Ig.length+Vg.length,Wg=Zg<Eg?Array(Eg-Zg+1).join(zg):"";switch(Pg&&Yg&&(Ig=vg(Wg+Ig,Wg.length?Eg-Vg.length:1/0),Wg=""),Mg){case"<":Ig=jg+Ig+Vg+Wg;break;case"=":Ig=jg+Wg+Ig+Vg;break;case"^":Ig=Wg.slice(0,Zg=Wg.length>>1)+jg+Ig+Vg+Wg.slice(Zg);break;default:Ig=Wg+jg+Ig+Vg;}return Tg(Ig)}var zg=(Sg=cl(Sg)).fill,Mg=Sg.align,Ug=Sg.sign,Ag=Sg.symbol,Yg=Sg.zero,Eg=Sg.width,Pg=Sg.comma,Dg=Sg.precision,Fg=Sg.type,Lg="$"===Ag?bg[0]:"#"===Ag&&/[boxX]/.test(Fg)?"0"+Fg.toLowerCase():"",Hg="$"===Ag?bg[1]:/[%p]/.test(Fg)?kg:"",Xg=h_[Fg],qg=!Fg||/[defgprs%]/.test(Fg);return Dg=null==Dg?Fg?6:12:/[gprs]/.test(Fg)?Math.max(1,Math.min(21,Dg)):Math.max(0,Math.min(20,Dg)),Cg.toString=function(){return Sg+""},Cg}var vg=fg.grouping&&fg.thousands?u_(fg.grouping,fg.thousands):f_,bg=fg.currency,wg=fg.decimal,Tg=fg.numerals?p_(fg.numerals):f_,kg=fg.percent||"%";return{format:xg,formatPrefix:function(Sg,Cg){var zg=xg((Sg=cl(Sg),Sg.type="f",Sg)),Mg=3*Math.max(-8,Math.min(8,Math.floor(c_(Cg)/3))),Ug=Math.pow(10,-Mg),Ag=x_[8+Mg/3];return function(Yg){return zg(Ug*Yg)+Ag}}}};pl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var b_,w_,T_,k_=function(fg){return Math.max(0,-c_(Math.abs(fg)))},S_=function(fg,xg){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c_(xg)/3)))-c_(Math.abs(fg)))},C_=function(fg,xg){return fg=Math.abs(fg),xg=Math.abs(xg)-fg,Math.max(0,c_(xg)-c_(fg))+1},z_={"-":"",_:" ",0:"0"},M_=/^\s*\d+/,U_=/^%/,A_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;cs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||w_("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||T_("%Y-%m-%dT%H:%M:%S.%LZ"),us.prototype=ps.prototype={constructor:us,has:function(fg){return"$"+fg in this},get:function(fg){return this["$"+fg]},set:function(fg,xg){return this["$"+fg]=xg,this},remove:function(fg){var xg="$"+fg;return xg in this&&delete this[xg]},clear:function(){for(var fg in this)"$"===fg[0]&&delete this[fg]},keys:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push(xg.slice(1));return fg},values:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push(this[xg]);return fg},entries:function(){var fg=[];for(var xg in this)"$"===xg[0]&&fg.push({key:xg.slice(1),value:this[xg]});return fg},size:function(){var fg=0;for(var xg in this)"$"===xg[0]&&++fg;return fg},empty:function(){for(var fg in this)if("$"===fg[0])return!1;return!0},each:function(fg){for(var xg in this)"$"===xg[0]&&fg(this[xg],xg.slice(1),this)}};var Y_=ps.prototype;_s.prototype=function(fg,xg){var vg=new _s;if(fg instanceof _s)fg.each(function(Tg){vg.add(Tg)});else if(fg){var bg=-1,wg=fg.length;if(null==xg)for(;++bg<wg;)vg.add(fg[bg]);else for(;++bg<wg;)vg.add(xg(fg[bg],bg,fg))}return vg}.prototype={constructor:_s,has:Y_.has,add:function(fg){return fg+="",this["$"+fg]=fg,this},remove:Y_.remove,clear:Y_.clear,values:Y_.keys,size:Y_.size,empty:Y_.empty,each:Y_.each};var E_=Array.prototype,P_=E_.map,D_=E_.slice,F_=function(fg,xg,vg){fg.prototype=xg.prototype=vg,vg.constructor=fg},q_=/^#([0-9a-f]{3})$/,I_=/^#([0-9a-f]{6})$/,N_=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,O_=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,$_=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,j_=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,V_=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,B_=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Z_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};F_(ms,gs,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),F_(bs,vs,hs(ms,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new bs(this.r*fg,this.g*fg,this.b*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new bs(this.r*fg,this.g*fg,this.b*fg,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var fg=this.opacity;return(1===(fg=isNaN(fg)?1:Math.max(0,Math.min(1,fg)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===fg?")":", "+fg+")")}})),F_(ks,function(fg,xg,vg,bg){return 1===arguments.length?Ts(fg):new ks(fg,xg,vg,null==bg?1:bg)},hs(ms,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new ks(this.h,this.s,this.l*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new ks(this.h,this.s,this.l*fg,this.opacity)},rgb:function(){var fg=this.h%360+360*(0>this.h),xg=isNaN(fg)||isNaN(this.s)?0:this.s,vg=this.l,bg=vg+(.5>vg?vg:1-vg)*xg,wg=2*vg-bg;return new bs(Ss(240<=fg?fg-240:fg+120,wg,bg),Ss(fg,wg,bg),Ss(120>fg?fg+240:fg-120,wg,bg),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var W_=Math.PI/180,R_=180/Math.PI,G_=.95047,J_=1,K_=1.08883,Q_=4/29,eh=6/29,th=3*eh*eh,nh=eh*eh*eh;F_(zs,function(fg,xg,vg,bg){return 1===arguments.length?Cs(fg):new zs(fg,xg,vg,null==bg?1:bg)},hs(ms,{brighter:function(fg){return new zs(this.l+18*(null==fg?1:fg),this.a,this.b,this.opacity)},darker:function(fg){return new zs(this.l-18*(null==fg?1:fg),this.a,this.b,this.opacity)},rgb:function(){var fg=(this.l+16)/116,xg=isNaN(this.a)?fg:fg+this.a/500,vg=isNaN(this.b)?fg:fg-this.b/200;return fg=J_*Us(fg),xg=G_*Us(xg),vg=K_*Us(vg),new bs(As(3.2404542*xg-1.5371385*fg-.4985314*vg),As(-.969266*xg+1.8760108*fg+.041556*vg),As(.0556434*xg-.2040259*fg+1.0572252*vg),this.opacity)}})),F_(Ps,function(fg,xg,vg,bg){return 1===arguments.length?Es(fg):new Ps(fg,xg,vg,null==bg?1:bg)},hs(ms,{brighter:function(fg){return new Ps(this.h,this.c,this.l+18*(null==fg?1:fg),this.opacity)},darker:function(fg){return new Ps(this.h,this.c,this.l-18*(null==fg?1:fg),this.opacity)},rgb:function(){return Cs(this).rgb()}}));var oh=-.14861,ah=1.78277,ih=-.29227,lh=-.90649,rh=1.97294,sh=rh*lh,dh=rh*ah,ch=ah*ih-lh*oh;F_(Ls,Fs,hs(ms,{brighter:function(fg){return fg=null==fg?1/.7:Math.pow(1/.7,fg),new Ls(this.h,this.s,this.l*fg,this.opacity)},darker:function(fg){return fg=null==fg?.7:Math.pow(.7,fg),new Ls(this.h,this.s,this.l*fg,this.opacity)},rgb:function(){var fg=isNaN(this.h)?0:(this.h+120)*W_,xg=+this.l,vg=isNaN(this.s)?0:this.s*xg*(1-xg),bg=Math.cos(fg),wg=Math.sin(fg);return new bs(255*(xg+vg*(oh*bg+ah*wg)),255*(xg+vg*(ih*bg+lh*wg)),255*(xg+vg*(rh*bg)),this.opacity)}}));var uh,ph,_h,hh,mh=function(fg){return function(){return fg}},gh=function fg(xg){function vg(wg,Tg){var kg=bg((wg=vs(wg)).r,(Tg=vs(Tg)).r),Sg=bg(wg.g,Tg.g),Cg=bg(wg.b,Tg.b),zg=Is(wg.opacity,Tg.opacity);return function(Mg){return wg.r=kg(Mg),wg.g=Sg(Mg),wg.b=Cg(Mg),wg.opacity=zg(Mg),wg+""}}var bg=qs(xg);return vg.gamma=fg,vg}(1),yh=function(fg,xg){var vg,bg=xg?xg.length:0,wg=fg?Math.min(bg,fg.length):0,Tg=Array(bg),kg=Array(bg);for(vg=0;vg<wg;++vg)Tg[vg]=kh(fg[vg],xg[vg]);for(;vg<bg;++vg)kg[vg]=xg[vg];return function(Sg){for(vg=0;vg<wg;++vg)kg[vg]=Tg[vg](Sg);return kg}},fh=function(fg,xg){var vg=new Date;return fg=+fg,xg-=fg,function(bg){return vg.setTime(fg+xg*bg),vg}},xh=function(fg,xg){return fg=+fg,xg-=fg,function(vg){return fg+xg*vg}},vh=function(fg,xg){var vg,bg={},wg={};for(vg in null!==fg&&"object"==typeof fg||(fg={}),null!==xg&&"object"==typeof xg||(xg={}),xg)vg in fg?bg[vg]=kh(fg[vg],xg[vg]):wg[vg]=xg[vg];return function(Tg){for(vg in bg)wg[vg]=bg[vg](Tg);return wg}},bh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wh=new RegExp(bh.source,"g"),Th=function(fg,xg){var vg,bg,wg,Tg=bh.lastIndex=wh.lastIndex=0,kg=-1,Sg=[],Cg=[];for(fg+="",xg+="";(vg=bh.exec(fg))&&(bg=wh.exec(xg));)(wg=bg.index)>Tg&&(wg=xg.slice(Tg,wg),Sg[kg]?Sg[kg]+=wg:Sg[++kg]=wg),(vg=vg[0])===(bg=bg[0])?Sg[kg]?Sg[kg]+=bg:Sg[++kg]=bg:(Sg[++kg]=null,Cg.push({i:kg,x:xh(vg,bg)})),Tg=wh.lastIndex;return Tg<xg.length&&(wg=xg.slice(Tg),Sg[kg]?Sg[kg]+=wg:Sg[++kg]=wg),2>Sg.length?Cg[0]?Os(Cg[0].x):Ns(xg):(xg=Cg.length,function(zg){for(var Mg,Ug=0;Ug<xg;++Ug)Sg[(Mg=Cg[Ug]).i]=Mg.x(zg);return Sg.join("")})},kh=function(fg,xg){var vg,bg=typeof xg;return null==xg||"boolean"===bg?mh(xg):("number"===bg?xh:"string"===bg?(vg=gs(xg))?(xg=vg,gh):Th:xg instanceof gs?gh:xg instanceof Date?fh:Array.isArray(xg)?yh:"function"!=typeof xg.valueOf&&"function"!=typeof xg.toString||isNaN(xg)?vh:xh)(fg,xg)},Sh=function(fg,xg){return fg=+fg,xg-=fg,function(vg){return Math.round(fg+xg*vg)}},Ch=180/Math.PI,zh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Mh=function(fg,xg,vg,bg,wg,Tg){var kg,Sg,Cg;return(kg=Math.sqrt(fg*fg+xg*xg))&&(fg/=kg,xg/=kg),(Cg=fg*vg+xg*bg)&&(vg-=fg*Cg,bg-=xg*Cg),(Sg=Math.sqrt(vg*vg+bg*bg))&&(vg/=Sg,bg/=Sg,Cg/=Sg),fg*bg<xg*vg&&(fg=-fg,xg=-xg,Cg=-Cg,kg=-kg),{translateX:wg,translateY:Tg,rotate:Math.atan2(xg,fg)*Ch,skewX:Math.atan(Cg)*Ch,scaleX:kg,scaleY:Sg}},Uh=$s(function(fg){return"none"===fg?zh:(uh||(uh=document.createElement("DIV"),ph=document.documentElement,_h=document.defaultView),uh.style.transform=fg,fg=_h.getComputedStyle(ph.appendChild(uh),null).getPropertyValue("transform"),ph.removeChild(uh),fg=fg.slice(7,-1).split(","),Mh(+fg[0],+fg[1],+fg[2],+fg[3],+fg[4],+fg[5]))},"px, ","px)","deg)"),Ah=$s(function(fg){return null==fg?zh:(hh||(hh=document.createElementNS("http://www.w3.org/2000/svg","g")),hh.setAttribute("transform",fg),(fg=hh.transform.baseVal.consolidate())?(fg=fg.matrix,Mh(fg.a,fg.b,fg.c,fg.d,fg.e,fg.f)):zh)},", ",")",")"),Yh=Math.SQRT2,Eh=function(fg,xg){var vg,bg,wg=fg[0],Tg=fg[1],kg=fg[2],Sg=xg[0],Cg=xg[1],zg=xg[2],Mg=Sg-wg,Ug=Cg-Tg,Ag=Mg*Mg+Ug*Ug;if(1e-12>Ag)bg=Math.log(zg/kg)/Yh,vg=function(Lg){return[wg+Lg*Mg,Tg+Lg*Ug,kg*Math.exp(Yh*Lg*bg)]};else{var Yg=Math.sqrt(Ag),Eg=(zg*zg-kg*kg+4*Ag)/(2*(2*kg)*Yg),Pg=(zg*zg-kg*kg-4*Ag)/(2*(2*zg)*Yg),Dg=Math.log(Math.sqrt(Eg*Eg+1)-Eg),Fg=Math.log(Math.sqrt(Pg*Pg+1)-Pg);bg=(Fg-Dg)/Yh,vg=function(Lg){var Hg=Lg*bg,Xg=js(Dg),qg=kg/(2*Yg)*(Xg*Bs(Yh*Hg+Dg)-Vs(Dg));return[wg+qg*Mg,Tg+qg*Ug,kg*Xg/js(Yh*Hg+Dg)]}}return vg.duration=1e3*bg,vg};Zs(function(fg,xg){var vg=xg-fg;return vg?Hs(fg,180<vg||-180>vg?vg-360*Math.round(vg/360):vg):mh(isNaN(fg)?xg:fg)});var Ph=Zs(Is),Dh=function(fg){return function(){return fg}},Fh=function(fg){return+fg},Lh=[0,1],Hh=function(fg,xg,vg){var bg,wg=fg[0],Tg=fg[fg.length-1],kg=qa(wg,Tg,null==xg?10:xg);switch((vg=cl(null==vg?",f":vg)).type){case"s":var Sg=Math.max(Math.abs(wg),Math.abs(Tg));return null!=vg.precision||isNaN(bg=S_(kg,Sg))||(vg.precision=bg),y_(vg,Sg);case"":case"e":case"g":case"p":case"r":null!=vg.precision||isNaN(bg=C_(kg,Math.max(Math.abs(wg),Math.abs(Tg))))||(vg.precision=bg-("e"===vg.type));break;case"f":case"%":null!=vg.precision||isNaN(bg=k_(kg))||(vg.precision=bg-2*("%"===vg.type));}return La.format(vg)},Xh=function(fg,xg){var vg,bg=0,wg=(fg=fg.slice()).length-1,Tg=fg[bg],kg=fg[wg];return kg<Tg&&(vg=bg,bg=wg,wg=vg,vg=Tg,Tg=kg,kg=vg),fg[bg]=xg.floor(Tg),fg[wg]=xg.ceil(kg),fg},qh=1e3,Ih=60*qh,Nh=60*Ih,Oh=24*Nh,$h=7*Oh,jh=30*Oh,Vh=365*Oh,Bh=function(fg){return fg.match(/.{6}/g).map(function(xg){return"#"+xg})};Bh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Bh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Bh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Bh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Ph(Fs(300,.5,0),Fs(-240,.5,1)),Ph(Fs(-100,.75,.35),Fs(80,1.5,.8)),Ph(Fs(260,.75,.35),Fs(80,1.5,.8)),Fs();var Zh=Array.prototype.slice,Wh=function(fg){return fg},Rh=1,Gh=2,Jh=3,Kh=4,Qh=1e-6,em={value:function(){}};bd.prototype=vd.prototype={constructor:bd,on:function(fg,xg){var vg,bg=this._,wg=wd(fg+"",bg),Tg=-1,kg=wg.length;{if(!(2>arguments.length)){if(null!=xg&&"function"!=typeof xg)throw new Error("invalid callback: "+xg);for(;++Tg<kg;)if(vg=(fg=wg[Tg]).type)bg[vg]=kd(bg[vg],fg.name,xg);else if(null==xg)for(vg in bg)bg[vg]=kd(bg[vg],fg.name,null);return this}for(;++Tg<kg;)if((vg=(fg=wg[Tg]).type)&&(vg=Td(bg[vg],fg.name)))return vg}},copy:function(){var fg={},xg=this._;for(var vg in xg)fg[vg]=xg[vg].slice();return new bd(fg)},call:function(fg,xg){if(0<(vg=arguments.length-2))for(var vg,bg,wg=Array(vg),Tg=0;Tg<vg;++Tg)wg[Tg]=arguments[Tg+2];if(!this._.hasOwnProperty(fg))throw new Error("unknown type: "+fg);for(Tg=0,vg=(bg=this._[fg]).length;Tg<vg;++Tg)bg[Tg].value.apply(xg,wg)},apply:function(fg,xg,vg){if(!this._.hasOwnProperty(fg))throw new Error("unknown type: "+fg);for(var bg=this._[fg],wg=0,Tg=bg.length;wg<Tg;++wg)bg[wg].value.apply(xg,vg)}};var tm="http://www.w3.org/1999/xhtml",nm={svg:"http://www.w3.org/2000/svg",xhtml:tm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},om=function(fg){var xg=fg+="",vg=xg.indexOf(":");return 0<=vg&&"xmlns"!==(xg=fg.slice(0,vg))&&(fg=fg.slice(vg+1)),nm.hasOwnProperty(xg)?{space:nm[xg],local:fg}:fg},am=function(fg){var xg=om(fg);return(xg.local?Cd:Sd)(xg)},im=function(fg){return function(){return this.matches(fg)}};if("undefined"!=typeof document){var lm=document.documentElement;if(!lm.matches){var rm=lm.webkitMatchesSelector||lm.msMatchesSelector||lm.mozMatchesSelector||lm.oMatchesSelector;im=function(fg){return function(){return rm.call(this,fg)}}}}var sm=im,dm={};La.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(dm={mouseenter:"mouseover",mouseleave:"mouseout"}));var cm=function(){for(var fg,xg=La.event;fg=xg.sourceEvent;)xg=fg;return xg},um=function(fg,xg){var vg=fg.ownerSVGElement||fg;if(vg.createSVGPoint){var bg=vg.createSVGPoint();return bg.x=xg.clientX,bg.y=xg.clientY,bg=bg.matrixTransform(fg.getScreenCTM().inverse()),[bg.x,bg.y]}var wg=fg.getBoundingClientRect();return[xg.clientX-wg.left-fg.clientLeft,xg.clientY-wg.top-fg.clientTop]},pm=function(fg){var xg=cm();return xg.changedTouches&&(xg=xg.changedTouches[0]),um(fg,xg)},_m=function(fg){return null==fg?Pd:function(){return this.querySelector(fg)}},hm=function(fg){return null==fg?Dd:function(){return this.querySelectorAll(fg)}},mm=function(fg){return Array(fg.length)};Fd.prototype={constructor:Fd,appendChild:function(fg){return this._parent.insertBefore(fg,this._next)},insertBefore:function(fg,xg){return this._parent.insertBefore(fg,xg)},querySelector:function(fg){return this._parent.querySelector(fg)},querySelectorAll:function(fg){return this._parent.querySelectorAll(fg)}};var gm=function(fg){return function(){return fg}},ym="$",fm=function(fg){return fg.ownerDocument&&fg.ownerDocument.defaultView||fg.document&&fg||fg.defaultView};ec.prototype={add:function(fg){0>this._names.indexOf(fg)&&(this._names.push(fg),this._node.setAttribute("class",this._names.join(" ")))},remove:function(fg){var xg=this._names.indexOf(fg);0<=xg&&(this._names.splice(xg,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(fg){return 0<=this._names.indexOf(fg)}};var xm=[null];xc.prototype=vc.prototype={constructor:xc,select:function(fg){"function"!=typeof fg&&(fg=_m(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg,Sg=xg[wg],Cg=Sg.length,zg=bg[wg]=Array(Cg),Mg=0;Mg<Cg;++Mg)(Tg=Sg[Mg])&&(kg=fg.call(Tg,Tg.__data__,Mg,Sg))&&("__data__"in Tg&&(kg.__data__=Tg.__data__),zg[Mg]=kg);return new xc(bg,this._parents)},selectAll:function(fg){"function"!=typeof fg&&(fg=hm(fg));for(var xg=this._groups,vg=xg.length,bg=[],wg=[],Tg=0;Tg<vg;++Tg)for(var kg,Sg=xg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)(kg=Sg[zg])&&(bg.push(fg.call(kg,kg.__data__,zg,Sg)),wg.push(kg));return new xc(bg,wg)},filter:function(fg){"function"!=typeof fg&&(fg=sm(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=[],zg=0;zg<Sg;++zg)(Tg=kg[zg])&&fg.call(Tg,Tg.__data__,zg,kg)&&Cg.push(Tg);return new xc(bg,this._parents)},data:function(fg,xg){if(!fg)return Yg=Array(this.size()),zg=-1,this.each(function(qg){Yg[++zg]=qg}),Yg;var vg=xg?Hd:Ld,bg=this._parents,wg=this._groups;"function"!=typeof fg&&(fg=gm(fg));for(var Tg=wg.length,kg=Array(Tg),Sg=Array(Tg),Cg=Array(Tg),zg=0;zg<Tg;++zg){var Mg=bg[zg],Ug=wg[zg],Ag=Ug.length,Yg=fg.call(Mg,Mg&&Mg.__data__,zg,bg),Eg=Yg.length,Pg=Sg[zg]=Array(Eg),Dg=kg[zg]=Array(Eg);vg(Mg,Ug,Pg,Dg,Cg[zg]=Array(Ag),Yg,xg);for(var Fg,Lg,Hg=0,Xg=0;Hg<Eg;++Hg)if(Fg=Pg[Hg]){for(Hg>=Xg&&(Xg=Hg+1);!(Lg=Dg[Xg])&&++Xg<Eg;);Fg._next=Lg||null}}return kg=new xc(kg,bg),kg._enter=Sg,kg._exit=Cg,kg},enter:function(){return new xc(this._enter||this._groups.map(mm),this._parents)},exit:function(){return new xc(this._exit||this._groups.map(mm),this._parents)},merge:function(fg){for(var xg=this._groups,vg=fg._groups,bg=xg.length,wg=vg.length,Tg=Math.min(bg,wg),kg=Array(bg),Sg=0;Sg<Tg;++Sg)for(var Cg,zg=xg[Sg],Mg=vg[Sg],Ug=zg.length,Ag=kg[Sg]=Array(Ug),Yg=0;Yg<Ug;++Yg)(Cg=zg[Yg]||Mg[Yg])&&(Ag[Yg]=Cg);for(;Sg<bg;++Sg)kg[Sg]=xg[Sg];return new xc(kg,this._parents)},order:function(){for(var fg=this._groups,xg=-1,vg=fg.length;++xg<vg;)for(var bg,wg=fg[xg],Tg=wg.length-1,kg=wg[Tg];0<=--Tg;)(bg=wg[Tg])&&(kg&&kg!==bg.nextSibling&&kg.parentNode.insertBefore(bg,kg),kg=bg);return this},sort:function(fg){fg||(fg=Xd);for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg){for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=Array(Sg),zg=0;zg<Sg;++zg)(Tg=kg[zg])&&(Cg[zg]=Tg);Cg.sort(function(Mg,Ug){return Mg&&Ug?fg(Mg.__data__,Ug.__data__):!Mg-!Ug})}return new xc(bg,this._parents).order()},call:function(){var fg=arguments[0];return arguments[0]=this,fg.apply(null,arguments),this},nodes:function(){var fg=Array(this.size()),xg=-1;return this.each(function(){fg[++xg]=this}),fg},node:function(){for(var fg=this._groups,xg=0,vg=fg.length;xg<vg;++xg)for(var kg,bg=fg[xg],wg=0,Tg=bg.length;wg<Tg;++wg)if(kg=bg[wg],kg)return kg;return null},size:function(){var fg=0;return this.each(function(){++fg}),fg},empty:function(){return!this.node()},each:function(fg){for(var xg=this._groups,vg=0,bg=xg.length;vg<bg;++vg)for(var wg,Tg=xg[vg],kg=0,Sg=Tg.length;kg<Sg;++kg)(wg=Tg[kg])&&fg.call(wg,wg.__data__,kg,Tg);return this},attr:function(fg,xg){var vg=om(fg);if(2>arguments.length){var bg=this.node();return vg.local?bg.getAttributeNS(vg.space,vg.local):bg.getAttribute(vg)}return this.each((null==xg?vg.local?Id:qd:"function"==typeof xg?vg.local?jd:$d:vg.local?Od:Nd)(vg,xg))},style:function(fg,xg,vg){return 1<arguments.length?this.each((null==xg?Vd:"function"==typeof xg?Zd:Bd)(fg,xg,null==vg?"":vg)):Wd(this.node(),fg)},property:function(fg,xg){return 1<arguments.length?this.each((null==xg?Rd:"function"==typeof xg?Jd:Gd)(fg,xg)):this.node()[fg]},classed:function(fg,xg){var vg=Kd(fg+"");if(2>arguments.length){for(var bg=Qd(this.node()),wg=-1,Tg=vg.length;++wg<Tg;)if(!bg.contains(vg[wg]))return!1;return!0}return this.each(("function"==typeof xg?ic:xg?oc:ac)(vg,xg))},text:function(fg){return arguments.length?this.each(null==fg?lc:("function"==typeof fg?sc:rc)(fg)):this.node().textContent},html:function(fg){return arguments.length?this.each(null==fg?dc:("function"==typeof fg?uc:cc)(fg)):this.node().innerHTML},raise:function(){return this.each(pc)},lower:function(){return this.each(_c)},append:function(fg){var xg="function"==typeof fg?fg:am(fg);return this.select(function(){return this.appendChild(xg.apply(this,arguments))})},insert:function(fg,xg){var vg="function"==typeof fg?fg:am(fg),bg=null==xg?hc:"function"==typeof xg?xg:_m(xg);return this.select(function(){return this.insertBefore(vg.apply(this,arguments),bg.apply(this,arguments)||null)})},remove:function(){return this.each(mc)},datum:function(fg){return arguments.length?this.property("__data__",fg):this.node().__data__},on:function(fg,xg,vg){var bg,wg,Tg=Ud(fg+""),kg=Tg.length;{if(!(2>arguments.length)){for(Sg=xg?Yd:Ad,null==vg&&(vg=!1),bg=0;bg<kg;++bg)this.each(Sg(Tg[bg],xg,vg));return this}var Sg=this.node().__on;if(Sg)for(var Cg,zg=0,Mg=Sg.length;zg<Mg;++zg)for(bg=0,Cg=Sg[zg];bg<kg;++bg)if((wg=Tg[bg]).type===Cg.type&&wg.name===Cg.name)return Cg.value}},dispatch:function(fg,xg){return this.each(("function"==typeof xg?fc:yc)(fg,xg))}};var vm=function(fg){return"string"==typeof fg?new xc([[document.querySelector(fg)]],[document.documentElement]):new xc([[fg]],xm)},bm=function(fg,xg,vg){3>arguments.length&&(vg=xg,xg=cm().changedTouches);for(var bg,wg=0,Tg=xg?xg.length:0;wg<Tg;++wg)if((bg=xg[wg]).identifier===vg)return um(fg,bg);return null},wm=function(){La.event.preventDefault(),La.event.stopImmediatePropagation()},Tm=function(fg){var xg=fg.document.documentElement,vg=vm(fg).on("dragstart.drag",wm,!0);"onselectstart"in xg?vg.on("selectstart.drag",wm,!0):(xg.__noselect=xg.style.MozUserSelect,xg.style.MozUserSelect="none")},km=function(fg){return function(){return fg}};Tc.prototype.on=function(){var fg=this._.on.apply(this._,arguments);return fg===this._?this:fg};var Sm,Cm,zm=0,Mm=0,Um=0,Am=1e3,Ym=0,Em=0,Pm=0,Dm="object"==typeof performance&&performance.now?performance:Date,Fm="function"==typeof requestAnimationFrame?requestAnimationFrame:function(fg){setTimeout(fg,17)};Uc.prototype=Ac.prototype={constructor:Uc,restart:function(fg,xg,vg){if("function"!=typeof fg)throw new TypeError("callback is not a function");vg=(null==vg?zc():+vg)+(null==xg?0:+xg),this._next||Cm===this||(Cm?Cm._next=this:Sm=this,Cm=this),this._call=fg,this._time=vg,Fc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fc())}};var Lm=function(fg,xg,vg){var bg=new Uc;return xg=null==xg?0:+xg,bg.restart(function(wg){bg.stop(),fg(wg+xg)},xg,vg),bg},Hm=vd("start","end","interrupt"),Xm=[],qm=0,Im=1,Nm=2,Om=3,$m=4,jm=5,Vm=6,Bm=function(fg,xg,vg,bg,wg,Tg){var kg=fg.__transition;if(!kg)fg.__transition={};else if(vg in kg)return;qc(fg,vg,{name:xg,index:bg,group:wg,on:Hm,tween:Xm,time:Tg.time,delay:Tg.delay,duration:Tg.duration,ease:Tg.ease,timer:null,state:qm})},Zm=function(fg,xg){var vg,bg,wg,Tg=fg.__transition,kg=!0;if(Tg){for(wg in xg=null==xg?null:xg+"",Tg)(vg=Tg[wg]).name===xg?(bg=vg.state>Nm&&vg.state<jm,vg.state=Vm,vg.timer.stop(),bg&&vg.on.call("interrupt",fg,fg.__data__,vg.index,vg.group),delete Tg[wg]):kg=!1;kg&&delete fg.__transition}},Wm=function(fg,xg){var vg;return("number"==typeof xg?xh:xg instanceof gs?gh:(vg=gs(xg))?(xg=vg,gh):Th)(fg,xg)},Rm=vc.prototype.constructor,Gm=0,Jm=vc.prototype;pp.prototype=function(fg){return vc().transition(fg)}.prototype={constructor:pp,select:function(fg){var xg=this._name,vg=this._id;"function"!=typeof fg&&(fg=_m(fg));for(var bg=this._groups,wg=bg.length,Tg=Array(wg),kg=0;kg<wg;++kg)for(var Sg,Cg,zg=bg[kg],Mg=zg.length,Ug=Tg[kg]=Array(Mg),Ag=0;Ag<Mg;++Ag)(Sg=zg[Ag])&&(Cg=fg.call(Sg,Sg.__data__,Ag,zg))&&("__data__"in Sg&&(Cg.__data__=Sg.__data__),Ug[Ag]=Cg,Bm(Ug[Ag],xg,vg,Ag,Ug,Xc(Sg,vg)));return new pp(Tg,this._parents,xg,vg)},selectAll:function(fg){var xg=this._name,vg=this._id;"function"!=typeof fg&&(fg=hm(fg));for(var bg=this._groups,wg=bg.length,Tg=[],kg=[],Sg=0;Sg<wg;++Sg)for(var Cg,zg=bg[Sg],Mg=zg.length,Ug=0;Ug<Mg;++Ug)if(Cg=zg[Ug]){for(var Ag,Yg=fg.call(Cg,Cg.__data__,Ug,zg),Eg=Xc(Cg,vg),Pg=0,Dg=Yg.length;Pg<Dg;++Pg)(Ag=Yg[Pg])&&Bm(Ag,xg,vg,Pg,Yg,Eg);Tg.push(Yg),kg.push(Cg)}return new pp(Tg,kg,xg,vg)},filter:function(fg){"function"!=typeof fg&&(fg=sm(fg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg=xg[wg],Sg=kg.length,Cg=bg[wg]=[],zg=0;zg<Sg;++zg)(Tg=kg[zg])&&fg.call(Tg,Tg.__data__,zg,kg)&&Cg.push(Tg);return new pp(bg,this._parents,this._name,this._id)},merge:function(fg){if(fg._id!==this._id)throw new Error;for(var xg=this._groups,vg=fg._groups,bg=xg.length,wg=vg.length,Tg=Math.min(bg,wg),kg=Array(bg),Sg=0;Sg<Tg;++Sg)for(var Cg,zg=xg[Sg],Mg=vg[Sg],Ug=zg.length,Ag=kg[Sg]=Array(Ug),Yg=0;Yg<Ug;++Yg)(Cg=zg[Yg]||Mg[Yg])&&(Ag[Yg]=Cg);for(;Sg<bg;++Sg)kg[Sg]=xg[Sg];return new pp(kg,this._parents,this._name,this._id)},selection:function(){return new Rm(this._groups,this._parents)},transition:function(){for(var fg=this._name,xg=this._id,vg=_p(),bg=this._groups,wg=bg.length,Tg=0;Tg<wg;++Tg)for(var kg,Sg=bg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)if(kg=Sg[zg]){var Mg=Xc(kg,xg);Bm(kg,fg,vg,zg,Sg,{time:Mg.time+Mg.delay+Mg.duration,delay:0,duration:Mg.duration,ease:Mg.ease})}return new pp(bg,this._parents,fg,vg)},call:Jm.call,nodes:Jm.nodes,node:Jm.node,size:Jm.size,empty:Jm.empty,each:Jm.each,on:function(fg,xg){var vg=this._id;return 2>arguments.length?Xc(this.node(),vg).on.on(fg):this.each(op(vg,fg,xg))},attr:function(fg,xg){var vg=om(fg),bg="transform"===vg?Ah:Wm;return this.attrTween(fg,"function"==typeof xg?(vg.local?Wc:Zc)(vg,bg,Oc(this,"attr."+fg,xg)):null==xg?(vg.local?jc:$c)(vg):(vg.local?Bc:Vc)(vg,bg,xg+""))},attrTween:function(fg,xg){var vg="attr."+fg;if(2>arguments.length)return(vg=this.tween(vg))&&vg._value;if(null==xg)return this.tween(vg,null);if("function"!=typeof xg)throw new Error;var bg=om(fg);return this.tween(vg,(bg.local?Rc:Gc)(bg,xg))},style:function(fg,xg,vg){var bg="transform"==(fg+="")?Uh:Wm;return null==xg?this.styleTween(fg,ip(fg,bg)).on("end.style."+fg,lp(fg)):this.styleTween(fg,"function"==typeof xg?sp(fg,bg,Oc(this,"style."+fg,xg)):rp(fg,bg,xg+""),vg)},styleTween:function(fg,xg,vg){var bg="style."+(fg+="");if(2>arguments.length)return(bg=this.tween(bg))&&bg._value;if(null==xg)return this.tween(bg,null);if("function"!=typeof xg)throw new Error;return this.tween(bg,dp(fg,xg,null==vg?"":vg))},text:function(fg){return this.tween("text","function"==typeof fg?up(Oc(this,"text",fg)):cp(null==fg?"":fg+""))},remove:function(){return this.on("end.remove",ap(this._id))},tween:function(fg,xg){var vg=this._id;if(fg+="",2>arguments.length){for(var bg,wg=Xc(this.node(),vg).tween,Tg=0,kg=wg.length;Tg<kg;++Tg)if((bg=wg[Tg]).name===fg)return bg.value;return null}return this.each((null==xg?Ic:Nc)(vg,fg,xg))},delay:function(fg){var xg=this._id;return arguments.length?this.each(("function"==typeof fg?Jc:Kc)(xg,fg)):Xc(this.node(),xg).delay},duration:function(fg){var xg=this._id;return arguments.length?this.each(("function"==typeof fg?Qc:ep)(xg,fg)):Xc(this.node(),xg).duration},ease:function(fg){var xg=this._id;return arguments.length?this.each(tp(xg,fg)):Xc(this.node(),xg).ease}},function fg(xg){function vg(bg){return Math.pow(bg,xg)}return xg=+xg,vg.exponent=fg,vg}(3),function fg(xg){function vg(bg){return 1-Math.pow(1-bg,xg)}return xg=+xg,vg.exponent=fg,vg}(3),function fg(xg){function vg(bg){return(1>=(bg*=2)?Math.pow(bg,xg):2-Math.pow(2-bg,xg))/2}return xg=+xg,vg.exponent=fg,vg}(3),function fg(xg){function vg(bg){return bg*bg*((xg+1)*bg-xg)}return xg=+xg,vg.overshoot=fg,vg}(1.70158),function fg(xg){function vg(bg){return--bg*bg*((xg+1)*bg+xg)+1}return xg=+xg,vg.overshoot=fg,vg}(1.70158),function fg(xg){function vg(bg){return(1>(bg*=2)?bg*bg*((xg+1)*bg-xg):(bg-=2)*bg*((xg+1)*bg+xg)+2)/2}return xg=+xg,vg.overshoot=fg,vg}(1.70158);var Km=2*Math.PI,Qm=(function fg(xg,vg){function bg(Tg){return xg*Math.pow(2,10*--Tg)*Math.sin((wg-Tg)/vg)}var wg=Math.asin(1/(xg=Math.max(1,xg)))*(vg/=Km);return bg.amplitude=function(Tg){return fg(Tg,vg*Km)},bg.period=function(Tg){return fg(xg,Tg)},bg}(1,.3),function fg(xg,vg){function bg(Tg){return 1-xg*Math.pow(2,-10*(Tg=+Tg))*Math.sin((Tg+wg)/vg)}var wg=Math.asin(1/(xg=Math.max(1,xg)))*(vg/=Km);return bg.amplitude=function(Tg){return fg(Tg,vg*Km)},bg.period=function(Tg){return fg(xg,Tg)},bg}(1,.3),function fg(xg,vg){function bg(Tg){return(0>(Tg=2*Tg-1)?xg*Math.pow(2,10*Tg)*Math.sin((wg-Tg)/vg):2-xg*Math.pow(2,-10*Tg)*Math.sin((wg+Tg)/vg))/2}var wg=Math.asin(1/(xg=Math.max(1,xg)))*(vg/=Km);return bg.amplitude=function(Tg){return fg(Tg,vg*Km)},bg.period=function(Tg){return fg(xg,Tg)},bg}(1,.3),{time:null,delay:0,duration:250,ease:function(fg){return(1>=(fg*=2)?fg*fg*fg:(fg-=2)*fg*fg+2)/2}});vc.prototype.interrupt=function(fg){return this.each(function(){Zm(this,fg)})},vc.prototype.transition=function(fg){var xg,vg;fg instanceof pp?(xg=fg._id,fg=fg._name):(xg=_p(),(vg=Qm).time=zc(),fg=null==fg?null:fg+"");for(var bg=this._groups,wg=bg.length,Tg=0;Tg<wg;++Tg)for(var kg,Sg=bg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)(kg=Sg[zg])&&Bm(kg,fg,xg,zg,Sg,vg||hp(kg,xg));return new pp(bg,this._parents,fg,xg)};var eg=function(fg){return function(){return fg}};gp.prototype={constructor:gp,scale:function(fg){return 1===fg?this:new gp(this.k*fg,this.x,this.y)},translate:function(fg,xg){return 0===fg&0===xg?this:new gp(this.k,this.x+this.k*fg,this.y+this.k*xg)},apply:function(fg){return[fg[0]*this.k+this.x,fg[1]*this.k+this.y]},applyX:function(fg){return fg*this.k+this.x},applyY:function(fg){return fg*this.k+this.y},invert:function(fg){return[(fg[0]-this.x)/this.k,(fg[1]-this.y)/this.k]},invertX:function(fg){return(fg-this.x)/this.k},invertY:function(fg){return(fg-this.y)/this.k},rescaleX:function(fg){return fg.copy().domain(fg.range().map(this.invertX,this).map(fg.invert,fg))},rescaleY:function(fg){return fg.copy().domain(fg.range().map(this.invertY,this).map(fg.invert,fg))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tg=new gp(1,0,0);yp.prototype=gp.prototype;var ng=function(){La.event.preventDefault(),La.event.stopImmediatePropagation()},og=function(fg){return function(){return fg}},ag=function(fg,xg,vg){this.target=fg,this.type=xg,this.selection=vg},ig=function(){La.event.preventDefault(),La.event.stopImmediatePropagation()},lg={name:"drag"},rg={name:"space"},sg={name:"handle"},dg={name:"center"},cg={name:"x",handles:["e","w"].map(Tp),input:function(fg,xg){return fg&&[[fg[0],xg[0][1]],[fg[1],xg[1][1]]]},output:function(fg){return fg&&[fg[0][0],fg[1][0]]}},ug={name:"y",handles:["n","s"].map(Tp),input:function(fg,xg){return fg&&[[xg[0][0],fg[0]],[xg[1][0],fg[1]]]},output:function(fg){return fg&&[fg[0][1],fg[1][1]]}},pg={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Tp),input:function(fg){return fg},output:function(fg){return fg}},_g={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},hg={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},mg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yg={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};La.bisector=Ap,La.extent=function(fg,xg){var vg,bg,wg,Tg=fg.length,kg=-1;if(null==xg){for(;++kg<Tg;)if(null!=(vg=fg[kg])&&vg>=vg)for(bg=wg=vg;++kg<Tg;)null!=(vg=fg[kg])&&(bg>vg&&(bg=vg),wg<vg&&(wg=vg));}else for(;++kg<Tg;)if(null!=(vg=xg(fg[kg],kg,fg))&&vg>=vg)for(bg=wg=vg;++kg<Tg;)null!=(vg=xg(fg[kg],kg,fg))&&(bg>vg&&(bg=vg),wg<vg&&(wg=vg));return[bg,wg]},La.max=function(fg,xg){var vg,bg,wg=fg.length,Tg=-1;if(null==xg){for(;++Tg<wg;)if(null!=(vg=fg[Tg])&&vg>=vg)for(bg=vg;++Tg<wg;)null!=(vg=fg[Tg])&&vg>bg&&(bg=vg);}else for(;++Tg<wg;)if(null!=(vg=xg(fg[Tg],Tg,fg))&&vg>=vg)for(bg=vg;++Tg<wg;)null!=(vg=xg(fg[Tg],Tg,fg))&&vg>bg&&(bg=vg);return bg},La.min=function(fg,xg){var vg,bg,wg=fg.length,Tg=-1;if(null==xg){for(;++Tg<wg;)if(null!=(vg=fg[Tg])&&vg>=vg)for(bg=vg;++Tg<wg;)null!=(vg=fg[Tg])&&bg>vg&&(bg=vg);}else for(;++Tg<wg;)if(null!=(vg=xg(fg[Tg],Tg,fg))&&vg>=vg)for(bg=vg;++Tg<wg;)null!=(vg=xg(fg[Tg],Tg,fg))&&bg>vg&&(bg=vg);return bg},La.line=Op,La.area=function(){function fg(Mg){var Ug,Ag,Yg,Eg,Pg,Dg=Mg.length,Fg=!1,Lg=Array(Dg),Hg=Array(Dg);for(null==Sg&&(zg=Cg(Pg=Oa())),Ug=0;Ug<=Dg;++Ug){if(!(Ug<Dg&&kg(Eg=Mg[Ug],Ug,Mg))===Fg)if(Fg=!Fg)Ag=Ug,zg.areaStart(),zg.lineStart();else{for(zg.lineEnd(),zg.lineStart(),Yg=Ug-1;Yg>=Ag;--Yg)zg.point(Lg[Yg],Hg[Yg]);zg.lineEnd(),zg.areaEnd()}Fg&&(Lg[Ug]=+vg(Eg,Ug,Mg),Hg[Ug]=+wg(Eg,Ug,Mg),zg.point(bg?+bg(Eg,Ug,Mg):Lg[Ug],Tg?+Tg(Eg,Ug,Mg):Hg[Ug]))}if(Pg)return zg=null,Pg+""||null}function xg(){return Op().defined(kg).curve(Cg).context(Sg)}var vg=ja,bg=null,wg=qp(0),Tg=Va,kg=qp(!0),Sg=null,Cg=Np,zg=null;return fg.x=function(Mg){return arguments.length?(vg="function"==typeof Mg?Mg:qp(+Mg),bg=null,fg):vg},fg.x0=function(Mg){return arguments.length?(vg="function"==typeof Mg?Mg:qp(+Mg),fg):vg},fg.x1=function(Mg){return arguments.length?(bg=null==Mg?null:"function"==typeof Mg?Mg:qp(+Mg),fg):bg},fg.y=function(Mg){return arguments.length?(wg="function"==typeof Mg?Mg:qp(+Mg),Tg=null,fg):wg},fg.y0=function(Mg){return arguments.length?(wg="function"==typeof Mg?Mg:qp(+Mg),fg):wg},fg.y1=function(Mg){return arguments.length?(Tg=null==Mg?null:"function"==typeof Mg?Mg:qp(+Mg),fg):Tg},fg.lineX0=fg.lineY0=function(){return xg().x(vg).y(wg)},fg.lineY1=function(){return xg().x(vg).y(Tg)},fg.lineX1=function(){return xg().x(bg).y(wg)},fg.defined=function(Mg){return arguments.length?(kg="function"==typeof Mg?Mg:qp(!!Mg),fg):kg},fg.curve=function(Mg){return arguments.length?(Cg=Mg,null!=Sg&&(zg=Cg(Sg)),fg):Cg},fg.context=function(Mg){return arguments.length?(null==Mg?Sg=zg=null:zg=Cg(Sg=Mg),fg):Sg},fg},La.curveBasis=function(fg){return new Za(fg)},La.curveMonotoneX=function(fg){return new nl(fg)},La.curveNatural=function(fg){return new al(fg)},La.curveCardinal=$p,La.curveCatmullRom=jp,La.curveStep=function(fg){return new ll(fg,.5)},La.curveStepAfter=function(fg){return new ll(fg,1)},La.curveStepBefore=function(fg){return new ll(fg,0)},La.curveLinear=Np,La.timeMillisecond=Zp,La.timeSecond=Gp,La.timeMinute=Jp,La.timeHour=Kp,La.timeDay=Qp,La.timeWeek=e_,La.timeMonth=n_,La.timeYear=o_,La.formatDefaultLocale=pl,La.formatLocale=v_,La.timeFormatLocale=gl,La.timeFormatDefaultLocale=cs,La.scaleLinear=nd,La.scaleLog=dd,La.scalePow=ud,La.scaleTime=function(){return hd(o_,n_,e_,Qp,Kp,Jp,Gp,Zp,La.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},La.axisRight=function(fg){return xd(Gh,fg)},La.axisTop=function(fg){return xd(Rh,fg)},La.axisBottom=function(fg){return xd(Jh,fg)},La.axisLeft=function(fg){return xd(Kh,fg)},La.zoom=function(){function fg(Rg){Rg.on("wheel.zoom",Cg).on("mousedown.zoom",zg).on("dblclick.zoom",Mg).on("touchstart.zoom",Ug).on("touchmove.zoom",Ag).on("touchend.zoom touchcancel.zoom",Yg).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",bp)}function xg(Rg,Gg){return(Gg=Math.max(Lg,Math.min(Hg,Gg)))===Rg.k?Rg:new gp(Gg,Rg.x,Rg.y)}function vg(Rg,Gg,Jg){var Kg=Gg[0]-Jg[0]*Rg.k,Qg=Gg[1]-Jg[1]*Rg.k;return Kg===Rg.x&&Qg===Rg.y?Rg:new gp(Rg.k,Kg,Qg)}function bg(Rg,Gg){var Jg=Rg.invertX(Gg[0][0])-Xg,Kg=Rg.invertX(Gg[1][0])-qg,Qg=Rg.invertY(Gg[0][1])-Ig,ey=Rg.invertY(Gg[1][1])-Ng;return Rg.translate(Kg>Jg?(Jg+Kg)/2:Math.min(0,Jg)||Math.max(0,Kg),ey>Qg?(Qg+ey)/2:Math.min(0,Qg)||Math.max(0,ey))}function wg(Rg){return[(+Rg[0][0]+ +Rg[1][0])/2,(+Rg[0][1]+ +Rg[1][1])/2]}function Tg(Rg,Gg,Jg){Rg.on("start.zoom",function(){kg(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){kg(this,arguments).end()}).tween("zoom",function(){var Kg=this,Qg=arguments,ey=kg(Kg,Qg),ty=Fg.apply(Kg,Qg),ny=Jg||wg(ty),oy=Math.max(ty[1][0]-ty[0][0],ty[1][1]-ty[0][1]),ay=Kg.__zoom,iy="function"==typeof Gg?Gg.apply(Kg,Qg):Gg,ly=$g(ay.invert(ny).concat(oy/ay.k),iy.invert(ny).concat(oy/iy.k));return function(ry){if(1===ry)ry=iy;else{var sy=ly(ry),dy=oy/sy[2];ry=new gp(dy,ny[0]-sy[0]*dy,ny[1]-sy[1]*dy)}ey.zoom(null,ry)}})}function kg(Rg,Gg){for(var Jg,Kg=0,Qg=jg.length;Kg<Qg;++Kg)if((Jg=jg[Kg]).that===Rg)return Jg;return new Sg(Rg,Gg)}function Sg(Rg,Gg){this.that=Rg,this.args=Gg,this.index=-1,this.active=0,this.extent=Fg.apply(Rg,Gg)}function Cg(){if(Dg.apply(this,arguments)){var Rg=kg(this,arguments),Gg=this.__zoom,Jg=Math.max(Lg,Math.min(Hg,Gg.k*Math.pow(2,-La.event.deltaY*(La.event.deltaMode?120:1)/500))),Kg=pm(this);if(Rg.wheel)Rg.mouse[0][0]===Kg[0]&&Rg.mouse[0][1]===Kg[1]||(Rg.mouse[1]=Gg.invert(Rg.mouse[0]=Kg)),clearTimeout(Rg.wheel);else{if(Gg.k===Jg)return;Rg.mouse=[Kg,Gg.invert(Kg)],Zm(this),Rg.start()}ng(),Rg.wheel=setTimeout(function(){Rg.wheel=null,Rg.end()},Zg),Rg.zoom("mouse",bg(vg(xg(Gg,Jg),Rg.mouse[0],Rg.mouse[1]),Rg.extent))}}function zg(){if(!Pg&&Dg.apply(this,arguments)){var Rg=kg(this,arguments),Gg=vm(La.event.view).on("mousemove.zoom",function(){if(ng(),!Rg.moved){var ey=La.event.clientX-Kg,ty=La.event.clientY-Qg;Rg.moved=ey*ey+ty*ty>Wg}Rg.zoom("mouse",bg(vg(Rg.that.__zoom,Rg.mouse[0]=pm(Rg.that),Rg.mouse[1]),Rg.extent))},!0).on("mouseup.zoom",function(){Gg.on("mousemove.zoom mouseup.zoom",null),wc(La.event.view,Rg.moved),ng(),Rg.end()},!0),Jg=pm(this),Kg=La.event.clientX,Qg=La.event.clientY;Tm(La.event.view),fp(),Rg.mouse=[Jg,this.__zoom.invert(Jg)],Zm(this),Rg.start()}}function Mg(){if(Dg.apply(this,arguments)){var Rg=this.__zoom,Gg=pm(this),Jg=Rg.invert(Gg),Kg=bg(vg(xg(Rg,Rg.k*(La.event.shiftKey?.5:2)),Gg,Jg),Fg.apply(this,arguments));ng(),0<Og?vm(this).transition().duration(Og).call(Tg,Kg,Gg):vm(this).call(fg.transform,Kg)}}function Ug(){if(Dg.apply(this,arguments)){var Rg,Gg,Jg,Kg,Qg=kg(this,arguments),ey=La.event.changedTouches,ty=ey.length;for(fp(),Gg=0;Gg<ty;++Gg)Jg=ey[Gg],Kg=[Kg=bm(this,ey,Jg.identifier),this.__zoom.invert(Kg),Jg.identifier],Qg.touch0?Qg.touch1||(Qg.touch1=Kg):(Qg.touch0=Kg,Rg=!0);if(Eg&&(Eg=clearTimeout(Eg),!Qg.touch1))return Qg.end(),void((Kg=vm(this).on("dblclick.zoom"))&&Kg.apply(this,arguments));Rg&&(Eg=setTimeout(function(){Eg=null},Bg),Zm(this),Qg.start())}}function Ag(){var Rg,Gg,Jg,Kg,Qg=kg(this,arguments),ey=La.event.changedTouches,ty=ey.length;for(ng(),Eg&&(Eg=clearTimeout(Eg)),Rg=0;Rg<ty;++Rg)Gg=ey[Rg],Jg=bm(this,ey,Gg.identifier),Qg.touch0&&Qg.touch0[2]===Gg.identifier?Qg.touch0[0]=Jg:Qg.touch1&&Qg.touch1[2]===Gg.identifier&&(Qg.touch1[0]=Jg);if(Gg=Qg.that.__zoom,Qg.touch1){var ny=Qg.touch0[0],oy=Qg.touch0[1],ay=Qg.touch1[0],iy=Qg.touch1[1],ly=(ly=ay[0]-ny[0])*ly+(ly=ay[1]-ny[1])*ly,ry=(ry=iy[0]-oy[0])*ry+(ry=iy[1]-oy[1])*ry;Gg=xg(Gg,Math.sqrt(ly/ry)),Jg=[(ny[0]+ay[0])/2,(ny[1]+ay[1])/2],Kg=[(oy[0]+iy[0])/2,(oy[1]+iy[1])/2]}else{if(!Qg.touch0)return;Jg=Qg.touch0[0],Kg=Qg.touch0[1]}Qg.zoom("touch",bg(vg(Gg,Jg,Kg),Qg.extent))}function Yg(){var Rg,Gg,Jg=kg(this,arguments),Kg=La.event.changedTouches,Qg=Kg.length;for(fp(),Pg&&clearTimeout(Pg),Pg=setTimeout(function(){Pg=null},Bg),Rg=0;Rg<Qg;++Rg)Gg=Kg[Rg],Jg.touch0&&Jg.touch0[2]===Gg.identifier?delete Jg.touch0:Jg.touch1&&Jg.touch1[2]===Gg.identifier&&delete Jg.touch1;Jg.touch1&&!Jg.touch0&&(Jg.touch0=Jg.touch1,delete Jg.touch1),Jg.touch0?Jg.touch0[1]=this.__zoom.invert(Jg.touch0[0]):Jg.end()}var Eg,Pg,Dg=xp,Fg=vp,Lg=0,Hg=1/0,Xg=-Hg,qg=Hg,Ig=Xg,Ng=qg,Og=250,$g=Eh,jg=[],Vg=vd("start","zoom","end"),Bg=500,Zg=150,Wg=0;return fg.transform=function(Rg,Gg){var Jg=Rg.selection?Rg.selection():Rg;Jg.property("__zoom",bp),Rg===Jg?Jg.interrupt().each(function(){kg(this,arguments).start().zoom(null,"function"==typeof Gg?Gg.apply(this,arguments):Gg).end()}):Tg(Rg,Gg)},fg.scaleBy=function(Rg,Gg){fg.scaleTo(Rg,function(){return this.__zoom.k*("function"==typeof Gg?Gg.apply(this,arguments):Gg)})},fg.scaleTo=function(Rg,Gg){fg.transform(Rg,function(){var Jg=Fg.apply(this,arguments),Kg=this.__zoom,Qg=wg(Jg),ey=Kg.invert(Qg);return bg(vg(xg(Kg,"function"==typeof Gg?Gg.apply(this,arguments):Gg),Qg,ey),Jg)})},fg.translateBy=function(Rg,Gg,Jg){fg.transform(Rg,function(){return bg(this.__zoom.translate("function"==typeof Gg?Gg.apply(this,arguments):Gg,"function"==typeof Jg?Jg.apply(this,arguments):Jg),Fg.apply(this,arguments))})},Sg.prototype={start:function(){return 1==++this.active&&(this.index=jg.push(this)-1,this.emit("start")),this},zoom:function(Rg,Gg){return this.mouse&&"mouse"!==Rg&&(this.mouse[1]=Gg.invert(this.mouse[0])),this.touch0&&"touch"!==Rg&&(this.touch0[1]=Gg.invert(this.touch0[0])),this.touch1&&"touch"!==Rg&&(this.touch1[1]=Gg.invert(this.touch1[0])),this.that.__zoom=Gg,this.emit("zoom"),this},end:function(){return 0==--this.active&&(jg.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(Rg){Ed(new mp(fg,Rg,this.that.__zoom),Vg.apply,Vg,[Rg,this.that,this.args])}},fg.filter=function(Rg){return arguments.length?(Dg="function"==typeof Rg?Rg:eg(!!Rg),fg):Dg},fg.extent=function(Rg){return arguments.length?(Fg="function"==typeof Rg?Rg:eg([[+Rg[0][0],+Rg[0][1]],[+Rg[1][0],+Rg[1][1]]]),fg):Fg},fg.scaleExtent=function(Rg){return arguments.length?(Lg=+Rg[0],Hg=+Rg[1],fg):[Lg,Hg]},fg.translateExtent=function(Rg){return arguments.length?(Xg=+Rg[0][0],qg=+Rg[1][0],Ig=+Rg[0][1],Ng=+Rg[1][1],fg):[[Xg,Ig],[qg,Ng]]},fg.duration=function(Rg){return arguments.length?(Og=+Rg,fg):Og},fg.interpolate=function(Rg){return arguments.length?($g=Rg,fg):$g},fg.on=function(){var Rg=Vg.on.apply(Vg,arguments);return Rg===Vg?fg:Rg},fg.clickDistance=function(Rg){return arguments.length?(Wg=(Rg=+Rg)*Rg,fg):Math.sqrt(Wg)},fg},La.zoomIdentity=tg,La.zoomTransform=yp,La.drag=function(){function fg(Hg){Hg.on("mousedown.drag",xg).on("touchstart.drag",wg).on("touchmove.drag",Tg).on("touchend.drag touchcancel.drag",kg).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function xg(){if(!Ug&&Ag.apply(this,arguments)){var Hg=Sg("mouse",Yg.apply(this,arguments),pm,this,arguments);Hg&&(vm(La.event.view).on("mousemove.drag",vg,!0).on("mouseup.drag",bg,!0),Tm(La.event.view),bc(),Mg=!1,Cg=La.event.clientX,zg=La.event.clientY,Hg("start"))}}function vg(){if(wm(),!Mg){var Hg=La.event.clientX-Cg,Xg=La.event.clientY-zg;Mg=Hg*Hg+Xg*Xg>Lg}Pg.mouse("drag")}function bg(){vm(La.event.view).on("mousemove.drag mouseup.drag",null),wc(La.event.view,Mg),wm(),Pg.mouse("end")}function wg(){if(Ag.apply(this,arguments)){var Hg,Xg,qg=La.event.changedTouches,Ig=Yg.apply(this,arguments),Ng=qg.length;for(Hg=0;Hg<Ng;++Hg)(Xg=Sg(qg[Hg].identifier,Ig,bm,this,arguments))&&(bc(),Xg("start"))}}function Tg(){var Hg,Xg,qg=La.event.changedTouches,Ig=qg.length;for(Hg=0;Hg<Ig;++Hg)(Xg=Pg[qg[Hg].identifier])&&(wm(),Xg("drag"))}function kg(){var Hg,Xg,qg=La.event.changedTouches,Ig=qg.length;for(Ug&&clearTimeout(Ug),Ug=setTimeout(function(){Ug=null},500),Hg=0;Hg<Ig;++Hg)(Xg=Pg[qg[Hg].identifier])&&(bc(),Xg("end"))}function Sg(Hg,Xg,qg,Ig,Ng){var Og,$g,jg,Vg=qg(Xg,Hg),Bg=Dg.copy();if(Ed(new Tc(fg,"beforestart",Og,Hg,Fg,Vg[0],Vg[1],0,0,Bg),function(){return null!=(La.event.subject=Og=Eg.apply(Ig,Ng))&&($g=Og.x-Vg[0]||0,jg=Og.y-Vg[1]||0,!0)}))return function Zg(Wg){var Rg,Gg=Vg;switch(Wg){case"start":Pg[Hg]=Zg,Rg=Fg++;break;case"end":delete Pg[Hg],--Fg;case"drag":Vg=qg(Xg,Hg),Rg=Fg;}Ed(new Tc(fg,Wg,Og,Hg,Rg,Vg[0]+$g,Vg[1]+jg,Vg[0]-Gg[0],Vg[1]-Gg[1],Bg),Bg.apply,Bg,[Wg,Ig,Ng])}}var Cg,zg,Mg,Ug,Ag=kc,Yg=Sc,Eg=Cc,Pg={},Dg=vd("start","drag","end"),Fg=0,Lg=0;return fg.filter=function(Hg){return arguments.length?(Ag="function"==typeof Hg?Hg:km(!!Hg),fg):Ag},fg.container=function(Hg){return arguments.length?(Yg="function"==typeof Hg?Hg:km(Hg),fg):Yg},fg.subject=function(Hg){return arguments.length?(Eg="function"==typeof Hg?Hg:km(Hg),fg):Eg},fg.on=function(){var Hg=Dg.on.apply(Dg,arguments);return Hg===Dg?fg:Hg},fg.clickDistance=function(Hg){return arguments.length?(Lg=(Hg=+Hg)*Hg,fg):Math.sqrt(Lg)},fg},La.brush=function(){return Mp(pg)},La.brushX=function(){return Mp(cg)},La.brushY=function(){return Mp(ug)},La.mouse=pm,La.select=vm,La.selection=vc,La.selectAll=function(fg){return"string"==typeof fg?new xc([document.querySelectorAll(fg)],[document.documentElement]):new xc([null==fg?[]:fg],xm)},La.selectorAll=hm,La.touch=bm}(this.d3=this.d3||{});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}_isFullscreen(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}_getParent(){var b=Polymer.dom(this).getOwnerRoot();return b?b.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}toggleFullscreen(b){b.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen(),this._resetZoom&&this._resetZoom(b)}fullScreenChanged(){this._fullScreenChanged()}_fullScreenChanged(){requestAnimationFrame(()=>{var b=this._isFullscreen(),c=this._getParent();b?(this.fullscreen=!0,this.style.position='fixed',this.style.top='0',this.style.left='0',this.style.right='0',this.style.bottom='0',this.style.zIndex='1000',this.style['border-radius']='0px',document.body.style.overflow='hidden',c&&c.classList.add('fullscreen')):(this.fullscreen=!1,this.style.position='',this.style.top='',this.style.left='',this.style.right='',this.style.bottom='',this.style.zIndex='',this.style['border-radius']='',document.body.style.overflow='',c&&c.classList.remove('fullscreen')),this.notifyResize&&this.notifyResize()})}computeFullscreenIcon(b){return b?'fullscreen-exit':'fullscreen'}}};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>class DeviceSVG extends WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)){static get is(){return'device-svg'}static get properties(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object,value:function(){return{}}},items:{type:Array,value:function(){return[]}},exceeding:{type:Array,value:function(){return[]}},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}static get observers(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}_openedChanged(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}open(a){this.setSvg(a.detail),this.opened=!0}close(){this.opened=!1}_srcChanged(a){a&&this._recentSrc!==a&&(this._recentSrc=a,this._fetch(a,'GET','include','xml').then(this._registerXML.bind(this)).catch(b=>{console.log(a,b)}))}_registerXML(a){if(a&&a.documentElement){var b=document.importNode(a.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(b,this.$.svgContainer.firstChild),this._svg=d3.select(b).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var c=this._svg.attr('viewBox').split(' ');this._width=c[2]-c[0],this._height=c[3]-c[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}_initialize(){setTimeout(()=>{this._selectableItemsChanged(),this._selectSelected(),this._selectExceeds()},0)}_initZoom(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}_selectedItemsChanged(){var a=this.item,b=this.items;a&&Object.keys(a).length||b&&b.length?(!this.src&&(a&&a.svg&&a.svg.path?this.src=a.svg.path:0<b.length&&b[b.length-1].svg&&b[b.length-1].svg.path&&(this.src=b[b.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}_exceedingChanged(){var a=this.exceeding;a&&a.length?(!this.src&&a[a.length-1].svg&&a[a.length-1].svg.path&&(this.src=a[a.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}_initialChanged(a){this.src&&a&&this._resetZoom()}_selectableItemsChanged(){if(this._mainG&&this._mainG.node&&this.src&&this.selectableItems&&this.selectableItems.items){var a=this;for(var b in this.selectableItems.items)this._mainG.selectAll(this.selectableItems.items[b]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',b).on('click',function(){a._zoomToElement(this),a._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==this.selectableItems.minZoom&&(this.minZoom=this.selectableItems.minZoom),void 0!==this.selectableItems.maxZoom&&(this.maxZoom=this.selectableItems.maxZoom),void 0!==this.selectableItems.zoomPartition&&(this.zoomPartition=this.selectableItems.zoomPartition),this._initZoom(),this._inialized=!0}}_zoom(){this._mainG.attr('transform',d3.event.transform)}_zoomToElement(a){if(void 0!==a&&this._svg.node()){var b=this._calcCenterZoom(a),c=d3.zoomIdentity.translate(b.x,b.y).scale(b.k);this._svg.node().__zoom=c,this._mainG.transition(300).attr('transform',c)}}_selectSelected(){requestAnimationFrame(()=>{var a=this.multi?this.items||[]:[];this.item&&Object.keys(this.item).length&&-1===a.indexOf(this.item)&&a.push(this.item);var b;if(b=ShadyCSS&&!0===ShadyCSS.nativeShadow?this.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),b&&a&&a.length){for(var d,f,g,h=0;h<a.length;h++)if(a[h]&&a[h].color&&a[h].svg&&a[h].svg.selector&&b&&b.sheet&&b.sheet.cssRules&&b.sheet.insertRule){d=a[h].svg.selector.split(',');for(var l=0;l<d.length;l++){f=d[l]+'.'+this.selectedClass,g=!1;for(var m=0;m<b.sheet.cssRules.length;m++)b.sheet.cssRules[h].selectorText===f&&(g=!0);!1===g&&b.sheet.insertRule(f+' {\nfill: '+a[h].color+' !important;\n}',b.sheet.cssRules.length)}}this.updateStyles(),this.select(a,this.selectedClass)}})}_selectExceeds(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}select(a,b){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+b).classed(b,!1);var c,d=[];if(Array.isArray(a)){for(var f=0;f<a.length;f++)a[f].svg&&a[f].svg.selector&&d.push(a[f].svg.selector);d=d.join(',')}else d=a&&a.svg&&a.svg.selector?a.svg.selector:'';if(''===d||(c=this._mainG.selectAll(d)).classed(b,!0).empty())return void(this.opened&&this._resetZoom());var g,h=[],l=this;c.each(function(){g=this.getBoundingClientRect(),h[0]=(h[0]>g.left?g.left:h[0])||g.left,h[1]=(h[1]>g.top?g.top:h[1])||g.top,h[2]=(h[2]<g.right?g.right:h[2])||g.right,h[3]=(h[3]<g.bottom?g.bottom:h[3])||g.bottom}),g={left:h[0],top:h[1],height:h[3]-h[1],width:h[2]-h[0]},this.opened&&this._zoomToElement(g)}}_calcCenterZoom(a){var b=this.getBoundingClientRect();if(void 0===b||void 0===a||0===b.height||0===b.width)return{x:0,y:0,k:1};var c,g,f=b.height/b.width;c=void 0===a.nodeType?a:a.getBoundingClientRect();var h=this._mainG.node().getBBox(),l=this._mainG.node().getBoundingClientRect(),m=h.width/l.width||1,n=(c.left-l.left)*m+h.x,o=(c.top-l.top)*m+h.y,p=this._height,q=this._width,r=this._ratio,s=this.zoomPartition;return g=f<r?Math.min(q/(s*c.width*m*f),p/(s*c.height*m)):Math.min(q/(s*c.width*m),q*f/(s*c.height*m)),g<this.minZoom?g=this.minZoom:g>this.maxZoom&&(g=this.maxZoom),f<r?(n=-g*n+(p/f-g*c.width*m)/2,o=-g*o+(p-g*c.height*m)/2):(n=-g*n+(q-g*c.width*m)/2,o=-g*o+(q*f-g*c.height*m)/2),isNaN(n)||isNaN(o)||isNaN(g)?{x:0,y:0,k:1}:{x:n,y:o,k:g}}notifyResize(){this._resetZoom()}_resetZoom(a){a&&(a.preventDefault(),a.stopPropagation()),requestAnimationFrame(()=>{if(this.opened&&this._mainG&&this._mainG.node&&this.src&&(this._mainG.selectAll('.clicked').classed('clicked',!1),!this.initiallyZoomToAll)){if(this.item&&Object.keys(this.item).length||this.items&&this.items.length)return void this._selectSelected();if(this.exceeding.length)return void this._selectExceeds();if(this.initial){var b;if(!(b=this._mainG.selectAll(this.initial)).empty())return void this.select([{svg:{selector:this.initial}}],'initial')}this._zoomToElement(this._mainG.node())}})}}customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}static get observers(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}_domainXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.domain(b)}_domainYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.domain(b).nice()}_rangeXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.range(b)}_rangeYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.range(b).nice()}_computeScaleFn(b,c,d){if(void 0!==b){var f='time'===b?d3.scaleTime():'ln'===b?d3.scaleLog().base(Math.E):'log'===b?d3.scaleLog().base(c||10):'log\u2082'===b?d3.scaleLog().base(2):'log\u2081\u2080'===b?d3.scaleLog().base(10):'\u221A'===b?d3.scalePow().exponent(0.5):'pow'===b?d3.scalePow().exponent(c||1):d3.scaleLinear();return'x'===d?(f.ticks(this.ticksX||10),this.domainX&&f.domain(this.domainX),this.rangeX&&f.range(this.rangeX)):'y'===d&&(f.ticks(this.ticksY||10),this.domainY&&f.domain(this.domainY),this.rangeY&&f.range(this.rangeY),f.nice()),f}}static get _VALID_SCALES(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}_SCALE_USES_BASE(b){return'log'===b||'pow'===b}_IS_LOG_SCALE(b){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return class extends WebvisualMixins.ScaleMixin(c){constructor(){super()}static get properties(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:24},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}static get observers(){return['_setDateNumberFormat(localeNumber, localeDate)']}_rangeXChanged(e){super._rangeXChanged(e),e[1]&&(this.ticksX=Math.ceil(e[1]/60))}_rangeYChanged(e){super._rangeYChanged(e),e[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.axisMargin)):this.ticksY=Math.ceil(e[0]/50))}_computeAxisNode(e,f,i,j){if(void 0!==e){var k=this.axisColor||'';i=i||this.axisTitle||'';var l=this._isVertical(f);if(j&&j.node){var n=j.node();n&&n.parentElement&&n.parentElement.removeChild(n),j=null}var o=e.append('svg:g').classed('axis',!0).attr('orient',f).classed('y',l).classed('vertical',l).classed('x',!l).classed('expanded',!0).style('color',k);return o.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,o)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),o.append('svg:title').text(i),o.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,f)),o.node()._genitor=this,o.node()._axis=o,o._left=0,o._right=0,o._bottom=0,o._top=0,o}}_updateAxisBrushGenerator(e,f,i){i=i||8;var j=[[0,0],[e[1],e[0]]];'left'===f?j[0][0]=-i:'right'===f?j[1][0]=i:'top'===f?j[0][1]=-i:'bottom'===f&&(j[1][1]=i),this.extent(j)}_computeAxisGenerator(e,f,i,j){if(e&&void 0!==f&&void 0!==i){var k=this.tickSize||6;return('left'===e?d3.axisLeft(f):'right'===e?d3.axisRight(f):'top'===e?d3.axisTop(f):d3.axisBottom(f)).tickSize(k).tickFormat(this._computeFormatFn(i,j))}}_setAxisProperties(e,f,i){e.classed('expanded',i),f.tickFormat(i?null:'')}_removeAxes(){if(this.axisX&&this.axisX.node){var e=this.axisX.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisX=null}if(this.axisY&&this.axisY.node){var e=this.axisY.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisY=null}delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}_toggleAxis(e){var f=e.classed('expanded');e.classed('expanded',!f),this.sizeChanged()}_onAxisClicked(e){this._activeToggleAxisJob&&clearTimeout(this._axisToggleAxisJob),this._activeToggleAxisJob=setTimeout(()=>{this._toggleAxis(e),this._activeToggleAxisJob=null},300)}_onAxisContextMenu(e){d3.event&&d3.event.preventDefault();'left'===e||'right'===e?(this.axisY._isBrushed=!1,this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.scaleX.domain(this.domainX),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}_onAxisMouseover(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}_onAxisMouseleave(){}_onAxisDragStart(){d3.select(this).raise().classed('dragged',!0);var e=d3.select(this).classed('vertical');e?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}_onAxisDragged(){var e=d3.select(this).classed('vertical'),f=0,i=0;e?f=(this._axis._left||0)+d3.event.x-this._startleft:i=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+f+','+i+')')}_onAxisDragEnd(){d3.select(this).classed('dragged',!1);var j,e=d3.select(this).classed('vertical'),f=0,i=0,k=this._genitor;if(e){if(f=(this._axis._left||0)+d3.event.x-this._startleft,j=f>k.rangeX[1]/2?'right':'left',j!==k.axisOrientY)return k.axisGeneratorY=k._computeAxisGenerator(k.axisOrientY=j,k.scaleY,k.scalingY,k.scaleBaseY).ticks(k.ticksY).tickSize(k.tickSize).tickFormat(k.axisY.classed('expanded')?k._computeFormatFn(k.scalingY,k.scaleBaseY):''),k.axisY=k._computeAxisNode(k._axisInsertionPoint,j,k.item&&k.item.mount,k.axisY).classed('expanded',!0).call(k.axisGeneratorY),void k.sizeChanged();f=this._axis._left}else{if(i=(this._axis._top||0)+d3.event.y-this._starttop,j=i>k.rangeY[0]/2?'bottom':'top',j!==k.axisOrientX)return k.axisGeneratorX=k._computeAxisGenerator(k.axisOrientX=j,k.scaleX,k.scalingX,k.scaleBaseX).ticks(k.ticksX).tickFormat(k.axisX.classed('expanded')?k._computeFormatFn(k.scalingX,k.scaleBaseX):''),k.axisX=k._computeAxisNode(k._axisInsertionPoint,j,k.item&&k.item.mount,k.axisX).classed('expanded',!0).call(k.axisGeneratorX),void k.sizeChanged();i=this._axis._top}d3.select(this).attr('transform','translate('+f+','+i+')'),this._startleft=0,this._starttop=0}_onAxisBrushEnd(e){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var f=d3.event.selection;if(f){if('y'===e){var j=f.map(this.scaleY.invert,this.scaleY).sort((k,l)=>{return k>l});this.axisY._isBrushed=!0,this.scaleY.domain(j).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)}else{var j=f.map(this.scaleX.invert,this.scaleX).sort((k,l)=>{return k>l});this.axisX._isBrushed=!0,this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)}this.redraw()}}}_axisColorChanged(e){this.axisX&&this.axisX.style('color',e),this.axisY&&this.axisY.style('color',e)}static get _VALID_AXIS_POSITIONS(){return['top','right','bottom','bottom']}_isVertical(e){return'left'===e||'right'===e}_computeFormatFn(e){return'time'===e?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}sizeChanged(){}redraw(){}formatTime(e){return(d3.timeSecond(e)<e?this.timeFormat('.%L'):d3.timeMinute(e)<e?this.timeFormat(':%S'):d3.timeHour(e)<e?this.timeFormat('%H:%M'):d3.timeDay(e)<e?this.timeFormat('%X'):d3.timeMonth(e)<e?d3.timeWeek(e)<e?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(e)<e?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeRange(e,f,i){var j=(f[1]-f[0]).valueOf()/i;return(100>j?this.timeFormat(':%S.%L'):500>j?this.timeFormat(':%M:%S.%L'):5E3>j?this.timeFormat(':%M:%S'):2E4>j?this.timeFormat('%H:%M:%S'):6E4>j?this.timeFormat('%H:%M'):36E5>j?this.timeFormat('%X'):864E5>j?this.timeFormat('%d.%m'):6048E5>j?this.timeFormat('%d.%m'):24192E5>j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeAbsolute(e){var f=e%315576E5,i=(e-f)/315576E5,j=f%864E5,k=(f-j)/864E5,l=j%36E5,n=(j-l)/36E5,o=l%6E4,p=(l-o)/6E4,q=o%1E3,r=(o-q)/1E3,t='';return i&&(t+=i+'y '),k&&(t+=k+'d '),n&&(t+=n+'h '),p&&(t+=p+'m '),r&&(t+=r+'s '),q&&(t+=q+'ms'),t}formatNumber(e){return this.numberFormat(',g')(e)}formatIndicator(e,f){return e&&e.from&&e.to?f<e.from||f>e.to?'\u2717':'\u2713':f?'\u2717':'\u2713'}_setDateNumberFormat(e,f){void 0===f||void 0===e||(f&&(this.localeDate=f,d3.timeFormatDefaultLocale(f),this.timeFormat=d3.timeFormatLocale(f).format),e&&(this.localeNumber=e,d3.formatDefaultLocale(e),this.numberFormat=d3.formatLocale(e).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}};</script><dom-module id="device-graph"><template><style></style></template><script>class DeviceGraph extends WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-graph'}static get properties(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3.75},viewLength:{type:Number,value:3e4},storeInside:{type:Boolean,value:!0,readOnly:!0},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}constructor(){super(),this._isAttached=!1,this._chart=null,this._areaGenerator=d3.area().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y0(()=>{return this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?this._chart._height:this.scaleY(0)}).y1(a=>{return this.scaleY(a.y)}),this._lineGenerator=d3.line().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y(a=>{return this.scaleY(a.y)}),this.bisectDate=d3.bisector((a,b)=>{return a.x-b})}static get observers(){return['_itemChanged(item)','_lineChanged(hasLine)','_areaChanged(hasArea)','_thresholdChanged(item.threshold)']}get _containerRoot(){var a=Polymer.dom(this).getOwnerRoot();return a?a.host||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.item&&this.addNodes()}disconnectedCallback(){this._isAttached=!1,super.disconnectedCallback(),this.removeNodes()}addNodes(){this._isAttached&&this.clearValues(!0);var a=this._containerRoot;return a&&'DEVICE-CHART'===a.nodeName?a._isAttached?void(this._chart=a,this._axisInsertionPoint=a._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',a)}removeNodes(){var a;this.axisX&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this.axisY&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}_areaChanged(a){if(this._chart&&this._chart._area)if(!!a)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var b=this._area.node();b&&b.parentElement&&b.parentElement.removeChild(b),this._area=null}}_lineChanged(a){if(this._chart&&this._chart._line)if(!!a)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var b=this._line.node();b&&b.parentElement&&b.parentElement.removeChild(b),this._line=null}}_thresholdChanged(a){if(this._chart&&this._chart._boundery)if(a)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){var b=this.boundery.node();b&&b.parentElement&&b.parentElement.removeChild(b),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.mount||'#000')}}_setColorProperties(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}_itemChanged(a){return this._isAttached?a&&a.mount?void this.addNodes():void this.removeNodes():void 0}insertValues(a,b){if(void 0!==a){var b=b||(0<this.viewLength?this.viewLength:a.length);if(b&&(a=a.slice(a.length-b,a.length)),a.map(function(g){return{x:+g.x,y:+g.y,state:+g.state}}),this.storeInside){this.values=this.values.concat(a);var c=this.min(this.values,'x'),f=this.max(this.values,'x');void 0!==c&&void 0!==f&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(c<this._chart.domainX[0]&&this._chart.set('domainX',[c,this._chart.domainX[1]]),f>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],f])):this.set('domainX',[c,f])),c=this.min(this.values,'y'),f=this.max(this.values,'y'),void 0!==c&&void 0!==f&&(c===f&&(c--,f++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(c<this._chart.domainY[0]&&this._chart.set('domainY',[c,this._chart.domainY[1]]),f>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],f])):this.set('domainY',[c,f]))}this.renderInsertedValues(a)}}spliceValues(a){for(var b=0;b<a.length;b++){for(var c=this.values.length-1;0<=c&&!(this.values[c].x===a[b].x);c--);-1!==c&&this.values.splice(c,1)}this.redraw()}renderInsertedValues(a){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var b;this._chart.domainX&&this._chart.domainX.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainX',this.domainX),b=!0),this._chart.domainY&&this._chart.domainY.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainY',this.domainY),b=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(b=!0),this.redraw(b,a)}}sizeChanged(){this._isAttached&&this._chart.sizeChanged()}redraw(a){if(this._isAttached){if(a)return void this._chart.redraw(!0);var c=this.values||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(c)),this.hasLine&&this._line.attr('d',this._lineGenerator(c)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var g,f=[],h=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',k=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',l=this.item.color||'#000';void 0!==this.item.threshold.from&&(g=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:k}),f.push({o:g+'%',c:l}))),void 0!==this.item.threshold.to&&(g=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:l}),f.push({o:g+'%',c:h})));var n=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(f);n.attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.enter().append('stop').attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.exit().remove()}}}_getDomain(a,b){return new Promise((c,f)=>{var g='y'===a,h=g?this.scalingY:this.scalingX;this.requestRange(a).then(k=>{if(k[0]!==void 0&&k[1]!==void 0){g&&k[0]===k[1]&&(k[0]--,k[1]++);var l=this._IS_LOG_SCALE(h);if(l){var n=0<k[0]*k[1];n&&0>=k[0]&&(k[0]=Math.sign(k[1])*Number.EPSILON),n&&0>=k[1]&&(k[1]=Math.sign(k[0])*Number.EPSILON)}b&&('x'===a?this.set('domainX',k):'y'===a&&this.set('domainY',k))}c({domain:k,key:a})}).catch(k=>{f(k)})})}_defined(a){if(!Number.isFinite(a.y))return null;return 0>=a.y&&this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?null:!0}_closestPoint(a){function b(B){var C=c(new Date(B.x))-a[0],D=f(B.y)-a[1];return C*C+D*D}var c=this.scaleX,f=this.scaleY,g=this.values,h=c.invert(a[0]),k=Math.ceil(this._chart._width/g.length),l=Math.pow(Math.ceil(g.length/this._chart._width),2),n=this.bisectDate.left(g,h,0,g.length-1),o=b(g[n]),q=Math.sqrt(o)/l,r=c.invert(a[0]-q),s=this.bisectDate.left(g,r,0,n),t=2*n-s;0>s&&(s=0),t>g.length&&(t=g.length);var w,u=o,z=n;for(A=s;A<t;A+=k)(w=b(g[A]))<=u&&(n=A,u=w);z=n;for(var A=n+1;A<t&&A<n+k-1;A++)(w=b(g[A]))<=u&&(u=w,z=A);for(var A=n-1;A>s&&A>n-k+1;A--)(w=b(g[A]))<=u&&(u=w,z=A);return g[z]}_closestInterpolatedPoint(a,b){function c(A){var B=A.x-a[0],C=A.y-a[1];return B*B+C*C}b=b||this._area.node()||this._line.node();for(var h,k,n,q,f=b.getTotalLength(),g=2*Math.ceil(f/this._chart._width/2),l=Infinity,o=0;o<=f;o+=g)(q=c(n=b.getPointAtLength(o)))<l&&(h=n,k=o,l=q);for(g/=2;0.5<g;){var r,s,t,u,w,z;0<=(t=k-g)&&(w=c(r=b.getPointAtLength(t)))<l?(h=r,k=t,l=w):(u=k+g)<=f&&(z=c(s=b.getPointAtLength(u)))<l?(h=s,k=u,l=z):g/=2}return h={x:this.scaleX(h.x),y:this.scaleY(h.y)},h.distance=Math.sqrt(l),h}setColor(a){super.setColor.call(this,a),this._setColorProperties()}clearValues(a){super.clearValues.call(this,a)}_getStrokeColor(a){if(this.item.threshold)switch(a.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}_lineWidthChanged(a){this._line&&this._line.attr&&this._line.attr('stroke-width',a)}_interpolationChanged(a){var b;switch(a){case'Basis Spline':b=d3.curveBasis;break;case'Monotoner Spline':b=d3.curveMonotoneX;break;case'Kubischer Spline':b=d3.curveNatural;break;case'Cardinaler Spline':b=d3.curveCardinal;break;case'Catmull-Rom-Spline':b=d3.curveCatmullRom;break;case'Stufe (mitte)':b=d3.curveStep;break;case'Stufe (davor)':b=d3.curveStepAfter;break;case'Stufe (danach)':b=d3.curveStepBefore;break;default:b=d3.curveLinear;}this._areaGenerator.curve(b),this._lineGenerator.curve(b),this.redraw()}_onAxisClicked(a){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((a._isBrushed||this._isZoomed)&&this._chart._resetZoom())):void super._onAxisClicked(a)}_onAxisMouseover(a,b){super._onAxisMouseover(a,b),this._area&&this._area.raise(),this._line&&this._line.raise()}}customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:visible;font-family:inherit !important;}text{fill:currentColor;stroke:white;stroke-width:0.1;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;}.grid{mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 200ms linear;}.axis:hover path{fill-opacity:0.2;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.8;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;mix-blend-mode:hard-light;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *:not(.dot),
      #delta > *:not(.dot){stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:exclusion;pointer-events:none;}#zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;stroke:#000;stroke-opacity:0.75;stroke-width:1px;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{color:var(--primary-text-color, #111);position:absolute;top:0;right:var(--control-right, 0px);display:flex;flex-direction:column;}.selectbox > select{opacity:1;}[hidden]{display:none !important;}</style><div id="svgContainer"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" on-click="_closeControl"><defs><marker id="arrowToLeft" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m 5.29167,-1.7197893 v 3.439581 L 0,2.6966667e-6 Z"></path></marker><marker id="arrowToRight" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m -5.2916667,-1.7197893 v 3.439581 L 3.3333333e-6,2.6966667e-6 Z"></path></marker><marker id="stub" markerWidth="5" markerHeight="5" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-1 -5 2 10"><path d="M0,0 m-1,-5 L1,-5 L1,5 L-1,5 z"></path><path d="M -2,0 M -5,-1 H 1 V 1 H -5 Z"></path></marker><filter x="0" y="0" width="1" height="1" id="solid"><feFlood flood-color="white"></feFlood><feComposite in="SourceGraphic"></feComposite></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" on-contextmenu="_resetZoom"></rect><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="âˆš">âˆš</option><option value="ln">ln</option><option value="logâ‚‚">logâ‚‚</option><option value="logâ‚â‚€">logâ‚â‚€</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div><div class="checkbox"><input type="checkbox" name="multiX" checked="{{multiAxesX::change}}">mehrere x-Achsen</div><div class="checkbox"><input type="checkbox" name="multiY" checked="{{multiAxesY::change}}">mehrere y-Achsen</div></iron-collapse><section id="control"><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>class DeviceChart extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))){static get is(){return'device-chart'}static get properties(){return{opened:{type:Boolean},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}constructor(){super(),this._width=0,this._height=0,this._graphs=new Set}get _self(){return this}static get observers(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}_localizeChanged(c){this.set('localeDate',c('date')),this.set('localeNumber',c('number'))}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}connectedCallback(){super.connectedCallback(),this._buildLayout()}_buildLayout(){this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._controlcontent=d3.select(this.$.controlcontent),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',()=>{this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob)},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([0.95,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',()=>{this._debouncedHideInfo(this)},{passive:!0}).on('mousemove',()=>{var c=d3.mouse(this._chart.node());requestAnimationFrame(()=>{var f,h,j;if(this._graphs.forEach(l=>{if(l.values&&l.values.length){var n=l._closestPoint(c),o=Math.pow(c[0]-l.scaleX(n.x),2)+Math.pow(c[1]-l.scaleY(n.y),2);(void 0===j||o<j)&&(j=o,h=n,f=l)}}),h){var k='#fff';if(f.item.threshold)switch(h.state){case 1:k=f.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:k=f.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusedValue=h,this._focusedValue.g=f,this._focusedValue._left=this.multiAxesY?f.axisY._left:this.axisY._left,this._focusedValue._top=this.multiAxesX?f.axisX._top:this.axisX._top,this._focusDot.datum(h).attr('fill',k).attr('r',f.dotRadius),this._showInfo(),this._moveInfo(h)}else this._debouncedHideInfo()})},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[]),this._debouncedHideInfo(),this._fixedValue=null,this._focusedValue=null}sizeChanged(){this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(()=>{this.sizeLayout()},0))}sizeLayout(){function c(u,v){return'left'===u?(this._left=n,this._right=0,n-=v):'right'===u?(this._left=0,this._right=k,k+=v):(this._left=0,this._right=0),'top'===u?(this._bottom=0,this._top=j,j-=v):'bottom'===u?(this._bottom=l,this._top=0,l+=v):(this._bottom=0,this._top=0),!0}function f(u,v,w){return this._left+=this._right,this._top+=this._bottom,this._bottom=0,this._right=0,'right'===u?this._left+=v:'bottom'===u&&(this._top+=w),!0}if(this.opened&&this._isAttached){var h=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===h.height||0===h.width)return void requestAnimationFrame(()=>{this.sizeChanged()});this._debouncedHideInfo();var j=-2,k=1,l=1,n=-2,o=[];if(this._graphs.forEach(u=>{if(u._isAttached){if(!u.axisX.attr('hidden')){var v=u.axisX.classed('expanded')?u.axisSizeX:u.tickSize+u.axisMargin;o.push(c.call(u.axisX,u.axisOrientX,v))}if(!u.axisY.attr('hidden')){var v=u.axisY.classed('expanded')?u.axisSizeY:u.tickSize+u.axisMargin;o.push(c.call(u.axisY,u.axisOrientY,v))}}}),!this.axisX.attr('hidden')){var r=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.axisMargin;o.push(c.call(this.axisX,this.axisOrientX,r))}if(!this.axisY.attr('hidden')){var r=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.axisMargin;o.push(c.call(this.axisY,this.axisOrientY,r))}Promise.all(o).then(()=>{var u=this.$.svg.getBoundingClientRect();this._width=Math.abs(u.width-Math.abs(n||0)-Math.abs(k||0)),this._height=Math.abs(u.height-Math.abs(l||0)-Math.abs(j||0)),this.set('rangeX',[0,this._width]),this.set('rangeY',[this._height,0]),this._zoom.attr('height',this._height).attr('width',this._width),this._zoomBehavior.translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]);var v=[];this._graphs.forEach(w=>{w._isAttached&&(!w.axisX.attr('hidden')&&v.push(f.call(w.axisX,w.axisOrientX,this._width,this._height)),!w.axisY.attr('hidden')&&v.push(f.call(w.axisY,w.axisOrientY,this._width,this._height)))}),this.axisX.attr('hidden')||v.push(f.call(this.axisX,this.axisOrientX,this._width,this._height)),this.axisY.attr('hidden')||v.push(f.call(this.axisY,this.axisOrientY,this._width,this._height)),Promise.all(v).then(()=>{this._chart._top=j,this._chart._right=k,this._chart._bottom=l,this._chart._left=n,this._control.transition(100).style('transform','translate('+-this._chart._right+'px,'+-this._chart._bottom+'px)'),this._controlcontent.transition(100).style('transform','translate('+-this._chart._right+'px,'+-this._chart._top+'px)'),this._chart.select('clipPath#clip rect').transition(100).attr('width',this._width).attr('height',this._height),this._chart.select('rect#plot').transition(100).attr('width',this._width).attr('height',this._height),this._chart.transition(100).attr('transform','translate('+(-this._chart._left||0)+','+(-this._chart._top||0)+')'),this._focusY.attr('y1',this._height),this._graphs.forEach(w=>{w._isAttached&&(!w.axisX.attr('hidden')&&(w.axisGeneratorX=w._computeAxisGenerator.call(w,w.axisOrientX,w.scaleX,w.scalingX,w.scaleBaseX).ticks(w.ticksX).tickSize(w.tickSize).tickFormat(w.axisX.classed('expanded')?w._computeFormatFn(w.scalingX,w.scaleBaseX):''),w._updateAxisBrushGenerator.call(w.axisBrushGeneratorX,this.rangeX,w.axisOrientX),w.axisX.select('.brush').raise().call(w.axisBrushGeneratorX),w.axisX.attr('transform','translate('+(w.axisX._left||0)+','+(w.axisX._top||0)+')')),!w.axisY.attr('hidden')&&(w.axisGeneratorY=w._computeAxisGenerator.call(w,w.axisOrientY,w.scaleY,w.scalingY,w.scaleBaseY).ticks(w.ticksY).tickSize(w.tickSize).tickFormat(w.axisY.classed('expanded')?w._computeFormatFn(w.scalingY,w.scaleBaseY):''),w._updateAxisBrushGenerator.call(w.axisBrushGeneratorY,this.rangeY,w.axisOrientY),w.axisY.select('.brush').raise().call(w.axisBrushGeneratorY),w.axisY.attr('transform','translate('+(w.axisY._left||0)+','+(w.axisY._top||0)+')')))}),this.axisX.attr('hidden')||(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),this.axisY.attr('hidden')||(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!this.domainX||!this.domainY||this.domainX.some(w=>{return void 0===w||null===w})||this.domainY.some(w=>{return void 0===w||null===w})?this.redraw(!0):this.redraw()})})}}_redomain(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(c=>{c&&console.warn(c)}))}redraw(c){return this._isAttached?c?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(()=>{this.axisX.attr('hidden')||this.axisX.transition(100).attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')').call(this.axisGeneratorX),this.axisY.attr('hidden')||this.axisY.transition(100).attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')').call(this.axisGeneratorY),this._graphs.forEach(f=>{f._isAttached&&(f.axisX.attr('hidden')?f.set('domainX',this.domainX):f.axisX.transition(100).attr('transform','translate('+(f.axisX._left||0)+','+(f.axisX._top||0)+')').call(f.axisGeneratorX),f.axisY.attr('hidden')?f.set('domainY',this.domainY):f.axisY.transition(100).attr('transform','translate('+(f.axisY._left||0)+','+(f.axisY._top||0)+')').call(f.axisGeneratorY),f.redraw())}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),this._updateInfo()},0)):void 0}_multiAxesChanged(c,f){if(this._isAttached){var h;this._graphs.forEach(j=>{j._isAttached&&(h=!c||null,j.axisX.attr('hidden',h),h=!f||null,j.axisY.attr('hidden',h))}),h=!!c||null,this.axisX.attr('hidden',h),h=!!f||null,this.axisY.attr('hidden',h),h=f||c?null:!0,this.axisX.select('.brush').attr('hidden',h),this.axisY.select('.brush').attr('hidden',h),this._redomain(),this.sizeChanged()}}_addGraph(c){this._graphs.add(c),this.sizeChanged()}_removeGraph(c){this._graphs.delete(c),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),c=null,this._fixedValue=null,this._focusedValue=null,this.sizeChanged()}_getDomain(){return new Promise((c,f)=>{var h=[],j=[];this._graphs.forEach(k=>{h.push(k._getDomain('x',this.multiAxesX)),j.push(k._getDomain('y',this.multiAxesY))}),Promise.all(h).then(k=>{for(var l,n,o,r=0;r<k.length;r++)l=void 0===l||l>k[r].domain[0]?k[r].domain[0]:l,n=void 0===n||n<k[r].domain[1]?k[r].domain[1]:n;(l===void 0||n===void 0)&&c(),o=[l,n],this.set('domainX',o),this.scaleX.domain(o),!1===this.multiAxesX&&this._graphs.forEach(u=>{u.axisX._isBrushed=!1,u.set('domainX',o),u.scaleX.domain(o)}),Promise.all(j).then(u=>{for(var v,w,z,A=0;A<u.length;A++)v=void 0===v||v>u[A].domain[0]?u[A].domain[0]:v,w=void 0===w||w<u[A].domain[1]?u[A].domain[1]:w;(v===void 0||w===void 0)&&c(),z=[v,w],this.set('domainY',z),!1===this.multiAxesY&&this._graphs.forEach(B=>{B.axisY._isBrushed=!1,B.set('domainY',z)}),c()}).catch(u=>{f(u)})}).catch(k=>{f(k)})})}insertValues(c){this._graphs.forEach(f=>{f&&f._isAttached&&f.item&&f.item.mount&&c[f.item.mount]&&f.insertValues(c[f.item.mount])})}clearValues(){this._graphs.forEach(c=>{c&&c._isAttached&&c.clearValues()})}_moveInfo(c){if(Number.isFinite(c.g.scaleY(c.y))){this._info.text(this.formatTime(+c.x)+' '+this.formatNumber(+c.y));var f=this._fixedValue;if(f){var h=Math.abs(f.x-c.x),j=Math.abs(f.y-c.y);this._infoDeltaX.text(this.formatTimeAbsolute(h)),this._infoDeltaY.text(this.formatNumber(j))}this._updateInfo()}}_showInfo(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}_showDelta(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}_debouncedHideInfo(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(()=>{this._hideInfo(),this._activeHideInfoJob=null},750)}_hideInfo(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}_hideDelta(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}_updateInfo(){if(this._focusedValue&&''!==this._info.attr('hidden')){var c=this._focusedValue,f=c.g.scaleX(+c.x),h=c.g.scaleY(+c.y);if(f&&h){switch(this._alignText(this._info.node(),f,h,null,1.5*this._focusDot.attr('r')),this.modus){case'delta':var j=this._fixedValue;if(j&&j.x&&c.x!==j.x&&j.y&&c.y!==j.y){var k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);this._deltaX.attr('x1',f).attr('x2',k),this._deltaY.attr('y1',h).attr('y2',l),l<h?(this._deltaY.attr('x1',f).attr('x2',f),this._alignText(this._infoDeltaY.node(),f,(l+h)/2,null,null,null,'middle')):(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(l+h)/2,null,null,null,'middle')),l<h||k<f?(this._deltaX.attr('y1',l).attr('y2',l),this._alignText(this._infoDeltaX.node(),(k+f)/2,l,null,null,null,'middle')):(this._deltaX.attr('y1',h).attr('y2',h),this._alignText(this._infoDeltaX.node(),(k+f)/2,h,null,null,null,'middle')),this._deltaDot.attr('cy',l).attr('cx',k)}else this._hideDelta();case'integral':default:this._focusX.attr('x1',c._left).attr('x2',f).attr('y2',h).attr('y1',h),this._focusY.attr('y1',c._top).attr('y2',h).attr('x2',f).attr('x1',f),this._focusDot.attr('cy',h).attr('cx',f);}this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}_alignText(c,f,h,j,k,l,n){j=j||0,k=k||0;var o=c.getBBox(),r=this._height,u=this._width,l=l||'middle',n=n||'ideographic',v=j,w=k;'middle'===l?v+=o.width/2:'end '===l?v+=o.width:void 0;'ideographic'===n?w+=o.height:'middle'===n?w+=o.height/2:'hanging'===n?w-=o.height:void 0;0>=h-w?n='hanging':h+w>r&&(h=r-w),f+v>=u?l='end':0>=f-v&&(l='start'),c.setAttribute('x',f+j),c.setAttribute('y',h-k),c.setAttribute('text-anchor',l),c.setAttribute('alignment-baseline',n)}_modusChanged(c){switch(c){case'zoom':break;case'delta':break;case'integral':break;default:}this._fixedValue=null,this._focusedValue=null}_dotClicked(c){switch(this.modus){case'zoom':var f=this._zoom.node().__zoom,h=c.g.scaleX(+c.x)-this._width/6,j=(c.g.scaleY(+c.y)||0)-this._height/6,k=3*f.k;j=(f.y-j)/f.k,h=(f.x-h)/f.k,this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(k).translate(h,j));break;case'delta':var l=this._fixedValue;l&&l.x&&l.y&&l.x===c.x&&l.y===c.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=c,this._deltaDot.datum(this._fixedValue).attr('cx',n=>{return n.g.scaleX(n.x)}).attr('cy',n=>{return n.g.scaleY(n.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}closeMenu(){this.showMenu=!1}changeInterpolation(c){this._graphs.forEach(h=>{h&&h._isAttached&&h.set('interpolation',c)})}_onAxisBrushEnd(c){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var f=d3.event.selection;if(f){if(!this.multiAxesY&&!this.multiAxesX)return'x'===c&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===c&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));var h='y'===c;if(h){var j=f.map(this.scaleY.invert,this.scaleY).sort((r,u)=>{return r>u});this._graphs.forEach(r=>{r.scaleY.domain(j).nice(),r.axisGeneratorY.scale(r.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(j).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null);var k=this._zoom.node().__zoom,l=k.k*this._height/(f[1]-f[0]),n=(k.y-f[0])/k.k;this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(l).translate(0,n))}if(!h){var j=f.map(this.scaleX.invert,this.scaleX).sort((r,u)=>{return r>u});this._graphs.forEach(r=>{r.scaleX.domain(j),r.axisGeneratorX.scale(r.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null);var k=this._zoom.node().__zoom,l=k.k*this._width/(f[1]-f[0]),o=(k.x-f[0])/k.k;this._zoom.transition().duration(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(l).translate(o,0))}this._graphs.forEach(r=>{r.redraw()}),this._updateInfo()}}}_onZoomed(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var c=d3.event.transform;if(this.domainX&&this.domainY){var j,f=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),h=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());this.multiAxesX||(j=f.domain(),this._graphs.forEach(k=>{k.scaleX.domain(j),k.axisGeneratorX.scale(k.scaleX)}),this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.multiAxesY||(j=h.domain(),this._graphs.forEach(k=>{k.scaleY.domain(j),k.axisGeneratorY.scale(k.scaleY)}),this.scaleY.domain(j),this.axisY.call(this.axisGeneratorY.scale(h))),this._graphs.forEach(k=>{k.redraw()}),this._isZoomed=1!==c.k||0!==c.x||0!==c.y,this._updateInfo()}}}_onAxisClicked(c){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((c._isBrushed||this._isZoomed)&&this._resetZoom())):void super._onAxisClicked(c)}_onAxisContextMenu(c){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():super._onAxisContextMenu(c),this._debouncedHideInfo()}_closeControl(){this.showControl=!1}_resetZoom(c){d3.event?d3.event.preventDefault():c&&c.preventDefault&&c.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.transition().duration(200).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(f=>{f.axisX._isBrushed=!1,f.axisY._isBrushed=!1,f.scaleX.domain(f.domainX),f.scaleY.domain(f.domainY),f.axisX.call(f.axisGeneratorX.scale(f.scaleX)),f.axisY.call(f.axisGeneratorY.scale(f.scaleY))}),this._hideInfo(),this._redomain()}}customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>