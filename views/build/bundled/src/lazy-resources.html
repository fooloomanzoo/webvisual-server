<html><head></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="webvisual-app.html"><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,'dom-bind':1,'dom-if':1,'dom-repeat':1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var b=this._valueToItem(this.selected);b?this._selection.select(b):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var c,b=0;c=this.items[b];b++)if(this._valueForItem(c)==a)return b;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return b==void 0?a.getAttribute(this.attrForSelected):b},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var d,b=a.target,c=this.items;b&&b!=this;){if(d=c.indexOf(b),0<=d){var f=this._indexToValue(d);return void this._itemActivate(f,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(e){return null!==e&&e!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>class TabsOverlay extends Polymer.Element{static get is(){return'tabs-overlay'}static get properties(){return{target:{type:Object,observer:'_targetChanged'}}}constructor(){super(),this._lastTarget=void 0,this._transitionsInFlight=[]}ready(){super.ready(),this.addEventListener('transitionend',a=>this._onTransitionend(a))}_targetChanged(a,b){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(b,a),this._lastTarget=this.target)}_onTransitionend(a){let b=this._transitionsInFlight.indexOf(a.propertyName);0<=b&&this._transitionsInFlight.splice(b,1),this._transitionsInFlight.length||this._moveComplete()}_moveComplete(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}_move(a,b){let c=a||b,d=b||a;if(c||d){let f=a?1:0,g=b?1:0;Polymer.dom.flush();let h=this.getBoundingClientRect(),j=window.getComputedStyle(this),k=c.getBoundingClientRect(),l=d.getBoundingClientRect();if(0===l.top&&0===l.right&&0===l.bottom&&0===l.left&&0===l.width&&0===l.height)return this.style.transitionProperty='none',this.style.opacity=g,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';let m=parseFloat(j.top||'0')+(k.top-h.top),n=parseFloat(j.right||'0')-(k.right-h.right),o=parseFloat(j.bottom||'0')-(k.bottom-h.bottom),p=parseFloat(j.left||'0')+(k.left-h.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';let q=[this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=f+''];m+=l.top-k.top,n-=l.right-k.right,o-=l.bottom-k.bottom,p+=l.left-k.left;let r=[0.2,0.2,0.2,0.2,0.2],s=[0,0,0,0,0];k.left<l.left&&k.right<l.right?s[3]=0.1:k.left>l.left&&k.right>l.right&&(s[1]=0.1),k.top<l.top&&k.bottom<l.bottom?s[0]=0.1:k.top>l.top&&k.bottom>l.bottom&&(s[2]=0.1);let t=[m+'px',n+'px',o+'px',p+'px',g+''],u=['top','right','bottom','left','opacity'];for(let v=0;v<q.length;v++)q[v]!==t[v]&&(0===r[v]&&0===s[v]||this._transitionsInFlight.push(u[v]));requestAnimationFrame(()=>{this.style.transitionDuration=r.map(v=>{return v+'s'}).join(', '),this.style.transitionDelay=s.map(v=>{return v+'s'}).join(', '),this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=g+''})}}}customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>class TabsContainer extends Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element){static get is(){return'tabs-container'}static get properties(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}static get observers(){return['_onSelectedItemChanged(selectedItem)']}connectedCallback(){super.connectedCallback(),this._addScrollListeners()}_addScrollListeners(){this.$.container.addEventListener('scroll',a=>this._onScroll(a),{passive:!0}),this.$.container.addEventListener('wheel',a=>this._onWheel(a),{passive:!0})}_onSelectedItemChanged(a){a&&(!this.multi&&(this.$.overlay.target=a),requestAnimationFrame(()=>{this.vertical?this.$.container.scrollTop=a.offsetTop-this.$.container.offsetTop-this.$.container.clientHeight/2+a.clientHeight/2:this.$.container.scrollLeft=a.offsetLeft-this.$.container.offsetLeft-this.$.container.clientWidth/2+a.clientWidth/2}))}_onWheel(a){if(a){var b,c;switch(a.deltaMode){case 0:c=0.2;break;case 1:c=20;break;case 2:c=this.$.container.offsetHeight;break;default:c=1;}this.vertical?(b=a.deltaY||0,this.$.container.scrollTop+=b*c):(b=a.deltaX||0,this.$.container.scrollLeft+=b*c)}}_onScroll(a,b){a.stopImmediatePropagation();var c;this.vertical?(c=b&&-b.ddy||0,this.$.container.scrollTop+=c):(c=b&&-b.ddx||0,this.$.container.scrollLeft+=c)}reset(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>class RippleContainer extends Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element){static get is(){return'ripple-container'}constructor(){super(),this._isDown=!1}ready(){super.ready(),this.addEventListener('focus',a=>this._onFocus(a),!0),this.addEventListener('blur',a=>this._onBlur(a),!0),this.addEventListener('down',a=>this._rippleDown(a)),this.addEventListener('up',a=>this._rippleUp(a))}_onFocus(a){this._isDown||this._rippleDown(a)}_onBlur(a){this._rippleUp(a)}_rippleDown(a){this._isDown=!0,this.getRipple().downAction(a)}_rippleUp(a){this._isDown=!1,this.getRipple().upAction(a)}}customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>class TabElement extends Polymer.Element{static get is(){return'tab-element'}}customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style>:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ü" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>class LogoElement extends Polymer.Element{static get is(){return'logo-element'}static get properties(){return{href:{type:String}}}connectedCallback(){super.connectedCallback(),this._addListners()}_addListners(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}_addClass(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.add('animated')})}.bind(this))}_removeClass(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.remove('animated')})}.bind(this))}}customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>class ToggleButton extends Polymer.Element{static get is(){return'toggle-button'}static get properties(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}connectedCallback(){super.connectedCallback(),Polymer.Gestures.addListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.addListener(this,'track',a=>this._ontrack(a))}disconnectedCallback(){super.disconnectedCallback(),Polymer.Gestures.removeListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.removeListener(this,'track',a=>this._ontrack(a))}_ontrack(a){var b=a.detail;'start'===b.state?this._trackStart(b):'track'===b.state?this._trackMove(b):'end'===b.state&&this._trackEnd(b)}_trackStart(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}_trackMove(a){var b=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+b:b)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}_trackEnd(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}_onclicked(){this.checked=!this.checked}}customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>class SVGData extends WebvisualMixins.FetchMixin(Polymer.Element){static get is(){return'svg-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}static get observers(){return['_fetchSvgSource(room, loggedIn)']}_fetchSvgSource(a){if(a){var e=a.split('/').filter(function(g){return''!==g});if(2===e.length){var f=e[0]+'+'+e[1]+'+svgSource.json';this._fetch(f,'GET','include','json','data').catch(g=>{console.log(g)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>class DeviceSocketData extends Polymer.Element{static get is(){return'device-socket-data'}static get properties(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}static get observers(){return['_connect(loggedIn, lazyConnect)']}_connect(a,b){a&&b?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}_createSocketConnection(a,b){a&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(()=>{Webvisual.assignStatusNotifications(this),Webvisual.createSocketConnection(a,b),this.socketRoom&&this.connect(this.socketRoom)},0)}connect(a){return a=a||this.socketRoom,a?void('/'===a.substring(0,1)&&(a=a.slice(1,a.length)),Webvisual.setupConnection(a),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}disconnect(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>class CaptionElement extends Polymer.Element{static get is(){return'device-caption'}static get properties(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}constructor(){super(),this.setAttribute('unresolved','')}getKey(a){return this.keys&&this.keys[a]}_computeReducedCaptionKeys(a,b){var e=Object.keys(b||{});if(0===e.length)return[];var f=[];return!0===this.withoutGroupedKey?f=e.filter(function(g){return a!==g}):!0===this.onlyGroupedKey&&(f=e.filter(function(g){return a===g})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===f.length?e:f}isEmptyCaption(a){return!this.keys[a]}}customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return class extends c{constructor(){super()}static get properties(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}static get observers(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}connectedCallback(){super.connectedCallback(),this._linkElement(this.item,this.noLink)}disconnectedCallback(){super.disconnectedCallback(),this._unlinkElement(),this.clearValues()}_linkElement(d,e){if(d&&d.mount){if(this._olditem){if(d.mount===this._olditem.mount&&!e)return;this._unlinkElement(this._olditem)}return e?void this._unlinkElement(d):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=d,this.clearValues(),this.reset(),this.requestValues(null,null,this.viewLength).then(f=>{for(var g in f)if(g===this.item.mount){this.insertValues(f[g]);break}}).catch(()=>{})))}}_unlinkElement(d){d=d||this.item||this._olditem,window.Webvisual&&Webvisual.retractElement&&d&&d.mount&&(window.Webvisual.retractElement(this,d),this._olditem=null)}getElement(){return this.properties}computeDate(d){return d?864E5>Math.abs(Date.now()-d)?new Date(d).toLocaleTimeString():new Date(d).toLocaleString():''}computeValue(d,e){return this.item&&this.item.isIndicatorLamp?e?'\u2717':'\u2713':d}insertValues(d,e){if(void 0!==d){var e=e||this.viewLength;if(this._initialized||(this._initialized=!0),!e)this.item&&!0===this.item.exceedable&&d.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(d)),this.renderInsertedValues(d);else{var f=d.slice(d.length-e,d.length);this.item&&!0===this.item.exceedable&&f.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(f)),this.renderInsertedValues(f),f.length=0}d.length=0}}spliceValues(d){d&&(!0===this.storeInside&&(this.values=this.values.filter(e=>{return-1===d.indexOf(e)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(d))}resetValues(d){this.values=d,this.notifyPath('values'),this.renderInsertedValues(this.values)}clearValues(){this.values=[],this.notifyPath('values')}requestValues(d,e,f){if(!(this.item&&this.item.mount))return new Promise((h,j)=>{j()});f=f||this.viewLength||1;var g={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:f||1}};return window.Webvisual?new Promise(h=>{window.Webvisual.request(g,h)}):new Promise((h,j)=>{this.values?h(this.values.slice(this.values.length-f,this.values.length)):j()})}requestRange(d){if(!(this.item&&this.item.mount))return new Promise(f=>{f([void 0,void 0])});var e={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:d}};return!this.storeInside&&window.Webvisual?new Promise(f=>{window.Webvisual.request(e,f)}):new Promise(f=>{if(this.values&&this.values.length){var h=this.min(this.values,d),j=this.max(this.values,d);void 0===h&&void 0===j||f([h,j])}f([void 0,void 0])})}min(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g>h&&(g=h);return g}max(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g<h&&(g=h);return g}renderInsertedValues(){}renderSplicedValues(){}renderClearing(){}checkExceedingState(d){this.item&&!1!==this.item.exceedable&&void 0!==d&&(0===d.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}_exceedingChanged(d){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:d}}))}_hasExceededChanged(){}reset(){this.resetColor&&this.resetColor(),super.reset&&super.reset(),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return class extends a{static get observers(){return['setColor(item.color)']}setColor(b){b&&(this.updateStyles({'--device-color':b||null}),this.item.isIndicatorLamp?this.updateStyles({'--device-state-inrange-color':null}):this.updateStyles({'--device-state-inrange-color':b||null})),this.updateStyles()}resetColor(){this.setColor(this.item&&this.item.color||'')}getComputedStyleValue(b){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,b):getComputedStyle(this).getPropertyValue(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}static get observers(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}_addTouchListeners(b,c,d){if(void 0!==c)if(b)this._removeTouchListeners();else{var f=this.eventTarget;f=f?this.$[f]:this,d?(Polymer.Gestures.addListener(f,'down',g=>this._handleTouch(g)),Polymer.Gestures.addListener(f,'up',g=>this._handleTouch(g))):c?Polymer.Gestures.addListener(f,'tap',()=>this.select()):this._removeTouchListeners()}}_removeTouchListeners(){var b=this.eventTarget;b=b?this.$[b]:this,Polymer.Gestures.removeListener(b,'down',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'up',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'tap',()=>this.select())}_handleTouch(b){'down'===b.type?this._lastEvent=b:this._lastEvent&&b.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}_checkedChanged(){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:this.checked}}))}select(b,c){!0===this.selectable&&(this._preventSelectEvent=c,b===void 0?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=b)}deselect(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}reset(){super.reset&&super.reset(),this.deselect()}}};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>class DeviceSign extends WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-sign'}static get properties(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}insertValues(a){a&&a.length?setTimeout(()=>{this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.isIndicatorLamp||(this.$.value.textContent=this.computeValue(b.y)),this.showDate&&(this.$.dateSection.textContent=this.computeDate(b.x)),this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))},0):this.renderClearing()}computeValue(a){return a}renderClearing(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}_requestExceedingDetails(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>class DeviceCheckbox extends WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-checkbox'}static get properties(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}insertValues(a){if(a&&a.length){this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))}else this.renderClearing()}renderClearing(){this._initialized=!1,this.setAttribute('state',null)}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!a||'-1px'===a){var b=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,c=Math.floor(8/3*b);c%2!==b%2&&c++,this.updateStyles({'--box-ink-size':c+'px'})}})}}customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(n){this.style.webkitOverflowScrolling=n===this?'touch':'',this.style.overflow=n===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var n=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(n['padding-top'],10),this._isRTL=!('rtl'!==n.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var n=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),o=n-this._scrollPosition,p=0<=o;if(this._scrollPosition=n,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(o)>this._physicalSize&&0<this._physicalSize){o-=this._scrollOffset;var q=Math.round(o/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=q,this._physicalStart+=q,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var r=this._getReusables(p);p?(this._physicalTop=r.physicalTop,this._virtualStart+=r.indexes.length,this._physicalStart+=r.indexes.length):(this._virtualStart-=r.indexes.length,this._physicalStart-=r.indexes.length),this._update(r.indexes,p?null:r.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(n){var o,p,q,r,s=[],t=this._hiddenContentSize*this._ratio,u=this._virtualStart,w=this._virtualEnd,z=this._physicalCount,A=this._physicalTop+this._scrollOffset,B=this._physicalBottom+this._scrollOffset,C=this._scrollTop,D=this._scrollBottom;for(n?(o=this._physicalStart,p=this._physicalEnd,q=C-A):(o=this._physicalEnd,p=this._physicalStart,q=B-D);r=this._getPhysicalSizeIncrement(o),q-=r,!(s.length>=z||q<=t);)if(n){if(w+s.length+1>=this._virtualCount)break;if(A+r>=C-this._scrollOffset)break;s.push(o),A+=r,o=(o+1)%z}else{if(0>=u-s.length)break;if(A+this._physicalSize-r<=D)break;s.push(o),A-=r,o=0===o?z-1:o-1}return{indexes:s,physicalTop:A-this._scrollOffset}},_update:function(n,o){if(!(n&&0===n.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(n),this._updateMetrics(n),o)for(;o.length;){var p=o.pop();this._physicalTop-=this._getPhysicalSizeIncrement(p)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(n){this._ensureTemplatized();var o,p,q=Array(n);for(o=0;o<n;o++)p=this.stamp(null),q[o]=p.root.querySelector('*'),this._itemsParent.appendChild(p.root);return q},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(n){var o=this._clamp(this._physicalCount+n,c,this._virtualCount-this._virtualStart),p=o-this._physicalCount,q=Math.round(0.5*this._physicalCount);if(!(0>p)){if(0<p){var r=window.performance.now();[].push.apply(this._physicalItems,this._createPool(p)),[].push.apply(this._physicalSizes,Array(p)),this._physicalCount+=p,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=p),this._update(),this._templateCost=(window.performance.now()-r)/p,q=Math.round(0.5*this._physicalCount)}this._virtualEnd===this._virtualCount-1||0===q||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,q)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,q),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var n=this._getReusables(!0);this._physicalTop=n.physicalTop,this._virtualStart+=n.indexes.length,this._physicalStart+=n.indexes.length,this._update(n.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var n={};n.__key__=!0,n[this.as]=!0,n[this.indexAs]=!0,n[this.selectedAs]=!0,n.tabIndex=!0,this._instanceProps=n,this.templatize(this._userTemplate,this.mutableData)}},_itemsChanged:function(n){if('items'===n.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===n.path){this._adjustVirtualIndex(n.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var o=n.value.indexSplices.some(function(p){return this._isIndexRendered(p.index)},this);(!this._isClientFull()||o)&&this._debounceRender(this._render,k)}else'items.length'!==n.path&&this._forwardItemPath(n.path,n.value)},_forwardItemPath:function(n,o){n=n.slice(6);var p=n.indexOf('.')+1;0===p&&(p=n.length);var q=j?parseInt(n.substring(0,p),10):parseInt(n.substring(1,p),10),r=this._offscreenFocusedItem,s=this._isIndexRendered(q),t;s?t=this.modelForElement(this._physicalItems[this._getPhysicalIndex(q)]):r&&(t=this.modelForElement(r));t&&t[this.indexAs]===q&&(n=n.substring(p),n=this.as+(n?'.'+n:''),j?t._setPendingPropertyOrPath(n,o,!1,!0):t.notifyPath(n,o,!0),t._flushProperties&&t._flushProperties(!0),s&&(this._updateMetrics([q]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(n){n.forEach(function(o){if(o.removed.forEach(this._removeItem,this),o.index<this._virtualStart){var p=Math.max(o.addedCount-o.removed.length,o.index-this._virtualStart);this._virtualStart+=p,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=p)}},this)},_removeItem:function(n){this.$.selector.deselect(n),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===n&&this._removeFocusedItem()},_iterateItems:function(n,o){var p,q,r,s;if(2===arguments.length&&o){for(s=0;s<o.length;s++)if(p=o[s],q=this._computeVidx(p),null!=(r=n.call(this,p,q)))return r;}else{for(p=this._physicalStart,q=this._virtualStart;p<this._physicalCount;p++,q++)if(null!=(r=n.call(this,p,q)))return r;for(p=0;p<this._physicalStart;p++,q++)if(null!=(r=n.call(this,p,q)))return r}},_computeVidx:function(n){return n>=this._physicalStart?this._virtualStart+(n-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+n},_assignModels:function(n){this._iterateItems(function(o,p){var q=this._physicalItems[o],r=this.items&&this.items[p];if(null!=r){var s=this.modelForElement(q);s.__key__=this._collection?this._collection.getKey(r):null,this._forwardProperty(s,this.as,r),this._forwardProperty(s,this.selectedAs,this.$.selector.isSelected(r)),this._forwardProperty(s,this.indexAs,p),this._forwardProperty(s,'tabIndex',this._focusedVirtualIndex===p?0:-1),this._physicalIndexForKey[s.__key__]=o,s._flushProperties&&s._flushProperties(!0),q.removeAttribute('hidden')}else q.setAttribute('hidden','')},n)},_updateMetrics:function(n){Polymer.flush?Polymer.flush():Polymer.dom.flush();var o=0,p=0,q=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems(function(s){p+=this._physicalSizes[s]||0,this._physicalSizes[s]=this._physicalItems[s].offsetHeight,o+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},n),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):this._physicalSize=this._physicalSize+o-p,this._physicalAverageCount!==q&&(this._physicalAverage=Math.round((r*q+o)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var n=this._physicalTop;if(this.grid){var o=this._itemsPerRow*this._itemWidth,p=(this._viewportWidth-o)/2;this._iterateItems(function(q,r){var s=r%this._itemsPerRow,t=Math.floor(s*this._itemWidth+p);this._isRTL&&(t*=-1),this.translate3d(t+'px',n+'px',0,this._physicalItems[q]),this._shouldRenderNextRow(r)&&(n+=this._rowHeight)})}else this._iterateItems(function(q){this.translate3d(0,n+'px',0,this._physicalItems[q]),n+=this._physicalSizes[q]})},_getPhysicalSizeIncrement:function(n){return this.grid?this._computeVidx(n)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[n]},_shouldRenderNextRow:function(n){return n%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var n=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==n){this._physicalTop-=n;var o=this._scrollTop;!b&&0<o&&this._resetScrollPosition(o-n)}},_resetScrollPosition:function(n){this.scrollTarget&&0<=n&&(this._scrollTop=n,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(n){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,n=n||0===this._scrollHeight,n=n||this._scrollPosition>=this._estScrollHeight-this._physicalSize,n=n||this.grid&&this.$.items.style.height<this._estScrollHeight,(n||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(n){return this.scrollToIndex(this.items.indexOf(n))},scrollToIndex:function(n){if(!('number'!==typeof n||0>n||n>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){n=this._clamp(n,0,this._virtualCount-1),(!this._isIndexRendered(n)||n>=this._maxVirtualStart)&&(this._virtualStart=this.grid?n-2*this._itemsPerRow:n-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var o=this._physicalStart,p=this._virtualStart,q=0,r=this._hiddenContentSize;p<n&&q<=r;)q+=this._getPhysicalSizeIncrement(o),o=(o+1)%this._physicalCount,p++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+q),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(n){return this.selectIndex(this.items.indexOf(n))},selectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o&&(o[this.selectedAs]=!0),this.updateSizeForIndex(n)}this.$.selector.selectIndex?this.$.selector.selectIndex(n):this.$.selector.select(this.items[n])}},deselectItem:function(n){return this.deselectIndex(this.items.indexOf(n))},deselectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o[this.selectedAs]=!1,this.updateSizeForIndex(n)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(n):this.$.selector.deselect(this.items[n])}},toggleSelectionForItem:function(n){return this.toggleSelectionForIndex(this.items.indexOf(n))},toggleSelectionForIndex:function(n){var o=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(n):this.$.selector.isSelected(this.items[n]);o?this.deselectIndex(n):this.selectIndex(n)},clearSelection:function(){this._iterateItems(function(n){this.modelForElement(this._physicalItems[n])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(n){var o=n?this.listen:this.unlisten;o.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(n){var o=this.modelForElement(n.target);if(o){var p,q,r=Polymer.dom(n).path[0],s=this._itemsParent.node.domHost,t=Polymer.dom(s?s.root:document).activeElement,u=this._physicalItems[this._getPhysicalIndex(o[this.indexAs])];'input'!==r.localName&&'button'!==r.localName&&'select'!==r.localName&&(p=o.tabIndex,o.tabIndex=h,q=t?t.tabIndex:-1,o.tabIndex=p,t&&u!==t&&u.contains(t)&&q!==h||this.toggleSelectionForItem(o[this.as]))}},_multiSelectionChanged:function(n){this.clearSelection(),this.$.selector.multi=n},updateSizeForItem:function(n){return this.updateSizeForIndex(this.items.indexOf(n))},updateSizeForIndex:function(n){return this._isIndexRendered(n)?(this._updateMetrics([this._getPhysicalIndex(n)]),this._positionItems(),null):null},_manageFocus:function(){var n=this._focusedVirtualIndex;0<=n&&n<this._virtualCount?this._isIndexRendered(n)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_isIndexRendered:function(n){return n>=this._virtualStart&&n<=this._virtualEnd},_isIndexVisible:function(n){return n>=this.firstVisibleIndex&&n<=this.lastVisibleIndex},_getPhysicalIndex:function(n){return(this._physicalStart+(n-this._virtualStart))%this._physicalCount},_focusPhysicalItem:function(n){if(!(0>n||n>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(n)||this.scrollToIndex(n);var q,o=this._physicalItems[this._getPhysicalIndex(n)],p=this.modelForElement(o);p.tabIndex=h,o.tabIndex===h&&(q=o),q||(q=Polymer.dom(o).querySelector('[tabindex="'+h+'"]')),p.tabIndex=0,this._focusedVirtualIndex=n,q&&q.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var n=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var o=this.stamp(null);this._focusBackfillItem=o.root.querySelector('*'),this._itemsParent.appendChild(o.root)}this._offscreenFocusedItem=this._physicalItems[n],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[n]=this._focusBackfillItem,this._focusedPhysicalIndex=n,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var n=this._focusedPhysicalIndex,o=this._physicalItems[n];if(o){var p=this.modelForElement(o),q=this.modelForElement(this._offscreenFocusedItem);p[this.as]===q[this.as]?(this._focusBackfillItem=o,p.tabIndex=-1,this._physicalItems[n]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(n){var o=this.modelForElement(n.target),p=this.modelForElement(this._focusedItem),q=null!==this._offscreenFocusedItem,r=this._focusedVirtualIndex;o&&p&&(p===o?!this._isIndexVisible(r)&&this.scrollToIndex(r):(this._restoreFocusedItem(),p.tabIndex=-1,o.tabIndex=0,r=o[this.indexAs],this._focusedVirtualIndex=r,this._focusedPhysicalIndex=this._getPhysicalIndex(r),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],q&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(n){switch(n.keyCode){case 40:n.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(n);}},_clamp:function(n,o,p){return Math.min(p,Math.max(o,n))},_debounceRender:function(n,o){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,o,n.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(n)},_forwardProperty(n,o,p){j?n._setPendingProperty(o,p):n[o]=p},_forwardHostPropV2:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).forwardHostProp(n,o)},this)},_notifyInstancePropV2:function(n,o,p){if(Polymer.Path.matches(this.as,o)){var q=n[this.indexAs];o==this.as&&(this.items[q]=p),this.notifyPath(Polymer.Path.translate(this.as,'items.'+q,o),p)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(n,o,p){0===o.indexOf(this.as+'.')&&this.notifyPath('items.'+n.__key__+'.'+o.slice(this.as.length+1),p)},_forwardParentPath:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).notifyPath(n,o,!0)},this)},_forwardParentProp:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&(this.modelForElement(p)[n]=o)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>class DeviceTable extends WebvisualMixins.DeviceMixin(Polymer.Element){static get is(){return'device-table'}static get properties(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}static get observers(){return['_computeKeysForCaption(keysForCaption, item)']}insertValues(a){a&&a.length?setTimeout(()=>{if(!this._initialized)this.set('values',a.reverse()),this._initialized=!0;else for(var b=0;b<a.length;b++)this.unshift('values',a[b])},0):!this._initialized&&this.renderClearing()}spliceValues(a){setTimeout(()=>{for(var b=[],c=0;c<a.length;c++){for(var d=this.values.length-1;0<=d&&!(this.values[d].x===a[c].x);d--);-1!==d&&(this.values.splice(d,1),b.push({index:d,removed:[this.values[d]],addedCount:0,object:this.values,type:'splice'}))}this.notifySplices('values',b)},0)}renderClearing(){this.$.list.set('items',[])}_computeKeysForCaption(a,b){if(a&&b&&b.keys){var c='';for(var d in this.item.keys)c+=this.item.keys[d]+' ';this.$.caption.textContent=c}else this.caption&&(this.$.caption.textContent=this.caption)}_toggleGridView(){this.$.list.grid=!!!this.$.list.grid}}customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>class DeviceTableGroup extends Polymer.Element{static get is(){return'device-table-group'}static get properties(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}static get observers(){return['_shouldHideTabs(items.length)']}_shouldHideTabs(a){2>a?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===a&&this.set('selectedItemMount',this.items[0].mount)}reset(){this.set('items',[]),this.set('selectedItemMount','')}}customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">!function(el){"use strict";function tl(yx){return function(fx,xx){return bh(yx(fx),xx)}}function nl(yx,fx,xx){var vx=(fx-yx)/Math.max(0,xx),bx=Math.floor(Math.log(vx)/Math.LN10),wx=vx/Math.pow(10,bx);return 0<=bx?(wx>=Sh?10:wx>=Ch?5:wx>=zh?2:1)*Math.pow(10,bx):-Math.pow(10,-bx)/(wx>=Sh?10:wx>=Ch?5:wx>=zh?2:1)}function ol(yx,fx,xx){var vx=Math.abs(fx-yx)/Math.max(0,xx),bx=Math.pow(10,Math.floor(Math.log(vx)/Math.LN10)),wx=vx/bx;return wx>=Sh?bx*=10:wx>=Ch?bx*=5:wx>=zh&&(bx*=2),fx<yx?-bx:bx}function al(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function il(){return new al}function ll(yx){this._context=yx}function rl(yx){return yx[0]}function sl(yx){return yx[1]}function dl(yx,fx,xx){yx._context.bezierCurveTo((2*yx._x0+yx._x1)/3,(2*yx._y0+yx._y1)/3,(yx._x0+2*yx._x1)/3,(yx._y0+2*yx._y1)/3,(yx._x0+4*yx._x1+fx)/6,(yx._y0+4*yx._y1+xx)/6)}function cl(yx){this._context=yx}function ul(yx,fx,xx){yx._context.bezierCurveTo(yx._x1+yx._k*(yx._x2-yx._x0),yx._y1+yx._k*(yx._y2-yx._y0),yx._x2+yx._k*(yx._x1-fx),yx._y2+yx._k*(yx._y1-xx),yx._x2,yx._y2)}function pl(yx,fx){this._context=yx,this._k=(1-fx)/6}function _l(yx,fx,xx){var vx=yx._x1,bx=yx._y1,wx=yx._x2,Tx=yx._y2;if(yx._l01_a>Fh){var kx=2*yx._l01_2a+3*yx._l01_a*yx._l12_a+yx._l12_2a,Sx=3*yx._l01_a*(yx._l01_a+yx._l12_a);vx=(vx*kx-yx._x0*yx._l12_2a+yx._x2*yx._l01_2a)/Sx,bx=(bx*kx-yx._y0*yx._l12_2a+yx._y2*yx._l01_2a)/Sx}if(yx._l23_a>Fh){var Cx=2*yx._l23_2a+3*yx._l23_a*yx._l12_a+yx._l12_2a,zx=3*yx._l23_a*(yx._l23_a+yx._l12_a);wx=(wx*Cx+yx._x1*yx._l23_2a-fx*yx._l12_2a)/zx,Tx=(Tx*Cx+yx._y1*yx._l23_2a-xx*yx._l12_2a)/zx}yx._context.bezierCurveTo(vx,bx,wx,Tx,yx._x2,yx._y2)}function hl(yx,fx){this._context=yx,this._alpha=fx}function ml(yx){return 0>yx?-1:1}function gl(yx,fx,xx){var vx=yx._x1-yx._x0,bx=fx-yx._x1,wx=(yx._y1-yx._y0)/(vx||0>bx&&-0),Tx=(xx-yx._y1)/(bx||0>vx&&-0);return(ml(wx)+ml(Tx))*Math.min(Math.abs(wx),Math.abs(Tx),.5*Math.abs((wx*bx+Tx*vx)/(vx+bx)))||0}function yl(yx,fx){var xx=yx._x1-yx._x0;return xx?(3*(yx._y1-yx._y0)/xx-fx)/2:fx}function fl(yx,fx,xx){var vx=yx._x0,bx=yx._y0,wx=yx._x1,Tx=yx._y1,kx=(wx-vx)/3;yx._context.bezierCurveTo(vx+kx,bx+kx*fx,wx-kx,Tx-kx*xx,wx,Tx)}function xl(yx){this._context=yx}function bl(yx){this._context=yx}function Tl(yx){this._context=yx}function kl(yx){var fx,xx,vx=yx.length-1,bx=Array(vx),wx=Array(vx),Tx=Array(vx);for(bx[0]=0,wx[0]=2,Tx[0]=yx[0]+2*yx[1],fx=1;fx<vx-1;++fx)bx[fx]=1,wx[fx]=4,Tx[fx]=4*yx[fx]+2*yx[fx+1];for(bx[vx-1]=2,wx[vx-1]=7,Tx[vx-1]=8*yx[vx-1]+yx[vx],fx=1;fx<vx;++fx)xx=bx[fx]/wx[fx-1],wx[fx]-=xx,Tx[fx]-=xx*Tx[fx-1];for(bx[vx-1]=Tx[vx-1]/wx[vx-1],fx=vx-2;0<=fx;--fx)bx[fx]=(Tx[fx]-bx[fx+1])/wx[fx];for(wx[vx-1]=(yx[vx]+bx[vx-1])/2,fx=0;fx<vx-1;++fx)wx[fx]=2*yx[fx+1]-bx[fx+1];return[bx,wx]}function Sl(yx,fx){this._context=yx,this._t=fx}function Ml(yx,fx,xx,vx){function bx(wx){return yx(wx=new Date(+wx)),wx}return bx.floor=bx,bx.ceil=function(wx){return yx(wx=new Date(wx-1)),fx(wx,1),yx(wx),wx},bx.round=function(wx){var Tx=bx(wx),kx=bx.ceil(wx);return wx-Tx<kx-wx?Tx:kx},bx.offset=function(wx,Tx){return fx(wx=new Date(+wx),null==Tx?1:Math.floor(Tx)),wx},bx.range=function(wx,Tx,kx){var Sx=[];if(wx=bx.ceil(wx),kx=null==kx?1:Math.floor(kx),!(wx<Tx&&0<kx))return Sx;do Sx.push(new Date(+wx));while((fx(wx,kx),yx(wx),wx<Tx));return Sx},bx.filter=function(wx){return Ml(function(Tx){if(Tx>=Tx)for(;yx(Tx),!wx(Tx);)Tx.setTime(Tx-1)},function(Tx,kx){if(Tx>=Tx)for(;0<=--kx;)for(;fx(Tx,1),!wx(Tx););})},xx&&(bx.count=function(wx,Tx){return jh.setTime(+wx),Vh.setTime(+Tx),yx(jh),yx(Vh),Math.floor(xx(jh,Vh))},bx.every=function(wx){return wx=Math.floor(wx),isFinite(wx)&&0<wx?1<wx?bx.filter(vx?function(Tx){return 0==vx(Tx)%wx}:function(Tx){return 0==bx.count(0,Tx)%wx}):bx:null}),bx}function Ul(yx){return Ml(function(fx){fx.setDate(fx.getDate()-(fx.getDay()+7-yx)%7),fx.setHours(0,0,0,0)},function(fx,xx){fx.setDate(fx.getDate()+7*xx)},function(fx,xx){return(xx-fx-(xx.getTimezoneOffset()-fx.getTimezoneOffset())*Zh)/Wh})}function Al(yx){return Ml(function(fx){fx.setUTCDate(fx.getUTCDate()-(fx.getUTCDay()+7-yx)%7),fx.setUTCHours(0,0,0,0)},function(fx,xx){fx.setUTCDate(fx.getUTCDate()+7*xx)},function(fx,xx){return(xx-fx)/Wh})}function Yl(yx){return new El(yx)}function El(yx){if(!(fx=hm.exec(yx)))throw new Error("invalid format: "+yx);var fx,xx=fx[1]||" ",vx=fx[2]||">",bx=fx[3]||"-",wx=fx[4]||"",Tx=!!fx[5],kx=fx[6]&&+fx[6],Sx=!!fx[7],Cx=fx[8]&&+fx[8].slice(1),zx=fx[9]||"";"n"===zx?(Sx=!0,zx="g"):_m[zx]||(zx=""),(Tx||"0"===xx&&"="===vx)&&(Tx=!0,xx="0",vx="="),this.fill=xx,this.align=vx,this.sign=bx,this.symbol=wx,this.zero=Tx,this.width=kx,this.comma=Sx,this.precision=Cx,this.type=zx}function Pl(yx){return mm=xm(yx),el.format=mm.format,gm=mm.formatPrefix,mm}function Dl(yx){if(0<=yx.y&&100>yx.y){var fx=new Date(-1,yx.m,yx.d,yx.H,yx.M,yx.S,yx.L);return fx.setFullYear(yx.y),fx}return new Date(yx.y,yx.m,yx.d,yx.H,yx.M,yx.S,yx.L)}function Fl(yx){if(0<=yx.y&&100>yx.y){var fx=new Date(Date.UTC(-1,yx.m,yx.d,yx.H,yx.M,yx.S,yx.L));return fx.setUTCFullYear(yx.y),fx}return new Date(Date.UTC(yx.y,yx.m,yx.d,yx.H,yx.M,yx.S,yx.L))}function Ll(yx){return{y:yx,m:0,d:1,H:0,M:0,S:0,L:0}}function Hl(yx){function fx(lv,rv){return function(sv){var dv,cv,uv,pv=[],_v=-1,hv=0,mv=lv.length;for(sv instanceof Date||(sv=new Date(+sv));++_v<mv;)37===lv.charCodeAt(_v)&&(pv.push(lv.slice(hv,_v)),null==(cv=Cm[dv=lv.charAt(++_v)])?cv="e"===dv?" ":"0":dv=lv.charAt(++_v),(uv=rv[dv])&&(dv=uv(sv,cv)),pv.push(dv),hv=_v+1);return pv.push(lv.slice(hv,_v)),pv.join("")}}function xx(lv,rv){return function(sv){var dv=Ll(1900);if(vx(dv,lv,sv+="",0)!=sv.length)return null;if("p"in dv&&(dv.H=dv.H%12+12*dv.p),"W"in dv||"U"in dv){"w"in dv||(dv.w="W"in dv?1:0);var cv="Z"in dv?Fl(Ll(dv.y)).getUTCDay():rv(Ll(dv.y)).getDay();dv.m=0,dv.d="W"in dv?(dv.w+6)%7+7*dv.W-(cv+5)%7:dv.w+7*dv.U-(cv+6)%7}return"Z"in dv?(dv.H+=0|dv.Z/100,dv.M+=dv.Z%100,Fl(dv)):rv(dv)}}function vx(lv,rv,sv,dv){for(var cv,uv,pv=0,_v=rv.length,hv=sv.length;pv<_v;){if(dv>=hv)return-1;if(37===(cv=rv.charCodeAt(pv++))){if(cv=rv.charAt(pv++),!(uv=iv[cv in Cm?rv.charAt(pv++):cv])||0>(dv=uv(lv,sv,dv)))return-1;}else if(cv!=sv.charCodeAt(dv++))return-1}return dv}var qx=yx.dateTime,Ix=yx.date,Nx=yx.time,Ox=yx.periods,$x=yx.days,jx=yx.shortDays,Vx=yx.months,Bx=yx.shortMonths,Zx=Il(Ox),Wx=Nl(Ox),Rx=Il($x),Jx=Nl($x),Gx=Il(jx),Kx=Nl(jx),Qx=Il(Vx),ev=Nl(Vx),tv=Il(Bx),nv=Nl(Bx),ov={a:function(lv){return jx[lv.getDay()]},A:function(lv){return $x[lv.getDay()]},b:function(lv){return Bx[lv.getMonth()]},B:function(lv){return Vx[lv.getMonth()]},c:null,d:nd,e:nd,H:od,I:ad,j:id,L:ld,m:rd,M:sd,p:function(lv){return Ox[+(12<=lv.getHours())]},S:dd,U:cd,w:ud,W:pd,x:null,X:null,y:_d,Y:hd,Z:md,"%":Ad},av={a:function(lv){return jx[lv.getUTCDay()]},A:function(lv){return $x[lv.getUTCDay()]},b:function(lv){return Bx[lv.getUTCMonth()]},B:function(lv){return Vx[lv.getUTCMonth()]},c:null,d:gd,e:gd,H:yd,I:fd,j:xd,L:vd,m:bd,M:wd,p:function(lv){return Ox[+(12<=lv.getUTCHours())]},S:Td,U:kd,w:Sd,W:Cd,x:null,X:null,y:zd,Y:Md,Z:Ud,"%":Ad},iv={a:function(lv,rv,sv){var dv=Gx.exec(rv.slice(sv));return dv?(lv.w=Kx[dv[0].toLowerCase()],sv+dv[0].length):-1},A:function(lv,rv,sv){var dv=Rx.exec(rv.slice(sv));return dv?(lv.w=Jx[dv[0].toLowerCase()],sv+dv[0].length):-1},b:function(lv,rv,sv){var dv=tv.exec(rv.slice(sv));return dv?(lv.m=nv[dv[0].toLowerCase()],sv+dv[0].length):-1},B:function(lv,rv,sv){var dv=Qx.exec(rv.slice(sv));return dv?(lv.m=ev[dv[0].toLowerCase()],sv+dv[0].length):-1},c:function(lv,rv,sv){return vx(lv,qx,rv,sv)},d:Rl,e:Rl,H:Gl,I:Gl,j:Jl,L:ed,m:Wl,M:Kl,p:function(lv,rv,sv){var dv=Zx.exec(rv.slice(sv));return dv?(lv.p=Wx[dv[0].toLowerCase()],sv+dv[0].length):-1},S:Ql,U:$l,w:Ol,W:jl,x:function(lv,rv,sv){return vx(lv,Ix,rv,sv)},X:function(lv,rv,sv){return vx(lv,Nx,rv,sv)},y:Bl,Y:Vl,Z:Zl,"%":td};return ov.x=fx(Ix,ov),ov.X=fx(Nx,ov),ov.c=fx(qx,ov),av.x=fx(Ix,av),av.X=fx(Nx,av),av.c=fx(qx,av),{format:function(lv){var rv=fx(lv+="",ov);return rv.toString=function(){return lv},rv},parse:function(lv){var rv=xx(lv+="",Dl);return rv.toString=function(){return lv},rv},utcFormat:function(lv){var rv=fx(lv+="",av);return rv.toString=function(){return lv},rv},utcParse:function(lv){var rv=xx(lv,Fl);return rv.toString=function(){return lv},rv}}}function Xl(yx,fx,xx){var vx=0>yx?"-":"",bx=(vx?-yx:yx)+"",wx=bx.length;return vx+(wx<xx?Array(xx-wx+1).join(fx)+bx:bx)}function ql(yx){return yx.replace(Um,"\\$&")}function Il(yx){return new RegExp("^(?:"+yx.map(ql).join("|")+")","i")}function Nl(yx){for(var fx={},xx=-1,vx=yx.length;++xx<vx;)fx[yx[xx].toLowerCase()]=xx;return fx}function Ol(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+1));return vx?(yx.w=+vx[0],xx+vx[0].length):-1}function $l(yx,fx,xx){var vx=zm.exec(fx.slice(xx));return vx?(yx.U=+vx[0],xx+vx[0].length):-1}function jl(yx,fx,xx){var vx=zm.exec(fx.slice(xx));return vx?(yx.W=+vx[0],xx+vx[0].length):-1}function Vl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+4));return vx?(yx.y=+vx[0],xx+vx[0].length):-1}function Bl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.y=+vx[0]+(68<+vx[0]?1900:2e3),xx+vx[0].length):-1}function Zl(yx,fx,xx){var vx=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(fx.slice(xx,xx+6));return vx?(yx.Z=vx[1]?0:-(vx[2]+(vx[3]||"00")),xx+vx[0].length):-1}function Wl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.m=vx[0]-1,xx+vx[0].length):-1}function Rl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.d=+vx[0],xx+vx[0].length):-1}function Jl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+3));return vx?(yx.m=0,yx.d=+vx[0],xx+vx[0].length):-1}function Gl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.H=+vx[0],xx+vx[0].length):-1}function Kl(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.M=+vx[0],xx+vx[0].length):-1}function Ql(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+2));return vx?(yx.S=+vx[0],xx+vx[0].length):-1}function ed(yx,fx,xx){var vx=zm.exec(fx.slice(xx,xx+3));return vx?(yx.L=+vx[0],xx+vx[0].length):-1}function td(yx,fx,xx){var vx=Mm.exec(fx.slice(xx,xx+1));return vx?xx+vx[0].length:-1}function nd(yx,fx){return Xl(yx.getDate(),fx,2)}function od(yx,fx){return Xl(yx.getHours(),fx,2)}function ad(yx,fx){return Xl(yx.getHours()%12||12,fx,2)}function id(yx,fx){return Xl(1+Kh.count(nm(yx),yx),fx,3)}function ld(yx,fx){return Xl(yx.getMilliseconds(),fx,3)}function rd(yx,fx){return Xl(yx.getMonth()+1,fx,2)}function sd(yx,fx){return Xl(yx.getMinutes(),fx,2)}function dd(yx,fx){return Xl(yx.getSeconds(),fx,2)}function cd(yx,fx){return Xl(Qh.count(nm(yx),yx),fx,2)}function ud(yx){return yx.getDay()}function pd(yx,fx){return Xl(em.count(nm(yx),yx),fx,2)}function _d(yx,fx){return Xl(yx.getFullYear()%100,fx,2)}function hd(yx,fx){return Xl(yx.getFullYear()%1e4,fx,4)}function md(yx){var fx=yx.getTimezoneOffset();return(0<fx?"-":(fx*=-1,"+"))+Xl(0|fx/60,"0",2)+Xl(fx%60,"0",2)}function gd(yx,fx){return Xl(yx.getUTCDate(),fx,2)}function yd(yx,fx){return Xl(yx.getUTCHours(),fx,2)}function fd(yx,fx){return Xl(yx.getUTCHours()%12||12,fx,2)}function xd(yx,fx){return Xl(1+om.count(lm(yx),yx),fx,3)}function vd(yx,fx){return Xl(yx.getUTCMilliseconds(),fx,3)}function bd(yx,fx){return Xl(yx.getUTCMonth()+1,fx,2)}function wd(yx,fx){return Xl(yx.getUTCMinutes(),fx,2)}function Td(yx,fx){return Xl(yx.getUTCSeconds(),fx,2)}function kd(yx,fx){return Xl(am.count(lm(yx),yx),fx,2)}function Sd(yx){return yx.getUTCDay()}function Cd(yx,fx){return Xl(im.count(lm(yx),yx),fx,2)}function zd(yx,fx){return Xl(yx.getUTCFullYear()%100,fx,2)}function Md(yx,fx){return Xl(yx.getUTCFullYear()%1e4,fx,4)}function Ud(){return"+0000"}function Ad(){return"%"}function Yd(yx){return vm=Hl(yx),el.timeFormat=vm.format,el.timeParse=vm.parse,bm=vm.utcFormat,wm=vm.utcParse,vm}function Dd(){}function Fd(yx,fx){var xx=new Dd;if(yx instanceof Dd)yx.each(function(kx,Sx){xx.set(Sx,kx)});else if(Array.isArray(yx)){var vx,bx=-1,wx=yx.length;if(null==fx)for(;++bx<wx;)xx.set(bx,yx[bx]);else for(;++bx<wx;)xx.set(fx(vx=yx[bx],bx,yx),vx)}else if(yx)for(var Tx in yx)xx.set(Tx,yx[Tx]);return xx}function Ld(){}function Xd(yx,fx){var xx=Object.create(yx.prototype);for(var vx in fx)xx[vx]=fx[vx];return xx}function qd(){}function Id(yx){var fx;return yx=(yx+"").trim().toLowerCase(),(fx=Xm.exec(yx))?(fx=parseInt(fx[1],16),new Vd(15&fx>>8|240&fx>>4,15&fx>>4|240&fx,(15&fx)<<4|15&fx,1)):(fx=qm.exec(yx))?Nd(parseInt(fx[1],16)):(fx=Im.exec(yx))?new Vd(fx[1],fx[2],fx[3],1):(fx=Nm.exec(yx))?new Vd(255*fx[1]/100,255*fx[2]/100,255*fx[3]/100,1):(fx=Om.exec(yx))?Od(fx[1],fx[2],fx[3],fx[4]):(fx=$m.exec(yx))?Od(255*fx[1]/100,255*fx[2]/100,255*fx[3]/100,fx[4]):(fx=jm.exec(yx))?Bd(fx[1],fx[2]/100,fx[3]/100,1):(fx=Vm.exec(yx))?Bd(fx[1],fx[2]/100,fx[3]/100,fx[4]):Bm.hasOwnProperty(yx)?Nd(Bm[yx]):"transparent"===yx?new Vd(NaN,NaN,NaN,0):null}function Nd(yx){return new Vd(255&yx>>16,255&yx>>8,255&yx,1)}function Od(yx,fx,xx,vx){return 0>=vx&&(yx=fx=xx=NaN),new Vd(yx,fx,xx,vx)}function $d(yx){return yx instanceof qd||(yx=Id(yx)),yx?(yx=yx.rgb(),new Vd(yx.r,yx.g,yx.b,yx.opacity)):new Vd}function jd(yx,fx,xx,vx){return 1===arguments.length?$d(yx):new Vd(yx,fx,xx,null==vx?1:vx)}function Vd(yx,fx,xx,vx){this.r=+yx,this.g=+fx,this.b=+xx,this.opacity=+vx}function Bd(yx,fx,xx,vx){return 0>=vx?yx=fx=xx=NaN:0>=xx||1<=xx?yx=fx=NaN:0>=fx&&(yx=NaN),new Rd(yx,fx,xx,vx)}function Zd(yx){if(yx instanceof Rd)return new Rd(yx.h,yx.s,yx.l,yx.opacity);if(yx instanceof qd||(yx=Id(yx)),!yx)return new Rd;if(yx instanceof Rd)return yx;var fx=(yx=yx.rgb()).r/255,xx=yx.g/255,vx=yx.b/255,bx=Math.min(fx,xx,vx),wx=Math.max(fx,xx,vx),Tx=NaN,kx=wx-bx,Sx=(wx+bx)/2;return kx?(Tx=fx===wx?(xx-vx)/kx+6*(xx<vx):xx===wx?(vx-fx)/kx+2:(fx-xx)/kx+4,kx/=.5>Sx?wx+bx:2-wx-bx,Tx*=60):kx=0<Sx&&1>Sx?0:Tx,new Rd(Tx,kx,Sx,yx.opacity)}function Rd(yx,fx,xx,vx){this.h=+yx,this.s=+fx,this.l=+xx,this.opacity=+vx}function Jd(yx,fx,xx){return 255*(60>yx?fx+(xx-fx)*yx/60:180>yx?xx:240>yx?fx+(xx-fx)*(240-yx)/60:fx)}function Gd(yx){if(yx instanceof Qd)return new Qd(yx.l,yx.a,yx.b,yx.opacity);if(yx instanceof mc){var fx=yx.h*Zm;return new Qd(yx.l,Math.cos(fx)*yx.c,Math.sin(fx)*yx.c,yx.opacity)}yx instanceof Vd||(yx=$d(yx));var xx=pc(yx.r),vx=pc(yx.g),bx=pc(yx.b),wx=lc((.4124564*xx+.3575761*vx+.1804375*bx)/Rm),Tx=lc((.2126729*xx+.7151522*vx+.072175*bx)/Jm);return new Qd(116*Tx-16,500*(wx-Tx),200*(Tx-lc((.0193339*xx+.119192*vx+.9503041*bx)/Gm)),yx.opacity)}function Qd(yx,fx,xx,vx){this.l=+yx,this.a=+fx,this.b=+xx,this.opacity=+vx}function lc(yx){return yx>tg?Math.pow(yx,1/3):yx/eg+Km}function dc(yx){return yx>Qm?yx*yx*yx:eg*(yx-Km)}function cc(yx){return 255*(.0031308>=yx?12.92*yx:1.055*Math.pow(yx,1/2.4)-.055)}function pc(yx){return .04045>=(yx/=255)?yx/12.92:Math.pow((yx+.055)/1.055,2.4)}function _c(yx){if(yx instanceof mc)return new mc(yx.h,yx.c,yx.l,yx.opacity);yx instanceof Qd||(yx=Gd(yx));var fx=Math.atan2(yx.b,yx.a)*Wm;return new mc(0>fx?fx+360:fx,Math.sqrt(yx.a*yx.a+yx.b*yx.b),yx.l,yx.opacity)}function mc(yx,fx,xx,vx){this.h=+yx,this.c=+fx,this.l=+xx,this.opacity=+vx}function gc(yx){if(yx instanceof fc)return new fc(yx.h,yx.s,yx.l,yx.opacity);yx instanceof Vd||(yx=$d(yx));var fx=yx.r/255,xx=yx.g/255,vx=yx.b/255,bx=(dg*vx+rg*fx-sg*xx)/(dg+rg-sg),wx=vx-bx,Tx=(lg*(xx-bx)-ag*wx)/ig,kx=Math.sqrt(Tx*Tx+wx*wx)/(lg*bx*(1-bx)),Sx=kx?Math.atan2(Tx,wx)*Wm-120:NaN;return new fc(0>Sx?Sx+360:Sx,kx,bx,yx.opacity)}function yc(yx,fx,xx,vx){return 1===arguments.length?gc(yx):new fc(yx,fx,xx,null==vx?1:vx)}function fc(yx,fx,xx,vx){this.h=+yx,this.s=+fx,this.l=+xx,this.opacity=+vx}function xc(yx,fx){return function(xx){return yx+xx*fx}}function vc(yx,fx,xx){return yx=Math.pow(yx,xx),fx=Math.pow(fx,xx)-yx,xx=1/xx,function(vx){return Math.pow(yx+vx*fx,xx)}}function wc(yx){return 1==(yx=+yx)?Tc:function(fx,xx){return xx-fx?vc(fx,xx,yx):hg(isNaN(fx)?xx:fx)}}function Tc(yx,fx){var xx=fx-yx;return xx?xc(yx,xx):hg(isNaN(yx)?fx:yx)}function kc(yx){return function(){return yx}}function Sc(yx){return function(fx){return yx(fx)+""}}function Mc(yx,fx,xx,vx){function bx(Cx){return Cx.length?Cx.pop()+" ":""}function wx(Cx,zx,Mx,Ux,Ax,Yx){if(Cx!==Mx||zx!==Ux){var Ex=Ax.push("translate(",null,fx,null,xx);Yx.push({i:Ex-4,x:fg(Cx,Mx)},{i:Ex-2,x:fg(zx,Ux)})}else(Mx||Ux)&&Ax.push("translate("+Mx+fx+Ux+xx)}function Tx(Cx,zx,Mx,Ux){Cx===zx?zx&&Mx.push(bx(Mx)+"rotate("+zx+vx):(180<Cx-zx?zx+=360:180<zx-Cx&&(Cx+=360),Ux.push({i:Mx.push(bx(Mx)+"rotate(",null,vx)-2,x:fg(Cx,zx)}))}function kx(Cx,zx,Mx,Ux){Cx===zx?zx&&Mx.push(bx(Mx)+"skewX("+zx+vx):Ux.push({i:Mx.push(bx(Mx)+"skewX(",null,vx)-2,x:fg(Cx,zx)})}function Sx(Cx,zx,Mx,Ux,Ax,Yx){if(Cx!==Mx||zx!==Ux){var Ex=Ax.push(bx(Ax)+"scale(",null,",",null,")");Yx.push({i:Ex-4,x:fg(Cx,Mx)},{i:Ex-2,x:fg(zx,Ux)})}else 1===Mx&&1===Ux||Ax.push(bx(Ax)+"scale("+Mx+","+Ux+")")}return function(Cx,zx){var Mx=[],Ux=[];return Cx=yx(Cx),zx=yx(zx),wx(Cx.translateX,Cx.translateY,zx.translateX,zx.translateY,Mx,Ux),Tx(Cx.rotate,zx.rotate,Mx,Ux),kx(Cx.skewX,zx.skewX,Mx,Ux),Sx(Cx.scaleX,Cx.scaleY,zx.scaleX,zx.scaleY,Mx,Ux),Cx=zx=null,function(Ax){for(var Yx,Ex=-1,Px=Ux.length;++Ex<Px;)Mx[(Yx=Ux[Ex]).i]=Yx.x(Ax);return Mx.join("")}}}function Uc(yx){return((yx=Math.exp(yx))+1/yx)/2}function Ac(yx){return((yx=Math.exp(yx))-1/yx)/2}function Yc(yx){return((yx=Math.exp(2*yx))-1)/(yx+1)}function Ec(yx){return function fx(xx){function vx(bx,wx){var Tx=yx((bx=yc(bx)).h,(wx=yc(wx)).h),kx=Tc(bx.s,wx.s),Sx=Tc(bx.l,wx.l),Cx=Tc(bx.opacity,wx.opacity);return function(zx){return bx.h=Tx(zx),bx.s=kx(zx),bx.l=Sx(Math.pow(zx,xx)),bx.opacity=Cx(zx),bx+""}}return xx=+xx,vx.gamma=fx,vx}(1)}function Pc(yx,fx){return(fx-=yx=+yx)?function(xx){return(xx-yx)/fx}:Pg(fx)}function Dc(yx){return function(fx,xx){var vx=yx(fx=+fx,xx=+xx);return function(bx){return bx<=fx?0:bx>=xx?1:vx(bx)}}}function Fc(yx){return function(fx,xx){var vx=yx(fx=+fx,xx=+xx);return function(bx){return 0>=bx?fx:1<=bx?xx:vx(bx)}}}function Lc(yx,fx,xx,vx){var bx=yx[0],wx=yx[1],Tx=fx[0],kx=fx[1];return wx<bx?(bx=xx(wx,bx),Tx=vx(kx,Tx)):(bx=xx(bx,wx),Tx=vx(Tx,kx)),function(Sx){return Tx(bx(Sx))}}function Hc(yx,fx,xx,vx){var bx=Math.min(yx.length,fx.length)-1,wx=Array(bx),Tx=Array(bx),kx=-1;for(yx[bx]<yx[0]&&(yx=yx.slice().reverse(),fx=fx.slice().reverse());++kx<bx;)wx[kx]=xx(yx[kx],yx[kx+1]),Tx[kx]=vx(fx[kx],fx[kx+1]);return function(Sx){var Cx=Th(yx,Sx,1,bx)-1;return Tx[Cx](wx[Cx](Sx))}}function Xc(yx,fx){return fx.domain(yx.domain()).range(yx.range()).interpolate(yx.interpolate()).clamp(yx.clamp())}function qc(yx,fx){function xx(){return bx=2<Math.min(kx.length,Sx.length)?Hc:Lc,wx=Tx=null,vx}function vx(Mx){return(wx||(wx=bx(kx,Sx,zx?Dc(yx):yx,Cx)))(+Mx)}var bx,wx,Tx,kx=Fg,Sx=Fg,Cx=Tg,zx=!1;return vx.invert=function(Mx){return(Tx||(Tx=bx(Sx,kx,Pc,zx?Fc(fx):fx)))(+Mx)},vx.domain=function(Mx){return arguments.length?(kx=Em.call(Mx,Dg),xx()):kx.slice()},vx.range=function(Mx){return arguments.length?(Sx=Pm.call(Mx),xx()):Sx.slice()},vx.rangeRound=function(Mx){return Sx=Pm.call(Mx),Cx=kg,xx()},vx.clamp=function(Mx){return arguments.length?(zx=!!Mx,xx()):zx},vx.interpolate=function(Mx){return arguments.length?(Cx=Mx,xx()):Cx},xx()}function Ic(yx){var fx=yx.domain;return yx.ticks=function(xx){var vx=fx();return Mh(vx[0],vx[vx.length-1],null==xx?10:xx)},yx.tickFormat=function(xx,vx){return Lg(fx(),xx,vx)},yx.nice=function(xx){null==xx&&(xx=10);var vx,bx=fx(),wx=0,Tx=bx.length-1,kx=bx[wx],Sx=bx[Tx];return Sx<kx&&(vx=kx,kx=Sx,Sx=vx,vx=wx,wx=Tx,Tx=vx),vx=nl(kx,Sx,xx),0<vx?vx=nl(kx=Math.floor(kx/vx)*vx,Sx=Math.ceil(Sx/vx)*vx,xx):0>vx&&(vx=nl(kx=Math.ceil(kx*vx)/vx,Sx=Math.floor(Sx*vx)/vx,xx)),0<vx?(bx[wx]=Math.floor(kx/vx)*vx,bx[Tx]=Math.ceil(Sx/vx)*vx,fx(bx)):0>vx&&(bx[wx]=Math.ceil(kx*vx)/vx,bx[Tx]=Math.floor(Sx*vx)/vx,fx(bx)),yx},yx}function Nc(){var yx=qc(Pc,fg);return yx.copy=function(){return Xc(yx,Nc())},Ic(yx)}function Oc(yx,fx){return(fx=Math.log(fx/yx))?function(xx){return Math.log(xx/yx)/fx}:Pg(fx)}function $c(yx,fx){return 0>yx?function(xx){return-Math.pow(-fx,xx)*Math.pow(-yx,1-xx)}:function(xx){return Math.pow(fx,xx)*Math.pow(yx,1-xx)}}function jc(yx){return isFinite(yx)?+("1e"+yx):0>yx?0:yx}function Vc(yx){return 10===yx?jc:yx===Math.E?Math.exp:function(fx){return Math.pow(yx,fx)}}function Bc(yx){return yx===Math.E?Math.log:10===yx&&Math.log10||2===yx&&Math.log2||(yx=Math.log(yx),function(fx){return Math.log(fx)/yx})}function Zc(yx){return function(fx){return-yx(-fx)}}function Wc(){function yx(){return bx=Bc(vx),wx=Vc(vx),0>xx()[0]&&(bx=Zc(bx),wx=Zc(wx)),fx}var fx=qc(Oc,$c).domain([1,10]),xx=fx.domain,vx=10,bx=Bc(10),wx=Vc(10);return fx.base=function(Tx){return arguments.length?(vx=+Tx,yx()):vx},fx.domain=function(Tx){return arguments.length?(xx(Tx),yx()):xx()},fx.ticks=function(Tx){var kx,Sx=xx(),Cx=Sx[0],zx=Sx[Sx.length-1];(kx=zx<Cx)&&(Yx=Cx,Cx=zx,zx=Yx);var Mx,Ux,Ax,Yx=bx(Cx),Ex=bx(zx),Px=null==Tx?10:+Tx,Dx=[];if(!(!(vx%1)&&Ex-Yx<Px))Dx=Mh(Yx,Ex,Math.min(Ex-Yx,Px)).map(wx);else if(Yx=Math.round(Yx)-1,Ex=Math.round(Ex)+1,0<Cx){for(;Yx<Ex;++Yx)for(Ux=1,Mx=wx(Yx);Ux<vx;++Ux)if(!((Ax=Mx*Ux)<Cx)){if(Ax>zx)break;Dx.push(Ax)}}else for(;Yx<Ex;++Yx)for(Ux=vx-1,Mx=wx(Yx);1<=Ux;--Ux)if(!((Ax=Mx*Ux)<Cx)){if(Ax>zx)break;Dx.push(Ax)}return kx?Dx.reverse():Dx},fx.tickFormat=function(Tx,kx){if(null==kx&&(kx=10===vx?".0e":","),"function"!=typeof kx&&(kx=el.format(kx)),Tx===1/0)return kx;null==Tx&&(Tx=10);var Sx=Math.max(1,vx*Tx/fx.ticks().length);return function(Cx){var zx=Cx/wx(Math.round(bx(Cx)));return zx*vx<vx-.5&&(zx*=vx),zx<=Sx?kx(Cx):""}},fx.nice=function(){return xx(Hg(xx(),{floor:function(Tx){return wx(Math.floor(bx(Tx)))},ceil:function(Tx){return wx(Math.ceil(bx(Tx)))}}))},fx.copy=function(){return Xc(fx,Wc().base(vx))},fx}function Rc(yx,fx){return 0>yx?-Math.pow(-yx,fx):Math.pow(yx,fx)}function Jc(){var xx=1,vx=qc(function(wx,Tx){return(Tx=Rc(Tx,xx)-(wx=Rc(wx,xx)))?function(kx){return(Rc(kx,xx)-wx)/Tx}:Pg(Tx)},function(wx,Tx){return Tx=Rc(Tx,xx)-(wx=Rc(wx,xx)),function(kx){return Rc(wx+Tx*kx,1/xx)}}),bx=vx.domain;return vx.exponent=function(wx){return arguments.length?(xx=+wx,bx(bx())):xx},vx.copy=function(){return Xc(vx,Jc().exponent(xx))},Ic(vx)}function Gc(yx){return new Date(yx)}function Kc(yx){return yx instanceof Date?+yx:+new Date(+yx)}function Qc(yx,fx,xx,vx,bx,wx,Tx,kx,Sx){function Cx(Ix){return(Tx(Ix)<Ix?Yx:wx(Ix)<Ix?Ex:bx(Ix)<Ix?Px:vx(Ix)<Ix?Dx:fx(Ix)<Ix?xx(Ix)<Ix?Fx:Lx:yx(Ix)<Ix?Hx:Xx)(Ix)}function zx(Ix,Nx,Ox,$x){if(null==Ix&&(Ix=10),"number"==typeof Ix){var jx=Math.abs(Ox-Nx)/Ix,Vx=wh(function(Bx){return Bx[2]}).right(qx,jx);Vx===qx.length?($x=ol(Nx/jg,Ox/jg,Ix),Ix=yx):Vx?($x=(Vx=qx[jx/qx[Vx-1][2]<qx[Vx][2]/jx?Vx-1:Vx])[1],Ix=Vx[0]):($x=ol(Nx,Ox,Ix),Ix=kx)}return null==$x?Ix:Ix.every($x)}var Mx=qc(Pc,fg),Ux=Mx.invert,Ax=Mx.domain,Yx=Sx(".%L"),Ex=Sx(":%S"),Px=Sx("%I:%M"),Dx=Sx("%I %p"),Fx=Sx("%a %d"),Lx=Sx("%b %d"),Hx=Sx("%B"),Xx=Sx("%Y"),qx=[[Tx,1,Xg],[Tx,5,5*Xg],[Tx,15,15*Xg],[Tx,30,30*Xg],[wx,1,qg],[wx,5,5*qg],[wx,15,15*qg],[wx,30,30*qg],[bx,1,Ig],[bx,3,3*Ig],[bx,6,6*Ig],[bx,12,12*Ig],[vx,1,Ng],[vx,2,2*Ng],[xx,1,Og],[fx,1,$g],[fx,3,3*$g],[yx,1,jg]];return Mx.invert=function(Ix){return new Date(Ux(Ix))},Mx.domain=function(Ix){return arguments.length?Ax(Em.call(Ix,Kc)):Ax().map(Gc)},Mx.ticks=function(Ix,Nx){var Ox,$x=Ax(),jx=$x[0],Vx=$x[$x.length-1],Bx=Vx<jx;return Bx&&(Ox=jx,jx=Vx,Vx=Ox),Ox=zx(Ix,jx,Vx,Nx),Ox=Ox?Ox.range(jx,Vx+1):[],Bx?Ox.reverse():Ox},Mx.tickFormat=function(Ix,Nx){return null==Nx?Cx:Sx(Nx)},Mx.nice=function(Ix,Nx){var Ox=Ax();return(Ix=zx(Ix,Ox[0],Ox[Ox.length-1],Nx))?Ax(Hg(Ox,Ix)):Mx},Mx.copy=function(){return Xc(Mx,Qc(yx,fx,xx,vx,bx,wx,Tx,kx,Sx))},Mx}function ep(yx){return"translate("+(yx+.5)+",0)"}function tp(yx){return"translate(0,"+(yx+.5)+")"}function np(yx){var fx=Math.max(0,yx.bandwidth()-1)/2;return yx.round()&&(fx=Math.round(fx)),function(xx){return yx(xx)+fx}}function op(){return!this.__axis}function ap(yx,fx){function xx(Ux){var Ax=null==bx?fx.ticks?fx.ticks.apply(fx,vx):fx.domain():bx,Yx=null==wx?fx.tickFormat?fx.tickFormat.apply(fx,vx):Wg:wx,Ex=Math.max(Tx,0)+Sx,Px=fx.range(),Dx=Px[0]+.5,Fx=Px[Px.length-1]+.5,Lx=(fx.bandwidth?np:Wg)(fx.copy()),Hx=Ux.selection?Ux.selection():Ux,Xx=Hx.selectAll(".domain").data([null]),qx=Hx.selectAll(".tick").data(Ax,fx).order(),Ix=qx.exit(),Nx=qx.enter().append("g").attr("class","tick"),Ox=qx.select("line"),$x=qx.select("text");Xx=Xx.merge(Xx.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),qx=qx.merge(Nx),Ox=Ox.merge(Nx.append("line").attr("stroke","#000").attr(zx+"2",Cx*Tx)),$x=$x.merge(Nx.append("text").attr("fill","#000").attr(zx,Cx*Ex).attr("dy",yx===Rg?"0em":yx===Gg?"0.71em":"0.32em")),Ux!==Hx&&(Xx=Xx.transition(Ux),qx=qx.transition(Ux),Ox=Ox.transition(Ux),$x=$x.transition(Ux),Ix=Ix.transition(Ux).attr("opacity",Qg).attr("transform",function(jx){return isFinite(jx=Lx(jx))?Mx(jx):this.getAttribute("transform")}),Nx.attr("opacity",Qg).attr("transform",function(jx){var Vx=this.parentNode.__axis;return Mx(Vx&&isFinite(Vx=Vx(jx))?Vx:Lx(jx))})),Ix.remove(),Xx.attr("d",yx===Kg||yx==Jg?"M"+Cx*kx+","+Dx+"H0.5V"+Fx+"H"+Cx*kx:"M"+Dx+","+Cx*kx+"V0.5H"+Fx+"V"+Cx*kx),qx.attr("opacity",1).attr("transform",function(jx){return Mx(Lx(jx))}),Ox.attr(zx+"2",Cx*Tx),$x.attr(zx,Cx*Ex).text(Yx),Hx.filter(op).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",yx===Jg?"start":yx===Kg?"end":"middle"),Hx.each(function(){this.__axis=Lx})}var vx=[],bx=null,wx=null,Tx=6,kx=6,Sx=3,Cx=yx===Rg||yx===Kg?-1:1,zx=yx===Kg||yx===Jg?"x":"y",Mx=yx===Rg||yx===Gg?ep:tp;return xx.scale=function(Ux){return arguments.length?(fx=Ux,xx):fx},xx.ticks=function(){return vx=Zg.call(arguments),xx},xx.tickArguments=function(Ux){return arguments.length?(vx=null==Ux?[]:Zg.call(Ux),xx):vx.slice()},xx.tickValues=function(Ux){return arguments.length?(bx=null==Ux?null:Zg.call(Ux),xx):bx&&bx.slice()},xx.tickFormat=function(Ux){return arguments.length?(wx=Ux,xx):wx},xx.tickSize=function(Ux){return arguments.length?(Tx=kx=+Ux,xx):Tx},xx.tickSizeInner=function(Ux){return arguments.length?(Tx=+Ux,xx):Tx},xx.tickSizeOuter=function(Ux){return arguments.length?(kx=+Ux,xx):kx},xx.tickPadding=function(Ux){return arguments.length?(Sx=+Ux,xx):Sx},xx}function dp(){for(var yx,fx=0,xx=arguments.length,vx={};fx<xx;++fx){if(!(yx=arguments[fx]+"")||yx in vx)throw new Error("illegal type: "+yx);vx[yx]=[]}return new cp(vx)}function cp(yx){this._=yx}function up(yx,fx){return yx.trim().split(/^|\s+/).map(function(xx){var vx="",bx=xx.indexOf(".");if(0<=bx&&(vx=xx.slice(bx+1),xx=xx.slice(0,bx)),xx&&!fx.hasOwnProperty(xx))throw new Error("unknown type: "+xx);return{type:xx,name:vx}})}function pp(yx,fx){for(var xx,vx=0,bx=yx.length;vx<bx;++vx)if((xx=yx[vx]).name===fx)return xx.value}function _p(yx,fx,xx){for(var vx=0,bx=yx.length;vx<bx;++vx)if(yx[vx].name===fx){yx[vx]=ey,yx=yx.slice(0,vx).concat(yx.slice(vx+1));break}return null!=xx&&yx.push({name:fx,value:xx}),yx}function hp(yx){return function(){var fx=this.ownerDocument,xx=this.namespaceURI;return xx===ty&&fx.documentElement.namespaceURI===ty?fx.createElement(yx):fx.createElementNS(xx,yx)}}function mp(yx){return function(){return this.ownerDocument.createElementNS(yx.space,yx.local)}}function gp(yx,fx,xx){return yx=yp(yx,fx,xx),function(vx){var bx=vx.relatedTarget;bx&&(bx===this||8&bx.compareDocumentPosition(this))||yx.call(this,vx)}}function yp(yx,fx,xx){return function(vx){var bx=el.event;el.event=vx;try{yx.call(this,this.__data__,fx,xx)}finally{el.event=bx}}}function fp(yx){return yx.trim().split(/^|\s+/).map(function(fx){var xx="",vx=fx.indexOf(".");return 0<=vx&&(xx=fx.slice(vx+1),fx=fx.slice(0,vx)),{type:fx,name:xx}})}function xp(yx){return function(){var fx=this.__on;if(fx){for(var xx,vx=0,bx=-1,wx=fx.length;vx<wx;++vx)xx=fx[vx],yx.type&&xx.type!==yx.type||xx.name!==yx.name?fx[++bx]=xx:this.removeEventListener(xx.type,xx.listener,xx.capture);++bx?fx.length=bx:delete this.__on}}}function vp(yx,fx,xx){var vx=dy.hasOwnProperty(yx.type)?gp:yp;return function(bx,wx,Tx){var kx,Sx=this.__on,Cx=vx(fx,wx,Tx);if(Sx)for(var zx=0,Mx=Sx.length;zx<Mx;++zx)if((kx=Sx[zx]).type===yx.type&&kx.name===yx.name)return this.removeEventListener(kx.type,kx.listener,kx.capture),this.addEventListener(kx.type,kx.listener=Cx,kx.capture=xx),void(kx.value=fx);this.addEventListener(yx.type,Cx,xx),kx={type:yx.type,name:yx.name,value:fx,listener:Cx,capture:xx},Sx?Sx.push(kx):this.__on=[kx]}}function bp(yx,fx,xx,vx){var bx=el.event;yx.sourceEvent=el.event,el.event=yx;try{return fx.apply(xx,vx)}finally{el.event=bx}}function wp(){}function Tp(){return[]}function kp(yx,fx){this.ownerDocument=yx.ownerDocument,this.namespaceURI=yx.namespaceURI,this._next=null,this._parent=yx,this.__data__=fx}function Sp(yx,fx,xx,vx,bx,wx){for(var Tx,kx=0,Sx=fx.length,Cx=wx.length;kx<Cx;++kx)(Tx=fx[kx])?(Tx.__data__=wx[kx],vx[kx]=Tx):xx[kx]=new kp(yx,wx[kx]);for(;kx<Sx;++kx)(Tx=fx[kx])&&(bx[kx]=Tx)}function Cp(yx,fx,xx,vx,bx,wx,Tx){var kx,Sx,Cx,zx={},Mx=fx.length,Ux=wx.length,Ax=Array(Mx);for(kx=0;kx<Mx;++kx)(Sx=fx[kx])&&(Ax[kx]=Cx=wy+Tx.call(Sx,Sx.__data__,kx,fx),Cx in zx?bx[kx]=Sx:zx[Cx]=Sx);for(kx=0;kx<Ux;++kx)(Sx=zx[Cx=wy+Tx.call(yx,wx[kx],kx,wx)])?(vx[kx]=Sx,Sx.__data__=wx[kx],zx[Cx]=null):xx[kx]=new kp(yx,wx[kx]);for(kx=0;kx<Mx;++kx)(Sx=fx[kx])&&zx[Ax[kx]]===Sx&&(bx[kx]=Sx)}function zp(yx,fx){return yx<fx?-1:yx>fx?1:yx>=fx?0:NaN}function Mp(yx){return function(){this.removeAttribute(yx)}}function Up(yx){return function(){this.removeAttributeNS(yx.space,yx.local)}}function Ap(yx,fx){return function(){this.setAttribute(yx,fx)}}function Yp(yx,fx){return function(){this.setAttributeNS(yx.space,yx.local,fx)}}function Ep(yx,fx){return function(){var xx=fx.apply(this,arguments);null==xx?this.removeAttribute(yx):this.setAttribute(yx,xx)}}function Pp(yx,fx){return function(){var xx=fx.apply(this,arguments);null==xx?this.removeAttributeNS(yx.space,yx.local):this.setAttributeNS(yx.space,yx.local,xx)}}function Dp(yx){return function(){this.style.removeProperty(yx)}}function Fp(yx,fx,xx){return function(){this.style.setProperty(yx,fx,xx)}}function Lp(yx,fx,xx){return function(){var vx=fx.apply(this,arguments);null==vx?this.style.removeProperty(yx):this.style.setProperty(yx,vx,xx)}}function Hp(yx,fx){return yx.style.getPropertyValue(fx)||Fy(yx).getComputedStyle(yx,null).getPropertyValue(fx)}function Xp(yx){return function(){delete this[yx]}}function qp(yx,fx){return function(){this[yx]=fx}}function Ip(yx,fx){return function(){var xx=fx.apply(this,arguments);null==xx?delete this[yx]:this[yx]=xx}}function Np(yx){return yx.trim().split(/^|\s+/)}function Op(yx){return yx.classList||new $p(yx)}function $p(yx){this._node=yx,this._names=Np(yx.getAttribute("class")||"")}function jp(yx,fx){for(var xx=Op(yx),vx=-1,bx=fx.length;++vx<bx;)xx.add(fx[vx])}function Vp(yx,fx){for(var xx=Op(yx),vx=-1,bx=fx.length;++vx<bx;)xx.remove(fx[vx])}function Bp(yx){return function(){jp(this,yx)}}function Zp(yx){return function(){Vp(this,yx)}}function Wp(yx,fx){return function(){(fx.apply(this,arguments)?jp:Vp)(this,yx)}}function Rp(){this.textContent=""}function Jp(yx){return function(){this.textContent=yx}}function Gp(yx){return function(){var fx=yx.apply(this,arguments);this.textContent=null==fx?"":fx}}function Kp(){this.innerHTML=""}function Qp(yx){return function(){this.innerHTML=yx}}function e_(yx){return function(){var fx=yx.apply(this,arguments);this.innerHTML=null==fx?"":fx}}function t_(){this.nextSibling&&this.parentNode.appendChild(this)}function n_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function o_(){return null}function a_(){var yx=this.parentNode;yx&&yx.removeChild(this)}function i_(yx,fx,xx){var vx=Fy(yx),bx=vx.CustomEvent;"function"==typeof bx?bx=new bx(fx,xx):(bx=vx.document.createEvent("Event"),xx?(bx.initEvent(fx,xx.bubbles,xx.cancelable),bx.detail=xx.detail):bx.initEvent(fx,!1,!1)),yx.dispatchEvent(bx)}function l_(yx,fx){return function(){return i_(this,yx,fx)}}function r_(yx,fx){return function(){return i_(this,yx,fx.apply(this,arguments))}}function s_(yx,fx){this._groups=yx,this._parents=fx}function d_(){return new s_([[document.documentElement]],Wy)}function c_(){el.event.stopImmediatePropagation()}function u_(yx,fx){var xx=yx.document.documentElement,vx=Ry(yx).on("dragstart.drag",null);fx&&(vx.on("click.drag",Ky,!0),setTimeout(function(){vx.on("click.drag",null)},0)),"onselectstart"in xx?vx.on("selectstart.drag",null):(xx.style.MozUserSelect=xx.__noselect,delete xx.__noselect)}function p_(yx,fx,xx,vx,bx,wx,Tx,kx,Sx,Cx){this.target=yx,this.type=fx,this.subject=xx,this.identifier=vx,this.active=bx,this.x=wx,this.y=Tx,this.dx=kx,this.dy=Sx,this._=Cx}function __(){return!el.event.button}function h_(){return this.parentNode}function m_(yx){return null==yx?{x:el.event.x,y:el.event.y}:yx}function g_(){return cf||(_f(y_),cf=pf.now()+uf)}function y_(){cf=0}function f_(){this._call=this._time=this._next=null}function x_(yx,fx,xx){var vx=new f_;return vx.restart(yx,fx,xx),vx}function v_(){g_(),++af;for(var yx,fx=tf;fx;)0<=(yx=cf-fx._time)&&fx._call.call(null,yx),fx=fx._next;--af}function b_(){cf=(df=pf.now())+uf,af=lf=0;try{v_()}finally{af=0,T_(),cf=0}}function w_(){var yx=pf.now(),fx=yx-df;fx>sf&&(uf-=fx,df=yx)}function T_(){for(var yx,fx,xx=tf,vx=1/0;xx;)xx._call?(vx>xx._time&&(vx=xx._time),yx=xx,xx=xx._next):(fx=xx._next,xx._next=null,xx=yx?yx._next=fx:tf=fx);nf=yx,k_(vx)}function k_(yx){if(!af){lf&&(lf=clearTimeout(lf));var fx=yx-cf;24<fx?(yx<1/0&&(lf=setTimeout(b_,fx)),rf&&(rf=clearInterval(rf))):(rf||(df=cf,rf=setInterval(w_,sf)),af=1,_f(b_))}}function S_(yx,fx){var xx=yx.__transition;if(!xx||!(xx=xx[fx])||xx.state>yf)throw new Error("too late");return xx}function C_(yx,fx){var xx=yx.__transition;if(!xx||!(xx=xx[fx])||xx.state>xf)throw new Error("too late");return xx}function z_(yx,fx){var xx=yx.__transition;if(!xx||!(xx=xx[fx]))throw new Error("too late");return xx}function M_(yx,fx,xx){function bx(Cx){var zx,Mx,Ux,Ax;if(xx.state!==ff)return Tx();for(zx in Sx)if((Ax=Sx[zx]).name===xx.name){if(Ax.state===vf)return hf(bx);Ax.state===bf?(Ax.state=Tf,Ax.timer.stop(),Ax.on.call("interrupt",yx,yx.__data__,Ax.index,Ax.group),delete Sx[zx]):+zx<fx&&(Ax.state=Tf,Ax.timer.stop(),delete Sx[zx])}if(hf(function(){xx.state===vf&&(xx.state=bf,xx.timer.restart(wx,xx.delay,xx.time),wx(Cx))}),xx.state=xf,xx.on.call("start",yx,yx.__data__,xx.index,xx.group),xx.state===xf){for(xx.state=vf,kx=Array(Ux=xx.tween.length),zx=0,Mx=-1;zx<Ux;++zx)(Ax=xx.tween[zx].value.call(yx,yx.__data__,xx.index,xx.group))&&(kx[++Mx]=Ax);kx.length=Mx+1}}function wx(Cx){for(var zx=Cx<xx.duration?xx.ease.call(null,Cx/xx.duration):(xx.timer.restart(Tx),xx.state=wf,1),Mx=-1,Ux=kx.length;++Mx<Ux;)kx[Mx].call(null,zx);xx.state===wf&&(xx.on.call("end",yx,yx.__data__,xx.index,xx.group),Tx())}function Tx(){for(var Cx in xx.state=Tf,xx.timer.stop(),delete Sx[fx],Sx)return;delete yx.__transition}var kx,Sx=yx.__transition;Sx[fx]=xx,xx.timer=x_(function(Cx){xx.state=ff,xx.timer.restart(bx,xx.delay,xx.time),xx.delay<=Cx&&bx(Cx-xx.delay)},0,xx.time)}function U_(yx,fx){var xx,vx;return function(){var bx=C_(this,yx),wx=bx.tween;if(wx!==xx)for(var Tx=0,kx=(vx=xx=wx).length;Tx<kx;++Tx)if(vx[Tx].name===fx){(vx=vx.slice()).splice(Tx,1);break}bx.tween=vx}}function A_(yx,fx,xx){var vx,bx;if("function"!=typeof xx)throw new Error;return function(){var wx=C_(this,yx),Tx=wx.tween;if(Tx!==vx){bx=(vx=Tx).slice();for(var kx={name:fx,value:xx},Sx=0,Cx=bx.length;Sx<Cx;++Sx)if(bx[Sx].name===fx){bx[Sx]=kx;break}Sx===Cx&&bx.push(kx)}wx.tween=bx}}function Y_(yx,fx,xx){var vx=yx._id;return yx.each(function(){var bx=C_(this,vx);(bx.value||(bx.value={}))[fx]=xx.apply(this,arguments)}),function(bx){return z_(bx,vx).value[fx]}}function E_(yx){return function(){this.removeAttribute(yx)}}function P_(yx){return function(){this.removeAttributeNS(yx.space,yx.local)}}function D_(yx,fx,xx){var vx,bx;return function(){var wx=this.getAttribute(yx);return wx===xx?null:wx===vx?bx:bx=fx(vx=wx,xx)}}function F_(yx,fx,xx){var vx,bx;return function(){var wx=this.getAttributeNS(yx.space,yx.local);return wx===xx?null:wx===vx?bx:bx=fx(vx=wx,xx)}}function L_(yx,fx,xx){var vx,bx,wx;return function(){var Tx,kx=xx(this);return null==kx?void this.removeAttribute(yx):(Tx=this.getAttribute(yx),Tx===kx?null:Tx===vx&&kx===bx?wx:wx=fx(vx=Tx,bx=kx))}}function H_(yx,fx,xx){var vx,bx,wx;return function(){var Tx,kx=xx(this);return null==kx?void this.removeAttributeNS(yx.space,yx.local):(Tx=this.getAttributeNS(yx.space,yx.local),Tx===kx?null:Tx===vx&&kx===bx?wx:wx=fx(vx=Tx,bx=kx))}}function X_(yx,fx){function xx(){var vx=this,bx=fx.apply(vx,arguments);return bx&&function(wx){vx.setAttributeNS(yx.space,yx.local,bx(wx))}}return xx._value=fx,xx}function q_(yx,fx){function xx(){var vx=this,bx=fx.apply(vx,arguments);return bx&&function(wx){vx.setAttribute(yx,bx(wx))}}return xx._value=fx,xx}function I_(yx,fx){return function(){S_(this,yx).delay=+fx.apply(this,arguments)}}function N_(yx,fx){return fx=+fx,function(){S_(this,yx).delay=fx}}function O_(yx,fx){return function(){C_(this,yx).duration=+fx.apply(this,arguments)}}function $_(yx,fx){return fx=+fx,function(){C_(this,yx).duration=fx}}function j_(yx,fx){if("function"!=typeof fx)throw new Error;return function(){C_(this,yx).ease=fx}}function V_(yx){return(yx+"").trim().split(/^|\s+/).every(function(fx){var xx=fx.indexOf(".");return 0<=xx&&(fx=fx.slice(0,xx)),!fx||"start"===fx})}function B_(yx,fx,xx){var vx,bx,wx=V_(fx)?S_:C_;return function(){var Tx=wx(this,yx),kx=Tx.on;kx!==vx&&(bx=(vx=kx).copy()).on(fx,xx),Tx.on=bx}}function Z_(yx){return function(){var fx=this.parentNode;for(var xx in this.__transition)if(+xx!==yx)return;fx&&fx.removeChild(this)}}function W_(yx,fx){var xx,vx,bx;return function(){var wx=Hp(this,yx),Tx=(this.style.removeProperty(yx),Hp(this,yx));return wx===Tx?null:wx===xx&&Tx===vx?bx:bx=fx(xx=wx,vx=Tx)}}function R_(yx){return function(){this.style.removeProperty(yx)}}function J_(yx,fx,xx){var vx,bx;return function(){var wx=Hp(this,yx);return wx===xx?null:wx===vx?bx:bx=fx(vx=wx,xx)}}function G_(yx,fx,xx){var vx,bx,wx;return function(){var Tx=Hp(this,yx),kx=xx(this);return null==kx&&(this.style.removeProperty(yx),kx=Hp(this,yx)),Tx===kx?null:Tx===vx&&kx===bx?wx:wx=fx(vx=Tx,bx=kx)}}function K_(yx,fx,xx){function vx(){var bx=this,wx=fx.apply(bx,arguments);return wx&&function(Tx){bx.style.setProperty(yx,wx(Tx),xx)}}return vx._value=fx,vx}function Q_(yx){return function(){this.textContent=yx}}function eh(yx){return function(){var fx=yx(this);this.textContent=null==fx?"":fx}}function th(yx,fx,xx,vx){this._groups=yx,this._parents=fx,this._name=xx,this._id=vx}function oh(){return++Bf}function ih(yx,fx){for(var xx;!(xx=yx.__transition)||!(xx=xx[fx]);)if(!(yx=yx.parentNode))return Rf.time=g_(),Rf;return xx}function lh(yx,fx,xx){this.target=yx,this.type=fx,this.transform=xx}function rh(yx,fx,xx){this.k=yx,this.x=fx,this.y=xx}function sh(){el.event.stopImmediatePropagation()}function dh(){return!el.event.button}function ch(){var yx,fx,xx=this;return xx instanceof SVGElement?(yx=(xx=xx.ownerSVGElement||xx).width.baseVal.value,fx=xx.height.baseVal.value):(yx=xx.clientWidth,fx=xx.clientHeight),[[0,0],[yx,fx]]}function uh(){return this.__zoom||Kf}function ph(){el.event.stopImmediatePropagation()}function _h(yx){return{type:yx}}function hh(){return!el.event.button}function mh(){var yx=this.ownerSVGElement||this;return[[0,0],[yx.width.baseVal.value,yx.height.baseVal.value]]}function gh(yx){for(;!yx.__brush;)if(!(yx=yx.parentNode))return;return yx.__brush}function yh(yx){return yx[0][0]===yx[1][0]||yx[0][1]===yx[1][1]}function vh(yx){function fx(Ux){var Ax=Ux.property("__brush",Tx).selectAll(".overlay").data([_h("overlay")]);Ax.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ux.overlay).merge(Ax).each(function(){var Ex=gh(this).extent;Ry(this).attr("x",Ex[0][0]).attr("y",Ex[0][1]).attr("width",Ex[1][0]-Ex[0][0]).attr("height",Ex[1][1]-Ex[0][1])}),Ux.selectAll(".selection").data([_h("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ux.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Yx=Ux.selectAll(".handle").data(yx.handles,function(Ex){return Ex.type});Yx.exit().remove(),Yx.enter().append("rect").attr("class",function(Ex){return"handle handle--"+Ex.type}).attr("cursor",function(Ex){return ux[Ex.type]}),Ux.each(xx).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",wx)}function xx(){var Ux=Ry(this),Ax=gh(this).selection;Ax?(Ux.selectAll(".selection").style("display",null).attr("x",Ax[0][0]).attr("y",Ax[0][1]).attr("width",Ax[1][0]-Ax[0][0]).attr("height",Ax[1][1]-Ax[0][1]),Ux.selectAll(".handle").style("display",null).attr("x",function(Yx){return"e"===Yx.type[Yx.type.length-1]?Ax[1][0]-Mx/2:Ax[0][0]-Mx/2}).attr("y",function(Yx){return"s"===Yx.type[0]?Ax[1][1]-Mx/2:Ax[0][1]-Mx/2}).attr("width",function(Yx){return"n"===Yx.type||"s"===Yx.type?Ax[1][0]-Ax[0][0]+Mx:Mx}).attr("height",function(Yx){return"e"===Yx.type||"w"===Yx.type?Ax[1][1]-Ax[0][1]+Mx:Mx})):Ux.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function vx(Ux,Ax){return Ux.__brush.emitter||new bx(Ux,Ax)}function bx(Ux,Ax){this.that=Ux,this.args=Ax,this.state=Ux.__brush,this.active=0}function wx(){function Ux(){var pv=_y(Zx);!iv||Vx||Bx||(Math.abs(pv[0]-rv[0])>Math.abs(pv[1]-rv[1])?Bx=!0:Vx=!0),rv=pv,jx=!0,ox(),Ax()}function Ax(){var pv;switch(Ox=rv[0]-lv[0],$x=rv[1]-lv[1],Rx){case ix:case ax:Jx&&(Ox=Math.max(tv-Dx,Math.min(ov-Xx,Ox)),Fx=Dx+Ox,qx=Xx+Ox),Gx&&($x=Math.max(nv-Lx,Math.min(av-Ix,$x)),Hx=Lx+$x,Nx=Ix+$x);break;case lx:0>Jx?(Ox=Math.max(tv-Dx,Math.min(ov-Dx,Ox)),Fx=Dx+Ox,qx=Xx):0<Jx&&(Ox=Math.max(tv-Xx,Math.min(ov-Xx,Ox)),Fx=Dx,qx=Xx+Ox),0>Gx?($x=Math.max(nv-Lx,Math.min(av-Lx,$x)),Hx=Lx+$x,Nx=Ix):0<Gx&&($x=Math.max(nv-Ix,Math.min(av-Ix,$x)),Hx=Lx,Nx=Ix+$x);break;case rx:Jx&&(Fx=Math.max(tv,Math.min(ov,Dx-Ox*Jx)),qx=Math.max(tv,Math.min(ov,Xx+Ox*Jx))),Gx&&(Hx=Math.max(nv,Math.min(av,Lx-$x*Gx)),Nx=Math.max(nv,Math.min(av,Ix+$x*Gx)));}qx<Fx&&(Jx*=-1,pv=Dx,Dx=Xx,Xx=pv,pv=Fx,Fx=qx,qx=pv,Wx in px&&cv.attr("cursor",ux[Wx=px[Wx]])),Nx<Hx&&(Gx*=-1,pv=Lx,Lx=Ix,Ix=pv,pv=Hx,Hx=Nx,Nx=pv,Wx in _x&&cv.attr("cursor",ux[Wx=_x[Wx]])),Kx.selection&&(ev=Kx.selection),Vx&&(Fx=ev[0][0],qx=ev[1][0]),Bx&&(Hx=ev[0][1],Nx=ev[1][1]),ev[0][0]===Fx&&ev[0][1]===Hx&&ev[1][0]===qx&&ev[1][1]===Nx||(Kx.selection=[[Fx,Hx],[qx,Nx]],xx.call(Zx),sv.brush())}function Yx(){if(ph(),el.event.touches){if(el.event.touches.length)return;kx&&clearTimeout(kx),kx=setTimeout(function(){kx=null},500),dv.on("touchmove.brush touchend.brush touchcancel.brush",null)}else u_(el.event.view,jx),uv.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);dv.attr("pointer-events","all"),cv.attr("cursor",ux.overlay),Kx.selection&&(ev=Kx.selection),yh(ev)&&(Kx.selection=null,xx.call(Zx)),sv.end()}function Ex(){switch(el.event.keyCode){case 16:iv=Jx&&Gx;break;case 18:Rx===lx&&(Jx&&(Xx=qx-Ox*Jx,Dx=Fx+Ox*Jx),Gx&&(Ix=Nx-$x*Gx,Lx=Hx+$x*Gx),Rx=rx,Ax());break;case 32:Rx!==lx&&Rx!==rx||(0>Jx?Xx=qx-Ox:0<Jx&&(Dx=Fx-Ox),0>Gx?Ix=Nx-$x:0<Gx&&(Lx=Hx-$x),Rx=ix,cv.attr("cursor",ux.selection),Ax());break;default:return;}ox()}function Px(){switch(el.event.keyCode){case 16:iv&&(Vx=Bx=iv=!1,Ax());break;case 18:Rx===rx&&(0>Jx?Xx=qx:0<Jx&&(Dx=Fx),0>Gx?Ix=Nx:0<Gx&&(Lx=Hx),Rx=lx,Ax());break;case 32:Rx===ix&&(el.event.altKey?(Jx&&(Xx=qx-Ox*Jx,Dx=Fx+Ox*Jx),Gx&&(Ix=Nx-$x*Gx,Lx=Hx+$x*Gx),Rx=rx):(0>Jx?Xx=qx:0<Jx&&(Dx=Fx),0>Gx?Ix=Nx:0<Gx&&(Lx=Hx),Rx=lx),cv.attr("cursor",ux[Wx]),Ax());break;default:return;}ox()}if(el.event.touches){if(el.event.changedTouches.length<el.event.touches.length)return ox();}else if(kx)return;if(Cx.apply(this,arguments)){var Dx,Fx,Lx,Hx,Xx,qx,Ix,Nx,Ox,$x,jx,Vx,Bx,Zx=this,Wx=el.event.target.__data__.type,Rx="selection"===(el.event.metaKey?Wx="overlay":Wx)?ax:el.event.altKey?rx:lx,Jx=yx===dx?null:hx[Wx],Gx=yx===sx?null:mx[Wx],Kx=gh(Zx),Qx=Kx.extent,ev=Kx.selection,tv=Qx[0][0],nv=Qx[0][1],ov=Qx[1][0],av=Qx[1][1],iv=Jx&&Gx&&el.event.shiftKey,lv=_y(Zx),rv=lv,sv=vx(Zx,arguments).beforestart();"overlay"===Wx?Kx.selection=ev=[[Dx=yx===dx?tv:lv[0],Lx=yx===sx?nv:lv[1]],[Xx=yx===dx?ov:Dx,Ix=yx===sx?av:Lx]]:(Dx=ev[0][0],Lx=ev[0][1],Xx=ev[1][0],Ix=ev[1][1]),Fx=Dx,Hx=Lx,qx=Xx,Nx=Ix;var dv=Ry(Zx).attr("pointer-events","none"),cv=dv.selectAll(".overlay").attr("cursor",ux[Wx]);if(el.event.touches)dv.on("touchmove.brush",Ux,!0).on("touchend.brush touchcancel.brush",Yx,!0);else{var uv=Ry(el.event.view).on("keydown.brush",Ex,!0).on("keyup.brush",Px,!0).on("mousemove.brush",Ux,!0).on("mouseup.brush",Yx,!0);Qy(el.event.view)}ph(),Sf(Zx),xx.call(Zx),sv.start()}}function Tx(){var Ux=this.__brush||{selection:null};return Ux.extent=Sx.apply(this,arguments),Ux.dim=yx,Ux}var kx,Sx=mh,Cx=hh,zx=dp(fx,"start","brush","end"),Mx=6;return fx.move=function(Ux,Ax){Ux.selection?Ux.on("start.brush",function(){vx(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){vx(this,arguments).end()}).tween("brush",function(){function Yx(Xx){Px.selection=1===Xx&&yh(Lx)?null:Hx(Xx),xx.call(Ex),Dx.brush()}var Ex=this,Px=Ex.__brush,Dx=vx(Ex,arguments),Fx=Px.selection,Lx=yx.input("function"==typeof Ax?Ax.apply(this,arguments):Ax,Px.extent),Hx=Tg(Fx,Lx);return Fx&&Lx?Yx:Yx(1)}):Ux.each(function(){var Yx=this,Ex=arguments,Px=Yx.__brush,Dx=yx.input("function"==typeof Ax?Ax.apply(Yx,Ex):Ax,Px.extent),Fx=vx(Yx,Ex).beforestart();Sf(Yx),Px.selection=null==Dx||yh(Dx)?null:Dx,xx.call(Yx),Fx.start().brush().end()})},bx.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Ux){bp(new nx(fx,Ux,yx.output(this.state.selection)),zx.apply,zx,[Ux,this.that,this.args])}},fx.extent=function(Ux){return arguments.length?(Sx="function"==typeof Ux?Ux:tx([[+Ux[0][0],+Ux[0][1]],[+Ux[1][0],+Ux[1][1]]]),fx):Sx},fx.filter=function(Ux){return arguments.length?(Cx="function"==typeof Ux?Ux:tx(!!Ux),fx):Cx},fx.handleSize=function(Ux){return arguments.length?(Mx=+Ux,fx):Mx},fx.on=function(){var Ux=zx.on.apply(zx,arguments);return Ux===zx?fx:Ux},fx}var bh=function(yx,fx){return yx<fx?-1:yx>fx?1:yx>=fx?0:NaN},wh=function(yx){return 1===yx.length&&(yx=tl(yx)),{left:function(fx,xx,vx,bx){for(null==vx&&(vx=0),null==bx&&(bx=fx.length);vx<bx;){var wx=vx+bx>>>1;0>yx(fx[wx],xx)?vx=wx+1:bx=wx}return vx},right:function(fx,xx,vx,bx){for(null==vx&&(vx=0),null==bx&&(bx=fx.length);vx<bx;){var wx=vx+bx>>>1;0<yx(fx[wx],xx)?bx=wx:vx=wx+1}return vx}}},Th=wh(bh).right,Sh=Math.sqrt(50),Ch=Math.sqrt(10),zh=Math.sqrt(2),Mh=function(yx,fx,xx){var vx,bx,wx,Tx=fx<yx,kx=-1;if(Tx&&(vx=yx,yx=fx,fx=vx),0===(wx=nl(yx,fx,xx))||!isFinite(wx))return[];if(0<wx)for(yx=Math.ceil(yx/wx),fx=Math.floor(fx/wx),bx=Array(vx=Math.ceil(fx-yx+1));++kx<vx;)bx[kx]=(yx+kx)*wx;else for(yx=Math.floor(yx*wx),fx=Math.ceil(fx*wx),bx=Array(vx=Math.ceil(yx-fx+1));++kx<vx;)bx[kx]=(yx-kx)/wx;return Tx&&bx.reverse(),bx},Yh=Math.PI,Eh=2*Yh;al.prototype=il.prototype={constructor:al,moveTo:function(yx,fx){this._+="M"+(this._x0=this._x1=+yx)+","+(this._y0=this._y1=+fx)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(yx,fx){this._+="L"+(this._x1=+yx)+","+(this._y1=+fx)},quadraticCurveTo:function(yx,fx,xx,vx){this._+="Q"+ +yx+","+ +fx+","+(this._x1=+xx)+","+(this._y1=+vx)},bezierCurveTo:function(yx,fx,xx,vx,bx,wx){this._+="C"+ +yx+","+ +fx+","+ +xx+","+ +vx+","+(this._x1=+bx)+","+(this._y1=+wx)},arcTo:function(yx,fx,xx,vx,bx){yx=+yx,fx=+fx,xx=+xx,vx=+vx,bx=+bx;var wx=this._x1,Tx=this._y1,kx=xx-yx,Sx=vx-fx,Cx=wx-yx,zx=Tx-fx,Mx=Cx*Cx+zx*zx;if(0>bx)throw new Error("negative radius: "+bx);if(null===this._x1)this._+="M"+(this._x1=yx)+","+(this._y1=fx);else if(!(1e-6<Mx));else if(1e-6<Math.abs(zx*kx-Sx*Cx)&&bx){var Ux=xx-wx,Ax=vx-Tx,Yx=kx*kx+Sx*Sx,Px=Math.sqrt(Yx),Dx=Math.sqrt(Mx),Fx=bx*Math.tan((Yh-Math.acos((Yx+Mx-(Ux*Ux+Ax*Ax))/(2*Px*Dx)))/2),Lx=Fx/Dx,Hx=Fx/Px;1e-6<Math.abs(Lx-1)&&(this._+="L"+(yx+Lx*Cx)+","+(fx+Lx*zx)),this._+="A"+bx+","+bx+",0,0,"+ +(zx*Ux>Cx*Ax)+","+(this._x1=yx+Hx*kx)+","+(this._y1=fx+Hx*Sx)}else this._+="L"+(this._x1=yx)+","+(this._y1=fx)},arc:function(yx,fx,xx,vx,bx,wx){yx=+yx,fx=+fx;var Tx=(xx=+xx)*Math.cos(vx),kx=xx*Math.sin(vx),Sx=yx+Tx,Cx=fx+kx,zx=1^wx,Mx=wx?vx-bx:bx-vx;if(0>xx)throw new Error("negative radius: "+xx);null===this._x1?this._+="M"+Sx+","+Cx:(1e-6<Math.abs(this._x1-Sx)||1e-6<Math.abs(this._y1-Cx))&&(this._+="L"+Sx+","+Cx),xx&&(0>Mx&&(Mx=Mx%Eh+Eh),Mx>Eh-1e-6?this._+="A"+xx+","+xx+",0,1,"+zx+","+(yx-Tx)+","+(fx-kx)+"A"+xx+","+xx+",0,1,"+zx+","+(this._x1=Sx)+","+(this._y1=Cx):1e-6<Mx&&(this._+="A"+xx+","+xx+",0,"+ +(Mx>=Yh)+","+zx+","+(this._x1=yx+xx*Math.cos(bx))+","+(this._y1=fx+xx*Math.sin(bx))))},rect:function(yx,fx,xx,vx){this._+="M"+(this._x0=this._x1=+yx)+","+(this._y0=this._y1=+fx)+"h"+ +xx+"v"+ +vx+"h"+-xx+"Z"},toString:function(){return this._}};var Dh=function(yx){return function(){return yx}},Fh=1e-12;ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(yx,fx){switch(yx=+yx,fx=+fx,this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2;default:this._context.lineTo(yx,fx);}}};var Lh=function(yx){return new ll(yx)},Hh=function(){function yx(kx){var Sx,Cx,zx,Mx=kx.length,Ux=!1;for(null==bx&&(Tx=wx(zx=il())),Sx=0;Sx<=Mx;++Sx)!(Sx<Mx&&vx(Cx=kx[Sx],Sx,kx))===Ux&&((Ux=!Ux)?Tx.lineStart():Tx.lineEnd()),Ux&&Tx.point(+fx(Cx,Sx,kx),+xx(Cx,Sx,kx));if(zx)return Tx=null,zx+""||null}var fx=rl,xx=sl,vx=Dh(!0),bx=null,wx=Lh,Tx=null;return yx.x=function(kx){return arguments.length?(fx="function"==typeof kx?kx:Dh(+kx),yx):fx},yx.y=function(kx){return arguments.length?(xx="function"==typeof kx?kx:Dh(+kx),yx):xx},yx.defined=function(kx){return arguments.length?(vx="function"==typeof kx?kx:Dh(!!kx),yx):vx},yx.curve=function(kx){return arguments.length?(wx=kx,null!=bx&&(Tx=wx(bx)),yx):wx},yx.context=function(kx){return arguments.length?(null==kx?bx=Tx=null:Tx=wx(bx=kx),yx):bx},yx};cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(yx,fx){switch(yx=+yx,fx=+fx,this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dl(this,yx,fx);}this._x0=this._x1,this._x1=yx,this._y0=this._y1,this._y1=fx}};pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ul(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(yx,fx){switch(yx=+yx,fx=+fx,this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2,this._x1=yx,this._y1=fx;break;case 2:this._point=3;default:ul(this,yx,fx);}this._x0=this._x1,this._x1=this._x2,this._x2=yx,this._y0=this._y1,this._y1=this._y2,this._y2=fx}};var Ih=function yx(fx){function xx(vx){return new pl(vx,fx)}return xx.tension=function(vx){return yx(+vx)},xx}(0);hl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(yx,fx){if(yx=+yx,fx=+fx,this._point){var xx=this._x2-yx,vx=this._y2-fx;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(xx*xx+vx*vx,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2;break;case 2:this._point=3;default:_l(this,yx,fx);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=yx,this._y0=this._y1,this._y1=this._y2,this._y2=fx}};var Nh=function yx(fx){function xx(vx){return fx?new hl(vx,fx):new pl(vx,0)}return xx.alpha=function(vx){return yx(+vx)},xx}(.5);xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fl(this,this._t0,yl(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(yx,fx){var xx=NaN;if(yx=+yx,fx=+fx,yx!==this._x1||fx!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2;break;case 2:this._point=3,fl(this,yl(this,xx=gl(this,yx,fx)),xx);break;default:fl(this,this._t0,xx=gl(this,yx,fx));}this._x0=this._x1,this._x1=yx,this._y0=this._y1,this._y1=fx,this._t0=xx}}},(function(yx){this._context=new bl(yx)}.prototype=Object.create(xl.prototype)).point=function(yx,fx){xl.prototype.point.call(this,fx,yx)},bl.prototype={moveTo:function(yx,fx){this._context.moveTo(fx,yx)},closePath:function(){this._context.closePath()},lineTo:function(yx,fx){this._context.lineTo(fx,yx)},bezierCurveTo:function(yx,fx,xx,vx,bx,wx){this._context.bezierCurveTo(fx,yx,vx,xx,wx,bx)}},Tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var yx=this._x,fx=this._y,xx=yx.length;if(xx)if(this._line?this._context.lineTo(yx[0],fx[0]):this._context.moveTo(yx[0],fx[0]),2===xx)this._context.lineTo(yx[1],fx[1]);else for(var vx=kl(yx),bx=kl(fx),wx=0,Tx=1;Tx<xx;++wx,++Tx)this._context.bezierCurveTo(vx[0][wx],bx[0][wx],vx[1][wx],bx[1][wx],yx[Tx],fx[Tx]);(this._line||0!==this._line&&1===xx)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(yx,fx){this._x.push(+yx),this._y.push(+fx)}};Sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(yx,fx){switch(yx=+yx,fx=+fx,this._point){case 0:this._point=1,this._line?this._context.lineTo(yx,fx):this._context.moveTo(yx,fx);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,fx),this._context.lineTo(yx,fx);else{var xx=this._x*(1-this._t)+yx*this._t;this._context.lineTo(xx,this._y),this._context.lineTo(xx,fx)}}this._x=yx,this._y=fx}};var jh=new Date,Vh=new Date,Bh=Ml(function(){},function(yx,fx){yx.setTime(+yx+fx)},function(yx,fx){return fx-yx});Bh.every=function(yx){return yx=Math.floor(yx),isFinite(yx)&&0<yx?1<yx?Ml(function(fx){fx.setTime(Math.floor(fx/yx)*yx)},function(fx,xx){fx.setTime(+fx+xx*yx)},function(fx,xx){return(xx-fx)/yx}):Bh:null};var Zh=6e4,Wh=6048e5,Rh=Ml(function(yx){yx.setTime(1e3*Math.floor(yx/1e3))},function(yx,fx){yx.setTime(+yx+1e3*fx)},function(yx,fx){return(fx-yx)/1e3},function(yx){return yx.getUTCSeconds()}),Jh=Ml(function(yx){yx.setTime(Math.floor(yx/Zh)*Zh)},function(yx,fx){yx.setTime(+yx+fx*Zh)},function(yx,fx){return(fx-yx)/Zh},function(yx){return yx.getMinutes()}),Gh=Ml(function(yx){var fx=yx.getTimezoneOffset()*Zh%36e5;0>fx&&(fx+=36e5),yx.setTime(36e5*Math.floor((+yx-fx)/36e5)+fx)},function(yx,fx){yx.setTime(+yx+36e5*fx)},function(yx,fx){return(fx-yx)/36e5},function(yx){return yx.getHours()}),Kh=Ml(function(yx){yx.setHours(0,0,0,0)},function(yx,fx){yx.setDate(yx.getDate()+fx)},function(yx,fx){return(fx-yx-(fx.getTimezoneOffset()-yx.getTimezoneOffset())*Zh)/864e5},function(yx){return yx.getDate()-1}),Qh=Ul(0),em=Ul(1),tm=(Ul(2),Ul(3),Ul(4),Ul(5),Ul(6),Ml(function(yx){yx.setDate(1),yx.setHours(0,0,0,0)},function(yx,fx){yx.setMonth(yx.getMonth()+fx)},function(yx,fx){return fx.getMonth()-yx.getMonth()+12*(fx.getFullYear()-yx.getFullYear())},function(yx){return yx.getMonth()})),nm=Ml(function(yx){yx.setMonth(0,1),yx.setHours(0,0,0,0)},function(yx,fx){yx.setFullYear(yx.getFullYear()+fx)},function(yx,fx){return fx.getFullYear()-yx.getFullYear()},function(yx){return yx.getFullYear()});nm.every=function(yx){return isFinite(yx=Math.floor(yx))&&0<yx?Ml(function(fx){fx.setFullYear(Math.floor(fx.getFullYear()/yx)*yx),fx.setMonth(0,1),fx.setHours(0,0,0,0)},function(fx,xx){fx.setFullYear(fx.getFullYear()+xx*yx)}):null},Ml(function(yx){yx.setUTCSeconds(0,0)},function(yx,fx){yx.setTime(+yx+fx*Zh)},function(yx,fx){return(fx-yx)/Zh},function(yx){return yx.getUTCMinutes()}),Ml(function(yx){yx.setUTCMinutes(0,0,0)},function(yx,fx){yx.setTime(+yx+36e5*fx)},function(yx,fx){return(fx-yx)/36e5},function(yx){return yx.getUTCHours()});var om=Ml(function(yx){yx.setUTCHours(0,0,0,0)},function(yx,fx){yx.setUTCDate(yx.getUTCDate()+fx)},function(yx,fx){return(fx-yx)/864e5},function(yx){return yx.getUTCDate()-1}),am=Al(0),im=Al(1),lm=(Al(2),Al(3),Al(4),Al(5),Al(6),Ml(function(yx){yx.setUTCDate(1),yx.setUTCHours(0,0,0,0)},function(yx,fx){yx.setUTCMonth(yx.getUTCMonth()+fx)},function(yx,fx){return fx.getUTCMonth()-yx.getUTCMonth()+12*(fx.getUTCFullYear()-yx.getUTCFullYear())},function(yx){return yx.getUTCMonth()}),Ml(function(yx){yx.setUTCMonth(0,1),yx.setUTCHours(0,0,0,0)},function(yx,fx){yx.setUTCFullYear(yx.getUTCFullYear()+fx)},function(yx,fx){return fx.getUTCFullYear()-yx.getUTCFullYear()},function(yx){return yx.getUTCFullYear()}));lm.every=function(yx){return isFinite(yx=Math.floor(yx))&&0<yx?Ml(function(fx){fx.setUTCFullYear(Math.floor(fx.getUTCFullYear()/yx)*yx),fx.setUTCMonth(0,1),fx.setUTCHours(0,0,0,0)},function(fx,xx){fx.setUTCFullYear(fx.getUTCFullYear()+xx*yx)}):null};var rm,sm=function(yx,fx){if(0>(xx=(yx=fx?yx.toExponential(fx-1):yx.toExponential()).indexOf("e")))return null;var xx,vx=yx.slice(0,xx);return[1<vx.length?vx[0]+vx.slice(2):vx,+yx.slice(xx+1)]},dm=function(yx){return yx=sm(Math.abs(yx)),yx?yx[1]:NaN},cm=function(yx,fx){return function(xx,vx){for(var bx=xx.length,wx=[],Tx=0,kx=yx[0],Sx=0;0<bx&&0<kx&&(Sx+kx+1>vx&&(kx=Math.max(1,vx-Sx)),wx.push(xx.substring(bx-=kx,bx+kx)),!((Sx+=kx+1)>vx));)kx=yx[Tx=(Tx+1)%yx.length];return wx.reverse().join(fx)}},um=function(yx){return function(fx){return fx.replace(/[0-9]/g,function(xx){return yx[+xx]})}},pm=function(yx,fx){var xx=sm(yx,fx);if(!xx)return yx+"";var vx=xx[0],bx=xx[1];return 0>bx?"0."+Array(-bx).join("0")+vx:vx.length>bx+1?vx.slice(0,bx+1)+"."+vx.slice(bx+1):vx+Array(bx-vx.length+2).join("0")},_m={"":function(yx,fx){t:for(var xx,vx=(yx=yx.toPrecision(fx)).length,bx=1,wx=-1;bx<vx;++bx)switch(yx[bx]){case".":wx=xx=bx;break;case"0":0===wx&&(wx=bx),xx=bx;break;case"e":break t;default:0<wx&&(wx=0);}return 0<wx?yx.slice(0,wx)+yx.slice(xx+1):yx},"%":function(yx,fx){return(100*yx).toFixed(fx)},b:function(yx){return Math.round(yx).toString(2)},c:function(yx){return yx+""},d:function(yx){return Math.round(yx).toString(10)},e:function(yx,fx){return yx.toExponential(fx)},f:function(yx,fx){return yx.toFixed(fx)},g:function(yx,fx){return yx.toPrecision(fx)},o:function(yx){return Math.round(yx).toString(8)},p:function(yx,fx){return pm(100*yx,fx)},r:pm,s:function(yx,fx){var xx=sm(yx,fx);if(!xx)return yx+"";var vx=xx[0],bx=xx[1],wx=bx-(rm=3*Math.max(-8,Math.min(8,Math.floor(bx/3))))+1,Tx=vx.length;return wx===Tx?vx:wx>Tx?vx+Array(wx-Tx+1).join("0"):0<wx?vx.slice(0,wx)+"."+vx.slice(wx):"0."+Array(1-wx).join("0")+sm(yx,Math.max(0,fx+wx-1))[0]},X:function(yx){return Math.round(yx).toString(16).toUpperCase()},x:function(yx){return Math.round(yx).toString(16)}},hm=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;Yl.prototype=El.prototype,El.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var mm,gm,ym=function(yx){return yx},fm=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],xm=function(yx){function fx(Sx){function Cx(Ix){var Nx,Ox,$x,jx=Lx,Vx=Hx;if("c"===Fx)Vx=Xx(Ix)+Vx,Ix="";else{var Bx=0>(Ix=+Ix);if(Ix=Xx(Math.abs(Ix),Dx),Bx&&0==+Ix&&(Bx=!1),jx=(Bx?"("===Ux?Ux:"-":"-"===Ux||"("===Ux?"":Ux)+jx,Vx=Vx+("s"===Fx?fm[8+rm/3]:"")+(Bx&&"("===Ux?")":""),qx)for(Nx=-1,Ox=Ix.length;++Nx<Ox;)if(48>($x=Ix.charCodeAt(Nx))||57<$x){Vx=(46===$x?wx+Ix.slice(Nx+1):Ix.slice(Nx))+Vx,Ix=Ix.slice(0,Nx);break}}Px&&!Yx&&(Ix=vx(Ix,1/0));var Zx=jx.length+Ix.length+Vx.length,Wx=Zx<Ex?Array(Ex-Zx+1).join(zx):"";switch(Px&&Yx&&(Ix=vx(Wx+Ix,Wx.length?Ex-Vx.length:1/0),Wx=""),Mx){case"<":Ix=jx+Ix+Vx+Wx;break;case"=":Ix=jx+Wx+Ix+Vx;break;case"^":Ix=Wx.slice(0,Zx=Wx.length>>1)+jx+Ix+Vx+Wx.slice(Zx);break;default:Ix=Wx+jx+Ix+Vx;}return Tx(Ix)}var zx=(Sx=Yl(Sx)).fill,Mx=Sx.align,Ux=Sx.sign,Ax=Sx.symbol,Yx=Sx.zero,Ex=Sx.width,Px=Sx.comma,Dx=Sx.precision,Fx=Sx.type,Lx="$"===Ax?bx[0]:"#"===Ax&&/[boxX]/.test(Fx)?"0"+Fx.toLowerCase():"",Hx="$"===Ax?bx[1]:/[%p]/.test(Fx)?kx:"",Xx=_m[Fx],qx=!Fx||/[defgprs%]/.test(Fx);return Dx=null==Dx?Fx?6:12:/[gprs]/.test(Fx)?Math.max(1,Math.min(21,Dx)):Math.max(0,Math.min(20,Dx)),Cx.toString=function(){return Sx+""},Cx}var vx=yx.grouping&&yx.thousands?cm(yx.grouping,yx.thousands):ym,bx=yx.currency,wx=yx.decimal,Tx=yx.numerals?um(yx.numerals):ym,kx=yx.percent||"%";return{format:fx,formatPrefix:function(Sx,Cx){var zx=fx((Sx=Yl(Sx),Sx.type="f",Sx)),Mx=3*Math.max(-8,Math.min(8,Math.floor(dm(Cx)/3))),Ux=Math.pow(10,-Mx),Ax=fm[8+Mx/3];return function(Yx){return zx(Ux*Yx)+Ax}}}};Pl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var vm,bm,wm,Tm=function(yx){return Math.max(0,-dm(Math.abs(yx)))},km=function(yx,fx){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dm(fx)/3)))-dm(Math.abs(yx)))},Sm=function(yx,fx){return yx=Math.abs(yx),fx=Math.abs(fx)-yx,Math.max(0,dm(fx)-dm(yx))+1},Cm={"-":"",_:" ",0:"0"},zm=/^\s*\d+/,Mm=/^%/,Um=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Yd({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||bm("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||wm("%Y-%m-%dT%H:%M:%S.%LZ"),Dd.prototype=Fd.prototype={constructor:Dd,has:function(yx){return"$"+yx in this},get:function(yx){return this["$"+yx]},set:function(yx,fx){return this["$"+yx]=fx,this},remove:function(yx){var fx="$"+yx;return fx in this&&delete this[fx]},clear:function(){for(var yx in this)"$"===yx[0]&&delete this[yx]},keys:function(){var yx=[];for(var fx in this)"$"===fx[0]&&yx.push(fx.slice(1));return yx},values:function(){var yx=[];for(var fx in this)"$"===fx[0]&&yx.push(this[fx]);return yx},entries:function(){var yx=[];for(var fx in this)"$"===fx[0]&&yx.push({key:fx.slice(1),value:this[fx]});return yx},size:function(){var yx=0;for(var fx in this)"$"===fx[0]&&++yx;return yx},empty:function(){for(var yx in this)if("$"===yx[0])return!1;return!0},each:function(yx){for(var fx in this)"$"===fx[0]&&yx(this[fx],fx.slice(1),this)}};var Am=Fd.prototype;Ld.prototype=function(yx,fx){var xx=new Ld;if(yx instanceof Ld)yx.each(function(wx){xx.add(wx)});else if(yx){var vx=-1,bx=yx.length;if(null==fx)for(;++vx<bx;)xx.add(yx[vx]);else for(;++vx<bx;)xx.add(fx(yx[vx],vx,yx))}return xx}.prototype={constructor:Ld,has:Am.has,add:function(yx){return yx+="",this["$"+yx]=yx,this},remove:Am.remove,clear:Am.clear,values:Am.keys,size:Am.size,empty:Am.empty,each:Am.each};var Ym=Array.prototype,Em=Ym.map,Pm=Ym.slice,Dm=function(yx,fx,xx){yx.prototype=fx.prototype=xx,xx.constructor=yx},Xm=/^#([0-9a-f]{3})$/,qm=/^#([0-9a-f]{6})$/,Im=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Nm=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Om=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,$m=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,jm=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Vm=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Bm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dm(qd,Id,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Dm(Vd,jd,Xd(qd,{brighter:function(yx){return yx=null==yx?1/.7:Math.pow(1/.7,yx),new Vd(this.r*yx,this.g*yx,this.b*yx,this.opacity)},darker:function(yx){return yx=null==yx?.7:Math.pow(.7,yx),new Vd(this.r*yx,this.g*yx,this.b*yx,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var yx=this.opacity;return yx=isNaN(yx)?1:Math.max(0,Math.min(1,yx)),(1===yx?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===yx?")":", "+yx+")")}})),Dm(Rd,function(yx,fx,xx,vx){return 1===arguments.length?Zd(yx):new Rd(yx,fx,xx,null==vx?1:vx)},Xd(qd,{brighter:function(yx){return yx=null==yx?1/.7:Math.pow(1/.7,yx),new Rd(this.h,this.s,this.l*yx,this.opacity)},darker:function(yx){return yx=null==yx?.7:Math.pow(.7,yx),new Rd(this.h,this.s,this.l*yx,this.opacity)},rgb:function(){var yx=this.h%360+360*(0>this.h),fx=isNaN(yx)||isNaN(this.s)?0:this.s,xx=this.l,vx=xx+(.5>xx?xx:1-xx)*fx,bx=2*xx-vx;return new Vd(Jd(240<=yx?yx-240:yx+120,bx,vx),Jd(yx,bx,vx),Jd(120>yx?yx+240:yx-120,bx,vx),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var Zm=Math.PI/180,Wm=180/Math.PI,Rm=.95047,Jm=1,Gm=1.08883,Km=4/29,Qm=6/29,eg=3*Qm*Qm,tg=Qm*Qm*Qm;Dm(Qd,function(yx,fx,xx,vx){return 1===arguments.length?Gd(yx):new Qd(yx,fx,xx,null==vx?1:vx)},Xd(qd,{brighter:function(yx){return new Qd(this.l+18*(null==yx?1:yx),this.a,this.b,this.opacity)},darker:function(yx){return new Qd(this.l-18*(null==yx?1:yx),this.a,this.b,this.opacity)},rgb:function(){var yx=(this.l+16)/116,fx=isNaN(this.a)?yx:yx+this.a/500,xx=isNaN(this.b)?yx:yx-this.b/200;return yx=Jm*dc(yx),fx=Rm*dc(fx),xx=Gm*dc(xx),new Vd(cc(3.2404542*fx-1.5371385*yx-.4985314*xx),cc(-.969266*fx+1.8760108*yx+.041556*xx),cc(.0556434*fx-.2040259*yx+1.0572252*xx),this.opacity)}})),Dm(mc,function(yx,fx,xx,vx){return 1===arguments.length?_c(yx):new mc(yx,fx,xx,null==vx?1:vx)},Xd(qd,{brighter:function(yx){return new mc(this.h,this.c,this.l+18*(null==yx?1:yx),this.opacity)},darker:function(yx){return new mc(this.h,this.c,this.l-18*(null==yx?1:yx),this.opacity)},rgb:function(){return Gd(this).rgb()}}));var ng=-.14861,og=1.78277,ag=-.29227,ig=-.90649,lg=1.97294,rg=lg*ig,sg=lg*og,dg=og*ag-ig*ng;Dm(fc,yc,Xd(qd,{brighter:function(yx){return yx=null==yx?1/.7:Math.pow(1/.7,yx),new fc(this.h,this.s,this.l*yx,this.opacity)},darker:function(yx){return yx=null==yx?.7:Math.pow(.7,yx),new fc(this.h,this.s,this.l*yx,this.opacity)},rgb:function(){var yx=isNaN(this.h)?0:(this.h+120)*Zm,fx=+this.l,xx=isNaN(this.s)?0:this.s*fx*(1-fx),vx=Math.cos(yx),bx=Math.sin(yx);return new Vd(255*(fx+xx*(ng*vx+og*bx)),255*(fx+xx*(ag*vx+ig*bx)),255*(fx+xx*(lg*vx)),this.opacity)}}));var cg,ug,pg,_g,hg=function(yx){return function(){return yx}},mg=function yx(fx){function xx(bx,wx){var Tx=vx((bx=jd(bx)).r,(wx=jd(wx)).r),kx=vx(bx.g,wx.g),Sx=vx(bx.b,wx.b),Cx=Tc(bx.opacity,wx.opacity);return function(zx){return bx.r=Tx(zx),bx.g=kx(zx),bx.b=Sx(zx),bx.opacity=Cx(zx),bx+""}}var vx=wc(fx);return xx.gamma=yx,xx}(1),gg=function(yx,fx){var xx,vx=fx?fx.length:0,bx=yx?Math.min(vx,yx.length):0,wx=Array(vx),Tx=Array(vx);for(xx=0;xx<bx;++xx)wx[xx]=Tg(yx[xx],fx[xx]);for(;xx<vx;++xx)Tx[xx]=fx[xx];return function(kx){for(xx=0;xx<bx;++xx)Tx[xx]=wx[xx](kx);return Tx}},yg=function(yx,fx){var xx=new Date;return yx=+yx,fx-=yx,function(vx){return xx.setTime(yx+fx*vx),xx}},fg=function(yx,fx){return yx=+yx,fx-=yx,function(xx){return yx+fx*xx}},xg=function(yx,fx){var xx,vx={},bx={};for(xx in null!==yx&&"object"==typeof yx||(yx={}),null!==fx&&"object"==typeof fx||(fx={}),fx)xx in yx?vx[xx]=Tg(yx[xx],fx[xx]):bx[xx]=fx[xx];return function(wx){for(xx in vx)bx[xx]=vx[xx](wx);return bx}},vg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(vg.source,"g"),wg=function(yx,fx){var xx,vx,bx,wx=vg.lastIndex=bg.lastIndex=0,Tx=-1,kx=[],Sx=[];for(yx+="",fx+="";(xx=vg.exec(yx))&&(vx=bg.exec(fx));)(bx=vx.index)>wx&&(bx=fx.slice(wx,bx),kx[Tx]?kx[Tx]+=bx:kx[++Tx]=bx),(xx=xx[0])===(vx=vx[0])?kx[Tx]?kx[Tx]+=vx:kx[++Tx]=vx:(kx[++Tx]=null,Sx.push({i:Tx,x:fg(xx,vx)})),wx=bg.lastIndex;return wx<fx.length&&(bx=fx.slice(wx),kx[Tx]?kx[Tx]+=bx:kx[++Tx]=bx),2>kx.length?Sx[0]?Sc(Sx[0].x):kc(fx):(fx=Sx.length,function(Cx){for(var zx,Mx=0;Mx<fx;++Mx)kx[(zx=Sx[Mx]).i]=zx.x(Cx);return kx.join("")})},Tg=function(yx,fx){var xx,vx=typeof fx;return null==fx||"boolean"===vx?hg(fx):("number"===vx?fg:"string"===vx?(xx=Id(fx))?(fx=xx,mg):wg:fx instanceof Id?mg:fx instanceof Date?yg:Array.isArray(fx)?gg:"function"!=typeof fx.valueOf&&"function"!=typeof fx.toString||isNaN(fx)?xg:fg)(yx,fx)},kg=function(yx,fx){return yx=+yx,fx-=yx,function(xx){return Math.round(yx+fx*xx)}},Sg=180/Math.PI,Cg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},zg=function(yx,fx,xx,vx,bx,wx){var Tx,kx,Sx;return(Tx=Math.sqrt(yx*yx+fx*fx))&&(yx/=Tx,fx/=Tx),(Sx=yx*xx+fx*vx)&&(xx-=yx*Sx,vx-=fx*Sx),(kx=Math.sqrt(xx*xx+vx*vx))&&(xx/=kx,vx/=kx,Sx/=kx),yx*vx<fx*xx&&(yx=-yx,fx=-fx,Sx=-Sx,Tx=-Tx),{translateX:bx,translateY:wx,rotate:Math.atan2(fx,yx)*Sg,skewX:Math.atan(Sx)*Sg,scaleX:Tx,scaleY:kx}},Mg=Mc(function(yx){return"none"===yx?Cg:(cg||(cg=document.createElement("DIV"),ug=document.documentElement,pg=document.defaultView),cg.style.transform=yx,yx=pg.getComputedStyle(ug.appendChild(cg),null).getPropertyValue("transform"),ug.removeChild(cg),yx=yx.slice(7,-1).split(","),zg(+yx[0],+yx[1],+yx[2],+yx[3],+yx[4],+yx[5]))},"px, ","px)","deg)"),Ug=Mc(function(yx){return null==yx?Cg:(_g||(_g=document.createElementNS("http://www.w3.org/2000/svg","g")),_g.setAttribute("transform",yx),(yx=_g.transform.baseVal.consolidate())?(yx=yx.matrix,zg(yx.a,yx.b,yx.c,yx.d,yx.e,yx.f)):Cg)},", ",")",")"),Ag=Math.SQRT2,Yg=function(yx,fx){var xx,vx,bx=yx[0],wx=yx[1],Tx=yx[2],kx=fx[0],Sx=fx[1],Cx=fx[2],zx=kx-bx,Mx=Sx-wx,Ux=zx*zx+Mx*Mx;if(1e-12>Ux)vx=Math.log(Cx/Tx)/Ag,xx=function(Fx){return[bx+Fx*zx,wx+Fx*Mx,Tx*Math.exp(Ag*Fx*vx)]};else{var Ax=Math.sqrt(Ux),Yx=(Cx*Cx-Tx*Tx+4*Ux)/(2*(2*Tx)*Ax),Ex=(Cx*Cx-Tx*Tx-4*Ux)/(2*(2*Cx)*Ax),Px=Math.log(Math.sqrt(Yx*Yx+1)-Yx),Dx=Math.log(Math.sqrt(Ex*Ex+1)-Ex);vx=(Dx-Px)/Ag,xx=function(Fx){var Lx=Fx*vx,Hx=Uc(Px),Xx=Tx/(2*Ax)*(Hx*Yc(Ag*Lx+Px)-Ac(Px));return[bx+Xx*zx,wx+Xx*Mx,Tx*Hx/Uc(Ag*Lx+Px)]}}return xx.duration=1e3*vx,xx};Ec(function(yx,fx){var xx=fx-yx;return xx?xc(yx,180<xx||-180>xx?xx-360*Math.round(xx/360):xx):hg(isNaN(yx)?fx:yx)});var Eg=Ec(Tc),Pg=function(yx){return function(){return yx}},Dg=function(yx){return+yx},Fg=[0,1],Lg=function(yx,fx,xx){var vx,bx=yx[0],wx=yx[yx.length-1],Tx=ol(bx,wx,null==fx?10:fx);switch((xx=Yl(null==xx?",f":xx)).type){case"s":var kx=Math.max(Math.abs(bx),Math.abs(wx));return null!=xx.precision||isNaN(vx=km(Tx,kx))||(xx.precision=vx),gm(xx,kx);case"":case"e":case"g":case"p":case"r":null!=xx.precision||isNaN(vx=Sm(Tx,Math.max(Math.abs(bx),Math.abs(wx))))||(xx.precision=vx-("e"===xx.type));break;case"f":case"%":null!=xx.precision||isNaN(vx=Tm(Tx))||(xx.precision=vx-2*("%"===xx.type));}return el.format(xx)},Hg=function(yx,fx){var xx,vx=0,bx=(yx=yx.slice()).length-1,wx=yx[vx],Tx=yx[bx];return Tx<wx&&(xx=vx,vx=bx,bx=xx,xx=wx,wx=Tx,Tx=xx),yx[vx]=fx.floor(wx),yx[bx]=fx.ceil(Tx),yx},Xg=1e3,qg=60*Xg,Ig=60*qg,Ng=24*Ig,Og=7*Ng,$g=30*Ng,jg=365*Ng,Bg=function(yx){return yx.match(/.{6}/g).map(function(fx){return"#"+fx})};Bg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Bg("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Bg("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Bg("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Eg(yc(300,.5,0),yc(-240,.5,1)),Eg(yc(-100,.75,.35),yc(80,1.5,.8)),Eg(yc(260,.75,.35),yc(80,1.5,.8)),yc();var Zg=Array.prototype.slice,Wg=function(yx){return yx},Rg=1,Jg=2,Gg=3,Kg=4,Qg=1e-6,ey={value:function(){}};cp.prototype=dp.prototype={constructor:cp,on:function(yx,fx){var xx,vx=this._,bx=up(yx+"",vx),wx=-1,Tx=bx.length;{if(!(2>arguments.length)){if(null!=fx&&"function"!=typeof fx)throw new Error("invalid callback: "+fx);for(;++wx<Tx;)if(xx=(yx=bx[wx]).type)vx[xx]=_p(vx[xx],yx.name,fx);else if(null==fx)for(xx in vx)vx[xx]=_p(vx[xx],yx.name,null);return this}for(;++wx<Tx;)if((xx=(yx=bx[wx]).type)&&(xx=pp(vx[xx],yx.name)))return xx}},copy:function(){var yx={},fx=this._;for(var xx in fx)yx[xx]=fx[xx].slice();return new cp(yx)},call:function(yx,fx){if(0<(xx=arguments.length-2))for(var xx,vx,bx=Array(xx),wx=0;wx<xx;++wx)bx[wx]=arguments[wx+2];if(!this._.hasOwnProperty(yx))throw new Error("unknown type: "+yx);for(wx=0,xx=(vx=this._[yx]).length;wx<xx;++wx)vx[wx].value.apply(fx,bx)},apply:function(yx,fx,xx){if(!this._.hasOwnProperty(yx))throw new Error("unknown type: "+yx);for(var vx=this._[yx],bx=0,wx=vx.length;bx<wx;++bx)vx[bx].value.apply(fx,xx)}};var ty="http://www.w3.org/1999/xhtml",ny={svg:"http://www.w3.org/2000/svg",xhtml:ty,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oy=function(yx){var fx=yx+="",xx=fx.indexOf(":");return 0<=xx&&"xmlns"!==(fx=yx.slice(0,xx))&&(yx=yx.slice(xx+1)),ny.hasOwnProperty(fx)?{space:ny[fx],local:yx}:yx},ay=function(yx){var fx=oy(yx);return(fx.local?mp:hp)(fx)},iy=function(yx){return function(){return this.matches(yx)}};if("undefined"!=typeof document){var ly=document.documentElement;if(!ly.matches){var ry=ly.webkitMatchesSelector||ly.msMatchesSelector||ly.mozMatchesSelector||ly.oMatchesSelector;iy=function(yx){return function(){return ry.call(this,yx)}}}}var sy=iy,dy={};el.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(dy={mouseenter:"mouseover",mouseleave:"mouseout"}));var uy=function(){for(var yx,fx=el.event;yx=fx.sourceEvent;)fx=yx;return fx},py=function(yx,fx){var xx=yx.ownerSVGElement||yx;if(xx.createSVGPoint){var vx=xx.createSVGPoint();return vx.x=fx.clientX,vx.y=fx.clientY,vx=vx.matrixTransform(yx.getScreenCTM().inverse()),[vx.x,vx.y]}var bx=yx.getBoundingClientRect();return[fx.clientX-bx.left-yx.clientLeft,fx.clientY-bx.top-yx.clientTop]},_y=function(yx){var fx=uy();return fx.changedTouches&&(fx=fx.changedTouches[0]),py(yx,fx)},hy=function(yx){return null==yx?wp:function(){return this.querySelector(yx)}},gy=function(yx){return null==yx?Tp:function(){return this.querySelectorAll(yx)}},xy=function(yx){return Array(yx.length)};kp.prototype={constructor:kp,appendChild:function(yx){return this._parent.insertBefore(yx,this._next)},insertBefore:function(yx,fx){return this._parent.insertBefore(yx,fx)},querySelector:function(yx){return this._parent.querySelector(yx)},querySelectorAll:function(yx){return this._parent.querySelectorAll(yx)}};var by=function(yx){return function(){return yx}},wy="$",Fy=function(yx){return yx.ownerDocument&&yx.ownerDocument.defaultView||yx.document&&yx||yx.defaultView};$p.prototype={add:function(yx){0>this._names.indexOf(yx)&&(this._names.push(yx),this._node.setAttribute("class",this._names.join(" ")))},remove:function(yx){var fx=this._names.indexOf(yx);0<=fx&&(this._names.splice(fx,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(yx){return 0<=this._names.indexOf(yx)}};var Wy=[null];s_.prototype=d_.prototype={constructor:s_,select:function(yx){"function"!=typeof yx&&(yx=hy(yx));for(var fx=this._groups,xx=fx.length,vx=Array(xx),bx=0;bx<xx;++bx)for(var wx,Tx,kx=fx[bx],Sx=kx.length,Cx=vx[bx]=Array(Sx),zx=0;zx<Sx;++zx)(wx=kx[zx])&&(Tx=yx.call(wx,wx.__data__,zx,kx))&&("__data__"in wx&&(Tx.__data__=wx.__data__),Cx[zx]=Tx);return new s_(vx,this._parents)},selectAll:function(yx){"function"!=typeof yx&&(yx=gy(yx));for(var fx=this._groups,xx=fx.length,vx=[],bx=[],wx=0;wx<xx;++wx)for(var Tx,kx=fx[wx],Sx=kx.length,Cx=0;Cx<Sx;++Cx)(Tx=kx[Cx])&&(vx.push(yx.call(Tx,Tx.__data__,Cx,kx)),bx.push(Tx));return new s_(vx,bx)},filter:function(yx){"function"!=typeof yx&&(yx=sy(yx));for(var fx=this._groups,xx=fx.length,vx=Array(xx),bx=0;bx<xx;++bx)for(var wx,Tx=fx[bx],kx=Tx.length,Sx=vx[bx]=[],Cx=0;Cx<kx;++Cx)(wx=Tx[Cx])&&yx.call(wx,wx.__data__,Cx,Tx)&&Sx.push(wx);return new s_(vx,this._parents)},data:function(yx,fx){if(!yx)return Ax=Array(this.size()),Cx=-1,this.each(function(Xx){Ax[++Cx]=Xx}),Ax;var xx=fx?Cp:Sp,vx=this._parents,bx=this._groups;"function"!=typeof yx&&(yx=by(yx));for(var wx=bx.length,Tx=Array(wx),kx=Array(wx),Sx=Array(wx),Cx=0;Cx<wx;++Cx){var zx=vx[Cx],Mx=bx[Cx],Ux=Mx.length,Ax=yx.call(zx,zx&&zx.__data__,Cx,vx),Yx=Ax.length,Ex=kx[Cx]=Array(Yx),Px=Tx[Cx]=Array(Yx);xx(zx,Mx,Ex,Px,Sx[Cx]=Array(Ux),Ax,fx);for(var Dx,Fx,Lx=0,Hx=0;Lx<Yx;++Lx)if(Dx=Ex[Lx]){for(Lx>=Hx&&(Hx=Lx+1);!(Fx=Px[Hx])&&++Hx<Yx;);Dx._next=Fx||null}}return Tx=new s_(Tx,vx),Tx._enter=kx,Tx._exit=Sx,Tx},enter:function(){return new s_(this._enter||this._groups.map(xy),this._parents)},exit:function(){return new s_(this._exit||this._groups.map(xy),this._parents)},merge:function(yx){for(var fx=this._groups,xx=yx._groups,vx=fx.length,bx=xx.length,wx=Math.min(vx,bx),Tx=Array(vx),kx=0;kx<wx;++kx)for(var Sx,Cx=fx[kx],zx=xx[kx],Mx=Cx.length,Ux=Tx[kx]=Array(Mx),Ax=0;Ax<Mx;++Ax)(Sx=Cx[Ax]||zx[Ax])&&(Ux[Ax]=Sx);for(;kx<vx;++kx)Tx[kx]=fx[kx];return new s_(Tx,this._parents)},order:function(){for(var yx=this._groups,fx=-1,xx=yx.length;++fx<xx;)for(var vx,bx=yx[fx],wx=bx.length-1,Tx=bx[wx];0<=--wx;)(vx=bx[wx])&&(Tx&&Tx!==vx.nextSibling&&Tx.parentNode.insertBefore(vx,Tx),Tx=vx);return this},sort:function(yx){function fx(Mx,Ux){return Mx&&Ux?yx(Mx.__data__,Ux.__data__):!Mx-!Ux}yx||(yx=zp);for(var xx=this._groups,vx=xx.length,bx=Array(vx),wx=0;wx<vx;++wx){for(var Tx,kx=xx[wx],Sx=kx.length,Cx=bx[wx]=Array(Sx),zx=0;zx<Sx;++zx)(Tx=kx[zx])&&(Cx[zx]=Tx);Cx.sort(fx)}return new s_(bx,this._parents).order()},call:function(){var yx=arguments[0];return arguments[0]=this,yx.apply(null,arguments),this},nodes:function(){var yx=Array(this.size()),fx=-1;return this.each(function(){yx[++fx]=this}),yx},node:function(){for(var yx=this._groups,fx=0,xx=yx.length;fx<xx;++fx)for(var Tx,vx=yx[fx],bx=0,wx=vx.length;bx<wx;++bx)if(Tx=vx[bx],Tx)return Tx;return null},size:function(){var yx=0;return this.each(function(){++yx}),yx},empty:function(){return!this.node()},each:function(yx){for(var fx=this._groups,xx=0,vx=fx.length;xx<vx;++xx)for(var bx,wx=fx[xx],Tx=0,kx=wx.length;Tx<kx;++Tx)(bx=wx[Tx])&&yx.call(bx,bx.__data__,Tx,wx);return this},attr:function(yx,fx){var xx=oy(yx);if(2>arguments.length){var vx=this.node();return xx.local?vx.getAttributeNS(xx.space,xx.local):vx.getAttribute(xx)}return this.each((null==fx?xx.local?Up:Mp:"function"==typeof fx?xx.local?Pp:Ep:xx.local?Yp:Ap)(xx,fx))},style:function(yx,fx,xx){return 1<arguments.length?this.each((null==fx?Dp:"function"==typeof fx?Lp:Fp)(yx,fx,null==xx?"":xx)):Hp(this.node(),yx)},property:function(yx,fx){return 1<arguments.length?this.each((null==fx?Xp:"function"==typeof fx?Ip:qp)(yx,fx)):this.node()[yx]},classed:function(yx,fx){var xx=Np(yx+"");if(2>arguments.length){for(var vx=Op(this.node()),bx=-1,wx=xx.length;++bx<wx;)if(!vx.contains(xx[bx]))return!1;return!0}return this.each(("function"==typeof fx?Wp:fx?Bp:Zp)(xx,fx))},text:function(yx){return arguments.length?this.each(null==yx?Rp:("function"==typeof yx?Gp:Jp)(yx)):this.node().textContent},html:function(yx){return arguments.length?this.each(null==yx?Kp:("function"==typeof yx?e_:Qp)(yx)):this.node().innerHTML},raise:function(){return this.each(t_)},lower:function(){return this.each(n_)},append:function(yx){var fx="function"==typeof yx?yx:ay(yx);return this.select(function(){return this.appendChild(fx.apply(this,arguments))})},insert:function(yx,fx){var xx="function"==typeof yx?yx:ay(yx),vx=null==fx?o_:"function"==typeof fx?fx:hy(fx);return this.select(function(){return this.insertBefore(xx.apply(this,arguments),vx.apply(this,arguments)||null)})},remove:function(){return this.each(a_)},datum:function(yx){return arguments.length?this.property("__data__",yx):this.node().__data__},on:function(yx,fx,xx){var vx,bx,wx=fp(yx+""),Tx=wx.length;{if(!(2>arguments.length)){for(kx=fx?vp:xp,null==xx&&(xx=!1),vx=0;vx<Tx;++vx)this.each(kx(wx[vx],fx,xx));return this}var kx=this.node().__on;if(kx)for(var Sx,Cx=0,zx=kx.length;Cx<zx;++Cx)for(vx=0,Sx=kx[Cx];vx<Tx;++vx)if((bx=wx[vx]).type===Sx.type&&bx.name===Sx.name)return Sx.value}},dispatch:function(yx,fx){return this.each(("function"==typeof fx?r_:l_)(yx,fx))}};var Ry=function(yx){return"string"==typeof yx?new s_([[document.querySelector(yx)]],[document.documentElement]):new s_([[yx]],Wy)},Gy=function(yx,fx,xx){3>arguments.length&&(xx=fx,fx=uy().changedTouches);for(var vx,bx=0,wx=fx?fx.length:0;bx<wx;++bx)if((vx=fx[bx]).identifier===xx)return py(yx,vx);return null},Ky=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},Qy=function(yx){var fx=yx.document.documentElement,xx=Ry(yx).on("dragstart.drag",Ky,!0);"onselectstart"in fx?xx.on("selectstart.drag",Ky,!0):(fx.__noselect=fx.style.MozUserSelect,fx.style.MozUserSelect="none")},ef=function(yx){return function(){return yx}};p_.prototype.on=function(){var yx=this._.on.apply(this._,arguments);return yx===this._?this:yx};var tf,nf,af=0,lf=0,rf=0,sf=1e3,df=0,cf=0,uf=0,pf="object"==typeof performance&&performance.now?performance:Date,_f="function"==typeof requestAnimationFrame?requestAnimationFrame:function(yx){setTimeout(yx,17)};f_.prototype=x_.prototype={constructor:f_,restart:function(yx,fx,xx){if("function"!=typeof yx)throw new TypeError("callback is not a function");xx=(null==xx?g_():+xx)+(null==fx?0:+fx),this._next||nf===this||(nf?nf._next=this:tf=this,nf=this),this._call=yx,this._time=xx,k_()},stop:function(){this._call&&(this._call=null,this._time=1/0,k_())}};var hf=function(yx,fx,xx){var vx=new f_;return fx=null==fx?0:+fx,vx.restart(function(bx){vx.stop(),yx(bx+fx)},fx,xx),vx},mf=dp("start","end","interrupt"),gf=[],yf=0,ff=1,xf=2,vf=3,bf=4,wf=5,Tf=6,kf=function(yx,fx,xx,vx,bx,wx){var Tx=yx.__transition;if(!Tx)yx.__transition={};else if(xx in Tx)return;M_(yx,xx,{name:fx,index:vx,group:bx,on:mf,tween:gf,time:wx.time,delay:wx.delay,duration:wx.duration,ease:wx.ease,timer:null,state:yf})},Sf=function(yx,fx){var xx,vx,bx,wx=yx.__transition,Tx=!0;if(wx){for(bx in fx=null==fx?null:fx+"",wx)(xx=wx[bx]).name===fx?(vx=xx.state>xf&&xx.state<wf,xx.state=Tf,xx.timer.stop(),vx&&xx.on.call("interrupt",yx,yx.__data__,xx.index,xx.group),delete wx[bx]):Tx=!1;Tx&&delete yx.__transition}},Mf=function(yx,fx){var xx;return("number"==typeof fx?fg:fx instanceof Id?mg:(xx=Id(fx))?(fx=xx,mg):wg)(yx,fx)},If=d_.prototype.constructor,Bf=0,Zf=d_.prototype;th.prototype=function(yx){return d_().transition(yx)}.prototype={constructor:th,select:function(yx){var fx=this._name,xx=this._id;"function"!=typeof yx&&(yx=hy(yx));for(var vx=this._groups,bx=vx.length,wx=Array(bx),Tx=0;Tx<bx;++Tx)for(var kx,Sx,Cx=vx[Tx],zx=Cx.length,Mx=wx[Tx]=Array(zx),Ux=0;Ux<zx;++Ux)(kx=Cx[Ux])&&(Sx=yx.call(kx,kx.__data__,Ux,Cx))&&("__data__"in kx&&(Sx.__data__=kx.__data__),Mx[Ux]=Sx,kf(Mx[Ux],fx,xx,Ux,Mx,z_(kx,xx)));return new th(wx,this._parents,fx,xx)},selectAll:function(yx){var fx=this._name,xx=this._id;"function"!=typeof yx&&(yx=gy(yx));for(var vx=this._groups,bx=vx.length,wx=[],Tx=[],kx=0;kx<bx;++kx)for(var Sx,Cx=vx[kx],zx=Cx.length,Mx=0;Mx<zx;++Mx)if(Sx=Cx[Mx]){for(var Ux,Ax=yx.call(Sx,Sx.__data__,Mx,Cx),Yx=z_(Sx,xx),Ex=0,Px=Ax.length;Ex<Px;++Ex)(Ux=Ax[Ex])&&kf(Ux,fx,xx,Ex,Ax,Yx);wx.push(Ax),Tx.push(Sx)}return new th(wx,Tx,fx,xx)},filter:function(yx){"function"!=typeof yx&&(yx=sy(yx));for(var fx=this._groups,xx=fx.length,vx=Array(xx),bx=0;bx<xx;++bx)for(var wx,Tx=fx[bx],kx=Tx.length,Sx=vx[bx]=[],Cx=0;Cx<kx;++Cx)(wx=Tx[Cx])&&yx.call(wx,wx.__data__,Cx,Tx)&&Sx.push(wx);return new th(vx,this._parents,this._name,this._id)},merge:function(yx){if(yx._id!==this._id)throw new Error;for(var fx=this._groups,xx=yx._groups,vx=fx.length,bx=xx.length,wx=Math.min(vx,bx),Tx=Array(vx),kx=0;kx<wx;++kx)for(var Sx,Cx=fx[kx],zx=xx[kx],Mx=Cx.length,Ux=Tx[kx]=Array(Mx),Ax=0;Ax<Mx;++Ax)(Sx=Cx[Ax]||zx[Ax])&&(Ux[Ax]=Sx);for(;kx<vx;++kx)Tx[kx]=fx[kx];return new th(Tx,this._parents,this._name,this._id)},selection:function(){return new If(this._groups,this._parents)},transition:function(){for(var yx=this._name,fx=this._id,xx=oh(),vx=this._groups,bx=vx.length,wx=0;wx<bx;++wx)for(var Tx,kx=vx[wx],Sx=kx.length,Cx=0;Cx<Sx;++Cx)if(Tx=kx[Cx]){var zx=z_(Tx,fx);kf(Tx,yx,xx,Cx,kx,{time:zx.time+zx.delay+zx.duration,delay:0,duration:zx.duration,ease:zx.ease})}return new th(vx,this._parents,yx,xx)},call:Zf.call,nodes:Zf.nodes,node:Zf.node,size:Zf.size,empty:Zf.empty,each:Zf.each,on:function(yx,fx){var xx=this._id;return 2>arguments.length?z_(this.node(),xx).on.on(yx):this.each(B_(xx,yx,fx))},attr:function(yx,fx){var xx=oy(yx),vx="transform"===xx?Ug:Mf;return this.attrTween(yx,"function"==typeof fx?(xx.local?H_:L_)(xx,vx,Y_(this,"attr."+yx,fx)):null==fx?(xx.local?P_:E_)(xx):(xx.local?F_:D_)(xx,vx,fx+""))},attrTween:function(yx,fx){var xx="attr."+yx;if(2>arguments.length)return(xx=this.tween(xx))&&xx._value;if(null==fx)return this.tween(xx,null);if("function"!=typeof fx)throw new Error;var vx=oy(yx);return this.tween(xx,(vx.local?X_:q_)(vx,fx))},style:function(yx,fx,xx){var vx="transform"==(yx+="")?Mg:Mf;return null==fx?this.styleTween(yx,W_(yx,vx)).on("end.style."+yx,R_(yx)):this.styleTween(yx,"function"==typeof fx?G_(yx,vx,Y_(this,"style."+yx,fx)):J_(yx,vx,fx+""),xx)},styleTween:function(yx,fx,xx){var vx="style."+(yx+="");if(2>arguments.length)return(vx=this.tween(vx))&&vx._value;if(null==fx)return this.tween(vx,null);if("function"!=typeof fx)throw new Error;return this.tween(vx,K_(yx,fx,null==xx?"":xx))},text:function(yx){return this.tween("text","function"==typeof yx?eh(Y_(this,"text",yx)):Q_(null==yx?"":yx+""))},remove:function(){return this.on("end.remove",Z_(this._id))},tween:function(yx,fx){var xx=this._id;if(yx+="",2>arguments.length){for(var vx,bx=z_(this.node(),xx).tween,wx=0,Tx=bx.length;wx<Tx;++wx)if((vx=bx[wx]).name===yx)return vx.value;return null}return this.each((null==fx?U_:A_)(xx,yx,fx))},delay:function(yx){var fx=this._id;return arguments.length?this.each(("function"==typeof yx?I_:N_)(fx,yx)):z_(this.node(),fx).delay},duration:function(yx){var fx=this._id;return arguments.length?this.each(("function"==typeof yx?O_:$_)(fx,yx)):z_(this.node(),fx).duration},ease:function(yx){var fx=this._id;return arguments.length?this.each(j_(fx,yx)):z_(this.node(),fx).ease}},function yx(fx){function xx(vx){return Math.pow(vx,fx)}return fx=+fx,xx.exponent=yx,xx}(3),function yx(fx){function xx(vx){return 1-Math.pow(1-vx,fx)}return fx=+fx,xx.exponent=yx,xx}(3),function yx(fx){function xx(vx){return(1>=(vx*=2)?Math.pow(vx,fx):2-Math.pow(2-vx,fx))/2}return fx=+fx,xx.exponent=yx,xx}(3),function yx(fx){function xx(vx){return vx*vx*((fx+1)*vx-fx)}return fx=+fx,xx.overshoot=yx,xx}(1.70158),function yx(fx){function xx(vx){return--vx*vx*((fx+1)*vx+fx)+1}return fx=+fx,xx.overshoot=yx,xx}(1.70158),function yx(fx){function xx(vx){return(1>(vx*=2)?vx*vx*((fx+1)*vx-fx):(vx-=2)*vx*((fx+1)*vx+fx)+2)/2}return fx=+fx,xx.overshoot=yx,xx}(1.70158);var Wf=2*Math.PI,Rf=(function yx(fx,xx){function vx(wx){return fx*Math.pow(2,10*--wx)*Math.sin((bx-wx)/xx)}var bx=Math.asin(1/(fx=Math.max(1,fx)))*(xx/=Wf);return vx.amplitude=function(wx){return yx(wx,xx*Wf)},vx.period=function(wx){return yx(fx,wx)},vx}(1,.3),function yx(fx,xx){function vx(wx){return 1-fx*Math.pow(2,-10*(wx=+wx))*Math.sin((wx+bx)/xx)}var bx=Math.asin(1/(fx=Math.max(1,fx)))*(xx/=Wf);return vx.amplitude=function(wx){return yx(wx,xx*Wf)},vx.period=function(wx){return yx(fx,wx)},vx}(1,.3),function yx(fx,xx){function vx(wx){return(0>(wx=2*wx-1)?fx*Math.pow(2,10*wx)*Math.sin((bx-wx)/xx):2-fx*Math.pow(2,-10*wx)*Math.sin((bx+wx)/xx))/2}var bx=Math.asin(1/(fx=Math.max(1,fx)))*(xx/=Wf);return vx.amplitude=function(wx){return yx(wx,xx*Wf)},vx.period=function(wx){return yx(fx,wx)},vx}(1,.3),{time:null,delay:0,duration:250,ease:function(yx){return(1>=(yx*=2)?yx*yx*yx:(yx-=2)*yx*yx+2)/2}});d_.prototype.interrupt=function(yx){return this.each(function(){Sf(this,yx)})},d_.prototype.transition=function(yx){var fx,xx;yx instanceof th?(fx=yx._id,yx=yx._name):(fx=oh(),(xx=Rf).time=g_(),yx=null==yx?null:yx+"");for(var vx=this._groups,bx=vx.length,wx=0;wx<bx;++wx)for(var Tx,kx=vx[wx],Sx=kx.length,Cx=0;Cx<Sx;++Cx)(Tx=kx[Cx])&&kf(Tx,yx,fx,Cx,kx,xx||ih(Tx,fx));return new th(vx,this._parents,yx,fx)};var Gf=function(yx){return function(){return yx}};rh.prototype={constructor:rh,scale:function(yx){return 1===yx?this:new rh(this.k*yx,this.x,this.y)},translate:function(yx,fx){return 0===yx&0===fx?this:new rh(this.k,this.x+this.k*yx,this.y+this.k*fx)},apply:function(yx){return[yx[0]*this.k+this.x,yx[1]*this.k+this.y]},applyX:function(yx){return yx*this.k+this.x},applyY:function(yx){return yx*this.k+this.y},invert:function(yx){return[(yx[0]-this.x)/this.k,(yx[1]-this.y)/this.k]},invertX:function(yx){return(yx-this.x)/this.k},invertY:function(yx){return(yx-this.y)/this.k},rescaleX:function(yx){return yx.copy().domain(yx.range().map(this.invertX,this).map(yx.invert,yx))},rescaleY:function(yx){return yx.copy().domain(yx.range().map(this.invertY,this).map(yx.invert,yx))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kf=new rh(1,0,0),Qf=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},tx=function(yx){return function(){return yx}},nx=function(yx,fx,xx){this.target=yx,this.type=fx,this.selection=xx},ox=function(){el.event.preventDefault(),el.event.stopImmediatePropagation()},ax={name:"drag"},ix={name:"space"},lx={name:"handle"},rx={name:"center"},sx={name:"x",handles:["e","w"].map(_h),input:function(yx,fx){return yx&&[[yx[0],fx[0][1]],[yx[1],fx[1][1]]]},output:function(yx){return yx&&[yx[0][0],yx[1][0]]}},dx={name:"y",handles:["n","s"].map(_h),input:function(yx,fx){return yx&&[[fx[0][0],yx[0]],[fx[1][0],yx[1]]]},output:function(yx){return yx&&[yx[0][1],yx[1][1]]}},cx={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(_h),input:function(yx){return yx},output:function(yx){return yx}},ux={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},px={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_x={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},hx={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mx={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};el.bisector=wh,el.extent=function(yx,fx){var xx,vx,bx,wx=yx.length,Tx=-1;if(null==fx){for(;++Tx<wx;)if(null!=(xx=yx[Tx])&&xx>=xx)for(vx=bx=xx;++Tx<wx;)null!=(xx=yx[Tx])&&(vx>xx&&(vx=xx),bx<xx&&(bx=xx));}else for(;++Tx<wx;)if(null!=(xx=fx(yx[Tx],Tx,yx))&&xx>=xx)for(vx=bx=xx;++Tx<wx;)null!=(xx=fx(yx[Tx],Tx,yx))&&(vx>xx&&(vx=xx),bx<xx&&(bx=xx));return[vx,bx]},el.max=function(yx,fx){var xx,vx,bx=yx.length,wx=-1;if(null==fx){for(;++wx<bx;)if(null!=(xx=yx[wx])&&xx>=xx)for(vx=xx;++wx<bx;)null!=(xx=yx[wx])&&xx>vx&&(vx=xx);}else for(;++wx<bx;)if(null!=(xx=fx(yx[wx],wx,yx))&&xx>=xx)for(vx=xx;++wx<bx;)null!=(xx=fx(yx[wx],wx,yx))&&xx>vx&&(vx=xx);return vx},el.min=function(yx,fx){var xx,vx,bx=yx.length,wx=-1;if(null==fx){for(;++wx<bx;)if(null!=(xx=yx[wx])&&xx>=xx)for(vx=xx;++wx<bx;)null!=(xx=yx[wx])&&vx>xx&&(vx=xx);}else for(;++wx<bx;)if(null!=(xx=fx(yx[wx],wx,yx))&&xx>=xx)for(vx=xx;++wx<bx;)null!=(xx=fx(yx[wx],wx,yx))&&vx>xx&&(vx=xx);return vx},el.line=Hh,el.area=function(){function yx(zx){var Mx,Ux,Ax,Yx,Ex,Px=zx.length,Dx=!1,Fx=Array(Px),Lx=Array(Px);for(null==kx&&(Cx=Sx(Ex=il())),Mx=0;Mx<=Px;++Mx){if(!(Mx<Px&&Tx(Yx=zx[Mx],Mx,zx))===Dx)if(Dx=!Dx)Ux=Mx,Cx.areaStart(),Cx.lineStart();else{for(Cx.lineEnd(),Cx.lineStart(),Ax=Mx-1;Ax>=Ux;--Ax)Cx.point(Fx[Ax],Lx[Ax]);Cx.lineEnd(),Cx.areaEnd()}Dx&&(Fx[Mx]=+xx(Yx,Mx,zx),Lx[Mx]=+bx(Yx,Mx,zx),Cx.point(vx?+vx(Yx,Mx,zx):Fx[Mx],wx?+wx(Yx,Mx,zx):Lx[Mx]))}if(Ex)return Cx=null,Ex+""||null}function fx(){return Hh().defined(Tx).curve(Sx).context(kx)}var xx=rl,vx=null,bx=Dh(0),wx=sl,Tx=Dh(!0),kx=null,Sx=Lh,Cx=null;return yx.x=function(zx){return arguments.length?(xx="function"==typeof zx?zx:Dh(+zx),vx=null,yx):xx},yx.x0=function(zx){return arguments.length?(xx="function"==typeof zx?zx:Dh(+zx),yx):xx},yx.x1=function(zx){return arguments.length?(vx=null==zx?null:"function"==typeof zx?zx:Dh(+zx),yx):vx},yx.y=function(zx){return arguments.length?(bx="function"==typeof zx?zx:Dh(+zx),wx=null,yx):bx},yx.y0=function(zx){return arguments.length?(bx="function"==typeof zx?zx:Dh(+zx),yx):bx},yx.y1=function(zx){return arguments.length?(wx=null==zx?null:"function"==typeof zx?zx:Dh(+zx),yx):wx},yx.lineX0=yx.lineY0=function(){return fx().x(xx).y(bx)},yx.lineY1=function(){return fx().x(xx).y(wx)},yx.lineX1=function(){return fx().x(vx).y(bx)},yx.defined=function(zx){return arguments.length?(Tx="function"==typeof zx?zx:Dh(!!zx),yx):Tx},yx.curve=function(zx){return arguments.length?(Sx=zx,null!=kx&&(Cx=Sx(kx)),yx):Sx},yx.context=function(zx){return arguments.length?(null==zx?kx=Cx=null:Cx=Sx(kx=zx),yx):kx},yx},el.curveBasis=function(yx){return new cl(yx)},el.curveMonotoneX=function(yx){return new xl(yx)},el.curveNatural=function(yx){return new Tl(yx)},el.curveCardinal=Ih,el.curveCatmullRom=Nh,el.curveStep=function(yx){return new Sl(yx,.5)},el.curveStepAfter=function(yx){return new Sl(yx,1)},el.curveStepBefore=function(yx){return new Sl(yx,0)},el.curveLinear=Lh,el.timeMillisecond=Bh,el.timeSecond=Rh,el.timeMinute=Jh,el.timeHour=Gh,el.timeDay=Kh,el.timeWeek=Qh,el.timeMonth=tm,el.timeYear=nm,el.formatDefaultLocale=Pl,el.formatLocale=xm,el.timeFormatLocale=Hl,el.timeFormatDefaultLocale=Yd,el.scaleLinear=Nc,el.scaleLog=Wc,el.scalePow=Jc,el.scaleTime=function(){return Qc(nm,tm,Qh,Kh,Gh,Jh,Rh,Bh,el.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},el.axisRight=function(yx){return ap(Jg,yx)},el.axisTop=function(yx){return ap(Rg,yx)},el.axisBottom=function(yx){return ap(Gg,yx)},el.axisLeft=function(yx){return ap(Kg,yx)},el.zoom=function(){function yx(Wx){Wx.on("wheel.zoom",Sx).on("mousedown.zoom",Cx).on("dblclick.zoom",zx).on("touchstart.zoom",Mx).on("touchmove.zoom",Ux).on("touchend.zoom touchcancel.zoom",Ax).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",uh)}function fx(Wx,Rx){return Rx=Math.max(Fx,Math.min(Lx,Rx)),Rx===Wx.k?Wx:new rh(Rx,Wx.x,Wx.y)}function xx(Wx,Rx,Jx){var Gx=Rx[0]-Jx[0]*Wx.k,Kx=Rx[1]-Jx[1]*Wx.k;return Gx===Wx.x&&Kx===Wx.y?Wx:new rh(Wx.k,Gx,Kx)}function vx(Wx,Rx){var Jx=Wx.invertX(Rx[0][0])-Hx,Gx=Wx.invertX(Rx[1][0])-Xx,Kx=Wx.invertY(Rx[0][1])-qx,Qx=Wx.invertY(Rx[1][1])-Ix;return Wx.translate(Gx>Jx?(Jx+Gx)/2:Math.min(0,Jx)||Math.max(0,Gx),Qx>Kx?(Kx+Qx)/2:Math.min(0,Kx)||Math.max(0,Qx))}function bx(Wx){return[(+Wx[0][0]+ +Wx[1][0])/2,(+Wx[0][1]+ +Wx[1][1])/2]}function wx(Wx,Rx,Jx){Wx.on("start.zoom",function(){Tx(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){Tx(this,arguments).end()}).tween("zoom",function(){var Gx=this,Kx=arguments,Qx=Tx(Gx,Kx),ev=Dx.apply(Gx,Kx),tv=Jx||bx(ev),nv=Math.max(ev[1][0]-ev[0][0],ev[1][1]-ev[0][1]),ov=Gx.__zoom,av="function"==typeof Rx?Rx.apply(Gx,Kx):Rx,iv=Ox(ov.invert(tv).concat(nv/ov.k),av.invert(tv).concat(nv/av.k));return function(lv){if(1===lv)lv=av;else{var rv=iv(lv),sv=nv/rv[2];lv=new rh(sv,tv[0]-rv[0]*sv,tv[1]-rv[1]*sv)}Qx.zoom(null,lv)}})}function Tx(Wx,Rx){for(var Jx,Gx=0,Kx=$x.length;Gx<Kx;++Gx)if((Jx=$x[Gx]).that===Wx)return Jx;return new kx(Wx,Rx)}function kx(Wx,Rx){this.that=Wx,this.args=Rx,this.index=-1,this.active=0,this.extent=Dx.apply(Wx,Rx)}function Sx(){function Wx(){Rx.wheel=null,Rx.end()}if(Px.apply(this,arguments)){var Rx=Tx(this,arguments),Jx=this.__zoom,Gx=Math.max(Fx,Math.min(Lx,Jx.k*Math.pow(2,-el.event.deltaY*(el.event.deltaMode?120:1)/500))),Kx=_y(this);if(Rx.wheel)Rx.mouse[0][0]===Kx[0]&&Rx.mouse[0][1]===Kx[1]||(Rx.mouse[1]=Jx.invert(Rx.mouse[0]=Kx)),clearTimeout(Rx.wheel);else{if(Jx.k===Gx)return;Rx.mouse=[Kx,Jx.invert(Kx)],Sf(this),Rx.start()}Qf(),Rx.wheel=setTimeout(Wx,Bx),Rx.zoom("mouse",vx(xx(fx(Jx,Gx),Rx.mouse[0],Rx.mouse[1]),Rx.extent))}}function Cx(){function Wx(){if(Qf(),!Jx.moved){var tv=el.event.clientX-Qx,nv=el.event.clientY-ev;Jx.moved=tv*tv+nv*nv>Zx}Jx.zoom("mouse",vx(xx(Jx.that.__zoom,Jx.mouse[0]=_y(Jx.that),Jx.mouse[1]),Jx.extent))}function Rx(){Gx.on("mousemove.zoom mouseup.zoom",null),u_(el.event.view,Jx.moved),Qf(),Jx.end()}if(!Ex&&Px.apply(this,arguments)){var Jx=Tx(this,arguments),Gx=Ry(el.event.view).on("mousemove.zoom",Wx,!0).on("mouseup.zoom",Rx,!0),Kx=_y(this),Qx=el.event.clientX,ev=el.event.clientY;Qy(el.event.view),sh(),Jx.mouse=[Kx,this.__zoom.invert(Kx)],Sf(this),Jx.start()}}function zx(){if(Px.apply(this,arguments)){var Wx=this.__zoom,Rx=_y(this),Jx=Wx.invert(Rx),Gx=vx(xx(fx(Wx,Wx.k*(el.event.shiftKey?.5:2)),Rx,Jx),Dx.apply(this,arguments));Qf(),0<Nx?Ry(this).transition().duration(Nx).call(wx,Gx,Rx):Ry(this).call(yx.transform,Gx)}}function Mx(){if(Px.apply(this,arguments)){var Wx,Rx,Jx,Gx,Kx=Tx(this,arguments),Qx=el.event.changedTouches,ev=Qx.length;for(sh(),Rx=0;Rx<ev;++Rx)Jx=Qx[Rx],Gx=[Gx=Gy(this,Qx,Jx.identifier),this.__zoom.invert(Gx),Jx.identifier],Kx.touch0?Kx.touch1||(Kx.touch1=Gx):(Kx.touch0=Gx,Wx=!0);if(Yx&&(Yx=clearTimeout(Yx),!Kx.touch1))return Kx.end(),void((Gx=Ry(this).on("dblclick.zoom"))&&Gx.apply(this,arguments));Wx&&(Yx=setTimeout(function(){Yx=null},Vx),Sf(this),Kx.start())}}function Ux(){var Wx,Rx,Jx,Gx,Kx=Tx(this,arguments),Qx=el.event.changedTouches,ev=Qx.length;for(Qf(),Yx&&(Yx=clearTimeout(Yx)),Wx=0;Wx<ev;++Wx)Rx=Qx[Wx],Jx=Gy(this,Qx,Rx.identifier),Kx.touch0&&Kx.touch0[2]===Rx.identifier?Kx.touch0[0]=Jx:Kx.touch1&&Kx.touch1[2]===Rx.identifier&&(Kx.touch1[0]=Jx);if(Rx=Kx.that.__zoom,Kx.touch1){var tv=Kx.touch0[0],nv=Kx.touch0[1],ov=Kx.touch1[0],av=Kx.touch1[1],iv=(iv=ov[0]-tv[0])*iv+(iv=ov[1]-tv[1])*iv,lv=(lv=av[0]-nv[0])*lv+(lv=av[1]-nv[1])*lv;Rx=fx(Rx,Math.sqrt(iv/lv)),Jx=[(tv[0]+ov[0])/2,(tv[1]+ov[1])/2],Gx=[(nv[0]+av[0])/2,(nv[1]+av[1])/2]}else{if(!Kx.touch0)return;Jx=Kx.touch0[0],Gx=Kx.touch0[1]}Kx.zoom("touch",vx(xx(Rx,Jx,Gx),Kx.extent))}function Ax(){var Wx,Rx,Jx=Tx(this,arguments),Gx=el.event.changedTouches,Kx=Gx.length;for(sh(),Ex&&clearTimeout(Ex),Ex=setTimeout(function(){Ex=null},Vx),Wx=0;Wx<Kx;++Wx)Rx=Gx[Wx],Jx.touch0&&Jx.touch0[2]===Rx.identifier?delete Jx.touch0:Jx.touch1&&Jx.touch1[2]===Rx.identifier&&delete Jx.touch1;Jx.touch1&&!Jx.touch0&&(Jx.touch0=Jx.touch1,delete Jx.touch1),Jx.touch0?Jx.touch0[1]=this.__zoom.invert(Jx.touch0[0]):Jx.end()}var Yx,Ex,Px=dh,Dx=ch,Fx=0,Lx=1/0,Hx=-Lx,Xx=Lx,qx=Hx,Ix=Xx,Nx=250,Ox=Yg,$x=[],jx=dp("start","zoom","end"),Vx=500,Bx=150,Zx=0;return yx.transform=function(Wx,Rx){var Jx=Wx.selection?Wx.selection():Wx;Jx.property("__zoom",uh),Wx===Jx?Jx.interrupt().each(function(){Tx(this,arguments).start().zoom(null,"function"==typeof Rx?Rx.apply(this,arguments):Rx).end()}):wx(Wx,Rx)},yx.scaleBy=function(Wx,Rx){yx.scaleTo(Wx,function(){return this.__zoom.k*("function"==typeof Rx?Rx.apply(this,arguments):Rx)})},yx.scaleTo=function(Wx,Rx){yx.transform(Wx,function(){var Jx=Dx.apply(this,arguments),Gx=this.__zoom,Kx=bx(Jx),Qx=Gx.invert(Kx);return vx(xx(fx(Gx,"function"==typeof Rx?Rx.apply(this,arguments):Rx),Kx,Qx),Jx)})},yx.translateBy=function(Wx,Rx,Jx){yx.transform(Wx,function(){return vx(this.__zoom.translate("function"==typeof Rx?Rx.apply(this,arguments):Rx,"function"==typeof Jx?Jx.apply(this,arguments):Jx),Dx.apply(this,arguments))})},kx.prototype={start:function(){return 1==++this.active&&(this.index=$x.push(this)-1,this.emit("start")),this},zoom:function(Wx,Rx){return this.mouse&&"mouse"!==Wx&&(this.mouse[1]=Rx.invert(this.mouse[0])),this.touch0&&"touch"!==Wx&&(this.touch0[1]=Rx.invert(this.touch0[0])),this.touch1&&"touch"!==Wx&&(this.touch1[1]=Rx.invert(this.touch1[0])),this.that.__zoom=Rx,this.emit("zoom"),this},end:function(){return 0==--this.active&&($x.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(Wx){bp(new lh(yx,Wx,this.that.__zoom),jx.apply,jx,[Wx,this.that,this.args])}},yx.filter=function(Wx){return arguments.length?(Px="function"==typeof Wx?Wx:Gf(!!Wx),yx):Px},yx.extent=function(Wx){return arguments.length?(Dx="function"==typeof Wx?Wx:Gf([[+Wx[0][0],+Wx[0][1]],[+Wx[1][0],+Wx[1][1]]]),yx):Dx},yx.scaleExtent=function(Wx){return arguments.length?(Fx=+Wx[0],Lx=+Wx[1],yx):[Fx,Lx]},yx.translateExtent=function(Wx){return arguments.length?(Hx=+Wx[0][0],Xx=+Wx[1][0],qx=+Wx[0][1],Ix=+Wx[1][1],yx):[[Hx,qx],[Xx,Ix]]},yx.duration=function(Wx){return arguments.length?(Nx=+Wx,yx):Nx},yx.interpolate=function(Wx){return arguments.length?(Ox=Wx,yx):Ox},yx.on=function(){var Wx=jx.on.apply(jx,arguments);return Wx===jx?yx:Wx},yx.clickDistance=function(Wx){return arguments.length?(Zx=(Wx=+Wx)*Wx,yx):Math.sqrt(Zx)},yx},el.zoomIdentity=Kf,el.drag=function(){function yx(Lx){Lx.on("mousedown.drag",fx).on("touchstart.drag",bx).on("touchmove.drag",wx).on("touchend.drag touchcancel.drag",Tx).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function fx(){if(!Mx&&Ux.apply(this,arguments)){var Lx=kx("mouse",Ax.apply(this,arguments),_y,this,arguments);Lx&&(Ry(el.event.view).on("mousemove.drag",xx,!0).on("mouseup.drag",vx,!0),Qy(el.event.view),c_(),zx=!1,Sx=el.event.clientX,Cx=el.event.clientY,Lx("start"))}}function xx(){if(Ky(),!zx){var Lx=el.event.clientX-Sx,Hx=el.event.clientY-Cx;zx=Lx*Lx+Hx*Hx>Fx}Ex.mouse("drag")}function vx(){Ry(el.event.view).on("mousemove.drag mouseup.drag",null),u_(el.event.view,zx),Ky(),Ex.mouse("end")}function bx(){if(Ux.apply(this,arguments)){var Lx,Hx,Xx=el.event.changedTouches,qx=Ax.apply(this,arguments),Ix=Xx.length;for(Lx=0;Lx<Ix;++Lx)(Hx=kx(Xx[Lx].identifier,qx,Gy,this,arguments))&&(c_(),Hx("start"))}}function wx(){var Lx,Hx,Xx=el.event.changedTouches,qx=Xx.length;for(Lx=0;Lx<qx;++Lx)(Hx=Ex[Xx[Lx].identifier])&&(Ky(),Hx("drag"))}function Tx(){var Lx,Hx,Xx=el.event.changedTouches,qx=Xx.length;for(Mx&&clearTimeout(Mx),Mx=setTimeout(function(){Mx=null},500),Lx=0;Lx<qx;++Lx)(Hx=Ex[Xx[Lx].identifier])&&(c_(),Hx("end"))}function kx(Lx,Hx,Xx,qx,Ix){var Nx,Ox,$x,jx=Xx(Hx,Lx),Vx=Px.copy();if(bp(new p_(yx,"beforestart",Nx,Lx,Dx,jx[0],jx[1],0,0,Vx),function(){return null!=(el.event.subject=Nx=Yx.apply(qx,Ix))&&(Ox=Nx.x-jx[0]||0,$x=Nx.y-jx[1]||0,!0)}))return function Bx(Zx){var Wx,Rx=jx;switch(Zx){case"start":Ex[Lx]=Bx,Wx=Dx++;break;case"end":delete Ex[Lx],--Dx;case"drag":jx=Xx(Hx,Lx),Wx=Dx;}bp(new p_(yx,Zx,Nx,Lx,Wx,jx[0]+Ox,jx[1]+$x,jx[0]-Rx[0],jx[1]-Rx[1],Vx),Vx.apply,Vx,[Zx,qx,Ix])}}var Sx,Cx,zx,Mx,Ux=__,Ax=h_,Yx=m_,Ex={},Px=dp("start","drag","end"),Dx=0,Fx=0;return yx.filter=function(Lx){return arguments.length?(Ux="function"==typeof Lx?Lx:ef(!!Lx),yx):Ux},yx.container=function(Lx){return arguments.length?(Ax="function"==typeof Lx?Lx:ef(Lx),yx):Ax},yx.subject=function(Lx){return arguments.length?(Yx="function"==typeof Lx?Lx:ef(Lx),yx):Yx},yx.on=function(){var Lx=Px.on.apply(Px,arguments);return Lx===Px?yx:Lx},yx.clickDistance=function(Lx){return arguments.length?(Fx=(Lx=+Lx)*Lx,yx):Math.sqrt(Fx)},yx},el.brush=function(){return vh(cx)},el.brushX=function(){return vh(sx)},el.brushY=function(){return vh(dx)},el.mouse=_y,el.select=Ry,el.selection=d_,el.selectAll=function(yx){return"string"==typeof yx?new s_([document.querySelectorAll(yx)],[document.documentElement]):new s_([null==yx?[]:yx],Wy)},el.selectorAll=gy,el.touch=Gy}(this.d3=this.d3||{});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}_isFullscreen(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}_getParent(){var b=Polymer.dom(this).getOwnerRoot();return b?b.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}toggleFullscreen(b){b.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen()}fullScreenChanged(){this._fullScreenChanged()}_fullScreenChanged(){requestAnimationFrame(()=>{var b=this._isFullscreen(),c=this._getParent();b?(this.fullscreen=!0,this.style.position='fixed',this.style.top='0',this.style.left='0',this.style.right='0',this.style.bottom='0',this.style.zIndex='1000',this.style['border-radius']='0px',document.body.style.overflow='hidden',c&&c.classList.add('fullscreen')):(this.fullscreen=!1,this.style.position='',this.style.top='',this.style.left='',this.style.right='',this.style.bottom='',this.style.zIndex='',this.style['border-radius']='',document.body.style.overflow='',c&&c.classList.remove('fullscreen')),this.notifyResize&&this.notifyResize()})}computeFullscreenIcon(b){return b?'fullscreen-exit':'fullscreen'}}};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>class DeviceSVG extends WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)){static get is(){return'device-svg'}static get properties(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object,value:function(){return{}}},items:{type:Array,value:function(){return[]}},exceeding:{type:Array,value:function(){return[]}},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}static get observers(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}_openedChanged(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}open(a){this.setSvg(a.detail),this.opened=!0}close(){this.opened=!1}_srcChanged(a){a&&this._recentSrc!==a&&(this._recentSrc=a,this._fetch(a,'GET','include','xml').then(this._registerXML.bind(this)).catch(b=>{console.log(a,b)}))}_registerXML(a){if(a&&a.documentElement){var b=document.importNode(a.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(b,this.$.svgContainer.firstChild),this._svg=d3.select(b).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var c=this._svg.attr('viewBox').split(' ');this._width=c[2]-c[0],this._height=c[3]-c[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}_initialize(){setTimeout(()=>{this._selectableItemsChanged(),this._selectSelected(),this._selectExceeds()},0)}_initZoom(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}_selectedItemsChanged(){var a=this.item,b=this.items;a&&Object.keys(a).length||b&&b.length?(!this.src&&(a&&a.svg&&a.svg.path?this.src=a.svg.path:0<b.length&&b[b.length-1].svg&&b[b.length-1].svg.path&&(this.src=b[b.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}_exceedingChanged(){var a=this.exceeding;a&&a.length?(!this.src&&a[a.length-1].svg&&a[a.length-1].svg.path&&(this.src=a[a.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}_initialChanged(a){this.src&&a&&this._resetZoom()}_selectableItemsChanged(){if(this._mainG&&this._mainG.node&&this.src&&this.selectableItems&&this.selectableItems.items){var a=this;for(var b in this.selectableItems.items)this._mainG.selectAll(this.selectableItems.items[b]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',b).on('click',function(){a._zoomToElement(this),a._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==this.selectableItems.minZoom&&(this.minZoom=this.selectableItems.minZoom),void 0!==this.selectableItems.maxZoom&&(this.maxZoom=this.selectableItems.maxZoom),void 0!==this.selectableItems.zoomPartition&&(this.zoomPartition=this.selectableItems.zoomPartition),this._initZoom(),this._inialized=!0}}_zoom(){this._mainG.attr('transform',d3.event.transform)}_zoomToElement(a){if(void 0!==a&&this._svg.node()){var b=this._calcCenterZoom(a),c=d3.zoomIdentity.translate(b.x,b.y).scale(b.k);this._svg.node().__zoom=c,this._mainG.transition(300).attr('transform',c)}}_selectSelected(){requestAnimationFrame(()=>{var a=this.multi?this.items||[]:[];this.item&&Object.keys(this.item).length&&-1===a.indexOf(this.item)&&a.push(this.item);var b;if(b=ShadyCSS&&!0===ShadyCSS.nativeShadow?this.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),b&&a&&a.length){for(var d,f,g,h=0;h<a.length;h++)if(a[h]&&a[h].color&&a[h].svg&&a[h].svg.selector&&b&&b.sheet&&b.sheet.cssRules&&b.sheet.insertRule){d=a[h].svg.selector.split(',');for(var l=0;l<d.length;l++){f=d[l]+'.'+this.selectedClass,g=!1;for(var m=0;m<b.sheet.cssRules.length;m++)b.sheet.cssRules[h].selectorText===f&&(g=!0);!1===g&&b.sheet.insertRule(f+' {\nfill: '+a[h].color+' !important;\n}',b.sheet.cssRules.length)}}this.updateStyles(),this.select(a,this.selectedClass)}})}_selectExceeds(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}select(a,b){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+b).classed(b,!1);var c,d=[];if(Array.isArray(a)){for(var f=0;f<a.length;f++)a[f].svg&&a[f].svg.selector&&d.push(a[f].svg.selector);d=d.join(',')}else d=a&&a.svg&&a.svg.selector?a.svg.selector:'';if(''===d||(c=this._mainG.selectAll(d)).classed(b,!0).empty())return void(this.opened&&this._resetZoom());var g,h=[],l=this;c.each(function(){g=this.getBoundingClientRect(),h[0]=(h[0]>g.left?g.left:h[0])||g.left,h[1]=(h[1]>g.top?g.top:h[1])||g.top,h[2]=(h[2]<g.right?g.right:h[2])||g.right,h[3]=(h[3]<g.bottom?g.bottom:h[3])||g.bottom}),g={left:h[0],top:h[1],height:h[3]-h[1],width:h[2]-h[0]},this.opened&&this._zoomToElement(g)}}_calcCenterZoom(a){var b=this.getBoundingClientRect();if(void 0===b||void 0===a||0===b.height||0===b.width)return{x:0,y:0,k:1};var c,g,f=b.height/b.width;c=void 0===a.nodeType?a:a.getBoundingClientRect();var h=this._mainG.node().getBBox(),l=this._mainG.node().getBoundingClientRect(),m=h.width/l.width||1,n=(c.left-l.left)*m+h.x,o=(c.top-l.top)*m+h.y,p=this._height,q=this._width,r=this._ratio,s=this.zoomPartition;return g=f<r?Math.min(q/(s*c.width*m*f),p/(s*c.height*m)):Math.min(q/(s*c.width*m),q*f/(s*c.height*m)),g<this.minZoom?g=this.minZoom:g>this.maxZoom&&(g=this.maxZoom),f<r?(n=-g*n+(p/f-g*c.width*m)/2,o=-g*o+(p-g*c.height*m)/2):(n=-g*n+(q-g*c.width*m)/2,o=-g*o+(q*f-g*c.height*m)/2),isNaN(n)||isNaN(o)||isNaN(g)?{x:0,y:0,k:1}:{x:n,y:o,k:g}}notifyResize(){this._resetZoom()}_resetZoom(a){a&&(a.preventDefault(),a.stopPropagation()),requestAnimationFrame(()=>{if(this.opened&&this._mainG&&this._mainG.node&&this.src&&(this._mainG.selectAll('.clicked').classed('clicked',!1),!this.initiallyZoomToAll)){if(this.item&&Object.keys(this.item).length||this.items&&this.items.length)return void this._selectSelected();if(this.exceeding.length)return void this._selectExceeds();if(this.initial){var b;if(!(b=this._mainG.selectAll(this.initial)).empty())return void this.select([{svg:{selector:this.initial}}],'initial')}this._zoomToElement(this._mainG.node())}})}}customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}static get observers(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}_domainXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.domain(b)}_domainYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.domain(b).nice()}_rangeXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.range(b)}_rangeYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.range(b).nice()}_computeScaleFn(b,c,d){if(void 0!==b){var f='time'===b?d3.scaleTime():'ln'===b?d3.scaleLog().base(Math.E):'log'===b?d3.scaleLog().base(c||10):'log\u2082'===b?d3.scaleLog().base(2):'log\u2081\u2080'===b?d3.scaleLog().base(10):'\u221A'===b?d3.scalePow().exponent(0.5):'pow'===b?d3.scalePow().exponent(c||1):d3.scaleLinear();return'x'===d?(f.ticks(this.ticksX||10),this.domainX&&f.domain(this.domainX),this.rangeX&&f.range(this.rangeX)):'y'===d&&(f.ticks(this.ticksY||10),this.domainY&&f.domain(this.domainY),this.rangeY&&f.range(this.rangeY),f.nice()),f}}static get _VALID_SCALES(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}_SCALE_USES_BASE(b){return'log'===b||'pow'===b}_IS_LOG_SCALE(b){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return class extends WebvisualMixins.ScaleMixin(c){constructor(){super()}static get properties(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:20},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}static get observers(){return['_setDateNumberFormat(localeNumber, localeDate)']}_updateAxisBrushGenerator(e,f,i){i=i||8;var j=[[0,0],[e[1],e[0]]];'left'===f?j[0][0]=-i:'right'===f?j[1][0]=i:'top'===f?j[0][1]=-i:'bottom'===f&&(j[1][1]=i),this.extent(j)}_computeAxisGenerator(e,f,i,j){if(e&&void 0!==f&&void 0!==i){var k=this.tickSize||6;return('left'===e?d3.axisLeft(f):'right'===e?d3.axisRight(f):'top'===e?d3.axisTop(f):d3.axisBottom(f)).tickSize(k).tickFormat(this._computeFormatFn(i,j))}}_computeAxisNode(e,f,i){if(void 0!==e){var j=this.axisColor||'';i=i||this.axisTitle||'';var k=e.append('svg:g').classed('axis',!0).attr('orient',f).style('color',j);return k.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('contextmenu',this._onAxisContextMenu.bind(this,f)).on('click',this._onAxisClicked.bind(this,k)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),k.append('svg:title').text(i),k.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,f)),k.node()._genitor=this,k.node()._axis=k,k._left=0,k._right=0,k._bottom=0,k._top=0,k}}_setAxisProperties(e,f,i){e.classed('expanded',i),f.tickFormat(i?null:'')}_removeAxes(){if(this.axisX&&this.axisX.node){var e=this.axisX.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisX=null}if(this.axisY&&this.axisY.node){var e=this.axisY.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisY=null}delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}_onAxisClicked(e){var f=e.classed('expanded');e.classed('expanded',!f),this.sizeChanged()}_onAxisContextMenu(e){var f='left'===e||'right'===e;f&&this.axisY._isBrushed?(this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),this.axisY._isBrushed=!1,this.redraw()):!f&&this.axisX._isBrushed&&(this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),this.axisX._isBrushed=!1,this.redraw())}_onAxisMouseover(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}_onAxisMouseleave(){}_onAxisDragStart(){d3.select(this).raise().classed('dragged',!0),this._startleft=d3.event.x,this._starttop=d3.event.y}_onAxisDragged(){var e=d3.select(this).classed('vertical'),f=0,i=0;e?f=(this._axis._left||0)+d3.event.x-this._startleft:i=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+f+','+i+')')}_onAxisDragEnd(){d3.select(this).classed('dragged',!1);var j,e=d3.select(this).classed('vertical'),f=0,i=0,k=this._genitor;if(e){if(f=(this._axis._left||0)+d3.event.x-this._startleft,j=f>k.rangeX[1]/2?'right':'left',j!==k.axisOrientY){k.axisGeneratorY=k._computeAxisGenerator(k.axisOrientY=j,k.scaleY,k.scalingY,k.scaleBaseY).ticks(k.ticksY).tickSize(k.tickSize).tickFormat(k.axisY.classed('expanded')?k._computeFormatFn(k.scalingY,k.scaleBaseY):'');var l=k.axisY.node();return l&&l.parentElement&&l.parentElement.removeChild(l),k.axisY=k._computeAxisNode(k._axisInsertionPoint,k.item&&k.item.mount).classed('vertical',!0).classed('expanded',!0).classed('y',!0).call(k.axisGeneratorY),void k.sizeChanged()}f=this._axis._left}else{if(i=(this._axis._top||0)+d3.event.y-this._starttop,j=i>k.rangeY[0]/2?'bottom':'top',j!==k.axisOrientX)return void setTimeout(()=>{k.axisGeneratorX=k._computeAxisGenerator(k.axisOrientX=j,k.scaleX,k.scalingX,k.scaleBaseX).tickFormat(k.axisX.classed('expanded')?k._computeFormatFn(k.scalingX,k.scaleBaseX):'');var n=k.axisX.node();n&&n.parentElement&&n.parentElement.removeChild(n),k.axisX=k._computeAxisNode(k._axisInsertionPoint,k.item&&k.item.mount).classed('expanded',!0).classed('x',!0).call(k.axisGeneratorX),k.sizeChanged()},0);i=this._axis._top}d3.select(this).attr('transform','translate('+f+','+i+')'),this._startleft=0,this._starttop=0}_onAxisBrushEnd(e){var f='y'===e,i=d3.event.selection,j=f?this.scaleY:this.scaleX,k=f?this.axisY:this.axisX,l=k.select('.brush'),n=f?this.axisBrushGeneratorY:this.axisBrushGeneratorX,o=k._isBrushed;i&&(i[0]===i[1]&&(k._isBrushed=!1,i=f?this.rangeY:this.rangeX),k._isBrushed=!0,i=i.map(j.invert,j).sort((p,q)=>{return p>q}),this.set(f?'domainY':'domainX',i),l.call(n.move,null),this.redraw())}_axisColorChanged(e){this.axisX&&this.axisX.style('color',e),this.axisY&&this.axisY.style('color',e)}static get _VALID_AXIS_POSITIONS(){return['top','right','bottom','bottom']}_isVertical(e){return'left'===e||'right'===e}_computeFormatFn(e,f){return'time'===e?this.formatTime.bind(this):this.formatNumber.bind(this,e,f)}sizeChanged(){}redraw(){}formatTime(e){return(d3.timeSecond(e)<e?this.timeFormat('.%L'):d3.timeMinute(e)<e?this.timeFormat(':%S'):d3.timeHour(e)<e?this.timeFormat('%H:%M'):d3.timeDay(e)<e?this.timeFormat('%X'):d3.timeMonth(e)<e?d3.timeWeek(e)<e?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(e)<e?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeRange(e,f,i){var j=(f[1]-f[0]).valueOf()/i;return(100>j?this.timeFormat(':%S.%L'):500>j?this.timeFormat(':%M:%S.%L'):5E3>j?this.timeFormat(':%M:%S'):2E4>j?this.timeFormat('%H:%M:%S'):6E4>j?this.timeFormat('%H:%M'):36E5>j?this.timeFormat('%X'):864E5>j?this.timeFormat('%d.%m'):6048E5>j?this.timeFormat('%d.%m'):24192E5>j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeAbsolute(e){var f=e%315576E5,i=(e-f)/315576E5,j=f%864E5,k=(f-j)/864E5,l=j%36E5,n=(j-l)/36E5,o=l%6E4,p=(l-o)/6E4,q=o%1E3,r=(o-q)/1E3,t='';return i&&(t+=i+'y '),k&&(t+=k+'d '),n&&(t+=n+'h '),p&&(t+=p+'m '),r&&(t+=r+'s '),q&&(t+=q+'ms'),t}formatNumber(e,f,i){return this.numberFormat(',g')(i)}_setDateNumberFormat(e,f){void 0===f||void 0===e||(f&&(this.localeDate=f,d3.timeFormatDefaultLocale(f),this.timeFormat=d3.timeFormatLocale(f).format),e&&(this.localeNumber=e,d3.formatDefaultLocale(e),this.numberFormat=d3.formatLocale(e).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}};</script><dom-module id="device-graph"><template><style></style></template><script>class DeviceGraph extends WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-graph'}static get properties(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3},viewLength:{type:Number,value:2e4},storeInside:{type:Boolean,value:!0,readOnly:!0},multiAxes:{type:Object},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}constructor(){super(),this._isAttached=!1,this._chart=null,this._areaGenerator=d3.area().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y0(()=>{return this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?this._chart._height:this.scaleY(0)}).y1(a=>{return this.scaleY(a.y)}),this._lineGenerator=d3.line().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y(a=>{return this.scaleY(a.y)}),this.bisectDate=d3.bisector((a,b)=>{return a.x-b})}static get observers(){return['_itemChanged(item)','_lineChanged(hasLine, "line")','_areaChanged(hasArea, "area")','_thresholdChanged(item.threshold, "boundery")']}get _containerRoot(){var a=Polymer.dom(this).getOwnerRoot();return a?a.host||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.item&&this.addNodes()}disconnectedCallback(){this._isAttached=!1,super.disconnectedCallback(),this.removeNodes()}addNodes(){this._isAttached&&this.clearValues(!0);var a=this._containerRoot;return a&&'DEVICE-CHART'===a.nodeName?a._isAttached?void(this._chart=a,this._axisInsertionPoint=a._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount).attr('hidden',!this._chart.multiAxesX||null).classed('mount',this.item.mount).classed('x',!0)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0).classed('y',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',a)}removeNodes(){var a;this.axisX&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this.axisY&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}_areaChanged(a){if(this._chart&&this._chart._area)if(!1!==a)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var c=this._area.node();c&&c.parentElement&&c.parentElement.removeChild(c),this._area=null}}_lineChanged(a){if(this._chart&&this._chart._line)if(!1!==a)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var c=this._line.node();c&&c.parentElement&&c.parentElement.removeChild(c),this._line=null}}_thresholdChanged(a){if(this._chart&&this._chart._boundery)if(a)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0);else if(this.boundery&&this.boundery.node){var b=this.boundery.node();b&&b.parentElement&&b.parentElement.removeChild(b),this.boundery=null}}_setColorProperties(){if(this._chart&&this.item&&this.item.color){this.axisColor=this.item.color;var a=this.item.theshold?'url(#boundery-line-'+this.item.mount+')':this.item.color||'#000';this._area&&this._area.attr&&this._area.attr('fill',a),this._line&&this._line.attr&&this._line.attr('stroke',a)}}_itemChanged(a){return this._isAttached?a&&a.mount?void this.addNodes():void this.removeNodes():void 0}insertValues(a,b){if(void 0!==a){var b=b||(0<this.viewLength?this.viewLength:a.length);if(b&&(a=a.slice(a.length-b,a.length)),a.map(function(g){return{x:+g.x,y:+g.y,state:+g.state}}),this.storeInside){this.values=this.values.concat(a);var c=this.min(this.values,'x'),f=this.max(this.values,'x');void 0===c&&void 0===f||(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(c<this._chart.domainX[0]&&this._chart.set('domainX',[c,this._chart.domainX[1]]),f>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],f])):this.set('domainX',[c,f])),c=this.min(this.values,'y'),f=this.max(this.values,'y'),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(c<this._chart.domainY[0]&&this._chart.set('domainY',[c,this._chart.domainY[1]]),f>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],f])):(void 0!==c||void 0!==f)&&this.set('domainY',[c,f])}this.renderInsertedValues(a)}}spliceValues(a){for(var b=0;b<a.length;b++){for(var c=this.values.length-1;0<=c&&!(this.values[c].x===a[b].x);c--);-1!==c&&this.values.splice(c,1)}this.redraw()}renderInsertedValues(a){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var b;this._chart.domainX&&this._chart.domainX.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainX',this.domainX),b=!0),this._chart.domainY&&this._chart.domainY.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainY',this.domainY),b=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(b=!0),this.redraw(b,a)}}sizeChanged(){this._isAttached&&this._chart.sizeChanged()}redraw(a){if(this._isAttached){if(a)return void this._chart.redraw(!0);var c=this.values||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(c)),this.hasLine&&this._line.attr('d',this._lineGenerator(c)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var g,f=[],h=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',k=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',l=this.item.color||'#000';void 0!==this.item.threshold.from&&(g=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:k}),f.push({o:g+'%',c:l}))),void 0!==this.item.threshold.to&&(g=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:l}),f.push({o:g+'%',c:h})));var n=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(f);n.attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.enter().append('stop').attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.exit().remove()}}}_getDomain(a,b){return new Promise((c,f)=>{var h='y'===a?this.scalingY:this.scalingX;this.requestRange(a).then(k=>{if(k[0]!==void 0&&k[1]!==void 0){var l=this._IS_LOG_SCALE(h);if(l){var n=0<k[0]*k[1];n&&0>=k[0]&&(k[0]=Math.sign(k[1])*Number.EPSILON),n&&0>=k[1]&&(k[1]=Math.sign(k[0])*Number.EPSILON)}b&&('x'===a?this.set('domainX',k):'y'===a&&this.set('domainY',k))}c({domain:k,key:a})}).catch(k=>{f(k)})})}_defined(a){if(!Number.isFinite(a.y))return null;return 0>=a.y&&this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?null:!0}_closestPoint(a){function b(B){var C=c(new Date(B.x))-a[0],D=f(B.y)-a[1];return C*C+D*D}var c=this.scaleX,f=this.scaleY,g=this.values,h=c.invert(a[0]),k=Math.ceil(this._chart._width/g.length),l=Math.pow(Math.ceil(g.length/this._chart._width),2),n=this.bisectDate.left(g,h,0,g.length-1),o=b(g[n]),q=Math.sqrt(o)/l,r=c.invert(a[0]-q),s=this.bisectDate.left(g,r,0,n),t=2*n-s;0>s&&(s=0),t>g.length&&(t=g.length);var w,u=o,z=n;for(A=s;A<t;A+=k)(w=b(g[A]))<u&&(n=A,u=w);z=n;for(var A=n+1;A<t&&A<n+k-1;A++)(w=b(g[A]))<u&&(u=w,z=A);for(var A=n-1;A>s&&A>n-k+1;A--)(w=b(g[A]))<u&&(u=w,z=A);return g[z]}_closestInterpolatedPoint(a,b){function c(A){var B=A.x-a[0],C=A.y-a[1];return B*B+C*C}b=b||this._area.node()||this._line.node();for(var h,k,n,q,f=b.getTotalLength(),g=2*Math.ceil(f/this._chart._width/2),l=Infinity,o=0;o<=f;o+=g)(q=c(n=b.getPointAtLength(o)))<l&&(h=n,k=o,l=q);for(g/=2;0.5<g;){var r,s,t,u,w,z;0<=(t=k-g)&&(w=c(r=b.getPointAtLength(t)))<l?(h=r,k=t,l=w):(u=k+g)<=f&&(z=c(s=b.getPointAtLength(u)))<l?(h=s,k=u,l=z):g/=2}return h={x:this.scaleX(h.x),y:this.scaleY(h.y)},h.distance=Math.sqrt(l),h}setColor(a){super.setColor.call(this,a),this._setColorProperties()}clearValues(a){super.clearValues.call(this,a)}_getStrokeColor(a){if(this.item.threshold)switch(a.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}_lineWidthChanged(a){this._line&&this._line.attr&&this._line.attr('stroke-width',a)}_interpolationChanged(a){var b;switch(a){case'Basis Spline':b=d3.curveBasis;break;case'Monotoner Spline':b=d3.curveMonotoneX;break;case'Kubischer Spline':b=d3.curveNatural;break;case'Cardinaler Spline':b=d3.curveCardinal;break;case'Catmull-Rom-Spline':b=d3.curveCatmullRom;break;case'Stufe (mitte)':b=d3.curveStep;break;case'Stufe (davor)':b=d3.curveStepAfter;break;case'Stufe (danach)':b=d3.curveStepBefore;break;default:b=d3.curveLinear;}this._areaGenerator.curve(b),this._lineGenerator.curve(b),this.redraw()}_onAxisClicked(a){super._onAxisClicked(a)}_onAxisContextMenu(a){if(this._chart._isZoomed)this._chart._resetZoom();else{var b='left'===a||'right'===a;b&&this.axisY._isBrushed?(Promise.resolve(this._getDomain('y',!0)),this.axisY._isBrushed=!1,this.redraw()):!b&&this.axisX._isBrushed&&(Promise.resolve(this._getDomain('x',!0)),this.axisX._isBrushed=!1,this.redraw())}}_onAxisMouseover(a,b){super._onAxisMouseover(a,b),this._area&&this._area.raise(),this._line&&this._line.raise()}}customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:opened;font-family:inherit !important;}text{fill:currentColor;stroke:white;stroke-width:0.1;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;}.grid{mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 150ms linear;}.axis:hover path{fill-opacity:0.3;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.5;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.2;@apply --chart-area;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *,
      #delta > *{stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:exclusion;pointer-events:none;}.zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}.selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{transform:translateY(-100%);position:absolute;top:0;right:0;display:flex;flex-direction:column;background-color:rgba(255, 255, 255, 0.25);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet"><defs><marker id="arrowToLeft" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m 5.29167,-1.7197893 v 3.439581 L 0,2.6966667e-6 Z"></path></marker><marker id="arrowToRight" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m -5.2916667,-1.7197893 v 3.439581 L 3.3333333e-6,2.6966667e-6 Z"></path></marker><marker id="stub" markerWidth="5" markerHeight="5" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-1 -5 2 10"><path d="M0,0 m-1,-5 L1,-5 L1,5 L-1,5 z"></path><path d="M -2,0 M -5,-1 H 1 V 1 H -5 Z"></path></marker><filter x="0" y="0" width="1" height="1" id="solid"><feFlood flood-color="white" id="flood"></feFlood><feMerge><feMergeNode in="flood"></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="yGrid" class="grid" clip-path="url(#clip)"></g><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><g id="zoom" clip-path="url(#clip)"></g><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis" on-tap="_resetZoom"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><section id="control"><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="√">√</option><option value="ln">ln</option><option value="log₂">log₂</option><option value="log₁₀">log₁₀</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div></iron-collapse><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]"></device-graph></template></template><script>class DeviceChart extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))){static get is(){return'device-chart'}static get properties(){return{opened:{type:Boolean},margin:{type:Object,value:function(){return{top:6,right:6,bottom:6,left:6}}},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}constructor(){super(),this._width=0,this._height=0,this._graphs=new Set}get _self(){return this}static get observers(){return['_localizeChanged(localize)']}_localizeChanged(c){this.set('localeDate',c('date')),this.set('localeNumber',c('number'))}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}connectedCallback(){super.connectedCallback(),this._buildLayout()}_buildLayout(){this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX).attr('hidden',!!this.multiAxesX||null).classed('expanded',!0).classed('x',!0),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY).attr('hidden',!!this.multiAxesY||null).classed('expanded',!0).classed('vertical',!0).classed('y',!0),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',()=>{this.cancelDebouncer('hideinfo')},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([1,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).append('svg:rect').classed('zoom',!0).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',this._debouncedHideInfo.bind(this),{passive:!0}).on('mousemove',()=>{var c=d3.mouse(this._chart.node());requestAnimationFrame(()=>{var f,h,j;if(this._graphs.forEach(l=>{if(l.values&&l.values.length){var n=l._closestPoint(c),o=Math.pow(c[0]-l.scaleX(n.x),2)+Math.pow(c[1]-l.scaleY(n.y),2);(void 0===j||o<j)&&(j=o,h=n,f=l)}}),h){var k=f.getComputedStyleValue('--device-color')||'#000';if(f.item.threshold)switch(h.state){case 1:k=f.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:k=f.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusedValue=h,this._focusedValue.g=f,this._focusedValue._left=this.multiAxesY?f.axisY._left:this.axisY._left,this._focusedValue._top=this.multiAxesX?f.axisX._top:this.axisX._top,this._focusDot.datum(h).attr('fill',k).attr('r',f.dotRadius),this._showInfo(),this._moveInfo(h)}else this._debouncedHideInfo()})},{passive:!0}).on('touchmove',this._resetZoom.bind(this),{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}sizeChanged(){this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(()=>{this.sizeLayout()},0))}sizeLayout(){function c(B,C){return'left'===B?(this._left=n,this._right=0,n-=C):'right'===B?(this._left=0,this._right=k,k+=C):(this._left=0,this._right=0),'top'===B?(this._bottom=0,this._top=j,j-=C):'bottom'===B?(this._bottom=l,this._top=0,l+=C):(this._bottom=0,this._top=0),!0}function f(B,C,D){return this._left+=this._right,this._top+=this._bottom,this._bottom=0,this._right=0,'right'===B?this._left+=C:'bottom'===B&&(this._top+=D),!0}if(this.opened&&this._isAttached){var h=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===h.height||0===h.width)return void requestAnimationFrame(()=>{this.sizeChanged()});var j=-2,k=1,l=1,n=-2,o=this.axisSizeX,r=this.axisSizeY,u=this.tickSize,v=this.axisMargin,w=u+v,z=[];if(this._graphs.forEach(B=>{if(B._isAttached){if(!B.axisX.attr('hidden')){var C=B.axisX.classed('expanded')?o:w;z.push(c.call(B.axisX,B.axisOrientX,C))}if(!B.axisY.attr('hidden')){var C=B.axisY.classed('expanded')?r:w;z.push(c.call(B.axisY,B.axisOrientY,C))}}}),!this.axisX.attr('hidden')){var A=this.axisX.classed('expanded')?o:w;z.push(c.call(this.axisX,this.axisOrientX,A))}if(!this.axisY.attr('hidden')){var A=this.axisY.classed('expanded')?r:w;z.push(c.call(this.axisY,this.axisOrientX,A))}Promise.all(z).then(()=>{var B=this.$.svg.getBoundingClientRect();this._width=Math.abs(B.width-Math.abs(n||0)-Math.abs(k||0)-(this.margin.left||0)-(this.margin.right||0)),this._height=Math.abs(B.height-Math.abs(l||0)-Math.abs(j||0)-(this.margin.bottom||0)-(this.margin.top||0)),this.set('rangeX',[0,this._width]),this.set('rangeY',[this._height,0]),this.ticksX=Math.ceil(this._width/75),this.ticksY=Math.ceil(this._height/50),this._zoom.attr('height',this._height).attr('width',this._width),this._zoomBehavior.extent([[0,0],[this._width,this._height]]),this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity);var C=[];this._graphs.forEach(D=>{D._isAttached&&(!D.axisX.attr('hidden')&&C.push(f.call(D.axisX,D.axisOrientX,this._width,this._height)),!D.axisY.attr('hidden')&&C.push(f.call(D.axisY,D.axisOrientY,this._width,this._height)))}),this.axisX.attr('hidden')||C.push(f.call(this.axisX,this.axisOrientX,this._width,this._height)),this.axisY.attr('hidden')||C.push(f.call(this.axisY,this.axisOrientY,this._width,this._height)),Promise.all(C).then(()=>{j-=this.margin.top||0,k+=this.margin.right||0,l+=this.margin.bottom||0,n-=this.margin.left||0,this._chart._top=j,this._chart._right=k,this._chart._bottom=l,this._chart._left=n,this._control.transition(100).style('transform','translate(-'+this._chart._right+'px,-'+this._chart._bottom+'px)'),this._chart.select('clipPath#clip rect').transition(100).attr('width',this._width).attr('height',this._height),this._chart.select('rect#plot').transition(100).attr('width',this._width).attr('height',this._height),this._chart.transition(100).attr('transform','translate('+(-this._chart._left||0)+','+(-this._chart._top||0)+')'),this._focusY.attr('y1',this._height),this._graphs.forEach(D=>{D._isAttached&&(!D.axisX.attr('hidden')&&(D.axisGeneratorX=D._computeAxisGenerator(D.axisOrientX,D.scaleX,D.scalingX,D.scaleBaseX).tickSize(D.tickSize).tickFormat(D.axisX.classed('expanded')?D._computeFormatFn(D.scalingX,D.scaleBaseX):''),D._updateAxisBrushGenerator.call(D.axisBrushGeneratorX,this.rangeX,D.axisOrientX),D.axisX.select('.brush').raise().call(D.axisBrushGeneratorX),D.axisX.attr('transform','translate('+(D.axisX._left||0)+','+(D.axisX._top||0)+')')),!D.axisY.attr('hidden')&&(D.axisGeneratorY=D._computeAxisGenerator(D.axisOrientY,D.scaleY,D.scalingY,D.scaleBaseY).tickSize(D.tickSize).tickFormat(D.axisY.classed('expanded')?D._computeFormatFn(D.scalingY,D.scaleBaseY):''),D._updateAxisBrushGenerator.call(D.axisBrushGeneratorY,this.rangeY,D.axisOrientY),D.axisY.select('.brush').raise().call(D.axisBrushGeneratorY),D.axisY.attr('transform','translate('+(D.axisY._left||0)+','+(D.axisY._top||0)+')')))}),this.axisX.attr('hidden')||(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),this.axisY.attr('hidden')||(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!this.domainX||!this.domainY||this.domainX.some(D=>{return void 0===D||null===D})||this.domainY.some(D=>{return void 0===D||null===D})?this.redraw(!0):this.redraw()})})}}_redomain(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(f=>{f&&console.warn(f)}))}redraw(c){return this._isAttached?c?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(()=>{this.axisX.attr('hidden')||this.axisX.transition(100).attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')').call(this.axisGeneratorX),this.axisY.attr('hidden')||this.axisY.transition(100).attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')').call(this.axisGeneratorY),this._graphs.forEach(f=>{f._isAttached&&(f.axisX.attr('hidden')?f.set('domainX',this.domainX):f.axisX.transition(100).attr('transform','translate('+(f.axisX._left||0)+','+(f.axisX._top||0)+')').call(f.axisGeneratorX),f.axisY.attr('hidden')?f.set('domainY',this.domainY):f.axisY.transition(100).attr('transform','translate('+(f.axisY._left||0)+','+(f.axisY._top||0)+')').call(f.axisGeneratorY),f.redraw())}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),this._updateInfo()},0)):void 0}_domainXChanged(c){if(!(void 0===c||void 0===this.scaleX||c.some(h=>{return void 0===h||null===h}))&&(this.scaleX.domain(c),!this.multiAxesX)){var f=this._zoomBehavior.translateExtent();this._zoomBehavior.translateExtent([[this.scaleX(this.domainX[0]),f[0][1]],[this.scaleX(this.domainX[1]),f[1][1]]])}}_domainYChanged(c){if(!(void 0===c||void 0===this.scaleY||c.some(h=>{return void 0===h||null===h}))&&(this.scaleY.domain(c).nice(),!this.multiAxesY)){var f=this._zoomBehavior.translateExtent();this._zoomBehavior.translateExtent([[f[0][0],this.scaleY(this.domainY[0])],[f[1][0],this.scaleY(this.domainY[1])]])}}_multiAxesChanged(c,f){if(this._isAttached){var h;if(this._graphs.forEach(k=>{k._isAttached&&(h=c&&k.axisX?null:!0,k.axisX.attr('hidden',h),h&&k.set('domainX',this.domainX),h=f&&k.axisY?null:!0,k.axisY.attr('hidden',h),h&&k.set('domainY',this.domainY))}),h=c&&this.axisX||null,this.axisX.attr('hidden',h),h=f&&this.axisY||null,this.axisY.attr('hidden',h),!c&&this.scaleX&&this.domainX){var j=this._zoomBehavior.translateExtent();this._zoomBehavior.translateExtent([[this.scaleX(this.domainX[0]),j[0][1]],[this.scaleX(this.domainX[1]),j[1][1]]])}if(!f&&this.scaleY&&this.domainY){var j=this._zoomBehavior.translateExtent();this._zoomBehavior.translateExtent([[j[0][0],this.scaleY(this.domainY[0])],[j[1][0],this.scaleY(this.domainY[1])]])}}}_addGraph(c){this._graphs.add(c),this.sizeChanged(),c=null}_removeGraph(c){this._graphs.delete(c),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),c=null,this.sizeChanged()}_getDomain(){return new Promise((c,f)=>{var h=[],j=[];this._graphs.forEach(k=>{h.push(k._getDomain('x',this.multiAxesX)),j.push(k._getDomain('y',this.multiAxesX))}),Promise.all(h).then(k=>{for(var l,n,o,r=0;r<k.length;r++)l=void 0===l||l>k[r].domain[0]?k[r].domain[0]:l,n=void 0===n||n<k[r].domain[1]?k[r].domain[1]:n;(l===void 0||n===void 0)&&c(),o=[l,n],this.set('domainX',o),this.scaleX.domain(o),!1===this.multiAxesX&&this._graphs.forEach(u=>{u.axisX._isBrushed=!1,u.set('domainX',o),u.scaleX.domain(o)}),Promise.all(j).then(u=>{for(var v,w,z,A=0;A<u.length;A++)v=void 0===v||v>u[A].domain[0]?u[A].domain[0]:v,w=void 0===w||w<u[A].domain[1]?u[A].domain[1]:w;(v===void 0||w===void 0)&&c(),z=[v,w],this.set('domainY',z),!1===this.multiAxesY&&this._graphs.forEach(B=>{B.axisY._isBrushed=!1,B.set('domainY',z)}),c()}).catch(u=>{f(u)})}).catch(k=>{f(k)})})}insertValues(c){this._graphs.forEach(f=>{f&&f._isAttached&&f.item&&f.item.mount&&c[f.item.mount]&&f.insertValues(c[f.item.mount])})}clearValues(){this._graphs.forEach(c=>{c&&c._isAttached&&c.clearValues()})}_moveInfo(c){if(Number.isFinite(c.g.scaleY(c.y))){var f=this.formatTime(+c.x);this._info.text(f+' '+c.y);var h=this._fixedValue;if(h){var j=Math.abs(h.x-c.x),k=Math.abs(h.y-c.y);this._infoDeltaX.text(this.formatTimeAbsolute(j)),this._infoDeltaY.text(k)}this._updateInfo()}}_showInfo(){this.cancelDebouncer('hideinfo'),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}_showDelta(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}_debouncedHideInfo(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(()=>{this._hideInfo()},1e3)}_hideInfo(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}_hideDelta(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}_updateInfo(){if(this._focusedValue&&''!==this._info.attr('hidden')){var c=this._focusedValue,f=c.g.scaleX(+c.x),h=c.g.scaleY(+c.y);if(f&&h){switch(this._alignText(this._info.node(),f,h,null,1.5*this._focusDot.attr('r')),this.modus){case'delta':var j=this._fixedValue;if(j&&j.x&&c.x!==j.x&&j.y&&c.y!==j.y){var k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);this._deltaX.attr('x1',f).attr('x2',k).attr('y1',l).attr('y2',l),this._deltaY.attr('y1',h).attr('y2',l),l<h||f<k?(this._deltaY.attr('x1',f).attr('x2',f),this._alignText(this._infoDeltaY.node(),f,(l+h)/2,null,null,null,'middle')):(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(l+h)/2,null,null,null,'middle')),this._deltaX,this._alignText(this._infoDeltaX.node(),(k+f)/2,l,null,null,null,'middle'),this._deltaDot.attr('cy',l).attr('cx',k)}else this._hideDelta();case'integral':default:this._focusX.attr('x1',c._left).attr('x2',f).attr('y2',h).attr('y1',h),this._focusY.attr('y1',c._top).attr('y2',h).attr('x2',f).attr('x1',f),this._focusDot.attr('cy',h).attr('cx',f);}this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}_alignText(c,f,h,j,k,l,n){j=j||0,k=k||0;var o=c.getBBox(),r=this._height,u=this._width,l=l||'middle',n=n||'ideographic',v=j,w=k;switch(l){case'middle':v+=o.width/2;case'end ':v+=o.width;}switch(n){case'ideographic':w+=o.height;case'middle':w+=o.height/2;case'hanging':w-=o.height;}0>h-w?n='hanging':h+w>r&&(h=r-w),f+v>u?l='end':0>f-v&&(l='start'),c.setAttribute('x',f+j),c.setAttribute('y',h-k),c.setAttribute('text-anchor',l),c.setAttribute('alignment-baseline',n)}_modusChanged(c){switch(c){case'zoom':break;case'delta':break;case'integral':break;default:}}_dotClicked(c){switch(this.modus){case'zoom':var f=(c.g.domainX[1]-c.g.domainX[0])/4,h=(c.g.domainY[1]-c.g.domainY[0])/4,j=c.g.scaleX(+c.x),k=c.g.scaleY(+c.y)||0;d3.event.selection=[[j-f,k-h],[j+f,k+h]];break;case'delta':var l=this._fixedValue;l&&l.x&&l.y&&l.x===c.x&&l.y===c.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=c,this._deltaDot.datum(this._fixedValue).attr('cx',n=>{return n.g.scaleX(n.x)}).attr('cy',n=>{return n.g.scaleY(n.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}closeMenu(){this.showMenu=!1}changeInterpolation(c){this._graphs.forEach(h=>{h&&h._isAttached&&h.set('interpolation',c)})}_onAxisBrushEnd(){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var f=d3.event.selection;if(f){if(!this.multiAxesX){var h=f.map(this.scaleX.invert,this.scaleX).sort((j,k)=>{return j>k});this._graphs.forEach(j=>{j.scaleX.domain(h),j.axisGeneratorX.scale(j.scaleX),j.redraw()}),this.axisX._isBrushed=!0,this.axisX.call(this.axisGeneratorX.scale().domain(h)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)}if(!this.multiAxesY){var h=f.map(this.scaleY.invert,this.scaleY).sort((j,k)=>{return j>k});this._graphs.forEach(j=>{j.scaleY.domain(h),j.axisGeneratorY.scale(j.scaleY),j.redraw()}),this.axisY._isBrushed=!0,this.axisY.call(this.axisGeneratorY.scale().domain(h)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)}this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(this._width/(f[1]-f[0])).translate(-f[0],0))}}}_onZoomed(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var c=d3.event.transform;if(!this.multiAxesX){var f=d3.event.transform.rescaleX(this.scaleX);this._graphs.forEach(j=>{j.set('domainX',f.domain()),j.axisGeneratorX.scale(j.scaleX),j.scaleX.domain(f.domain()),j.redraw()}),this.axisX.call(this.axisGeneratorX.scale(f)),this._isZoomed=1!==c.k||0!==c.x||0!==c.y}if(!this.multiAxesY){var h=d3.event.transform.rescaleY(this.scaleY);this._graphs.forEach(j=>{j.scaleY.domain(h.domain()),j.axisGeneratorY.scale(j.scaleY),j.redraw()}),this.axisY.call(this.axisGeneratorY.scale(h)),this._isZoomed=1!==c.k||0!==c.x||0!==c.y}}}_onAxisContextMenu(c){this._isZoomed?this._resetZoom():super._onAxisContextMenu(c)}_resetZoom(c){d3.event?d3.event.preventDefault():c&&c.preventDefault&&c.preventDefault(),this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(f=>{f.axisX._isBrushed=!1,f.axisY._isBrushed=!1}),this._hideInfo(),this._redomain()}}customElements.define(DeviceChart.is,DeviceChart);</script></dom-module><dom-module id="calendar-element" assetpath="../bower_components/datetime-picker/"><template strip-whitespace=""><style>:host{display:inline-block;font-family:inherit;background-color:var(--calendar-background, #252525);color:var(--calendar-color, #ccc);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;outline-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;--calendar-selected:var(--primary-color, #253EEC);padding:6px;@apply --calendar-element;}:host > *{position:relative;}#top{width:100%;display:inline-flex;flex-direction:row;align-items:center;font-size:1em;}.view{flex:1;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;cursor:pointer;}#calendar{display:table;}#header{display:table-header-group;}#dates{display:table-row-group;}.week{font-size:0.8em;display:table-row;}.day{display:table-cell;padding:0.5em;text-align:center;border-radius:50%;border-style:solid;border-width:thin;border-color:transparent;}#dates .day:hover{border-color:rgba(255, 255, 255, 0.25);}.day.notinmonth{opacity:0.5;}.day.selected{background-color:var(--calendar-selected);border-color:transparent !important;}.day.current{border-style:solid;border-width:thin;border-color:var(--calendar-selected) !important;}.day.outofrange{opacity:0.15;font-style:italic;pointer-events:none;}.day,
      .button{cursor:pointer;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);fill:currentColor;}.button{height:1em;padding:0.5em;}.button:hover{background-color:var(--calendar-selected);}#viewMonth{float:left;margin-right:0.3em;}#viewYear{float:left;font-weight:bold;}input::-webkit-input-placeholder{color:currentColor;}</style><div id="top"><svg class="button" on-click="_prevMonth" aria-label="previous" viewBox="0 0 24 24"><g><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path></g></svg><section class="view" on-click="_jumpToNow"><div id="viewMonth"></div><div id="viewYear"></div></section><svg class="button" on-click="_nextMonth" aria-label="next" viewBox="0 0 24 24"><g><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"></path></g></svg><slot></slot></div><div id="calendar"><div id="header"><div id="dayCaption" class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div></div><div id="dates" on-click="_onClick"><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div><div class="week"><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div><div class="day"></div></div></div></div></template><script>class CalendarElement extends Polymer.Element{static get is(){return'calendar-element'}static get properties(){return{date:{type:String,notify:!0,observer:'_dateChanged'},min:{type:String,notify:!0,observer:'_minChanged'},max:{type:String,notify:!0,observer:'_maxChanged'},viewDate:{type:Number,observer:'render'},locale:{type:String,value:window.navigator.language,observer:'_localeChanged'}}}connectedCallback(){super.connectedCallback(),setTimeout(()=>{var a;a=this.date?new Date(this.date):new Date,this.date=this._toDate(a.getFullYear(),a.getMonth()+1,a.getDate())},0)}_dateChanged(a){var b=new Date(a||null),c,f;this.min&&(c=+new Date(this.min)),this.max&&(f=+new Date(this.max)),!b||c&&c>b||f&&f<b?this.set('date',null):this.set('date',this._toDate(b)),this.set('viewDate',+new Date(b.getFullYear(),b.getMonth())),this.render()}_pad(a){return 10>a?'0'+a:''+a}_onClick(a){if(a)for(var b=a.path||[a.target],c=0;c<b.length;c++)if(b[c].dataset&&b[c].dataset.date){this._prevSelected&&this._prevSelected.classList.remove('selected'),b[c].classList.add('selected'),this.date=b[c].dataset.date,this._prevSelected=b[c];break}}_jumpToNow(){var a=new Date;this.viewDate=+new Date(a.getFullYear(),a.getMonth())}_prevMonth(){var a=new Date(this.viewDate);a&&(this.viewDate=+new Date(a.getFullYear(),a.getMonth()-1))}_nextMonth(){var a=new Date(this.viewDate);a&&(this.viewDate=+new Date(a.getFullYear(),a.getMonth()+1))}_localeChanged(){var b,a=new Date(this.viewDate);a&&(this.$.viewMonth.textContent=a.toLocaleDateString(this.locale,{month:'long'}),this.$.viewYear.textContent=a.toLocaleDateString(this.locale,{year:'numeric'}));for(var c=0;7>c;c++)a=new Date(0,0,c),b=(a.getDay()-1+7)%7,this.$.dayCaption.children[b]&&(this.$.dayCaption.children[b].textContent=a.toLocaleDateString(this.locale,{weekday:'short'}))}render(){if(this.viewDate){var a=new Date(this.viewDate);this.$.viewMonth.textContent=a.toLocaleDateString(this.locale,{month:'long'}),this.$.viewYear.textContent=a.toLocaleDateString(this.locale,{year:'numeric'});var b,c,f,g,h,k,l;k=a.getFullYear(),l=a.getMonth(),f=Math.floor(new Date(k,l,1).getTime()/865E5),c=Math.ceil(new Date().getTime()/865E5)-f,void 0!==this.date&&(b=Math.ceil(new Date(this.date).getTime()/865E5)-f),void 0!==this.min&&(g=Math.ceil(+new Date(this.min).getTime()/865E5)-f),void 0!==this.max&&(h=Math.floor(+new Date(this.max).getTime()/865E5)-f);for(var m=+new Date(k,l,0).getDate(),o=+new Date(k,l+1,0).getDate(),p=+new Date(k,l,1).getDay()-1,q=-(7+p)+1,r=0;r<this.$.dates.children.length;r++)for(var s=0;s<this.$.dates.children[r].children.length;s++)0>=q?(this.$.dates.children[r].children[s].classList.add('notinmonth'),this.$.dates.children[r].children[s].textContent=m+q):q>o?(this.$.dates.children[r].children[s].classList.add('notinmonth'),this.$.dates.children[r].children[s].textContent=q-o):(this.$.dates.children[r].children[s].classList.remove('notinmonth'),this.$.dates.children[r].children[s].textContent=q),void 0!==b&&q===b?this.$.dates.children[r].children[s].classList.add('selected'):this.$.dates.children[r].children[s].classList.remove('selected'),q===c?this.$.dates.children[r].children[s].classList.add('current'):this.$.dates.children[r].children[s].classList.remove('current'),void 0!==g&&q<g||void 0!==h&&q>h?this.$.dates.children[r].children[s].classList.add('outofrange'):this.$.dates.children[r].children[s].classList.remove('outofrange'),this.$.dates.children[r].children[s].dataset.date=this._toDate(k,l,q),q++}}_toDate(){var f,a=arguments[0],b=arguments[1],c=arguments[2];if(void 0!==c)f=new Date(a,b,c);else if(void 0!==b)f=new Date(a,b);else if(void 0!==a)f=new Date(a);else return;return a=f.getFullYear(),b=this._pad(f.getMonth()+1),c=this._pad(f.getDate()),a+'-'+b+'-'+c}_minChanged(a){if(void 0!==a){var b=+new Date(a);b?this.render():this.min=void 0}}_maxChanged(a){if(void 0!==a){var b=+new Date(a);b?this.render():this.max=void 0}}}window.customElements.define(CalendarElement.is,CalendarElement);</script></dom-module><dom-module id="time-element" assetpath="../bower_components/datetime-picker/"><template strip-whitespace=""><style>:host{display:inline-block;font-family:inherit;background-color:var(--calendar-background, #252525);color:var(--calendar-color, #ccc);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;outline-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;--calendar-selected:var(--primary-color, #253EEC);padding:6px;@apply --calendar-element;}:host > *{position:relative;}#content{width:100%;display:inline-flex;flex-direction:row;align-items:center;justify-content:center;font-size:0.8em;}#content > *{position:relative;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center;}.button{cursor:pointer;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);color:inherit;fill:currentColor;height:1em;padding:0.5em;}.button:hover{cursor:pointer;background-color:var(--calendar-selected);}input.time{border-radius:2px;padding:0.2em;width:2ch;outline:none;font-family:inherit;text-align:center;border:none;background-color:var(--calendar-background, #333);color:inherit;}input::-webkit-input-placeholder{color:currentColor;}input.time:focus{background-color:var(--calendar-selected);}</style><div id="content"><div id="h"><svg class="button" viewBox="0 0 24 24" on-click="_onClick" for="hour" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="hour" type="text" tabindex="0" on-keydown="_checkKeycode" pattern="[0-1]?[0-9]|[2][0-3]" value="{{hour::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" on-click="_onClick" for="hour" step="-1"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div>:<div id="m"><svg class="button" viewBox="0 0 24 24" on-click="_onClick" for="minute" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="minute" type="text" tabindex="1" on-keydown="_checkKeycode" pattern="[0-5]?[0-9]" value="{{minute::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" on-click="_onClick" for="minute" step="-1"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div>:<div id="s"><svg class="button" viewBox="0 0 24 24" on-click="_onClick" for="second" step="1"><g><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g></svg> <input class="time" id="second" type="text" tabindex="2" on-keydown="_checkKeycode" pattern="[0-5]?[0-9]" value="{{second::input}}" placeholder="00"> <svg class="button" viewBox="0 0 24 24" for="second" step="-1" on-click="_onClick"><g><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g></svg></div><div id="extra"><slot></slot></div></div></template><script>class TimeElement extends Polymer.Element{static get is(){return'time-element'}static get properties(){return{time:{type:String,notify:!0},hour:{type:String,notify:!0},minute:{type:String,notify:!0},second:{type:String,notify:!0}}}static get observers(){return['_timeChanged(hour, minute, second)','_timeStringChanged(time)']}connectedCallback(){super.connectedCallback(),setTimeout(()=>{var b;b=this.time?new Date(this.time):new Date,this.time=this._pad(b.getHours())+':'+this._pad(b.getMinutes())+':'+this._pad(b.getSeconds())},0)}_pad(b){return 10>b?'0'+b:''+b}_timeChanged(b,c,f){if(void 0!==b&&void 0!==c&&void 0!==f){var g=this._pad(b)+':'+this._pad(c)+':'+this._pad(f);g=this._checktime(g),this.time!==g&&(this.time=g)}}_timeStringChanged(b){b=this._checktime(b||'00:00:00'),b=b.split(':').map(function(c){return parseInt(c)}),(b[0]!==this.hour||b[1]!==this.minute||b[2]!==this.second)&&this.setProperties({hour:b[0],minute:b[1],second:b[2]})}_checkKeycode(b){if(!b.target)return void(b&&b.preventDefault&&b.preventDefault());var c=38===b.keyCode?1:40===b.keyCode?-1:0;if(c)return void this._pad(this._increm(b.target.id,c));if(c=39===b.keyCode?1:37===b.keyCode?-1:0,c){for(var g,f=['hour','minute','second'],h=0;h<f.length;h++)f[h]===b.target.id&&(g=h);this.$[f[(g+c+3)%3]].focus()}}_checktime(b){var g,c=b.split(':'),f='';return 3===c.length?(g=parseInt(c[0]),f+=isNaN(g)||0>g||23<g?'00:':this._pad(g)+':',g=parseInt(c[1]),f+=isNaN(g)||0>g||59<g?'00:':this._pad(g)+':',g=parseInt(c[2]),f+=isNaN(g)||0>g||59<g?'00':this._pad(g),f):'00:00:00'}_onClick(b){var c=b.currentTarget||b.path[0],f=c.getAttribute('for'),g=parseInt(c.getAttribute('step'));this._increm(f,g)}_increm(b,c){b&&c&&('hour'===b?this.hour=this._pad((parseInt(this.hour)+c+24)%24):'minute'===b||'second'===b?this[b]=this._pad((parseInt(this[b])+c+60)%60):void 0)}}window.customElements.define(TimeElement.is,TimeElement);</script></dom-module><dom-module id="datetime-picker" assetpath="../bower_components/datetime-picker/"><template><style>:host{display:inline-flex;outline:none;position:relative;}:host > *{position:relative;}#calendar,
      #timepicker{position:absolute;opacity:0;will-change:opacity;transition:opacity 150ms cubic-bezier(0.6, 1, 0.2, 1);pointer-events:none;@apply --calendar-element;}#calendar[opened],
      #timepicker[opened]{opacity:1;z-index:1;pointer-events:all;}:host([position="top"]) #calendar,
      :host([position="top"]) #timepicker{top:0;left:0;transform:translateY(-100%);}:host([position="bottom"]) #calendar,
      :host([position="bottom"]) #timepicker{bottom:0;left:0;transform:translateY(100%);}:host([position="left"]) #calendar,
      :host([position="left"]) #timepicker{top:0;left:0;transform:translateX(-100%);}:host([position="right"]) #calendar,
      :host([position="right"]) #timepicker{top:0;right:0;transform:translateX(100%);}:host([position="center"]) #calendar,
      :host([position="center"]) #timepicker{top:50%;left:50%;transform:translate(-50%, -50%);}#date,
      #time{position:relative;box-sizing:border-box;padding:0.4em 0.2em;box-sizing:border-box;font-family:inherit;font-size:0.75em;text-align:center;@apply --datetime-picker-input;}#icon{display:block;height:1em;padding:0.5em;will-change:background-color;transition:background-color 150ms cubic-bezier(0.6, 1, 0.2, 1);cursor:pointer;fill:currentColor;}#icon:hover{background-color:var(--calendar-selected);}</style><div><input id="date" type="date" disabled$="[[disabled]]" min="[[min]]" max="[[max]]" autocomplete="off" value="{{date::input}}" on-click="toggleCalendarElement"><dom-if if="[[!_useNative]]"><template><calendar-element id="calendar" date="{{date}}" min="{{min}}" max="{{max}}" opened$="[[_calendarOpened]]"><svg id="icon" viewBox="0 0 24 24" on-click="closeCalendarElement"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g></svg></calendar-element></template></dom-if></div><div><input id="time" type="time" disabled$="[[disabled]]" autocomplete="off" value="{{time::input}}" step="1" on-click="toggleTimeElement"><dom-if if="[[!_useNative]]"><template><time-element id="timepicker" time="{{time}}" opened$="[[_timeOpened]]"><svg id="icon" viewBox="0 0 24 24" on-click="closeTimeElement"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g></svg></time-element></template></dom-if></div></template><script>class DatetimePicker extends Polymer.Element{static get is(){return'datetime-picker'}static get properties(){return{date:{type:String,notify:!0},time:{type:String,notify:!0},datetime:{type:String,computed:'_computeDatetime(date, time)'},value:{type:Number,notify:!0},min:{type:String,notify:!0},max:{type:String,notify:!0},position:{type:String,value:'top',reflectToAttribute:!0},useNotNative:{type:Boolean,value:!1},opened:{type:Boolean,reflectToAttribute:!0},disabled:{type:Boolean},_timeOpened:{type:Boolean},_calendarOpened:{type:Boolean},_nativeDateTime:{type:Boolean},_useNative:{type:Boolean,computed:'_computeUseNative(_nativeDateTime, useNotNative)'}}}static get observers(){return['_computeValue(datetime)','_valueChanged(value)','_setInputTypes(_useNative)']}connectedCallback(){super.connectedCallback(),this._nativeDateTime='date'!==this.$.date.type||'time'!==this.$.time.type?!1:!0}disconnectedCallback(){super.disconnectedCallback()}_setInputTypes(a){a?(this.$.date.type='date',this.$.time.type='time'):(this.$.date.type='text',this.$.time.type='text')}_computeValue(a){if(a){var b=+new Date(a);b&&b!==this.value&&this.set('value',b)}}_computeDatetime(a,b){return a&&b?a+' '+b:''}_valueChanged(a){if(a){var e,f,b=new Date(a),c=new Date(this.datetime);(e=this._toDate(b))!==this._toDate(c)&&this.set('date',e),(f=this._toTime(b))!==this._toTime(c)&&this.set('time',f)}}_toDate(a){return a.getFullYear()+'-'+this._pad(a.getMonth()+1)+'-'+this._pad(a.getDate())}_toTime(a){return this._pad(a.getHours())+':'+this._pad(a.getMinutes())+':'+this._pad(a.getSeconds())}_pad(a){return 10>a?'0'+a:''+a}toggle(){this.toggleCalendarElement(),this.toggleTimeElement()}open(){this.openCalendarElement(),this.openTimeElement()}close(){this.closeCalendarElement(),this.closeTimeElement()}toggleCalendarElement(){this._useNative||(this._calendarOpened&&!this._timeOpened?this.closeCalendarElement():this.openCalendarElement())}openCalendarElement(){this._useNative||(this._calendarOpened=!0,this._timeOpened=!1)}closeCalendarElement(){this._useNative||(this._calendarOpened=!1)}toggleTimeElement(){this._useNative||(!this._calendarOpened&&this._timeOpened?this.closeTimeElement():this.openTimeElement())}openTimeElement(){this._useNative||(this._calendarOpened=!1,this._timeOpened=!0)}closeTimeElement(){this._useNative||(this._timeOpened=!1)}_computeUseNative(a,b){return a&&!b}}window.customElements.define(DatetimePicker.is,DatetimePicker);</script></dom-module><dom-module id="dialog-detail-request"><template><style include="button-style">:host{--caption-background:transparent;--caption-color:currentColor;}device-caption{align-items:baseline;justify-content:flex-start;}datetime-picker{--datetime-picker-input:{text-align:center;border:none;outline:none;border-bottom:thin solid currentColor;};}#chart{color:inherit;position:absolute;top:0;right:0;bottom:0;left:0;}.button{flex:0;}.icon{color:currentColor;fill:currentColor;}[dialog-bottom]{@apply --layout-center-center;font-size:0.9em !important;padding-left:2em !important;padding-right:2em !important;}[dialog-bottom] > *{align-self:stretch;margin:0.25em !important;height:2.5em;}.date{@apply --layout-inline;@apply --layout-center-center;}.date > *{margin:0 0.25em;height:100%;}.button{padding:0.5em 1.5em;}.send{position:absolute !important;right:4px;bottom:4px;}#spinner{position:absolute !important;left:4px;bottom:4px;box-sizing:border-box;height:40px;width:40px;fill:currentColor;}#dialog{height:100vh;width:100vw;border-radius:0;margin:64px;}@media (max-width: 768px){#dialog{margin:0;}}[hidden]{display:none;}</style><dialog-element id="dialog" opened="{{opened}}"><div dialog-title=""><device-caption keys="[[item.keys]]"></device-caption></div><div dialog-content=""><device-chart id="chart" opened="[[opened]]" item="[[item]]" no-link="" domain-x="{{domainX}}"></device-chart></div><section dialog-bottom=""><div class="date"><iron-icon class="icon" icon="first-page"></iron-icon><datetime-picker id="dateFrom" value="{{fromDate}}" date-string="{{_minDate}}" max-date="[[_maxDate]]" locales="[[language]]"></datetime-picker></div><div class="date"><iron-icon class="icon" icon="last-page"></iron-icon><datetime-picker id="dateTo" value="{{toDate}}" date-string="{{_maxDate}}" min-date="[[_minDate]]" locales="[[language]]"></datetime-picker></div></section><icon-button class="send" icon="date-range" title="{{localize('detail', 'query')}}" on-tap="requestFromSocket"></icon-button><svg id="spinner" hidden$="[[!isLoading]]" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"><path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animateTransform></path></svg></dialog-element></template></dom-module><script>class DialogDetailRequest extends WebvisualMixins.LocalizeMixin(Polymer.Element){static get is(){return'dialog-detail-request'}static get properties(){return{item:{type:Object,value:function(){return{}}},opened:{type:Boolean,reflectToAttribute:!0},isLoading:{type:Boolean,value:!1},fromDate:{type:Number,value:+(new Date-3.6e6)},toDate:{type:Number,value:+new Date},domainX:{type:Array,observer:'_domainXChanged'},languageResourcePrefix:{type:String,value:'/locales/ui/'}}}static get listeners(){return{'dialog.iron-overlay-closed':'_reset','dialog.iron-overlay-opened':'_resize'}}requestFromSocket(){var a={target:'socket',operation:'request',args:{mounts:[this.item.mount],from:this.fromDate,to:this.toDate}},b=+new Date;this.isLoading=!0,Promise.resolve(new Promise(function(c){window.Webvisual.request(a,c)})).then(function(c){this.$.chart.clearValues(c),this.$.chart.insertValues(c);var d=new Date-b;1e3>d?this.async(function(){this.isLoading=!1},d):this.isLoading=!1}.bind(this)).catch(function(c){console.log(c)})}_domainXChanged(){this.domainX&&Number.isFinite(this.domainX[0])&&Number.isFinite(this.domainX[1])&&(this.set('fromDate',this.domainX[0]),this.set('toDate',this.domainX[1]))}_reset(){}_resize(){setTimeout(this.$.chart._sizeLayout.bind(this.$.chart),0)}}customElements.define(DialogDetailRequest.is,DialogDetailRequest);</script></div></body></html>