<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var b=this._valueToItem(this.selected);b?this._selection.select(b):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var c,b=0;c=this.items[b];b++)if(this._valueForItem(c)==a)return b;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return b==void 0?a.getAttribute(this.attrForSelected):b},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var d,b=a.target,c=this.items;b&&b!=this;){if(d=c.indexOf(b),0<=d){var f=this._indexToValue(d);return void this._itemActivate(f,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(e){return null!==e&&e!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>class TabsOverlay extends Polymer.Element{static get is(){return'tabs-overlay'}static get properties(){return{target:{type:Object,observer:'_targetChanged'}}}constructor(){super(),this._lastTarget=void 0,this._transitionsInFlight=[]}ready(){super.ready(),this.addEventListener('transitionend',a=>this._onTransitionend(a))}_targetChanged(a,b){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(b,a),this._lastTarget=this.target)}_onTransitionend(a){let b=this._transitionsInFlight.indexOf(a.propertyName);0<=b&&this._transitionsInFlight.splice(b,1),this._transitionsInFlight.length||this._moveComplete()}_moveComplete(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}_move(a,b){let c=a||b,d=b||a;if(c||d){let f=a?1:0,g=b?1:0;Polymer.dom.flush();let h=this.getBoundingClientRect(),j=window.getComputedStyle(this),k=c.getBoundingClientRect(),l=d.getBoundingClientRect();if(0===l.top&&0===l.right&&0===l.bottom&&0===l.left&&0===l.width&&0===l.height)return this.style.transitionProperty='none',this.style.opacity=g,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';let m=parseFloat(j.top||'0')+(k.top-h.top),n=parseFloat(j.right||'0')-(k.right-h.right),o=parseFloat(j.bottom||'0')-(k.bottom-h.bottom),p=parseFloat(j.left||'0')+(k.left-h.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';let q=[this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=f+''];m+=l.top-k.top,n-=l.right-k.right,o-=l.bottom-k.bottom,p+=l.left-k.left;let r=[0.2,0.2,0.2,0.2,0.2],s=[0,0,0,0,0];k.left<l.left&&k.right<l.right?s[3]=0.1:k.left>l.left&&k.right>l.right&&(s[1]=0.1),k.top<l.top&&k.bottom<l.bottom?s[0]=0.1:k.top>l.top&&k.bottom>l.bottom&&(s[2]=0.1);let t=[m+'px',n+'px',o+'px',p+'px',g+''],u=['top','right','bottom','left','opacity'];for(let v=0;v<q.length;v++)q[v]!==t[v]&&(0===r[v]&&0===s[v]||this._transitionsInFlight.push(u[v]));requestAnimationFrame(()=>{this.style.transitionDuration=r.map(v=>{return v+'s'}).join(', '),this.style.transitionDelay=s.map(v=>{return v+'s'}).join(', '),this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=g+''})}}}customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>class TabsContainer extends Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element){static get is(){return'tabs-container'}static get properties(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}static get observers(){return['_onSelectedItemChanged(selectedItem)']}connectedCallback(){super.connectedCallback(),this._addScrollListeners()}_addScrollListeners(){this.$.container.addEventListener('scroll',a=>this._onScroll(a),{passive:!0}),this.$.container.addEventListener('wheel',a=>this._onWheel(a),{passive:!0})}_onSelectedItemChanged(a){a&&(!this.multi&&(this.$.overlay.target=a),requestAnimationFrame(()=>{this.vertical?this.$.container.scrollTop=a.offsetTop-this.$.container.offsetTop-this.$.container.clientHeight/2+a.clientHeight/2:this.$.container.scrollLeft=a.offsetLeft-this.$.container.offsetLeft-this.$.container.clientWidth/2+a.clientWidth/2}))}_onWheel(a){if(a){var b,c;switch(a.deltaMode){case 0:c=0.2;break;case 1:c=20;break;case 2:c=this.$.container.offsetHeight;break;default:c=1;}this.vertical?(b=a.deltaY||0,this.$.container.scrollTop+=b*c):(b=a.deltaX||0,this.$.container.scrollLeft+=b*c)}}_onScroll(a,b){a.stopImmediatePropagation();var c;this.vertical?(c=b&&-b.ddy||0,this.$.container.scrollTop+=c):(c=b&&-b.ddx||0,this.$.container.scrollLeft+=c)}reset(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>class RippleContainer extends Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element){static get is(){return'ripple-container'}constructor(){super(),this._isDown=!1}ready(){super.ready(),this.addEventListener('focus',a=>this._onFocus(a),!0),this.addEventListener('blur',a=>this._onBlur(a),!0),this.addEventListener('down',a=>this._rippleDown(a)),this.addEventListener('up',a=>this._rippleUp(a))}_onFocus(a){this._isDown||this._rippleDown(a)}_onBlur(a){this._rippleUp(a)}_rippleDown(a){this._isDown=!0,this.getRipple().downAction(a)}_rippleUp(a){this._isDown=!1,this.getRipple().upAction(a)}}customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>class TabElement extends Polymer.Element{static get is(){return'tab-element'}}customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:0.5px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ü" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>class LogoElement extends Polymer.Element{static get is(){return'logo-element'}static get properties(){return{href:{type:String}}}connectedCallback(){super.connectedCallback(),this._addListners()}_addListners(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}_addClass(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.add('animated')})}.bind(this))}_removeClass(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.remove('animated')})}.bind(this))}}customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>class ToggleButton extends Polymer.Element{static get is(){return'toggle-button'}static get properties(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}connectedCallback(){super.connectedCallback(),Polymer.Gestures.addListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.addListener(this,'track',a=>this._ontrack(a))}disconnectedCallback(){super.disconnectedCallback(),Polymer.Gestures.removeListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.removeListener(this,'track',a=>this._ontrack(a))}_ontrack(a){var b=a.detail;'start'===b.state?this._trackStart(b):'track'===b.state?this._trackMove(b):'end'===b.state&&this._trackEnd(b)}_trackStart(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}_trackMove(a){var b=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+b:b)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}_trackEnd(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}_onclicked(){this.checked=!this.checked}}customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>class SVGData extends WebvisualMixins.FetchMixin(Polymer.Element){static get is(){return'svg-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},loggedIn:{type:Boolean},room:{type:String},data:{type:Object,value:function(){return{}},notify:!0}}}static get observers(){return['_fetchSvgSource(room, loggedIn)']}_fetchSvgSource(a){if(a){var e=a.split('/').filter(function(g){return''!==g});if(2===e.length){var f=e[0]+'+'+e[1]+'+svgSource.json';this._fetch(f,'GET','include','json','data').catch(g=>{console.log(g)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="device-socket-data" assetpath="data/"><script>class DeviceSocketData extends Polymer.Element{static get is(){return'device-socket-data'}static get properties(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,value:'connect',notify:!0},lazyConnect:{type:Boolean},loggedIn:{type:Boolean}}}static get observers(){return['_connect(loggedIn, lazyConnect)']}_connect(a,b){a&&b?this._createSocketConnection(this.locationHost,this.nameSpace):(this.socketStatus='sync-problem',Webvisual.disconnect())}_createSocketConnection(a,b){a&&'sync-disabled'!==this.socketStatus&&Webvisual&&setTimeout(()=>{Webvisual.assignStatusNotifications(this),Webvisual.createSocketConnection(a,b),this.socketRoom&&this.connect(this.socketRoom)},0)}connect(a){return a=a||this.socketRoom,a?void('/'===a.substring(0,1)&&(a=a.slice(1,a.length)),Webvisual.setupConnection(a),'connected'!==this.socketStatus&&(this.socketStatus='connect')):void(this.socketStatus='sync-problem')}disconnect(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}customElements.define(DeviceSocketData.is,DeviceSocketData);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"FiraSans-Regular", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:bold;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>class CaptionElement extends Polymer.Element{static get is(){return'device-caption'}static get properties(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}constructor(){super(),this.setAttribute('unresolved','')}getKey(a){return this.keys&&this.keys[a]}_computeReducedCaptionKeys(a,b){var e=Object.keys(b||{});if(0===e.length)return[];var f=[];return!0===this.withoutGroupedKey?f=e.filter(function(g){return a!==g}):!0===this.onlyGroupedKey&&(f=e.filter(function(g){return a===g})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===f.length?e:f}isEmptyCaption(a){return!this.keys[a]}}customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return class extends c{constructor(){super()}static get properties(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}static get observers(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}connectedCallback(){super.connectedCallback(),this._linkElement(this.item,this.noLink)}disconnectedCallback(){super.disconnectedCallback(),this._unlinkElement(),this.clearValues()}_linkElement(d,e){if(d&&d.mount){if(this._olditem){if(d.mount===this._olditem.mount&&!e)return;this._unlinkElement(this._olditem)}return e?void this._unlinkElement(d):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=d,this.clearValues(),this.reset(),this.requestValues(null,null,this.viewLength).then(f=>{for(var g in f)if(g===this.item.mount){this.insertValues(f[g]);break}}).catch(()=>{})))}}_unlinkElement(d){d=d||this.item||this._olditem,window.Webvisual&&Webvisual.retractElement&&d&&d.mount&&(window.Webvisual.retractElement(this,d),this._olditem=null)}getElement(){return this.properties}computeDate(d){return d?864E5>Math.abs(Date.now()-d)?new Date(d).toLocaleTimeString():new Date(d).toLocaleString():''}computeValue(d,e){return this.item&&this.item.isIndicatorLamp?e?'\u2717':'\u2713':d}insertValues(d,e){if(void 0!==d){var e=e||this.viewLength;if(this._initialized||(this._initialized=!0),!e)this.item&&!0===this.item.exceedable&&d.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(d)),this.renderInsertedValues(d);else{var f=d.slice(d.length-e,d.length);this.item&&!0===this.item.exceedable&&f.forEach(g=>{this.checkExceedingState(g)}),this.storeInside&&(this.values=this.values.concat(f)),this.renderInsertedValues(f),f.length=0}d.length=0}}spliceValues(d){d&&(!0===this.storeInside&&(this.values=this.values.filter(e=>{return-1===d.indexOf(e)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(d))}resetValues(d){this.values=d,this.notifyPath('values'),this.renderInsertedValues(this.values)}clearValues(){this.values=[],this.notifyPath('values')}requestValues(d,e,f){if(!(this.item&&this.item.mount))return new Promise((h,j)=>{j()});f=f||this.viewLength||1;var g={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:f||1}};return window.Webvisual?new Promise(h=>{window.Webvisual.request(g,h)}):new Promise((h,j)=>{this.values?h(this.values.slice(this.values.length-f,this.values.length)):j()})}requestRange(d){if(!(this.item&&this.item.mount))return new Promise(f=>{f([void 0,void 0])});var e={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:d}};return!this.storeInside&&window.Webvisual?new Promise(f=>{window.Webvisual.request(e,f)}):new Promise(f=>{if(this.values&&this.values.length){var h=this.min(this.values,d),j=this.max(this.values,d);void 0===h&&void 0===j||f([h,j])}f([void 0,void 0])})}min(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g>h&&(g=h);return g}max(d,e){for(var g,h,f=-1,j=d.length;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g<h&&(g=h);return g}renderInsertedValues(){}renderSplicedValues(){}renderClearing(){}checkExceedingState(d){this.item&&!1!==this.item.exceedable&&void 0!==d&&(0===d.state?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)))}_exceedingChanged(d){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:d}}))}_hasExceededChanged(){}reset(){this.resetColor&&this.resetColor(),super.reset&&super.reset(),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return class extends a{static get observers(){return['setColor(item.color)']}setColor(b){b&&(this.updateStyles({"--device-color":b||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":b||null})),this.updateStyles()}resetColor(){this.setColor(this.item&&this.item.color||'')}getComputedStyleValue(b){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,b):getComputedStyle(this).getPropertyValue(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}static get observers(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}_addTouchListeners(b,c,d){if(void 0!==c)if(b)this._removeTouchListeners();else{var f=this.eventTarget;f=f?this.$[f]:this,d?(Polymer.Gestures.addListener(f,'down',g=>this._handleTouch(g)),Polymer.Gestures.addListener(f,'up',g=>this._handleTouch(g))):c?Polymer.Gestures.addListener(f,'tap',()=>this.select()):this._removeTouchListeners()}}_removeTouchListeners(){var b=this.eventTarget;b=b?this.$[b]:this,Polymer.Gestures.removeListener(b,'down',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'up',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'tap',()=>this.select())}_handleTouch(b){'down'===b.type?this._lastEvent=b:this._lastEvent&&b.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}_checkedChanged(){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:this.checked}}))}select(b,c){!0===this.selectable&&(this._preventSelectEvent=c,b===void 0?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=b)}deselect(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}reset(){super.reset&&super.reset(),this.deselect()}}};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'FiraSans-Regular', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;line-height:1;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.2em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.65em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:exclusion;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>class DeviceSign extends WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-sign'}static get properties(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}insertValues(a){a&&a.length?setTimeout(()=>{this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.isIndicatorLamp||(this.$.value.textContent=this.computeValue(b.y)),this.showDate&&(this.$.dateSection.textContent=this.computeDate(b.x)),this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))},0):this.renderClearing()}computeValue(a){return a}renderClearing(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}_requestExceedingDetails(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>class DeviceCheckbox extends WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-checkbox'}static get properties(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}insertValues(a){if(a&&a.length){this._initialized||(this._initialized=!0);var b=a[a.length-1];this.item.exceedable&&(this.checkExceedingState(b),(!this.hasAttribute('state')||this.state!==b.state)&&this.setAttribute('state',b.state))}else this.renderClearing()}renderClearing(){this._initialized=!1,this.setAttribute('state',null)}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.afterNextRender(this,function(){var a=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!a||'-1px'===a){var b=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20,c=Math.floor(8/3*b);c%2!==b%2&&c++,this.updateStyles({"--box-ink-size":c+'px'})}})}}customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var n=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,n-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this.grid?this._estRowsInView*this._rowHeight*this._maxPages:0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(n){this.style.webkitOverflowScrolling=n===this?'touch':'',this.style.overflowY=n===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var n=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(n['padding-top'],10),this._isRTL=!('rtl'!==n.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var n=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),o=n-this._scrollPosition,p=0<=o;if(this._scrollPosition=n,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(o)>this._physicalSize&&0<this._physicalSize){o-=this._scrollOffset;var q=Math.round(o/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=q,this._physicalStart+=q,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var r=this._getReusables(p);p?(this._physicalTop=r.physicalTop,this._virtualStart+=r.indexes.length,this._physicalStart+=r.indexes.length):(this._virtualStart-=r.indexes.length,this._physicalStart-=r.indexes.length),this._update(r.indexes,p?null:r.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(n){var o,p,q,r,s=[],t=this._hiddenContentSize*this._ratio,u=this._virtualStart,w=this._virtualEnd,z=this._physicalCount,A=this._physicalTop+this._scrollOffset,B=this._physicalBottom+this._scrollOffset,C=this._scrollTop,D=this._scrollBottom;for(n?(o=this._physicalStart,p=this._physicalEnd,q=C-A):(o=this._physicalEnd,p=this._physicalStart,q=B-D);r=this._getPhysicalSizeIncrement(o),q-=r,!(s.length>=z||q<=t);)if(n){if(w+s.length+1>=this._virtualCount)break;if(A+r>=C-this._scrollOffset)break;s.push(o),A+=r,o=(o+1)%z}else{if(0>=u-s.length)break;if(A+this._physicalSize-r<=D)break;s.push(o),A-=r,o=0===o?z-1:o-1}return{indexes:s,physicalTop:A-this._scrollOffset}},_update:function(n,o){if(!(n&&0===n.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(n),this._updateMetrics(n),o)for(;o.length;){var p=o.pop();this._physicalTop-=this._getPhysicalSizeIncrement(p)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(n){this._ensureTemplatized();var o,p,q=Array(n);for(o=0;o<n;o++)p=this.stamp(null),q[o]=p.root.querySelector('*'),this._itemsParent.appendChild(p.root);return q},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(n){var o=this._clamp(this._physicalCount+n,c,this._virtualCount-this._virtualStart);if(o=this._convertIndexToCompleteRow(o),this.grid){var p=o%this._itemsPerRow;p&&o-p<=this._physicalCount&&(o+=this._itemsPerRow),o-=p}var q=o-this._physicalCount,r=Math.round(0.5*this._physicalCount);if(!(0>q)){if(0<q){var s=window.performance.now();[].push.apply(this._physicalItems,this._createPool(q)),[].push.apply(this._physicalSizes,Array(q)),this._physicalCount+=q,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=q),this._update(),this._templateCost=(window.performance.now()-s)/q,r=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===r||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,r)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,r),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var n=this._getReusables(!0);this._physicalTop=n.physicalTop,this._virtualStart+=n.indexes.length,this._physicalStart+=n.indexes.length,this._update(n.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var n={};n.__key__=!0,n[this.as]=!0,n[this.indexAs]=!0,n[this.selectedAs]=!0,n.tabIndex=!0,this._instanceProps=n,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(n,o){'undefined'===typeof o||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),n&&this._updateGridMetrics())},_itemsChanged:function(n){if('items'===n.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===n.path){this._adjustVirtualIndex(n.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var o=n.value.indexSplices.some(function(p){return this._isIndexRendered(p.index)},this);(!this._isClientFull()||o)&&this._debounceRender(this._render,k)}else'items.length'!==n.path&&this._forwardItemPath(n.path,n.value)},_forwardItemPath:function(n,o){n=n.slice(6);var p=n.indexOf('.')+1;0===p&&(p=n.length);var q=j?parseInt(n.substring(0,p),10):parseInt(n.substring(1,p),10),r=this._offscreenFocusedItem,s=this._isIndexRendered(q),t;s?t=this.modelForElement(this._physicalItems[this._getPhysicalIndex(q)]):r&&(t=this.modelForElement(r));t&&t[this.indexAs]===q&&(n=n.substring(p),n=this.as+(n?'.'+n:''),j?t._setPendingPropertyOrPath(n,o,!1,!0):t.notifyPath(n,o,!0),t._flushProperties&&t._flushProperties(!0),s&&(this._updateMetrics([q]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(n){n.forEach(function(o){if(o.removed.forEach(this._removeItem,this),o.index<this._virtualStart){var p=Math.max(o.addedCount-o.removed.length,o.index-this._virtualStart);this._virtualStart+=p,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=p)}},this)},_removeItem:function(n){this.$.selector.deselect(n),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===n&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())},_iterateItems:function(n,o){var p,q,r,s;if(2===arguments.length&&o){for(s=0;s<o.length;s++)if(p=o[s],q=this._computeVidx(p),null!=(r=n.call(this,p,q)))return r;}else{for(p=this._physicalStart,q=this._virtualStart;p<this._physicalCount;p++,q++)if(null!=(r=n.call(this,p,q)))return r;for(p=0;p<this._physicalStart;p++,q++)if(null!=(r=n.call(this,p,q)))return r}},_computeVidx:function(n){return n>=this._physicalStart?this._virtualStart+(n-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+n},_assignModels:function(n){this._iterateItems(function(o,p){var q=this._physicalItems[o],r=this.items&&this.items[p];if(null!=r){var s=this.modelForElement(q);s.__key__=this._collection?this._collection.getKey(r):null,this._forwardProperty(s,this.as,r),this._forwardProperty(s,this.selectedAs,this.$.selector.isSelected(r)),this._forwardProperty(s,this.indexAs,p),this._forwardProperty(s,'tabIndex',this._focusedVirtualIndex===p?0:-1),this._physicalIndexForKey[s.__key__]=o,s._flushProperties&&s._flushProperties(!0),q.removeAttribute('hidden')}else q.setAttribute('hidden','')},n)},_updateMetrics:function(n){Polymer.flush?Polymer.flush():Polymer.dom.flush();var o=0,p=0,q=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems(function(s){p+=this._physicalSizes[s]||0,this._physicalSizes[s]=this._physicalItems[s].offsetHeight,o+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},n),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(p=1===this._itemsPerRow?p:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+o-p,this._itemsPerRow=1),this._physicalAverageCount!==q&&(this._physicalAverage=Math.round((r*q+o)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var n=this._physicalTop;if(this.grid){var o=this._itemsPerRow*this._itemWidth,p=(this._viewportWidth-o)/2;this._iterateItems(function(q,r){var s=r%this._itemsPerRow,t=Math.floor(s*this._itemWidth+p);this._isRTL&&(t*=-1),this.translate3d(t+'px',n+'px',0,this._physicalItems[q]),this._shouldRenderNextRow(r)&&(n+=this._rowHeight)})}else this._iterateItems(function(q){this.translate3d(0,n+'px',0,this._physicalItems[q]),n+=this._physicalSizes[q]})},_getPhysicalSizeIncrement:function(n){return this.grid?this._computeVidx(n)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[n]},_shouldRenderNextRow:function(n){return n%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var n=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==n){this._physicalTop-=n;var o=this._scrollTop;!b&&0<o&&this._resetScrollPosition(o-n)}},_resetScrollPosition:function(n){this.scrollTarget&&0<=n&&(this._scrollTop=n,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(n){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,n=n||0===this._scrollHeight,n=n||this._scrollPosition>=this._estScrollHeight-this._physicalSize,n=n||this.grid&&this.$.items.style.height<this._estScrollHeight,(n||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(n){return this.scrollToIndex(this.items.indexOf(n))},scrollToIndex:function(n){if(!('number'!==typeof n||0>n||n>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){n=this._clamp(n,0,this._virtualCount-1),(!this._isIndexRendered(n)||n>=this._maxVirtualStart)&&(this._virtualStart=this.grid?n-2*this._itemsPerRow:n-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var o=this._physicalStart,p=this._virtualStart,q=0,r=this._hiddenContentSize;p<n&&q<=r;)q+=this._getPhysicalSizeIncrement(o),o=(o+1)%this._physicalCount,p++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+q),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(n){return this.selectIndex(this.items.indexOf(n))},selectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o&&(o[this.selectedAs]=!0),this.updateSizeForIndex(n)}this.$.selector.selectIndex?this.$.selector.selectIndex(n):this.$.selector.select(this.items[n])}},deselectItem:function(n){return this.deselectIndex(this.items.indexOf(n))},deselectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o[this.selectedAs]=!1,this.updateSizeForIndex(n)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(n):this.$.selector.deselect(this.items[n])}},toggleSelectionForItem:function(n){return this.toggleSelectionForIndex(this.items.indexOf(n))},toggleSelectionForIndex:function(n){var o=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(n):this.$.selector.isSelected(this.items[n]);o?this.deselectIndex(n):this.selectIndex(n)},clearSelection:function(){this._iterateItems(function(n){this.modelForElement(this._physicalItems[n])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(n){var o=n?this.listen:this.unlisten;o.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(n){var o=this.modelForElement(n.target);if(o){var p,q,r=Polymer.dom(n).path[0],s=this._itemsParent.node.domHost,t=Polymer.dom(s?s.root:document).activeElement,u=this._physicalItems[this._getPhysicalIndex(o[this.indexAs])];'input'!==r.localName&&'button'!==r.localName&&'select'!==r.localName&&(p=o.tabIndex,o.tabIndex=h,q=t?t.tabIndex:-1,o.tabIndex=p,t&&u!==t&&u.contains(t)&&q!==h||this.toggleSelectionForItem(o[this.as]))}},_multiSelectionChanged:function(n){this.clearSelection(),this.$.selector.multi=n},updateSizeForItem:function(n){return this.updateSizeForIndex(this.items.indexOf(n))},updateSizeForIndex:function(n){return this._isIndexRendered(n)?(this._updateMetrics([this._getPhysicalIndex(n)]),this._positionItems(),null):null},_manageFocus:function(){var n=this._focusedVirtualIndex;0<=n&&n<this._virtualCount?this._isIndexRendered(n)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(n){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(n/this._itemsPerRow)*this._itemsPerRow:n},_isIndexRendered:function(n){return n>=this._virtualStart&&n<=this._virtualEnd},_isIndexVisible:function(n){return n>=this.firstVisibleIndex&&n<=this.lastVisibleIndex},_getPhysicalIndex:function(n){return(this._physicalStart+(n-this._virtualStart))%this._physicalCount},focusItem:function(n){this._focusPhysicalItem(n)},_focusPhysicalItem:function(n){if(!(0>n||n>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(n)||this.scrollToIndex(n);var q,o=this._physicalItems[this._getPhysicalIndex(n)],p=this.modelForElement(o);p.tabIndex=h,o.tabIndex===h&&(q=o),q||(q=Polymer.dom(o).querySelector('[tabindex="'+h+'"]')),p.tabIndex=0,this._focusedVirtualIndex=n,q&&q.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var n=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var o=this.stamp(null);this._focusBackfillItem=o.root.querySelector('*'),this._itemsParent.appendChild(o.root)}this._offscreenFocusedItem=this._physicalItems[n],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[n]=this._focusBackfillItem,this._focusedPhysicalIndex=n,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var n=this._focusedPhysicalIndex,o=this._physicalItems[n];if(o){var p=this.modelForElement(o),q=this.modelForElement(this._offscreenFocusedItem);p[this.as]===q[this.as]?(this._focusBackfillItem=o,p.tabIndex=-1,this._physicalItems[n]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(n){var o=this.modelForElement(n.target),p=this.modelForElement(this._focusedItem),q=null!==this._offscreenFocusedItem,r=this._focusedVirtualIndex;o&&(p===o?!this._isIndexVisible(r)&&this.scrollToIndex(r):(this._restoreFocusedItem(),p&&(p.tabIndex=-1),o.tabIndex=0,r=o[this.indexAs],this._focusedVirtualIndex=r,this._focusedPhysicalIndex=this._getPhysicalIndex(r),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],q&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(n){switch(n.keyCode){case 40:n.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(n);}},_clamp:function(n,o,p){return Math.min(p,Math.max(o,n))},_debounceRender:function(n,o){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,o,n.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(n)},_forwardProperty(n,o,p){j?n._setPendingProperty(o,p):n[o]=p},_forwardHostPropV2:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).forwardHostProp(n,o)},this)},_notifyInstancePropV2:function(n,o,p){if(Polymer.Path.matches(this.as,o)){var q=n[this.indexAs];o==this.as&&(this.items[q]=p),this.notifyPath(Polymer.Path.translate(this.as,'items.'+q,o),p)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(n,o,p){0===o.indexOf(this.as+'.')&&this.notifyPath('items.'+n.__key__+'.'+o.slice(this.as.length+1),p)},_forwardParentPath:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).notifyPath(n,o,!0)},this)},_forwardParentProp:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&(this.modelForElement(p)[n]=o)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:bold;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[value.state]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y, value.state)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>class DeviceTable extends WebvisualMixins.DeviceMixin(Polymer.Element){static get is(){return'device-table'}static get properties(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}static get observers(){return['_computeKeysForCaption(keysForCaption, item)']}insertValues(a){a&&a.length?setTimeout(()=>{if(!this._initialized)this.set('values',a.reverse()),this._initialized=!0;else for(var b=0;b<a.length;b++)this.unshift('values',a[b])},0):!this._initialized&&this.renderClearing()}spliceValues(a){setTimeout(()=>{for(var b=[],c=0;c<a.length;c++){for(var d=this.values.length-1;0<=d&&!(this.values[d].x===a[c].x);d--);-1!==d&&(this.values.splice(d,1),b.push({index:d,removed:[this.values[d]],addedCount:0,object:this.values,type:'splice'}))}this.notifySplices('values',b)},0)}renderClearing(){this.$.list.set('items',[])}_computeKeysForCaption(a,b){if(a&&b&&b.keys){var c='';for(var d in this.item.keys)c+=this.item.keys[d]+' ';this.$.caption.textContent=c}else this.caption&&(this.$.caption.textContent=this.caption)}_toggleGridView(){this.$.list.grid=!!!this.$.list.grid}}customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>class DeviceTableGroup extends Polymer.Element{static get is(){return'device-table-group'}static get properties(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}static get observers(){return['_shouldHideTabs(items.length)']}_shouldHideTabs(a){2>a?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===a&&this.set('selectedItemMount',this.items[0].mount)}reset(){this.set('items',[]),this.set('selectedItemMount','')}}customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">!function(Pa){"use strict";function La(gg){return function(yg,fg){return zp(gg(yg),fg)}}function Ha(gg,yg,fg){var xg=(yg-gg)/Math.max(0,fg),vg=Math.floor(Math.log(xg)/Math.LN10),bg=xg/Math.pow(10,vg);return 0<=vg?(bg>=Ap?10:bg>=Yp?5:bg>=Ep?2:1)*Math.pow(10,vg):-Math.pow(10,-vg)/(bg>=Ap?10:bg>=Yp?5:bg>=Ep?2:1)}function Xa(gg,yg,fg){var xg=Math.abs(yg-gg)/Math.max(0,fg),vg=Math.pow(10,Math.floor(Math.log(xg)/Math.LN10)),bg=xg/vg;return bg>=Ap?vg*=10:bg>=Yp?vg*=5:bg>=Ep&&(vg*=2),yg<gg?-vg:vg}function qa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ia(){return new qa}function Oa(gg){this._context=gg}function $a(gg){return gg[0]}function ja(gg){return gg[1]}function Va(gg,yg,fg){gg._context.bezierCurveTo((2*gg._x0+gg._x1)/3,(2*gg._y0+gg._y1)/3,(gg._x0+2*gg._x1)/3,(gg._y0+2*gg._y1)/3,(gg._x0+4*gg._x1+yg)/6,(gg._y0+4*gg._y1+fg)/6)}function Ba(gg){this._context=gg}function Za(gg,yg,fg){gg._context.bezierCurveTo(gg._x1+gg._k*(gg._x2-gg._x0),gg._y1+gg._k*(gg._y2-gg._y0),gg._x2+gg._k*(gg._x1-yg),gg._y2+gg._k*(gg._y1-fg),gg._x2,gg._y2)}function Wa(gg,yg){this._context=gg,this._k=(1-yg)/6}function Ra(gg,yg,fg){var xg=gg._x1,vg=gg._y1,bg=gg._x2,wg=gg._y2;if(gg._l01_a>Xp){var Tg=2*gg._l01_2a+3*gg._l01_a*gg._l12_a+gg._l12_2a,kg=3*gg._l01_a*(gg._l01_a+gg._l12_a);xg=(xg*Tg-gg._x0*gg._l12_2a+gg._x2*gg._l01_2a)/kg,vg=(vg*Tg-gg._y0*gg._l12_2a+gg._y2*gg._l01_2a)/kg}if(gg._l23_a>Xp){var Sg=2*gg._l23_2a+3*gg._l23_a*gg._l12_a+gg._l12_2a,Cg=3*gg._l23_a*(gg._l23_a+gg._l12_a);bg=(bg*Sg+gg._x1*gg._l23_2a-yg*gg._l12_2a)/Cg,wg=(wg*Sg+gg._y1*gg._l23_2a-fg*gg._l12_2a)/Cg}gg._context.bezierCurveTo(xg,vg,bg,wg,gg._x2,gg._y2)}function Ga(gg,yg){this._context=gg,this._alpha=yg}function Ja(gg){return 0>gg?-1:1}function Ka(gg,yg,fg){var xg=gg._x1-gg._x0,vg=yg-gg._x1,bg=(gg._y1-gg._y0)/(xg||0>vg&&-0),wg=(fg-gg._y1)/(vg||0>xg&&-0);return(Ja(bg)+Ja(wg))*Math.min(Math.abs(bg),Math.abs(wg),.5*Math.abs((bg*vg+wg*xg)/(xg+vg)))||0}function Qa(gg,yg){var fg=gg._x1-gg._x0;return fg?(3*(gg._y1-gg._y0)/fg-yg)/2:yg}function el(gg,yg,fg){var xg=gg._x0,vg=gg._y0,bg=gg._x1,wg=gg._y1,Tg=(bg-xg)/3;gg._context.bezierCurveTo(xg+Tg,vg+Tg*yg,bg-Tg,wg-Tg*fg,bg,wg)}function tl(gg){this._context=gg}function nl(gg){this._context=gg}function ol(gg){this._context=gg}function al(gg){var yg,fg,xg=gg.length-1,vg=Array(xg),bg=Array(xg),wg=Array(xg);for(vg[0]=0,bg[0]=2,wg[0]=gg[0]+2*gg[1],yg=1;yg<xg-1;++yg)vg[yg]=1,bg[yg]=4,wg[yg]=4*gg[yg]+2*gg[yg+1];for(vg[xg-1]=2,bg[xg-1]=7,wg[xg-1]=8*gg[xg-1]+gg[xg],yg=1;yg<xg;++yg)fg=vg[yg]/bg[yg-1],bg[yg]-=fg,wg[yg]-=fg*wg[yg-1];for(vg[xg-1]=wg[xg-1]/bg[xg-1],yg=xg-2;0<=yg;--yg)vg[yg]=(wg[yg]-vg[yg+1])/bg[yg];for(bg[xg-1]=(gg[xg]+vg[xg-1])/2,yg=0;yg<xg-1;++yg)bg[yg]=2*gg[yg+1]-vg[yg+1];return[vg,bg]}function il(gg,yg){this._context=gg,this._t=yg}function ll(gg,yg,fg,xg){function vg(bg){return gg(bg=new Date(+bg)),bg}return vg.floor=vg,vg.ceil=function(bg){return gg(bg=new Date(bg-1)),yg(bg,1),gg(bg),bg},vg.round=function(bg){var wg=vg(bg),Tg=vg.ceil(bg);return bg-wg<Tg-bg?wg:Tg},vg.offset=function(bg,wg){return yg(bg=new Date(+bg),null==wg?1:Math.floor(wg)),bg},vg.range=function(bg,wg,Tg){var kg=[];if(bg=vg.ceil(bg),Tg=null==Tg?1:Math.floor(Tg),!(bg<wg&&0<Tg))return kg;do kg.push(new Date(+bg));while((yg(bg,Tg),gg(bg),bg<wg));return kg},vg.filter=function(bg){return ll(function(wg){if(wg>=wg)for(;gg(wg),!bg(wg);)wg.setTime(wg-1)},function(wg,Tg){if(wg>=wg)for(;0<=--Tg;)for(;yg(wg,1),!bg(wg););})},fg&&(vg.count=function(bg,wg){return $p.setTime(+bg),jp.setTime(+wg),gg($p),gg(jp),Math.floor(fg($p,jp))},vg.every=function(bg){return bg=Math.floor(bg),isFinite(bg)&&0<bg?1<bg?vg.filter(xg?function(wg){return 0==xg(wg)%bg}:function(wg){return 0==vg.count(0,wg)%bg}):vg:null}),vg}function rl(gg){return ll(function(yg){yg.setDate(yg.getDate()-(yg.getDay()+7-gg)%7),yg.setHours(0,0,0,0)},function(yg,fg){yg.setDate(yg.getDate()+7*fg)},function(yg,fg){return(fg-yg-(fg.getTimezoneOffset()-yg.getTimezoneOffset())*Bp)/Zp})}function sl(gg){return ll(function(yg){yg.setUTCDate(yg.getUTCDate()-(yg.getUTCDay()+7-gg)%7),yg.setUTCHours(0,0,0,0)},function(yg,fg){yg.setUTCDate(yg.getUTCDate()+7*fg)},function(yg,fg){return(fg-yg)/Zp})}function dl(gg){return new cl(gg)}function cl(gg){if(!(yg=__.exec(gg)))throw new Error("invalid format: "+gg);var yg,fg=yg[1]||" ",xg=yg[2]||">",vg=yg[3]||"-",bg=yg[4]||"",wg=!!yg[5],Tg=yg[6]&&+yg[6],kg=!!yg[7],Sg=yg[8]&&+yg[8].slice(1),Cg=yg[9]||"";"n"===Cg?(kg=!0,Cg="g"):p_[Cg]||(Cg=""),(wg||"0"===fg&&"="===xg)&&(wg=!0,fg="0",xg="="),this.fill=fg,this.align=xg,this.sign=vg,this.symbol=bg,this.zero=wg,this.width=Tg,this.comma=kg,this.precision=Sg,this.type=Cg}function ul(gg){return h_=f_(gg),Pa.format=h_.format,m_=h_.formatPrefix,h_}function pl(gg){if(0<=gg.y&&100>gg.y){var yg=new Date(-1,gg.m,gg.d,gg.H,gg.M,gg.S,gg.L);return yg.setFullYear(gg.y),yg}return new Date(gg.y,gg.m,gg.d,gg.H,gg.M,gg.S,gg.L)}function _l(gg){if(0<=gg.y&&100>gg.y){var yg=new Date(Date.UTC(-1,gg.m,gg.d,gg.H,gg.M,gg.S,gg.L));return yg.setUTCFullYear(gg.y),yg}return new Date(Date.UTC(gg.y,gg.m,gg.d,gg.H,gg.M,gg.S,gg.L))}function hl(gg){return{y:gg,m:0,d:1,H:0,M:0,S:0,L:0}}function ml(gg){function yg(Ng,Og){return function($g){var jg,Vg,Bg,Zg=[],Wg=-1,Rg=0,Gg=Ng.length;for($g instanceof Date||($g=new Date(+$g));++Wg<Gg;)37===Ng.charCodeAt(Wg)&&(Zg.push(Ng.slice(Rg,Wg)),null==(Vg=S_[jg=Ng.charAt(++Wg)])?Vg="e"===jg?" ":"0":jg=Ng.charAt(++Wg),(Bg=Og[jg])&&(jg=Bg($g,Vg)),Zg.push(jg),Rg=Wg+1);return Zg.push(Ng.slice(Rg,Wg)),Zg.join("")}}function fg(Ng,Og){return function($g){var jg=hl(1900);if(xg(jg,Ng,$g+="",0)!=$g.length)return null;if("p"in jg&&(jg.H=jg.H%12+12*jg.p),"W"in jg||"U"in jg){"w"in jg||(jg.w="W"in jg?1:0);var Vg="Z"in jg?_l(hl(jg.y)).getUTCDay():Og(hl(jg.y)).getDay();jg.m=0,jg.d="W"in jg?(jg.w+6)%7+7*jg.W-(Vg+5)%7:jg.w+7*jg.U-(Vg+6)%7}return"Z"in jg?(jg.H+=0|jg.Z/100,jg.M+=jg.Z%100,_l(jg)):Og(jg)}}function xg(Ng,Og,$g,jg){for(var Vg,Bg,Zg=0,Wg=Og.length,Rg=$g.length;Zg<Wg;){if(jg>=Rg)return-1;if(37===(Vg=Og.charCodeAt(Zg++))){if(Vg=Og.charAt(Zg++),!(Bg=Ig[Vg in S_?Og.charAt(Zg++):Vg])||0>(jg=Bg(Ng,$g,jg)))return-1;}else if(Vg!=$g.charCodeAt(jg++))return-1}return jg}var vg=gg.dateTime,bg=gg.date,wg=gg.time,Tg=gg.periods,kg=gg.days,Sg=gg.shortDays,Cg=gg.months,zg=gg.shortMonths,Mg=fl(Tg),Ug=xl(Tg),Ag=fl(kg),Yg=xl(kg),Eg=fl(Sg),Pg=xl(Sg),Dg=fl(Cg),Fg=xl(Cg),Lg=fl(zg),Hg=xl(zg),Xg={a:function(Ng){return Sg[Ng.getDay()]},A:function(Ng){return kg[Ng.getDay()]},b:function(Ng){return zg[Ng.getMonth()]},B:function(Ng){return Cg[Ng.getMonth()]},c:null,d:Dl,e:Dl,H:Fl,I:Ll,j:Hl,L:Xl,m:ql,M:Il,p:function(Ng){return Tg[+(12<=Ng.getHours())]},S:Nl,U:Ol,w:$l,W:jl,x:null,X:null,y:Vl,Y:Bl,Z:Zl,"%":ss},qg={a:function(Ng){return Sg[Ng.getUTCDay()]},A:function(Ng){return kg[Ng.getUTCDay()]},b:function(Ng){return zg[Ng.getUTCMonth()]},B:function(Ng){return Cg[Ng.getUTCMonth()]},c:null,d:Wl,e:Wl,H:Rl,I:Gl,j:Jl,L:Kl,m:Ql,M:es,p:function(Ng){return Tg[+(12<=Ng.getUTCHours())]},S:ts,U:ns,w:os,W:as,x:null,X:null,y:is,Y:ls,Z:rs,"%":ss},Ig={a:function(Ng,Og,$g){var jg=Eg.exec(Og.slice($g));return jg?(Ng.w=Pg[jg[0].toLowerCase()],$g+jg[0].length):-1},A:function(Ng,Og,$g){var jg=Ag.exec(Og.slice($g));return jg?(Ng.w=Yg[jg[0].toLowerCase()],$g+jg[0].length):-1},b:function(Ng,Og,$g){var jg=Lg.exec(Og.slice($g));return jg?(Ng.m=Hg[jg[0].toLowerCase()],$g+jg[0].length):-1},B:function(Ng,Og,$g){var jg=Dg.exec(Og.slice($g));return jg?(Ng.m=Fg[jg[0].toLowerCase()],$g+jg[0].length):-1},c:function(Ng,Og,$g){return xg(Ng,vg,Og,$g)},d:zl,e:zl,H:Ul,I:Ul,j:Ml,L:El,m:Cl,M:Al,p:function(Ng,Og,$g){var jg=Mg.exec(Og.slice($g));return jg?(Ng.p=Ug[jg[0].toLowerCase()],$g+jg[0].length):-1},S:Yl,U:bl,w:vl,W:wl,x:function(Ng,Og,$g){return xg(Ng,bg,Og,$g)},X:function(Ng,Og,$g){return xg(Ng,wg,Og,$g)},y:kl,Y:Tl,Z:Sl,"%":Pl};return Xg.x=yg(bg,Xg),Xg.X=yg(wg,Xg),Xg.c=yg(vg,Xg),qg.x=yg(bg,qg),qg.X=yg(wg,qg),qg.c=yg(vg,qg),{format:function(Ng){var Og=yg(Ng+="",Xg);return Og.toString=function(){return Ng},Og},parse:function(Ng){var Og=fg(Ng+="",pl);return Og.toString=function(){return Ng},Og},utcFormat:function(Ng){var Og=yg(Ng+="",qg);return Og.toString=function(){return Ng},Og},utcParse:function(Ng){var Og=fg(Ng,_l);return Og.toString=function(){return Ng},Og}}}function gl(gg,yg,fg){var xg=0>gg?"-":"",vg=(xg?-gg:gg)+"",bg=vg.length;return xg+(bg<fg?Array(fg-bg+1).join(yg)+vg:vg)}function yl(gg){return gg.replace(M_,"\\$&")}function fl(gg){return new RegExp("^(?:"+gg.map(yl).join("|")+")","i")}function xl(gg){for(var yg={},fg=-1,xg=gg.length;++fg<xg;)yg[gg[fg].toLowerCase()]=fg;return yg}function vl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+1));return xg?(gg.w=+xg[0],fg+xg[0].length):-1}function bl(gg,yg,fg){var xg=C_.exec(yg.slice(fg));return xg?(gg.U=+xg[0],fg+xg[0].length):-1}function wl(gg,yg,fg){var xg=C_.exec(yg.slice(fg));return xg?(gg.W=+xg[0],fg+xg[0].length):-1}function Tl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+4));return xg?(gg.y=+xg[0],fg+xg[0].length):-1}function kl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.y=+xg[0]+(68<+xg[0]?1900:2e3),fg+xg[0].length):-1}function Sl(gg,yg,fg){var xg=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(yg.slice(fg,fg+6));return xg?(gg.Z=xg[1]?0:-(xg[2]+(xg[3]||"00")),fg+xg[0].length):-1}function Cl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.m=xg[0]-1,fg+xg[0].length):-1}function zl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.d=+xg[0],fg+xg[0].length):-1}function Ml(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+3));return xg?(gg.m=0,gg.d=+xg[0],fg+xg[0].length):-1}function Ul(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.H=+xg[0],fg+xg[0].length):-1}function Al(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.M=+xg[0],fg+xg[0].length):-1}function Yl(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+2));return xg?(gg.S=+xg[0],fg+xg[0].length):-1}function El(gg,yg,fg){var xg=C_.exec(yg.slice(fg,fg+3));return xg?(gg.L=+xg[0],fg+xg[0].length):-1}function Pl(gg,yg,fg){var xg=z_.exec(yg.slice(fg,fg+1));return xg?fg+xg[0].length:-1}function Dl(gg,yg){return gl(gg.getDate(),yg,2)}function Fl(gg,yg){return gl(gg.getHours(),yg,2)}function Ll(gg,yg){return gl(gg.getHours()%12||12,yg,2)}function Hl(gg,yg){return gl(1+Jp.count(t_(gg),gg),yg,3)}function Xl(gg,yg){return gl(gg.getMilliseconds(),yg,3)}function ql(gg,yg){return gl(gg.getMonth()+1,yg,2)}function Il(gg,yg){return gl(gg.getMinutes(),yg,2)}function Nl(gg,yg){return gl(gg.getSeconds(),yg,2)}function Ol(gg,yg){return gl(Kp.count(t_(gg),gg),yg,2)}function $l(gg){return gg.getDay()}function jl(gg,yg){return gl(Qp.count(t_(gg),gg),yg,2)}function Vl(gg,yg){return gl(gg.getFullYear()%100,yg,2)}function Bl(gg,yg){return gl(gg.getFullYear()%1e4,yg,4)}function Zl(gg){var yg=gg.getTimezoneOffset();return(0<yg?"-":(yg*=-1,"+"))+gl(0|yg/60,"0",2)+gl(yg%60,"0",2)}function Wl(gg,yg){return gl(gg.getUTCDate(),yg,2)}function Rl(gg,yg){return gl(gg.getUTCHours(),yg,2)}function Gl(gg,yg){return gl(gg.getUTCHours()%12||12,yg,2)}function Jl(gg,yg){return gl(1+n_.count(i_(gg),gg),yg,3)}function Kl(gg,yg){return gl(gg.getUTCMilliseconds(),yg,3)}function Ql(gg,yg){return gl(gg.getUTCMonth()+1,yg,2)}function es(gg,yg){return gl(gg.getUTCMinutes(),yg,2)}function ts(gg,yg){return gl(gg.getUTCSeconds(),yg,2)}function ns(gg,yg){return gl(o_.count(i_(gg),gg),yg,2)}function os(gg){return gg.getUTCDay()}function as(gg,yg){return gl(a_.count(i_(gg),gg),yg,2)}function is(gg,yg){return gl(gg.getUTCFullYear()%100,yg,2)}function ls(gg,yg){return gl(gg.getUTCFullYear()%1e4,yg,4)}function rs(){return"+0000"}function ss(){return"%"}function ds(gg){return x_=ml(gg),Pa.timeFormat=x_.format,Pa.timeParse=x_.parse,v_=x_.utcFormat,b_=x_.utcParse,x_}function cs(){}function us(gg,yg){var fg=new cs;if(gg instanceof cs)gg.each(function(Tg,kg){fg.set(kg,Tg)});else if(Array.isArray(gg)){var xg,vg=-1,bg=gg.length;if(null==yg)for(;++vg<bg;)fg.set(vg,gg[vg]);else for(;++vg<bg;)fg.set(yg(xg=gg[vg],vg,gg),xg)}else if(gg)for(var wg in gg)fg.set(wg,gg[wg]);return fg}function ps(){}function _s(gg,yg){var fg=Object.create(gg.prototype);for(var xg in yg)fg[xg]=yg[xg];return fg}function hs(){}function ms(gg){var yg;return gg=(gg+"").trim().toLowerCase(),(yg=H_.exec(gg))?(yg=parseInt(yg[1],16),new vs(15&yg>>8|240&yg>>4,15&yg>>4|240&yg,(15&yg)<<4|15&yg,1)):(yg=X_.exec(gg))?gs(parseInt(yg[1],16)):(yg=q_.exec(gg))?new vs(yg[1],yg[2],yg[3],1):(yg=I_.exec(gg))?new vs(255*yg[1]/100,255*yg[2]/100,255*yg[3]/100,1):(yg=N_.exec(gg))?ys(yg[1],yg[2],yg[3],yg[4]):(yg=O_.exec(gg))?ys(255*yg[1]/100,255*yg[2]/100,255*yg[3]/100,yg[4]):(yg=$_.exec(gg))?bs(yg[1],yg[2]/100,yg[3]/100,1):(yg=j_.exec(gg))?bs(yg[1],yg[2]/100,yg[3]/100,yg[4]):V_.hasOwnProperty(gg)?gs(V_[gg]):"transparent"===gg?new vs(NaN,NaN,NaN,0):null}function gs(gg){return new vs(255&gg>>16,255&gg>>8,255&gg,1)}function ys(gg,yg,fg,xg){return 0>=xg&&(gg=yg=fg=NaN),new vs(gg,yg,fg,xg)}function fs(gg){return gg instanceof hs||(gg=ms(gg)),gg?(gg=gg.rgb(),new vs(gg.r,gg.g,gg.b,gg.opacity)):new vs}function xs(gg,yg,fg,xg){return 1===arguments.length?fs(gg):new vs(gg,yg,fg,null==xg?1:xg)}function vs(gg,yg,fg,xg){this.r=+gg,this.g=+yg,this.b=+fg,this.opacity=+xg}function bs(gg,yg,fg,xg){return 0>=xg?gg=yg=fg=NaN:0>=fg||1<=fg?gg=yg=NaN:0>=yg&&(gg=NaN),new Ts(gg,yg,fg,xg)}function ws(gg){if(gg instanceof Ts)return new Ts(gg.h,gg.s,gg.l,gg.opacity);if(gg instanceof hs||(gg=ms(gg)),!gg)return new Ts;if(gg instanceof Ts)return gg;var yg=(gg=gg.rgb()).r/255,fg=gg.g/255,xg=gg.b/255,vg=Math.min(yg,fg,xg),bg=Math.max(yg,fg,xg),wg=NaN,Tg=bg-vg,kg=(bg+vg)/2;return Tg?(wg=yg===bg?(fg-xg)/Tg+6*(fg<xg):fg===bg?(xg-yg)/Tg+2:(yg-fg)/Tg+4,Tg/=.5>kg?bg+vg:2-bg-vg,wg*=60):Tg=0<kg&&1>kg?0:wg,new Ts(wg,Tg,kg,gg.opacity)}function Ts(gg,yg,fg,xg){this.h=+gg,this.s=+yg,this.l=+fg,this.opacity=+xg}function ks(gg,yg,fg){return 255*(60>gg?yg+(fg-yg)*gg/60:180>gg?fg:240>gg?yg+(fg-yg)*(240-gg)/60:yg)}function Ss(gg){if(gg instanceof Cs)return new Cs(gg.l,gg.a,gg.b,gg.opacity);if(gg instanceof Es){var yg=gg.h*B_;return new Cs(gg.l,Math.cos(yg)*gg.c,Math.sin(yg)*gg.c,gg.opacity)}gg instanceof vs||(gg=fs(gg));var fg=As(gg.r),xg=As(gg.g),vg=As(gg.b),bg=zs((.4124564*fg+.3575761*xg+.1804375*vg)/W_),wg=zs((.2126729*fg+.7151522*xg+.072175*vg)/R_);return new Cs(116*wg-16,500*(bg-wg),200*(wg-zs((.0193339*fg+.119192*xg+.9503041*vg)/G_)),gg.opacity)}function Cs(gg,yg,fg,xg){this.l=+gg,this.a=+yg,this.b=+fg,this.opacity=+xg}function zs(gg){return gg>eh?Math.pow(gg,1/3):gg/Q_+J_}function Ms(gg){return gg>K_?gg*gg*gg:Q_*(gg-J_)}function Us(gg){return 255*(.0031308>=gg?12.92*gg:1.055*Math.pow(gg,1/2.4)-.055)}function As(gg){return .04045>=(gg/=255)?gg/12.92:Math.pow((gg+.055)/1.055,2.4)}function Ys(gg){if(gg instanceof Es)return new Es(gg.h,gg.c,gg.l,gg.opacity);gg instanceof Cs||(gg=Ss(gg));var yg=Math.atan2(gg.b,gg.a)*Z_;return new Es(0>yg?yg+360:yg,Math.sqrt(gg.a*gg.a+gg.b*gg.b),gg.l,gg.opacity)}function Es(gg,yg,fg,xg){this.h=+gg,this.c=+yg,this.l=+fg,this.opacity=+xg}function Ps(gg){if(gg instanceof Fs)return new Fs(gg.h,gg.s,gg.l,gg.opacity);gg instanceof vs||(gg=fs(gg));var yg=gg.r/255,fg=gg.g/255,xg=gg.b/255,vg=(sh*xg+lh*yg-rh*fg)/(sh+lh-rh),bg=xg-vg,wg=(ih*(fg-vg)-oh*bg)/ah,Tg=Math.sqrt(wg*wg+bg*bg)/(ih*vg*(1-vg)),kg=Tg?Math.atan2(wg,bg)*Z_-120:NaN;return new Fs(0>kg?kg+360:kg,Tg,vg,gg.opacity)}function Ds(gg,yg,fg,xg){return 1===arguments.length?Ps(gg):new Fs(gg,yg,fg,null==xg?1:xg)}function Fs(gg,yg,fg,xg){this.h=+gg,this.s=+yg,this.l=+fg,this.opacity=+xg}function Ls(gg,yg){return function(fg){return gg+fg*yg}}function Hs(gg,yg,fg){return gg=Math.pow(gg,fg),yg=Math.pow(yg,fg)-gg,fg=1/fg,function(xg){return Math.pow(gg+xg*yg,fg)}}function Xs(gg){return 1==(gg=+gg)?qs:function(yg,fg){return fg-yg?Hs(yg,fg,gg):_h(isNaN(yg)?fg:yg)}}function qs(gg,yg){var fg=yg-gg;return fg?Ls(gg,fg):_h(isNaN(gg)?yg:gg)}function Is(gg){return function(){return gg}}function Ns(gg){return function(yg){return gg(yg)+""}}function Os(gg,yg,fg,xg){function vg(Sg){return Sg.length?Sg.pop()+" ":""}function bg(Sg,Cg,zg,Mg,Ug,Ag){if(Sg!==zg||Cg!==Mg){var Yg=Ug.push("translate(",null,yg,null,fg);Ag.push({i:Yg-4,x:yh(Sg,zg)},{i:Yg-2,x:yh(Cg,Mg)})}else(zg||Mg)&&Ug.push("translate("+zg+yg+Mg+fg)}function wg(Sg,Cg,zg,Mg){Sg===Cg?Cg&&zg.push(vg(zg)+"rotate("+Cg+xg):(180<Sg-Cg?Cg+=360:180<Cg-Sg&&(Sg+=360),Mg.push({i:zg.push(vg(zg)+"rotate(",null,xg)-2,x:yh(Sg,Cg)}))}function Tg(Sg,Cg,zg,Mg){Sg===Cg?Cg&&zg.push(vg(zg)+"skewX("+Cg+xg):Mg.push({i:zg.push(vg(zg)+"skewX(",null,xg)-2,x:yh(Sg,Cg)})}function kg(Sg,Cg,zg,Mg,Ug,Ag){if(Sg!==zg||Cg!==Mg){var Yg=Ug.push(vg(Ug)+"scale(",null,",",null,")");Ag.push({i:Yg-4,x:yh(Sg,zg)},{i:Yg-2,x:yh(Cg,Mg)})}else 1===zg&&1===Mg||Ug.push(vg(Ug)+"scale("+zg+","+Mg+")")}return function(Sg,Cg){var zg=[],Mg=[];return Sg=gg(Sg),Cg=gg(Cg),bg(Sg.translateX,Sg.translateY,Cg.translateX,Cg.translateY,zg,Mg),wg(Sg.rotate,Cg.rotate,zg,Mg),Tg(Sg.skewX,Cg.skewX,zg,Mg),kg(Sg.scaleX,Sg.scaleY,Cg.scaleX,Cg.scaleY,zg,Mg),Sg=Cg=null,function(Ug){for(var Ag,Yg=-1,Eg=Mg.length;++Yg<Eg;)zg[(Ag=Mg[Yg]).i]=Ag.x(Ug);return zg.join("")}}}function $s(gg){return((gg=Math.exp(gg))+1/gg)/2}function js(gg){return((gg=Math.exp(gg))-1/gg)/2}function Vs(gg){return((gg=Math.exp(2*gg))-1)/(gg+1)}function Bs(gg){return function yg(fg){function xg(vg,bg){var wg=gg((vg=Ds(vg)).h,(bg=Ds(bg)).h),Tg=qs(vg.s,bg.s),kg=qs(vg.l,bg.l),Sg=qs(vg.opacity,bg.opacity);return function(Cg){return vg.h=wg(Cg),vg.s=Tg(Cg),vg.l=kg(Math.pow(Cg,fg)),vg.opacity=Sg(Cg),vg+""}}return fg=+fg,xg.gamma=yg,xg}(1)}function Zs(gg,yg){return(yg-=gg=+gg)?function(fg){return(fg-gg)/yg}:Eh(yg)}function Ws(gg){return function(yg,fg){var xg=gg(yg=+yg,fg=+fg);return function(vg){return vg<=yg?0:vg>=fg?1:xg(vg)}}}function Rs(gg){return function(yg,fg){var xg=gg(yg=+yg,fg=+fg);return function(vg){return 0>=vg?yg:1<=vg?fg:xg(vg)}}}function Gs(gg,yg,fg,xg){var vg=gg[0],bg=gg[1],wg=yg[0],Tg=yg[1];return bg<vg?(vg=fg(bg,vg),wg=xg(Tg,wg)):(vg=fg(vg,bg),wg=xg(wg,Tg)),function(kg){return wg(vg(kg))}}function Js(gg,yg,fg,xg){var vg=Math.min(gg.length,yg.length)-1,bg=Array(vg),wg=Array(vg),Tg=-1;for(gg[vg]<gg[0]&&(gg=gg.slice().reverse(),yg=yg.slice().reverse());++Tg<vg;)bg[Tg]=fg(gg[Tg],gg[Tg+1]),wg[Tg]=xg(yg[Tg],yg[Tg+1]);return function(kg){var Sg=Up(gg,kg,1,vg)-1;return wg[Sg](bg[Sg](kg))}}function Ks(gg,yg){return yg.domain(gg.domain()).range(gg.range()).interpolate(gg.interpolate()).clamp(gg.clamp())}function Qs(gg,yg){function fg(){return vg=2<Math.min(Tg.length,kg.length)?Js:Gs,bg=wg=null,xg}function xg(zg){return(bg||(bg=vg(Tg,kg,Cg?Ws(gg):gg,Sg)))(+zg)}var vg,bg,wg,Tg=Dh,kg=Dh,Sg=wh,Cg=!1;return xg.invert=function(zg){return(wg||(wg=vg(kg,Tg,Zs,Cg?Rs(yg):yg)))(+zg)},xg.domain=function(zg){return arguments.length?(Tg=Y_.call(zg,Ph),fg()):Tg.slice()},xg.range=function(zg){return arguments.length?(kg=E_.call(zg),fg()):kg.slice()},xg.rangeRound=function(zg){return kg=E_.call(zg),Sg=Th,fg()},xg.clamp=function(zg){return arguments.length?(Cg=!!zg,fg()):Cg},xg.interpolate=function(zg){return arguments.length?(Sg=zg,fg()):Sg},fg()}function ed(gg){var yg=gg.domain;return gg.ticks=function(fg){var xg=yg();return Pp(xg[0],xg[xg.length-1],null==fg?10:fg)},gg.tickFormat=function(fg,xg){return Fh(yg(),fg,xg)},gg.nice=function(fg){null==fg&&(fg=10);var xg,vg=yg(),bg=0,wg=vg.length-1,Tg=vg[bg],kg=vg[wg];return kg<Tg&&(xg=Tg,Tg=kg,kg=xg,xg=bg,bg=wg,wg=xg),0<(xg=Ha(Tg,kg,fg))?xg=Ha(Tg=Math.floor(Tg/xg)*xg,kg=Math.ceil(kg/xg)*xg,fg):0>xg&&(xg=Ha(Tg=Math.ceil(Tg*xg)/xg,kg=Math.floor(kg*xg)/xg,fg)),0<xg?(vg[bg]=Math.floor(Tg/xg)*xg,vg[wg]=Math.ceil(kg/xg)*xg,yg(vg)):0>xg&&(vg[bg]=Math.ceil(Tg*xg)/xg,vg[wg]=Math.floor(kg*xg)/xg,yg(vg)),gg},gg}function td(){var gg=Qs(Zs,yh);return gg.copy=function(){return Ks(gg,td())},ed(gg)}function nd(gg,yg){return(yg=Math.log(yg/gg))?function(fg){return Math.log(fg/gg)/yg}:Eh(yg)}function od(gg,yg){return 0>gg?function(fg){return-Math.pow(-yg,fg)*Math.pow(-gg,1-fg)}:function(fg){return Math.pow(yg,fg)*Math.pow(gg,1-fg)}}function ad(gg){return isFinite(gg)?+("1e"+gg):0>gg?0:gg}function id(gg){return 10===gg?ad:gg===Math.E?Math.exp:function(yg){return Math.pow(gg,yg)}}function ld(gg){return gg===Math.E?Math.log:10===gg&&Math.log10||2===gg&&Math.log2||(gg=Math.log(gg),function(yg){return Math.log(yg)/gg})}function rd(gg){return function(yg){return-gg(-yg)}}function sd(){function gg(){return vg=ld(xg),bg=id(xg),0>fg()[0]&&(vg=rd(vg),bg=rd(bg)),yg}var yg=Qs(nd,od).domain([1,10]),fg=yg.domain,xg=10,vg=ld(10),bg=id(10);return yg.base=function(wg){return arguments.length?(xg=+wg,gg()):xg},yg.domain=function(wg){return arguments.length?(fg(wg),gg()):fg()},yg.ticks=function(wg){var Tg,kg=fg(),Sg=kg[0],Cg=kg[kg.length-1];(Tg=Cg<Sg)&&(Ag=Sg,Sg=Cg,Cg=Ag);var zg,Mg,Ug,Ag=vg(Sg),Yg=vg(Cg),Eg=null==wg?10:+wg,Pg=[];if(!(!(xg%1)&&Yg-Ag<Eg))Pg=Pp(Ag,Yg,Math.min(Yg-Ag,Eg)).map(bg);else if(Ag=Math.round(Ag)-1,Yg=Math.round(Yg)+1,0<Sg){for(;Ag<Yg;++Ag)for(Mg=1,zg=bg(Ag);Mg<xg;++Mg)if(!((Ug=zg*Mg)<Sg)){if(Ug>Cg)break;Pg.push(Ug)}}else for(;Ag<Yg;++Ag)for(Mg=xg-1,zg=bg(Ag);1<=Mg;--Mg)if(!((Ug=zg*Mg)<Sg)){if(Ug>Cg)break;Pg.push(Ug)}return Tg?Pg.reverse():Pg},yg.tickFormat=function(wg,Tg){if(null==Tg&&(Tg=10===xg?".0e":","),"function"!=typeof Tg&&(Tg=Pa.format(Tg)),wg===1/0)return Tg;null==wg&&(wg=10);var kg=Math.max(1,xg*wg/yg.ticks().length);return function(Sg){var Cg=Sg/bg(Math.round(vg(Sg)));return Cg*xg<xg-.5&&(Cg*=xg),Cg<=kg?Tg(Sg):""}},yg.nice=function(){return fg(Lh(fg(),{floor:function(wg){return bg(Math.floor(vg(wg)))},ceil:function(wg){return bg(Math.ceil(vg(wg)))}}))},yg.copy=function(){return Ks(yg,sd().base(xg))},yg}function dd(gg,yg){return 0>gg?-Math.pow(-gg,yg):Math.pow(gg,yg)}function cd(){var gg=1,yg=Qs(function(xg,vg){return(vg=dd(vg,gg)-(xg=dd(xg,gg)))?function(bg){return(dd(bg,gg)-xg)/vg}:Eh(vg)},function(xg,vg){return vg=dd(vg,gg)-(xg=dd(xg,gg)),function(bg){return dd(xg+vg*bg,1/gg)}}),fg=yg.domain;return yg.exponent=function(xg){return arguments.length?(gg=+xg,fg(fg())):gg},yg.copy=function(){return Ks(yg,cd().exponent(gg))},ed(yg)}function ud(gg){return new Date(gg)}function pd(gg){return gg instanceof Date?+gg:+new Date(+gg)}function _d(gg,yg,fg,xg,vg,bg,wg,Tg,kg){function Sg(qg){return(wg(qg)<qg?Ag:bg(qg)<qg?Yg:vg(qg)<qg?Eg:xg(qg)<qg?Pg:yg(qg)<qg?fg(qg)<qg?Dg:Fg:gg(qg)<qg?Lg:Hg)(qg)}function Cg(qg,Ig,Ng,Og){if(null==qg&&(qg=10),"number"==typeof qg){var $g=Math.abs(Ng-Ig)/qg,jg=Mp(function(Vg){return Vg[2]}).right(Xg,$g);jg===Xg.length?(Og=Xa(Ig/$h,Ng/$h,qg),qg=gg):jg?(Og=(jg=Xg[$g/Xg[jg-1][2]<Xg[jg][2]/$g?jg-1:jg])[1],qg=jg[0]):(Og=Xa(Ig,Ng,qg),qg=Tg)}return null==Og?qg:qg.every(Og)}var zg=Qs(Zs,yh),Mg=zg.invert,Ug=zg.domain,Ag=kg(".%L"),Yg=kg(":%S"),Eg=kg("%I:%M"),Pg=kg("%I %p"),Dg=kg("%a %d"),Fg=kg("%b %d"),Lg=kg("%B"),Hg=kg("%Y"),Xg=[[wg,1,Hh],[wg,5,5*Hh],[wg,15,15*Hh],[wg,30,30*Hh],[bg,1,Xh],[bg,5,5*Xh],[bg,15,15*Xh],[bg,30,30*Xh],[vg,1,qh],[vg,3,3*qh],[vg,6,6*qh],[vg,12,12*qh],[xg,1,Ih],[xg,2,2*Ih],[fg,1,Nh],[yg,1,Oh],[yg,3,3*Oh],[gg,1,$h]];return zg.invert=function(qg){return new Date(Mg(qg))},zg.domain=function(qg){return arguments.length?Ug(Y_.call(qg,pd)):Ug().map(ud)},zg.ticks=function(qg,Ig){var Ng,Og=Ug(),$g=Og[0],jg=Og[Og.length-1],Vg=jg<$g;return Vg&&(Ng=$g,$g=jg,jg=Ng),Ng=Cg(qg,$g,jg,Ig),Ng=Ng?Ng.range($g,jg+1):[],Vg?Ng.reverse():Ng},zg.tickFormat=function(qg,Ig){return null==Ig?Sg:kg(Ig)},zg.nice=function(qg,Ig){var Ng=Ug();return(qg=Cg(qg,Ng[0],Ng[Ng.length-1],Ig))?Ug(Lh(Ng,qg)):zg},zg.copy=function(){return Ks(zg,_d(gg,yg,fg,xg,vg,bg,wg,Tg,kg))},zg}function hd(gg){return"translate("+(gg+.5)+",0)"}function md(gg){return"translate(0,"+(gg+.5)+")"}function gd(gg){var yg=Math.max(0,gg.bandwidth()-1)/2;return gg.round()&&(yg=Math.round(yg)),function(fg){return gg(fg)+yg}}function yd(){return!this.__axis}function fd(gg,yg){function fg(Mg){var Ug=null==vg?yg.ticks?yg.ticks.apply(yg,xg):yg.domain():vg,Ag=null==bg?yg.tickFormat?yg.tickFormat.apply(yg,xg):Bh:bg,Yg=Math.max(wg,0)+kg,Eg=yg.range(),Pg=Eg[0]+.5,Dg=Eg[Eg.length-1]+.5,Fg=(yg.bandwidth?gd:Bh)(yg.copy()),Lg=Mg.selection?Mg.selection():Mg,Hg=Lg.selectAll(".domain").data([null]),Xg=Lg.selectAll(".tick").data(Ug,yg).order(),qg=Xg.exit(),Ig=Xg.enter().append("g").attr("class","tick"),Ng=Xg.select("line"),Og=Xg.select("text");Hg=Hg.merge(Hg.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Xg=Xg.merge(Ig),Ng=Ng.merge(Ig.append("line").attr("stroke","#000").attr(Cg+"2",Sg*wg)),Og=Og.merge(Ig.append("text").attr("fill","#000").attr(Cg,Sg*Yg).attr("dy",gg===Zh?"0em":gg===Rh?"0.71em":"0.32em")),Mg!==Lg&&(Hg=Hg.transition(Mg),Xg=Xg.transition(Mg),Ng=Ng.transition(Mg),Og=Og.transition(Mg),qg=qg.transition(Mg).attr("opacity",Jh).attr("transform",function($g){return isFinite($g=Fg($g))?zg($g):this.getAttribute("transform")}),Ig.attr("opacity",Jh).attr("transform",function($g){var jg=this.parentNode.__axis;return zg(jg&&isFinite(jg=jg($g))?jg:Fg($g))})),qg.remove(),Hg.attr("d",gg===Gh||gg==Wh?"M"+Sg*Tg+","+Pg+"H0.5V"+Dg+"H"+Sg*Tg:"M"+Pg+","+Sg*Tg+"V0.5H"+Dg+"V"+Sg*Tg),Xg.attr("opacity",1).attr("transform",function($g){return zg(Fg($g))}),Ng.attr(Cg+"2",Sg*wg),Og.attr(Cg,Sg*Yg).text(Ag),Lg.filter(yd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",gg===Wh?"start":gg===Gh?"end":"middle"),Lg.each(function(){this.__axis=Fg})}var xg=[],vg=null,bg=null,wg=6,Tg=6,kg=3,Sg=gg===Zh||gg===Gh?-1:1,Cg=gg===Gh||gg===Wh?"x":"y",zg=gg===Zh||gg===Rh?hd:md;return fg.scale=function(Mg){return arguments.length?(yg=Mg,fg):yg},fg.ticks=function(){return xg=Vh.call(arguments),fg},fg.tickArguments=function(Mg){return arguments.length?(xg=null==Mg?[]:Vh.call(Mg),fg):xg.slice()},fg.tickValues=function(Mg){return arguments.length?(vg=null==Mg?null:Vh.call(Mg),fg):vg&&vg.slice()},fg.tickFormat=function(Mg){return arguments.length?(bg=Mg,fg):bg},fg.tickSize=function(Mg){return arguments.length?(wg=Tg=+Mg,fg):wg},fg.tickSizeInner=function(Mg){return arguments.length?(wg=+Mg,fg):wg},fg.tickSizeOuter=function(Mg){return arguments.length?(Tg=+Mg,fg):Tg},fg.tickPadding=function(Mg){return arguments.length?(kg=+Mg,fg):kg},fg}function xd(){for(var gg,yg=0,fg=arguments.length,xg={};yg<fg;++yg){if(!(gg=arguments[yg]+"")||gg in xg)throw new Error("illegal type: "+gg);xg[gg]=[]}return new vd(xg)}function vd(gg){this._=gg}function bd(gg,yg){return gg.trim().split(/^|\s+/).map(function(fg){var xg="",vg=fg.indexOf(".");if(0<=vg&&(xg=fg.slice(vg+1),fg=fg.slice(0,vg)),fg&&!yg.hasOwnProperty(fg))throw new Error("unknown type: "+fg);return{type:fg,name:xg}})}function wd(gg,yg){for(var fg,xg=0,vg=gg.length;xg<vg;++xg)if((fg=gg[xg]).name===yg)return fg.value}function Td(gg,yg,fg){for(var xg=0,vg=gg.length;xg<vg;++xg)if(gg[xg].name===yg){gg[xg]=Kh,gg=gg.slice(0,xg).concat(gg.slice(xg+1));break}return null!=fg&&gg.push({name:yg,value:fg}),gg}function kd(gg){return function(){var yg=this.ownerDocument,fg=this.namespaceURI;return fg===Qh&&yg.documentElement.namespaceURI===Qh?yg.createElement(gg):yg.createElementNS(fg,gg)}}function Sd(gg){return function(){return this.ownerDocument.createElementNS(gg.space,gg.local)}}function Cd(gg,yg,fg){return gg=zd(gg,yg,fg),function(xg){var vg=xg.relatedTarget;vg&&(vg===this||8&vg.compareDocumentPosition(this))||gg.call(this,xg)}}function zd(gg,yg,fg){return function(xg){var vg=Pa.event;Pa.event=xg;try{gg.call(this,this.__data__,yg,fg)}finally{Pa.event=vg}}}function Md(gg){return gg.trim().split(/^|\s+/).map(function(yg){var fg="",xg=yg.indexOf(".");return 0<=xg&&(fg=yg.slice(xg+1),yg=yg.slice(0,xg)),{type:yg,name:fg}})}function Ud(gg){return function(){var yg=this.__on;if(yg){for(var fg,xg=0,vg=-1,bg=yg.length;xg<bg;++xg)fg=yg[xg],gg.type&&fg.type!==gg.type||fg.name!==gg.name?yg[++vg]=fg:this.removeEventListener(fg.type,fg.listener,fg.capture);++vg?yg.length=vg:delete this.__on}}}function Ad(gg,yg,fg){var xg=rm.hasOwnProperty(gg.type)?Cd:zd;return function(vg,bg,wg){var Tg,kg=this.__on,Sg=xg(yg,bg,wg);if(kg)for(var Cg=0,zg=kg.length;Cg<zg;++Cg)if((Tg=kg[Cg]).type===gg.type&&Tg.name===gg.name)return this.removeEventListener(Tg.type,Tg.listener,Tg.capture),this.addEventListener(Tg.type,Tg.listener=Sg,Tg.capture=fg),void(Tg.value=yg);this.addEventListener(gg.type,Sg,fg),Tg={type:gg.type,name:gg.name,value:yg,listener:Sg,capture:fg},kg?kg.push(Tg):this.__on=[Tg]}}function Yd(gg,yg,fg,xg){var vg=Pa.event;gg.sourceEvent=Pa.event,Pa.event=gg;try{return yg.apply(fg,xg)}finally{Pa.event=vg}}function Ed(){}function Pd(){return[]}function Dd(gg,yg){this.ownerDocument=gg.ownerDocument,this.namespaceURI=gg.namespaceURI,this._next=null,this._parent=gg,this.__data__=yg}function Fd(gg,yg,fg,xg,vg,bg){for(var wg,Tg=0,kg=yg.length,Sg=bg.length;Tg<Sg;++Tg)(wg=yg[Tg])?(wg.__data__=bg[Tg],xg[Tg]=wg):fg[Tg]=new Dd(gg,bg[Tg]);for(;Tg<kg;++Tg)(wg=yg[Tg])&&(vg[Tg]=wg)}function Ld(gg,yg,fg,xg,vg,bg,wg){var Tg,kg,Sg,Cg={},zg=yg.length,Mg=bg.length,Ug=Array(zg);for(Tg=0;Tg<zg;++Tg)(kg=yg[Tg])&&(Ug[Tg]=Sg=mm+wg.call(kg,kg.__data__,Tg,yg),Sg in Cg?vg[Tg]=kg:Cg[Sg]=kg);for(Tg=0;Tg<Mg;++Tg)(kg=Cg[Sg=mm+wg.call(gg,bg[Tg],Tg,bg)])?(xg[Tg]=kg,kg.__data__=bg[Tg],Cg[Sg]=null):fg[Tg]=new Dd(gg,bg[Tg]);for(Tg=0;Tg<zg;++Tg)(kg=yg[Tg])&&Cg[Ug[Tg]]===kg&&(vg[Tg]=kg)}function Hd(gg,yg){return gg<yg?-1:gg>yg?1:gg>=yg?0:NaN}function Xd(gg){return function(){this.removeAttribute(gg)}}function qd(gg){return function(){this.removeAttributeNS(gg.space,gg.local)}}function Id(gg,yg){return function(){this.setAttribute(gg,yg)}}function Nd(gg,yg){return function(){this.setAttributeNS(gg.space,gg.local,yg)}}function Od(gg,yg){return function(){var fg=yg.apply(this,arguments);null==fg?this.removeAttribute(gg):this.setAttribute(gg,fg)}}function $d(gg,yg){return function(){var fg=yg.apply(this,arguments);null==fg?this.removeAttributeNS(gg.space,gg.local):this.setAttributeNS(gg.space,gg.local,fg)}}function jd(gg){return function(){this.style.removeProperty(gg)}}function Vd(gg,yg,fg){return function(){this.style.setProperty(gg,yg,fg)}}function Bd(gg,yg,fg){return function(){var xg=yg.apply(this,arguments);null==xg?this.style.removeProperty(gg):this.style.setProperty(gg,xg,fg)}}function Zd(gg,yg){return gg.style.getPropertyValue(yg)||gm(gg).getComputedStyle(gg,null).getPropertyValue(yg)}function Wd(gg){return function(){delete this[gg]}}function Rd(gg,yg){return function(){this[gg]=yg}}function Gd(gg,yg){return function(){var fg=yg.apply(this,arguments);null==fg?delete this[gg]:this[gg]=fg}}function Jd(gg){return gg.trim().split(/^|\s+/)}function Kd(gg){return gg.classList||new Qd(gg)}function Qd(gg){this._node=gg,this._names=Jd(gg.getAttribute("class")||"")}function ec(gg,yg){for(var fg=Kd(gg),xg=-1,vg=yg.length;++xg<vg;)fg.add(yg[xg])}function tc(gg,yg){for(var fg=Kd(gg),xg=-1,vg=yg.length;++xg<vg;)fg.remove(yg[xg])}function nc(gg){return function(){ec(this,gg)}}function oc(gg){return function(){tc(this,gg)}}function ac(gg,yg){return function(){(yg.apply(this,arguments)?ec:tc)(this,gg)}}function ic(){this.textContent=""}function lc(gg){return function(){this.textContent=gg}}function rc(gg){return function(){var yg=gg.apply(this,arguments);this.textContent=null==yg?"":yg}}function sc(){this.innerHTML=""}function dc(gg){return function(){this.innerHTML=gg}}function cc(gg){return function(){var yg=gg.apply(this,arguments);this.innerHTML=null==yg?"":yg}}function uc(){this.nextSibling&&this.parentNode.appendChild(this)}function pc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _c(){return null}function hc(){var gg=this.parentNode;gg&&gg.removeChild(this)}function mc(gg,yg,fg){var xg=gm(gg),vg=xg.CustomEvent;"function"==typeof vg?vg=new vg(yg,fg):(vg=xg.document.createEvent("Event"),fg?(vg.initEvent(yg,fg.bubbles,fg.cancelable),vg.detail=fg.detail):vg.initEvent(yg,!1,!1)),gg.dispatchEvent(vg)}function gc(gg,yg){return function(){return mc(this,gg,yg)}}function yc(gg,yg){return function(){return mc(this,gg,yg.apply(this,arguments))}}function fc(gg,yg){this._groups=gg,this._parents=yg}function xc(){return new fc([[document.documentElement]],ym)}function vc(){Pa.event.stopImmediatePropagation()}function bc(gg,yg){var fg=gg.document.documentElement,xg=fm(gg).on("dragstart.drag",null);yg&&(xg.on("click.drag",vm,!0),setTimeout(function(){xg.on("click.drag",null)},0)),"onselectstart"in fg?xg.on("selectstart.drag",null):(fg.style.MozUserSelect=fg.__noselect,delete fg.__noselect)}function wc(gg,yg,fg,xg,vg,bg,wg,Tg,kg,Sg){this.target=gg,this.type=yg,this.subject=fg,this.identifier=xg,this.active=vg,this.x=bg,this.y=wg,this.dx=Tg,this.dy=kg,this._=Sg}function Tc(){return!Pa.event.button}function kc(){return this.parentNode}function Sc(gg){return null==gg?{x:Pa.event.x,y:Pa.event.y}:gg}function Cc(){return Am||(Pm(zc),Am=Em.now()+Ym)}function zc(){Am=0}function Mc(){this._call=this._time=this._next=null}function Uc(gg,yg,fg){var xg=new Mc;return xg.restart(gg,yg,fg),xg}function Ac(){Cc(),++Sm;for(var gg,yg=Tm;yg;)0<=(gg=Am-yg._time)&&yg._call.call(null,gg),yg=yg._next;--Sm}function Yc(){Am=(Um=Em.now())+Ym,Sm=Cm=0;try{Ac()}finally{Sm=0,Pc(),Am=0}}function Ec(){var gg=Em.now(),yg=gg-Um;yg>Mm&&(Ym-=yg,Um=gg)}function Pc(){for(var gg,yg,fg=Tm,xg=1/0;fg;)fg._call?(xg>fg._time&&(xg=fg._time),gg=fg,fg=fg._next):(yg=fg._next,fg._next=null,fg=gg?gg._next=yg:Tm=yg);km=gg,Dc(xg)}function Dc(gg){if(!Sm){Cm&&(Cm=clearTimeout(Cm));var yg=gg-Am;24<yg?(gg<1/0&&(Cm=setTimeout(Yc,yg)),zm&&(zm=clearInterval(zm))):(zm||(Um=Am,zm=setInterval(Ec,Mm)),Sm=1,Pm(Yc))}}function Fc(gg,yg){var fg=gg.__transition;if(!fg||!(fg=fg[yg])||fg.state>Hm)throw new Error("too late");return fg}function Lc(gg,yg){var fg=gg.__transition;if(!fg||!(fg=fg[yg])||fg.state>qm)throw new Error("too late");return fg}function Hc(gg,yg){var fg=gg.__transition;if(!fg||!(fg=fg[yg]))throw new Error("too late");return fg}function Xc(gg,yg,fg){function xg(kg){var Sg,Cg,zg,Mg;if(fg.state!==Xm)return bg();for(Sg in Tg)if((Mg=Tg[Sg]).name===fg.name){if(Mg.state===Im)return Dm(xg);Mg.state===Nm?(Mg.state=$m,Mg.timer.stop(),Mg.on.call("interrupt",gg,gg.__data__,Mg.index,Mg.group),delete Tg[Sg]):+Sg<yg&&(Mg.state=$m,Mg.timer.stop(),delete Tg[Sg])}if(Dm(function(){fg.state===Im&&(fg.state=Nm,fg.timer.restart(vg,fg.delay,fg.time),vg(kg))}),fg.state=qm,fg.on.call("start",gg,gg.__data__,fg.index,fg.group),fg.state===qm){for(fg.state=Im,wg=Array(zg=fg.tween.length),Sg=0,Cg=-1;Sg<zg;++Sg)(Mg=fg.tween[Sg].value.call(gg,gg.__data__,fg.index,fg.group))&&(wg[++Cg]=Mg);wg.length=Cg+1}}function vg(kg){for(var Sg=kg<fg.duration?fg.ease.call(null,kg/fg.duration):(fg.timer.restart(bg),fg.state=Om,1),Cg=-1,zg=wg.length;++Cg<zg;)wg[Cg].call(null,Sg);fg.state===Om&&(fg.on.call("end",gg,gg.__data__,fg.index,fg.group),bg())}function bg(){for(var kg in fg.state=$m,fg.timer.stop(),delete Tg[yg],Tg)return;delete gg.__transition}var wg,Tg=gg.__transition;Tg[yg]=fg,fg.timer=Uc(function(kg){fg.state=Xm,fg.timer.restart(xg,fg.delay,fg.time),fg.delay<=kg&&xg(kg-fg.delay)},0,fg.time)}function qc(gg,yg){var fg,xg;return function(){var vg=Lc(this,gg),bg=vg.tween;if(bg!==fg)for(var wg=0,Tg=(xg=fg=bg).length;wg<Tg;++wg)if(xg[wg].name===yg){(xg=xg.slice()).splice(wg,1);break}vg.tween=xg}}function Ic(gg,yg,fg){var xg,vg;if("function"!=typeof fg)throw new Error;return function(){var bg=Lc(this,gg),wg=bg.tween;if(wg!==xg){vg=(xg=wg).slice();for(var Tg={name:yg,value:fg},kg=0,Sg=vg.length;kg<Sg;++kg)if(vg[kg].name===yg){vg[kg]=Tg;break}kg===Sg&&vg.push(Tg)}bg.tween=vg}}function Nc(gg,yg,fg){var xg=gg._id;return gg.each(function(){var vg=Lc(this,xg);(vg.value||(vg.value={}))[yg]=fg.apply(this,arguments)}),function(vg){return Hc(vg,xg).value[yg]}}function Oc(gg){return function(){this.removeAttribute(gg)}}function $c(gg){return function(){this.removeAttributeNS(gg.space,gg.local)}}function jc(gg,yg,fg){var xg,vg;return function(){var bg=this.getAttribute(gg);return bg===fg?null:bg===xg?vg:vg=yg(xg=bg,fg)}}function Vc(gg,yg,fg){var xg,vg;return function(){var bg=this.getAttributeNS(gg.space,gg.local);return bg===fg?null:bg===xg?vg:vg=yg(xg=bg,fg)}}function Bc(gg,yg,fg){var xg,vg,bg;return function(){var wg,Tg=fg(this);{if(null!=Tg)return(wg=this.getAttribute(gg))===Tg?null:wg===xg&&Tg===vg?bg:bg=yg(xg=wg,vg=Tg);this.removeAttribute(gg)}}}function Zc(gg,yg,fg){var xg,vg,bg;return function(){var wg,Tg=fg(this);{if(null!=Tg)return(wg=this.getAttributeNS(gg.space,gg.local))===Tg?null:wg===xg&&Tg===vg?bg:bg=yg(xg=wg,vg=Tg);this.removeAttributeNS(gg.space,gg.local)}}}function Wc(gg,yg){function fg(){var xg=this,vg=yg.apply(xg,arguments);return vg&&function(bg){xg.setAttributeNS(gg.space,gg.local,vg(bg))}}return fg._value=yg,fg}function Rc(gg,yg){function fg(){var xg=this,vg=yg.apply(xg,arguments);return vg&&function(bg){xg.setAttribute(gg,vg(bg))}}return fg._value=yg,fg}function Gc(gg,yg){return function(){Fc(this,gg).delay=+yg.apply(this,arguments)}}function Jc(gg,yg){return yg=+yg,function(){Fc(this,gg).delay=yg}}function Kc(gg,yg){return function(){Lc(this,gg).duration=+yg.apply(this,arguments)}}function Qc(gg,yg){return yg=+yg,function(){Lc(this,gg).duration=yg}}function ep(gg,yg){if("function"!=typeof yg)throw new Error;return function(){Lc(this,gg).ease=yg}}function tp(gg){return(gg+"").trim().split(/^|\s+/).every(function(yg){var fg=yg.indexOf(".");return 0<=fg&&(yg=yg.slice(0,fg)),!yg||"start"===yg})}function np(gg,yg,fg){var xg,vg,bg=tp(yg)?Fc:Lc;return function(){var wg=bg(this,gg),Tg=wg.on;Tg!==xg&&(vg=(xg=Tg).copy()).on(yg,fg),wg.on=vg}}function op(gg){return function(){var yg=this.parentNode;for(var fg in this.__transition)if(+fg!==gg)return;yg&&yg.removeChild(this)}}function ap(gg,yg){var fg,xg,vg;return function(){var bg=Zd(this,gg),wg=(this.style.removeProperty(gg),Zd(this,gg));return bg===wg?null:bg===fg&&wg===xg?vg:vg=yg(fg=bg,xg=wg)}}function ip(gg){return function(){this.style.removeProperty(gg)}}function lp(gg,yg,fg){var xg,vg;return function(){var bg=Zd(this,gg);return bg===fg?null:bg===xg?vg:vg=yg(xg=bg,fg)}}function rp(gg,yg,fg){var xg,vg,bg;return function(){var wg=Zd(this,gg),Tg=fg(this);return null==Tg&&(this.style.removeProperty(gg),Tg=Zd(this,gg)),wg===Tg?null:wg===xg&&Tg===vg?bg:bg=yg(xg=wg,vg=Tg)}}function sp(gg,yg,fg){function xg(){var vg=this,bg=yg.apply(vg,arguments);return bg&&function(wg){vg.style.setProperty(gg,bg(wg),fg)}}return xg._value=yg,xg}function dp(gg){return function(){this.textContent=gg}}function cp(gg){return function(){var yg=gg(this);this.textContent=null==yg?"":yg}}function up(gg,yg,fg,xg){this._groups=gg,this._parents=yg,this._name=fg,this._id=xg}function pp(){return++Wm}function _p(gg,yg){for(var fg;!(fg=gg.__transition)||!(fg=fg[yg]);)if(!(gg=gg.parentNode))return Jm.time=Cc(),Jm;return fg}function hp(gg,yg,fg){this.target=gg,this.type=yg,this.transform=fg}function mp(gg,yg,fg){this.k=gg,this.x=yg,this.y=fg}function gp(){Pa.event.stopImmediatePropagation()}function yp(){return!Pa.event.button}function fp(){var gg,yg,fg=this;return fg instanceof SVGElement?(gg=(fg=fg.ownerSVGElement||fg).width.baseVal.value,yg=fg.height.baseVal.value):(gg=fg.clientWidth,yg=fg.clientHeight),[[0,0],[gg,yg]]}function xp(){return this.__zoom||Qm}function vp(){Pa.event.stopImmediatePropagation()}function bp(gg){return{type:gg}}function wp(){return!Pa.event.button}function Tp(){var gg=this.ownerSVGElement||this;return[[0,0],[gg.width.baseVal.value,gg.height.baseVal.value]]}function kp(gg){for(;!gg.__brush;)if(!(gg=gg.parentNode))return;return gg.__brush}function Sp(gg){return gg[0][0]===gg[1][0]||gg[0][1]===gg[1][1]}function Cp(gg){function yg(Mg){var Ug=Mg.property("__brush",wg).selectAll(".overlay").data([bp("overlay")]);Ug.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ug.overlay).merge(Ug).each(function(){var Yg=kp(this).extent;fm(this).attr("x",Yg[0][0]).attr("y",Yg[0][1]).attr("width",Yg[1][0]-Yg[0][0]).attr("height",Yg[1][1]-Yg[0][1])}),Mg.selectAll(".selection").data([bp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ug.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Ag=Mg.selectAll(".handle").data(gg.handles,function(Yg){return Yg.type});Ag.exit().remove(),Ag.enter().append("rect").attr("class",function(Yg){return"handle handle--"+Yg.type}).attr("cursor",function(Yg){return ug[Yg.type]}),Mg.each(fg).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",bg)}function fg(){var Mg=fm(this),Ug=kp(this).selection;Ug?(Mg.selectAll(".selection").style("display",null).attr("x",Ug[0][0]).attr("y",Ug[0][1]).attr("width",Ug[1][0]-Ug[0][0]).attr("height",Ug[1][1]-Ug[0][1]),Mg.selectAll(".handle").style("display",null).attr("x",function(Ag){return"e"===Ag.type[Ag.type.length-1]?Ug[1][0]-zg/2:Ug[0][0]-zg/2}).attr("y",function(Ag){return"s"===Ag.type[0]?Ug[1][1]-zg/2:Ug[0][1]-zg/2}).attr("width",function(Ag){return"n"===Ag.type||"s"===Ag.type?Ug[1][0]-Ug[0][0]+zg:zg}).attr("height",function(Ag){return"e"===Ag.type||"w"===Ag.type?Ug[1][1]-Ug[0][1]+zg:zg})):Mg.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function xg(Mg,Ug){return Mg.__brush.emitter||new vg(Mg,Ug)}function vg(Mg,Ug){this.that=Mg,this.args=Ug,this.state=Mg.__brush,this.active=0}function bg(){function Mg(){var dy=cm(jg);!ny||Og||$g||(Math.abs(dy[0]-ay[0])>Math.abs(dy[1]-ay[1])?$g=!0:Og=!0),ay=dy,Ng=!0,og(),Ug()}function Ug(){var dy;switch(qg=ay[0]-oy[0],Ig=ay[1]-oy[1],Bg){case ig:case ag:Zg&&(qg=Math.max(Kg-Yg,Math.min(ey-Fg,qg)),Eg=Yg+qg,Lg=Fg+qg),Wg&&(Ig=Math.max(Qg-Pg,Math.min(ty-Hg,Ig)),Dg=Pg+Ig,Xg=Hg+Ig);break;case lg:0>Zg?(qg=Math.max(Kg-Yg,Math.min(ey-Yg,qg)),Eg=Yg+qg,Lg=Fg):0<Zg&&(qg=Math.max(Kg-Fg,Math.min(ey-Fg,qg)),Eg=Yg,Lg=Fg+qg),0>Wg?(Ig=Math.max(Qg-Pg,Math.min(ty-Pg,Ig)),Dg=Pg+Ig,Xg=Hg):0<Wg&&(Ig=Math.max(Qg-Hg,Math.min(ty-Hg,Ig)),Dg=Pg,Xg=Hg+Ig);break;case rg:Zg&&(Eg=Math.max(Kg,Math.min(ey,Yg-qg*Zg)),Lg=Math.max(Kg,Math.min(ey,Fg+qg*Zg))),Wg&&(Dg=Math.max(Qg,Math.min(ty,Pg-Ig*Wg)),Xg=Math.max(Qg,Math.min(ty,Hg+Ig*Wg)));}Lg<Eg&&(Zg*=-1,dy=Yg,Yg=Fg,Fg=dy,dy=Eg,Eg=Lg,Lg=dy,Vg in pg&&ry.attr("cursor",ug[Vg=pg[Vg]])),Xg<Dg&&(Wg*=-1,dy=Pg,Pg=Hg,Hg=dy,dy=Dg,Dg=Xg,Xg=dy,Vg in _g&&ry.attr("cursor",ug[Vg=_g[Vg]])),Rg.selection&&(Jg=Rg.selection),Og&&(Eg=Jg[0][0],Lg=Jg[1][0]),$g&&(Dg=Jg[0][1],Xg=Jg[1][1]),Jg[0][0]===Eg&&Jg[0][1]===Dg&&Jg[1][0]===Lg&&Jg[1][1]===Xg||(Rg.selection=[[Eg,Dg],[Lg,Xg]],fg.call(jg),iy.brush())}function Ag(){if(vp(),Pa.event.touches){if(Pa.event.touches.length)return;Tg&&clearTimeout(Tg),Tg=setTimeout(function(){Tg=null},500),ly.on("touchmove.brush touchend.brush touchcancel.brush",null)}else bc(Pa.event.view,Ng),sy.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ly.attr("pointer-events","all"),ry.attr("cursor",ug.overlay),Rg.selection&&(Jg=Rg.selection),Sp(Jg)&&(Rg.selection=null,fg.call(jg)),iy.end()}if(Pa.event.touches){if(Pa.event.changedTouches.length<Pa.event.touches.length)return og();}else if(Tg)return;if(Sg.apply(this,arguments)){var Yg,Eg,Pg,Dg,Fg,Lg,Hg,Xg,qg,Ig,Ng,Og,$g,jg=this,Vg=Pa.event.target.__data__.type,Bg="selection"===(Pa.event.metaKey?Vg="overlay":Vg)?ag:Pa.event.altKey?rg:lg,Zg=gg===dg?null:hg[Vg],Wg=gg===sg?null:mg[Vg],Rg=kp(jg),Gg=Rg.extent,Jg=Rg.selection,Kg=Gg[0][0],Qg=Gg[0][1],ey=Gg[1][0],ty=Gg[1][1],ny=Zg&&Wg&&Pa.event.shiftKey,oy=cm(jg),ay=oy,iy=xg(jg,arguments).beforestart();"overlay"===Vg?Rg.selection=Jg=[[Yg=gg===dg?Kg:oy[0],Pg=gg===sg?Qg:oy[1]],[Fg=gg===dg?ey:Yg,Hg=gg===sg?ty:Pg]]:(Yg=Jg[0][0],Pg=Jg[0][1],Fg=Jg[1][0],Hg=Jg[1][1]),Eg=Yg,Dg=Pg,Lg=Fg,Xg=Hg;var ly=fm(jg).attr("pointer-events","none"),ry=ly.selectAll(".overlay").attr("cursor",ug[Vg]);if(Pa.event.touches)ly.on("touchmove.brush",Mg,!0).on("touchend.brush touchcancel.brush",Ag,!0);else{var sy=fm(Pa.event.view).on("keydown.brush",function(){switch(Pa.event.keyCode){case 16:ny=Zg&&Wg;break;case 18:Bg===lg&&(Zg&&(Fg=Lg-qg*Zg,Yg=Eg+qg*Zg),Wg&&(Hg=Xg-Ig*Wg,Pg=Dg+Ig*Wg),Bg=rg,Ug());break;case 32:Bg!==lg&&Bg!==rg||(0>Zg?Fg=Lg-qg:0<Zg&&(Yg=Eg-qg),0>Wg?Hg=Xg-Ig:0<Wg&&(Pg=Dg-Ig),Bg=ig,ry.attr("cursor",ug.selection),Ug());break;default:return;}og()},!0).on("keyup.brush",function(){switch(Pa.event.keyCode){case 16:ny&&(Og=$g=ny=!1,Ug());break;case 18:Bg===rg&&(0>Zg?Fg=Lg:0<Zg&&(Yg=Eg),0>Wg?Hg=Xg:0<Wg&&(Pg=Dg),Bg=lg,Ug());break;case 32:Bg===ig&&(Pa.event.altKey?(Zg&&(Fg=Lg-qg*Zg,Yg=Eg+qg*Zg),Wg&&(Hg=Xg-Ig*Wg,Pg=Dg+Ig*Wg),Bg=rg):(0>Zg?Fg=Lg:0<Zg&&(Yg=Eg),0>Wg?Hg=Xg:0<Wg&&(Pg=Dg),Bg=lg),ry.attr("cursor",ug[Vg]),Ug());break;default:return;}og()},!0).on("mousemove.brush",Mg,!0).on("mouseup.brush",Ag,!0);bm(Pa.event.view)}vp(),Vm(jg),fg.call(jg),iy.start()}}function wg(){var Mg=this.__brush||{selection:null};return Mg.extent=kg.apply(this,arguments),Mg.dim=gg,Mg}var Tg,kg=Tp,Sg=wp,Cg=xd(yg,"start","brush","end"),zg=6;return yg.move=function(Mg,Ug){Mg.selection?Mg.on("start.brush",function(){xg(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){xg(this,arguments).end()}).tween("brush",function(){function Ag(Hg){Eg.selection=1===Hg&&Sp(Fg)?null:Lg(Hg),fg.call(Yg),Pg.brush()}var Yg=this,Eg=Yg.__brush,Pg=xg(Yg,arguments),Dg=Eg.selection,Fg=gg.input("function"==typeof Ug?Ug.apply(this,arguments):Ug,Eg.extent),Lg=wh(Dg,Fg);return Dg&&Fg?Ag:Ag(1)}):Mg.each(function(){var Ag=this,Yg=arguments,Eg=Ag.__brush,Pg=gg.input("function"==typeof Ug?Ug.apply(Ag,Yg):Ug,Eg.extent),Dg=xg(Ag,Yg).beforestart();Vm(Ag),Eg.selection=null==Pg||Sp(Pg)?null:Pg,fg.call(Ag),Dg.start().brush().end()})},vg.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Mg){Yd(new ng(yg,Mg,gg.output(this.state.selection)),Cg.apply,Cg,[Mg,this.that,this.args])}},yg.extent=function(Mg){return arguments.length?(kg="function"==typeof Mg?Mg:tg([[+Mg[0][0],+Mg[0][1]],[+Mg[1][0],+Mg[1][1]]]),yg):kg},yg.filter=function(Mg){return arguments.length?(Sg="function"==typeof Mg?Mg:tg(!!Mg),yg):Sg},yg.handleSize=function(Mg){return arguments.length?(zg=+Mg,yg):zg},yg.on=function(){var Mg=Cg.on.apply(Cg,arguments);return Mg===Cg?yg:Mg},yg}var zp=function(gg,yg){return gg<yg?-1:gg>yg?1:gg>=yg?0:NaN},Mp=function(gg){return 1===gg.length&&(gg=La(gg)),{left:function(yg,fg,xg,vg){for(null==xg&&(xg=0),null==vg&&(vg=yg.length);xg<vg;){var bg=xg+vg>>>1;0>gg(yg[bg],fg)?xg=bg+1:vg=bg}return xg},right:function(yg,fg,xg,vg){for(null==xg&&(xg=0),null==vg&&(vg=yg.length);xg<vg;){var bg=xg+vg>>>1;0<gg(yg[bg],fg)?vg=bg:xg=bg+1}return xg}}},Up=Mp(zp).right,Ap=Math.sqrt(50),Yp=Math.sqrt(10),Ep=Math.sqrt(2),Pp=function(gg,yg,fg){var xg,vg,bg,wg=yg<gg,Tg=-1;if(wg&&(xg=gg,gg=yg,yg=xg),0===(bg=Ha(gg,yg,fg))||!isFinite(bg))return[];if(0<bg)for(gg=Math.ceil(gg/bg),yg=Math.floor(yg/bg),vg=Array(xg=Math.ceil(yg-gg+1));++Tg<xg;)vg[Tg]=(gg+Tg)*bg;else for(gg=Math.floor(gg*bg),yg=Math.ceil(yg*bg),vg=Array(xg=Math.ceil(gg-yg+1));++Tg<xg;)vg[Tg]=(gg-Tg)/bg;return wg&&vg.reverse(),vg},Dp=Math.PI,Fp=2*Dp;qa.prototype=Ia.prototype={constructor:qa,moveTo:function(gg,yg){this._+="M"+(this._x0=this._x1=+gg)+","+(this._y0=this._y1=+yg)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(gg,yg){this._+="L"+(this._x1=+gg)+","+(this._y1=+yg)},quadraticCurveTo:function(gg,yg,fg,xg){this._+="Q"+ +gg+","+ +yg+","+(this._x1=+fg)+","+(this._y1=+xg)},bezierCurveTo:function(gg,yg,fg,xg,vg,bg){this._+="C"+ +gg+","+ +yg+","+ +fg+","+ +xg+","+(this._x1=+vg)+","+(this._y1=+bg)},arcTo:function(gg,yg,fg,xg,vg){gg=+gg,yg=+yg,fg=+fg,xg=+xg,vg=+vg;var bg=this._x1,wg=this._y1,Tg=fg-gg,kg=xg-yg,Sg=bg-gg,Cg=wg-yg,zg=Sg*Sg+Cg*Cg;if(0>vg)throw new Error("negative radius: "+vg);if(null===this._x1)this._+="M"+(this._x1=gg)+","+(this._y1=yg);else if(!(1e-6<zg));else if(1e-6<Math.abs(Cg*Tg-kg*Sg)&&vg){var Mg=fg-bg,Ug=xg-wg,Ag=Tg*Tg+kg*kg,Eg=Math.sqrt(Ag),Pg=Math.sqrt(zg),Dg=vg*Math.tan((Dp-Math.acos((Ag+zg-(Mg*Mg+Ug*Ug))/(2*Eg*Pg)))/2),Fg=Dg/Pg,Lg=Dg/Eg;1e-6<Math.abs(Fg-1)&&(this._+="L"+(gg+Fg*Sg)+","+(yg+Fg*Cg)),this._+="A"+vg+","+vg+",0,0,"+ +(Cg*Mg>Sg*Ug)+","+(this._x1=gg+Lg*Tg)+","+(this._y1=yg+Lg*kg)}else this._+="L"+(this._x1=gg)+","+(this._y1=yg)},arc:function(gg,yg,fg,xg,vg,bg){gg=+gg,yg=+yg;var wg=(fg=+fg)*Math.cos(xg),Tg=fg*Math.sin(xg),kg=gg+wg,Sg=yg+Tg,Cg=1^bg,zg=bg?xg-vg:vg-xg;if(0>fg)throw new Error("negative radius: "+fg);null===this._x1?this._+="M"+kg+","+Sg:(1e-6<Math.abs(this._x1-kg)||1e-6<Math.abs(this._y1-Sg))&&(this._+="L"+kg+","+Sg),fg&&(0>zg&&(zg=zg%Fp+Fp),zg>Fp-1e-6?this._+="A"+fg+","+fg+",0,1,"+Cg+","+(gg-wg)+","+(yg-Tg)+"A"+fg+","+fg+",0,1,"+Cg+","+(this._x1=kg)+","+(this._y1=Sg):1e-6<zg&&(this._+="A"+fg+","+fg+",0,"+ +(zg>=Dp)+","+Cg+","+(this._x1=gg+fg*Math.cos(vg))+","+(this._y1=yg+fg*Math.sin(vg))))},rect:function(gg,yg,fg,xg){this._+="M"+(this._x0=this._x1=+gg)+","+(this._y0=this._y1=+yg)+"h"+ +fg+"v"+ +xg+"h"+-fg+"Z"},toString:function(){return this._}};var Hp=function(gg){return function(){return gg}},Xp=1e-12;Oa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(gg,yg){switch(gg=+gg,yg=+yg,this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2;default:this._context.lineTo(gg,yg);}}};var qp=function(gg){return new Oa(gg)},Ip=function(){function gg(Tg){var kg,Sg,Cg,zg=Tg.length,Mg=!1;for(null==vg&&(wg=bg(Cg=Ia())),kg=0;kg<=zg;++kg)!(kg<zg&&xg(Sg=Tg[kg],kg,Tg))===Mg&&((Mg=!Mg)?wg.lineStart():wg.lineEnd()),Mg&&wg.point(+yg(Sg,kg,Tg),+fg(Sg,kg,Tg));if(Cg)return wg=null,Cg+""||null}var yg=$a,fg=ja,xg=Hp(!0),vg=null,bg=qp,wg=null;return gg.x=function(Tg){return arguments.length?(yg="function"==typeof Tg?Tg:Hp(+Tg),gg):yg},gg.y=function(Tg){return arguments.length?(fg="function"==typeof Tg?Tg:Hp(+Tg),gg):fg},gg.defined=function(Tg){return arguments.length?(xg="function"==typeof Tg?Tg:Hp(!!Tg),gg):xg},gg.curve=function(Tg){return arguments.length?(bg=Tg,null!=vg&&(wg=bg(vg)),gg):bg},gg.context=function(Tg){return arguments.length?(null==Tg?vg=wg=null:wg=bg(vg=Tg),gg):vg},gg};Ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Va(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(gg,yg){switch(gg=+gg,yg=+yg,this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Va(this,gg,yg);}this._x0=this._x1,this._x1=gg,this._y0=this._y1,this._y1=yg}},Wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Za(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(gg,yg){switch(gg=+gg,yg=+yg,this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2,this._x1=gg,this._y1=yg;break;case 2:this._point=3;default:Za(this,gg,yg);}this._x0=this._x1,this._x1=this._x2,this._x2=gg,this._y0=this._y1,this._y1=this._y2,this._y2=yg}};var Np=function gg(yg){function fg(xg){return new Wa(xg,yg)}return fg.tension=function(xg){return gg(+xg)},fg}(0);Ga.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(gg,yg){if(gg=+gg,yg=+yg,this._point){var fg=this._x2-gg,xg=this._y2-yg;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(fg*fg+xg*xg,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2;break;case 2:this._point=3;default:Ra(this,gg,yg);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=gg,this._y0=this._y1,this._y1=this._y2,this._y2=yg}};var Op=function gg(yg){function fg(xg){return yg?new Ga(xg,yg):new Wa(xg,0)}return fg.alpha=function(xg){return gg(+xg)},fg}(.5);tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:el(this,this._t0,Qa(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(gg,yg){var fg=NaN;if(gg=+gg,yg=+yg,gg!==this._x1||yg!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2;break;case 2:this._point=3,el(this,Qa(this,fg=Ka(this,gg,yg)),fg);break;default:el(this,this._t0,fg=Ka(this,gg,yg));}this._x0=this._x1,this._x1=gg,this._y0=this._y1,this._y1=yg,this._t0=fg}}},(function(gg){this._context=new nl(gg)}.prototype=Object.create(tl.prototype)).point=function(gg,yg){tl.prototype.point.call(this,yg,gg)},nl.prototype={moveTo:function(gg,yg){this._context.moveTo(yg,gg)},closePath:function(){this._context.closePath()},lineTo:function(gg,yg){this._context.lineTo(yg,gg)},bezierCurveTo:function(gg,yg,fg,xg,vg,bg){this._context.bezierCurveTo(yg,gg,xg,fg,bg,vg)}},ol.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var gg=this._x,yg=this._y,fg=gg.length;if(fg)if(this._line?this._context.lineTo(gg[0],yg[0]):this._context.moveTo(gg[0],yg[0]),2===fg)this._context.lineTo(gg[1],yg[1]);else for(var xg=al(gg),vg=al(yg),bg=0,wg=1;wg<fg;++bg,++wg)this._context.bezierCurveTo(xg[0][bg],vg[0][bg],xg[1][bg],vg[1][bg],gg[wg],yg[wg]);(this._line||0!==this._line&&1===fg)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(gg,yg){this._x.push(+gg),this._y.push(+yg)}},il.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(gg,yg){switch(gg=+gg,yg=+yg,this._point){case 0:this._point=1,this._line?this._context.lineTo(gg,yg):this._context.moveTo(gg,yg);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,yg),this._context.lineTo(gg,yg);else{var fg=this._x*(1-this._t)+gg*this._t;this._context.lineTo(fg,this._y),this._context.lineTo(fg,yg)}}this._x=gg,this._y=yg}};var $p=new Date,jp=new Date,Vp=ll(function(){},function(gg,yg){gg.setTime(+gg+yg)},function(gg,yg){return yg-gg});Vp.every=function(gg){return gg=Math.floor(gg),isFinite(gg)&&0<gg?1<gg?ll(function(yg){yg.setTime(Math.floor(yg/gg)*gg)},function(yg,fg){yg.setTime(+yg+fg*gg)},function(yg,fg){return(fg-yg)/gg}):Vp:null};var Bp=6e4,Zp=6048e5,Wp=ll(function(gg){gg.setTime(1e3*Math.floor(gg/1e3))},function(gg,yg){gg.setTime(+gg+1e3*yg)},function(gg,yg){return(yg-gg)/1e3},function(gg){return gg.getUTCSeconds()}),Rp=ll(function(gg){gg.setTime(Math.floor(gg/Bp)*Bp)},function(gg,yg){gg.setTime(+gg+yg*Bp)},function(gg,yg){return(yg-gg)/Bp},function(gg){return gg.getMinutes()}),Gp=ll(function(gg){var yg=gg.getTimezoneOffset()*Bp%36e5;0>yg&&(yg+=36e5),gg.setTime(36e5*Math.floor((+gg-yg)/36e5)+yg)},function(gg,yg){gg.setTime(+gg+36e5*yg)},function(gg,yg){return(yg-gg)/36e5},function(gg){return gg.getHours()}),Jp=ll(function(gg){gg.setHours(0,0,0,0)},function(gg,yg){gg.setDate(gg.getDate()+yg)},function(gg,yg){return(yg-gg-(yg.getTimezoneOffset()-gg.getTimezoneOffset())*Bp)/864e5},function(gg){return gg.getDate()-1}),Kp=rl(0),Qp=rl(1),e_=(rl(2),rl(3),rl(4),rl(5),rl(6),ll(function(gg){gg.setDate(1),gg.setHours(0,0,0,0)},function(gg,yg){gg.setMonth(gg.getMonth()+yg)},function(gg,yg){return yg.getMonth()-gg.getMonth()+12*(yg.getFullYear()-gg.getFullYear())},function(gg){return gg.getMonth()})),t_=ll(function(gg){gg.setMonth(0,1),gg.setHours(0,0,0,0)},function(gg,yg){gg.setFullYear(gg.getFullYear()+yg)},function(gg,yg){return yg.getFullYear()-gg.getFullYear()},function(gg){return gg.getFullYear()});t_.every=function(gg){return isFinite(gg=Math.floor(gg))&&0<gg?ll(function(yg){yg.setFullYear(Math.floor(yg.getFullYear()/gg)*gg),yg.setMonth(0,1),yg.setHours(0,0,0,0)},function(yg,fg){yg.setFullYear(yg.getFullYear()+fg*gg)}):null},ll(function(gg){gg.setUTCSeconds(0,0)},function(gg,yg){gg.setTime(+gg+yg*Bp)},function(gg,yg){return(yg-gg)/Bp},function(gg){return gg.getUTCMinutes()}),ll(function(gg){gg.setUTCMinutes(0,0,0)},function(gg,yg){gg.setTime(+gg+36e5*yg)},function(gg,yg){return(yg-gg)/36e5},function(gg){return gg.getUTCHours()});var n_=ll(function(gg){gg.setUTCHours(0,0,0,0)},function(gg,yg){gg.setUTCDate(gg.getUTCDate()+yg)},function(gg,yg){return(yg-gg)/864e5},function(gg){return gg.getUTCDate()-1}),o_=sl(0),a_=sl(1),i_=(sl(2),sl(3),sl(4),sl(5),sl(6),ll(function(gg){gg.setUTCDate(1),gg.setUTCHours(0,0,0,0)},function(gg,yg){gg.setUTCMonth(gg.getUTCMonth()+yg)},function(gg,yg){return yg.getUTCMonth()-gg.getUTCMonth()+12*(yg.getUTCFullYear()-gg.getUTCFullYear())},function(gg){return gg.getUTCMonth()}),ll(function(gg){gg.setUTCMonth(0,1),gg.setUTCHours(0,0,0,0)},function(gg,yg){gg.setUTCFullYear(gg.getUTCFullYear()+yg)},function(gg,yg){return yg.getUTCFullYear()-gg.getUTCFullYear()},function(gg){return gg.getUTCFullYear()}));i_.every=function(gg){return isFinite(gg=Math.floor(gg))&&0<gg?ll(function(yg){yg.setUTCFullYear(Math.floor(yg.getUTCFullYear()/gg)*gg),yg.setUTCMonth(0,1),yg.setUTCHours(0,0,0,0)},function(yg,fg){yg.setUTCFullYear(yg.getUTCFullYear()+fg*gg)}):null};var l_,r_=function(gg,yg){if(0>(fg=(gg=yg?gg.toExponential(yg-1):gg.toExponential()).indexOf("e")))return null;var fg,xg=gg.slice(0,fg);return[1<xg.length?xg[0]+xg.slice(2):xg,+gg.slice(fg+1)]},s_=function(gg){return(gg=r_(Math.abs(gg)))?gg[1]:NaN},d_=function(gg,yg){return function(fg,xg){for(var vg=fg.length,bg=[],wg=0,Tg=gg[0],kg=0;0<vg&&0<Tg&&(kg+Tg+1>xg&&(Tg=Math.max(1,xg-kg)),bg.push(fg.substring(vg-=Tg,vg+Tg)),!((kg+=Tg+1)>xg));)Tg=gg[wg=(wg+1)%gg.length];return bg.reverse().join(yg)}},c_=function(gg){return function(yg){return yg.replace(/[0-9]/g,function(fg){return gg[+fg]})}},u_=function(gg,yg){var fg=r_(gg,yg);if(!fg)return gg+"";var xg=fg[0],vg=fg[1];return 0>vg?"0."+Array(-vg).join("0")+xg:xg.length>vg+1?xg.slice(0,vg+1)+"."+xg.slice(vg+1):xg+Array(vg-xg.length+2).join("0")},p_={"":function(gg,yg){t:for(var fg,xg=(gg=gg.toPrecision(yg)).length,vg=1,bg=-1;vg<xg;++vg)switch(gg[vg]){case".":bg=fg=vg;break;case"0":0===bg&&(bg=vg),fg=vg;break;case"e":break t;default:0<bg&&(bg=0);}return 0<bg?gg.slice(0,bg)+gg.slice(fg+1):gg},"%":function(gg,yg){return(100*gg).toFixed(yg)},b:function(gg){return Math.round(gg).toString(2)},c:function(gg){return gg+""},d:function(gg){return Math.round(gg).toString(10)},e:function(gg,yg){return gg.toExponential(yg)},f:function(gg,yg){return gg.toFixed(yg)},g:function(gg,yg){return gg.toPrecision(yg)},o:function(gg){return Math.round(gg).toString(8)},p:function(gg,yg){return u_(100*gg,yg)},r:u_,s:function(gg,yg){var fg=r_(gg,yg);if(!fg)return gg+"";var xg=fg[0],vg=fg[1],bg=vg-(l_=3*Math.max(-8,Math.min(8,Math.floor(vg/3))))+1,wg=xg.length;return bg===wg?xg:bg>wg?xg+Array(bg-wg+1).join("0"):0<bg?xg.slice(0,bg)+"."+xg.slice(bg):"0."+Array(1-bg).join("0")+r_(gg,Math.max(0,yg+bg-1))[0]},X:function(gg){return Math.round(gg).toString(16).toUpperCase()},x:function(gg){return Math.round(gg).toString(16)}},__=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;dl.prototype=cl.prototype,cl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var h_,m_,g_=function(gg){return gg},y_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],f_=function(gg){function yg(Tg){function kg(Xg){var qg,Ig,Ng,Og=Dg,$g=Fg;if("c"===Pg)$g=Lg(Xg)+$g,Xg="";else{var jg=0>(Xg=+Xg);if(Xg=Lg(Math.abs(Xg),Eg),jg&&0==+Xg&&(jg=!1),Og=(jg?"("===zg?zg:"-":"-"===zg||"("===zg?"":zg)+Og,$g=$g+("s"===Pg?y_[8+l_/3]:"")+(jg&&"("===zg?")":""),Hg)for(qg=-1,Ig=Xg.length;++qg<Ig;)if(48>(Ng=Xg.charCodeAt(qg))||57<Ng){$g=(46===Ng?vg+Xg.slice(qg+1):Xg.slice(qg))+$g,Xg=Xg.slice(0,qg);break}}Yg&&!Ug&&(Xg=fg(Xg,1/0));var Vg=Og.length+Xg.length+$g.length,Bg=Vg<Ag?Array(Ag-Vg+1).join(Sg):"";switch(Yg&&Ug&&(Xg=fg(Bg+Xg,Bg.length?Ag-$g.length:1/0),Bg=""),Cg){case"<":Xg=Og+Xg+$g+Bg;break;case"=":Xg=Og+Bg+Xg+$g;break;case"^":Xg=Bg.slice(0,Vg=Bg.length>>1)+Og+Xg+$g+Bg.slice(Vg);break;default:Xg=Bg+Og+Xg+$g;}return bg(Xg)}var Sg=(Tg=dl(Tg)).fill,Cg=Tg.align,zg=Tg.sign,Mg=Tg.symbol,Ug=Tg.zero,Ag=Tg.width,Yg=Tg.comma,Eg=Tg.precision,Pg=Tg.type,Dg="$"===Mg?xg[0]:"#"===Mg&&/[boxX]/.test(Pg)?"0"+Pg.toLowerCase():"",Fg="$"===Mg?xg[1]:/[%p]/.test(Pg)?wg:"",Lg=p_[Pg],Hg=!Pg||/[defgprs%]/.test(Pg);return Eg=null==Eg?Pg?6:12:/[gprs]/.test(Pg)?Math.max(1,Math.min(21,Eg)):Math.max(0,Math.min(20,Eg)),kg.toString=function(){return Tg+""},kg}var fg=gg.grouping&&gg.thousands?d_(gg.grouping,gg.thousands):g_,xg=gg.currency,vg=gg.decimal,bg=gg.numerals?c_(gg.numerals):g_,wg=gg.percent||"%";return{format:yg,formatPrefix:function(Tg,kg){var Sg=yg((Tg=dl(Tg),Tg.type="f",Tg)),Cg=3*Math.max(-8,Math.min(8,Math.floor(s_(kg)/3))),zg=Math.pow(10,-Cg),Mg=y_[8+Cg/3];return function(Ug){return Sg(zg*Ug)+Mg}}}};ul({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var x_,v_,b_,w_=function(gg){return Math.max(0,-s_(Math.abs(gg)))},T_=function(gg,yg){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(s_(yg)/3)))-s_(Math.abs(gg)))},k_=function(gg,yg){return gg=Math.abs(gg),yg=Math.abs(yg)-gg,Math.max(0,s_(yg)-s_(gg))+1},S_={"-":"",_:" ",0:"0"},C_=/^\s*\d+/,z_=/^%/,M_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;ds({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||v_("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||b_("%Y-%m-%dT%H:%M:%S.%LZ"),cs.prototype=us.prototype={constructor:cs,has:function(gg){return"$"+gg in this},get:function(gg){return this["$"+gg]},set:function(gg,yg){return this["$"+gg]=yg,this},remove:function(gg){var yg="$"+gg;return yg in this&&delete this[yg]},clear:function(){for(var gg in this)"$"===gg[0]&&delete this[gg]},keys:function(){var gg=[];for(var yg in this)"$"===yg[0]&&gg.push(yg.slice(1));return gg},values:function(){var gg=[];for(var yg in this)"$"===yg[0]&&gg.push(this[yg]);return gg},entries:function(){var gg=[];for(var yg in this)"$"===yg[0]&&gg.push({key:yg.slice(1),value:this[yg]});return gg},size:function(){var gg=0;for(var yg in this)"$"===yg[0]&&++gg;return gg},empty:function(){for(var gg in this)if("$"===gg[0])return!1;return!0},each:function(gg){for(var yg in this)"$"===yg[0]&&gg(this[yg],yg.slice(1),this)}};var U_=us.prototype;ps.prototype=function(gg,yg){var fg=new ps;if(gg instanceof ps)gg.each(function(bg){fg.add(bg)});else if(gg){var xg=-1,vg=gg.length;if(null==yg)for(;++xg<vg;)fg.add(gg[xg]);else for(;++xg<vg;)fg.add(yg(gg[xg],xg,gg))}return fg}.prototype={constructor:ps,has:U_.has,add:function(gg){return gg+="",this["$"+gg]=gg,this},remove:U_.remove,clear:U_.clear,values:U_.keys,size:U_.size,empty:U_.empty,each:U_.each};var A_=Array.prototype,Y_=A_.map,E_=A_.slice,P_=function(gg,yg,fg){gg.prototype=yg.prototype=fg,fg.constructor=gg},H_=/^#([0-9a-f]{3})$/,X_=/^#([0-9a-f]{6})$/,q_=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,I_=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,N_=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,O_=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,$_=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,j_=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,V_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P_(hs,ms,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),P_(vs,xs,_s(hs,{brighter:function(gg){return gg=null==gg?1/.7:Math.pow(1/.7,gg),new vs(this.r*gg,this.g*gg,this.b*gg,this.opacity)},darker:function(gg){return gg=null==gg?.7:Math.pow(.7,gg),new vs(this.r*gg,this.g*gg,this.b*gg,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var gg=this.opacity;return(1===(gg=isNaN(gg)?1:Math.max(0,Math.min(1,gg)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===gg?")":", "+gg+")")}})),P_(Ts,function(gg,yg,fg,xg){return 1===arguments.length?ws(gg):new Ts(gg,yg,fg,null==xg?1:xg)},_s(hs,{brighter:function(gg){return gg=null==gg?1/.7:Math.pow(1/.7,gg),new Ts(this.h,this.s,this.l*gg,this.opacity)},darker:function(gg){return gg=null==gg?.7:Math.pow(.7,gg),new Ts(this.h,this.s,this.l*gg,this.opacity)},rgb:function(){var gg=this.h%360+360*(0>this.h),yg=isNaN(gg)||isNaN(this.s)?0:this.s,fg=this.l,xg=fg+(.5>fg?fg:1-fg)*yg,vg=2*fg-xg;return new vs(ks(240<=gg?gg-240:gg+120,vg,xg),ks(gg,vg,xg),ks(120>gg?gg+240:gg-120,vg,xg),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var B_=Math.PI/180,Z_=180/Math.PI,W_=.95047,R_=1,G_=1.08883,J_=4/29,K_=6/29,Q_=3*K_*K_,eh=K_*K_*K_;P_(Cs,function(gg,yg,fg,xg){return 1===arguments.length?Ss(gg):new Cs(gg,yg,fg,null==xg?1:xg)},_s(hs,{brighter:function(gg){return new Cs(this.l+18*(null==gg?1:gg),this.a,this.b,this.opacity)},darker:function(gg){return new Cs(this.l-18*(null==gg?1:gg),this.a,this.b,this.opacity)},rgb:function(){var gg=(this.l+16)/116,yg=isNaN(this.a)?gg:gg+this.a/500,fg=isNaN(this.b)?gg:gg-this.b/200;return gg=R_*Ms(gg),yg=W_*Ms(yg),fg=G_*Ms(fg),new vs(Us(3.2404542*yg-1.5371385*gg-.4985314*fg),Us(-.969266*yg+1.8760108*gg+.041556*fg),Us(.0556434*yg-.2040259*gg+1.0572252*fg),this.opacity)}})),P_(Es,function(gg,yg,fg,xg){return 1===arguments.length?Ys(gg):new Es(gg,yg,fg,null==xg?1:xg)},_s(hs,{brighter:function(gg){return new Es(this.h,this.c,this.l+18*(null==gg?1:gg),this.opacity)},darker:function(gg){return new Es(this.h,this.c,this.l-18*(null==gg?1:gg),this.opacity)},rgb:function(){return Ss(this).rgb()}}));var th=-.14861,nh=1.78277,oh=-.29227,ah=-.90649,ih=1.97294,lh=ih*ah,rh=ih*nh,sh=nh*oh-ah*th;P_(Fs,Ds,_s(hs,{brighter:function(gg){return gg=null==gg?1/.7:Math.pow(1/.7,gg),new Fs(this.h,this.s,this.l*gg,this.opacity)},darker:function(gg){return gg=null==gg?.7:Math.pow(.7,gg),new Fs(this.h,this.s,this.l*gg,this.opacity)},rgb:function(){var gg=isNaN(this.h)?0:(this.h+120)*B_,yg=+this.l,fg=isNaN(this.s)?0:this.s*yg*(1-yg),xg=Math.cos(gg),vg=Math.sin(gg);return new vs(255*(yg+fg*(th*xg+nh*vg)),255*(yg+fg*(oh*xg+ah*vg)),255*(yg+fg*(ih*xg)),this.opacity)}}));var dh,ch,uh,ph,_h=function(gg){return function(){return gg}},hh=function gg(yg){function fg(vg,bg){var wg=xg((vg=xs(vg)).r,(bg=xs(bg)).r),Tg=xg(vg.g,bg.g),kg=xg(vg.b,bg.b),Sg=qs(vg.opacity,bg.opacity);return function(Cg){return vg.r=wg(Cg),vg.g=Tg(Cg),vg.b=kg(Cg),vg.opacity=Sg(Cg),vg+""}}var xg=Xs(yg);return fg.gamma=gg,fg}(1),mh=function(gg,yg){var fg,xg=yg?yg.length:0,vg=gg?Math.min(xg,gg.length):0,bg=Array(xg),wg=Array(xg);for(fg=0;fg<vg;++fg)bg[fg]=wh(gg[fg],yg[fg]);for(;fg<xg;++fg)wg[fg]=yg[fg];return function(Tg){for(fg=0;fg<vg;++fg)wg[fg]=bg[fg](Tg);return wg}},gh=function(gg,yg){var fg=new Date;return gg=+gg,yg-=gg,function(xg){return fg.setTime(gg+yg*xg),fg}},yh=function(gg,yg){return gg=+gg,yg-=gg,function(fg){return gg+yg*fg}},fh=function(gg,yg){var fg,xg={},vg={};for(fg in null!==gg&&"object"==typeof gg||(gg={}),null!==yg&&"object"==typeof yg||(yg={}),yg)fg in gg?xg[fg]=wh(gg[fg],yg[fg]):vg[fg]=yg[fg];return function(bg){for(fg in xg)vg[fg]=xg[fg](bg);return vg}},xh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vh=new RegExp(xh.source,"g"),bh=function(gg,yg){var fg,xg,vg,bg=xh.lastIndex=vh.lastIndex=0,wg=-1,Tg=[],kg=[];for(gg+="",yg+="";(fg=xh.exec(gg))&&(xg=vh.exec(yg));)(vg=xg.index)>bg&&(vg=yg.slice(bg,vg),Tg[wg]?Tg[wg]+=vg:Tg[++wg]=vg),(fg=fg[0])===(xg=xg[0])?Tg[wg]?Tg[wg]+=xg:Tg[++wg]=xg:(Tg[++wg]=null,kg.push({i:wg,x:yh(fg,xg)})),bg=vh.lastIndex;return bg<yg.length&&(vg=yg.slice(bg),Tg[wg]?Tg[wg]+=vg:Tg[++wg]=vg),2>Tg.length?kg[0]?Ns(kg[0].x):Is(yg):(yg=kg.length,function(Sg){for(var Cg,zg=0;zg<yg;++zg)Tg[(Cg=kg[zg]).i]=Cg.x(Sg);return Tg.join("")})},wh=function(gg,yg){var fg,xg=typeof yg;return null==yg||"boolean"===xg?_h(yg):("number"===xg?yh:"string"===xg?(fg=ms(yg))?(yg=fg,hh):bh:yg instanceof ms?hh:yg instanceof Date?gh:Array.isArray(yg)?mh:"function"!=typeof yg.valueOf&&"function"!=typeof yg.toString||isNaN(yg)?fh:yh)(gg,yg)},Th=function(gg,yg){return gg=+gg,yg-=gg,function(fg){return Math.round(gg+yg*fg)}},kh=180/Math.PI,Sh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Ch=function(gg,yg,fg,xg,vg,bg){var wg,Tg,kg;return(wg=Math.sqrt(gg*gg+yg*yg))&&(gg/=wg,yg/=wg),(kg=gg*fg+yg*xg)&&(fg-=gg*kg,xg-=yg*kg),(Tg=Math.sqrt(fg*fg+xg*xg))&&(fg/=Tg,xg/=Tg,kg/=Tg),gg*xg<yg*fg&&(gg=-gg,yg=-yg,kg=-kg,wg=-wg),{translateX:vg,translateY:bg,rotate:Math.atan2(yg,gg)*kh,skewX:Math.atan(kg)*kh,scaleX:wg,scaleY:Tg}},zh=Os(function(gg){return"none"===gg?Sh:(dh||(dh=document.createElement("DIV"),ch=document.documentElement,uh=document.defaultView),dh.style.transform=gg,gg=uh.getComputedStyle(ch.appendChild(dh),null).getPropertyValue("transform"),ch.removeChild(dh),gg=gg.slice(7,-1).split(","),Ch(+gg[0],+gg[1],+gg[2],+gg[3],+gg[4],+gg[5]))},"px, ","px)","deg)"),Mh=Os(function(gg){return null==gg?Sh:(ph||(ph=document.createElementNS("http://www.w3.org/2000/svg","g")),ph.setAttribute("transform",gg),(gg=ph.transform.baseVal.consolidate())?(gg=gg.matrix,Ch(gg.a,gg.b,gg.c,gg.d,gg.e,gg.f)):Sh)},", ",")",")"),Uh=Math.SQRT2,Ah=function(gg,yg){var fg,xg,vg=gg[0],bg=gg[1],wg=gg[2],Tg=yg[0],kg=yg[1],Sg=yg[2],Cg=Tg-vg,zg=kg-bg,Mg=Cg*Cg+zg*zg;if(1e-12>Mg)xg=Math.log(Sg/wg)/Uh,fg=function(Dg){return[vg+Dg*Cg,bg+Dg*zg,wg*Math.exp(Uh*Dg*xg)]};else{var Ug=Math.sqrt(Mg),Ag=(Sg*Sg-wg*wg+4*Mg)/(2*(2*wg)*Ug),Yg=(Sg*Sg-wg*wg-4*Mg)/(2*(2*Sg)*Ug),Eg=Math.log(Math.sqrt(Ag*Ag+1)-Ag),Pg=Math.log(Math.sqrt(Yg*Yg+1)-Yg);xg=(Pg-Eg)/Uh,fg=function(Dg){var Fg=Dg*xg,Lg=$s(Eg),Hg=wg/(2*Ug)*(Lg*Vs(Uh*Fg+Eg)-js(Eg));return[vg+Hg*Cg,bg+Hg*zg,wg*Lg/$s(Uh*Fg+Eg)]}}return fg.duration=1e3*xg,fg};Bs(function(gg,yg){var fg=yg-gg;return fg?Ls(gg,180<fg||-180>fg?fg-360*Math.round(fg/360):fg):_h(isNaN(gg)?yg:gg)});var Yh=Bs(qs),Eh=function(gg){return function(){return gg}},Ph=function(gg){return+gg},Dh=[0,1],Fh=function(gg,yg,fg){var xg,vg=gg[0],bg=gg[gg.length-1],wg=Xa(vg,bg,null==yg?10:yg);switch((fg=dl(null==fg?",f":fg)).type){case"s":var Tg=Math.max(Math.abs(vg),Math.abs(bg));return null!=fg.precision||isNaN(xg=T_(wg,Tg))||(fg.precision=xg),m_(fg,Tg);case"":case"e":case"g":case"p":case"r":null!=fg.precision||isNaN(xg=k_(wg,Math.max(Math.abs(vg),Math.abs(bg))))||(fg.precision=xg-("e"===fg.type));break;case"f":case"%":null!=fg.precision||isNaN(xg=w_(wg))||(fg.precision=xg-2*("%"===fg.type));}return Pa.format(fg)},Lh=function(gg,yg){var fg,xg=0,vg=(gg=gg.slice()).length-1,bg=gg[xg],wg=gg[vg];return wg<bg&&(fg=xg,xg=vg,vg=fg,fg=bg,bg=wg,wg=fg),gg[xg]=yg.floor(bg),gg[vg]=yg.ceil(wg),gg},Hh=1e3,Xh=60*Hh,qh=60*Xh,Ih=24*qh,Nh=7*Ih,Oh=30*Ih,$h=365*Ih,jh=function(gg){return gg.match(/.{6}/g).map(function(yg){return"#"+yg})};jh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),jh("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),jh("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),jh("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Yh(Ds(300,.5,0),Ds(-240,.5,1)),Yh(Ds(-100,.75,.35),Ds(80,1.5,.8)),Yh(Ds(260,.75,.35),Ds(80,1.5,.8)),Ds();var Vh=Array.prototype.slice,Bh=function(gg){return gg},Zh=1,Wh=2,Rh=3,Gh=4,Jh=1e-6,Kh={value:function(){}};vd.prototype=xd.prototype={constructor:vd,on:function(gg,yg){var fg,xg=this._,vg=bd(gg+"",xg),bg=-1,wg=vg.length;{if(!(2>arguments.length)){if(null!=yg&&"function"!=typeof yg)throw new Error("invalid callback: "+yg);for(;++bg<wg;)if(fg=(gg=vg[bg]).type)xg[fg]=Td(xg[fg],gg.name,yg);else if(null==yg)for(fg in xg)xg[fg]=Td(xg[fg],gg.name,null);return this}for(;++bg<wg;)if((fg=(gg=vg[bg]).type)&&(fg=wd(xg[fg],gg.name)))return fg}},copy:function(){var gg={},yg=this._;for(var fg in yg)gg[fg]=yg[fg].slice();return new vd(gg)},call:function(gg,yg){if(0<(fg=arguments.length-2))for(var fg,xg,vg=Array(fg),bg=0;bg<fg;++bg)vg[bg]=arguments[bg+2];if(!this._.hasOwnProperty(gg))throw new Error("unknown type: "+gg);for(bg=0,fg=(xg=this._[gg]).length;bg<fg;++bg)xg[bg].value.apply(yg,vg)},apply:function(gg,yg,fg){if(!this._.hasOwnProperty(gg))throw new Error("unknown type: "+gg);for(var xg=this._[gg],vg=0,bg=xg.length;vg<bg;++vg)xg[vg].value.apply(yg,fg)}};var Qh="http://www.w3.org/1999/xhtml",em={svg:"http://www.w3.org/2000/svg",xhtml:Qh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tm=function(gg){var yg=gg+="",fg=yg.indexOf(":");return 0<=fg&&"xmlns"!==(yg=gg.slice(0,fg))&&(gg=gg.slice(fg+1)),em.hasOwnProperty(yg)?{space:em[yg],local:gg}:gg},nm=function(gg){var yg=tm(gg);return(yg.local?Sd:kd)(yg)},om=function(gg){return function(){return this.matches(gg)}};if("undefined"!=typeof document){var am=document.documentElement;if(!am.matches){var im=am.webkitMatchesSelector||am.msMatchesSelector||am.mozMatchesSelector||am.oMatchesSelector;om=function(gg){return function(){return im.call(this,gg)}}}}var lm=om,rm={};Pa.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(rm={mouseenter:"mouseover",mouseleave:"mouseout"}));var sm=function(){for(var gg,yg=Pa.event;gg=yg.sourceEvent;)yg=gg;return yg},dm=function(gg,yg){var fg=gg.ownerSVGElement||gg;if(fg.createSVGPoint){var xg=fg.createSVGPoint();return xg.x=yg.clientX,xg.y=yg.clientY,xg=xg.matrixTransform(gg.getScreenCTM().inverse()),[xg.x,xg.y]}var vg=gg.getBoundingClientRect();return[yg.clientX-vg.left-gg.clientLeft,yg.clientY-vg.top-gg.clientTop]},cm=function(gg){var yg=sm();return yg.changedTouches&&(yg=yg.changedTouches[0]),dm(gg,yg)},um=function(gg){return null==gg?Ed:function(){return this.querySelector(gg)}},pm=function(gg){return null==gg?Pd:function(){return this.querySelectorAll(gg)}},_m=function(gg){return Array(gg.length)};Dd.prototype={constructor:Dd,appendChild:function(gg){return this._parent.insertBefore(gg,this._next)},insertBefore:function(gg,yg){return this._parent.insertBefore(gg,yg)},querySelector:function(gg){return this._parent.querySelector(gg)},querySelectorAll:function(gg){return this._parent.querySelectorAll(gg)}};var hm=function(gg){return function(){return gg}},mm="$",gm=function(gg){return gg.ownerDocument&&gg.ownerDocument.defaultView||gg.document&&gg||gg.defaultView};Qd.prototype={add:function(gg){0>this._names.indexOf(gg)&&(this._names.push(gg),this._node.setAttribute("class",this._names.join(" ")))},remove:function(gg){var yg=this._names.indexOf(gg);0<=yg&&(this._names.splice(yg,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(gg){return 0<=this._names.indexOf(gg)}};var ym=[null];fc.prototype=xc.prototype={constructor:fc,select:function(gg){"function"!=typeof gg&&(gg=um(gg));for(var yg=this._groups,fg=yg.length,xg=Array(fg),vg=0;vg<fg;++vg)for(var bg,wg,Tg=yg[vg],kg=Tg.length,Sg=xg[vg]=Array(kg),Cg=0;Cg<kg;++Cg)(bg=Tg[Cg])&&(wg=gg.call(bg,bg.__data__,Cg,Tg))&&("__data__"in bg&&(wg.__data__=bg.__data__),Sg[Cg]=wg);return new fc(xg,this._parents)},selectAll:function(gg){"function"!=typeof gg&&(gg=pm(gg));for(var yg=this._groups,fg=yg.length,xg=[],vg=[],bg=0;bg<fg;++bg)for(var wg,Tg=yg[bg],kg=Tg.length,Sg=0;Sg<kg;++Sg)(wg=Tg[Sg])&&(xg.push(gg.call(wg,wg.__data__,Sg,Tg)),vg.push(wg));return new fc(xg,vg)},filter:function(gg){"function"!=typeof gg&&(gg=lm(gg));for(var yg=this._groups,fg=yg.length,xg=Array(fg),vg=0;vg<fg;++vg)for(var bg,wg=yg[vg],Tg=wg.length,kg=xg[vg]=[],Sg=0;Sg<Tg;++Sg)(bg=wg[Sg])&&gg.call(bg,bg.__data__,Sg,wg)&&kg.push(bg);return new fc(xg,this._parents)},data:function(gg,yg){if(!gg)return Ug=Array(this.size()),Sg=-1,this.each(function(Hg){Ug[++Sg]=Hg}),Ug;var fg=yg?Ld:Fd,xg=this._parents,vg=this._groups;"function"!=typeof gg&&(gg=hm(gg));for(var bg=vg.length,wg=Array(bg),Tg=Array(bg),kg=Array(bg),Sg=0;Sg<bg;++Sg){var Cg=xg[Sg],zg=vg[Sg],Mg=zg.length,Ug=gg.call(Cg,Cg&&Cg.__data__,Sg,xg),Ag=Ug.length,Yg=Tg[Sg]=Array(Ag),Eg=wg[Sg]=Array(Ag);fg(Cg,zg,Yg,Eg,kg[Sg]=Array(Mg),Ug,yg);for(var Pg,Dg,Fg=0,Lg=0;Fg<Ag;++Fg)if(Pg=Yg[Fg]){for(Fg>=Lg&&(Lg=Fg+1);!(Dg=Eg[Lg])&&++Lg<Ag;);Pg._next=Dg||null}}return wg=new fc(wg,xg),wg._enter=Tg,wg._exit=kg,wg},enter:function(){return new fc(this._enter||this._groups.map(_m),this._parents)},exit:function(){return new fc(this._exit||this._groups.map(_m),this._parents)},merge:function(gg){for(var yg=this._groups,fg=gg._groups,xg=yg.length,vg=fg.length,bg=Math.min(xg,vg),wg=Array(xg),Tg=0;Tg<bg;++Tg)for(var kg,Sg=yg[Tg],Cg=fg[Tg],zg=Sg.length,Mg=wg[Tg]=Array(zg),Ug=0;Ug<zg;++Ug)(kg=Sg[Ug]||Cg[Ug])&&(Mg[Ug]=kg);for(;Tg<xg;++Tg)wg[Tg]=yg[Tg];return new fc(wg,this._parents)},order:function(){for(var gg=this._groups,yg=-1,fg=gg.length;++yg<fg;)for(var xg,vg=gg[yg],bg=vg.length-1,wg=vg[bg];0<=--bg;)(xg=vg[bg])&&(wg&&wg!==xg.nextSibling&&wg.parentNode.insertBefore(xg,wg),wg=xg);return this},sort:function(gg){gg||(gg=Hd);for(var yg=this._groups,fg=yg.length,xg=Array(fg),vg=0;vg<fg;++vg){for(var bg,wg=yg[vg],Tg=wg.length,kg=xg[vg]=Array(Tg),Sg=0;Sg<Tg;++Sg)(bg=wg[Sg])&&(kg[Sg]=bg);kg.sort(function(Cg,zg){return Cg&&zg?gg(Cg.__data__,zg.__data__):!Cg-!zg})}return new fc(xg,this._parents).order()},call:function(){var gg=arguments[0];return arguments[0]=this,gg.apply(null,arguments),this},nodes:function(){var gg=Array(this.size()),yg=-1;return this.each(function(){gg[++yg]=this}),gg},node:function(){for(var gg=this._groups,yg=0,fg=gg.length;yg<fg;++yg)for(var wg,xg=gg[yg],vg=0,bg=xg.length;vg<bg;++vg)if(wg=xg[vg],wg)return wg;return null},size:function(){var gg=0;return this.each(function(){++gg}),gg},empty:function(){return!this.node()},each:function(gg){for(var yg=this._groups,fg=0,xg=yg.length;fg<xg;++fg)for(var vg,bg=yg[fg],wg=0,Tg=bg.length;wg<Tg;++wg)(vg=bg[wg])&&gg.call(vg,vg.__data__,wg,bg);return this},attr:function(gg,yg){var fg=tm(gg);if(2>arguments.length){var xg=this.node();return fg.local?xg.getAttributeNS(fg.space,fg.local):xg.getAttribute(fg)}return this.each((null==yg?fg.local?qd:Xd:"function"==typeof yg?fg.local?$d:Od:fg.local?Nd:Id)(fg,yg))},style:function(gg,yg,fg){return 1<arguments.length?this.each((null==yg?jd:"function"==typeof yg?Bd:Vd)(gg,yg,null==fg?"":fg)):Zd(this.node(),gg)},property:function(gg,yg){return 1<arguments.length?this.each((null==yg?Wd:"function"==typeof yg?Gd:Rd)(gg,yg)):this.node()[gg]},classed:function(gg,yg){var fg=Jd(gg+"");if(2>arguments.length){for(var xg=Kd(this.node()),vg=-1,bg=fg.length;++vg<bg;)if(!xg.contains(fg[vg]))return!1;return!0}return this.each(("function"==typeof yg?ac:yg?nc:oc)(fg,yg))},text:function(gg){return arguments.length?this.each(null==gg?ic:("function"==typeof gg?rc:lc)(gg)):this.node().textContent},html:function(gg){return arguments.length?this.each(null==gg?sc:("function"==typeof gg?cc:dc)(gg)):this.node().innerHTML},raise:function(){return this.each(uc)},lower:function(){return this.each(pc)},append:function(gg){var yg="function"==typeof gg?gg:nm(gg);return this.select(function(){return this.appendChild(yg.apply(this,arguments))})},insert:function(gg,yg){var fg="function"==typeof gg?gg:nm(gg),xg=null==yg?_c:"function"==typeof yg?yg:um(yg);return this.select(function(){return this.insertBefore(fg.apply(this,arguments),xg.apply(this,arguments)||null)})},remove:function(){return this.each(hc)},datum:function(gg){return arguments.length?this.property("__data__",gg):this.node().__data__},on:function(gg,yg,fg){var xg,vg,bg=Md(gg+""),wg=bg.length;{if(!(2>arguments.length)){for(Tg=yg?Ad:Ud,null==fg&&(fg=!1),xg=0;xg<wg;++xg)this.each(Tg(bg[xg],yg,fg));return this}var Tg=this.node().__on;if(Tg)for(var kg,Sg=0,Cg=Tg.length;Sg<Cg;++Sg)for(xg=0,kg=Tg[Sg];xg<wg;++xg)if((vg=bg[xg]).type===kg.type&&vg.name===kg.name)return kg.value}},dispatch:function(gg,yg){return this.each(("function"==typeof yg?yc:gc)(gg,yg))}};var fm=function(gg){return"string"==typeof gg?new fc([[document.querySelector(gg)]],[document.documentElement]):new fc([[gg]],ym)},xm=function(gg,yg,fg){3>arguments.length&&(fg=yg,yg=sm().changedTouches);for(var xg,vg=0,bg=yg?yg.length:0;vg<bg;++vg)if((xg=yg[vg]).identifier===fg)return dm(gg,xg);return null},vm=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},bm=function(gg){var yg=gg.document.documentElement,fg=fm(gg).on("dragstart.drag",vm,!0);"onselectstart"in yg?fg.on("selectstart.drag",vm,!0):(yg.__noselect=yg.style.MozUserSelect,yg.style.MozUserSelect="none")},wm=function(gg){return function(){return gg}};wc.prototype.on=function(){var gg=this._.on.apply(this._,arguments);return gg===this._?this:gg};var Tm,km,Sm=0,Cm=0,zm=0,Mm=1e3,Um=0,Am=0,Ym=0,Em="object"==typeof performance&&performance.now?performance:Date,Pm="function"==typeof requestAnimationFrame?requestAnimationFrame:function(gg){setTimeout(gg,17)};Mc.prototype=Uc.prototype={constructor:Mc,restart:function(gg,yg,fg){if("function"!=typeof gg)throw new TypeError("callback is not a function");fg=(null==fg?Cc():+fg)+(null==yg?0:+yg),this._next||km===this||(km?km._next=this:Tm=this,km=this),this._call=gg,this._time=fg,Dc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dc())}};var Dm=function(gg,yg,fg){var xg=new Mc;return yg=null==yg?0:+yg,xg.restart(function(vg){xg.stop(),gg(vg+yg)},yg,fg),xg},Fm=xd("start","end","interrupt"),Lm=[],Hm=0,Xm=1,qm=2,Im=3,Nm=4,Om=5,$m=6,jm=function(gg,yg,fg,xg,vg,bg){var wg=gg.__transition;if(!wg)gg.__transition={};else if(fg in wg)return;Xc(gg,fg,{name:yg,index:xg,group:vg,on:Fm,tween:Lm,time:bg.time,delay:bg.delay,duration:bg.duration,ease:bg.ease,timer:null,state:Hm})},Vm=function(gg,yg){var fg,xg,vg,bg=gg.__transition,wg=!0;if(bg){for(vg in yg=null==yg?null:yg+"",bg)(fg=bg[vg]).name===yg?(xg=fg.state>qm&&fg.state<Om,fg.state=$m,fg.timer.stop(),xg&&fg.on.call("interrupt",gg,gg.__data__,fg.index,fg.group),delete bg[vg]):wg=!1;wg&&delete gg.__transition}},Bm=function(gg,yg){var fg;return("number"==typeof yg?yh:yg instanceof ms?hh:(fg=ms(yg))?(yg=fg,hh):bh)(gg,yg)},Zm=xc.prototype.constructor,Wm=0,Rm=xc.prototype;up.prototype=function(gg){return xc().transition(gg)}.prototype={constructor:up,select:function(gg){var yg=this._name,fg=this._id;"function"!=typeof gg&&(gg=um(gg));for(var xg=this._groups,vg=xg.length,bg=Array(vg),wg=0;wg<vg;++wg)for(var Tg,kg,Sg=xg[wg],Cg=Sg.length,zg=bg[wg]=Array(Cg),Mg=0;Mg<Cg;++Mg)(Tg=Sg[Mg])&&(kg=gg.call(Tg,Tg.__data__,Mg,Sg))&&("__data__"in Tg&&(kg.__data__=Tg.__data__),zg[Mg]=kg,jm(zg[Mg],yg,fg,Mg,zg,Hc(Tg,fg)));return new up(bg,this._parents,yg,fg)},selectAll:function(gg){var yg=this._name,fg=this._id;"function"!=typeof gg&&(gg=pm(gg));for(var xg=this._groups,vg=xg.length,bg=[],wg=[],Tg=0;Tg<vg;++Tg)for(var kg,Sg=xg[Tg],Cg=Sg.length,zg=0;zg<Cg;++zg)if(kg=Sg[zg]){for(var Mg,Ug=gg.call(kg,kg.__data__,zg,Sg),Ag=Hc(kg,fg),Yg=0,Eg=Ug.length;Yg<Eg;++Yg)(Mg=Ug[Yg])&&jm(Mg,yg,fg,Yg,Ug,Ag);bg.push(Ug),wg.push(kg)}return new up(bg,wg,yg,fg)},filter:function(gg){"function"!=typeof gg&&(gg=lm(gg));for(var yg=this._groups,fg=yg.length,xg=Array(fg),vg=0;vg<fg;++vg)for(var bg,wg=yg[vg],Tg=wg.length,kg=xg[vg]=[],Sg=0;Sg<Tg;++Sg)(bg=wg[Sg])&&gg.call(bg,bg.__data__,Sg,wg)&&kg.push(bg);return new up(xg,this._parents,this._name,this._id)},merge:function(gg){if(gg._id!==this._id)throw new Error;for(var yg=this._groups,fg=gg._groups,xg=yg.length,vg=fg.length,bg=Math.min(xg,vg),wg=Array(xg),Tg=0;Tg<bg;++Tg)for(var kg,Sg=yg[Tg],Cg=fg[Tg],zg=Sg.length,Mg=wg[Tg]=Array(zg),Ug=0;Ug<zg;++Ug)(kg=Sg[Ug]||Cg[Ug])&&(Mg[Ug]=kg);for(;Tg<xg;++Tg)wg[Tg]=yg[Tg];return new up(wg,this._parents,this._name,this._id)},selection:function(){return new Zm(this._groups,this._parents)},transition:function(){for(var gg=this._name,yg=this._id,fg=pp(),xg=this._groups,vg=xg.length,bg=0;bg<vg;++bg)for(var wg,Tg=xg[bg],kg=Tg.length,Sg=0;Sg<kg;++Sg)if(wg=Tg[Sg]){var Cg=Hc(wg,yg);jm(wg,gg,fg,Sg,Tg,{time:Cg.time+Cg.delay+Cg.duration,delay:0,duration:Cg.duration,ease:Cg.ease})}return new up(xg,this._parents,gg,fg)},call:Rm.call,nodes:Rm.nodes,node:Rm.node,size:Rm.size,empty:Rm.empty,each:Rm.each,on:function(gg,yg){var fg=this._id;return 2>arguments.length?Hc(this.node(),fg).on.on(gg):this.each(np(fg,gg,yg))},attr:function(gg,yg){var fg=tm(gg),xg="transform"===fg?Mh:Bm;return this.attrTween(gg,"function"==typeof yg?(fg.local?Zc:Bc)(fg,xg,Nc(this,"attr."+gg,yg)):null==yg?(fg.local?$c:Oc)(fg):(fg.local?Vc:jc)(fg,xg,yg+""))},attrTween:function(gg,yg){var fg="attr."+gg;if(2>arguments.length)return(fg=this.tween(fg))&&fg._value;if(null==yg)return this.tween(fg,null);if("function"!=typeof yg)throw new Error;var xg=tm(gg);return this.tween(fg,(xg.local?Wc:Rc)(xg,yg))},style:function(gg,yg,fg){var xg="transform"==(gg+="")?zh:Bm;return null==yg?this.styleTween(gg,ap(gg,xg)).on("end.style."+gg,ip(gg)):this.styleTween(gg,"function"==typeof yg?rp(gg,xg,Nc(this,"style."+gg,yg)):lp(gg,xg,yg+""),fg)},styleTween:function(gg,yg,fg){var xg="style."+(gg+="");if(2>arguments.length)return(xg=this.tween(xg))&&xg._value;if(null==yg)return this.tween(xg,null);if("function"!=typeof yg)throw new Error;return this.tween(xg,sp(gg,yg,null==fg?"":fg))},text:function(gg){return this.tween("text","function"==typeof gg?cp(Nc(this,"text",gg)):dp(null==gg?"":gg+""))},remove:function(){return this.on("end.remove",op(this._id))},tween:function(gg,yg){var fg=this._id;if(gg+="",2>arguments.length){for(var xg,vg=Hc(this.node(),fg).tween,bg=0,wg=vg.length;bg<wg;++bg)if((xg=vg[bg]).name===gg)return xg.value;return null}return this.each((null==yg?qc:Ic)(fg,gg,yg))},delay:function(gg){var yg=this._id;return arguments.length?this.each(("function"==typeof gg?Gc:Jc)(yg,gg)):Hc(this.node(),yg).delay},duration:function(gg){var yg=this._id;return arguments.length?this.each(("function"==typeof gg?Kc:Qc)(yg,gg)):Hc(this.node(),yg).duration},ease:function(gg){var yg=this._id;return arguments.length?this.each(ep(yg,gg)):Hc(this.node(),yg).ease}},function gg(yg){function fg(xg){return Math.pow(xg,yg)}return yg=+yg,fg.exponent=gg,fg}(3),function gg(yg){function fg(xg){return 1-Math.pow(1-xg,yg)}return yg=+yg,fg.exponent=gg,fg}(3),function gg(yg){function fg(xg){return(1>=(xg*=2)?Math.pow(xg,yg):2-Math.pow(2-xg,yg))/2}return yg=+yg,fg.exponent=gg,fg}(3),function gg(yg){function fg(xg){return xg*xg*((yg+1)*xg-yg)}return yg=+yg,fg.overshoot=gg,fg}(1.70158),function gg(yg){function fg(xg){return--xg*xg*((yg+1)*xg+yg)+1}return yg=+yg,fg.overshoot=gg,fg}(1.70158),function gg(yg){function fg(xg){return(1>(xg*=2)?xg*xg*((yg+1)*xg-yg):(xg-=2)*xg*((yg+1)*xg+yg)+2)/2}return yg=+yg,fg.overshoot=gg,fg}(1.70158);var Gm=2*Math.PI,Jm=(function gg(yg,fg){function xg(bg){return yg*Math.pow(2,10*--bg)*Math.sin((vg-bg)/fg)}var vg=Math.asin(1/(yg=Math.max(1,yg)))*(fg/=Gm);return xg.amplitude=function(bg){return gg(bg,fg*Gm)},xg.period=function(bg){return gg(yg,bg)},xg}(1,.3),function gg(yg,fg){function xg(bg){return 1-yg*Math.pow(2,-10*(bg=+bg))*Math.sin((bg+vg)/fg)}var vg=Math.asin(1/(yg=Math.max(1,yg)))*(fg/=Gm);return xg.amplitude=function(bg){return gg(bg,fg*Gm)},xg.period=function(bg){return gg(yg,bg)},xg}(1,.3),function gg(yg,fg){function xg(bg){return(0>(bg=2*bg-1)?yg*Math.pow(2,10*bg)*Math.sin((vg-bg)/fg):2-yg*Math.pow(2,-10*bg)*Math.sin((vg+bg)/fg))/2}var vg=Math.asin(1/(yg=Math.max(1,yg)))*(fg/=Gm);return xg.amplitude=function(bg){return gg(bg,fg*Gm)},xg.period=function(bg){return gg(yg,bg)},xg}(1,.3),{time:null,delay:0,duration:250,ease:function(gg){return(1>=(gg*=2)?gg*gg*gg:(gg-=2)*gg*gg+2)/2}});xc.prototype.interrupt=function(gg){return this.each(function(){Vm(this,gg)})},xc.prototype.transition=function(gg){var yg,fg;gg instanceof up?(yg=gg._id,gg=gg._name):(yg=pp(),(fg=Jm).time=Cc(),gg=null==gg?null:gg+"");for(var xg=this._groups,vg=xg.length,bg=0;bg<vg;++bg)for(var wg,Tg=xg[bg],kg=Tg.length,Sg=0;Sg<kg;++Sg)(wg=Tg[Sg])&&jm(wg,gg,yg,Sg,Tg,fg||_p(wg,yg));return new up(xg,this._parents,gg,yg)};var Km=function(gg){return function(){return gg}};mp.prototype={constructor:mp,scale:function(gg){return 1===gg?this:new mp(this.k*gg,this.x,this.y)},translate:function(gg,yg){return 0===gg&0===yg?this:new mp(this.k,this.x+this.k*gg,this.y+this.k*yg)},apply:function(gg){return[gg[0]*this.k+this.x,gg[1]*this.k+this.y]},applyX:function(gg){return gg*this.k+this.x},applyY:function(gg){return gg*this.k+this.y},invert:function(gg){return[(gg[0]-this.x)/this.k,(gg[1]-this.y)/this.k]},invertX:function(gg){return(gg-this.x)/this.k},invertY:function(gg){return(gg-this.y)/this.k},rescaleX:function(gg){return gg.copy().domain(gg.range().map(this.invertX,this).map(gg.invert,gg))},rescaleY:function(gg){return gg.copy().domain(gg.range().map(this.invertY,this).map(gg.invert,gg))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qm=new mp(1,0,0),eg=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},tg=function(gg){return function(){return gg}},ng=function(gg,yg,fg){this.target=gg,this.type=yg,this.selection=fg},og=function(){Pa.event.preventDefault(),Pa.event.stopImmediatePropagation()},ag={name:"drag"},ig={name:"space"},lg={name:"handle"},rg={name:"center"},sg={name:"x",handles:["e","w"].map(bp),input:function(gg,yg){return gg&&[[gg[0],yg[0][1]],[gg[1],yg[1][1]]]},output:function(gg){return gg&&[gg[0][0],gg[1][0]]}},dg={name:"y",handles:["n","s"].map(bp),input:function(gg,yg){return gg&&[[yg[0][0],gg[0]],[yg[1][0],gg[1]]]},output:function(gg){return gg&&[gg[0][1],gg[1][1]]}},cg={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(bp),input:function(gg){return gg},output:function(gg){return gg}},ug={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pg={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_g={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},hg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},mg={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};Pa.bisector=Mp,Pa.extent=function(gg,yg){var fg,xg,vg,bg=gg.length,wg=-1;if(null==yg){for(;++wg<bg;)if(null!=(fg=gg[wg])&&fg>=fg)for(xg=vg=fg;++wg<bg;)null!=(fg=gg[wg])&&(xg>fg&&(xg=fg),vg<fg&&(vg=fg));}else for(;++wg<bg;)if(null!=(fg=yg(gg[wg],wg,gg))&&fg>=fg)for(xg=vg=fg;++wg<bg;)null!=(fg=yg(gg[wg],wg,gg))&&(xg>fg&&(xg=fg),vg<fg&&(vg=fg));return[xg,vg]},Pa.max=function(gg,yg){var fg,xg,vg=gg.length,bg=-1;if(null==yg){for(;++bg<vg;)if(null!=(fg=gg[bg])&&fg>=fg)for(xg=fg;++bg<vg;)null!=(fg=gg[bg])&&fg>xg&&(xg=fg);}else for(;++bg<vg;)if(null!=(fg=yg(gg[bg],bg,gg))&&fg>=fg)for(xg=fg;++bg<vg;)null!=(fg=yg(gg[bg],bg,gg))&&fg>xg&&(xg=fg);return xg},Pa.min=function(gg,yg){var fg,xg,vg=gg.length,bg=-1;if(null==yg){for(;++bg<vg;)if(null!=(fg=gg[bg])&&fg>=fg)for(xg=fg;++bg<vg;)null!=(fg=gg[bg])&&xg>fg&&(xg=fg);}else for(;++bg<vg;)if(null!=(fg=yg(gg[bg],bg,gg))&&fg>=fg)for(xg=fg;++bg<vg;)null!=(fg=yg(gg[bg],bg,gg))&&xg>fg&&(xg=fg);return xg},Pa.line=Ip,Pa.area=function(){function gg(Cg){var zg,Mg,Ug,Ag,Yg,Eg=Cg.length,Pg=!1,Dg=Array(Eg),Fg=Array(Eg);for(null==Tg&&(Sg=kg(Yg=Ia())),zg=0;zg<=Eg;++zg){if(!(zg<Eg&&wg(Ag=Cg[zg],zg,Cg))===Pg)if(Pg=!Pg)Mg=zg,Sg.areaStart(),Sg.lineStart();else{for(Sg.lineEnd(),Sg.lineStart(),Ug=zg-1;Ug>=Mg;--Ug)Sg.point(Dg[Ug],Fg[Ug]);Sg.lineEnd(),Sg.areaEnd()}Pg&&(Dg[zg]=+fg(Ag,zg,Cg),Fg[zg]=+vg(Ag,zg,Cg),Sg.point(xg?+xg(Ag,zg,Cg):Dg[zg],bg?+bg(Ag,zg,Cg):Fg[zg]))}if(Yg)return Sg=null,Yg+""||null}function yg(){return Ip().defined(wg).curve(kg).context(Tg)}var fg=$a,xg=null,vg=Hp(0),bg=ja,wg=Hp(!0),Tg=null,kg=qp,Sg=null;return gg.x=function(Cg){return arguments.length?(fg="function"==typeof Cg?Cg:Hp(+Cg),xg=null,gg):fg},gg.x0=function(Cg){return arguments.length?(fg="function"==typeof Cg?Cg:Hp(+Cg),gg):fg},gg.x1=function(Cg){return arguments.length?(xg=null==Cg?null:"function"==typeof Cg?Cg:Hp(+Cg),gg):xg},gg.y=function(Cg){return arguments.length?(vg="function"==typeof Cg?Cg:Hp(+Cg),bg=null,gg):vg},gg.y0=function(Cg){return arguments.length?(vg="function"==typeof Cg?Cg:Hp(+Cg),gg):vg},gg.y1=function(Cg){return arguments.length?(bg=null==Cg?null:"function"==typeof Cg?Cg:Hp(+Cg),gg):bg},gg.lineX0=gg.lineY0=function(){return yg().x(fg).y(vg)},gg.lineY1=function(){return yg().x(fg).y(bg)},gg.lineX1=function(){return yg().x(xg).y(vg)},gg.defined=function(Cg){return arguments.length?(wg="function"==typeof Cg?Cg:Hp(!!Cg),gg):wg},gg.curve=function(Cg){return arguments.length?(kg=Cg,null!=Tg&&(Sg=kg(Tg)),gg):kg},gg.context=function(Cg){return arguments.length?(null==Cg?Tg=Sg=null:Sg=kg(Tg=Cg),gg):Tg},gg},Pa.curveBasis=function(gg){return new Ba(gg)},Pa.curveMonotoneX=function(gg){return new tl(gg)},Pa.curveNatural=function(gg){return new ol(gg)},Pa.curveCardinal=Np,Pa.curveCatmullRom=Op,Pa.curveStep=function(gg){return new il(gg,.5)},Pa.curveStepAfter=function(gg){return new il(gg,1)},Pa.curveStepBefore=function(gg){return new il(gg,0)},Pa.curveLinear=qp,Pa.timeMillisecond=Vp,Pa.timeSecond=Wp,Pa.timeMinute=Rp,Pa.timeHour=Gp,Pa.timeDay=Jp,Pa.timeWeek=Kp,Pa.timeMonth=e_,Pa.timeYear=t_,Pa.formatDefaultLocale=ul,Pa.formatLocale=f_,Pa.timeFormatLocale=ml,Pa.timeFormatDefaultLocale=ds,Pa.scaleLinear=td,Pa.scaleLog=sd,Pa.scalePow=cd,Pa.scaleTime=function(){return _d(t_,e_,Kp,Jp,Gp,Rp,Wp,Vp,Pa.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Pa.axisRight=function(gg){return fd(Wh,gg)},Pa.axisTop=function(gg){return fd(Zh,gg)},Pa.axisBottom=function(gg){return fd(Rh,gg)},Pa.axisLeft=function(gg){return fd(Gh,gg)},Pa.zoom=function(){function gg(Zg){Zg.on("wheel.zoom",kg).on("mousedown.zoom",Sg).on("dblclick.zoom",Cg).on("touchstart.zoom",zg).on("touchmove.zoom",Mg).on("touchend.zoom touchcancel.zoom",Ug).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",xp)}function yg(Zg,Wg){return(Wg=Math.max(Dg,Math.min(Fg,Wg)))===Zg.k?Zg:new mp(Wg,Zg.x,Zg.y)}function fg(Zg,Wg,Rg){var Gg=Wg[0]-Rg[0]*Zg.k,Jg=Wg[1]-Rg[1]*Zg.k;return Gg===Zg.x&&Jg===Zg.y?Zg:new mp(Zg.k,Gg,Jg)}function xg(Zg,Wg){var Rg=Zg.invertX(Wg[0][0])-Lg,Gg=Zg.invertX(Wg[1][0])-Hg,Jg=Zg.invertY(Wg[0][1])-Xg,Kg=Zg.invertY(Wg[1][1])-qg;return Zg.translate(Gg>Rg?(Rg+Gg)/2:Math.min(0,Rg)||Math.max(0,Gg),Kg>Jg?(Jg+Kg)/2:Math.min(0,Jg)||Math.max(0,Kg))}function vg(Zg){return[(+Zg[0][0]+ +Zg[1][0])/2,(+Zg[0][1]+ +Zg[1][1])/2]}function bg(Zg,Wg,Rg){Zg.on("start.zoom",function(){wg(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){wg(this,arguments).end()}).tween("zoom",function(){var Gg=this,Jg=arguments,Kg=wg(Gg,Jg),Qg=Pg.apply(Gg,Jg),ey=Rg||vg(Qg),ty=Math.max(Qg[1][0]-Qg[0][0],Qg[1][1]-Qg[0][1]),ny=Gg.__zoom,oy="function"==typeof Wg?Wg.apply(Gg,Jg):Wg,ay=Ng(ny.invert(ey).concat(ty/ny.k),oy.invert(ey).concat(ty/oy.k));return function(iy){if(1===iy)iy=oy;else{var ly=ay(iy),ry=ty/ly[2];iy=new mp(ry,ey[0]-ly[0]*ry,ey[1]-ly[1]*ry)}Kg.zoom(null,iy)}})}function wg(Zg,Wg){for(var Rg,Gg=0,Jg=Og.length;Gg<Jg;++Gg)if((Rg=Og[Gg]).that===Zg)return Rg;return new Tg(Zg,Wg)}function Tg(Zg,Wg){this.that=Zg,this.args=Wg,this.index=-1,this.active=0,this.extent=Pg.apply(Zg,Wg)}function kg(){if(Eg.apply(this,arguments)){var Zg=wg(this,arguments),Wg=this.__zoom,Rg=Math.max(Dg,Math.min(Fg,Wg.k*Math.pow(2,-Pa.event.deltaY*(Pa.event.deltaMode?120:1)/500))),Gg=cm(this);if(Zg.wheel)Zg.mouse[0][0]===Gg[0]&&Zg.mouse[0][1]===Gg[1]||(Zg.mouse[1]=Wg.invert(Zg.mouse[0]=Gg)),clearTimeout(Zg.wheel);else{if(Wg.k===Rg)return;Zg.mouse=[Gg,Wg.invert(Gg)],Vm(this),Zg.start()}eg(),Zg.wheel=setTimeout(function(){Zg.wheel=null,Zg.end()},Vg),Zg.zoom("mouse",xg(fg(yg(Wg,Rg),Zg.mouse[0],Zg.mouse[1]),Zg.extent))}}function Sg(){if(!Yg&&Eg.apply(this,arguments)){var Zg=wg(this,arguments),Wg=fm(Pa.event.view).on("mousemove.zoom",function(){if(eg(),!Zg.moved){var Kg=Pa.event.clientX-Gg,Qg=Pa.event.clientY-Jg;Zg.moved=Kg*Kg+Qg*Qg>Bg}Zg.zoom("mouse",xg(fg(Zg.that.__zoom,Zg.mouse[0]=cm(Zg.that),Zg.mouse[1]),Zg.extent))},!0).on("mouseup.zoom",function(){Wg.on("mousemove.zoom mouseup.zoom",null),bc(Pa.event.view,Zg.moved),eg(),Zg.end()},!0),Rg=cm(this),Gg=Pa.event.clientX,Jg=Pa.event.clientY;bm(Pa.event.view),gp(),Zg.mouse=[Rg,this.__zoom.invert(Rg)],Vm(this),Zg.start()}}function Cg(){if(Eg.apply(this,arguments)){var Zg=this.__zoom,Wg=cm(this),Rg=Zg.invert(Wg),Gg=xg(fg(yg(Zg,Zg.k*(Pa.event.shiftKey?.5:2)),Wg,Rg),Pg.apply(this,arguments));eg(),0<Ig?fm(this).transition().duration(Ig).call(bg,Gg,Wg):fm(this).call(gg.transform,Gg)}}function zg(){if(Eg.apply(this,arguments)){var Zg,Wg,Rg,Gg,Jg=wg(this,arguments),Kg=Pa.event.changedTouches,Qg=Kg.length;for(gp(),Wg=0;Wg<Qg;++Wg)Rg=Kg[Wg],Gg=[Gg=xm(this,Kg,Rg.identifier),this.__zoom.invert(Gg),Rg.identifier],Jg.touch0?Jg.touch1||(Jg.touch1=Gg):(Jg.touch0=Gg,Zg=!0);if(Ag&&(Ag=clearTimeout(Ag),!Jg.touch1))return Jg.end(),void((Gg=fm(this).on("dblclick.zoom"))&&Gg.apply(this,arguments));Zg&&(Ag=setTimeout(function(){Ag=null},jg),Vm(this),Jg.start())}}function Mg(){var Zg,Wg,Rg,Gg,Jg=wg(this,arguments),Kg=Pa.event.changedTouches,Qg=Kg.length;for(eg(),Ag&&(Ag=clearTimeout(Ag)),Zg=0;Zg<Qg;++Zg)Wg=Kg[Zg],Rg=xm(this,Kg,Wg.identifier),Jg.touch0&&Jg.touch0[2]===Wg.identifier?Jg.touch0[0]=Rg:Jg.touch1&&Jg.touch1[2]===Wg.identifier&&(Jg.touch1[0]=Rg);if(Wg=Jg.that.__zoom,Jg.touch1){var ey=Jg.touch0[0],ty=Jg.touch0[1],ny=Jg.touch1[0],oy=Jg.touch1[1],ay=(ay=ny[0]-ey[0])*ay+(ay=ny[1]-ey[1])*ay,iy=(iy=oy[0]-ty[0])*iy+(iy=oy[1]-ty[1])*iy;Wg=yg(Wg,Math.sqrt(ay/iy)),Rg=[(ey[0]+ny[0])/2,(ey[1]+ny[1])/2],Gg=[(ty[0]+oy[0])/2,(ty[1]+oy[1])/2]}else{if(!Jg.touch0)return;Rg=Jg.touch0[0],Gg=Jg.touch0[1]}Jg.zoom("touch",xg(fg(Wg,Rg,Gg),Jg.extent))}function Ug(){var Zg,Wg,Rg=wg(this,arguments),Gg=Pa.event.changedTouches,Jg=Gg.length;for(gp(),Yg&&clearTimeout(Yg),Yg=setTimeout(function(){Yg=null},jg),Zg=0;Zg<Jg;++Zg)Wg=Gg[Zg],Rg.touch0&&Rg.touch0[2]===Wg.identifier?delete Rg.touch0:Rg.touch1&&Rg.touch1[2]===Wg.identifier&&delete Rg.touch1;Rg.touch1&&!Rg.touch0&&(Rg.touch0=Rg.touch1,delete Rg.touch1),Rg.touch0?Rg.touch0[1]=this.__zoom.invert(Rg.touch0[0]):Rg.end()}var Ag,Yg,Eg=yp,Pg=fp,Dg=0,Fg=1/0,Lg=-Fg,Hg=Fg,Xg=Lg,qg=Hg,Ig=250,Ng=Ah,Og=[],$g=xd("start","zoom","end"),jg=500,Vg=150,Bg=0;return gg.transform=function(Zg,Wg){var Rg=Zg.selection?Zg.selection():Zg;Rg.property("__zoom",xp),Zg===Rg?Rg.interrupt().each(function(){wg(this,arguments).start().zoom(null,"function"==typeof Wg?Wg.apply(this,arguments):Wg).end()}):bg(Zg,Wg)},gg.scaleBy=function(Zg,Wg){gg.scaleTo(Zg,function(){return this.__zoom.k*("function"==typeof Wg?Wg.apply(this,arguments):Wg)})},gg.scaleTo=function(Zg,Wg){gg.transform(Zg,function(){var Rg=Pg.apply(this,arguments),Gg=this.__zoom,Jg=vg(Rg),Kg=Gg.invert(Jg);return xg(fg(yg(Gg,"function"==typeof Wg?Wg.apply(this,arguments):Wg),Jg,Kg),Rg)})},gg.translateBy=function(Zg,Wg,Rg){gg.transform(Zg,function(){return xg(this.__zoom.translate("function"==typeof Wg?Wg.apply(this,arguments):Wg,"function"==typeof Rg?Rg.apply(this,arguments):Rg),Pg.apply(this,arguments))})},Tg.prototype={start:function(){return 1==++this.active&&(this.index=Og.push(this)-1,this.emit("start")),this},zoom:function(Zg,Wg){return this.mouse&&"mouse"!==Zg&&(this.mouse[1]=Wg.invert(this.mouse[0])),this.touch0&&"touch"!==Zg&&(this.touch0[1]=Wg.invert(this.touch0[0])),this.touch1&&"touch"!==Zg&&(this.touch1[1]=Wg.invert(this.touch1[0])),this.that.__zoom=Wg,this.emit("zoom"),this},end:function(){return 0==--this.active&&(Og.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(Zg){Yd(new hp(gg,Zg,this.that.__zoom),$g.apply,$g,[Zg,this.that,this.args])}},gg.filter=function(Zg){return arguments.length?(Eg="function"==typeof Zg?Zg:Km(!!Zg),gg):Eg},gg.extent=function(Zg){return arguments.length?(Pg="function"==typeof Zg?Zg:Km([[+Zg[0][0],+Zg[0][1]],[+Zg[1][0],+Zg[1][1]]]),gg):Pg},gg.scaleExtent=function(Zg){return arguments.length?(Dg=+Zg[0],Fg=+Zg[1],gg):[Dg,Fg]},gg.translateExtent=function(Zg){return arguments.length?(Lg=+Zg[0][0],Hg=+Zg[1][0],Xg=+Zg[0][1],qg=+Zg[1][1],gg):[[Lg,Xg],[Hg,qg]]},gg.duration=function(Zg){return arguments.length?(Ig=+Zg,gg):Ig},gg.interpolate=function(Zg){return arguments.length?(Ng=Zg,gg):Ng},gg.on=function(){var Zg=$g.on.apply($g,arguments);return Zg===$g?gg:Zg},gg.clickDistance=function(Zg){return arguments.length?(Bg=(Zg=+Zg)*Zg,gg):Math.sqrt(Bg)},gg},Pa.zoomIdentity=Qm,Pa.drag=function(){function gg(Fg){Fg.on("mousedown.drag",yg).on("touchstart.drag",vg).on("touchmove.drag",bg).on("touchend.drag touchcancel.drag",wg).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function yg(){if(!zg&&Mg.apply(this,arguments)){var Fg=Tg("mouse",Ug.apply(this,arguments),cm,this,arguments);Fg&&(fm(Pa.event.view).on("mousemove.drag",fg,!0).on("mouseup.drag",xg,!0),bm(Pa.event.view),vc(),Cg=!1,kg=Pa.event.clientX,Sg=Pa.event.clientY,Fg("start"))}}function fg(){if(vm(),!Cg){var Fg=Pa.event.clientX-kg,Lg=Pa.event.clientY-Sg;Cg=Fg*Fg+Lg*Lg>Dg}Yg.mouse("drag")}function xg(){fm(Pa.event.view).on("mousemove.drag mouseup.drag",null),bc(Pa.event.view,Cg),vm(),Yg.mouse("end")}function vg(){if(Mg.apply(this,arguments)){var Fg,Lg,Hg=Pa.event.changedTouches,Xg=Ug.apply(this,arguments),qg=Hg.length;for(Fg=0;Fg<qg;++Fg)(Lg=Tg(Hg[Fg].identifier,Xg,xm,this,arguments))&&(vc(),Lg("start"))}}function bg(){var Fg,Lg,Hg=Pa.event.changedTouches,Xg=Hg.length;for(Fg=0;Fg<Xg;++Fg)(Lg=Yg[Hg[Fg].identifier])&&(vm(),Lg("drag"))}function wg(){var Fg,Lg,Hg=Pa.event.changedTouches,Xg=Hg.length;for(zg&&clearTimeout(zg),zg=setTimeout(function(){zg=null},500),Fg=0;Fg<Xg;++Fg)(Lg=Yg[Hg[Fg].identifier])&&(vc(),Lg("end"))}function Tg(Fg,Lg,Hg,Xg,qg){var Ig,Ng,Og,$g=Hg(Lg,Fg),jg=Eg.copy();if(Yd(new wc(gg,"beforestart",Ig,Fg,Pg,$g[0],$g[1],0,0,jg),function(){return null!=(Pa.event.subject=Ig=Ag.apply(Xg,qg))&&(Ng=Ig.x-$g[0]||0,Og=Ig.y-$g[1]||0,!0)}))return function Vg(Bg){var Zg,Wg=$g;switch(Bg){case"start":Yg[Fg]=Vg,Zg=Pg++;break;case"end":delete Yg[Fg],--Pg;case"drag":$g=Hg(Lg,Fg),Zg=Pg;}Yd(new wc(gg,Bg,Ig,Fg,Zg,$g[0]+Ng,$g[1]+Og,$g[0]-Wg[0],$g[1]-Wg[1],jg),jg.apply,jg,[Bg,Xg,qg])}}var kg,Sg,Cg,zg,Mg=Tc,Ug=kc,Ag=Sc,Yg={},Eg=xd("start","drag","end"),Pg=0,Dg=0;return gg.filter=function(Fg){return arguments.length?(Mg="function"==typeof Fg?Fg:wm(!!Fg),gg):Mg},gg.container=function(Fg){return arguments.length?(Ug="function"==typeof Fg?Fg:wm(Fg),gg):Ug},gg.subject=function(Fg){return arguments.length?(Ag="function"==typeof Fg?Fg:wm(Fg),gg):Ag},gg.on=function(){var Fg=Eg.on.apply(Eg,arguments);return Fg===Eg?gg:Fg},gg.clickDistance=function(Fg){return arguments.length?(Dg=(Fg=+Fg)*Fg,gg):Math.sqrt(Dg)},gg},Pa.brush=function(){return Cp(cg)},Pa.brushX=function(){return Cp(sg)},Pa.brushY=function(){return Cp(dg)},Pa.mouse=cm,Pa.select=fm,Pa.selection=xc,Pa.selectAll=function(gg){return"string"==typeof gg?new fc([document.querySelectorAll(gg)],[document.documentElement]):new fc([null==gg?[]:gg],ym)},Pa.selectorAll=pm,Pa.touch=xm}(this.d3=this.d3||{});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}_isFullscreen(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}_getParent(){var b=Polymer.dom(this).getOwnerRoot();return b?b.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.$.svgContainer.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}toggleFullscreen(b){b.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen()}fullScreenChanged(){this._fullScreenChanged()}_fullScreenChanged(){requestAnimationFrame(()=>{var b=this._isFullscreen(),c=this._getParent();b?(this.fullscreen=!0,this.style.position='fixed',this.style.top='0',this.style.left='0',this.style.right='0',this.style.bottom='0',this.style.zIndex='1000',this.style['border-radius']='0px',document.body.style.overflow='hidden',c&&c.classList.add('fullscreen')):(this.fullscreen=!1,this.style.position='',this.style.top='',this.style.left='',this.style.right='',this.style.bottom='',this.style.zIndex='',this.style['border-radius']='',document.body.style.overflow='',c&&c.classList.remove('fullscreen')),this.notifyResize&&this.notifyResize()})}computeFullscreenIcon(b){return b?'fullscreen-exit':'fullscreen'}}};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:'FiraSans-Regular';letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;cursor:default !important;letter-spacing:normal !important;stroke:none !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;@apply --svg-text;mix-blend-mode:exclusion;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>class DeviceSVG extends WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)){static get is(){return'device-svg'}static get properties(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},selectedClass:{type:String,value:'selected'},exceedingClass:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectableItems:{type:Object,value:function(){return{}}},multi:Boolean,item:{type:Object,value:function(){return{}}},items:{type:Array,value:function(){return[]}},exceeding:{type:Array,value:function(){return[]}},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}static get observers(){return['_srcChanged(src)','_selectableItemsChanged(selectableItems)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}_openedChanged(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}open(a){this.setSvg(a.detail),this.opened=!0}close(){this.opened=!1}_srcChanged(a){a&&this._recentSrc!==a&&(this._recentSrc=a,this._fetch(a,'GET','include','xml').then(this._registerXML.bind(this)).catch(b=>{console.log(a,b)}))}_registerXML(a){if(a&&a.documentElement){var b=document.importNode(a.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(b,this.$.svgContainer.firstChild),this._svg=d3.select(b).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){var c=this._svg.attr('viewBox').split(' ');this._width=c[2]-c[0],this._height=c[3]-c[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}_initialize(){setTimeout(()=>{this._selectableItemsChanged(),this._selectSelected(),this._selectExceeds()},0)}_initZoom(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}_selectedItemsChanged(){var a=this.item,b=this.items;a&&Object.keys(a).length||b&&b.length?(!this.src&&(a&&a.svg&&a.svg.path?this.src=a.svg.path:0<b.length&&b[b.length-1].svg&&b[b.length-1].svg.path&&(this.src=b[b.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.selectedClass).classed(this.selectedClass,!1)}_exceedingChanged(){var a=this.exceeding;a&&a.length?(!this.src&&a[a.length-1].svg&&a[a.length-1].svg.path&&(this.src=a[a.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.exceedingClass).classed(this.exceedingClass,!1)}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}_initialChanged(a){this.src&&a&&this._resetZoom()}_selectableItemsChanged(){if(this._mainG&&this._mainG.node&&this.src&&this.selectableItems&&this.selectableItems.items){var a=this;for(var b in this.selectableItems.items)this._mainG.selectAll(this.selectableItems.items[b]).classed('selectable',!0).classed('style-scope',!0).classed('device-svg',!0).attr('title',b).on('click',function(){a._zoomToElement(this),a._mainG.selectAll('.clicked').classed('clicked',!1),d3.select(this).classed('clicked',!0)});void 0!==this.selectableItems.minZoom&&(this.minZoom=this.selectableItems.minZoom),void 0!==this.selectableItems.maxZoom&&(this.maxZoom=this.selectableItems.maxZoom),void 0!==this.selectableItems.zoomPartition&&(this.zoomPartition=this.selectableItems.zoomPartition),this._initZoom(),this._inialized=!0}}_zoom(){this._mainG.attr('transform',d3.event.transform)}_zoomToElement(a){if(void 0!==a&&this._svg.node()){var b=this._calcCenterZoom(a),c=d3.zoomIdentity.translate(b.x,b.y).scale(b.k);this._svg.node().__zoom=c,this._mainG.transition(300).attr('transform',c)}}_selectSelected(){requestAnimationFrame(()=>{var a=this.multi?this.items||[]:[];this.item&&Object.keys(this.item).length&&-1===a.indexOf(this.item)&&a.push(this.item);var b;if(b=ShadyCSS&&!0===ShadyCSS.nativeShadow?this.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),b&&a&&a.length){for(var d,f,g,h=0;h<a.length;h++)if(a[h]&&a[h].color&&a[h].svg&&a[h].svg.selector&&b&&b.sheet&&b.sheet.cssRules&&b.sheet.insertRule){d=a[h].svg.selector.split(',');for(var l=0;l<d.length;l++){f=d[l]+'.'+this.selectedClass,g=!1;for(var m=0;m<b.sheet.cssRules.length;m++)b.sheet.cssRules[h].selectorText===f&&(g=!0);!1===g&&b.sheet.insertRule(f+' {\nfill: '+a[h].color+' !important;\n}',b.sheet.cssRules.length)}}this.updateStyles(),this.select(a,this.selectedClass)}})}_selectExceeds(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.exceedingClass)}select(a,b){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+b).classed(b,!1);var c,d=[];if(Array.isArray(a)){for(var f=0;f<a.length;f++)a[f].svg&&a[f].svg.selector&&d.push(a[f].svg.selector);d=d.join(',')}else d=a&&a.svg&&a.svg.selector?a.svg.selector:'';if(''===d||(c=this._mainG.selectAll(d)).classed(b,!0).empty())return void(this.opened&&this._resetZoom());var g,h=[],l=this;c.each(function(){g=this.getBoundingClientRect(),h[0]=(h[0]>g.left?g.left:h[0])||g.left,h[1]=(h[1]>g.top?g.top:h[1])||g.top,h[2]=(h[2]<g.right?g.right:h[2])||g.right,h[3]=(h[3]<g.bottom?g.bottom:h[3])||g.bottom}),g={left:h[0],top:h[1],height:h[3]-h[1],width:h[2]-h[0]},this.opened&&this._zoomToElement(g)}}_calcCenterZoom(a){var b=this.getBoundingClientRect();if(void 0===b||void 0===a||0===b.height||0===b.width)return{x:0,y:0,k:1};var c,g,f=b.height/b.width;c=void 0===a.nodeType?a:a.getBoundingClientRect();var h=this._mainG.node().getBBox(),l=this._mainG.node().getBoundingClientRect(),m=h.width/l.width||1,n=(c.left-l.left)*m+h.x,o=(c.top-l.top)*m+h.y,p=this._height,q=this._width,r=this._ratio,s=this.zoomPartition;return g=f<r?Math.min(q/(s*c.width*m*f),p/(s*c.height*m)):Math.min(q/(s*c.width*m),q*f/(s*c.height*m)),g<this.minZoom?g=this.minZoom:g>this.maxZoom&&(g=this.maxZoom),f<r?(n=-g*n+(p/f-g*c.width*m)/2,o=-g*o+(p-g*c.height*m)/2):(n=-g*n+(q-g*c.width*m)/2,o=-g*o+(q*f-g*c.height*m)/2),isNaN(n)||isNaN(o)||isNaN(g)?{x:0,y:0,k:1}:{x:n,y:o,k:g}}notifyResize(){this._resetZoom()}_resetZoom(a){a&&(a.preventDefault(),a.stopPropagation()),requestAnimationFrame(()=>{if(this.opened&&this._mainG&&this._mainG.node&&this.src&&(this._mainG.selectAll('.clicked').classed('clicked',!1),!this.initiallyZoomToAll)){if(this.item&&Object.keys(this.item).length||this.items&&this.items.length)return void this._selectSelected();if(this.exceeding.length)return void this._selectExceeds();if(this.initial){var b;if(!(b=this._mainG.selectAll(this.initial)).empty())return void this.select([{svg:{selector:this.initial}}],'initial')}this._zoomToElement(this._mainG.node())}})}}customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}static get observers(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}_domainXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.domain(b)}_domainYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.domain(b).nice()}_rangeXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.range(b)}_rangeYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.range(b).nice()}_computeScaleFn(b,c,d){if(void 0!==b){var f='time'===b?d3.scaleTime():'ln'===b?d3.scaleLog().base(Math.E):'log'===b?d3.scaleLog().base(c||10):'log\u2082'===b?d3.scaleLog().base(2):'log\u2081\u2080'===b?d3.scaleLog().base(10):'\u221A'===b?d3.scalePow().exponent(0.5):'pow'===b?d3.scalePow().exponent(c||1):d3.scaleLinear();return'x'===d?(f.ticks(this.ticksX||10),this.domainX&&f.domain(this.domainX),this.rangeX&&f.range(this.rangeX)):'y'===d&&(f.ticks(this.ticksY||10),this.domainY&&f.domain(this.domainY),this.rangeY&&f.range(this.rangeY),f.nice()),f}}static get _VALID_SCALES(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}_SCALE_USES_BASE(b){return'log'===b||'pow'===b}_IS_LOG_SCALE(b){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return class extends WebvisualMixins.ScaleMixin(c){constructor(){super()}static get properties(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTransitionTime:{type:Number,value:100},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:8},axisMargin:{type:Number,value:6},axisSizeX:{type:Number,value:24},axisSizeY:{type:Number,value:54},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}static get observers(){return['_setDateNumberFormat(localeNumber, localeDate)']}_rangeXChanged(e){super._rangeXChanged(e),e[1]&&(this.ticksX=Math.ceil(e[1]/50))}_rangeYChanged(e){super._rangeYChanged(e),e[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.axisMargin)):this.ticksY=Math.ceil(e[0]/50))}_computeAxisNode(e,f,i,j){if(void 0!==e){var k=this.axisColor||'';i=i||this.axisTitle||'';var l=this._isVertical(f);if(j&&j.node){var n=j.node();n&&n.parentElement&&n.parentElement.removeChild(n),j=null}var o=e.append('svg:g').classed('axis',!0).attr('orient',f).classed('y',l).classed('vertical',l).classed('x',!l).style('color',k);return o.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,o)).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),o.append('svg:title').text(i),o.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,f)),o.node()._genitor=this,o.node()._axis=o,o._left=0,o._right=0,o._bottom=0,o._top=0,o}}_updateAxisBrushGenerator(e,f,i){i=i||8;var j=[[0,0],[e[1],e[0]]];'left'===f?j[0][0]=-i:'right'===f?j[1][0]=i:'top'===f?j[0][1]=-i:'bottom'===f&&(j[1][1]=i),this.extent(j)}_computeAxisGenerator(e,f,i,j){if(e&&void 0!==f&&void 0!==i){var k=this.tickSize||6;return('left'===e?d3.axisLeft(f):'right'===e?d3.axisRight(f):'top'===e?d3.axisTop(f):d3.axisBottom(f)).tickSize(k).tickFormat(this._computeFormatFn(i,j))}}_setAxisProperties(e,f,i){e.classed('expanded',i),f.tickFormat(i?null:'')}_removeAxes(){if(this.axisX&&this.axisX.node){var e=this.axisX.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisX=null}if(this.axisY&&this.axisY.node){var e=this.axisY.node();e&&e.parentElement&&e.parentElement.removeChild(e),this.axisY=null}delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}_onAxisClicked(e){var f=e.classed('expanded');e.classed('expanded',!f),this.sizeChanged()}_onAxisContextMenu(e){d3.event&&d3.event.preventDefault();'left'===e||'right'===e?(this.axisY._isBrushed=!1,this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.scaleX.domain(this.domainX),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}_onAxisMouseover(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}_onAxisMouseleave(){}_onAxisDragStart(){d3.select(this).raise().classed('dragged',!0);var e=d3.select(this).classed('vertical');e?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}_onAxisDragged(){var e=d3.select(this).classed('vertical'),f=0,i=0;e?f=(this._axis._left||0)+d3.event.x-this._startleft:i=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+f+','+i+')')}_onAxisDragEnd(){d3.select(this).classed('dragged',!1);var j,e=d3.select(this).classed('vertical'),f=0,i=0,k=this._genitor;if(e){if(f=(this._axis._left||0)+d3.event.x-this._startleft,j=f>k.rangeX[1]/2?'right':'left',j!==k.axisOrientY)return k.axisGeneratorY=k._computeAxisGenerator(k.axisOrientY=j,k.scaleY,k.scalingY,k.scaleBaseY).ticks(k.ticksY).tickSize(k.tickSize).tickFormat(k.axisY.classed('expanded')?k._computeFormatFn(k.scalingY,k.scaleBaseY):''),k.axisY=k._computeAxisNode(k._axisInsertionPoint,j,k.item&&k.item.mount,k.axisY).classed('expanded',!0).call(k.axisGeneratorY),void k.sizeChanged();f=this._axis._left}else{if(i=(this._axis._top||0)+d3.event.y-this._starttop,j=i>k.rangeY[0]/2?'bottom':'top',j!==k.axisOrientX)return k.axisGeneratorX=k._computeAxisGenerator(k.axisOrientX=j,k.scaleX,k.scalingX,k.scaleBaseX).ticks(k.ticksX).tickFormat(k.axisX.classed('expanded')?k._computeFormatFn(k.scalingX,k.scaleBaseX):''),k.axisX=k._computeAxisNode(k._axisInsertionPoint,j,k.item&&k.item.mount,k.axisX).classed('expanded',!0).call(k.axisGeneratorX),void k.sizeChanged();i=this._axis._top}d3.select(this).attr('transform','translate('+f+','+i+')'),this._startleft=0,this._starttop=0}_onAxisBrushEnd(e){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var f=d3.event.selection;if(f){if('y'===e){var j=f.map(this.scaleY.invert,this.scaleY).sort((k,l)=>{return k>l});this.axisY._isBrushed=!0,this.scaleY.domain(j).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)}else{var j=f.map(this.scaleX.invert,this.scaleX).sort((k,l)=>{return k>l});this.axisX._isBrushed=!0,this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)}this.redraw()}}}_axisColorChanged(e){this.axisX&&this.axisX.style('color',e),this.axisY&&this.axisY.style('color',e)}static get _VALID_AXIS_POSITIONS(){return['top','right','bottom','bottom']}_isVertical(e){return'left'===e||'right'===e}_computeFormatFn(e){return'time'===e?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}sizeChanged(){}redraw(){}formatTime(e){return(d3.timeSecond(e)<e?this.timeFormat('.%L'):d3.timeMinute(e)<e?this.timeFormat(':%S'):d3.timeHour(e)<e?this.timeFormat('%H:%M'):d3.timeDay(e)<e?this.timeFormat('%X'):d3.timeMonth(e)<e?d3.timeWeek(e)<e?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(e)<e?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeRange(e,f,i){var j=(f[1]-f[0]).valueOf()/i;return(100>j?this.timeFormat(':%S.%L'):500>j?this.timeFormat(':%M:%S.%L'):5E3>j?this.timeFormat(':%M:%S'):2E4>j?this.timeFormat('%H:%M:%S'):6E4>j?this.timeFormat('%H:%M'):36E5>j?this.timeFormat('%X'):864E5>j?this.timeFormat('%d.%m'):6048E5>j?this.timeFormat('%d.%m'):24192E5>j?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(e)}formatTimeAbsolute(e){var f=e%315576E5,i=(e-f)/315576E5,j=f%864E5,k=(f-j)/864E5,l=j%36E5,n=(j-l)/36E5,o=l%6E4,p=(l-o)/6E4,q=o%1E3,r=(o-q)/1E3,t='';return i&&(t+=i+'y '),k&&(t+=k+'d '),n&&(t+=n+'h '),p&&(t+=p+'m '),r&&(t+=r+'s '),q&&(t+=q+'ms'),t}formatNumber(e){return this.numberFormat(',g')(e)}formatIndicator(e,f){return e&&e.from&&e.to?f<e.from||f>e.to?'\u2717':'\u2713':f?'\u2717':'\u2713'}_setDateNumberFormat(e,f){void 0===f||void 0===e||(f&&(this.localeDate=f,d3.timeFormatDefaultLocale(f),this.timeFormat=d3.timeFormatLocale(f).format),e&&(this.localeNumber=e,d3.formatDefaultLocale(e),this.numberFormat=d3.formatLocale(e).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}};</script><dom-module id="device-graph"><template><style></style></template><script>class DeviceGraph extends WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-graph'}static get properties(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3},viewLength:{type:Number,value:2e4},storeInside:{type:Boolean,value:!0,readOnly:!0},languageResourcePrefix:{type:String,value:void 0,readOnly:!0}}}constructor(){super(),this._isAttached=!1,this._chart=null,this._areaGenerator=d3.area().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y0(()=>{return this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?this._chart._height:this.scaleY(0)}).y1(a=>{return this.scaleY(a.y)}),this._lineGenerator=d3.line().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y(a=>{return this.scaleY(a.y)}),this.bisectDate=d3.bisector((a,b)=>{return a.x-b})}static get observers(){return['_itemChanged(item)','_lineChanged(hasLine)','_areaChanged(hasArea)','_thresholdChanged(item.threshold)']}get _containerRoot(){var a=Polymer.dom(this).getOwnerRoot();return a?a.host||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.item&&this.addNodes()}disconnectedCallback(){this._isAttached=!1,super.disconnectedCallback(),this.removeNodes()}addNodes(){this._isAttached&&this.clearValues(!0);var a=this._containerRoot;return a&&'DEVICE-CHART'===a.nodeName?a._isAttached?void(this._chart=a,this._axisInsertionPoint=a._axisInsertionPoint,!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(this.hasArea),this._lineChanged(this.hasLine),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',a)}removeNodes(){var a;this.axisX&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this.axisY&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this._areaChanged(),this._lineChanged(),this._thresholdChanged(),this._chart._removeGraph(this)}_areaChanged(a){if(this._chart&&this._chart._area)if(!!a)this._area&&this._area.node||(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',void 0===this.item.theshold?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([]));else if(this._area&&this._area.node){var b=this._area.node();b&&b.parentElement&&b.parentElement.removeChild(b),this._area=null}}_lineChanged(a){if(this._chart&&this._chart._line)if(!!a)this._line&&this._line.node||(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount).on('mouseover',this._onAxisMouseover.bind(this))),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',void 0===this.item.theshold?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([]));else if(this._line&&this._line.node){var b=this._line.node();b&&b.parentElement&&b.parentElement.removeChild(b),this._line=null}}_thresholdChanged(a){if(this._chart&&this._chart._boundery)if(a)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){var b=this.boundery.node();b&&b.parentElement&&b.parentElement.removeChild(b),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.mount||'#000')}}_setColorProperties(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}_itemChanged(a){return this._isAttached?a&&a.mount?void this.addNodes():void this.removeNodes():void 0}insertValues(a,b){if(void 0!==a){var b=b||(0<this.viewLength?this.viewLength:a.length);if(b&&(a=a.slice(a.length-b,a.length)),a.map(function(g){return{x:+g.x,y:+g.y,state:+g.state}}),this.storeInside){this.values=this.values.concat(a);var c=this.min(this.values,'x'),f=this.max(this.values,'x');void 0!==c&&void 0!==f&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(c<this._chart.domainX[0]&&this._chart.set('domainX',[c,this._chart.domainX[1]]),f>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],f])):this.set('domainX',[c,f])),c=this.min(this.values,'y'),f=this.max(this.values,'y'),void 0!==c&&void 0!==f&&(c===f&&(c--,f++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(c<this._chart.domainY[0]&&this._chart.set('domainY',[c,this._chart.domainY[1]]),f>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],f])):this.set('domainY',[c,f]))}this.renderInsertedValues(a)}}spliceValues(a){for(var b=0;b<a.length;b++){for(var c=this.values.length-1;0<=c&&!(this.values[c].x===a[b].x);c--);-1!==c&&this.values.splice(c,1)}this.redraw()}renderInsertedValues(a){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){var b;this._chart.domainX&&this._chart.domainX.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainX',this.domainX),b=!0),this._chart.domainY&&this._chart.domainY.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainY',this.domainY),b=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(b=!0),this.redraw(b,a)}}sizeChanged(){this._isAttached&&this._chart.sizeChanged()}redraw(a){if(this._isAttached){if(a)return void this._chart.redraw(!0);var c=this.values||[];if(this.hasArea&&this._area.attr('d',this._areaGenerator(c)),this.hasLine&&this._line.attr('d',this._lineGenerator(c)),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);var g,f=[],h=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',k=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',l=this.item.color||'#000';void 0!==this.item.threshold.from&&(g=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:k}),f.push({o:g+'%',c:l}))),void 0!==this.item.threshold.to&&(g=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(g)&&(f.push({o:g+'%',c:l}),f.push({o:g+'%',c:h})));var n=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(f);n.attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.enter().append('stop').attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.exit().remove()}}}_getDomain(a,b){return new Promise((c,f)=>{var g='y'===a,h=g?this.scalingY:this.scalingX;this.requestRange(a).then(k=>{if(k[0]!==void 0&&k[1]!==void 0){g&&k[0]===k[1]&&(k[0]--,k[1]++);var l=this._IS_LOG_SCALE(h);if(l){var n=0<k[0]*k[1];n&&0>=k[0]&&(k[0]=Math.sign(k[1])*Number.EPSILON),n&&0>=k[1]&&(k[1]=Math.sign(k[0])*Number.EPSILON)}b&&('x'===a?this.set('domainX',k):'y'===a&&this.set('domainY',k))}c({domain:k,key:a})}).catch(k=>{f(k)})})}_defined(a){if(!Number.isFinite(a.y))return null;return 0>=a.y&&this.keys&&this.keys.y&&this._IS_LOG_SCALE(this.keys.y.scale)?null:!0}_closestPoint(a){function b(B){var C=c(new Date(B.x))-a[0],D=f(B.y)-a[1];return C*C+D*D}var c=this.scaleX,f=this.scaleY,g=this.values,h=c.invert(a[0]),k=Math.ceil(this._chart._width/g.length),l=Math.pow(Math.ceil(g.length/this._chart._width),2),n=this.bisectDate.left(g,h,0,g.length-1),o=b(g[n]),q=Math.sqrt(o)/l,r=c.invert(a[0]-q),s=this.bisectDate.left(g,r,0,n),t=2*n-s;0>s&&(s=0),t>g.length&&(t=g.length);var w,u=o,z=n;for(A=s;A<t;A+=k)(w=b(g[A]))<u&&(n=A,u=w);z=n;for(var A=n+1;A<t&&A<n+k-1;A++)(w=b(g[A]))<u&&(u=w,z=A);for(var A=n-1;A>s&&A>n-k+1;A--)(w=b(g[A]))<u&&(u=w,z=A);return g[z]}_closestInterpolatedPoint(a,b){function c(A){var B=A.x-a[0],C=A.y-a[1];return B*B+C*C}b=b||this._area.node()||this._line.node();for(var h,k,n,q,f=b.getTotalLength(),g=2*Math.ceil(f/this._chart._width/2),l=Infinity,o=0;o<=f;o+=g)(q=c(n=b.getPointAtLength(o)))<l&&(h=n,k=o,l=q);for(g/=2;0.5<g;){var r,s,t,u,w,z;0<=(t=k-g)&&(w=c(r=b.getPointAtLength(t)))<l?(h=r,k=t,l=w):(u=k+g)<=f&&(z=c(s=b.getPointAtLength(u)))<l?(h=s,k=u,l=z):g/=2}return h={x:this.scaleX(h.x),y:this.scaleY(h.y)},h.distance=Math.sqrt(l),h}setColor(a){super.setColor.call(this,a),this._setColorProperties()}clearValues(a){super.clearValues.call(this,a)}_getStrokeColor(a){if(this.item.threshold)switch(a.state){case 1:return this.getComputedStyleValue('device-state-exceeds-color')||'#F20C0C';case-1:return this.getComputedStyleValue('device-state-deceeds-color')||'#F20C0C';}return this.item.color||'#fff'}_lineWidthChanged(a){this._line&&this._line.attr&&this._line.attr('stroke-width',a)}_interpolationChanged(a){var b;switch(a){case'Basis Spline':b=d3.curveBasis;break;case'Monotoner Spline':b=d3.curveMonotoneX;break;case'Kubischer Spline':b=d3.curveNatural;break;case'Cardinaler Spline':b=d3.curveCardinal;break;case'Catmull-Rom-Spline':b=d3.curveCatmullRom;break;case'Stufe (mitte)':b=d3.curveStep;break;case'Stufe (davor)':b=d3.curveStepAfter;break;case'Stufe (danach)':b=d3.curveStepBefore;break;default:b=d3.curveLinear;}this._areaGenerator.curve(b),this._lineGenerator.curve(b),this.redraw()}_onAxisClicked(a){super._onAxisClicked(a)}_onAxisMouseover(a,b){super._onAxisMouseover(a,b),this._area&&this._area.raise(),this._line&&this._line.raise()}}customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{box-sizing:border-box;position:relative;font-family:inherit;color:white;letter-spacing:normal !important;user-select:none !important;z-index:auto;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:1.25em !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;overflow:visible;font-family:inherit !important;}text{fill:currentColor;stroke:white;stroke-width:0.1;stroke-opacity:0.2;font-size:1em;letter-spacing:-0.0125em;font-family:inherit !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}text.info{fill:var(--primary-text-color);}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.grid .tick line{stroke:currentColor;stroke-opacity:0.15;}.grid{mix-blend-mode:exclusion;}.grid path{stroke-width:0;}.axis{cursor:-webkit-grab;cursor:grab;pointer-events:all;font-family:inherit !important;}.axis.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.axis path, .axis line{fill:currentColor;fill-opacity:0.01;stroke:currentColor;stroke-opacity:0.75;transition:fill-opacity 150ms linear;}.axis:hover path{fill-opacity:0.3;}.axis.expanded path, .axis.expanded line{stroke-opacity:0.9;}.axis.dragged path{fill-opacity:0.2;}.brush .selection{fill:currentColor;fill-opacity:0.5;stroke:currentColor;stroke-width:0;}.axis.vertical .brush .overlay{cursor:default;}.axis:not(.vertical) .brush .overlay{cursor:default;}#graphs .area{fill-opacity:0.2;@apply --chart-area;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--focus-color, currentColor);}#focus > *,
      #delta > *{stroke:var(--focus-color, currentColor);stroke-opacity:0.6;stroke-dasharray:1;stroke-width:1.5px;}marker{fill:var(--focus-color, currentColor);}#delta .line,
      #focus .line{mix-blend-mode:overlay;pointer-events:none;}#zoom{cursor:default;fill:none;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;pointer-events:all;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}.info{font-size:12px;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);mix-blend-mode:exclusion;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{font-size:0.8em;margin-top:0.25em;margin-left:0.25em;margin-right:0.25em;}.button{padding:0.3em;}#controlcontent{color:var(--primary-text-color, #111);position:absolute;top:0;right:var(--control-right, 0px);display:flex;flex-direction:column;}.selectbox > select{opacity:1;}[hidden]{display:none !important;}</style><div id="svgContainer"><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet" on-click="_closeControl"><defs><marker id="arrowToLeft" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m 5.29167,-1.7197893 v 3.439581 L 0,2.6966667e-6 Z"></path></marker><marker id="arrowToRight" markerWidth="20" markerHeight="20" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-10 0 15 10"><path d="m -5.2916667,-1.7197893 v 3.439581 L 3.3333333e-6,2.6966667e-6 Z"></path></marker><marker id="stub" markerWidth="5" markerHeight="5" refX="0" refY="0" orient="auto" markerUnits="strokeWidth" viewBox="-1 -5 2 10"><path d="M0,0 m-1,-5 L1,-5 L1,5 L-1,5 z"></path><path d="M -2,0 M -5,-1 H 1 V 1 H -5 Z"></path></marker><filter x="0" y="0" width="1" height="1" id="solid"><feFlood flood-color="white"></feFlood><feComposite in="SourceGraphic"></feComposite></filter></defs><g id="chart"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><rect id="plot" clip-path="url(#clip)"></rect><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" on-contextmenu="_resetZoom"></rect><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="axis"></g><text id="info" class="focus info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaX" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text><text id="infoDeltaY" class="delta info" x="0" y="0" filter="url(#solid)" hidden=""></text></g></svg><iron-collapse id="controlcontent" opened="[[showControl]]"><div class="selectbox"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="√">√</option><option value="ln">ln</option><option value="log₂">log₂</option><option value="log₁₀">log₁₀</option></select></div><div class="selectbox"><select value="{{modus::change}}"><option value="zoom">zoom</option><option value="delta">delta</option></select></div><div class="checkbox"><input type="checkbox" name="multiX" checked="{{multiAxesX::change}}">mehrere x-Achsen</div><div class="checkbox"><input type="checkbox" name="multiY" checked="{{multiAxesY::change}}">mehrere y-Achsen</div></iron-collapse><section id="control"><icon-button title="settings" icon="tune" checked="{{showControl}}"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></section></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>class DeviceChart extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))){static get is(){return'device-chart'}static get properties(){return{opened:{type:Boolean},gridMult:{type:Number,value:2},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},noLink:{type:Boolean},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},languageResourcePrefix:{type:String,value:'/locales/format/'}}}constructor(){super(),this._width=0,this._height=0,this._graphs=new Set}get _self(){return this}static get observers(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}_localizeChanged(c){this.set('localeDate',c('date')),this.set('localeNumber',c('number'))}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}connectedCallback(){super.connectedCallback(),this._buildLayout()}_buildLayout(){this._svg=d3.select(this.$.svg).attr('height',null).attr('width',null),this._chart=d3.select(this.$.chart),this._control=d3.select(this.$.control),this._controlcontent=d3.select(this.$.controlcontent),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).attr('hidden',!!this.multiAxesX||null).classed('expanded',!0),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).attr('hidden',!!this.multiAxesY||null).classed('expanded',!0),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._info=d3.select(this.$.info),this._focus=d3.select(this.$.focus),this._focusX=d3.select(this.$.focusX),this._focusY=d3.select(this.$.focusY),this._focusDot=d3.select(this.$.focusDot),this._focusDot.on('mouseenter',()=>{this.cancelDebouncer('hideinfo')},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._infoDeltaX=d3.select(this.$.infoDeltaX),this._infoDeltaY=d3.select(this.$.infoDeltaY),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoomBehavior=d3.zoom().scaleExtent([0.99,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom=d3.select(this.$.zoom).call(this._zoomBehavior),this._zoom.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',this._debouncedHideInfo.bind(this),{passive:!0}).on('mousemove',()=>{var c=d3.mouse(this._chart.node());requestAnimationFrame(()=>{var f,h,j;if(this._graphs.forEach(l=>{if(l.values&&l.values.length){var n=l._closestPoint(c),o=Math.pow(c[0]-l.scaleX(n.x),2)+Math.pow(c[1]-l.scaleY(n.y),2);(void 0===j||o<j)&&(j=o,h=n,f=l)}}),h){var k=f.getComputedStyleValue('--device-color')||'#000';if(f.item.threshold)switch(h.state){case 1:k=f.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:k=f.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusedValue=h,this._focusedValue.g=f,this._focusedValue._left=this.multiAxesY?f.axisY._left:this.axisY._left,this._focusedValue._top=this.multiAxesX?f.axisX._top:this.axisX._top,this._focusDot.datum(h).attr('fill',k).attr('r',f.dotRadius),this._showInfo(),this._moveInfo(h)}else this._debouncedHideInfo()})},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}sizeChanged(){this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=requestAnimationFrame(()=>{this.sizeLayout()},0))}sizeLayout(){function c(u,v){return'left'===u?(this._left=n,this._right=0,n-=v):'right'===u?(this._left=0,this._right=k,k+=v):(this._left=0,this._right=0),'top'===u?(this._bottom=0,this._top=j,j-=v):'bottom'===u?(this._bottom=l,this._top=0,l+=v):(this._bottom=0,this._top=0),!0}function f(u,v,w){return this._left+=this._right,this._top+=this._bottom,this._bottom=0,this._right=0,'right'===u?this._left+=v:'bottom'===u&&(this._top+=w),!0}if(this.opened&&this._isAttached){var h=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),0===h.height||0===h.width)return void requestAnimationFrame(()=>{this.sizeChanged()});var j=-2,k=1,l=1,n=-2,o=[];if(this._graphs.forEach(u=>{if(u._isAttached){if(!u.axisX.attr('hidden')){var v=u.axisX.classed('expanded')?u.axisSizeX:u.tickSize+u.axisMargin;o.push(c.call(u.axisX,u.axisOrientX,v))}if(!u.axisY.attr('hidden')){var v=u.axisY.classed('expanded')?u.axisSizeY:u.tickSize+u.axisMargin;o.push(c.call(u.axisY,u.axisOrientY,v))}}}),!this.axisX.attr('hidden')){var r=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.axisMargin;o.push(c.call(this.axisX,this.axisOrientX,r))}if(!this.axisY.attr('hidden')){var r=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.axisMargin;o.push(c.call(this.axisY,this.axisOrientY,r))}Promise.all(o).then(()=>{var u=this.$.svg.getBoundingClientRect();this._width=Math.abs(u.width-Math.abs(n||0)-Math.abs(k||0)),this._height=Math.abs(u.height-Math.abs(l||0)-Math.abs(j||0)),this.set('rangeX',[0,this._width]),this.set('rangeY',[this._height,0]),this._zoom.attr('height',this._height).attr('width',this._width),this._zoomBehavior.translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]);var v=[];this._graphs.forEach(w=>{w._isAttached&&(!w.axisX.attr('hidden')&&v.push(f.call(w.axisX,w.axisOrientX,this._width,this._height)),!w.axisY.attr('hidden')&&v.push(f.call(w.axisY,w.axisOrientY,this._width,this._height)))}),this.axisX.attr('hidden')||v.push(f.call(this.axisX,this.axisOrientX,this._width,this._height)),this.axisY.attr('hidden')||v.push(f.call(this.axisY,this.axisOrientY,this._width,this._height)),Promise.all(v).then(()=>{this._chart._top=j,this._chart._right=k,this._chart._bottom=l,this._chart._left=n,this._control.transition(100).style('transform','translate('+-this._chart._right+'px,'+-this._chart._bottom+'px)'),this._controlcontent.transition(100).style('transform','translate('+-this._chart._right+'px,'+-this._chart._top+'px)'),this._chart.select('clipPath#clip rect').transition(100).attr('width',this._width).attr('height',this._height),this._chart.select('rect#plot').transition(100).attr('width',this._width).attr('height',this._height),this._chart.transition(100).attr('transform','translate('+(-this._chart._left||0)+','+(-this._chart._top||0)+')'),this._focusY.attr('y1',this._height),this._graphs.forEach(w=>{w._isAttached&&(!w.axisX.attr('hidden')&&(w.axisGeneratorX=w._computeAxisGenerator.call(w,w.axisOrientX,w.scaleX,w.scalingX,w.scaleBaseX).ticks(w.ticksX).tickSize(w.tickSize).tickFormat(w.axisX.classed('expanded')?w._computeFormatFn(w.scalingX,w.scaleBaseX):''),w._updateAxisBrushGenerator.call(w.axisBrushGeneratorX,this.rangeX,w.axisOrientX),w.axisX.select('.brush').raise().call(w.axisBrushGeneratorX),w.axisX.attr('transform','translate('+(w.axisX._left||0)+','+(w.axisX._top||0)+')')),!w.axisY.attr('hidden')&&(w.axisGeneratorY=w._computeAxisGenerator.call(w,w.axisOrientY,w.scaleY,w.scalingY,w.scaleBaseY).ticks(w.ticksY).tickSize(w.tickSize).tickFormat(w.axisY.classed('expanded')?w._computeFormatFn(w.scalingY,w.scaleBaseY):''),w._updateAxisBrushGenerator.call(w.axisBrushGeneratorY,this.rangeY,w.axisOrientY),w.axisY.select('.brush').raise().call(w.axisBrushGeneratorY),w.axisY.attr('transform','translate('+(w.axisY._left||0)+','+(w.axisY._top||0)+')')))}),this.axisX.attr('hidden')||(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),this.axisY.attr('hidden')||(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),!this.domainX||!this.domainY||this.domainX.some(w=>{return void 0===w||null===w})||this.domainY.some(w=>{return void 0===w||null===w})?this.redraw(!0):this.redraw()})})}}_redomain(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(c=>{c&&console.warn(c)}))}redraw(c){return this._isAttached?c?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(()=>{this.axisX.attr('hidden')||this.axisX.transition(100).attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')').call(this.axisGeneratorX),this.axisY.attr('hidden')||this.axisY.transition(100).attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')').call(this.axisGeneratorY),this._graphs.forEach(f=>{f._isAttached&&(f.axisX.attr('hidden')?f.set('domainX',this.domainX):f.axisX.transition(100).attr('transform','translate('+(f.axisX._left||0)+','+(f.axisX._top||0)+')').call(f.axisGeneratorX),f.axisY.attr('hidden')?f.set('domainY',this.domainY):f.axisY.transition(100).attr('transform','translate('+(f.axisY._left||0)+','+(f.axisY._top||0)+')').call(f.axisGeneratorY),f.redraw())}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope device-chart',!0).classed('device-chart',!0),this._updateInfo()},0)):void 0}_multiAxesChanged(c,f){if(this._isAttached){var h;this._graphs.forEach(j=>{j._isAttached&&(h=!c||null,j.axisX.attr('hidden',h),h=!f||null,j.axisY.attr('hidden',h))}),h=!!c||null,this.axisX.attr('hidden',h),h=!!f||null,this.axisY.attr('hidden',h),this._redomain(),this.sizeChanged()}}_addGraph(c){this._graphs.add(c),this.sizeChanged()}_removeGraph(c){this._graphs.delete(c),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),c=null,this.sizeChanged()}_getDomain(){return new Promise((c,f)=>{var h=[],j=[];this._graphs.forEach(k=>{h.push(k._getDomain('x',this.multiAxesX)),j.push(k._getDomain('y',this.multiAxesY))}),Promise.all(h).then(k=>{for(var l,n,o,r=0;r<k.length;r++)l=void 0===l||l>k[r].domain[0]?k[r].domain[0]:l,n=void 0===n||n<k[r].domain[1]?k[r].domain[1]:n;(l===void 0||n===void 0)&&c(),o=[l,n],this.set('domainX',o),this.scaleX.domain(o),!1===this.multiAxesX&&this._graphs.forEach(u=>{u.axisX._isBrushed=!1,u.set('domainX',o),u.scaleX.domain(o)}),Promise.all(j).then(u=>{for(var v,w,z,A=0;A<u.length;A++)v=void 0===v||v>u[A].domain[0]?u[A].domain[0]:v,w=void 0===w||w<u[A].domain[1]?u[A].domain[1]:w;(v===void 0||w===void 0)&&c(),z=[v,w],this.set('domainY',z),!1===this.multiAxesY&&this._graphs.forEach(B=>{B.axisY._isBrushed=!1,B.set('domainY',z)}),c()}).catch(u=>{f(u)})}).catch(k=>{f(k)})})}insertValues(c){this._graphs.forEach(f=>{f&&f._isAttached&&f.item&&f.item.mount&&c[f.item.mount]&&f.insertValues(c[f.item.mount])})}clearValues(){this._graphs.forEach(c=>{c&&c._isAttached&&c.clearValues()})}_moveInfo(c){if(Number.isFinite(c.g.scaleY(c.y))){this._info.text(this.formatTime(+c.x)+' '+this.formatNumber(+c.y));var f=this._fixedValue;if(f){var h=Math.abs(f.x-c.x),j=Math.abs(f.y-c.y);this._infoDeltaX.text(this.formatTimeAbsolute(h)),this._infoDeltaY.text(this.formatNumber(j))}this._updateInfo()}}_showInfo(){this.cancelDebouncer('hideinfo'),this._info.attr('hidden',null),this._focus.attr('hidden',null),this._fixedValue&&this._showDelta()}_showDelta(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}_debouncedHideInfo(){this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(()=>{this._hideInfo()},1e3)}_hideInfo(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}_hideDelta(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}_updateInfo(){if(this._focusedValue&&''!==this._info.attr('hidden')){var c=this._focusedValue,f=c.g.scaleX(+c.x),h=c.g.scaleY(+c.y);if(f&&h){switch(this._alignText(this._info.node(),f,h,null,1.5*this._focusDot.attr('r')),this.modus){case'delta':var j=this._fixedValue;if(j&&j.x&&c.x!==j.x&&j.y&&c.y!==j.y){var k=j.g.scaleX(+j.x),l=j.g.scaleY(+j.y);this._deltaX.attr('x1',f).attr('x2',k).attr('y1',l).attr('y2',l),this._deltaY.attr('y1',h).attr('y2',l),l<h||f<k?(this._deltaY.attr('x1',f).attr('x2',f),this._alignText(this._infoDeltaY.node(),f,(l+h)/2,null,null,null,'middle')):(this._deltaY.attr('x1',k).attr('x2',k),this._alignText(this._infoDeltaY.node(),k,(l+h)/2,null,null,null,'middle')),this._deltaX,this._alignText(this._infoDeltaX.node(),(k+f)/2,l,null,null,null,'middle'),this._deltaDot.attr('cy',l).attr('cx',k)}else this._hideDelta();case'integral':default:this._focusX.attr('x1',c._left).attr('x2',f).attr('y2',h).attr('y1',h),this._focusY.attr('y1',c._top).attr('y2',h).attr('x2',f).attr('x1',f),this._focusDot.attr('cy',h).attr('cx',f);}this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}}_alignText(c,f,h,j,k,l,n){j=j||0,k=k||0;var o=c.getBBox(),r=this._height,u=this._width,l=l||'middle',n=n||'ideographic',v=j,w=k;'middle'===l?v+=o.width/2:'end '===l?v+=o.width:void 0;'ideographic'===n?w+=o.height:'middle'===n?w+=o.height/2:'hanging'===n?w-=o.height:void 0;0>h-w?n='hanging':h+w>r&&(h=r-w),f+v>u?l='end':0>f-v&&(l='start'),c.setAttribute('x',f+j),c.setAttribute('y',h-k),c.setAttribute('text-anchor',l),c.setAttribute('alignment-baseline',n)}_modusChanged(c){switch(c){case'zoom':break;case'delta':break;case'integral':break;default:}}_dotClicked(c){switch(this.modus){case'zoom':var f=(c.g.domainX[1]-c.g.domainX[0])/4,h=(c.g.domainY[1]-c.g.domainY[0])/4,j=c.g.scaleX(+c.x),k=c.g.scaleY(+c.y)||0;d3.event.selection=[[j-f,k-h],[j+f,k+h]];break;case'delta':var l=this._fixedValue;l&&l.x&&l.y&&l.x===c.x&&l.y===c.y?(this._fixedValue=null,this._hideDelta()):(this._fixedValue=c,this._deltaDot.datum(this._fixedValue).attr('cx',n=>{return n.g.scaleX(n.x)}).attr('cy',n=>{return n.g.scaleY(n.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));break;case'integral':}this._updateInfo()}closeMenu(){this.showMenu=!1}changeInterpolation(c){this._graphs.forEach(h=>{h&&h._isAttached&&h.set('interpolation',c)})}_onAxisBrushEnd(c){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){var f=d3.event.selection;if(f){if(!this.multiAxesY&&!this.multiAxesX)return'x'===c&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===c&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));var h='y'===c;if(h){var j=f.map(this.scaleY.invert,this.scaleY).sort((k,l)=>{return k>l});this._graphs.forEach(k=>{k.scaleY.domain(j).nice(),k.axisGeneratorY.scale(k.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(j).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(this._height/(f[1]-f[0])).translate(0,-f[0]))}if(!h){var j=f.map(this.scaleX.invert,this.scaleX).sort((k,l)=>{return k>l});this._graphs.forEach(k=>{k.scaleX.domain(j),k.axisGeneratorX.scale(k.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(this._width/(f[1]-f[0])).translate(-f[0],0))}this._graphs.forEach(k=>{k.redraw()})}}}_onZoomed(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){var c=d3.event.transform;if(this.domainX&&this.domainY){var j,f=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),h=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());this.multiAxesX||(j=f.domain(),this._graphs.forEach(k=>{k.scaleX.domain(j),k.axisGeneratorX.scale(k.scaleX)}),this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.multiAxesY||(j=h.domain(),this._graphs.forEach(k=>{k.scaleY.domain(j),k.axisGeneratorY.scale(k.scaleY)}),this.scaleY.domain(j),this.axisY.call(this.axisGeneratorY.scale(h))),this._graphs.forEach(k=>{k.redraw()}),this._isZoomed=1!==c.k||0!==c.x||0!==c.y}}}_onAxisContextMenu(c){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():super._onAxisContextMenu(c)}_closeControl(){this.showControl=!1}_resetZoom(c){d3.event?d3.event.preventDefault():c&&c.preventDefault&&c.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._zoom.call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this._graphs.forEach(f=>{f.axisX._isBrushed=!1,f.axisY._isBrushed=!1,f.scaleX.domain(f.domainX),f.scaleY.domain(f.domainY),f.axisX.call(f.axisGeneratorX.scale(f.scaleX)),f.axisY.call(f.axisGeneratorY.scale(f.scaleY))}),this._hideInfo(),this._redomain()}}customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>