<html><head></head><body><div hidden="" by-polymer-bundler=""><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items.indexOf(a)},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var b=this._valueToItem(this.selected);b?this._selection.select(b):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var c,b=0;c=this.items[b];b++)if(this._valueForItem(c)==a)return b;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;var b=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return b==void 0?a.getAttribute(this.attrForSelected):b},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(b){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',b,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var d,b=a.target,c=this.items;b&&b!=this;){if(d=c.indexOf(b),0<=d){var f=this._indexToValue(d);return void this._itemActivate(f,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(e){return null!==e&&e!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(b){return this._valueToItem(b)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><script>Polymer({is:'iron-media-query',properties:{queryMatches:{type:Boolean,value:!1,readOnly:!0,notify:!0},query:{type:String,observer:'queryChanged'},full:{type:Boolean,value:!1},_boundMQHandler:{value:function(){return this.queryHandler.bind(this)}},_mq:{value:null}},attached:function(){this.style.display='none',this.queryChanged()},detached:function(){this._remove()},_add:function(){this._mq&&this._mq.addListener(this._boundMQHandler)},_remove:function(){this._mq&&this._mq.removeListener(this._boundMQHandler),this._mq=null},queryChanged:function(){this._remove();var a=this.query;a&&(!this.full&&'('!==a[0]&&(a='('+a+')'),this._mq=window.matchMedia(a),this._add(),this.queryHandler(this._mq))},queryHandler:function(a){this._setQueryMatches(a.matches)}});</script><dom-module id="tabs-overlay" assetpath="components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>class TabsOverlay extends Polymer.Element{static get is(){return'tabs-overlay'}static get properties(){return{target:{type:Object,observer:'_targetChanged'}}}constructor(){super(),this._lastTarget=void 0,this._transitionsInFlight=[]}ready(){super.ready(),this.addEventListener('transitionend',a=>this._onTransitionend(a))}_targetChanged(a,b){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(b,a),this._lastTarget=this.target)}_onTransitionend(a){let b=this._transitionsInFlight.indexOf(a.propertyName);0<=b&&this._transitionsInFlight.splice(b,1),this._transitionsInFlight.length||this._moveComplete()}_moveComplete(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}_move(a,b){const c=a||b,d=b||a;if(c||d){const f=a?1:0,g=b?1:0;Polymer.dom.flush();const h=this.getBoundingClientRect(),j=window.getComputedStyle(this),k=c.getBoundingClientRect(),l=d.getBoundingClientRect();if(0===l.top&&0===l.right&&0===l.bottom&&0===l.left&&0===l.width&&0===l.height)return this.style.transitionProperty='none',this.style.opacity=g,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';let m=parseFloat(j.top||'0')+(k.top-h.top),n=parseFloat(j.right||'0')-(k.right-h.right),o=parseFloat(j.bottom||'0')-(k.bottom-h.bottom),p=parseFloat(j.left||'0')+(k.left-h.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';let q=[this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=f+''];m+=l.top-k.top,n-=l.right-k.right,o-=l.bottom-k.bottom,p+=l.left-k.left;const r=[0.2,0.2,0.2,0.2,0.2],s=[0,0,0,0,0];k.left<l.left&&k.right<l.right?s[3]=0.1:k.left>l.left&&k.right>l.right&&(s[1]=0.1),k.top<l.top&&k.bottom<l.bottom?s[0]=0.1:k.top>l.top&&k.bottom>l.bottom&&(s[2]=0.1);const t=[m+'px',n+'px',o+'px',p+'px',g+''],u=['top','right','bottom','left','opacity'];for(let v=0;v<q.length;v++)q[v]!==t[v]&&(0===r[v]&&0===s[v]||this._transitionsInFlight.push(u[v]));setTimeout(()=>{this.style.transitionDuration=r.map(v=>{return v+'s'}).join(', '),this.style.transitionDelay=s.map(v=>{return v+'s'}).join(', '),this.style.top=m+'px',this.style.right=n+'px',this.style.bottom=o+'px',this.style.left=p+'px',this.style.opacity=g+''},0)}}}customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>class TabsContainer extends Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element){static get is(){return'tabs-container'}static get properties(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}static get observers(){return['_onSelectedItemChanged(selectedItem)']}connectedCallback(){super.connectedCallback(),this._addScrollListeners()}_addScrollListeners(){this.$.container.addEventListener('scroll',a=>this._onScroll(a),{passive:!0}),this.$.container.addEventListener('wheel',a=>this._onWheel(a),{passive:!0})}_onSelectedItemChanged(a){a&&(!this.multi&&(this.$.overlay.target=a),setTimeout(()=>{this.vertical?this.$.container.scrollTop=a.offsetTop-this.$.container.offsetTop-this.$.container.clientHeight/2+a.clientHeight/2:this.$.container.scrollLeft=a.offsetLeft-this.$.container.offsetLeft-this.$.container.clientWidth/2+a.clientWidth/2},0))}_onWheel(a){if(a){let b,c;switch(a.deltaMode){case 0:c=0.2;break;case 1:c=20;break;case 2:c=this.$.container.offsetHeight;break;default:c=1;}this.vertical?(b=a.deltaY||0,this.$.container.scrollTop+=b*c):(b=a.deltaX||0,this.$.container.scrollLeft+=b*c)}}_onScroll(a,b){a.stopImmediatePropagation();let c;this.vertical?(c=b&&-b.ddy||0,this.$.container.scrollTop+=c):(c=b&&-b.ddx||0,this.$.container.scrollLeft+=c)}reset(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){return document.createElement('paper-ripple')},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><dom-module id="ripple-container" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>class RippleContainer extends Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element){static get is(){return'ripple-container'}constructor(){super(),this._isDown=!1}ready(){super.ready(),this.addEventListener('focus',a=>this._onFocus(a),!0),this.addEventListener('blur',a=>this._onBlur(a),!0),this.addEventListener('down',a=>this._rippleDown(a)),this.addEventListener('up',a=>this._rippleUp(a))}_onFocus(a){this._isDown||this._rippleDown(a)}_onBlur(a){this._rippleUp(a)}_rippleDown(a){this._isDown=!0,this.getRipple().downAction(a)}_rippleUp(a){this._isDown=!1,this.getRipple().upAction(a)}}customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>class TabElement extends Polymer.Element{static get is(){return'tab-element'}}customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="logo-element" assetpath="components/"><template strip-whitespace=""><style strip-whitespace="">:host{color:currentColor;overflow:hidden;box-sizing:border-box;--calculated-icon-padding:var(--icon-padding, 0.5em);height:100%;padding:var(--calculated-icon-padding);transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}a.link{pointer-events:all;}a.link:visited,
    a.link:link{color:currentColor;}.circle{display:inherit;fill:var(--highlight-color, #D75E5E);stroke:var(--highlight-color, #7ED75E);animation:none;transform-origin:9px center;stroke-width:1px;transform:scale(0);fill-opacity:0;stroke-opacity:0.5;transition-property:transform, fill-opacity, stroke-opacity;transition-timing-function:cubic-bezier(0.6, 0, 0.3, 1);transition-duration:1000ms;}.circle.animated{transform:scale(1);fill-opacity:0.3;stroke-opacity:0;}.circle.animated:nth-of-type(1){transition-delay:0ms;}.circle.animated:nth-of-type(2){transition-delay:250ms;}.circle.animated:nth-of-type(3){transition-delay:450ms;}.circle.animated:nth-of-type(4){transition-delay:600ms;}.circle.animated:nth-of-type(5){transition-delay:700ms;}.circle.animated:nth-of-type(6){transition-delay:750ms;}.circle.animated:nth-of-type(2n){stroke:currentColor !important;}svg path{fill:currentColor;shape-rendering:geometricPrecision;transition:color 0.3s cubic-bezier(0.6, 0, 0.3, 1);}@media all and (max-device-width: 240px){:host(:not([show-always])) path:not(#Logo){display:none !important;}}</style><a href$="[[href]]" class="link"><svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 69 21" height="100%" preserveAspectRatio="xMinYMin"><g><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><circle class="circle" r="9" cy="10.5" cx="9" transform="scale(0)" fill="#D75E5E"></circle><path id="Logo" d="m 7.9210071,11.1186 c 0.00247,0 0.069517,-0.1271 0.1238027,-0.2191 C 8.4858763,10.1535 11.162848,3.516 11.818367,1.953 10.931859,1.6606 9.9845675,1.5 8.9998427,1.5 4.0292496,1.5 0,5.5296 0,10.5004 0,11.3201 0.11180425,12.1132 0.31703415,12.8676 0.88207947,12.4999 4.326143,10.1165 4.331304,10.1333 c 0.5515731,2.0313 2.4095879,3.0788 3.5897094,0.9853 z M 15.877984,4.6983 C 15.20168,6.298 12.925902,11.6648 12.315732,12.8725 11.11385,15.0587 9.1934613,17.0984 6.5917182,17.2155 3.5379728,17.3529 1.9207658,16.1872 1.0502452,14.7192 2.562154,17.5633 5.5546275,19.5 8.9998427,19.5 13.970672,19.5 18,15.4704 18,10.5004 18,8.2887 17.200507,6.2651 15.877984,4.6983"></path></g><g transform="translate(21,0)"><path id="f" d="m 1.645165,19.1834 0,0.3029 -1.261087,0 0,1.4579 -0.350028,0 0,-3.1071 1.709207,0 0,0.3028 -1.359179,0 0,1.0435 1.261087,0"></path><path id="o" d="m 2.649377,19.3696 c 0,0.8059 0.350557,1.3184 0.896593,1.3184 0.537215,0 0.892182,-0.5172 0.892182,-1.2996 0,-0.7873 -0.354967,-1.2997 -0.892182,-1.2997 -0.536862,0 -0.896593,0.5124 -0.896593,1.2809 z m 2.162267,0.019 c 0,0.9549 -0.513573,1.607 -1.265674,1.607 -0.765685,0 -1.270085,-0.6475 -1.270085,-1.6303 0,-0.9271 0.523101,-1.5838 1.270085,-1.5838 0.752101,0 1.265674,0.6521 1.265674,1.6071"></path><path id="r" d="m 6.165884,19.3138 c 0.378256,0 0.485875,-0.01 0.630544,-0.061 0.224236,-0.079 0.350204,-0.2748 0.350204,-0.5403 0,-0.2376 -0.107267,-0.4192 -0.294101,-0.4984 -0.144845,-0.065 -0.252112,-0.075 -0.695997,-0.075 l -0.210123,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658595,0.019 0.863954,0.098 0.312979,0.1211 0.5044,0.4146 0.5044,0.7824 0,0.41 -0.214533,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420422,0 -0.784386,-1.3275 -0.541802,0 0,1.3275 -0.350204,0 0,-3.1071 0.550976,0"></path><path id="s" d="m 9.822473,18.6432 c -0.03264,-0.3541 -0.252112,-0.5545 -0.607079,-0.5545 -0.32674,0 -0.569501,0.2004 -0.569501,0.4751 0,0.1306 0.06528,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.410894,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410895,0.8851 -1.017974,0.8851 -0.378255,0 -0.677296,-0.1351 -0.85478,-0.3772 -0.12138,-0.1678 -0.17272,-0.3355 -0.186834,-0.6197 l 0.34103,0 c 0.03264,0.4474 0.280339,0.6895 0.714522,0.6895 0.378255,0 0.644481,-0.2237 0.644481,-0.5357 0,-0.1538 -0.06087,-0.2748 -0.187011,-0.382 C 9.607939,19.6863 9.528372,19.6445 9.220157,19.5093 8.883891,19.3604 8.678532,19.2485 8.571089,19.16 8.388842,19.011 8.295336,18.8201 8.295336,18.5918 c 0,-0.4703 0.392546,-0.8105 0.938935,-0.8105 0.340854,0 0.625604,0.1351 0.784563,0.3727 0.09333,0.1351 0.130731,0.2701 0.144669,0.4892 l -0.34103,0"></path><path id="c" d="m 12.876922,18.6989 c -0.08892,-0.4098 -0.327092,-0.6102 -0.709758,-0.6102 -0.555916,0 -0.90612,0.5031 -0.90612,1.3043 0,0.8058 0.345441,1.2996 0.91053,1.2996 0.434536,0 0.700585,-0.2795 0.751925,-0.8012 l 0.331679,0 C 13.199078,20.5995 12.811469,21 12.185688,21 c -0.793913,0 -1.298313,-0.6194 -1.298313,-1.5976 0,-0.9829 0.5044,-1.6211 1.284199,-1.6211 0.579204,0 0.952697,0.3353 1.032264,0.9176 l -0.326916,0"></path><path id="h" d="m 15.805228,19.1741 0,-1.337 0.350027,0 0,3.1071 -0.350027,0 0,-1.4814 -1.461859,0 0,1.4814 -0.350381,0 0,-3.1071 0.350381,0 0,1.337 1.461859,0"></path><path id="u" d="m 17.402052,17.8371 0,1.8308 c 0,0.4751 0.01888,0.5914 0.112207,0.7359 0.116793,0.177 0.354967,0.2842 0.639718,0.2842 0.331679,0 0.593141,-0.1445 0.686646,-0.3821 0.05134,-0.121 0.06051,-0.2421 0.06051,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.07463,0.7453 -0.149609,0.3634 -0.527864,0.5777 -1.022913,0.5777 -0.499637,0 -0.877892,-0.2143 -1.027324,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.350204,0"></path><path id="n" d="m 20.53113,17.8371 1.494498,2.5854 0,-2.5854 0.326915,0 0,3.1071 -0.382666,0 -1.4855,-2.5806 0,2.5806 -0.331679,0 0,-3.1071 0.378432,0"></path><path id="g" d="m 25.504909,19.4024 0,1.2762 C 25.210985,20.893 24.860428,21 24.477585,21 c -0.840666,0 -1.345242,-0.6055 -1.345242,-1.6163 0,-0.9783 0.504576,-1.6024 1.298489,-1.6024 0.583615,0 0.962047,0.3308 1.031911,0.9131 l -0.326563,0 c -0.09351,-0.4148 -0.317742,-0.6057 -0.705348,-0.6057 -0.57444,0 -0.924468,0.4891 -0.924468,1.2997 0,0.8291 0.354791,1.3042 0.975808,1.3042 0.237998,0 0.476525,-0.07 0.705348,-0.2048 l 0,-0.7826 -0.630544,0 0,-0.3028 0.947933,0"></path><path id="s2" d="m 27.806905,18.6432 c -0.03229,-0.3541 -0.251759,-0.5545 -0.606726,-0.5545 -0.327093,0 -0.569854,0.2004 -0.569854,0.4751 0,0.1306 0.06545,0.2469 0.186658,0.3261 0.10268,0.07 0.10268,0.07 0.555916,0.2749 0.411071,0.1817 0.574264,0.2842 0.691057,0.4239 0.11203,0.1397 0.172721,0.3213 0.172721,0.5216 0,0.5311 -0.410718,0.8851 -1.017974,0.8851 -0.378255,0 -0.676943,-0.1351 -0.854427,-0.3772 -0.121733,-0.1678 -0.173073,-0.3355 -0.187187,-0.6197 l 0.341206,0 c 0.03264,0.4474 0.280163,0.6895 0.714346,0.6895 0.378256,0 0.644658,-0.2237 0.644658,-0.5357 0,-0.1538 -0.06069,-0.2748 -0.186835,-0.382 -0.09809,-0.084 -0.177483,-0.1258 -0.485875,-0.261 -0.336266,-0.1489 -0.541625,-0.2608 -0.649068,-0.3493 -0.182071,-0.149 -0.2754,-0.3399 -0.2754,-0.5682 0,-0.4703 0.392193,-0.8105 0.938582,-0.8105 0.340854,0 0.625781,0.1351 0.78474,0.3727 0.09333,0.1351 0.130554,0.2701 0.144668,0.4892 l -0.341206,0"></path><path id="z" d="m 30.791314,17.8371 0,0.2377 -1.601941,2.5666 1.573713,0 0,0.3028 -1.984784,0 0,-0.2701 1.587827,-2.5388 -1.489558,0 0,-0.2982 1.914743,0"></path><path id="e" d="m 33.089075,19.1834 0,0.3029 -1.26091,0 0,1.1551 1.391818,0 0,0.3028 -1.742199,0 0,-3.1071 1.70956,0 0,0.3028 -1.359179,0 0,1.0435 1.26091,0"></path><path id="n2" d="m 34.340636,17.8371 1.494321,2.5854 0,-2.5854 0.327093,0 0,3.1071 -0.383196,0 -1.484794,-2.5806 0,2.5806 -0.331856,0 0,-3.1071 0.378432,0"></path><path id="t" d="m 38.772613,17.8371 0,0.3028 -0.812967,0 0,2.8043 -0.350028,0 0,-2.8043 -0.808027,0 0,-0.3028 1.971022,0"></path><path id="r2" d="m 39.977245,19.3138 c 0.378255,0 0.485875,-0.01 0.630543,-0.061 0.22406,-0.079 0.350028,-0.2748 0.350028,-0.5403 0,-0.2376 -0.10709,-0.4192 -0.293925,-0.4984 -0.145021,-0.065 -0.252111,-0.075 -0.695997,-0.075 l -0.210122,0 0,1.1739 0.219473,0 z m -0.0187,-1.4767 c 0.481112,0 0.658596,0.019 0.863955,0.098 0.312802,0.1211 0.504399,0.4146 0.504399,0.7824 0,0.41 -0.214709,0.6894 -0.639894,0.8433 l 0.817378,1.3834 -0.420421,0 -0.784563,-1.3275 -0.541625,0 0,1.3275 -0.350204,0 0,-3.1071 0.550975,0"></path><path id="u2" d="m 42.44261,17.8371 0,1.8308 c 0,0.4751 0.0187,0.5914 0.11203,0.7359 0.116794,0.177 0.354968,0.2842 0.639894,0.2842 0.331503,0 0.593142,-0.1445 0.686471,-0.3821 0.05134,-0.121 0.06069,-0.2421 0.06069,-0.638 l 0,-1.8308 0.350381,0 0,1.8353 c 0,0.4939 -0.0094,0.5776 -0.0748,0.7453 -0.149608,0.3634 -0.527864,0.5777 -1.022737,0.5777 -0.499636,0 -0.877891,-0.2143 -1.0275,-0.5777 -0.06545,-0.1677 -0.0748,-0.2514 -0.0748,-0.7453 l 0,-1.8353 0.35038,0"></path><path id="m" d="m 45.72112,17.8371 0.873481,2.7251 0.877892,-2.7251 0.527511,0 0,3.1071 -0.331326,0 0,-2.7576 -0.896593,2.7576 -0.350557,0 -0.896593,-2.7576 0,2.7576 -0.331503,0 0,-3.1071 0.527688,0"></path><path id="J" d="m 3.997442,3.1045 0,8.0812 c 0,1.8718 -0.06104,2.3284 -0.366259,2.8912 -0.472819,0.8372 -1.418988,1.2177 -3.05145,1.2177 -0.12191,0 -0.320388,0 -0.579733,-0.015 l 0,-1.6284 0.335561,0 c 0.884948,-0.015 1.358121,-0.1524 1.541074,-0.4719 0.152608,-0.2283 0.16778,-0.4563 0.16778,-1.9478 l 0,-8.1268 1.953027,0"></path><path id="Ãœ" d="m 13.227832,1.1109 c 0,0.624 -0.503165,1.1263 -1.113772,1.1263 -0.625604,0 -1.128945,-0.5023 -1.128945,-1.1108 0,-0.6389 0.503341,-1.1264 1.128945,-1.1264 0.610607,0 1.113772,0.5022 1.113772,1.1109 z m -2.837623,0 c 0,0.624 -0.503517,1.1263 -1.113949,1.1263 C 8.650304,2.2372 8.147316,1.7349 8.147316,1.1264 8.147316,0.4875 8.650304,0 9.27626,0 c 0.610432,0 1.113949,0.5022 1.113949,1.1109 z m -1.77025,1.9936 0,5.8287 c 0,1.0195 0.03034,1.3548 0.183482,1.75 0.274341,0.6848 0.960988,1.0808 1.891807,1.0808 1.083428,0 1.769722,-0.4869 1.983372,-1.4002 0.07657,-0.3198 0.09139,-0.6241 0.09139,-1.4306 l 0,-5.8287 1.953027,0 0,5.8592 c 0,1.461 -0.07604,1.9632 -0.396428,2.6023 -0.579909,1.2024 -1.922329,1.8871 -3.63136,1.8871 -1.708678,0 -3.051626,-0.6847 -3.63136,-1.8871 C 6.743501,10.9269 6.667462,10.4247 6.667462,8.9637 l 0,-5.8592 1.952498,0"></path><path id="L" d="m 19.452995,3.1045 0,8.4921 4.409042,0 0,1.6587 -6.407939,0 0,-10.1508 1.998897,0"></path><path id="I" d="m 25.693155,13.2553 1.952815,0 0,-10.1507 -1.952815,0 0,10.1507 z"></path><path id="C" d="M 36.174929,6.4072 C 35.991799,5.2352 35.320325,4.596 34.282945,4.596 c -1.510553,0 -2.456368,1.385 -2.456368,3.6067 0,2.222 0.945815,3.5768 2.47154,3.5768 1.190165,0 1.831294,-0.746 1.953204,-2.2831 l 1.739199,0 c -0.122086,2.6173 -1.342948,3.9567 -3.616363,3.9567 -2.791753,0 -4.576999,-2.0544 -4.576999,-5.235 0,-1.8566 0.549388,-3.3026 1.617466,-4.2614 0.778211,-0.6846 1.769721,-1.0501 2.868321,-1.0501 2.166678,0 3.448407,1.248 3.585489,3.5006 l -1.693505,0"></path><path id="H" d="m 45.985228,7.1527 0,-4.0482 1.952851,0 0,10.1508 -1.952851,0 0,-4.4894 -4.042783,0 0,4.4894 -1.953204,0 0,-10.1508 1.953204,0 0,4.0482 4.042783,0"></path></g></svg></a></template><script>class LogoElement extends Polymer.Element{static get is(){return'logo-element'}static get properties(){return{href:{type:String}}}connectedCallback(){super.connectedCallback(),this._addListners()}_addListners(){this.addEventListener('mouseenter',this._addClass.bind(this)),this.addEventListener('mouseleave',this._removeClass.bind(this))}_addClass(){this._circles||(this._circles=Polymer.dom(this.root).querySelectorAll('.circle')),requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.add('animated')})}.bind(this))}_removeClass(){this._circles&&requestAnimationFrame(function(){Array.prototype.forEach.call(this._circles,function(a){a.classList&&a.classList.remove('animated')})}.bind(this))}}customElements.define(LogoElement.is,LogoElement);</script></dom-module><dom-module id="iron-collapse" assetpath="../bower_components/iron-collapse/"><template><style>:host{display:block;transition-duration:var(--iron-collapse-transition-duration, 300ms);-webkit-transition-duration:var(--iron-collapse-transition-duration, 300ms);overflow:visible;}:host(.iron-collapse-closed){display:none;}:host(:not(.iron-collapse-opened)){overflow:hidden;}</style><slot></slot></template></dom-module><script>Polymer({is:'iron-collapse',behaviors:[Polymer.IronResizableBehavior],properties:{horizontal:{type:Boolean,value:!1,observer:'_horizontalChanged'},opened:{type:Boolean,value:!1,notify:!0,observer:'_openedChanged'},transitioning:{type:Boolean,notify:!0,readOnly:!0},noAnimation:{type:Boolean},_desiredSize:{type:String,value:''}},get dimension(){return this.horizontal?'width':'height'},get _dimensionMax(){return this.horizontal?'maxWidth':'maxHeight'},get _dimensionMaxCss(){return this.horizontal?'max-width':'max-height'},hostAttributes:{role:'group',"aria-hidden":'true',"aria-expanded":'false'},listeners:{transitionend:'_onTransitionEnd'},toggle:function(){this.opened=!this.opened},show:function(){this.opened=!0},hide:function(){this.opened=!1},updateSize:function(a,b){a='auto'===a?'':a;var c=b&&!this.noAnimation&&this.isAttached&&this._desiredSize!==a;if(this._desiredSize=a,this._updateTransition(!1),c){var d=this._calcSize();''===a&&(this.style[this._dimensionMax]='',a=this._calcSize()),this.style[this._dimensionMax]=d,this.scrollTop=this.scrollTop,this._updateTransition(!0),c=a!==d}this.style[this._dimensionMax]=a,c||this._transitionEnd()},enableTransition:function(a){Polymer.Base._warn('`enableTransition()` is deprecated, use `noAnimation` instead.'),this.noAnimation=!a},_updateTransition:function(a){this.style.transitionDuration=a&&!this.noAnimation?'':'0s'},_horizontalChanged:function(){this.style.transitionProperty=this._dimensionMaxCss;var a='maxWidth'===this._dimensionMax?'maxHeight':'maxWidth';this.style[a]='',this.updateSize(this.opened?'auto':'0px',!1)},_openedChanged:function(){this.setAttribute('aria-expanded',this.opened),this.setAttribute('aria-hidden',!this.opened),this._setTransitioning(!0),this.toggleClass('iron-collapse-closed',!1),this.toggleClass('iron-collapse-opened',!1),this.updateSize(this.opened?'auto':'0px',!0),this.opened&&this.focus()},_transitionEnd:function(){this.style[this._dimensionMax]=this._desiredSize,this.toggleClass('iron-collapse-closed',!this.opened),this.toggleClass('iron-collapse-opened',this.opened),this._updateTransition(!1),this.notifyResize(),this._setTransitioning(!1)},_onTransitionEnd:function(a){Polymer.dom(a).rootTarget===this&&this._transitionEnd()},_calcSize:function(){return this.getBoundingClientRect()[this.dimension]+'px'}});</script><dom-module id="collapse-button" assetpath="components/"><template strip-whitespace=""><style include="button-style">:host{display:block;}.content{display:flex;box-sizing:border-box;@apply --collapse-content;}:host([horizontal]) .content{flex-direction:row;}:host(:not([horizontal])) .content{flex-direction:column;}:host([horizontal]) .button,
      :host([horizontal]) ::slotted(*){height:100%;}:host(:not([horizontal])) .button,
      :host(:not([horizontal])) ::slotted(*){width:100%;}::slotted(*){box-sizing:border-box;font-size:0.8em;}[hidden]{display:hidden !important;}</style><div class="button" on-tap="toggle"><paper-ripple id="ink" recenters=""></paper-ripple><iron-icon class="left" icon="[[icon]]" hidden$="[[!icon]]"></iron-icon><span>[[title]]</span><iron-icon class="right" icon="[[_expandIcon]]"></iron-icon></div><iron-collapse opened$="[[opened]]"><div class="content"><slot></slot></div></iron-collapse></template><script>class CollapseElement extends Polymer.Element{static get is(){return'collapse-button'}static get properties(){return{opened:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},horizontal:{type:Boolean,value:!1,reflectToAttribute:!0},title:{type:String},icon:{type:String},_expandIcon:{type:String,computed:'_computeExpandIcon(opened)'}}}_computeExpandIcon(a){return a?'expand-less':'expand-more'}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened=!this.opened}}customElements.define(CollapseElement.is,CollapseElement);</script></dom-module><dom-module id="toggle-button" assetpath="components/"><template strip-whitespace=""><style>:host{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;position:relative;outline:none;margin:0em;box-sizing:border-box;text-align:center;float:left;clear:both;padding:0.75em 1.5em;cursor:pointer;}:host([disabled]){pointer-events:none;}.bar{position:absolute;height:100%;width:100%;border-radius:0.5em;pointer-events:none;opacity:0.75;transition:background-color linear 100ms;background-color:var(--toggle-button-unchecked-bar-color, #000000);@apply --toggle-button-unchecked-bar);}.button{position:absolute;top:-0.125em;left:0;height:1.25em;width:1.25em;border-radius:50%;box-shadow:0 1px 5px 0 rgba(0, 0, 0, 0.6);transition:-webkit-transform linear 100ms, background-color linear 100ms;transition:transform linear 100ms, background-color linear 100ms;will-change:transform;background-color:var(--toggle-button-unchecked-button-color, --paper-grey-50);@apply --toggle-button-unchecked-button;}.button.dragging{-webkit-transition:none;transition:none;}:host([checked]:not([disabled])) .bar{opacity:0.5;background-color:var(--toggle-button-checked-bar-color, --primary-color);@apply --toggle-button-checked-bar;}:host([disabled]) .bar{background-color:#000;opacity:0.2;}:host([checked]) .button{-webkit-transform:translate(1.25em, 0);transform:translate(1.25em, 0);}:host([checked]:not([disabled])) .button{background-color:var(--toggle-button-checked-button-color, --primary-color);@apply --toggle-button-checked-button;}:host([disabled]) .button{background-color:var(--disabled-text-color);opacity:1;}#ink{position:absolute;top:-1.125em;left:-1.125em;right:auto;bottom:auto;width:3.5em;height:3.5em;opacity:0.8;pointer-events:none;color:var(--toggle-button-unchecked-ink-color, --primary-text-color);}:host([checked]) #ink{color:var(--toggle-button-checked-ink-color, --primary-color);}.container{display:inline-block;position:relative;width:2.5em;height:1em;margin:0.25em 1px;}.content{position:relative;display:inline-block;vertical-align:middle;padding-left:0.75em;pointer-events:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;}::slotted(iron-icon){margin-right:0.75em;}[hidden]{display:none !important;}</style><slot name="icon"></slot><section class="container"><paper-ripple id="ink" class="circle"></paper-ripple><section id="toggleBar" class="bar"></section><section id="toggleButton" class="button"></section></section><section class="content"><slot></slot></section></template><script>class ToggleButton extends Polymer.Element{static get is(){return'toggle-button'}static get properties(){return{checked:{type:Boolean,notify:!0,reflectToAttribute:!0},role:{type:String,reflectToAttribute:!0,readOnly:!0,value:'button'},tabindex:{type:Number,reflectToAttribute:!0,value:0}}}connectedCallback(){super.connectedCallback(),Polymer.Gestures.addListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.addListener(this,'track',a=>this._ontrack(a))}disconnectedCallback(){super.disconnectedCallback(),Polymer.Gestures.removeListener(this,'tap',a=>this._onclicked(a)),Polymer.Gestures.removeListener(this,'track',a=>this._ontrack(a))}_ontrack(a){const b=a.detail;'start'===b.state?this._trackStart(b):'track'===b.state?this._trackMove(b):'end'===b.state&&this._trackEnd(b)}_trackStart(){this._width=this.$.toggleBar.offsetWidth/2,this._trackChecked=this.checked,this.$.toggleButton.classList.add('dragging')}_trackMove(a){const b=a.dx;this._x=Math.min(this._width,Math.max(0,this._trackChecked?this._width+b:b)),this.translate3d(this._x+'px',0,0,this.$.toggleButton)}_trackEnd(){this.$.toggleButton.classList.remove('dragging'),this.transform('',this.$.toggleButton)}_onclicked(){this.checked=!this.checked}}customElements.define(ToggleButton.is,ToggleButton);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>class SVGData extends WebvisualMixins.DataMixin(WebvisualMixins.FetchMixin(Polymer.Element)){static get is(){return'svg-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},room:{type:String,observer:'_load'},data:{type:Object,value:function(){return{}},notify:!0}}}_load(){if(super._load(),this.room&&!this.offline&&this.loggedIn){const a=this.room.split('/').filter(function(b){return''!==b});if(2===a.length){const b=a[0]+'+'+a[1]+'+svgSource.json';this._fetch(b,'GET','include','json','data').catch(c=>{console.log(c)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}customElements.define(SVGData.is,SVGData);</script></dom-module><dom-module id="socket-connnector" assetpath="data/"><script>class SocketConnector extends WebvisualMixins.DataMixin(Polymer.Element){static get is(){return'socket-connector'}static get properties(){return{locationHost:{type:String,value:window.location.origin},nameSpace:{type:String},socketRoom:{type:String,observer:'connect'},socketStatus:{type:String,notify:!0}}}_load(){super._load();this.offline||!this.loggedIn||'sync-disabled'!==this.socketStatus&&this._createSocketConnection(this.locationHost,this.nameSpace)}_createSocketConnection(a,b){a&&'sync-disabled'!==this.socketStatus&&Webvisual&&(Webvisual.assignConnector(this),Webvisual.createSocketConnection(a,b),this.socketRoom&&this.connect(this.socketRoom))}connect(a){return a?void('/'===a.substring(0,1)&&(a=a.slice(1,a.length)),console.log('connect',this.socketStatus),this.socketStatus='connect',Webvisual.setupConnection(a)):void(this.socketStatus='sync-problem')}disconnect(){this.socketStatus='sync-disabled',Webvisual.disconnect()}}customElements.define(SocketConnector.is,SocketConnector);</script></dom-module><dom-module id="device-caption" unresolved=""><template strip-whitespace=""><style>:host{font-family:"Fira Sans", sans-serif;@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-center;@apply --layout-self-stretch;box-sizing:border-box;height:auto;width:auto;min-width:4em;font-size:1em;line-height:1.4;position:relative;background-color:var(--caption-background, white);color:var(--caption-color, #252525);padding:var(--caption-padding, 0.4em 0.5em);margin:0;}.captions{position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0;margin:0;font-size:0.6em;word-break:break-all;text-overflow:clip;font-weight:400;}.captions:after{content:attr(title);}.captions:first-of-type{font-weight:500;font-size:0.9em;}.captions:nth-of-type(2){font-size:0.8em;}.captions:nth-of-type(3){font-size:0.7em;}:host([vertical]){@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-start;}:host(:not([vertical])) .captions{margin-left:0.35em;@apply --layout-self-baseline;}:host([vertical]) .captions{width:100%;@apply --layout-self-start;}[hidden]{display:none !important;}:host([unresolved]){min-width:6em;min-height:initial;}:host([unresolved][vertical]){min-width:initial;min-height:4em;}</style><template is="dom-repeat" items="[[reducedCaptionKeys]]" as="captionKey"><section class="captions" hidden$="[[isEmptyCaption(captionKey, groupedKey)]]">[[getKey(captionKey, groupedKey, keys.*)]]</section></template></template><script>class CaptionElement extends Polymer.Element{static get is(){return'device-caption'}static get properties(){return{keys:{type:Object,value:function(){return{}},notify:!0},groupedKey:{type:String,value:''},onlyGroupedKey:{type:Boolean,value:!1},withoutGroupedKey:{type:Boolean,value:!1},reducedCaptionKeys:{type:Array,computed:'_computeReducedCaptionKeys(groupedKey, keys, onlyGroupedKey, withoutGroupedKey)'},vertical:{type:Boolean,reflectToAttribute:!0}}}constructor(){super(),this.setAttribute('unresolved','')}getKey(a){return this.keys&&this.keys[a]}_computeReducedCaptionKeys(a,b,c,d){const e=Object.keys(b||{});if(0===e.length)return[];let f=[];return!0===d?f=e.filter(function(g){return a!==g}):!0===c&&(f=e.filter(function(g){return a===g})),this.hasAttribute('unresolved')&&this.removeAttribute('unresolved'),0===f.length?e:f}isEmptyCaption(a){return!this.keys[a]}}customElements.define(CaptionElement.is,CaptionElement);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(c){return class extends c{constructor(){super()}static get properties(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},valueKey:{type:String,value:'y'},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}static get observers(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}connectedCallback(){super.connectedCallback(),this._linkElement(this.item,this.noLink)}disconnectedCallback(){super.disconnectedCallback(),setTimeout(()=>{this.clearValues(),this._unlinkElement()},0)}_linkElement(d,e){if(d&&d.mount){if(this._olditem){if(d.mount===this._olditem.mount&&!e)return;this._unlinkElement(this._olditem)}return e?void this._unlinkElement(d):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=d,this._initialized&&(this.clearValues(),this.reset()),this.requestValues(null,null,this.viewLength).then(f=>{for(let g in f)if(g===this.item.mount){this.insertValues(f[g]);break}}).catch(f=>{f&&console.log(f)})))}}_unlinkElement(d){d=d||this.item||this._olditem,setTimeout(()=>{window.Webvisual&&Webvisual.retractElement&&d&&d.mount&&(window.Webvisual.retractElement(this,d),this._olditem=null)},0)}getElement(){return this.properties}computeDate(d){return d?864E5>Math.abs(Date.now()-d)?new Date(d).toLocaleTimeString():new Date(d).toLocaleString():''}computeValue(d){return this.item&&this.item.isIndicatorLamp?this.checkExceedingState(d)?'\u2717':'\u2713':d}insertValues(d,e){if(void 0!==d){if(e=e||this.viewLength,this._initialized||(this._initialized=!0),!e)this.storeInside&&(this.values=this.values.concat(d)),this.renderInsertedValues(d);else{const f=d.slice(d.length-e,d.length);this.storeInside&&(this.values=this.values.concat(f)),this.renderInsertedValues(f),f.length=0}d.length=0}}spliceValues(d){d&&(!0===this.storeInside&&(this.values=this.values.filter(e=>{return-1===d.indexOf(e)}),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(d))}resetValues(d){this.values=d,this.notifyPath('values'),this.renderInsertedValues(this.values)}clearValues(){this.values=[],this.notifyPath('values')}requestValues(d,e,f){if(!(this.item&&this.item.mount))return new Promise((h,j)=>{j()});f=f||this.viewLength||1;const g={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:f||1}};return window.Webvisual?new Promise(h=>{window.Webvisual.request(g,h)}):new Promise((h,j)=>{this.values?h(this.values.slice(this.values.length-f,this.values.length)):j()})}requestRange(d){if(!(this.item&&this.item.mount))return new Promise(f=>{f([void 0,void 0])});const e={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:d}};return!this.storeInside&&window.Webvisual?new Promise(f=>{window.Webvisual.request(e,f)}):new Promise(f=>{if(this.values&&this.values.length){const g=this.min(this.values,d),h=this.max(this.values,d);void 0===g&&void 0===h||f([g,h])}f([void 0,void 0])})}min(d,e){let g,h,f=-1;const j=d.length;for(;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g>h&&(g=h);return g}max(d,e){let g,h,f=-1;const j=d.length;for(;++f<j;)if(null!==(h=d[f][e])&&h>=h){g=h;break}for(;++f<j;)null!==(h=d[f][e])&&g<h&&(g=h);return g}renderInsertedValues(){}renderSplicedValues(){}renderClearing(){}checkExceedingState(d){if(!(this.item&&!0===this.item.exceedable&&void 0!==d&&void 0!==d[this.valueKey]&&null!==d[this.valueKey]))return 0;let e=0;return d[this.valueKey]<this.item.threshold.from?e=-1:d[this.valueKey]>this.item.threshold.to&&(e=1),0===e?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)),e}_exceedingChanged(d){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:d}}))}_hasExceededChanged(){}reset(){this.resetColor&&this.resetColor(),super.reset&&super.reset(),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return class extends a{static get observers(){return['setColor(item.color)']}setColor(b){b&&(this.updateStyles({"--device-color":b||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":b||null})),this.updateStyles()}resetColor(){this.setColor(this.item&&this.item.color||'')}getComputedStyleValue(b){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,b):getComputedStyle(this).getPropertyValue(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.CheckedAndSelectMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{active:{type:Boolean,notify:!0,reflectToAttribute:!0},selectable:{type:Boolean,value:!1,reflectToAttribute:!0},checked:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_checkedChanged'},toggles:{type:Boolean,value:!0},tapEvent:{type:String},tapDuration:{type:Number,value:300},selectEvent:{type:String,value:'item-select'},disabled:{type:Boolean,value:!1},eventTarget:{type:String}}}static get observers(){return['_addTouchListeners(disabled, selectEvent, tapEvent)']}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._checkedChanged(!1,this.checked),this._removeTouchListeners()}_addTouchListeners(b,c,d){if(void 0!==c)if(b)this._removeTouchListeners();else{let f;f=this.eventTarget?this.$[this.eventTarget]:this,d?(Polymer.Gestures.addListener(f,'down',g=>this._handleTouch(g)),Polymer.Gestures.addListener(f,'up',g=>this._handleTouch(g))):c?Polymer.Gestures.addListener(f,'tap',()=>this.select()):this._removeTouchListeners()}}_removeTouchListeners(){let b;b=this.eventTarget?this.$[this.eventTarget]:this,Polymer.Gestures.removeListener(b,'down',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'up',c=>this._handleTouch(c)),Polymer.Gestures.removeListener(b,'tap',()=>this.select())}_handleTouch(b){'down'===b.type?this._lastEvent=b:this._lastEvent&&b.timeStamp-(this._lastEvent.timeStamp||performance.now())>this.tapDuration?(this.dispatchEvent(new CustomEvent(this.tapEvent,{bubbles:!0,composed:!0,detail:{item:this.item}})),!1===this.checked&&this.select(!0)):this.select()}_checkedChanged(b){this.selectable&&this.selectEvent&&!this._preventSelectEvent&&this.dispatchEvent(new CustomEvent(this.selectEvent,{bubbles:!0,composed:!0,detail:{item:this.item,value:b}}))}select(b,c){!0===this.selectable&&(this._preventSelectEvent=c,b===void 0?!0===this.toggles?(this.checked=!0!==this.checked,this.active=!this.active):this.checked=!0:this.checked=b)}deselect(){!0===this.checked&&!0===this.selectable&&(this.checked=!1)}reset(){this._initialized&&(super.reset&&super.reset(),this.deselect())}}};</script><dom-module id="device-sign"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;font-family:'Fira Sans', sans-serif;cursor:pointer;pointer-events:all;outline:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:1em;font-weight:400;width:auto;min-width:4em;min-height:4em;align-self:stretch;background-color:var(--device-state-inrange-color, var(--device-color));color:var(--device-text-color);will-change:background-color;transition:background-color 250ms cubic-bezier(0.3, 0, 0.15, 1);}:host([state="0"]){background-color:var(--device-state-inrange-color);color:var(--device-state-inrange-text-color);}:host([state="1"]){background-color:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}:host([state="-1"]){background-color:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.value{@apply --layout-fit;@apply --layout-inline;@apply --layout-center-center;padding:0.3em 0.3em 0.5em 0.3em;box-sizing:border-box;overflow:hidden;}.value::before{@apply --layout-fit;content:"";pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0),rgba(255,255,255,0.12),rgba(255,255,255,0));}:host([state="1"]) .value::before, :host([state="-1"]) .value::before{will-change:transform;animation-name:sign-background-rotate;animation-duration:1800ms;animation-fill-mode:both;animation-timing-function:linear;animation-iteration-count:infinite;}@keyframes sign-background-rotate{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}#valueSection{@apply --layout-inline;@apply --layout-center-center;max-width:100%;text-align:center;}#value{font-size:0.9em;padding-right:0.15em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}#unitSection{font-size:0.7em;}#dateSection{position:absolute;pointer-events:none;font-size:0.55em;bottom:0;width:100%;padding:0.5em;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;}svg#icon{height:1.5em;width:1.5em;fill:currentColor;}#ripple{pointer-events:none;color:#1d1d1d;border-radius:inherit;}#bookmark{padding:4px;cursor:pointer;outline:none;position:absolute;right:-5px;top:-5px;height:1.25em;width:1.25em;fill:#fff;opacity:0.9;mix-blend-mode:hard-light;will-change:transform, opacity;transform-origin:center;transition:transform 300ms cubic-bezier(0.3, 0, 0.1, 1), opacity 300ms cubic-bezier(0.3, 0, 0.1, 1);}#bookmark:hover{transform:scale(1.4);opacity:1;}#checkbox{fill:#fff;cursor:pointer;outline:none;pointer-events:none;position:absolute;opacity:0.6;right:0;bottom:0;height:1.25em;width:1.25em;mix-blend-mode:hard-light;}[hidden]{pointer-events:none;display:none !important;}</style><div class="value"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" recenters=""></paper-ripple></template><div id="valueSection" hidden$="[[item.isIndicatorLamp]]"><span id="value"></span> <span id="unitSection">[[item.unit]]</span></div><svg id="icon" hidden$="[[!item.isIndicatorLamp]]" aria-label="Alarm" viewBox="0 0 24 24"><g id="error-outline" hidden$="[[!isExceeding]]"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"></path></g></svg></div><span id="dateSection" hidden$="[[!showDate]]"></span> <svg id="bookmark" hidden$="[[!hasExceeded]]" viewBox="0 0 24 24" on-tap="_requestExceedingDetails"><g id="announcement"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 9h-2V5h2v6zm0 4h-2v-2h2v2z"></path></g></svg><template is="dom-if" if="[[checked]]"><svg id="checkbox" viewBox="0 0 24 24"><g id="playlist-add-check"><path d="M14 10H2v2h12v-2zm0-4H2v2h12V6zM2 16h8v-2H2v2zm19.5-4.5L23 13l-6.99 7-4.51-4.5L13 14l3.01 3 5.49-5.5z"></path></g></svg></template></template><script>class DeviceSign extends WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-sign'}static get properties(){return{showDate:{type:Boolean,value:!1},viewLength:{type:Number,value:1}}}insertValues(a){a&&a.length?setTimeout(()=>{this._initialized||(this._initialized=!0);const b=a[a.length-1];if(this.item.isIndicatorLamp||(this.$.value.textContent=this.computeValue(b.y)),this.showDate&&(this.$.dateSection.textContent=this.computeDate(b.x)),this.item.exceedable){const c=this.checkExceedingState(b);this.hasAttribute('state')&&this.state===c||this.setAttribute('state',c)}},0):this.renderClearing()}computeValue(a){return a}renderClearing(){this._initialized||(this.hasExceeded=!1,this.isExceeding=!1),this.$.value.textContent='',this.$.dateSection.textContent='',this.setAttribute('state',null)}_requestExceedingDetails(){this.dispatchEvent(new CustomEvent('request-exceeding-details',{bubbles:!0,composed:!0,detail:{item:this.item}}))}}customElements.define(DeviceSign.is,DeviceSign);</script></dom-module><dom-module id="device-checkbox"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;transition:background-color 200ms ease;box-sizing:border-box;cursor:pointer;pointer-events:all;--calculated-box-size:var(--box-size, 20px);--calculated-box-ink-size:var(--box-ink-size, -1px);}#content{display:inline-flex;width:100%;position:relative;line-height:0;padding:0.25em 0.5em;}:host::before{position:absolute;content:"";top:0;left:0;right:0;bottom:0;transition:background-color 200ms cubic-bezier(0.6, 1, 0.3, 1);@apply --checkbox-unchecked-background;}:host([checked])::before{@apply --checkbox-checked-background;}:host(:not([checked])){color:var(--checkbox-unchecked-color, var(--device-color));}:host([checked]){color:var(--checkbox-checked-color, var(--device-color));}:host(:focus)::before{outline:1px solid var(--bright-primary-color);}#boxContainer{display:inline-block;align-self:center;position:relative;line-height:0;-webkit-tap-highlight-color:transparent;width:var(--calculated-box-size);height:var(--calculated-box-size);min-width:var(--calculated-box-size);margin:var(--box-margin, initial);vertical-align:var(--box-vertical-align, middle);background-color:var(--box-unchecked-background-color, transparent);}#ripple{position:absolute;top:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);left:calc(0px - (var(--calculated-box-ink-size) - var(--calculated-box-size)) / 2);width:var(--calculated-box-ink-size);height:var(--calculated-box-ink-size);color:var(--box-unchecked-ink-color, var(--primary-text-color));opacity:0.6;}#box{opacity:0.75;position:relative;box-sizing:border-box;position:relative;height:100%;border:solid 2px;border-color:var(--checkbox-border, var(--primary-text-color));border-radius:2px;background-color:rgba(255, 255, 255, 0.9);-webkit-transition:background-color 150ms, border-color 150ms, opacity 150ms;transition:background-color 150ms, border-color 150ms, opacity 150ms;}#arrow{position:absolute;width:36%;height:70%;border-style:solid;border-top:none;border-left:none;border-right-width:calc(2/15 * var(--calculated-box-size));border-bottom-width:calc(2/15 * var(--calculated-box-size));border-color:var(--box-arrow-color, white);-webkit-transform-origin:97% 87%;transform-origin:97% 87%;-webkit-transform:scale(0, 0) rotate(22.5deg);transform:scale(0, 0) rotate(67.5deg);box-sizing:content-box;}#box{background-color:var(--device-color);}:host([checked][state="1"]) #box,
      :host([checked][state="1"]) #arrow{border-color:var(--device-state-exceeds-color);}:host([checked][state="-1"]) #box,
      :host([checked][state="-1"]) #arrow{border-color:var(--device-state-deceeds-color);}:host(:not([checked])[state="1"]) #box{border-color:var(--device-state-exceeds-color);}:host(:not([checked])[state="-1"]) #box{border-color:var(--device-state-deceeds-color);}#ripple{color:var(--device-color);}:host([state="0"]) #ripple{color:var(--device-state-inrange-color);}:host([state="1"]) #ripple{color:var(--device-state-exceeds-color);}:host([state="-1"]) #ripple{color:var(--device-state-deceeds-color);}:host([checked]) #box{opacity:1;}:host([checked]) #arrow{-webkit-animation:arrow-expand 250ms ease-out forwards;animation:arrow-expand 250ms ease-out forwards;}@-webkit-keyframes arrow-expand{0%{-webkit-transform:scale(0, 0) rotate(67.5deg);}100%{-webkit-transform:scale(1, 1) rotate(45deg);}}@keyframes arrow-expand{0%{transform:scale(0, 0) rotate(67.5deg);}100%{transform:scale(1, 1) rotate(45deg);}}:host([disabled]) #box{opacity:0.5;border-color:var(--box-unchecked-color, --primary-text-color);}:host([disabled][checked]) #box{background-color:var(--disabled-text-color, --primary-text-color);opacity:0.5;}[hidden]{display:none !important;}</style><div id="content"><div id="boxContainer"><template is="dom-if" if="[[selectable]]"><paper-ripple id="ripple" center="" class="circle"></paper-ripple></template><section id="box"><section id="arrow" hidden$="[[!checked]]"></section></section></div><slot></slot></div></template><script>class DeviceCheckbox extends WebvisualMixins.ColorMixin(WebvisualMixins.CheckedAndSelectMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-checkbox'}static get properties(){return{viewLength:{type:Number,value:1},showDate:{type:Boolean}}}insertValues(a){if(a&&a.length){this._initialized||(this._initialized=!0);const b=a[a.length-1];if(this.item.exceedable){const c=this.checkExceedingState(b);this.hasAttribute('state')&&this.state===c||this.setAttribute('state',c)}}else this.renderClearing()}renderClearing(){this._initialized=!1,this.setAttribute('state',null)}connectedCallback(){super.connectedCallback(),Polymer.RenderStatus.afterNextRender(this,function(){const a=this.getComputedStyleValue('--calculated-box-ink-size').trim();if(!a||'-1px'===a){const b=parseFloat(this.getComputedStyleValue('--calculated-box-size').trim())||20;let c=Math.floor(8/3*b);c%2!==b%2&&c++,this.updateStyles({"--box-ink-size":c+'px'})}})}}customElements.define(DeviceCheckbox.is,DeviceCheckbox);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),b=a&&8<=a[1],c=3,d='-10000px',h=-100,j=null!=Polymer.flush,k=j?Polymer.Async.animationFrame:0,l=j?Polymer.Async.idlePeriod:1,m=j?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var n=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return n-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var n=this._convertIndexToCompleteRow(this._virtualCount);return Math.max(0,n-this._physicalCount)},set _virtualStart(n){n=this._clamp(n,0,this._maxVirtualStart),this.grid&&(n-=n%this._itemsPerRow),this._virtualStartVal=n},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(n){n%=this._physicalCount,0>n&&(n=this._physicalCount+n),this.grid&&(n-=n%this._itemsPerRow),this._physicalStartVal=n},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(n){this._physicalCountVal=n},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var n=this._firstVisibleIndexVal;if(null==n){var o=this._physicalTop+this._scrollOffset;n=this._iterateItems(function(p,q){return o+=this._getPhysicalSizeIncrement(p),o>this._scrollPosition?this.grid?q-q%this._itemsPerRow:q:this.grid&&this._virtualCount-1===q?q-q%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=n}return n},get lastVisibleIndex(){var n=this._lastVisibleIndexVal;if(null==n){if(this.grid)n=Math.min(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var o=this._physicalTop+this._scrollOffset;this._iterateItems(function(p,q){o<this._scrollBottom&&(n=q),o+=this._getPhysicalSizeIncrement(p)})}this._lastVisibleIndexVal=n}return n},get _defaultScrollTarget(){return this},get _virtualRowCount(){return Math.ceil(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return Math.ceil(this._viewportHeight/this._rowHeight)},get _physicalRows(){return Math.ceil(this._physicalCount/this._itemsPerRow)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounceRender(this._render,k),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(n){this.style.webkitOverflowScrolling=n===this?'touch':'',this.style.overflowY=n===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounceRender(this._render,k)},updateViewportBoundaries:function(){var n=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(n['padding-top'],10),this._isRTL=!('rtl'!==n.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var n=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop)),o=n-this._scrollPosition,p=0<=o;if(this._scrollPosition=n,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(o)>this._physicalSize&&0<this._physicalSize){o-=this._scrollOffset;var q=Math.round(o/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=q,this._physicalStart+=q,this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var r=this._getReusables(p);p?(this._physicalTop=r.physicalTop,this._virtualStart+=r.indexes.length,this._physicalStart+=r.indexes.length):(this._virtualStart-=r.indexes.length,this._physicalStart-=r.indexes.length),this._update(r.indexes,p?null:r.indexes),this._debounceRender(this._increasePoolIfNeeded.bind(this,0),m)}},_getReusables:function(n){var o,p,q,r,s=[],t=this._hiddenContentSize*this._ratio,u=this._virtualStart,w=this._virtualEnd,z=this._physicalCount,A=this._physicalTop+this._scrollOffset,B=this._physicalBottom+this._scrollOffset,C=this._scrollTop,D=this._scrollBottom;for(n?(o=this._physicalStart,p=this._physicalEnd,q=C-A):(o=this._physicalEnd,p=this._physicalStart,q=B-D);r=this._getPhysicalSizeIncrement(o),q-=r,!(s.length>=z||q<=t);)if(n){if(w+s.length+1>=this._virtualCount)break;if(A+r>=C-this._scrollOffset)break;s.push(o),A+=r,o=(o+1)%z}else{if(0>=u-s.length)break;if(A+this._physicalSize-r<=D)break;s.push(o),A-=r,o=0===o?z-1:o-1}return{indexes:s,physicalTop:A-this._scrollOffset}},_update:function(n,o){if(!(n&&0===n.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(n),this._updateMetrics(n),o)for(;o.length;){var p=o.pop();this._physicalTop-=this._getPhysicalSizeIncrement(p)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(n){this._ensureTemplatized();var o,p,q=Array(n);for(o=0;o<n;o++)p=this.stamp(null),q[o]=p.root.querySelector('*'),this._itemsParent.appendChild(p.root);return q},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(n){var o=this._clamp(this._physicalCount+n,c,this._virtualCount-this._virtualStart);if(o=this._convertIndexToCompleteRow(o),this.grid){var p=o%this._itemsPerRow;p&&o-p<=this._physicalCount&&(o+=this._itemsPerRow),o-=p}var q=o-this._physicalCount,r=Math.round(0.5*this._physicalCount);if(!(0>q)){if(0<q){var s=window.performance.now();[].push.apply(this._physicalItems,this._createPool(q)),[].push.apply(this._physicalSizes,Array(q)),this._physicalCount+=q,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=q),this._update(),this._templateCost=(window.performance.now()-s)/q,r=Math.round(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===r||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounceRender(this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,r)),l):this._debounceRender(this._increasePoolIfNeeded.bind(this,r),m))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var n=this._getReusables(!0);this._physicalTop=n.physicalTop,this._virtualStart+=n.indexes.length,this._physicalStart+=n.indexes.length,this._update(n.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(c))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var n={};n.__key__=!0,n[this.as]=!0,n[this.indexAs]=!0,n[this.selectedAs]=!0,n.tabIndex=!0,this._instanceProps=n,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(n,o){'undefined'===typeof o||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),n&&this._updateGridMetrics())},_itemsChanged:function(n){if('items'===n.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounceRender(this._render,k);else if('items.splices'===n.path){this._adjustVirtualIndex(n.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var o=n.value.indexSplices.some(function(p){return this._isIndexRendered(p.index)},this);(!this._isClientFull()||o)&&this._debounceRender(this._render,k)}else'items.length'!==n.path&&this._forwardItemPath(n.path,n.value)},_forwardItemPath:function(n,o){n=n.slice(6);var p=n.indexOf('.')+1;0===p&&(p=n.length);var q=j?parseInt(n.substring(0,p),10):parseInt(n.substring(1,p),10),r=this._offscreenFocusedItem,s=this._isIndexRendered(q),t,u;s?(u=this._getPhysicalIndex(q),t=this.modelForElement(this._physicalItems[u])):r&&(t=this.modelForElement(r));t&&t[this.indexAs]===q&&(n=n.substring(p),n=this.as+(n?'.'+n:''),j?t._setPendingPropertyOrPath(n,o,!1,!0):t.notifyPath(n,o,!0),t._flushProperties&&t._flushProperties(!0),s&&(this._updateMetrics([u]),this._positionItems(),this._updateScrollerSize()))},_adjustVirtualIndex:function(n){n.forEach(function(o){if(o.removed.forEach(this._removeItem,this),o.index<this._virtualStart){var p=Math.max(o.addedCount-o.removed.length,o.index-this._virtualStart);this._virtualStart+=p,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=p)}},this)},_removeItem:function(n){this.$.selector.deselect(n),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===n&&(this._removeFocusedItem(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur())},_iterateItems:function(n,o){var p,q,r,s;if(2===arguments.length&&o){for(s=0;s<o.length;s++)if(p=o[s],q=this._computeVidx(p),null!=(r=n.call(this,p,q)))return r;}else{for(p=this._physicalStart,q=this._virtualStart;p<this._physicalCount;p++,q++)if(null!=(r=n.call(this,p,q)))return r;for(p=0;p<this._physicalStart;p++,q++)if(null!=(r=n.call(this,p,q)))return r}},_computeVidx:function(n){return n>=this._physicalStart?this._virtualStart+(n-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+n},_assignModels:function(n){this._iterateItems(function(o,p){var q=this._physicalItems[o],r=this.items&&this.items[p];if(null!=r){var s=this.modelForElement(q);s.__key__=this._collection?this._collection.getKey(r):null,this._forwardProperty(s,this.as,r),this._forwardProperty(s,this.selectedAs,this.$.selector.isSelected(r)),this._forwardProperty(s,this.indexAs,p),this._forwardProperty(s,'tabIndex',this._focusedVirtualIndex===p?0:-1),this._physicalIndexForKey[s.__key__]=o,s._flushProperties&&s._flushProperties(!0),q.removeAttribute('hidden')}else q.setAttribute('hidden','')},n)},_updateMetrics:function(n){Polymer.flush?Polymer.flush():Polymer.dom.flush();var o=0,p=0,q=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems(function(s){p+=this._physicalSizes[s]||0,this._physicalSizes[s]=this._physicalItems[s].offsetHeight,o+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},n),this.grid?(this._updateGridMetrics(),this._physicalSize=Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight):(p=1===this._itemsPerRow?p:Math.ceil(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+o-p,this._itemsPerRow=1),this._physicalAverageCount!==q&&(this._physicalAverage=Math.round((r*q+o)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?Math.floor(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var n=this._physicalTop;if(this.grid){var o=this._itemsPerRow*this._itemWidth,p=(this._viewportWidth-o)/2;this._iterateItems(function(q,r){var s=r%this._itemsPerRow,t=Math.floor(s*this._itemWidth+p);this._isRTL&&(t*=-1),this.translate3d(t+'px',n+'px',0,this._physicalItems[q]),this._shouldRenderNextRow(r)&&(n+=this._rowHeight)})}else this._iterateItems(function(q){this.translate3d(0,n+'px',0,this._physicalItems[q]),n+=this._physicalSizes[q]})},_getPhysicalSizeIncrement:function(n){return this.grid?this._computeVidx(n)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[n]},_shouldRenderNextRow:function(n){return n%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var n=0===this._virtualStart?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(0!==n){this._physicalTop-=n;var o=this._scrollTop;!b&&0<o&&this._resetScrollPosition(o-n)}},_resetScrollPosition:function(n){this.scrollTarget&&0<=n&&(this._scrollTop=n,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(n){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,n=n||0===this._scrollHeight,n=n||this._scrollPosition>=this._estScrollHeight-this._physicalSize,n=n||this.grid&&this.$.items.style.height<this._estScrollHeight,(n||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(n){return this.scrollToIndex(this.items.indexOf(n))},scrollToIndex:function(n){if(!('number'!==typeof n||0>n||n>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){n=this._clamp(n,0,this._virtualCount-1),(!this._isIndexRendered(n)||n>=this._maxVirtualStart)&&(this._virtualStart=this.grid?n-2*this._itemsPerRow:n-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var o=this._physicalStart,p=this._virtualStart,q=0,r=this._hiddenContentSize;p<n&&q<=r;)q+=this._getPhysicalSizeIncrement(o),o=(o+1)%this._physicalCount,p++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+q),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounceRender(function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;Math.abs(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},k)},selectItem:function(n){return this.selectIndex(this.items.indexOf(n))},selectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o&&(o[this.selectedAs]=!0),this.updateSizeForIndex(n)}this.$.selector.selectIndex?this.$.selector.selectIndex(n):this.$.selector.select(this.items[n])}},deselectItem:function(n){return this.deselectIndex(this.items.indexOf(n))},deselectIndex:function(n){if(!(0>n||n>=this._virtualCount)){if(this._isIndexRendered(n)){var o=this.modelForElement(this._physicalItems[this._getPhysicalIndex(n)]);o[this.selectedAs]=!1,this.updateSizeForIndex(n)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(n):this.$.selector.deselect(this.items[n])}},toggleSelectionForItem:function(n){return this.toggleSelectionForIndex(this.items.indexOf(n))},toggleSelectionForIndex:function(n){var o=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(n):this.$.selector.isSelected(this.items[n]);o?this.deselectIndex(n):this.selectIndex(n)},clearSelection:function(){this._iterateItems(function(n){this.modelForElement(this._physicalItems[n])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(n){var o=n?this.listen:this.unlisten;o.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(n){var o=this.modelForElement(n.target);if(o){var p,q,r=Polymer.dom(n).path[0],s=this._itemsParent.node.domHost,t=Polymer.dom(s?s.root:document).activeElement,u=this._physicalItems[this._getPhysicalIndex(o[this.indexAs])];'input'!==r.localName&&'button'!==r.localName&&'select'!==r.localName&&(p=o.tabIndex,o.tabIndex=h,q=t?t.tabIndex:-1,o.tabIndex=p,t&&u!==t&&u.contains(t)&&q!==h||this.toggleSelectionForItem(o[this.as]))}},_multiSelectionChanged:function(n){this.clearSelection(),this.$.selector.multi=n},updateSizeForItem:function(n){return this.updateSizeForIndex(this.items.indexOf(n))},updateSizeForIndex:function(n){return this._isIndexRendered(n)?(this._updateMetrics([this._getPhysicalIndex(n)]),this._positionItems(),null):null},_manageFocus:function(){var n=this._focusedVirtualIndex;0<=n&&n<this._virtualCount?this._isIndexRendered(n)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(n){return this._itemsPerRow=this._itemsPerRow||1,this.grid?Math.ceil(n/this._itemsPerRow)*this._itemsPerRow:n},_isIndexRendered:function(n){return n>=this._virtualStart&&n<=this._virtualEnd},_isIndexVisible:function(n){return n>=this.firstVisibleIndex&&n<=this.lastVisibleIndex},_getPhysicalIndex:function(n){return(this._physicalStart+(n-this._virtualStart))%this._physicalCount},focusItem:function(n){this._focusPhysicalItem(n)},_focusPhysicalItem:function(n){if(!(0>n||n>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(n)||this.scrollToIndex(n);var q,o=this._physicalItems[this._getPhysicalIndex(n)],p=this.modelForElement(o);p.tabIndex=h,o.tabIndex===h&&(q=o),q||(q=Polymer.dom(o).querySelector('[tabindex="'+h+'"]')),p.tabIndex=0,this._focusedVirtualIndex=n,q&&q.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var n=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var o=this.stamp(null);this._focusBackfillItem=o.root.querySelector('*'),this._itemsParent.appendChild(o.root)}this._offscreenFocusedItem=this._physicalItems[n],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[n]=this._focusBackfillItem,this._focusedPhysicalIndex=n,this.translate3d(0,d,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var n=this._focusedPhysicalIndex,o=this._physicalItems[n];if(o){var p=this.modelForElement(o),q=this.modelForElement(this._offscreenFocusedItem);p[this.as]===q[this.as]?(this._focusBackfillItem=o,p.tabIndex=-1,this._physicalItems[n]=this._offscreenFocusedItem,this.translate3d(0,d,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(n){var o=this.modelForElement(n.target),p=this.modelForElement(this._focusedItem),q=null!==this._offscreenFocusedItem,r=this._focusedVirtualIndex;o&&(p===o?!this._isIndexVisible(r)&&this.scrollToIndex(r):(this._restoreFocusedItem(),p&&(p.tabIndex=-1),o.tabIndex=0,r=o[this.indexAs],this._focusedVirtualIndex=r,this._focusedPhysicalIndex=this._getPhysicalIndex(r),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],q&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(n){switch(n.keyCode){case 40:n.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(n);}},_clamp:function(n,o,p){return Math.min(p,Math.max(o,n))},_debounceRender:function(n,o){j?(this._renderDebouncer=Polymer.Debouncer.debounce(this._renderDebouncer,o,n.bind(this)),Polymer.enqueueDebouncer(this._renderDebouncer)):this._debounceTemplate(n)},_forwardProperty:function(n,o,p){j?n._setPendingProperty(o,p):n[o]=p},_forwardHostPropV2:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).forwardHostProp(n,o)},this)},_notifyInstancePropV2:function(n,o,p){if(Polymer.Path.matches(this.as,o)){var q=n[this.indexAs];o==this.as&&(this.items[q]=p),this.notifyPath(Polymer.Path.translate(this.as,'items.'+q,o),p)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(n,o,p){0===o.indexOf(this.as+'.')&&this.notifyPath('items.'+n.__key__+'.'+o.slice(this.as.length+1),p)},_forwardParentPath:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&this.modelForElement(p).notifyPath(n,o,!0)},this)},_forwardParentProp:function(n,o){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(p){p&&(this.modelForElement(p)[n]=o)},this)}})})();</script><dom-module id="device-table"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.5;pointer-events:all;font-weight:400;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:none;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color);color:var(--device-state-exceeds-text-color);}.tr[state="-1"]{background:var(--device-state-deceeds-color);color:var(--device-state-deceeds-text-color);}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.8;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:500;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:var(--bright-text-color);padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-tap="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic">([[item.unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[checkExceedingState(value)]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>class DeviceTable extends WebvisualMixins.DeviceMixin(Polymer.Element){static get is(){return'device-table'}static get properties(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}static get observers(){return['_computeKeysForCaption(keysForCaption, item)']}insertValues(a){a&&a.length?setTimeout(()=>{if(!this._initialized)this.set('values',a.reverse()),this._initialized=!0;else for(let b=0;b<a.length;b++)this.unshift('values',a[b])},0):!this._initialized&&this.renderClearing()}spliceValues(a){setTimeout(()=>{const b=[];for(let c=0;c<a.length;c++){let d;for(d=this.values.length-1;0<=d&&!(this.values[d].x===a[c].x);d--);-1!==d&&(this.values.splice(d,1),b.push({index:d,removed:[this.values[d]],addedCount:0,object:this.values,type:'splice'}))}this.notifySplices('values',b)},0)}renderClearing(){this.$.list.set('items',[])}_computeKeysForCaption(a,b){if(a&&b&&b.keys){let c='';for(let d in this.item.keys)c+=this.item.keys[d]+' ';this.$.caption.textContent=c}else this.caption&&(this.$.caption.textContent=this.caption)}_toggleGridView(){this.$.list.grid=!this.$.list.grid}}customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.3);color:var(--bright-text-color);border-bottom:medium solid var(--secondary-color);border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title$="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>class DeviceTableGroup extends Polymer.Element{static get is(){return'device-table-group'}static get properties(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}static get observers(){return['_shouldHideTabs(items.length)']}_shouldHideTabs(a){2>a?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===a&&this.set('selectedItemMount',this.items[0].mount)}reset(){this.set('items',[]),this.set('selectedItemMount','')}}customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">var d3=function(Ia){"use strict";function Oa(Cg){return function(zg,Mg){return Hp(Cg(zg),Mg)}}function ja(Cg,zg,Mg){var Ug=(zg-Cg)/Math.max(0,Mg),Ag=Math.floor(Math.log(Ug)/Math.LN10),Yg=Ug/Math.pow(10,Ag);return 0<=Ag?(Yg>=Ip?10:Yg>=Np?5:Yg>=Op?2:1)*Math.pow(10,Ag):-Math.pow(10,-Ag)/(Yg>=Ip?10:Yg>=Np?5:Yg>=Op?2:1)}function $a(Cg,zg,Mg){var Ug=Math.abs(zg-Cg)/Math.max(0,Mg),Ag=Math.pow(10,Math.floor(Math.log(Ug)/Math.LN10)),Yg=Ug/Ag;return Yg>=Ip?Ag*=10:Yg>=Np?Ag*=5:Yg>=Op&&(Ag*=2),zg<Cg?-Ag:Ag}function Va(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ba(){return new Va}function Za(Cg){this._context=Cg}function Wa(Cg){return Cg[0]}function Ra(Cg){return Cg[1]}function Ga(Cg,zg,Mg){Cg._context.bezierCurveTo((2*Cg._x0+Cg._x1)/3,(2*Cg._y0+Cg._y1)/3,(Cg._x0+2*Cg._x1)/3,(Cg._y0+2*Cg._y1)/3,(Cg._x0+4*Cg._x1+zg)/6,(Cg._y0+4*Cg._y1+Mg)/6)}function Ja(Cg){this._context=Cg}function Ka(Cg,zg,Mg){Cg._context.bezierCurveTo(Cg._x1+Cg._k*(Cg._x2-Cg._x0),Cg._y1+Cg._k*(Cg._y2-Cg._y0),Cg._x2+Cg._k*(Cg._x1-zg),Cg._y2+Cg._k*(Cg._y1-Mg),Cg._x2,Cg._y2)}function Qa(Cg,zg){this._context=Cg,this._k=(1-zg)/6}function el(Cg,zg,Mg){var Ug=Cg._x1,Ag=Cg._y1,Yg=Cg._x2,Eg=Cg._y2;if(Cg._l01_a>Wp){var Pg=2*Cg._l01_2a+3*Cg._l01_a*Cg._l12_a+Cg._l12_2a,Dg=3*Cg._l01_a*(Cg._l01_a+Cg._l12_a);Ug=(Ug*Pg-Cg._x0*Cg._l12_2a+Cg._x2*Cg._l01_2a)/Dg,Ag=(Ag*Pg-Cg._y0*Cg._l12_2a+Cg._y2*Cg._l01_2a)/Dg}if(Cg._l23_a>Wp){var Fg=2*Cg._l23_2a+3*Cg._l23_a*Cg._l12_a+Cg._l12_2a,Lg=3*Cg._l23_a*(Cg._l23_a+Cg._l12_a);Yg=(Yg*Fg+Cg._x1*Cg._l23_2a-zg*Cg._l12_2a)/Lg,Eg=(Eg*Fg+Cg._y1*Cg._l23_2a-Mg*Cg._l12_2a)/Lg}Cg._context.bezierCurveTo(Ug,Ag,Yg,Eg,Cg._x2,Cg._y2)}function tl(Cg,zg){this._context=Cg,this._alpha=zg}function nl(Cg){return 0>Cg?-1:1}function ol(Cg,zg,Mg){var Ug=Cg._x1-Cg._x0,Ag=zg-Cg._x1,Yg=(Cg._y1-Cg._y0)/(Ug||0>Ag&&-0),Eg=(Mg-Cg._y1)/(Ag||0>Ug&&-0);return(nl(Yg)+nl(Eg))*Math.min(Math.abs(Yg),Math.abs(Eg),.5*Math.abs((Yg*Ag+Eg*Ug)/(Ug+Ag)))||0}function al(Cg,zg){var Mg=Cg._x1-Cg._x0;return Mg?(3*(Cg._y1-Cg._y0)/Mg-zg)/2:zg}function il(Cg,zg,Mg){var Ug=Cg._x0,Ag=Cg._y0,Yg=Cg._x1,Eg=Cg._y1,Pg=(Yg-Ug)/3;Cg._context.bezierCurveTo(Ug+Pg,Ag+Pg*zg,Yg-Pg,Eg-Pg*Mg,Yg,Eg)}function ll(Cg){this._context=Cg}function rl(Cg){this._context=Cg}function sl(Cg){this._context=Cg}function dl(Cg){var zg,Mg,Ug=Cg.length-1,Ag=Array(Ug),Yg=Array(Ug),Eg=Array(Ug);for(Ag[0]=0,Yg[0]=2,Eg[0]=Cg[0]+2*Cg[1],zg=1;zg<Ug-1;++zg)Ag[zg]=1,Yg[zg]=4,Eg[zg]=4*Cg[zg]+2*Cg[zg+1];for(Ag[Ug-1]=2,Yg[Ug-1]=7,Eg[Ug-1]=8*Cg[Ug-1]+Cg[Ug],zg=1;zg<Ug;++zg)Mg=Ag[zg]/Yg[zg-1],Yg[zg]-=Mg,Eg[zg]-=Mg*Eg[zg-1];for(Ag[Ug-1]=Eg[Ug-1]/Yg[Ug-1],zg=Ug-2;0<=zg;--zg)Ag[zg]=(Eg[zg]-Ag[zg+1])/Yg[zg];for(Yg[Ug-1]=(Cg[Ug]+Ag[Ug-1])/2,zg=0;zg<Ug-1;++zg)Yg[zg]=2*Cg[zg+1]-Ag[zg+1];return[Ag,Yg]}function cl(Cg,zg){this._context=Cg,this._t=zg}function ul(Cg,zg,Mg,Ug){function Ag(Yg){return Cg(Yg=new Date(+Yg)),Yg}return Ag.floor=Ag,Ag.ceil=function(Yg){return Cg(Yg=new Date(Yg-1)),zg(Yg,1),Cg(Yg),Yg},Ag.round=function(Yg){var Eg=Ag(Yg),Pg=Ag.ceil(Yg);return Yg-Eg<Pg-Yg?Eg:Pg},Ag.offset=function(Yg,Eg){return zg(Yg=new Date(+Yg),null==Eg?1:Math.floor(Eg)),Yg},Ag.range=function(Yg,Eg,Pg){var Dg=[];if(Yg=Ag.ceil(Yg),Pg=null==Pg?1:Math.floor(Pg),!(Yg<Eg&&0<Pg))return Dg;do Dg.push(new Date(+Yg));while((zg(Yg,Pg),Cg(Yg),Yg<Eg));return Dg},Ag.filter=function(Yg){return ul(function(Eg){if(Eg>=Eg)for(;Cg(Eg),!Yg(Eg);)Eg.setTime(Eg-1)},function(Eg,Pg){if(Eg>=Eg)if(0>Pg)for(;0>=++Pg;)for(;zg(Eg,-1),!Yg(Eg););else for(;0<=--Pg;)for(;zg(Eg,1),!Yg(Eg););})},Mg&&(Ag.count=function(Yg,Eg){return Qp.setTime(+Yg),e_.setTime(+Eg),Cg(Qp),Cg(e_),Math.floor(Mg(Qp,e_))},Ag.every=function(Yg){return Yg=Math.floor(Yg),isFinite(Yg)&&0<Yg?1<Yg?Ag.filter(Ug?function(Eg){return 0==Ug(Eg)%Yg}:function(Eg){return 0==Ag.count(0,Eg)%Yg}):Ag:null}),Ag}function pl(Cg){return ul(function(zg){zg.setDate(zg.getDate()-(zg.getDay()+7-Cg)%7),zg.setHours(0,0,0,0)},function(zg,Mg){zg.setDate(zg.getDate()+7*Mg)},function(zg,Mg){return(Mg-zg-(Mg.getTimezoneOffset()-zg.getTimezoneOffset())*n_)/o_})}function _l(Cg){return ul(function(zg){zg.setUTCDate(zg.getUTCDate()-(zg.getUTCDay()+7-Cg)%7),zg.setUTCHours(0,0,0,0)},function(zg,Mg){zg.setUTCDate(zg.getUTCDate()+7*Mg)},function(zg,Mg){return(Mg-zg)/o_})}function hl(Cg){return new ml(Cg)}function ml(Cg){if(!(zg=T_.exec(Cg)))throw new Error("invalid format: "+Cg);var zg,Mg=zg[1]||" ",Ug=zg[2]||">",Ag=zg[3]||"-",Yg=zg[4]||"",Eg=!!zg[5],Pg=zg[6]&&+zg[6],Dg=!!zg[7],Fg=zg[8]&&+zg[8].slice(1),Lg=zg[9]||"";"n"===Lg?(Dg=!0,Lg="g"):w_[Lg]||(Lg=""),(Eg||"0"===Mg&&"="===Ug)&&(Eg=!0,Mg="0",Ug="="),this.fill=Mg,this.align=Ug,this.sign=Ag,this.symbol=Yg,this.zero=Eg,this.width=Pg,this.comma=Dg,this.precision=Fg,this.type=Lg}function gl(Cg){return k_=M_(Cg),Ia.format=k_.format,S_=k_.formatPrefix,k_}function yl(Cg){if(0<=Cg.y&&100>Cg.y){var zg=new Date(-1,Cg.m,Cg.d,Cg.H,Cg.M,Cg.S,Cg.L);return zg.setFullYear(Cg.y),zg}return new Date(Cg.y,Cg.m,Cg.d,Cg.H,Cg.M,Cg.S,Cg.L)}function fl(Cg){if(0<=Cg.y&&100>Cg.y){var zg=new Date(Date.UTC(-1,Cg.m,Cg.d,Cg.H,Cg.M,Cg.S,Cg.L));return zg.setUTCFullYear(Cg.y),zg}return new Date(Date.UTC(Cg.y,Cg.m,Cg.d,Cg.H,Cg.M,Cg.S,Cg.L))}function xl(Cg){return{y:Cg,m:0,d:1,H:0,M:0,S:0,L:0}}function vl(Cg){function zg(Jg,Kg){return function(Qg){var ey,ty,ny,oy=[],ay=-1,iy=0,ly=Jg.length;for(Qg instanceof Date||(Qg=new Date(+Qg));++ay<ly;)37===Jg.charCodeAt(ay)&&(oy.push(Jg.slice(iy,ay)),null==(ty=F_[ey=Jg.charAt(++ay)])?ty="e"===ey?" ":"0":ey=Jg.charAt(++ay),(ny=Kg[ey])&&(ey=ny(Qg,ty)),oy.push(ey),iy=ay+1);return oy.push(Jg.slice(iy,ay)),oy.join("")}}function Mg(Jg,Kg){return function(Qg){var ey=xl(1900);if(Ug(ey,Jg,Qg+="",0)!=Qg.length)return null;if("p"in ey&&(ey.H=ey.H%12+12*ey.p),"W"in ey||"U"in ey){"w"in ey||(ey.w="W"in ey?1:0);var ty="Z"in ey?fl(xl(ey.y)).getUTCDay():Kg(xl(ey.y)).getDay();ey.m=0,ey.d="W"in ey?(ey.w+6)%7+7*ey.W-(ty+5)%7:ey.w+7*ey.U-(ty+6)%7}return"Z"in ey?(ey.H+=0|ey.Z/100,ey.M+=ey.Z%100,fl(ey)):Kg(ey)}}function Ug(Jg,Kg,Qg,ey){for(var ty,ny,oy=0,ay=Kg.length,iy=Qg.length;oy<ay;){if(ey>=iy)return-1;if(37===(ty=Kg.charCodeAt(oy++))){if(ty=Kg.charAt(oy++),!(ny=Gg[ty in F_?Kg.charAt(oy++):ty])||0>(ey=ny(Jg,Qg,ey)))return-1;}else if(ty!=Qg.charCodeAt(ey++))return-1}return ey}var Ag=Cg.dateTime,Yg=Cg.date,Eg=Cg.time,Pg=Cg.periods,Dg=Cg.days,Fg=Cg.shortDays,Lg=Cg.months,Hg=Cg.shortMonths,Xg=Tl(Pg),qg=kl(Pg),Ig=Tl(Dg),Ng=kl(Dg),Og=Tl(Fg),jg=kl(Fg),$g=Tl(Lg),Vg=kl(Lg),Bg=Tl(Hg),Zg=kl(Hg),Wg={a:function(Jg){return Fg[Jg.getDay()]},A:function(Jg){return Dg[Jg.getDay()]},b:function(Jg){return Hg[Jg.getMonth()]},B:function(Jg){return Lg[Jg.getMonth()]},c:null,d:ql,e:ql,H:Il,I:Nl,j:Ol,L:jl,m:$l,M:Vl,p:function(Jg){return Pg[+(12<=Jg.getHours())]},S:Bl,U:Zl,w:Wl,W:Rl,x:null,X:null,y:Gl,Y:Jl,Z:Kl,"%":_s},Rg={a:function(Jg){return Fg[Jg.getUTCDay()]},A:function(Jg){return Dg[Jg.getUTCDay()]},b:function(Jg){return Hg[Jg.getUTCMonth()]},B:function(Jg){return Lg[Jg.getUTCMonth()]},c:null,d:Ql,e:Ql,H:es,I:ts,j:ns,L:os,m:as,M:is,p:function(Jg){return Pg[+(12<=Jg.getUTCHours())]},S:ls,U:rs,w:ss,W:ds,x:null,X:null,y:cs,Y:us,Z:ps,"%":_s},Gg={a:function(Jg,Kg,Qg){var ey=Og.exec(Kg.slice(Qg));return ey?(Jg.w=jg[ey[0].toLowerCase()],Qg+ey[0].length):-1},A:function(Jg,Kg,Qg){var ey=Ig.exec(Kg.slice(Qg));return ey?(Jg.w=Ng[ey[0].toLowerCase()],Qg+ey[0].length):-1},b:function(Jg,Kg,Qg){var ey=Bg.exec(Kg.slice(Qg));return ey?(Jg.m=Zg[ey[0].toLowerCase()],Qg+ey[0].length):-1},B:function(Jg,Kg,Qg){var ey=$g.exec(Kg.slice(Qg));return ey?(Jg.m=Vg[ey[0].toLowerCase()],Qg+ey[0].length):-1},c:function(Jg,Kg,Qg){return Ug(Jg,Ag,Kg,Qg)},d:El,e:El,H:Dl,I:Dl,j:Pl,L:Hl,m:Yl,M:Fl,p:function(Jg,Kg,Qg){var ey=Xg.exec(Kg.slice(Qg));return ey?(Jg.p=qg[ey[0].toLowerCase()],Qg+ey[0].length):-1},S:Ll,U:Cl,w:Sl,W:zl,x:function(Jg,Kg,Qg){return Ug(Jg,Yg,Kg,Qg)},X:function(Jg,Kg,Qg){return Ug(Jg,Eg,Kg,Qg)},y:Ul,Y:Ml,Z:Al,"%":Xl};return Wg.x=zg(Yg,Wg),Wg.X=zg(Eg,Wg),Wg.c=zg(Ag,Wg),Rg.x=zg(Yg,Rg),Rg.X=zg(Eg,Rg),Rg.c=zg(Ag,Rg),{format:function(Jg){var Kg=zg(Jg+="",Wg);return Kg.toString=function(){return Jg},Kg},parse:function(Jg){var Kg=Mg(Jg+="",yl);return Kg.toString=function(){return Jg},Kg},utcFormat:function(Jg){var Kg=zg(Jg+="",Rg);return Kg.toString=function(){return Jg},Kg},utcParse:function(Jg){var Kg=Mg(Jg,fl);return Kg.toString=function(){return Jg},Kg}}}function bl(Cg,zg,Mg){var Ug=0>Cg?"-":"",Ag=(Ug?-Cg:Cg)+"",Yg=Ag.length;return Ug+(Yg<Mg?Array(Mg-Yg+1).join(zg)+Ag:Ag)}function wl(Cg){return Cg.replace(X_,"\\$&")}function Tl(Cg){return new RegExp("^(?:"+Cg.map(wl).join("|")+")","i")}function kl(Cg){for(var zg={},Mg=-1,Ug=Cg.length;++Mg<Ug;)zg[Cg[Mg].toLowerCase()]=Mg;return zg}function Sl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+1));return Ug?(Cg.w=+Ug[0],Mg+Ug[0].length):-1}function Cl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg));return Ug?(Cg.U=+Ug[0],Mg+Ug[0].length):-1}function zl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg));return Ug?(Cg.W=+Ug[0],Mg+Ug[0].length):-1}function Ml(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+4));return Ug?(Cg.y=+Ug[0],Mg+Ug[0].length):-1}function Ul(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.y=+Ug[0]+(68<+Ug[0]?1900:2e3),Mg+Ug[0].length):-1}function Al(Cg,zg,Mg){var Ug=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(zg.slice(Mg,Mg+6));return Ug?(Cg.Z=Ug[1]?0:-(Ug[2]+(Ug[3]||"00")),Mg+Ug[0].length):-1}function Yl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.m=Ug[0]-1,Mg+Ug[0].length):-1}function El(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.d=+Ug[0],Mg+Ug[0].length):-1}function Pl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+3));return Ug?(Cg.m=0,Cg.d=+Ug[0],Mg+Ug[0].length):-1}function Dl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.H=+Ug[0],Mg+Ug[0].length):-1}function Fl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.M=+Ug[0],Mg+Ug[0].length):-1}function Ll(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+2));return Ug?(Cg.S=+Ug[0],Mg+Ug[0].length):-1}function Hl(Cg,zg,Mg){var Ug=L_.exec(zg.slice(Mg,Mg+3));return Ug?(Cg.L=+Ug[0],Mg+Ug[0].length):-1}function Xl(Cg,zg,Mg){var Ug=H_.exec(zg.slice(Mg,Mg+1));return Ug?Mg+Ug[0].length:-1}function ql(Cg,zg){return bl(Cg.getDate(),zg,2)}function Il(Cg,zg){return bl(Cg.getHours(),zg,2)}function Nl(Cg,zg){return bl(Cg.getHours()%12||12,zg,2)}function Ol(Cg,zg){return bl(1+r_.count(u_(Cg),Cg),zg,3)}function jl(Cg,zg){return bl(Cg.getMilliseconds(),zg,3)}function $l(Cg,zg){return bl(Cg.getMonth()+1,zg,2)}function Vl(Cg,zg){return bl(Cg.getMinutes(),zg,2)}function Bl(Cg,zg){return bl(Cg.getSeconds(),zg,2)}function Zl(Cg,zg){return bl(s_.count(u_(Cg),Cg),zg,2)}function Wl(Cg){return Cg.getDay()}function Rl(Cg,zg){return bl(d_.count(u_(Cg),Cg),zg,2)}function Gl(Cg,zg){return bl(Cg.getFullYear()%100,zg,2)}function Jl(Cg,zg){return bl(Cg.getFullYear()%1e4,zg,4)}function Kl(Cg){var zg=Cg.getTimezoneOffset();return(0<zg?"-":(zg*=-1,"+"))+bl(0|zg/60,"0",2)+bl(zg%60,"0",2)}function Ql(Cg,zg){return bl(Cg.getUTCDate(),zg,2)}function es(Cg,zg){return bl(Cg.getUTCHours(),zg,2)}function ts(Cg,zg){return bl(Cg.getUTCHours()%12||12,zg,2)}function ns(Cg,zg){return bl(1+p_.count(m_(Cg),Cg),zg,3)}function os(Cg,zg){return bl(Cg.getUTCMilliseconds(),zg,3)}function as(Cg,zg){return bl(Cg.getUTCMonth()+1,zg,2)}function is(Cg,zg){return bl(Cg.getUTCMinutes(),zg,2)}function ls(Cg,zg){return bl(Cg.getUTCSeconds(),zg,2)}function rs(Cg,zg){return bl(__.count(m_(Cg),Cg),zg,2)}function ss(Cg){return Cg.getUTCDay()}function ds(Cg,zg){return bl(h_.count(m_(Cg),Cg),zg,2)}function cs(Cg,zg){return bl(Cg.getUTCFullYear()%100,zg,2)}function us(Cg,zg){return bl(Cg.getUTCFullYear()%1e4,zg,4)}function ps(){return"+0000"}function _s(){return"%"}function hs(Cg){return U_=vl(Cg),Ia.timeFormat=U_.format,Ia.timeParse=U_.parse,A_=U_.utcFormat,Y_=U_.utcParse,U_}function ms(){}function gs(Cg,zg){var Mg=new ms;if(Cg instanceof ms)Cg.each(function(Pg,Dg){Mg.set(Dg,Pg)});else if(Array.isArray(Cg)){var Ug,Ag=-1,Yg=Cg.length;if(null==zg)for(;++Ag<Yg;)Mg.set(Ag,Cg[Ag]);else for(;++Ag<Yg;)Mg.set(zg(Ug=Cg[Ag],Ag,Cg),Ug)}else if(Cg)for(var Eg in Cg)Mg.set(Eg,Cg[Eg]);return Mg}function ys(){}function fs(Cg,zg){var Mg=Object.create(Cg.prototype);for(var Ug in zg)Mg[Ug]=zg[Ug];return Mg}function xs(){}function vs(Cg){var zg;return Cg=(Cg+"").trim().toLowerCase(),(zg=Z_.exec(Cg))?(zg=parseInt(zg[1],16),new Ss(15&zg>>8|240&zg>>4,15&zg>>4|240&zg,(15&zg)<<4|15&zg,1)):(zg=W_.exec(Cg))?bs(parseInt(zg[1],16)):(zg=R_.exec(Cg))?new Ss(zg[1],zg[2],zg[3],1):(zg=G_.exec(Cg))?new Ss(255*zg[1]/100,255*zg[2]/100,255*zg[3]/100,1):(zg=J_.exec(Cg))?ws(zg[1],zg[2],zg[3],zg[4]):(zg=K_.exec(Cg))?ws(255*zg[1]/100,255*zg[2]/100,255*zg[3]/100,zg[4]):(zg=Q_.exec(Cg))?Cs(zg[1],zg[2]/100,zg[3]/100,1):(zg=eh.exec(Cg))?Cs(zg[1],zg[2]/100,zg[3]/100,zg[4]):th.hasOwnProperty(Cg)?bs(th[Cg]):"transparent"===Cg?new Ss(NaN,NaN,NaN,0):null}function bs(Cg){return new Ss(255&Cg>>16,255&Cg>>8,255&Cg,1)}function ws(Cg,zg,Mg,Ug){return 0>=Ug&&(Cg=zg=Mg=NaN),new Ss(Cg,zg,Mg,Ug)}function Ts(Cg){return Cg instanceof xs||(Cg=vs(Cg)),Cg?(Cg=Cg.rgb(),new Ss(Cg.r,Cg.g,Cg.b,Cg.opacity)):new Ss}function ks(Cg,zg,Mg,Ug){return 1===arguments.length?Ts(Cg):new Ss(Cg,zg,Mg,null==Ug?1:Ug)}function Ss(Cg,zg,Mg,Ug){this.r=+Cg,this.g=+zg,this.b=+Mg,this.opacity=+Ug}function Cs(Cg,zg,Mg,Ug){return 0>=Ug?Cg=zg=Mg=NaN:0>=Mg||1<=Mg?Cg=zg=NaN:0>=zg&&(Cg=NaN),new Ms(Cg,zg,Mg,Ug)}function zs(Cg){if(Cg instanceof Ms)return new Ms(Cg.h,Cg.s,Cg.l,Cg.opacity);if(Cg instanceof xs||(Cg=vs(Cg)),!Cg)return new Ms;if(Cg instanceof Ms)return Cg;var zg=(Cg=Cg.rgb()).r/255,Mg=Cg.g/255,Ug=Cg.b/255,Ag=Math.min(zg,Mg,Ug),Yg=Math.max(zg,Mg,Ug),Eg=NaN,Pg=Yg-Ag,Dg=(Yg+Ag)/2;return Pg?(Eg=zg===Yg?(Mg-Ug)/Pg+6*(Mg<Ug):Mg===Yg?(Ug-zg)/Pg+2:(zg-Mg)/Pg+4,Pg/=.5>Dg?Yg+Ag:2-Yg-Ag,Eg*=60):Pg=0<Dg&&1>Dg?0:Eg,new Ms(Eg,Pg,Dg,Cg.opacity)}function Ms(Cg,zg,Mg,Ug){this.h=+Cg,this.s=+zg,this.l=+Mg,this.opacity=+Ug}function Us(Cg,zg,Mg){return 255*(60>Cg?zg+(Mg-zg)*Cg/60:180>Cg?Mg:240>Cg?zg+(Mg-zg)*(240-Cg)/60:zg)}function As(Cg){if(Cg instanceof Ys)return new Ys(Cg.l,Cg.a,Cg.b,Cg.opacity);if(Cg instanceof Hs){var zg=Cg.h*nh;return new Ys(Cg.l,Math.cos(zg)*Cg.c,Math.sin(zg)*Cg.c,Cg.opacity)}Cg instanceof Ss||(Cg=Ts(Cg));var Mg=Fs(Cg.r),Ug=Fs(Cg.g),Ag=Fs(Cg.b),Yg=Es((.4124564*Mg+.3575761*Ug+.1804375*Ag)/ah),Eg=Es((.2126729*Mg+.7151522*Ug+.072175*Ag)/ih);return new Ys(116*Eg-16,500*(Yg-Eg),200*(Eg-Es((.0193339*Mg+.119192*Ug+.9503041*Ag)/lh)),Cg.opacity)}function Ys(Cg,zg,Mg,Ug){this.l=+Cg,this.a=+zg,this.b=+Mg,this.opacity=+Ug}function Es(Cg){return Cg>ch?Math.pow(Cg,1/3):Cg/dh+rh}function Ps(Cg){return Cg>sh?Cg*Cg*Cg:dh*(Cg-rh)}function Ds(Cg){return 255*(.0031308>=Cg?12.92*Cg:1.055*Math.pow(Cg,1/2.4)-.055)}function Fs(Cg){return .04045>=(Cg/=255)?Cg/12.92:Math.pow((Cg+.055)/1.055,2.4)}function Ls(Cg){if(Cg instanceof Hs)return new Hs(Cg.h,Cg.c,Cg.l,Cg.opacity);Cg instanceof Ys||(Cg=As(Cg));var zg=Math.atan2(Cg.b,Cg.a)*oh;return new Hs(0>zg?zg+360:zg,Math.sqrt(Cg.a*Cg.a+Cg.b*Cg.b),Cg.l,Cg.opacity)}function Hs(Cg,zg,Mg,Ug){this.h=+Cg,this.c=+zg,this.l=+Mg,this.opacity=+Ug}function Xs(Cg){if(Cg instanceof Is)return new Is(Cg.h,Cg.s,Cg.l,Cg.opacity);Cg instanceof Ss||(Cg=Ts(Cg));var zg=Cg.r/255,Mg=Cg.g/255,Ug=Cg.b/255,Ag=(fh*Ug+gh*zg-yh*Mg)/(fh+gh-yh),Yg=Ug-Ag,Eg=(mh*(Mg-Ag)-_h*Yg)/hh,Pg=Math.sqrt(Eg*Eg+Yg*Yg)/(mh*Ag*(1-Ag)),Dg=Pg?Math.atan2(Eg,Yg)*oh-120:NaN;return new Is(0>Dg?Dg+360:Dg,Pg,Ag,Cg.opacity)}function qs(Cg,zg,Mg,Ug){return 1===arguments.length?Xs(Cg):new Is(Cg,zg,Mg,null==Ug?1:Ug)}function Is(Cg,zg,Mg,Ug){this.h=+Cg,this.s=+zg,this.l=+Mg,this.opacity=+Ug}function Ns(Cg,zg){return function(Mg){return Cg+Mg*zg}}function Os(Cg,zg,Mg){return Cg=Math.pow(Cg,Mg),zg=Math.pow(zg,Mg)-Cg,Mg=1/Mg,function(Ug){return Math.pow(Cg+Ug*zg,Mg)}}function js(Cg){return 1==(Cg=+Cg)?$s:function(zg,Mg){return Mg-zg?Os(zg,Mg,Cg):Th(isNaN(zg)?Mg:zg)}}function $s(Cg,zg){var Mg=zg-Cg;return Mg?Ns(Cg,Mg):Th(isNaN(Cg)?zg:Cg)}function Vs(Cg){return function(){return Cg}}function Bs(Cg){return function(zg){return Cg(zg)+""}}function Zs(Cg,zg,Mg,Ug){function Ag(Fg){return Fg.length?Fg.pop()+" ":""}function Yg(Fg,Lg,Hg,Xg,qg,Ig){if(Fg!==Hg||Lg!==Xg){var Ng=qg.push("translate(",null,zg,null,Mg);Ig.push({i:Ng-4,x:zh(Fg,Hg)},{i:Ng-2,x:zh(Lg,Xg)})}else(Hg||Xg)&&qg.push("translate("+Hg+zg+Xg+Mg)}function Eg(Fg,Lg,Hg,Xg){Fg===Lg?Lg&&Hg.push(Ag(Hg)+"rotate("+Lg+Ug):(180<Fg-Lg?Lg+=360:180<Lg-Fg&&(Fg+=360),Xg.push({i:Hg.push(Ag(Hg)+"rotate(",null,Ug)-2,x:zh(Fg,Lg)}))}function Pg(Fg,Lg,Hg,Xg){Fg===Lg?Lg&&Hg.push(Ag(Hg)+"skewX("+Lg+Ug):Xg.push({i:Hg.push(Ag(Hg)+"skewX(",null,Ug)-2,x:zh(Fg,Lg)})}function Dg(Fg,Lg,Hg,Xg,qg,Ig){if(Fg!==Hg||Lg!==Xg){var Ng=qg.push(Ag(qg)+"scale(",null,",",null,")");Ig.push({i:Ng-4,x:zh(Fg,Hg)},{i:Ng-2,x:zh(Lg,Xg)})}else 1===Hg&&1===Xg||qg.push(Ag(qg)+"scale("+Hg+","+Xg+")")}return function(Fg,Lg){var Hg=[],Xg=[];return Fg=Cg(Fg),Lg=Cg(Lg),Yg(Fg.translateX,Fg.translateY,Lg.translateX,Lg.translateY,Hg,Xg),Eg(Fg.rotate,Lg.rotate,Hg,Xg),Pg(Fg.skewX,Lg.skewX,Hg,Xg),Dg(Fg.scaleX,Fg.scaleY,Lg.scaleX,Lg.scaleY,Hg,Xg),Fg=Lg=null,function(qg){for(var Ig,Ng=-1,Og=Xg.length;++Ng<Og;)Hg[(Ig=Xg[Ng]).i]=Ig.x(qg);return Hg.join("")}}}function Ws(Cg){return((Cg=Math.exp(Cg))+1/Cg)/2}function Rs(Cg){return((Cg=Math.exp(Cg))-1/Cg)/2}function Gs(Cg){return((Cg=Math.exp(2*Cg))-1)/(Cg+1)}function Js(Cg){return function zg(Mg){function Ug(Ag,Yg){var Eg=Cg((Ag=qs(Ag)).h,(Yg=qs(Yg)).h),Pg=$s(Ag.s,Yg.s),Dg=$s(Ag.l,Yg.l),Fg=$s(Ag.opacity,Yg.opacity);return function(Lg){return Ag.h=Eg(Lg),Ag.s=Pg(Lg),Ag.l=Dg(Math.pow(Lg,Mg)),Ag.opacity=Fg(Lg),Ag+""}}return Mg=+Mg,Ug.gamma=zg,Ug}(1)}function Ks(Cg,zg){return(zg-=Cg=+Cg)?function(Mg){return(Mg-Cg)/zg}:Oh(zg)}function Qs(Cg){return function(zg,Mg){var Ug=Cg(zg=+zg,Mg=+Mg);return function(Ag){return Ag<=zg?0:Ag>=Mg?1:Ug(Ag)}}}function ed(Cg){return function(zg,Mg){var Ug=Cg(zg=+zg,Mg=+Mg);return function(Ag){return 0>=Ag?zg:1<=Ag?Mg:Ug(Ag)}}}function td(Cg,zg,Mg,Ug){var Ag=Cg[0],Yg=Cg[1],Eg=zg[0],Pg=zg[1];return Yg<Ag?(Ag=Mg(Yg,Ag),Eg=Ug(Pg,Eg)):(Ag=Mg(Ag,Yg),Eg=Ug(Eg,Pg)),function(Dg){return Eg(Ag(Dg))}}function nd(Cg,zg,Mg,Ug){var Ag=Math.min(Cg.length,zg.length)-1,Yg=Array(Ag),Eg=Array(Ag),Pg=-1;for(Cg[Ag]<Cg[0]&&(Cg=Cg.slice().reverse(),zg=zg.slice().reverse());++Pg<Ag;)Yg[Pg]=Mg(Cg[Pg],Cg[Pg+1]),Eg[Pg]=Ug(zg[Pg],zg[Pg+1]);return function(Dg){var Fg=qp(Cg,Dg,1,Ag)-1;return Eg[Fg](Yg[Fg](Dg))}}function od(Cg,zg){return zg.domain(Cg.domain()).range(Cg.range()).interpolate(Cg.interpolate()).clamp(Cg.clamp())}function ad(Cg,zg){function Mg(){return Ag=2<Math.min(Pg.length,Dg.length)?nd:td,Yg=Eg=null,Ug}function Ug(Hg){return(Yg||(Yg=Ag(Pg,Dg,Lg?Qs(Cg):Cg,Fg)))(+Hg)}var Ag,Yg,Eg,Pg=$h,Dg=$h,Fg=Eh,Lg=!1;return Ug.invert=function(Hg){return(Eg||(Eg=Ag(Dg,Pg,Ks,Lg?ed(zg):zg)))(+Hg)},Ug.domain=function(Hg){return arguments.length?(Pg=N_.call(Hg,jh),Mg()):Pg.slice()},Ug.range=function(Hg){return arguments.length?(Dg=O_.call(Hg),Mg()):Dg.slice()},Ug.rangeRound=function(Hg){return Dg=O_.call(Hg),Fg=Ph,Mg()},Ug.clamp=function(Hg){return arguments.length?(Lg=!!Hg,Mg()):Lg},Ug.interpolate=function(Hg){return arguments.length?(Fg=Hg,Mg()):Fg},Mg()}function id(Cg){var zg=Cg.domain;return Cg.ticks=function(Mg){var Ug=zg();return jp(Ug[0],Ug[Ug.length-1],null==Mg?10:Mg)},Cg.tickFormat=function(Mg,Ug){return Vh(zg(),Mg,Ug)},Cg.nice=function(Mg){null==Mg&&(Mg=10);var Ug,Ag=zg(),Yg=0,Eg=Ag.length-1,Pg=Ag[Yg],Dg=Ag[Eg];return Dg<Pg&&(Ug=Pg,Pg=Dg,Dg=Ug,Ug=Yg,Yg=Eg,Eg=Ug),0<(Ug=ja(Pg,Dg,Mg))?Ug=ja(Pg=Math.floor(Pg/Ug)*Ug,Dg=Math.ceil(Dg/Ug)*Ug,Mg):0>Ug&&(Ug=ja(Pg=Math.ceil(Pg*Ug)/Ug,Dg=Math.floor(Dg*Ug)/Ug,Mg)),0<Ug?(Ag[Yg]=Math.floor(Pg/Ug)*Ug,Ag[Eg]=Math.ceil(Dg/Ug)*Ug,zg(Ag)):0>Ug&&(Ag[Yg]=Math.ceil(Pg*Ug)/Ug,Ag[Eg]=Math.floor(Dg*Ug)/Ug,zg(Ag)),Cg},Cg}function ld(){var Cg=ad(Ks,zh);return Cg.copy=function(){return od(Cg,ld())},id(Cg)}function rd(Cg,zg){return(zg=Math.log(zg/Cg))?function(Mg){return Math.log(Mg/Cg)/zg}:Oh(zg)}function sd(Cg,zg){return 0>Cg?function(Mg){return-Math.pow(-zg,Mg)*Math.pow(-Cg,1-Mg)}:function(Mg){return Math.pow(zg,Mg)*Math.pow(Cg,1-Mg)}}function dd(Cg){return isFinite(Cg)?+("1e"+Cg):0>Cg?0:Cg}function cd(Cg){return 10===Cg?dd:Cg===Math.E?Math.exp:function(zg){return Math.pow(Cg,zg)}}function ud(Cg){return Cg===Math.E?Math.log:10===Cg&&Math.log10||2===Cg&&Math.log2||(Cg=Math.log(Cg),function(zg){return Math.log(zg)/Cg})}function pd(Cg){return function(zg){return-Cg(-zg)}}function _d(){function Cg(){return Ag=ud(Ug),Yg=cd(Ug),0>Mg()[0]&&(Ag=pd(Ag),Yg=pd(Yg)),zg}var zg=ad(rd,sd).domain([1,10]),Mg=zg.domain,Ug=10,Ag=ud(10),Yg=cd(10);return zg.base=function(Eg){return arguments.length?(Ug=+Eg,Cg()):Ug},zg.domain=function(Eg){return arguments.length?(Mg(Eg),Cg()):Mg()},zg.ticks=function(Eg){var Pg,Dg=Mg(),Fg=Dg[0],Lg=Dg[Dg.length-1];(Pg=Lg<Fg)&&(Ig=Fg,Fg=Lg,Lg=Ig);var Hg,Xg,qg,Ig=Ag(Fg),Ng=Ag(Lg),Og=null==Eg?10:+Eg,jg=[];if(!(!(Ug%1)&&Ng-Ig<Og))jg=jp(Ig,Ng,Math.min(Ng-Ig,Og)).map(Yg);else if(Ig=Math.round(Ig)-1,Ng=Math.round(Ng)+1,0<Fg){for(;Ig<Ng;++Ig)for(Xg=1,Hg=Yg(Ig);Xg<Ug;++Xg)if(!((qg=Hg*Xg)<Fg)){if(qg>Lg)break;jg.push(qg)}}else for(;Ig<Ng;++Ig)for(Xg=Ug-1,Hg=Yg(Ig);1<=Xg;--Xg)if(!((qg=Hg*Xg)<Fg)){if(qg>Lg)break;jg.push(qg)}return Pg?jg.reverse():jg},zg.tickFormat=function(Eg,Pg){if(null==Pg&&(Pg=10===Ug?".0e":","),"function"!=typeof Pg&&(Pg=Ia.format(Pg)),Eg===1/0)return Pg;null==Eg&&(Eg=10);var Dg=Math.max(1,Ug*Eg/zg.ticks().length);return function(Fg){var Lg=Fg/Yg(Math.round(Ag(Fg)));return Lg*Ug<Ug-.5&&(Lg*=Ug),Lg<=Dg?Pg(Fg):""}},zg.nice=function(){return Mg(Bh(Mg(),{floor:function(Eg){return Yg(Math.floor(Ag(Eg)))},ceil:function(Eg){return Yg(Math.ceil(Ag(Eg)))}}))},zg.copy=function(){return od(zg,_d().base(Ug))},zg}function hd(Cg,zg){return 0>Cg?-Math.pow(-Cg,zg):Math.pow(Cg,zg)}function md(){var Cg=1,zg=ad(function(Ug,Ag){return(Ag=hd(Ag,Cg)-(Ug=hd(Ug,Cg)))?function(Yg){return(hd(Yg,Cg)-Ug)/Ag}:Oh(Ag)},function(Ug,Ag){return Ag=hd(Ag,Cg)-(Ug=hd(Ug,Cg)),function(Yg){return hd(Ug+Ag*Yg,1/Cg)}}),Mg=zg.domain;return zg.exponent=function(Ug){return arguments.length?(Cg=+Ug,Mg(Mg())):Cg},zg.copy=function(){return od(zg,md().exponent(Cg))},id(zg)}function gd(Cg){return new Date(Cg)}function yd(Cg){return Cg instanceof Date?+Cg:+new Date(+Cg)}function fd(Cg,zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg){function Fg(Rg){return(Eg(Rg)<Rg?Ig:Yg(Rg)<Rg?Ng:Ag(Rg)<Rg?Og:Ug(Rg)<Rg?jg:zg(Rg)<Rg?Mg(Rg)<Rg?$g:Vg:Cg(Rg)<Rg?Bg:Zg)(Rg)}function Lg(Rg,Gg,Jg,Kg){if(null==Rg&&(Rg=10),"number"==typeof Rg){var Qg=Math.abs(Jg-Gg)/Rg,ey=Xp(function(ty){return ty[2]}).right(Wg,Qg);ey===Wg.length?(Kg=$a(Gg/Qh,Jg/Qh,Rg),Rg=Cg):ey?(Kg=(ey=Wg[Qg/Wg[ey-1][2]<Wg[ey][2]/Qg?ey-1:ey])[1],Rg=ey[0]):(Kg=$a(Gg,Jg,Rg),Rg=Pg)}return null==Kg?Rg:Rg.every(Kg)}var Hg=ad(Ks,zh),Xg=Hg.invert,qg=Hg.domain,Ig=Dg(".%L"),Ng=Dg(":%S"),Og=Dg("%I:%M"),jg=Dg("%I %p"),$g=Dg("%a %d"),Vg=Dg("%b %d"),Bg=Dg("%B"),Zg=Dg("%Y"),Wg=[[Eg,1,Zh],[Eg,5,5*Zh],[Eg,15,15*Zh],[Eg,30,30*Zh],[Yg,1,Wh],[Yg,5,5*Wh],[Yg,15,15*Wh],[Yg,30,30*Wh],[Ag,1,Rh],[Ag,3,3*Rh],[Ag,6,6*Rh],[Ag,12,12*Rh],[Ug,1,Gh],[Ug,2,2*Gh],[Mg,1,Jh],[zg,1,Kh],[zg,3,3*Kh],[Cg,1,Qh]];return Hg.invert=function(Rg){return new Date(Xg(Rg))},Hg.domain=function(Rg){return arguments.length?qg(N_.call(Rg,yd)):qg().map(gd)},Hg.ticks=function(Rg,Gg){var Jg,Kg=qg(),Qg=Kg[0],ey=Kg[Kg.length-1],ty=ey<Qg;return ty&&(Jg=Qg,Qg=ey,ey=Jg),Jg=Lg(Rg,Qg,ey,Gg),Jg=Jg?Jg.range(Qg,ey+1):[],ty?Jg.reverse():Jg},Hg.tickFormat=function(Rg,Gg){return null==Gg?Fg:Dg(Gg)},Hg.nice=function(Rg,Gg){var Jg=qg();return(Rg=Lg(Rg,Jg[0],Jg[Jg.length-1],Gg))?qg(Bh(Jg,Rg)):Hg},Hg.copy=function(){return od(Hg,fd(Cg,zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg))},Hg}function xd(Cg){return"translate("+(Cg+.5)+",0)"}function vd(Cg){return"translate(0,"+(Cg+.5)+")"}function bd(Cg){return function(zg){return+Cg(zg)}}function wd(Cg){var zg=Math.max(0,Cg.bandwidth()-1)/2;return Cg.round()&&(zg=Math.round(zg)),function(Mg){return+Cg(Mg)+zg}}function Td(){return!this.__axis}function kd(Cg,zg){function Mg(Xg){var qg=null==Ag?zg.ticks?zg.ticks.apply(zg,Ug):zg.domain():Ag,Ig=null==Yg?zg.tickFormat?zg.tickFormat.apply(zg,Ug):nm:Yg,Ng=Math.max(Eg,0)+Dg,Og=zg.range(),jg=+Og[0]+.5,$g=+Og[Og.length-1]+.5,Vg=(zg.bandwidth?wd:bd)(zg.copy()),Bg=Xg.selection?Xg.selection():Xg,Zg=Bg.selectAll(".domain").data([null]),Wg=Bg.selectAll(".tick").data(qg,zg).order(),Rg=Wg.exit(),Gg=Wg.enter().append("g").attr("class","tick"),Jg=Wg.select("line"),Kg=Wg.select("text");Zg=Zg.merge(Zg.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),Wg=Wg.merge(Gg),Jg=Jg.merge(Gg.append("line").attr("stroke","#000").attr(Lg+"2",Fg*Eg)),Kg=Kg.merge(Gg.append("text").attr("fill","#000").attr(Lg,Fg*Ng).attr("dy",Cg===om?"0em":Cg===im?"0.71em":"0.32em")),Xg!==Bg&&(Zg=Zg.transition(Xg),Wg=Wg.transition(Xg),Jg=Jg.transition(Xg),Kg=Kg.transition(Xg),Rg=Rg.transition(Xg).attr("opacity",rm).attr("transform",function(Qg){return isFinite(Qg=Vg(Qg))?Hg(Qg):this.getAttribute("transform")}),Gg.attr("opacity",rm).attr("transform",function(Qg){var ey=this.parentNode.__axis;return Hg(ey&&isFinite(ey=ey(Qg))?ey:Vg(Qg))})),Rg.remove(),Zg.attr("d",Cg===lm||Cg==am?"M"+Fg*Pg+","+jg+"H0.5V"+$g+"H"+Fg*Pg:"M"+jg+","+Fg*Pg+"V0.5H"+$g+"V"+Fg*Pg),Wg.attr("opacity",1).attr("transform",function(Qg){return Hg(Vg(Qg))}),Jg.attr(Lg+"2",Fg*Eg),Kg.attr(Lg,Fg*Ng).text(Ig),Bg.filter(Td).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",Cg===am?"start":Cg===lm?"end":"middle"),Bg.each(function(){this.__axis=Vg})}var Ug=[],Ag=null,Yg=null,Eg=6,Pg=6,Dg=3,Fg=Cg===om||Cg===lm?-1:1,Lg=Cg===lm||Cg===am?"x":"y",Hg=Cg===om||Cg===im?xd:vd;return Mg.scale=function(Xg){return arguments.length?(zg=Xg,Mg):zg},Mg.ticks=function(){return Ug=tm.call(arguments),Mg},Mg.tickArguments=function(Xg){return arguments.length?(Ug=null==Xg?[]:tm.call(Xg),Mg):Ug.slice()},Mg.tickValues=function(Xg){return arguments.length?(Ag=null==Xg?null:tm.call(Xg),Mg):Ag&&Ag.slice()},Mg.tickFormat=function(Xg){return arguments.length?(Yg=Xg,Mg):Yg},Mg.tickSize=function(Xg){return arguments.length?(Eg=Pg=+Xg,Mg):Eg},Mg.tickSizeInner=function(Xg){return arguments.length?(Eg=+Xg,Mg):Eg},Mg.tickSizeOuter=function(Xg){return arguments.length?(Pg=+Xg,Mg):Pg},Mg.tickPadding=function(Xg){return arguments.length?(Dg=+Xg,Mg):Dg},Mg}function Sd(){for(var Cg,zg=0,Mg=arguments.length,Ug={};zg<Mg;++zg){if(!(Cg=arguments[zg]+"")||Cg in Ug)throw new Error("illegal type: "+Cg);Ug[Cg]=[]}return new Cd(Ug)}function Cd(Cg){this._=Cg}function zd(Cg,zg){return Cg.trim().split(/^|\s+/).map(function(Mg){var Ug="",Ag=Mg.indexOf(".");if(0<=Ag&&(Ug=Mg.slice(Ag+1),Mg=Mg.slice(0,Ag)),Mg&&!zg.hasOwnProperty(Mg))throw new Error("unknown type: "+Mg);return{type:Mg,name:Ug}})}function Md(Cg,zg){for(var Mg,Ug=0,Ag=Cg.length;Ug<Ag;++Ug)if((Mg=Cg[Ug]).name===zg)return Mg.value}function Ud(Cg,zg,Mg){for(var Ug=0,Ag=Cg.length;Ug<Ag;++Ug)if(Cg[Ug].name===zg){Cg[Ug]=sm,Cg=Cg.slice(0,Ug).concat(Cg.slice(Ug+1));break}return null!=Mg&&Cg.push({name:zg,value:Mg}),Cg}function Ad(Cg){return function(){var zg=this.ownerDocument,Mg=this.namespaceURI;return Mg===dm&&zg.documentElement.namespaceURI===dm?zg.createElement(Cg):zg.createElementNS(Mg,Cg)}}function Yd(Cg){return function(){return this.ownerDocument.createElementNS(Cg.space,Cg.local)}}function Ed(Cg,zg,Mg){return Cg=Pd(Cg,zg,Mg),function(Ug){var Ag=Ug.relatedTarget;Ag&&(Ag===this||8&Ag.compareDocumentPosition(this))||Cg.call(this,Ug)}}function Pd(Cg,zg,Mg){return function(Ug){var Ag=Ia.event;Ia.event=Ug;try{Cg.call(this,this.__data__,zg,Mg)}finally{Ia.event=Ag}}}function Dd(Cg){return Cg.trim().split(/^|\s+/).map(function(zg){var Mg="",Ug=zg.indexOf(".");return 0<=Ug&&(Mg=zg.slice(Ug+1),zg=zg.slice(0,Ug)),{type:zg,name:Mg}})}function Fd(Cg){return function(){var zg=this.__on;if(zg){for(var Mg,Ug=0,Ag=-1,Yg=zg.length;Ug<Yg;++Ug)Mg=zg[Ug],Cg.type&&Mg.type!==Cg.type||Mg.name!==Cg.name?zg[++Ag]=Mg:this.removeEventListener(Mg.type,Mg.listener,Mg.capture);++Ag?zg.length=Ag:delete this.__on}}}function Ld(Cg,zg,Mg){var Ug=ym.hasOwnProperty(Cg.type)?Ed:Pd;return function(Ag,Yg,Eg){var Pg,Dg=this.__on,Fg=Ug(zg,Yg,Eg);if(Dg)for(var Lg=0,Hg=Dg.length;Lg<Hg;++Lg)if((Pg=Dg[Lg]).type===Cg.type&&Pg.name===Cg.name)return this.removeEventListener(Pg.type,Pg.listener,Pg.capture),this.addEventListener(Pg.type,Pg.listener=Fg,Pg.capture=Mg),void(Pg.value=zg);this.addEventListener(Cg.type,Fg,Mg),Pg={type:Cg.type,name:Cg.name,value:zg,listener:Fg,capture:Mg},Dg?Dg.push(Pg):this.__on=[Pg]}}function Hd(Cg,zg,Mg,Ug){var Ag=Ia.event;Cg.sourceEvent=Ia.event,Ia.event=Cg;try{return zg.apply(Mg,Ug)}finally{Ia.event=Ag}}function Xd(){}function qd(){return[]}function Id(Cg,zg){this.ownerDocument=Cg.ownerDocument,this.namespaceURI=Cg.namespaceURI,this._next=null,this._parent=Cg,this.__data__=zg}function Nd(Cg,zg,Mg,Ug,Ag,Yg){for(var Eg,Pg=0,Dg=zg.length,Fg=Yg.length;Pg<Fg;++Pg)(Eg=zg[Pg])?(Eg.__data__=Yg[Pg],Ug[Pg]=Eg):Mg[Pg]=new Id(Cg,Yg[Pg]);for(;Pg<Dg;++Pg)(Eg=zg[Pg])&&(Ag[Pg]=Eg)}function Od(Cg,zg,Mg,Ug,Ag,Yg,Eg){var Pg,Dg,Fg,Lg={},Hg=zg.length,Xg=Yg.length,qg=Array(Hg);for(Pg=0;Pg<Hg;++Pg)(Dg=zg[Pg])&&(qg[Pg]=Fg=Sm+Eg.call(Dg,Dg.__data__,Pg,zg),Fg in Lg?Ag[Pg]=Dg:Lg[Fg]=Dg);for(Pg=0;Pg<Xg;++Pg)(Dg=Lg[Fg=Sm+Eg.call(Cg,Yg[Pg],Pg,Yg)])?(Ug[Pg]=Dg,Dg.__data__=Yg[Pg],Lg[Fg]=null):Mg[Pg]=new Id(Cg,Yg[Pg]);for(Pg=0;Pg<Hg;++Pg)(Dg=zg[Pg])&&Lg[qg[Pg]]===Dg&&(Ag[Pg]=Dg)}function jd(Cg,zg){return Cg<zg?-1:Cg>zg?1:Cg>=zg?0:NaN}function $d(Cg){return function(){this.removeAttribute(Cg)}}function Vd(Cg){return function(){this.removeAttributeNS(Cg.space,Cg.local)}}function Bd(Cg,zg){return function(){this.setAttribute(Cg,zg)}}function Zd(Cg,zg){return function(){this.setAttributeNS(Cg.space,Cg.local,zg)}}function Wd(Cg,zg){return function(){var Mg=zg.apply(this,arguments);null==Mg?this.removeAttribute(Cg):this.setAttribute(Cg,Mg)}}function Rd(Cg,zg){return function(){var Mg=zg.apply(this,arguments);null==Mg?this.removeAttributeNS(Cg.space,Cg.local):this.setAttributeNS(Cg.space,Cg.local,Mg)}}function Gd(Cg){return function(){this.style.removeProperty(Cg)}}function Jd(Cg,zg,Mg){return function(){this.style.setProperty(Cg,zg,Mg)}}function Kd(Cg,zg,Mg){return function(){var Ug=zg.apply(this,arguments);null==Ug?this.style.removeProperty(Cg):this.style.setProperty(Cg,Ug,Mg)}}function Qd(Cg,zg){return Cg.style.getPropertyValue(zg)||Cm(Cg).getComputedStyle(Cg,null).getPropertyValue(zg)}function ec(Cg){return function(){delete this[Cg]}}function tc(Cg,zg){return function(){this[Cg]=zg}}function nc(Cg,zg){return function(){var Mg=zg.apply(this,arguments);null==Mg?delete this[Cg]:this[Cg]=Mg}}function oc(Cg){return Cg.trim().split(/^|\s+/)}function ac(Cg){return Cg.classList||new ic(Cg)}function ic(Cg){this._node=Cg,this._names=oc(Cg.getAttribute("class")||"")}function lc(Cg,zg){for(var Mg=ac(Cg),Ug=-1,Ag=zg.length;++Ug<Ag;)Mg.add(zg[Ug])}function rc(Cg,zg){for(var Mg=ac(Cg),Ug=-1,Ag=zg.length;++Ug<Ag;)Mg.remove(zg[Ug])}function sc(Cg){return function(){lc(this,Cg)}}function dc(Cg){return function(){rc(this,Cg)}}function cc(Cg,zg){return function(){(zg.apply(this,arguments)?lc:rc)(this,Cg)}}function uc(){this.textContent=""}function pc(Cg){return function(){this.textContent=Cg}}function _c(Cg){return function(){var zg=Cg.apply(this,arguments);this.textContent=null==zg?"":zg}}function hc(){this.innerHTML=""}function mc(Cg){return function(){this.innerHTML=Cg}}function gc(Cg){return function(){var zg=Cg.apply(this,arguments);this.innerHTML=null==zg?"":zg}}function yc(){this.nextSibling&&this.parentNode.appendChild(this)}function fc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xc(){return null}function vc(){var Cg=this.parentNode;Cg&&Cg.removeChild(this)}function bc(Cg,zg,Mg){var Ug=Cm(Cg),Ag=Ug.CustomEvent;"function"==typeof Ag?Ag=new Ag(zg,Mg):(Ag=Ug.document.createEvent("Event"),Mg?(Ag.initEvent(zg,Mg.bubbles,Mg.cancelable),Ag.detail=Mg.detail):Ag.initEvent(zg,!1,!1)),Cg.dispatchEvent(Ag)}function wc(Cg,zg){return function(){return bc(this,Cg,zg)}}function Tc(Cg,zg){return function(){return bc(this,Cg,zg.apply(this,arguments))}}function kc(Cg,zg){this._groups=Cg,this._parents=zg}function Sc(){return new kc([[document.documentElement]],zm)}function Cc(){Ia.event.stopImmediatePropagation()}function zc(Cg,zg){var Mg=Cg.document.documentElement,Ug=Mm(Cg).on("dragstart.drag",null);zg&&(Ug.on("click.drag",Am,!0),setTimeout(function(){Ug.on("click.drag",null)},0)),"onselectstart"in Mg?Ug.on("selectstart.drag",null):(Mg.style.MozUserSelect=Mg.__noselect,delete Mg.__noselect)}function Mc(Cg,zg,Mg,Ug,Ag,Yg,Eg,Pg,Dg,Fg){this.target=Cg,this.type=zg,this.subject=Mg,this.identifier=Ug,this.active=Ag,this.x=Yg,this.y=Eg,this.dx=Pg,this.dy=Dg,this._=Fg}function Uc(){return!Ia.event.button}function Ac(){return this.parentNode}function Yc(Cg){return null==Cg?{x:Ia.event.x,y:Ia.event.y}:Cg}function Ec(){return"ontouchstart"in this}function Pc(){return Im||(jm(Dc),Im=Om.now()+Nm)}function Dc(){Im=0}function Fc(){this._call=this._time=this._next=null}function Lc(Cg,zg,Mg){var Ug=new Fc;return Ug.restart(Cg,zg,Mg),Ug}function Hc(){Pc(),++Fm;for(var Cg,zg=Pm;zg;)0<=(Cg=Im-zg._time)&&zg._call.call(null,Cg),zg=zg._next;--Fm}function Xc(){Im=(qm=Om.now())+Nm,Fm=Lm=0;try{Hc()}finally{Fm=0,Ic(),Im=0}}function qc(){var Cg=Om.now(),zg=Cg-qm;zg>Xm&&(Nm-=zg,qm=Cg)}function Ic(){for(var Cg,zg,Mg=Pm,Ug=1/0;Mg;)Mg._call?(Ug>Mg._time&&(Ug=Mg._time),Cg=Mg,Mg=Mg._next):(zg=Mg._next,Mg._next=null,Mg=Cg?Cg._next=zg:Pm=zg);Dm=Cg,Nc(Ug)}function Nc(Cg){if(!Fm){Lm&&(Lm=clearTimeout(Lm));var zg=Cg-Im;24<zg?(Cg<1/0&&(Lm=setTimeout(Xc,zg)),Hm&&(Hm=clearInterval(Hm))):(Hm||(qm=Im,Hm=setInterval(qc,Xm)),Fm=1,jm(Xc))}}function Oc(Cg,zg){var Mg=Cg.__transition;if(!Mg||!(Mg=Mg[zg])||Mg.state>Zm)throw new Error("too late");return Mg}function jc(Cg,zg){var Mg=Cg.__transition;if(!Mg||!(Mg=Mg[zg])||Mg.state>Rm)throw new Error("too late");return Mg}function $c(Cg,zg){var Mg=Cg.__transition;if(!Mg||!(Mg=Mg[zg]))throw new Error("too late");return Mg}function Vc(Cg,zg,Mg){function Ug(Dg){var Fg,Lg,Hg,Xg;if(Mg.state!==Wm)return Yg();for(Fg in Pg)if((Xg=Pg[Fg]).name===Mg.name){if(Xg.state===Gm)return $m(Ug);Xg.state===Jm?(Xg.state=Qm,Xg.timer.stop(),Xg.on.call("interrupt",Cg,Cg.__data__,Xg.index,Xg.group),delete Pg[Fg]):+Fg<zg&&(Xg.state=Qm,Xg.timer.stop(),delete Pg[Fg])}if($m(function(){Mg.state===Gm&&(Mg.state=Jm,Mg.timer.restart(Ag,Mg.delay,Mg.time),Ag(Dg))}),Mg.state=Rm,Mg.on.call("start",Cg,Cg.__data__,Mg.index,Mg.group),Mg.state===Rm){for(Mg.state=Gm,Eg=Array(Hg=Mg.tween.length),Fg=0,Lg=-1;Fg<Hg;++Fg)(Xg=Mg.tween[Fg].value.call(Cg,Cg.__data__,Mg.index,Mg.group))&&(Eg[++Lg]=Xg);Eg.length=Lg+1}}function Ag(Dg){for(var Fg=Dg<Mg.duration?Mg.ease.call(null,Dg/Mg.duration):(Mg.timer.restart(Yg),Mg.state=Km,1),Lg=-1,Hg=Eg.length;++Lg<Hg;)Eg[Lg].call(null,Fg);Mg.state===Km&&(Mg.on.call("end",Cg,Cg.__data__,Mg.index,Mg.group),Yg())}function Yg(){for(var Dg in Mg.state=Qm,Mg.timer.stop(),delete Pg[zg],Pg)return;delete Cg.__transition}var Eg,Pg=Cg.__transition;Pg[zg]=Mg,Mg.timer=Lc(function(Dg){Mg.state=Wm,Mg.timer.restart(Ug,Mg.delay,Mg.time),Mg.delay<=Dg&&Ug(Dg-Mg.delay)},0,Mg.time)}function Bc(Cg,zg){var Mg,Ug;return function(){var Ag=jc(this,Cg),Yg=Ag.tween;if(Yg!==Mg)for(var Eg=0,Pg=(Ug=Mg=Yg).length;Eg<Pg;++Eg)if(Ug[Eg].name===zg){(Ug=Ug.slice()).splice(Eg,1);break}Ag.tween=Ug}}function Zc(Cg,zg,Mg){var Ug,Ag;if("function"!=typeof Mg)throw new Error;return function(){var Yg=jc(this,Cg),Eg=Yg.tween;if(Eg!==Ug){Ag=(Ug=Eg).slice();for(var Pg={name:zg,value:Mg},Dg=0,Fg=Ag.length;Dg<Fg;++Dg)if(Ag[Dg].name===zg){Ag[Dg]=Pg;break}Dg===Fg&&Ag.push(Pg)}Yg.tween=Ag}}function Wc(Cg,zg,Mg){var Ug=Cg._id;return Cg.each(function(){var Ag=jc(this,Ug);(Ag.value||(Ag.value={}))[zg]=Mg.apply(this,arguments)}),function(Ag){return $c(Ag,Ug).value[zg]}}function Rc(Cg){return function(){this.removeAttribute(Cg)}}function Gc(Cg){return function(){this.removeAttributeNS(Cg.space,Cg.local)}}function Jc(Cg,zg,Mg){var Ug,Ag;return function(){var Yg=this.getAttribute(Cg);return Yg===Mg?null:Yg===Ug?Ag:Ag=zg(Ug=Yg,Mg)}}function Kc(Cg,zg,Mg){var Ug,Ag;return function(){var Yg=this.getAttributeNS(Cg.space,Cg.local);return Yg===Mg?null:Yg===Ug?Ag:Ag=zg(Ug=Yg,Mg)}}function Qc(Cg,zg,Mg){var Ug,Ag,Yg;return function(){var Eg,Pg=Mg(this);{if(null!=Pg)return(Eg=this.getAttribute(Cg))===Pg?null:Eg===Ug&&Pg===Ag?Yg:Yg=zg(Ug=Eg,Ag=Pg);this.removeAttribute(Cg)}}}function ep(Cg,zg,Mg){var Ug,Ag,Yg;return function(){var Eg,Pg=Mg(this);{if(null!=Pg)return(Eg=this.getAttributeNS(Cg.space,Cg.local))===Pg?null:Eg===Ug&&Pg===Ag?Yg:Yg=zg(Ug=Eg,Ag=Pg);this.removeAttributeNS(Cg.space,Cg.local)}}}function tp(Cg,zg){function Mg(){var Ug=this,Ag=zg.apply(Ug,arguments);return Ag&&function(Yg){Ug.setAttributeNS(Cg.space,Cg.local,Ag(Yg))}}return Mg._value=zg,Mg}function np(Cg,zg){function Mg(){var Ug=this,Ag=zg.apply(Ug,arguments);return Ag&&function(Yg){Ug.setAttribute(Cg,Ag(Yg))}}return Mg._value=zg,Mg}function op(Cg,zg){return function(){Oc(this,Cg).delay=+zg.apply(this,arguments)}}function ap(Cg,zg){return zg=+zg,function(){Oc(this,Cg).delay=zg}}function ip(Cg,zg){return function(){jc(this,Cg).duration=+zg.apply(this,arguments)}}function lp(Cg,zg){return zg=+zg,function(){jc(this,Cg).duration=zg}}function rp(Cg,zg){if("function"!=typeof zg)throw new Error;return function(){jc(this,Cg).ease=zg}}function sp(Cg){return(Cg+"").trim().split(/^|\s+/).every(function(zg){var Mg=zg.indexOf(".");return 0<=Mg&&(zg=zg.slice(0,Mg)),!zg||"start"===zg})}function dp(Cg,zg,Mg){var Ug,Ag,Yg=sp(zg)?Oc:jc;return function(){var Eg=Yg(this,Cg),Pg=Eg.on;Pg!==Ug&&(Ag=(Ug=Pg).copy()).on(zg,Mg),Eg.on=Ag}}function cp(Cg){return function(){var zg=this.parentNode;for(var Mg in this.__transition)if(+Mg!==Cg)return;zg&&zg.removeChild(this)}}function up(Cg,zg){var Mg,Ug,Ag;return function(){var Yg=Qd(this,Cg),Eg=(this.style.removeProperty(Cg),Qd(this,Cg));return Yg===Eg?null:Yg===Mg&&Eg===Ug?Ag:Ag=zg(Mg=Yg,Ug=Eg)}}function pp(Cg){return function(){this.style.removeProperty(Cg)}}function _p(Cg,zg,Mg){var Ug,Ag;return function(){var Yg=Qd(this,Cg);return Yg===Mg?null:Yg===Ug?Ag:Ag=zg(Ug=Yg,Mg)}}function hp(Cg,zg,Mg){var Ug,Ag,Yg;return function(){var Eg=Qd(this,Cg),Pg=Mg(this);return null==Pg&&(this.style.removeProperty(Cg),Pg=Qd(this,Cg)),Eg===Pg?null:Eg===Ug&&Pg===Ag?Yg:Yg=zg(Ug=Eg,Ag=Pg)}}function mp(Cg,zg,Mg){function Ug(){var Ag=this,Yg=zg.apply(Ag,arguments);return Yg&&function(Eg){Ag.style.setProperty(Cg,Yg(Eg),Mg)}}return Ug._value=zg,Ug}function gp(Cg){return function(){this.textContent=Cg}}function yp(Cg){return function(){var zg=Cg(this);this.textContent=null==zg?"":zg}}function fp(Cg,zg,Mg,Ug){this._groups=Cg,this._parents=zg,this._name=Mg,this._id=Ug}function xp(){return++ag}function vp(Cg,zg){for(var Mg;!(Mg=Cg.__transition)||!(Mg=Mg[zg]);)if(!(Cg=Cg.parentNode))return rg.time=Pc(),rg;return Mg}function bp(Cg,zg,Mg){this.target=Cg,this.type=zg,this.transform=Mg}function wp(Cg,zg,Mg){this.k=Cg,this.x=zg,this.y=Mg}function Tp(Cg){return Cg.__zoom||dg}function kp(){Ia.event.stopImmediatePropagation()}function Sp(){return!Ia.event.button}function Cp(){var Cg,zg,Mg=this;return Mg instanceof SVGElement?(Cg=(Mg=Mg.ownerSVGElement||Mg).width.baseVal.value,zg=Mg.height.baseVal.value):(Cg=Mg.clientWidth,zg=Mg.clientHeight),[[0,0],[Cg,zg]]}function zp(){return this.__zoom||dg}function Mp(){return-Ia.event.deltaY*(Ia.event.deltaMode?120:1)/500}function Up(){return"ontouchstart"in this}function Ap(){Ia.event.stopImmediatePropagation()}function Yp(Cg){return{type:Cg}}function Ep(){return!Ia.event.button}function Pp(){var Cg=this.ownerSVGElement||this;return[[0,0],[Cg.width.baseVal.value,Cg.height.baseVal.value]]}function Dp(Cg){for(;!Cg.__brush;)if(!(Cg=Cg.parentNode))return;return Cg.__brush}function Fp(Cg){return Cg[0][0]===Cg[1][0]||Cg[0][1]===Cg[1][1]}function Lp(Cg){function zg(Xg){var qg=Xg.property("__brush",Eg).selectAll(".overlay").data([Yp("overlay")]);qg.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bg.overlay).merge(qg).each(function(){var Ng=Dp(this).extent;Mm(this).attr("x",Ng[0][0]).attr("y",Ng[0][1]).attr("width",Ng[1][0]-Ng[0][0]).attr("height",Ng[1][1]-Ng[0][1])}),Xg.selectAll(".selection").data([Yp("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var Ig=Xg.selectAll(".handle").data(Cg.handles,function(Ng){return Ng.type});Ig.exit().remove(),Ig.enter().append("rect").attr("class",function(Ng){return"handle handle--"+Ng.type}).attr("cursor",function(Ng){return bg[Ng.type]}),Xg.each(Mg).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",Yg)}function Mg(){var Xg=Mm(this),qg=Dp(this).selection;qg?(Xg.selectAll(".selection").style("display",null).attr("x",qg[0][0]).attr("y",qg[0][1]).attr("width",qg[1][0]-qg[0][0]).attr("height",qg[1][1]-qg[0][1]),Xg.selectAll(".handle").style("display",null).attr("x",function(Ig){return"e"===Ig.type[Ig.type.length-1]?qg[1][0]-Hg/2:qg[0][0]-Hg/2}).attr("y",function(Ig){return"s"===Ig.type[0]?qg[1][1]-Hg/2:qg[0][1]-Hg/2}).attr("width",function(Ig){return"n"===Ig.type||"s"===Ig.type?qg[1][0]-qg[0][0]+Hg:Hg}).attr("height",function(Ig){return"e"===Ig.type||"w"===Ig.type?qg[1][1]-qg[0][1]+Hg:Hg})):Xg.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function Ug(Xg,qg){return Xg.__brush.emitter||new Ag(Xg,qg)}function Ag(Xg,qg){this.that=Xg,this.args=qg,this.state=Xg.__brush,this.active=0}function Yg(){function Xg(){var xy=vm(ey);!py||Kg||Qg||(Math.abs(xy[0]-hy[0])>Math.abs(xy[1]-hy[1])?Qg=!0:Kg=!0),hy=xy,Jg=!0,_g(),qg()}function qg(){var xy;switch(Rg=hy[0]-_y[0],Gg=hy[1]-_y[1],ny){case mg:case hg:oy&&(Rg=Math.max(sy-Ng,Math.min(cy-Vg,Rg)),Og=Ng+Rg,Bg=Vg+Rg),ay&&(Gg=Math.max(dy-jg,Math.min(uy-Zg,Gg)),$g=jg+Gg,Wg=Zg+Gg);break;case gg:0>oy?(Rg=Math.max(sy-Ng,Math.min(cy-Ng,Rg)),Og=Ng+Rg,Bg=Vg):0<oy&&(Rg=Math.max(sy-Vg,Math.min(cy-Vg,Rg)),Og=Ng,Bg=Vg+Rg),0>ay?(Gg=Math.max(dy-jg,Math.min(uy-jg,Gg)),$g=jg+Gg,Wg=Zg):0<ay&&(Gg=Math.max(dy-Zg,Math.min(uy-Zg,Gg)),$g=jg,Wg=Zg+Gg);break;case yg:oy&&(Og=Math.max(sy,Math.min(cy,Ng-Rg*oy)),Bg=Math.max(sy,Math.min(cy,Vg+Rg*oy))),ay&&($g=Math.max(dy,Math.min(uy,jg-Gg*ay)),Wg=Math.max(dy,Math.min(uy,Zg+Gg*ay)));}Bg<Og&&(oy*=-1,xy=Ng,Ng=Vg,Vg=xy,xy=Og,Og=Bg,Bg=xy,ty in wg&&yy.attr("cursor",bg[ty=wg[ty]])),Wg<$g&&(ay*=-1,xy=jg,jg=Zg,Zg=xy,xy=$g,$g=Wg,Wg=xy,ty in Tg&&yy.attr("cursor",bg[ty=Tg[ty]])),iy.selection&&(ry=iy.selection),Kg&&(Og=ry[0][0],Bg=ry[1][0]),Qg&&($g=ry[0][1],Wg=ry[1][1]),ry[0][0]===Og&&ry[0][1]===$g&&ry[1][0]===Bg&&ry[1][1]===Wg||(iy.selection=[[Og,$g],[Bg,Wg]],Mg.call(ey),my.brush())}function Ig(){if(Ap(),Ia.event.touches){if(Ia.event.touches.length)return;Pg&&clearTimeout(Pg),Pg=setTimeout(function(){Pg=null},500),gy.on("touchmove.brush touchend.brush touchcancel.brush",null)}else zc(Ia.event.view,Jg),fy.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);gy.attr("pointer-events","all"),yy.attr("cursor",bg.overlay),iy.selection&&(ry=iy.selection),Fp(ry)&&(iy.selection=null,Mg.call(ey)),my.end()}if(Ia.event.touches){if(Ia.event.changedTouches.length<Ia.event.touches.length)return _g();}else if(Pg)return;if(Fg.apply(this,arguments)){var Ng,Og,jg,$g,Vg,Bg,Zg,Wg,Rg,Gg,Jg,Kg,Qg,ey=this,ty=Ia.event.target.__data__.type,ny="selection"===(Ia.event.metaKey?ty="overlay":ty)?hg:Ia.event.altKey?yg:gg,oy=Cg===xg?null:kg[ty],ay=Cg===fg?null:Sg[ty],iy=Dp(ey),ly=iy.extent,ry=iy.selection,sy=ly[0][0],dy=ly[0][1],cy=ly[1][0],uy=ly[1][1],py=oy&&ay&&Ia.event.shiftKey,_y=vm(ey),hy=_y,my=Ug(ey,arguments).beforestart();"overlay"===ty?iy.selection=ry=[[Ng=Cg===xg?sy:_y[0],jg=Cg===fg?dy:_y[1]],[Vg=Cg===xg?cy:Ng,Zg=Cg===fg?uy:jg]]:(Ng=ry[0][0],jg=ry[0][1],Vg=ry[1][0],Zg=ry[1][1]),Og=Ng,$g=jg,Bg=Vg,Wg=Zg;var gy=Mm(ey).attr("pointer-events","none"),yy=gy.selectAll(".overlay").attr("cursor",bg[ty]);if(Ia.event.touches)gy.on("touchmove.brush",Xg,!0).on("touchend.brush touchcancel.brush",Ig,!0);else{var fy=Mm(Ia.event.view).on("keydown.brush",function(){switch(Ia.event.keyCode){case 16:py=oy&&ay;break;case 18:ny===gg&&(oy&&(Vg=Bg-Rg*oy,Ng=Og+Rg*oy),ay&&(Zg=Wg-Gg*ay,jg=$g+Gg*ay),ny=yg,qg());break;case 32:ny!==gg&&ny!==yg||(0>oy?Vg=Bg-Rg:0<oy&&(Ng=Og-Rg),0>ay?Zg=Wg-Gg:0<ay&&(jg=$g-Gg),ny=mg,yy.attr("cursor",bg.selection),qg());break;default:return;}_g()},!0).on("keyup.brush",function(){switch(Ia.event.keyCode){case 16:py&&(Kg=Qg=py=!1,qg());break;case 18:ny===yg&&(0>oy?Vg=Bg:0<oy&&(Ng=Og),0>ay?Zg=Wg:0<ay&&(jg=$g),ny=gg,qg());break;case 32:ny===mg&&(Ia.event.altKey?(oy&&(Vg=Bg-Rg*oy,Ng=Og+Rg*oy),ay&&(Zg=Wg-Gg*ay,jg=$g+Gg*ay),ny=yg):(0>oy?Vg=Bg:0<oy&&(Ng=Og),0>ay?Zg=Wg:0<ay&&(jg=$g),ny=gg),yy.attr("cursor",bg[ty]),qg());break;default:return;}_g()},!0).on("mousemove.brush",Xg,!0).on("mouseup.brush",Ig,!0);Ym(Ia.event.view)}Ap(),tg(ey),Mg.call(ey),my.start()}}function Eg(){var Xg=this.__brush||{selection:null};return Xg.extent=Dg.apply(this,arguments),Xg.dim=Cg,Xg}var Pg,Dg=Pp,Fg=Ep,Lg=Sd(zg,"start","brush","end"),Hg=6;return zg.move=function(Xg,qg){Xg.selection?Xg.on("start.brush",function(){Ug(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){Ug(this,arguments).end()}).tween("brush",function(){function Ig(Zg){Og.selection=1===Zg&&Fp(Vg)?null:Bg(Zg),Mg.call(Ng),jg.brush()}var Ng=this,Og=Ng.__brush,jg=Ug(Ng,arguments),$g=Og.selection,Vg=Cg.input("function"==typeof qg?qg.apply(this,arguments):qg,Og.extent),Bg=Eh($g,Vg);return $g&&Vg?Ig:Ig(1)}):Xg.each(function(){var Ig=this,Ng=arguments,Og=Ig.__brush,jg=Cg.input("function"==typeof qg?qg.apply(Ig,Ng):qg,Og.extent),$g=Ug(Ig,Ng).beforestart();tg(Ig),Og.selection=null==jg||Fp(jg)?null:jg,Mg.call(Ig),$g.start().brush().end()})},Ag.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(Xg){Hd(new pg(zg,Xg,Cg.output(this.state.selection)),Lg.apply,Lg,[Xg,this.that,this.args])}},zg.extent=function(Xg){return arguments.length?(Dg="function"==typeof Xg?Xg:ug([[+Xg[0][0],+Xg[0][1]],[+Xg[1][0],+Xg[1][1]]]),zg):Dg},zg.filter=function(Xg){return arguments.length?(Fg="function"==typeof Xg?Xg:ug(!!Xg),zg):Fg},zg.handleSize=function(Xg){return arguments.length?(Hg=+Xg,zg):Hg},zg.on=function(){var Xg=Lg.on.apply(Lg,arguments);return Xg===Lg?zg:Xg},zg}var Hp=function(Cg,zg){return Cg<zg?-1:Cg>zg?1:Cg>=zg?0:NaN},Xp=function(Cg){return 1===Cg.length&&(Cg=Oa(Cg)),{left:function(zg,Mg,Ug,Ag){for(null==Ug&&(Ug=0),null==Ag&&(Ag=zg.length);Ug<Ag;){var Yg=Ug+Ag>>>1;0>Cg(zg[Yg],Mg)?Ug=Yg+1:Ag=Yg}return Ug},right:function(zg,Mg,Ug,Ag){for(null==Ug&&(Ug=0),null==Ag&&(Ag=zg.length);Ug<Ag;){var Yg=Ug+Ag>>>1;0<Cg(zg[Yg],Mg)?Ag=Yg:Ug=Yg+1}return Ug}}},qp=Xp(Hp).right,Ip=Math.sqrt(50),Np=Math.sqrt(10),Op=Math.sqrt(2),jp=function(Cg,zg,Mg){var Ug,Ag,Yg,Eg=zg<Cg,Pg=-1;if(Eg&&(Ug=Cg,Cg=zg,zg=Ug),0===(Yg=ja(Cg,zg,Mg))||!isFinite(Yg))return[];if(0<Yg)for(Cg=Math.ceil(Cg/Yg),zg=Math.floor(zg/Yg),Ag=Array(Ug=Math.ceil(zg-Cg+1));++Pg<Ug;)Ag[Pg]=(Cg+Pg)*Yg;else for(Cg=Math.floor(Cg*Yg),zg=Math.ceil(zg*Yg),Ag=Array(Ug=Math.ceil(Cg-zg+1));++Pg<Ug;)Ag[Pg]=(Cg-Pg)/Yg;return Eg&&Ag.reverse(),Ag},$p=Math.PI,Vp=2*$p;Va.prototype=Ba.prototype={constructor:Va,moveTo:function(Cg,zg){this._+="M"+(this._x0=this._x1=+Cg)+","+(this._y0=this._y1=+zg)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(Cg,zg){this._+="L"+(this._x1=+Cg)+","+(this._y1=+zg)},quadraticCurveTo:function(Cg,zg,Mg,Ug){this._+="Q"+ +Cg+","+ +zg+","+(this._x1=+Mg)+","+(this._y1=+Ug)},bezierCurveTo:function(Cg,zg,Mg,Ug,Ag,Yg){this._+="C"+ +Cg+","+ +zg+","+ +Mg+","+ +Ug+","+(this._x1=+Ag)+","+(this._y1=+Yg)},arcTo:function(Cg,zg,Mg,Ug,Ag){Cg=+Cg,zg=+zg,Mg=+Mg,Ug=+Ug,Ag=+Ag;var Yg=this._x1,Eg=this._y1,Pg=Mg-Cg,Dg=Ug-zg,Fg=Yg-Cg,Lg=Eg-zg,Hg=Fg*Fg+Lg*Lg;if(0>Ag)throw new Error("negative radius: "+Ag);if(null===this._x1)this._+="M"+(this._x1=Cg)+","+(this._y1=zg);else if(!(1e-6<Hg));else if(1e-6<Math.abs(Lg*Pg-Dg*Fg)&&Ag){var Xg=Mg-Yg,qg=Ug-Eg,Ig=Pg*Pg+Dg*Dg,Og=Math.sqrt(Ig),jg=Math.sqrt(Hg),$g=Ag*Math.tan(($p-Math.acos((Ig+Hg-(Xg*Xg+qg*qg))/(2*Og*jg)))/2),Vg=$g/jg,Bg=$g/Og;1e-6<Math.abs(Vg-1)&&(this._+="L"+(Cg+Vg*Fg)+","+(zg+Vg*Lg)),this._+="A"+Ag+","+Ag+",0,0,"+ +(Lg*Xg>Fg*qg)+","+(this._x1=Cg+Bg*Pg)+","+(this._y1=zg+Bg*Dg)}else this._+="L"+(this._x1=Cg)+","+(this._y1=zg)},arc:function(Cg,zg,Mg,Ug,Ag,Yg){Cg=+Cg,zg=+zg;var Eg=(Mg=+Mg)*Math.cos(Ug),Pg=Mg*Math.sin(Ug),Dg=Cg+Eg,Fg=zg+Pg,Lg=1^Yg,Hg=Yg?Ug-Ag:Ag-Ug;if(0>Mg)throw new Error("negative radius: "+Mg);null===this._x1?this._+="M"+Dg+","+Fg:(1e-6<Math.abs(this._x1-Dg)||1e-6<Math.abs(this._y1-Fg))&&(this._+="L"+Dg+","+Fg),Mg&&(0>Hg&&(Hg=Hg%Vp+Vp),Hg>Vp-1e-6?this._+="A"+Mg+","+Mg+",0,1,"+Lg+","+(Cg-Eg)+","+(zg-Pg)+"A"+Mg+","+Mg+",0,1,"+Lg+","+(this._x1=Dg)+","+(this._y1=Fg):1e-6<Hg&&(this._+="A"+Mg+","+Mg+",0,"+ +(Hg>=$p)+","+Lg+","+(this._x1=Cg+Mg*Math.cos(Ag))+","+(this._y1=zg+Mg*Math.sin(Ag))))},rect:function(Cg,zg,Mg,Ug){this._+="M"+(this._x0=this._x1=+Cg)+","+(this._y0=this._y1=+zg)+"h"+ +Mg+"v"+ +Ug+"h"+-Mg+"Z"},toString:function(){return this._}};var Zp=function(Cg){return function(){return Cg}},Wp=1e-12;Za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Cg,zg){switch(Cg=+Cg,zg=+zg,this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2;default:this._context.lineTo(Cg,zg);}}};var Rp=function(Cg){return new Za(Cg)},Gp=function(){function Cg(Pg){var Dg,Fg,Lg,Hg=Pg.length,Xg=!1;for(null==Ag&&(Eg=Yg(Lg=Ba())),Dg=0;Dg<=Hg;++Dg)!(Dg<Hg&&Ug(Fg=Pg[Dg],Dg,Pg))===Xg&&((Xg=!Xg)?Eg.lineStart():Eg.lineEnd()),Xg&&Eg.point(+zg(Fg,Dg,Pg),+Mg(Fg,Dg,Pg));if(Lg)return Eg=null,Lg+""||null}var zg=Wa,Mg=Ra,Ug=Zp(!0),Ag=null,Yg=Rp,Eg=null;return Cg.x=function(Pg){return arguments.length?(zg="function"==typeof Pg?Pg:Zp(+Pg),Cg):zg},Cg.y=function(Pg){return arguments.length?(Mg="function"==typeof Pg?Pg:Zp(+Pg),Cg):Mg},Cg.defined=function(Pg){return arguments.length?(Ug="function"==typeof Pg?Pg:Zp(!!Pg),Cg):Ug},Cg.curve=function(Pg){return arguments.length?(Yg=Pg,null!=Ag&&(Eg=Yg(Ag)),Cg):Yg},Cg.context=function(Pg){return arguments.length?(null==Pg?Ag=Eg=null:Eg=Yg(Ag=Pg),Cg):Ag},Cg};Ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ga(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Cg,zg){switch(Cg=+Cg,zg=+zg,this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ga(this,Cg,zg);}this._x0=this._x1,this._x1=Cg,this._y0=this._y1,this._y1=zg}},Qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ka(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Cg,zg){switch(Cg=+Cg,zg=+zg,this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2,this._x1=Cg,this._y1=zg;break;case 2:this._point=3;default:Ka(this,Cg,zg);}this._x0=this._x1,this._x1=this._x2,this._x2=Cg,this._y0=this._y1,this._y1=this._y2,this._y2=zg}};var Jp=function Cg(zg){function Mg(Ug){return new Qa(Ug,zg)}return Mg.tension=function(Ug){return Cg(+Ug)},Mg}(0);tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Cg,zg){if(Cg=+Cg,zg=+zg,this._point){var Mg=this._x2-Cg,Ug=this._y2-zg;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Mg*Mg+Ug*Ug,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2;break;case 2:this._point=3;default:el(this,Cg,zg);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Cg,this._y0=this._y1,this._y1=this._y2,this._y2=zg}};var Kp=function Cg(zg){function Mg(Ug){return zg?new tl(Ug,zg):new Qa(Ug,0)}return Mg.alpha=function(Ug){return Cg(+Ug)},Mg}(.5);ll.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:il(this,this._t0,al(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Cg,zg){var Mg=NaN;if(Cg=+Cg,zg=+zg,Cg!==this._x1||zg!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2;break;case 2:this._point=3,il(this,al(this,Mg=ol(this,Cg,zg)),Mg);break;default:il(this,this._t0,Mg=ol(this,Cg,zg));}this._x0=this._x1,this._x1=Cg,this._y0=this._y1,this._y1=zg,this._t0=Mg}}},(function(Cg){this._context=new rl(Cg)}.prototype=Object.create(ll.prototype)).point=function(Cg,zg){ll.prototype.point.call(this,zg,Cg)},rl.prototype={moveTo:function(Cg,zg){this._context.moveTo(zg,Cg)},closePath:function(){this._context.closePath()},lineTo:function(Cg,zg){this._context.lineTo(zg,Cg)},bezierCurveTo:function(Cg,zg,Mg,Ug,Ag,Yg){this._context.bezierCurveTo(zg,Cg,Ug,Mg,Yg,Ag)}},sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Cg=this._x,zg=this._y,Mg=Cg.length;if(Mg)if(this._line?this._context.lineTo(Cg[0],zg[0]):this._context.moveTo(Cg[0],zg[0]),2===Mg)this._context.lineTo(Cg[1],zg[1]);else for(var Ug=dl(Cg),Ag=dl(zg),Yg=0,Eg=1;Eg<Mg;++Yg,++Eg)this._context.bezierCurveTo(Ug[0][Yg],Ag[0][Yg],Ug[1][Yg],Ag[1][Yg],Cg[Eg],zg[Eg]);(this._line||0!==this._line&&1===Mg)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Cg,zg){this._x.push(+Cg),this._y.push(+zg)}},cl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(Cg,zg){switch(Cg=+Cg,zg=+zg,this._point){case 0:this._point=1,this._line?this._context.lineTo(Cg,zg):this._context.moveTo(Cg,zg);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,zg),this._context.lineTo(Cg,zg);else{var Mg=this._x*(1-this._t)+Cg*this._t;this._context.lineTo(Mg,this._y),this._context.lineTo(Mg,zg)}}this._x=Cg,this._y=zg}};var Qp=new Date,e_=new Date,t_=ul(function(){},function(Cg,zg){Cg.setTime(+Cg+zg)},function(Cg,zg){return zg-Cg});t_.every=function(Cg){return Cg=Math.floor(Cg),isFinite(Cg)&&0<Cg?1<Cg?ul(function(zg){zg.setTime(Math.floor(zg/Cg)*Cg)},function(zg,Mg){zg.setTime(+zg+Mg*Cg)},function(zg,Mg){return(Mg-zg)/Cg}):t_:null};var n_=6e4,o_=6048e5,a_=ul(function(Cg){Cg.setTime(1e3*Math.floor(Cg/1e3))},function(Cg,zg){Cg.setTime(+Cg+1e3*zg)},function(Cg,zg){return(zg-Cg)/1e3},function(Cg){return Cg.getUTCSeconds()}),i_=ul(function(Cg){Cg.setTime(Math.floor(Cg/n_)*n_)},function(Cg,zg){Cg.setTime(+Cg+zg*n_)},function(Cg,zg){return(zg-Cg)/n_},function(Cg){return Cg.getMinutes()}),l_=ul(function(Cg){var zg=Cg.getTimezoneOffset()*n_%36e5;0>zg&&(zg+=36e5),Cg.setTime(36e5*Math.floor((+Cg-zg)/36e5)+zg)},function(Cg,zg){Cg.setTime(+Cg+36e5*zg)},function(Cg,zg){return(zg-Cg)/36e5},function(Cg){return Cg.getHours()}),r_=ul(function(Cg){Cg.setHours(0,0,0,0)},function(Cg,zg){Cg.setDate(Cg.getDate()+zg)},function(Cg,zg){return(zg-Cg-(zg.getTimezoneOffset()-Cg.getTimezoneOffset())*n_)/864e5},function(Cg){return Cg.getDate()-1}),s_=pl(0),d_=pl(1),c_=(pl(2),pl(3),pl(4),pl(5),pl(6),ul(function(Cg){Cg.setDate(1),Cg.setHours(0,0,0,0)},function(Cg,zg){Cg.setMonth(Cg.getMonth()+zg)},function(Cg,zg){return zg.getMonth()-Cg.getMonth()+12*(zg.getFullYear()-Cg.getFullYear())},function(Cg){return Cg.getMonth()})),u_=ul(function(Cg){Cg.setMonth(0,1),Cg.setHours(0,0,0,0)},function(Cg,zg){Cg.setFullYear(Cg.getFullYear()+zg)},function(Cg,zg){return zg.getFullYear()-Cg.getFullYear()},function(Cg){return Cg.getFullYear()});u_.every=function(Cg){return isFinite(Cg=Math.floor(Cg))&&0<Cg?ul(function(zg){zg.setFullYear(Math.floor(zg.getFullYear()/Cg)*Cg),zg.setMonth(0,1),zg.setHours(0,0,0,0)},function(zg,Mg){zg.setFullYear(zg.getFullYear()+Mg*Cg)}):null},ul(function(Cg){Cg.setUTCSeconds(0,0)},function(Cg,zg){Cg.setTime(+Cg+zg*n_)},function(Cg,zg){return(zg-Cg)/n_},function(Cg){return Cg.getUTCMinutes()}),ul(function(Cg){Cg.setUTCMinutes(0,0,0)},function(Cg,zg){Cg.setTime(+Cg+36e5*zg)},function(Cg,zg){return(zg-Cg)/36e5},function(Cg){return Cg.getUTCHours()});var p_=ul(function(Cg){Cg.setUTCHours(0,0,0,0)},function(Cg,zg){Cg.setUTCDate(Cg.getUTCDate()+zg)},function(Cg,zg){return(zg-Cg)/864e5},function(Cg){return Cg.getUTCDate()-1}),__=_l(0),h_=_l(1),m_=(_l(2),_l(3),_l(4),_l(5),_l(6),ul(function(Cg){Cg.setUTCDate(1),Cg.setUTCHours(0,0,0,0)},function(Cg,zg){Cg.setUTCMonth(Cg.getUTCMonth()+zg)},function(Cg,zg){return zg.getUTCMonth()-Cg.getUTCMonth()+12*(zg.getUTCFullYear()-Cg.getUTCFullYear())},function(Cg){return Cg.getUTCMonth()}),ul(function(Cg){Cg.setUTCMonth(0,1),Cg.setUTCHours(0,0,0,0)},function(Cg,zg){Cg.setUTCFullYear(Cg.getUTCFullYear()+zg)},function(Cg,zg){return zg.getUTCFullYear()-Cg.getUTCFullYear()},function(Cg){return Cg.getUTCFullYear()}));m_.every=function(Cg){return isFinite(Cg=Math.floor(Cg))&&0<Cg?ul(function(zg){zg.setUTCFullYear(Math.floor(zg.getUTCFullYear()/Cg)*Cg),zg.setUTCMonth(0,1),zg.setUTCHours(0,0,0,0)},function(zg,Mg){zg.setUTCFullYear(zg.getUTCFullYear()+Mg*Cg)}):null};var g_,y_=function(Cg,zg){if(0>(Mg=(Cg=zg?Cg.toExponential(zg-1):Cg.toExponential()).indexOf("e")))return null;var Mg,Ug=Cg.slice(0,Mg);return[1<Ug.length?Ug[0]+Ug.slice(2):Ug,+Cg.slice(Mg+1)]},f_=function(Cg){return(Cg=y_(Math.abs(Cg)))?Cg[1]:NaN},x_=function(Cg,zg){return function(Mg,Ug){for(var Ag=Mg.length,Yg=[],Eg=0,Pg=Cg[0],Dg=0;0<Ag&&0<Pg&&(Dg+Pg+1>Ug&&(Pg=Math.max(1,Ug-Dg)),Yg.push(Mg.substring(Ag-=Pg,Ag+Pg)),!((Dg+=Pg+1)>Ug));)Pg=Cg[Eg=(Eg+1)%Cg.length];return Yg.reverse().join(zg)}},v_=function(Cg){return function(zg){return zg.replace(/[0-9]/g,function(Mg){return Cg[+Mg]})}},b_=function(Cg,zg){var Mg=y_(Cg,zg);if(!Mg)return Cg+"";var Ug=Mg[0],Ag=Mg[1];return 0>Ag?"0."+Array(-Ag).join("0")+Ug:Ug.length>Ag+1?Ug.slice(0,Ag+1)+"."+Ug.slice(Ag+1):Ug+Array(Ag-Ug.length+2).join("0")},w_={"":function(Cg,zg){t:for(var Mg,Ug=(Cg=Cg.toPrecision(zg)).length,Ag=1,Yg=-1;Ag<Ug;++Ag)switch(Cg[Ag]){case".":Yg=Mg=Ag;break;case"0":0===Yg&&(Yg=Ag),Mg=Ag;break;case"e":break t;default:0<Yg&&(Yg=0);}return 0<Yg?Cg.slice(0,Yg)+Cg.slice(Mg+1):Cg},"%":function(Cg,zg){return(100*Cg).toFixed(zg)},b:function(Cg){return Math.round(Cg).toString(2)},c:function(Cg){return Cg+""},d:function(Cg){return Math.round(Cg).toString(10)},e:function(Cg,zg){return Cg.toExponential(zg)},f:function(Cg,zg){return Cg.toFixed(zg)},g:function(Cg,zg){return Cg.toPrecision(zg)},o:function(Cg){return Math.round(Cg).toString(8)},p:function(Cg,zg){return b_(100*Cg,zg)},r:b_,s:function(Cg,zg){var Mg=y_(Cg,zg);if(!Mg)return Cg+"";var Ug=Mg[0],Ag=Mg[1],Yg=Ag-(g_=3*Math.max(-8,Math.min(8,Math.floor(Ag/3))))+1,Eg=Ug.length;return Yg===Eg?Ug:Yg>Eg?Ug+Array(Yg-Eg+1).join("0"):0<Yg?Ug.slice(0,Yg)+"."+Ug.slice(Yg):"0."+Array(1-Yg).join("0")+y_(Cg,Math.max(0,zg+Yg-1))[0]},X:function(Cg){return Math.round(Cg).toString(16).toUpperCase()},x:function(Cg){return Math.round(Cg).toString(16)}},T_=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;hl.prototype=ml.prototype,ml.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var k_,S_,C_=function(Cg){return Cg},z_=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],M_=function(Cg){function zg(Pg){function Dg(Wg){var Rg,Gg,Jg,Kg=$g,Qg=Vg;if("c"===jg)Qg=Bg(Wg)+Qg,Wg="";else{var ey=0>(Wg=+Wg);if(Wg=Bg(Math.abs(Wg),Og),ey&&0==+Wg&&(ey=!1),Kg=(ey?"("===Hg?Hg:"-":"-"===Hg||"("===Hg?"":Hg)+Kg,Qg=Qg+("s"===jg?z_[8+g_/3]:"")+(ey&&"("===Hg?")":""),Zg)for(Rg=-1,Gg=Wg.length;++Rg<Gg;)if(48>(Jg=Wg.charCodeAt(Rg))||57<Jg){Qg=(46===Jg?Ag+Wg.slice(Rg+1):Wg.slice(Rg))+Qg,Wg=Wg.slice(0,Rg);break}}Ng&&!qg&&(Wg=Mg(Wg,1/0));var ty=Kg.length+Wg.length+Qg.length,ny=ty<Ig?Array(Ig-ty+1).join(Fg):"";switch(Ng&&qg&&(Wg=Mg(ny+Wg,ny.length?Ig-Qg.length:1/0),ny=""),Lg){case"<":Wg=Kg+Wg+Qg+ny;break;case"=":Wg=Kg+ny+Wg+Qg;break;case"^":Wg=ny.slice(0,ty=ny.length>>1)+Kg+Wg+Qg+ny.slice(ty);break;default:Wg=ny+Kg+Wg+Qg;}return Yg(Wg)}var Fg=(Pg=hl(Pg)).fill,Lg=Pg.align,Hg=Pg.sign,Xg=Pg.symbol,qg=Pg.zero,Ig=Pg.width,Ng=Pg.comma,Og=Pg.precision,jg=Pg.type,$g="$"===Xg?Ug[0]:"#"===Xg&&/[boxX]/.test(jg)?"0"+jg.toLowerCase():"",Vg="$"===Xg?Ug[1]:/[%p]/.test(jg)?Eg:"",Bg=w_[jg],Zg=!jg||/[defgprs%]/.test(jg);return Og=null==Og?jg?6:12:/[gprs]/.test(jg)?Math.max(1,Math.min(21,Og)):Math.max(0,Math.min(20,Og)),Dg.toString=function(){return Pg+""},Dg}var Mg=Cg.grouping&&Cg.thousands?x_(Cg.grouping,Cg.thousands):C_,Ug=Cg.currency,Ag=Cg.decimal,Yg=Cg.numerals?v_(Cg.numerals):C_,Eg=Cg.percent||"%";return{format:zg,formatPrefix:function(Pg,Dg){var Fg=zg((Pg=hl(Pg),Pg.type="f",Pg)),Lg=3*Math.max(-8,Math.min(8,Math.floor(f_(Dg)/3))),Hg=Math.pow(10,-Lg),Xg=z_[8+Lg/3];return function(qg){return Fg(Hg*qg)+Xg}}}};gl({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var U_,A_,Y_,E_=function(Cg){return Math.max(0,-f_(Math.abs(Cg)))},P_=function(Cg,zg){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(f_(zg)/3)))-f_(Math.abs(Cg)))},D_=function(Cg,zg){return Cg=Math.abs(Cg),zg=Math.abs(zg)-Cg,Math.max(0,f_(zg)-f_(Cg))+1},F_={"-":"",_:" ",0:"0"},L_=/^\s*\d+/,H_=/^%/,X_=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;hs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||A_("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||Y_("%Y-%m-%dT%H:%M:%S.%LZ"),ms.prototype=gs.prototype={constructor:ms,has:function(Cg){return"$"+Cg in this},get:function(Cg){return this["$"+Cg]},set:function(Cg,zg){return this["$"+Cg]=zg,this},remove:function(Cg){var zg="$"+Cg;return zg in this&&delete this[zg]},clear:function(){for(var Cg in this)"$"===Cg[0]&&delete this[Cg]},keys:function(){var Cg=[];for(var zg in this)"$"===zg[0]&&Cg.push(zg.slice(1));return Cg},values:function(){var Cg=[];for(var zg in this)"$"===zg[0]&&Cg.push(this[zg]);return Cg},entries:function(){var Cg=[];for(var zg in this)"$"===zg[0]&&Cg.push({key:zg.slice(1),value:this[zg]});return Cg},size:function(){var Cg=0;for(var zg in this)"$"===zg[0]&&++Cg;return Cg},empty:function(){for(var Cg in this)if("$"===Cg[0])return!1;return!0},each:function(Cg){for(var zg in this)"$"===zg[0]&&Cg(this[zg],zg.slice(1),this)}};var q_=gs.prototype;ys.prototype=function(Cg,zg){var Mg=new ys;if(Cg instanceof ys)Cg.each(function(Yg){Mg.add(Yg)});else if(Cg){var Ug=-1,Ag=Cg.length;if(null==zg)for(;++Ug<Ag;)Mg.add(Cg[Ug]);else for(;++Ug<Ag;)Mg.add(zg(Cg[Ug],Ug,Cg))}return Mg}.prototype={constructor:ys,has:q_.has,add:function(Cg){return Cg+="",this["$"+Cg]=Cg,this},remove:q_.remove,clear:q_.clear,values:q_.keys,size:q_.size,empty:q_.empty,each:q_.each};var I_=Array.prototype,N_=I_.map,O_=I_.slice,j_=function(Cg,zg,Mg){Cg.prototype=zg.prototype=Mg,Mg.constructor=Cg},Z_=/^#([0-9a-f]{3})$/,W_=/^#([0-9a-f]{6})$/,R_=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,G_=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,J_=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,K_=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Q_=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,eh=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,th={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};j_(xs,vs,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),j_(Ss,ks,fs(xs,{brighter:function(Cg){return Cg=null==Cg?1/.7:Math.pow(1/.7,Cg),new Ss(this.r*Cg,this.g*Cg,this.b*Cg,this.opacity)},darker:function(Cg){return Cg=null==Cg?.7:Math.pow(.7,Cg),new Ss(this.r*Cg,this.g*Cg,this.b*Cg,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var Cg=this.opacity;return(1===(Cg=isNaN(Cg)?1:Math.max(0,Math.min(1,Cg)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===Cg?")":", "+Cg+")")}})),j_(Ms,function(Cg,zg,Mg,Ug){return 1===arguments.length?zs(Cg):new Ms(Cg,zg,Mg,null==Ug?1:Ug)},fs(xs,{brighter:function(Cg){return Cg=null==Cg?1/.7:Math.pow(1/.7,Cg),new Ms(this.h,this.s,this.l*Cg,this.opacity)},darker:function(Cg){return Cg=null==Cg?.7:Math.pow(.7,Cg),new Ms(this.h,this.s,this.l*Cg,this.opacity)},rgb:function(){var Cg=this.h%360+360*(0>this.h),zg=isNaN(Cg)||isNaN(this.s)?0:this.s,Mg=this.l,Ug=Mg+(.5>Mg?Mg:1-Mg)*zg,Ag=2*Mg-Ug;return new Ss(Us(240<=Cg?Cg-240:Cg+120,Ag,Ug),Us(Cg,Ag,Ug),Us(120>Cg?Cg+240:Cg-120,Ag,Ug),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var nh=Math.PI/180,oh=180/Math.PI,ah=.95047,ih=1,lh=1.08883,rh=4/29,sh=6/29,dh=3*sh*sh,ch=sh*sh*sh;j_(Ys,function(Cg,zg,Mg,Ug){return 1===arguments.length?As(Cg):new Ys(Cg,zg,Mg,null==Ug?1:Ug)},fs(xs,{brighter:function(Cg){return new Ys(this.l+18*(null==Cg?1:Cg),this.a,this.b,this.opacity)},darker:function(Cg){return new Ys(this.l-18*(null==Cg?1:Cg),this.a,this.b,this.opacity)},rgb:function(){var Cg=(this.l+16)/116,zg=isNaN(this.a)?Cg:Cg+this.a/500,Mg=isNaN(this.b)?Cg:Cg-this.b/200;return Cg=ih*Ps(Cg),zg=ah*Ps(zg),Mg=lh*Ps(Mg),new Ss(Ds(3.2404542*zg-1.5371385*Cg-.4985314*Mg),Ds(-.969266*zg+1.8760108*Cg+.041556*Mg),Ds(.0556434*zg-.2040259*Cg+1.0572252*Mg),this.opacity)}})),j_(Hs,function(Cg,zg,Mg,Ug){return 1===arguments.length?Ls(Cg):new Hs(Cg,zg,Mg,null==Ug?1:Ug)},fs(xs,{brighter:function(Cg){return new Hs(this.h,this.c,this.l+18*(null==Cg?1:Cg),this.opacity)},darker:function(Cg){return new Hs(this.h,this.c,this.l-18*(null==Cg?1:Cg),this.opacity)},rgb:function(){return As(this).rgb()}}));var uh=-.14861,ph=1.78277,_h=-.29227,hh=-.90649,mh=1.97294,gh=mh*hh,yh=mh*ph,fh=ph*_h-hh*uh;j_(Is,qs,fs(xs,{brighter:function(Cg){return Cg=null==Cg?1/.7:Math.pow(1/.7,Cg),new Is(this.h,this.s,this.l*Cg,this.opacity)},darker:function(Cg){return Cg=null==Cg?.7:Math.pow(.7,Cg),new Is(this.h,this.s,this.l*Cg,this.opacity)},rgb:function(){var Cg=isNaN(this.h)?0:(this.h+120)*nh,zg=+this.l,Mg=isNaN(this.s)?0:this.s*zg*(1-zg),Ug=Math.cos(Cg),Ag=Math.sin(Cg);return new Ss(255*(zg+Mg*(uh*Ug+ph*Ag)),255*(zg+Mg*(_h*Ug+hh*Ag)),255*(zg+Mg*(mh*Ug)),this.opacity)}}));var xh,vh,bh,wh,Th=function(Cg){return function(){return Cg}},kh=function Cg(zg){function Mg(Ag,Yg){var Eg=Ug((Ag=ks(Ag)).r,(Yg=ks(Yg)).r),Pg=Ug(Ag.g,Yg.g),Dg=Ug(Ag.b,Yg.b),Fg=$s(Ag.opacity,Yg.opacity);return function(Lg){return Ag.r=Eg(Lg),Ag.g=Pg(Lg),Ag.b=Dg(Lg),Ag.opacity=Fg(Lg),Ag+""}}var Ug=js(zg);return Mg.gamma=Cg,Mg}(1),Sh=function(Cg,zg){var Mg,Ug=zg?zg.length:0,Ag=Cg?Math.min(Ug,Cg.length):0,Yg=Array(Ug),Eg=Array(Ug);for(Mg=0;Mg<Ag;++Mg)Yg[Mg]=Eh(Cg[Mg],zg[Mg]);for(;Mg<Ug;++Mg)Eg[Mg]=zg[Mg];return function(Pg){for(Mg=0;Mg<Ag;++Mg)Eg[Mg]=Yg[Mg](Pg);return Eg}},Ch=function(Cg,zg){var Mg=new Date;return Cg=+Cg,zg-=Cg,function(Ug){return Mg.setTime(Cg+zg*Ug),Mg}},zh=function(Cg,zg){return Cg=+Cg,zg-=Cg,function(Mg){return Cg+zg*Mg}},Mh=function(Cg,zg){var Mg,Ug={},Ag={};for(Mg in null!==Cg&&"object"==typeof Cg||(Cg={}),null!==zg&&"object"==typeof zg||(zg={}),zg)Mg in Cg?Ug[Mg]=Eh(Cg[Mg],zg[Mg]):Ag[Mg]=zg[Mg];return function(Yg){for(Mg in Ug)Ag[Mg]=Ug[Mg](Yg);return Ag}},Uh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ah=new RegExp(Uh.source,"g"),Yh=function(Cg,zg){var Mg,Ug,Ag,Yg=Uh.lastIndex=Ah.lastIndex=0,Eg=-1,Pg=[],Dg=[];for(Cg+="",zg+="";(Mg=Uh.exec(Cg))&&(Ug=Ah.exec(zg));)(Ag=Ug.index)>Yg&&(Ag=zg.slice(Yg,Ag),Pg[Eg]?Pg[Eg]+=Ag:Pg[++Eg]=Ag),(Mg=Mg[0])===(Ug=Ug[0])?Pg[Eg]?Pg[Eg]+=Ug:Pg[++Eg]=Ug:(Pg[++Eg]=null,Dg.push({i:Eg,x:zh(Mg,Ug)})),Yg=Ah.lastIndex;return Yg<zg.length&&(Ag=zg.slice(Yg),Pg[Eg]?Pg[Eg]+=Ag:Pg[++Eg]=Ag),2>Pg.length?Dg[0]?Bs(Dg[0].x):Vs(zg):(zg=Dg.length,function(Fg){for(var Lg,Hg=0;Hg<zg;++Hg)Pg[(Lg=Dg[Hg]).i]=Lg.x(Fg);return Pg.join("")})},Eh=function(Cg,zg){var Mg,Ug=typeof zg;return null==zg||"boolean"===Ug?Th(zg):("number"===Ug?zh:"string"===Ug?(Mg=vs(zg))?(zg=Mg,kh):Yh:zg instanceof vs?kh:zg instanceof Date?Ch:Array.isArray(zg)?Sh:"function"!=typeof zg.valueOf&&"function"!=typeof zg.toString||isNaN(zg)?Mh:zh)(Cg,zg)},Ph=function(Cg,zg){return Cg=+Cg,zg-=Cg,function(Mg){return Math.round(Cg+zg*Mg)}},Dh=180/Math.PI,Fh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Lh=function(Cg,zg,Mg,Ug,Ag,Yg){var Eg,Pg,Dg;return(Eg=Math.sqrt(Cg*Cg+zg*zg))&&(Cg/=Eg,zg/=Eg),(Dg=Cg*Mg+zg*Ug)&&(Mg-=Cg*Dg,Ug-=zg*Dg),(Pg=Math.sqrt(Mg*Mg+Ug*Ug))&&(Mg/=Pg,Ug/=Pg,Dg/=Pg),Cg*Ug<zg*Mg&&(Cg=-Cg,zg=-zg,Dg=-Dg,Eg=-Eg),{translateX:Ag,translateY:Yg,rotate:Math.atan2(zg,Cg)*Dh,skewX:Math.atan(Dg)*Dh,scaleX:Eg,scaleY:Pg}},Hh=Zs(function(Cg){return"none"===Cg?Fh:(xh||(xh=document.createElement("DIV"),vh=document.documentElement,bh=document.defaultView),xh.style.transform=Cg,Cg=bh.getComputedStyle(vh.appendChild(xh),null).getPropertyValue("transform"),vh.removeChild(xh),Cg=Cg.slice(7,-1).split(","),Lh(+Cg[0],+Cg[1],+Cg[2],+Cg[3],+Cg[4],+Cg[5]))},"px, ","px)","deg)"),Xh=Zs(function(Cg){return null==Cg?Fh:(wh||(wh=document.createElementNS("http://www.w3.org/2000/svg","g")),wh.setAttribute("transform",Cg),(Cg=wh.transform.baseVal.consolidate())?(Cg=Cg.matrix,Lh(Cg.a,Cg.b,Cg.c,Cg.d,Cg.e,Cg.f)):Fh)},", ",")",")"),qh=Math.SQRT2,Ih=function(Cg,zg){var Mg,Ug,Ag=Cg[0],Yg=Cg[1],Eg=Cg[2],Pg=zg[0],Dg=zg[1],Fg=zg[2],Lg=Pg-Ag,Hg=Dg-Yg,Xg=Lg*Lg+Hg*Hg;if(1e-12>Xg)Ug=Math.log(Fg/Eg)/qh,Mg=function($g){return[Ag+$g*Lg,Yg+$g*Hg,Eg*Math.exp(qh*$g*Ug)]};else{var qg=Math.sqrt(Xg),Ig=(Fg*Fg-Eg*Eg+4*Xg)/(2*(2*Eg)*qg),Ng=(Fg*Fg-Eg*Eg-4*Xg)/(2*(2*Fg)*qg),Og=Math.log(Math.sqrt(Ig*Ig+1)-Ig),jg=Math.log(Math.sqrt(Ng*Ng+1)-Ng);Ug=(jg-Og)/qh,Mg=function($g){var Vg=$g*Ug,Bg=Ws(Og),Zg=Eg/(2*qg)*(Bg*Gs(qh*Vg+Og)-Rs(Og));return[Ag+Zg*Lg,Yg+Zg*Hg,Eg*Bg/Ws(qh*Vg+Og)]}}return Mg.duration=1e3*Ug,Mg};Js(function(Cg,zg){var Mg=zg-Cg;return Mg?Ns(Cg,180<Mg||-180>Mg?Mg-360*Math.round(Mg/360):Mg):Th(isNaN(Cg)?zg:Cg)});var Nh=Js($s),Oh=function(Cg){return function(){return Cg}},jh=function(Cg){return+Cg},$h=[0,1],Vh=function(Cg,zg,Mg){var Ug,Ag=Cg[0],Yg=Cg[Cg.length-1],Eg=$a(Ag,Yg,null==zg?10:zg);switch((Mg=hl(null==Mg?",f":Mg)).type){case"s":var Pg=Math.max(Math.abs(Ag),Math.abs(Yg));return null!=Mg.precision||isNaN(Ug=P_(Eg,Pg))||(Mg.precision=Ug),S_(Mg,Pg);case"":case"e":case"g":case"p":case"r":null!=Mg.precision||isNaN(Ug=D_(Eg,Math.max(Math.abs(Ag),Math.abs(Yg))))||(Mg.precision=Ug-("e"===Mg.type));break;case"f":case"%":null!=Mg.precision||isNaN(Ug=E_(Eg))||(Mg.precision=Ug-2*("%"===Mg.type));}return Ia.format(Mg)},Bh=function(Cg,zg){var Mg,Ug=0,Ag=(Cg=Cg.slice()).length-1,Yg=Cg[Ug],Eg=Cg[Ag];return Eg<Yg&&(Mg=Ug,Ug=Ag,Ag=Mg,Mg=Yg,Yg=Eg,Eg=Mg),Cg[Ug]=zg.floor(Yg),Cg[Ag]=zg.ceil(Eg),Cg},Zh=1e3,Wh=60*Zh,Rh=60*Wh,Gh=24*Rh,Jh=7*Gh,Kh=30*Gh,Qh=365*Gh,em=function(Cg){return Cg.match(/.{6}/g).map(function(zg){return"#"+zg})};em("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),em("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),em("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),em("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Nh(qs(300,.5,0),qs(-240,.5,1)),Nh(qs(-100,.75,.35),qs(80,1.5,.8)),Nh(qs(260,.75,.35),qs(80,1.5,.8)),qs();var tm=Array.prototype.slice,nm=function(Cg){return Cg},om=1,am=2,im=3,lm=4,rm=1e-6,sm={value:function(){}};Cd.prototype=Sd.prototype={constructor:Cd,on:function(Cg,zg){var Mg,Ug=this._,Ag=zd(Cg+"",Ug),Yg=-1,Eg=Ag.length;{if(!(2>arguments.length)){if(null!=zg&&"function"!=typeof zg)throw new Error("invalid callback: "+zg);for(;++Yg<Eg;)if(Mg=(Cg=Ag[Yg]).type)Ug[Mg]=Ud(Ug[Mg],Cg.name,zg);else if(null==zg)for(Mg in Ug)Ug[Mg]=Ud(Ug[Mg],Cg.name,null);return this}for(;++Yg<Eg;)if((Mg=(Cg=Ag[Yg]).type)&&(Mg=Md(Ug[Mg],Cg.name)))return Mg}},copy:function(){var Cg={},zg=this._;for(var Mg in zg)Cg[Mg]=zg[Mg].slice();return new Cd(Cg)},call:function(Cg,zg){if(0<(Mg=arguments.length-2))for(var Mg,Ug,Ag=Array(Mg),Yg=0;Yg<Mg;++Yg)Ag[Yg]=arguments[Yg+2];if(!this._.hasOwnProperty(Cg))throw new Error("unknown type: "+Cg);for(Yg=0,Mg=(Ug=this._[Cg]).length;Yg<Mg;++Yg)Ug[Yg].value.apply(zg,Ag)},apply:function(Cg,zg,Mg){if(!this._.hasOwnProperty(Cg))throw new Error("unknown type: "+Cg);for(var Ug=this._[Cg],Ag=0,Yg=Ug.length;Ag<Yg;++Ag)Ug[Ag].value.apply(zg,Mg)}};var dm="http://www.w3.org/1999/xhtml",cm={svg:"http://www.w3.org/2000/svg",xhtml:dm,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},um=function(Cg){var zg=Cg+="",Mg=zg.indexOf(":");return 0<=Mg&&"xmlns"!==(zg=Cg.slice(0,Mg))&&(Cg=Cg.slice(Mg+1)),cm.hasOwnProperty(zg)?{space:cm[zg],local:Cg}:Cg},pm=function(Cg){var zg=um(Cg);return(zg.local?Yd:Ad)(zg)},_m=function(Cg){return function(){return this.matches(Cg)}};if("undefined"!=typeof document){var hm=document.documentElement;if(!hm.matches){var mm=hm.webkitMatchesSelector||hm.msMatchesSelector||hm.mozMatchesSelector||hm.oMatchesSelector;_m=function(Cg){return function(){return mm.call(this,Cg)}}}}var gm=_m,ym={};Ia.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ym={mouseenter:"mouseover",mouseleave:"mouseout"}));var fm=function(){for(var Cg,zg=Ia.event;Cg=zg.sourceEvent;)zg=Cg;return zg},xm=function(Cg,zg){var Mg=Cg.ownerSVGElement||Cg;if(Mg.createSVGPoint){var Ug=Mg.createSVGPoint();return Ug.x=zg.clientX,Ug.y=zg.clientY,Ug=Ug.matrixTransform(Cg.getScreenCTM().inverse()),[Ug.x,Ug.y]}var Ag=Cg.getBoundingClientRect();return[zg.clientX-Ag.left-Cg.clientLeft,zg.clientY-Ag.top-Cg.clientTop]},vm=function(Cg){var zg=fm();return zg.changedTouches&&(zg=zg.changedTouches[0]),xm(Cg,zg)},bm=function(Cg){return null==Cg?Xd:function(){return this.querySelector(Cg)}},wm=function(Cg){return null==Cg?qd:function(){return this.querySelectorAll(Cg)}},Tm=function(Cg){return Array(Cg.length)};Id.prototype={constructor:Id,appendChild:function(Cg){return this._parent.insertBefore(Cg,this._next)},insertBefore:function(Cg,zg){return this._parent.insertBefore(Cg,zg)},querySelector:function(Cg){return this._parent.querySelector(Cg)},querySelectorAll:function(Cg){return this._parent.querySelectorAll(Cg)}};var km=function(Cg){return function(){return Cg}},Sm="$",Cm=function(Cg){return Cg.ownerDocument&&Cg.ownerDocument.defaultView||Cg.document&&Cg||Cg.defaultView};ic.prototype={add:function(Cg){0>this._names.indexOf(Cg)&&(this._names.push(Cg),this._node.setAttribute("class",this._names.join(" ")))},remove:function(Cg){var zg=this._names.indexOf(Cg);0<=zg&&(this._names.splice(zg,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(Cg){return 0<=this._names.indexOf(Cg)}};var zm=[null];kc.prototype=Sc.prototype={constructor:kc,select:function(Cg){"function"!=typeof Cg&&(Cg=bm(Cg));for(var zg=this._groups,Mg=zg.length,Ug=Array(Mg),Ag=0;Ag<Mg;++Ag)for(var Yg,Eg,Pg=zg[Ag],Dg=Pg.length,Fg=Ug[Ag]=Array(Dg),Lg=0;Lg<Dg;++Lg)(Yg=Pg[Lg])&&(Eg=Cg.call(Yg,Yg.__data__,Lg,Pg))&&("__data__"in Yg&&(Eg.__data__=Yg.__data__),Fg[Lg]=Eg);return new kc(Ug,this._parents)},selectAll:function(Cg){"function"!=typeof Cg&&(Cg=wm(Cg));for(var zg=this._groups,Mg=zg.length,Ug=[],Ag=[],Yg=0;Yg<Mg;++Yg)for(var Eg,Pg=zg[Yg],Dg=Pg.length,Fg=0;Fg<Dg;++Fg)(Eg=Pg[Fg])&&(Ug.push(Cg.call(Eg,Eg.__data__,Fg,Pg)),Ag.push(Eg));return new kc(Ug,Ag)},filter:function(Cg){"function"!=typeof Cg&&(Cg=gm(Cg));for(var zg=this._groups,Mg=zg.length,Ug=Array(Mg),Ag=0;Ag<Mg;++Ag)for(var Yg,Eg=zg[Ag],Pg=Eg.length,Dg=Ug[Ag]=[],Fg=0;Fg<Pg;++Fg)(Yg=Eg[Fg])&&Cg.call(Yg,Yg.__data__,Fg,Eg)&&Dg.push(Yg);return new kc(Ug,this._parents)},data:function(Cg,zg){if(!Cg)return qg=Array(this.size()),Fg=-1,this.each(function(Zg){qg[++Fg]=Zg}),qg;var Mg=zg?Od:Nd,Ug=this._parents,Ag=this._groups;"function"!=typeof Cg&&(Cg=km(Cg));for(var Yg=Ag.length,Eg=Array(Yg),Pg=Array(Yg),Dg=Array(Yg),Fg=0;Fg<Yg;++Fg){var Lg=Ug[Fg],Hg=Ag[Fg],Xg=Hg.length,qg=Cg.call(Lg,Lg&&Lg.__data__,Fg,Ug),Ig=qg.length,Ng=Pg[Fg]=Array(Ig),Og=Eg[Fg]=Array(Ig);Mg(Lg,Hg,Ng,Og,Dg[Fg]=Array(Xg),qg,zg);for(var jg,$g,Vg=0,Bg=0;Vg<Ig;++Vg)if(jg=Ng[Vg]){for(Vg>=Bg&&(Bg=Vg+1);!($g=Og[Bg])&&++Bg<Ig;);jg._next=$g||null}}return Eg=new kc(Eg,Ug),Eg._enter=Pg,Eg._exit=Dg,Eg},enter:function(){return new kc(this._enter||this._groups.map(Tm),this._parents)},exit:function(){return new kc(this._exit||this._groups.map(Tm),this._parents)},merge:function(Cg){for(var zg=this._groups,Mg=Cg._groups,Ug=zg.length,Ag=Mg.length,Yg=Math.min(Ug,Ag),Eg=Array(Ug),Pg=0;Pg<Yg;++Pg)for(var Dg,Fg=zg[Pg],Lg=Mg[Pg],Hg=Fg.length,Xg=Eg[Pg]=Array(Hg),qg=0;qg<Hg;++qg)(Dg=Fg[qg]||Lg[qg])&&(Xg[qg]=Dg);for(;Pg<Ug;++Pg)Eg[Pg]=zg[Pg];return new kc(Eg,this._parents)},order:function(){for(var Cg=this._groups,zg=-1,Mg=Cg.length;++zg<Mg;)for(var Ug,Ag=Cg[zg],Yg=Ag.length-1,Eg=Ag[Yg];0<=--Yg;)(Ug=Ag[Yg])&&(Eg&&Eg!==Ug.nextSibling&&Eg.parentNode.insertBefore(Ug,Eg),Eg=Ug);return this},sort:function(Cg){Cg||(Cg=jd);for(var zg=this._groups,Mg=zg.length,Ug=Array(Mg),Ag=0;Ag<Mg;++Ag){for(var Yg,Eg=zg[Ag],Pg=Eg.length,Dg=Ug[Ag]=Array(Pg),Fg=0;Fg<Pg;++Fg)(Yg=Eg[Fg])&&(Dg[Fg]=Yg);Dg.sort(function(Lg,Hg){return Lg&&Hg?Cg(Lg.__data__,Hg.__data__):!Lg-!Hg})}return new kc(Ug,this._parents).order()},call:function(){var Cg=arguments[0];return arguments[0]=this,Cg.apply(null,arguments),this},nodes:function(){var Cg=Array(this.size()),zg=-1;return this.each(function(){Cg[++zg]=this}),Cg},node:function(){for(var Cg=this._groups,zg=0,Mg=Cg.length;zg<Mg;++zg)for(var Eg,Ug=Cg[zg],Ag=0,Yg=Ug.length;Ag<Yg;++Ag)if(Eg=Ug[Ag],Eg)return Eg;return null},size:function(){var Cg=0;return this.each(function(){++Cg}),Cg},empty:function(){return!this.node()},each:function(Cg){for(var zg=this._groups,Mg=0,Ug=zg.length;Mg<Ug;++Mg)for(var Ag,Yg=zg[Mg],Eg=0,Pg=Yg.length;Eg<Pg;++Eg)(Ag=Yg[Eg])&&Cg.call(Ag,Ag.__data__,Eg,Yg);return this},attr:function(Cg,zg){var Mg=um(Cg);if(2>arguments.length){var Ug=this.node();return Mg.local?Ug.getAttributeNS(Mg.space,Mg.local):Ug.getAttribute(Mg)}return this.each((null==zg?Mg.local?Vd:$d:"function"==typeof zg?Mg.local?Rd:Wd:Mg.local?Zd:Bd)(Mg,zg))},style:function(Cg,zg,Mg){return 1<arguments.length?this.each((null==zg?Gd:"function"==typeof zg?Kd:Jd)(Cg,zg,null==Mg?"":Mg)):Qd(this.node(),Cg)},property:function(Cg,zg){return 1<arguments.length?this.each((null==zg?ec:"function"==typeof zg?nc:tc)(Cg,zg)):this.node()[Cg]},classed:function(Cg,zg){var Mg=oc(Cg+"");if(2>arguments.length){for(var Ug=ac(this.node()),Ag=-1,Yg=Mg.length;++Ag<Yg;)if(!Ug.contains(Mg[Ag]))return!1;return!0}return this.each(("function"==typeof zg?cc:zg?sc:dc)(Mg,zg))},text:function(Cg){return arguments.length?this.each(null==Cg?uc:("function"==typeof Cg?_c:pc)(Cg)):this.node().textContent},html:function(Cg){return arguments.length?this.each(null==Cg?hc:("function"==typeof Cg?gc:mc)(Cg)):this.node().innerHTML},raise:function(){return this.each(yc)},lower:function(){return this.each(fc)},append:function(Cg){var zg="function"==typeof Cg?Cg:pm(Cg);return this.select(function(){return this.appendChild(zg.apply(this,arguments))})},insert:function(Cg,zg){var Mg="function"==typeof Cg?Cg:pm(Cg),Ug=null==zg?xc:"function"==typeof zg?zg:bm(zg);return this.select(function(){return this.insertBefore(Mg.apply(this,arguments),Ug.apply(this,arguments)||null)})},remove:function(){return this.each(vc)},datum:function(Cg){return arguments.length?this.property("__data__",Cg):this.node().__data__},on:function(Cg,zg,Mg){var Ug,Ag,Yg=Dd(Cg+""),Eg=Yg.length;{if(!(2>arguments.length)){for(Pg=zg?Ld:Fd,null==Mg&&(Mg=!1),Ug=0;Ug<Eg;++Ug)this.each(Pg(Yg[Ug],zg,Mg));return this}var Pg=this.node().__on;if(Pg)for(var Dg,Fg=0,Lg=Pg.length;Fg<Lg;++Fg)for(Ug=0,Dg=Pg[Fg];Ug<Eg;++Ug)if((Ag=Yg[Ug]).type===Dg.type&&Ag.name===Dg.name)return Dg.value}},dispatch:function(Cg,zg){return this.each(("function"==typeof zg?Tc:wc)(Cg,zg))}};var Mm=function(Cg){return"string"==typeof Cg?new kc([[document.querySelector(Cg)]],[document.documentElement]):new kc([[Cg]],zm)},Um=function(Cg,zg,Mg){3>arguments.length&&(Mg=zg,zg=fm().changedTouches);for(var Ug,Ag=0,Yg=zg?zg.length:0;Ag<Yg;++Ag)if((Ug=zg[Ag]).identifier===Mg)return xm(Cg,Ug);return null},Am=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},Ym=function(Cg){var zg=Cg.document.documentElement,Mg=Mm(Cg).on("dragstart.drag",Am,!0);"onselectstart"in zg?Mg.on("selectstart.drag",Am,!0):(zg.__noselect=zg.style.MozUserSelect,zg.style.MozUserSelect="none")},Em=function(Cg){return function(){return Cg}};Mc.prototype.on=function(){var Cg=this._.on.apply(this._,arguments);return Cg===this._?this:Cg};var Pm,Dm,Fm=0,Lm=0,Hm=0,Xm=1e3,qm=0,Im=0,Nm=0,Om="object"==typeof performance&&performance.now?performance:Date,jm="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Cg){setTimeout(Cg,17)};Fc.prototype=Lc.prototype={constructor:Fc,restart:function(Cg,zg,Mg){if("function"!=typeof Cg)throw new TypeError("callback is not a function");Mg=(null==Mg?Pc():+Mg)+(null==zg?0:+zg),this._next||Dm===this||(Dm?Dm._next=this:Pm=this,Dm=this),this._call=Cg,this._time=Mg,Nc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nc())}};var $m=function(Cg,zg,Mg){var Ug=new Fc;return zg=null==zg?0:+zg,Ug.restart(function(Ag){Ug.stop(),Cg(Ag+zg)},zg,Mg),Ug},Vm=Sd("start","end","interrupt"),Bm=[],Zm=0,Wm=1,Rm=2,Gm=3,Jm=4,Km=5,Qm=6,eg=function(Cg,zg,Mg,Ug,Ag,Yg){var Eg=Cg.__transition;if(!Eg)Cg.__transition={};else if(Mg in Eg)return;Vc(Cg,Mg,{name:zg,index:Ug,group:Ag,on:Vm,tween:Bm,time:Yg.time,delay:Yg.delay,duration:Yg.duration,ease:Yg.ease,timer:null,state:Zm})},tg=function(Cg,zg){var Mg,Ug,Ag,Yg=Cg.__transition,Eg=!0;if(Yg){for(Ag in zg=null==zg?null:zg+"",Yg)(Mg=Yg[Ag]).name===zg?(Ug=Mg.state>Rm&&Mg.state<Km,Mg.state=Qm,Mg.timer.stop(),Ug&&Mg.on.call("interrupt",Cg,Cg.__data__,Mg.index,Mg.group),delete Yg[Ag]):Eg=!1;Eg&&delete Cg.__transition}},ng=function(Cg,zg){var Mg;return("number"==typeof zg?zh:zg instanceof vs?kh:(Mg=vs(zg))?(zg=Mg,kh):Yh)(Cg,zg)},og=Sc.prototype.constructor,ag=0,ig=Sc.prototype;fp.prototype=function(Cg){return Sc().transition(Cg)}.prototype={constructor:fp,select:function(Cg){var zg=this._name,Mg=this._id;"function"!=typeof Cg&&(Cg=bm(Cg));for(var Ug=this._groups,Ag=Ug.length,Yg=Array(Ag),Eg=0;Eg<Ag;++Eg)for(var Pg,Dg,Fg=Ug[Eg],Lg=Fg.length,Hg=Yg[Eg]=Array(Lg),Xg=0;Xg<Lg;++Xg)(Pg=Fg[Xg])&&(Dg=Cg.call(Pg,Pg.__data__,Xg,Fg))&&("__data__"in Pg&&(Dg.__data__=Pg.__data__),Hg[Xg]=Dg,eg(Hg[Xg],zg,Mg,Xg,Hg,$c(Pg,Mg)));return new fp(Yg,this._parents,zg,Mg)},selectAll:function(Cg){var zg=this._name,Mg=this._id;"function"!=typeof Cg&&(Cg=wm(Cg));for(var Ug=this._groups,Ag=Ug.length,Yg=[],Eg=[],Pg=0;Pg<Ag;++Pg)for(var Dg,Fg=Ug[Pg],Lg=Fg.length,Hg=0;Hg<Lg;++Hg)if(Dg=Fg[Hg]){for(var Xg,qg=Cg.call(Dg,Dg.__data__,Hg,Fg),Ig=$c(Dg,Mg),Ng=0,Og=qg.length;Ng<Og;++Ng)(Xg=qg[Ng])&&eg(Xg,zg,Mg,Ng,qg,Ig);Yg.push(qg),Eg.push(Dg)}return new fp(Yg,Eg,zg,Mg)},filter:function(Cg){"function"!=typeof Cg&&(Cg=gm(Cg));for(var zg=this._groups,Mg=zg.length,Ug=Array(Mg),Ag=0;Ag<Mg;++Ag)for(var Yg,Eg=zg[Ag],Pg=Eg.length,Dg=Ug[Ag]=[],Fg=0;Fg<Pg;++Fg)(Yg=Eg[Fg])&&Cg.call(Yg,Yg.__data__,Fg,Eg)&&Dg.push(Yg);return new fp(Ug,this._parents,this._name,this._id)},merge:function(Cg){if(Cg._id!==this._id)throw new Error;for(var zg=this._groups,Mg=Cg._groups,Ug=zg.length,Ag=Mg.length,Yg=Math.min(Ug,Ag),Eg=Array(Ug),Pg=0;Pg<Yg;++Pg)for(var Dg,Fg=zg[Pg],Lg=Mg[Pg],Hg=Fg.length,Xg=Eg[Pg]=Array(Hg),qg=0;qg<Hg;++qg)(Dg=Fg[qg]||Lg[qg])&&(Xg[qg]=Dg);for(;Pg<Ug;++Pg)Eg[Pg]=zg[Pg];return new fp(Eg,this._parents,this._name,this._id)},selection:function(){return new og(this._groups,this._parents)},transition:function(){for(var Cg=this._name,zg=this._id,Mg=xp(),Ug=this._groups,Ag=Ug.length,Yg=0;Yg<Ag;++Yg)for(var Eg,Pg=Ug[Yg],Dg=Pg.length,Fg=0;Fg<Dg;++Fg)if(Eg=Pg[Fg]){var Lg=$c(Eg,zg);eg(Eg,Cg,Mg,Fg,Pg,{time:Lg.time+Lg.delay+Lg.duration,delay:0,duration:Lg.duration,ease:Lg.ease})}return new fp(Ug,this._parents,Cg,Mg)},call:ig.call,nodes:ig.nodes,node:ig.node,size:ig.size,empty:ig.empty,each:ig.each,on:function(Cg,zg){var Mg=this._id;return 2>arguments.length?$c(this.node(),Mg).on.on(Cg):this.each(dp(Mg,Cg,zg))},attr:function(Cg,zg){var Mg=um(Cg),Ug="transform"===Mg?Xh:ng;return this.attrTween(Cg,"function"==typeof zg?(Mg.local?ep:Qc)(Mg,Ug,Wc(this,"attr."+Cg,zg)):null==zg?(Mg.local?Gc:Rc)(Mg):(Mg.local?Kc:Jc)(Mg,Ug,zg+""))},attrTween:function(Cg,zg){var Mg="attr."+Cg;if(2>arguments.length)return(Mg=this.tween(Mg))&&Mg._value;if(null==zg)return this.tween(Mg,null);if("function"!=typeof zg)throw new Error;var Ug=um(Cg);return this.tween(Mg,(Ug.local?tp:np)(Ug,zg))},style:function(Cg,zg,Mg){var Ug="transform"==(Cg+="")?Hh:ng;return null==zg?this.styleTween(Cg,up(Cg,Ug)).on("end.style."+Cg,pp(Cg)):this.styleTween(Cg,"function"==typeof zg?hp(Cg,Ug,Wc(this,"style."+Cg,zg)):_p(Cg,Ug,zg+""),Mg)},styleTween:function(Cg,zg,Mg){var Ug="style."+(Cg+="");if(2>arguments.length)return(Ug=this.tween(Ug))&&Ug._value;if(null==zg)return this.tween(Ug,null);if("function"!=typeof zg)throw new Error;return this.tween(Ug,mp(Cg,zg,null==Mg?"":Mg))},text:function(Cg){return this.tween("text","function"==typeof Cg?yp(Wc(this,"text",Cg)):gp(null==Cg?"":Cg+""))},remove:function(){return this.on("end.remove",cp(this._id))},tween:function(Cg,zg){var Mg=this._id;if(Cg+="",2>arguments.length){for(var Ug,Ag=$c(this.node(),Mg).tween,Yg=0,Eg=Ag.length;Yg<Eg;++Yg)if((Ug=Ag[Yg]).name===Cg)return Ug.value;return null}return this.each((null==zg?Bc:Zc)(Mg,Cg,zg))},delay:function(Cg){var zg=this._id;return arguments.length?this.each(("function"==typeof Cg?op:ap)(zg,Cg)):$c(this.node(),zg).delay},duration:function(Cg){var zg=this._id;return arguments.length?this.each(("function"==typeof Cg?ip:lp)(zg,Cg)):$c(this.node(),zg).duration},ease:function(Cg){var zg=this._id;return arguments.length?this.each(rp(zg,Cg)):$c(this.node(),zg).ease}},function Cg(zg){function Mg(Ug){return Math.pow(Ug,zg)}return zg=+zg,Mg.exponent=Cg,Mg}(3),function Cg(zg){function Mg(Ug){return 1-Math.pow(1-Ug,zg)}return zg=+zg,Mg.exponent=Cg,Mg}(3),function Cg(zg){function Mg(Ug){return(1>=(Ug*=2)?Math.pow(Ug,zg):2-Math.pow(2-Ug,zg))/2}return zg=+zg,Mg.exponent=Cg,Mg}(3),function Cg(zg){function Mg(Ug){return Ug*Ug*((zg+1)*Ug-zg)}return zg=+zg,Mg.overshoot=Cg,Mg}(1.70158),function Cg(zg){function Mg(Ug){return--Ug*Ug*((zg+1)*Ug+zg)+1}return zg=+zg,Mg.overshoot=Cg,Mg}(1.70158),function Cg(zg){function Mg(Ug){return(1>(Ug*=2)?Ug*Ug*((zg+1)*Ug-zg):(Ug-=2)*Ug*((zg+1)*Ug+zg)+2)/2}return zg=+zg,Mg.overshoot=Cg,Mg}(1.70158);var lg=2*Math.PI,rg=(function Cg(zg,Mg){function Ug(Yg){return zg*Math.pow(2,10*--Yg)*Math.sin((Ag-Yg)/Mg)}var Ag=Math.asin(1/(zg=Math.max(1,zg)))*(Mg/=lg);return Ug.amplitude=function(Yg){return Cg(Yg,Mg*lg)},Ug.period=function(Yg){return Cg(zg,Yg)},Ug}(1,.3),function Cg(zg,Mg){function Ug(Yg){return 1-zg*Math.pow(2,-10*(Yg=+Yg))*Math.sin((Yg+Ag)/Mg)}var Ag=Math.asin(1/(zg=Math.max(1,zg)))*(Mg/=lg);return Ug.amplitude=function(Yg){return Cg(Yg,Mg*lg)},Ug.period=function(Yg){return Cg(zg,Yg)},Ug}(1,.3),function Cg(zg,Mg){function Ug(Yg){return(0>(Yg=2*Yg-1)?zg*Math.pow(2,10*Yg)*Math.sin((Ag-Yg)/Mg):2-zg*Math.pow(2,-10*Yg)*Math.sin((Ag+Yg)/Mg))/2}var Ag=Math.asin(1/(zg=Math.max(1,zg)))*(Mg/=lg);return Ug.amplitude=function(Yg){return Cg(Yg,Mg*lg)},Ug.period=function(Yg){return Cg(zg,Yg)},Ug}(1,.3),{time:null,delay:0,duration:250,ease:function(Cg){return(1>=(Cg*=2)?Cg*Cg*Cg:(Cg-=2)*Cg*Cg+2)/2}});Sc.prototype.interrupt=function(Cg){return this.each(function(){tg(this,Cg)})},Sc.prototype.transition=function(Cg){var zg,Mg;Cg instanceof fp?(zg=Cg._id,Cg=Cg._name):(zg=xp(),(Mg=rg).time=Pc(),Cg=null==Cg?null:Cg+"");for(var Ug=this._groups,Ag=Ug.length,Yg=0;Yg<Ag;++Yg)for(var Eg,Pg=Ug[Yg],Dg=Pg.length,Fg=0;Fg<Dg;++Fg)(Eg=Pg[Fg])&&eg(Eg,Cg,zg,Fg,Pg,Mg||vp(Eg,zg));return new fp(Ug,this._parents,Cg,zg)};var sg=function(Cg){return function(){return Cg}};wp.prototype={constructor:wp,scale:function(Cg){return 1===Cg?this:new wp(this.k*Cg,this.x,this.y)},translate:function(Cg,zg){return 0===Cg&0===zg?this:new wp(this.k,this.x+this.k*Cg,this.y+this.k*zg)},apply:function(Cg){return[Cg[0]*this.k+this.x,Cg[1]*this.k+this.y]},applyX:function(Cg){return Cg*this.k+this.x},applyY:function(Cg){return Cg*this.k+this.y},invert:function(Cg){return[(Cg[0]-this.x)/this.k,(Cg[1]-this.y)/this.k]},invertX:function(Cg){return(Cg-this.x)/this.k},invertY:function(Cg){return(Cg-this.y)/this.k},rescaleX:function(Cg){return Cg.copy().domain(Cg.range().map(this.invertX,this).map(Cg.invert,Cg))},rescaleY:function(Cg){return Cg.copy().domain(Cg.range().map(this.invertY,this).map(Cg.invert,Cg))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var dg=new wp(1,0,0);Tp.prototype=wp.prototype;var cg=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},ug=function(Cg){return function(){return Cg}},pg=function(Cg,zg,Mg){this.target=Cg,this.type=zg,this.selection=Mg},_g=function(){Ia.event.preventDefault(),Ia.event.stopImmediatePropagation()},hg={name:"drag"},mg={name:"space"},gg={name:"handle"},yg={name:"center"},fg={name:"x",handles:["e","w"].map(Yp),input:function(Cg,zg){return Cg&&[[Cg[0],zg[0][1]],[Cg[1],zg[1][1]]]},output:function(Cg){return Cg&&[Cg[0][0],Cg[1][0]]}},xg={name:"y",handles:["n","s"].map(Yp),input:function(Cg,zg){return Cg&&[[zg[0][0],Cg[0]],[zg[1][0],Cg[1]]]},output:function(Cg){return Cg&&[Cg[0][1],Cg[1][1]]}},vg={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Yp),input:function(Cg){return Cg},output:function(Cg){return Cg}},bg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wg={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Tg={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},kg={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Sg={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};return Ia.bisector=Xp,Ia.extent=function(Cg,zg){var Mg,Ug,Ag,Yg=Cg.length,Eg=-1;if(null==zg){for(;++Eg<Yg;)if(null!=(Mg=Cg[Eg])&&Mg>=Mg)for(Ug=Ag=Mg;++Eg<Yg;)null!=(Mg=Cg[Eg])&&(Ug>Mg&&(Ug=Mg),Ag<Mg&&(Ag=Mg));}else for(;++Eg<Yg;)if(null!=(Mg=zg(Cg[Eg],Eg,Cg))&&Mg>=Mg)for(Ug=Ag=Mg;++Eg<Yg;)null!=(Mg=zg(Cg[Eg],Eg,Cg))&&(Ug>Mg&&(Ug=Mg),Ag<Mg&&(Ag=Mg));return[Ug,Ag]},Ia.max=function(Cg,zg){var Mg,Ug,Ag=Cg.length,Yg=-1;if(null==zg){for(;++Yg<Ag;)if(null!=(Mg=Cg[Yg])&&Mg>=Mg)for(Ug=Mg;++Yg<Ag;)null!=(Mg=Cg[Yg])&&Mg>Ug&&(Ug=Mg);}else for(;++Yg<Ag;)if(null!=(Mg=zg(Cg[Yg],Yg,Cg))&&Mg>=Mg)for(Ug=Mg;++Yg<Ag;)null!=(Mg=zg(Cg[Yg],Yg,Cg))&&Mg>Ug&&(Ug=Mg);return Ug},Ia.min=function(Cg,zg){var Mg,Ug,Ag=Cg.length,Yg=-1;if(null==zg){for(;++Yg<Ag;)if(null!=(Mg=Cg[Yg])&&Mg>=Mg)for(Ug=Mg;++Yg<Ag;)null!=(Mg=Cg[Yg])&&Ug>Mg&&(Ug=Mg);}else for(;++Yg<Ag;)if(null!=(Mg=zg(Cg[Yg],Yg,Cg))&&Mg>=Mg)for(Ug=Mg;++Yg<Ag;)null!=(Mg=zg(Cg[Yg],Yg,Cg))&&Ug>Mg&&(Ug=Mg);return Ug},Ia.line=Gp,Ia.area=function(){function Cg(Lg){var Hg,Xg,qg,Ig,Ng,Og=Lg.length,jg=!1,$g=Array(Og),Vg=Array(Og);for(null==Pg&&(Fg=Dg(Ng=Ba())),Hg=0;Hg<=Og;++Hg){if(!(Hg<Og&&Eg(Ig=Lg[Hg],Hg,Lg))===jg)if(jg=!jg)Xg=Hg,Fg.areaStart(),Fg.lineStart();else{for(Fg.lineEnd(),Fg.lineStart(),qg=Hg-1;qg>=Xg;--qg)Fg.point($g[qg],Vg[qg]);Fg.lineEnd(),Fg.areaEnd()}jg&&($g[Hg]=+Mg(Ig,Hg,Lg),Vg[Hg]=+Ag(Ig,Hg,Lg),Fg.point(Ug?+Ug(Ig,Hg,Lg):$g[Hg],Yg?+Yg(Ig,Hg,Lg):Vg[Hg]))}if(Ng)return Fg=null,Ng+""||null}function zg(){return Gp().defined(Eg).curve(Dg).context(Pg)}var Mg=Wa,Ug=null,Ag=Zp(0),Yg=Ra,Eg=Zp(!0),Pg=null,Dg=Rp,Fg=null;return Cg.x=function(Lg){return arguments.length?(Mg="function"==typeof Lg?Lg:Zp(+Lg),Ug=null,Cg):Mg},Cg.x0=function(Lg){return arguments.length?(Mg="function"==typeof Lg?Lg:Zp(+Lg),Cg):Mg},Cg.x1=function(Lg){return arguments.length?(Ug=null==Lg?null:"function"==typeof Lg?Lg:Zp(+Lg),Cg):Ug},Cg.y=function(Lg){return arguments.length?(Ag="function"==typeof Lg?Lg:Zp(+Lg),Yg=null,Cg):Ag},Cg.y0=function(Lg){return arguments.length?(Ag="function"==typeof Lg?Lg:Zp(+Lg),Cg):Ag},Cg.y1=function(Lg){return arguments.length?(Yg=null==Lg?null:"function"==typeof Lg?Lg:Zp(+Lg),Cg):Yg},Cg.lineX0=Cg.lineY0=function(){return zg().x(Mg).y(Ag)},Cg.lineY1=function(){return zg().x(Mg).y(Yg)},Cg.lineX1=function(){return zg().x(Ug).y(Ag)},Cg.defined=function(Lg){return arguments.length?(Eg="function"==typeof Lg?Lg:Zp(!!Lg),Cg):Eg},Cg.curve=function(Lg){return arguments.length?(Dg=Lg,null!=Pg&&(Fg=Dg(Pg)),Cg):Dg},Cg.context=function(Lg){return arguments.length?(null==Lg?Pg=Fg=null:Fg=Dg(Pg=Lg),Cg):Pg},Cg},Ia.curveBasis=function(Cg){return new Ja(Cg)},Ia.curveMonotoneX=function(Cg){return new ll(Cg)},Ia.curveNatural=function(Cg){return new sl(Cg)},Ia.curveCardinal=Jp,Ia.curveCatmullRom=Kp,Ia.curveStep=function(Cg){return new cl(Cg,.5)},Ia.curveStepAfter=function(Cg){return new cl(Cg,1)},Ia.curveStepBefore=function(Cg){return new cl(Cg,0)},Ia.curveLinear=Rp,Ia.timeMillisecond=t_,Ia.timeSecond=a_,Ia.timeMinute=i_,Ia.timeHour=l_,Ia.timeDay=r_,Ia.timeWeek=s_,Ia.timeMonth=c_,Ia.timeYear=u_,Ia.formatDefaultLocale=gl,Ia.formatLocale=M_,Ia.timeFormatLocale=vl,Ia.timeFormatDefaultLocale=hs,Ia.scaleLinear=ld,Ia.scaleLog=_d,Ia.scalePow=md,Ia.scaleTime=function(){return fd(u_,c_,s_,r_,l_,i_,a_,t_,Ia.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},Ia.axisRight=function(Cg){return kd(am,Cg)},Ia.axisTop=function(Cg){return kd(om,Cg)},Ia.axisBottom=function(Cg){return kd(im,Cg)},Ia.axisLeft=function(Cg){return kd(lm,Cg)},Ia.zoom=function(){function Cg(ay){ay.property("__zoom",zp).on("wheel.zoom",Dg).on("mousedown.zoom",Fg).on("dblclick.zoom",Lg).filter(Up).on("touchstart.zoom",Hg).on("touchmove.zoom",Xg).on("touchend.zoom touchcancel.zoom",qg).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function zg(ay,iy){return(iy=Math.max(Vg,Math.min(Bg,iy)))===ay.k?ay:new wp(iy,ay.x,ay.y)}function Mg(ay,iy,ly){var ry=iy[0]-ly[0]*ay.k,sy=iy[1]-ly[1]*ay.k;return ry===ay.x&&sy===ay.y?ay:new wp(ay.k,ry,sy)}function Ug(ay,iy){var ly=ay.invertX(iy[0][0])-Zg,ry=ay.invertX(iy[1][0])-Wg,sy=ay.invertY(iy[0][1])-Rg,dy=ay.invertY(iy[1][1])-Gg;return ay.translate(ry>ly?(ly+ry)/2:Math.min(0,ly)||Math.max(0,ry),dy>sy?(sy+dy)/2:Math.min(0,sy)||Math.max(0,dy))}function Ag(ay){return[(+ay[0][0]+ +ay[1][0])/2,(+ay[0][1]+ +ay[1][1])/2]}function Yg(ay,iy,ly){ay.on("start.zoom",function(){Eg(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){Eg(this,arguments).end()}).tween("zoom",function(){var ry=this,sy=arguments,dy=Eg(ry,sy),cy=jg.apply(ry,sy),uy=ly||Ag(cy),py=Math.max(cy[1][0]-cy[0][0],cy[1][1]-cy[0][1]),_y=ry.__zoom,hy="function"==typeof iy?iy.apply(ry,sy):iy,my=Kg(_y.invert(uy).concat(py/_y.k),hy.invert(uy).concat(py/hy.k));return function(gy){if(1===gy)gy=hy;else{var yy=my(gy),fy=py/yy[2];gy=new wp(fy,uy[0]-yy[0]*fy,uy[1]-yy[1]*fy)}dy.zoom(null,gy)}})}function Eg(ay,iy){for(var ly,ry=0,sy=Qg.length;ry<sy;++ry)if((ly=Qg[ry]).that===ay)return ly;return new Pg(ay,iy)}function Pg(ay,iy){this.that=ay,this.args=iy,this.index=-1,this.active=0,this.extent=jg.apply(ay,iy)}function Dg(){if(Og.apply(this,arguments)){var ay=Eg(this,arguments),iy=this.__zoom,ly=Math.max(Vg,Math.min(Bg,iy.k*Math.pow(2,$g.apply(this,arguments)))),ry=vm(this);if(ay.wheel)ay.mouse[0][0]===ry[0]&&ay.mouse[0][1]===ry[1]||(ay.mouse[1]=iy.invert(ay.mouse[0]=ry)),clearTimeout(ay.wheel);else{if(iy.k===ly)return;ay.mouse=[ry,iy.invert(ry)],tg(this),ay.start()}cg(),ay.wheel=setTimeout(function(){ay.wheel=null,ay.end()},ny),ay.zoom("mouse",Ug(Mg(zg(iy,ly),ay.mouse[0],ay.mouse[1]),ay.extent))}}function Fg(){if(!Ng&&Og.apply(this,arguments)){var ay=Eg(this,arguments),iy=Mm(Ia.event.view).on("mousemove.zoom",function(){if(cg(),!ay.moved){var dy=Ia.event.clientX-ry,cy=Ia.event.clientY-sy;ay.moved=dy*dy+cy*cy>oy}ay.zoom("mouse",Ug(Mg(ay.that.__zoom,ay.mouse[0]=vm(ay.that),ay.mouse[1]),ay.extent))},!0).on("mouseup.zoom",function(){iy.on("mousemove.zoom mouseup.zoom",null),zc(Ia.event.view,ay.moved),cg(),ay.end()},!0),ly=vm(this),ry=Ia.event.clientX,sy=Ia.event.clientY;Ym(Ia.event.view),kp(),ay.mouse=[ly,this.__zoom.invert(ly)],tg(this),ay.start()}}function Lg(){if(Og.apply(this,arguments)){var ay=this.__zoom,iy=vm(this),ly=ay.invert(iy),ry=Ug(Mg(zg(ay,ay.k*(Ia.event.shiftKey?.5:2)),iy,ly),jg.apply(this,arguments));cg(),0<Jg?Mm(this).transition().duration(Jg).call(Yg,ry,iy):Mm(this).call(Cg.transform,ry)}}function Hg(){if(Og.apply(this,arguments)){var ay,iy,ly,ry,sy=Eg(this,arguments),dy=Ia.event.changedTouches,cy=dy.length;for(kp(),iy=0;iy<cy;++iy)ly=dy[iy],ry=[ry=Um(this,dy,ly.identifier),this.__zoom.invert(ry),ly.identifier],sy.touch0?sy.touch1||(sy.touch1=ry):(sy.touch0=ry,ay=!0);if(Ig&&(Ig=clearTimeout(Ig),!sy.touch1))return sy.end(),void((ry=Mm(this).on("dblclick.zoom"))&&ry.apply(this,arguments));ay&&(Ig=setTimeout(function(){Ig=null},ty),tg(this),sy.start())}}function Xg(){var ay,iy,ly,ry,sy=Eg(this,arguments),dy=Ia.event.changedTouches,cy=dy.length;for(cg(),Ig&&(Ig=clearTimeout(Ig)),ay=0;ay<cy;++ay)iy=dy[ay],ly=Um(this,dy,iy.identifier),sy.touch0&&sy.touch0[2]===iy.identifier?sy.touch0[0]=ly:sy.touch1&&sy.touch1[2]===iy.identifier&&(sy.touch1[0]=ly);if(iy=sy.that.__zoom,sy.touch1){var uy=sy.touch0[0],py=sy.touch0[1],_y=sy.touch1[0],hy=sy.touch1[1],my=(my=_y[0]-uy[0])*my+(my=_y[1]-uy[1])*my,gy=(gy=hy[0]-py[0])*gy+(gy=hy[1]-py[1])*gy;iy=zg(iy,Math.sqrt(my/gy)),ly=[(uy[0]+_y[0])/2,(uy[1]+_y[1])/2],ry=[(py[0]+hy[0])/2,(py[1]+hy[1])/2]}else{if(!sy.touch0)return;ly=sy.touch0[0],ry=sy.touch0[1]}sy.zoom("touch",Ug(Mg(iy,ly,ry),sy.extent))}function qg(){var ay,iy,ly=Eg(this,arguments),ry=Ia.event.changedTouches,sy=ry.length;for(kp(),Ng&&clearTimeout(Ng),Ng=setTimeout(function(){Ng=null},ty),ay=0;ay<sy;++ay)iy=ry[ay],ly.touch0&&ly.touch0[2]===iy.identifier?delete ly.touch0:ly.touch1&&ly.touch1[2]===iy.identifier&&delete ly.touch1;ly.touch1&&!ly.touch0&&(ly.touch0=ly.touch1,delete ly.touch1),ly.touch0?ly.touch0[1]=this.__zoom.invert(ly.touch0[0]):ly.end()}var Ig,Ng,Og=Sp,jg=Cp,$g=Mp,Vg=0,Bg=1/0,Zg=-Bg,Wg=Bg,Rg=Zg,Gg=Wg,Jg=250,Kg=Ih,Qg=[],ey=Sd("start","zoom","end"),ty=500,ny=150,oy=0;return Cg.transform=function(ay,iy){var ly=ay.selection?ay.selection():ay;ly.property("__zoom",zp),ay===ly?ly.interrupt().each(function(){Eg(this,arguments).start().zoom(null,"function"==typeof iy?iy.apply(this,arguments):iy).end()}):Yg(ay,iy)},Cg.scaleBy=function(ay,iy){Cg.scaleTo(ay,function(){return this.__zoom.k*("function"==typeof iy?iy.apply(this,arguments):iy)})},Cg.scaleTo=function(ay,iy){Cg.transform(ay,function(){var ly=jg.apply(this,arguments),ry=this.__zoom,sy=Ag(ly),dy=ry.invert(sy);return Ug(Mg(zg(ry,"function"==typeof iy?iy.apply(this,arguments):iy),sy,dy),ly)})},Cg.translateBy=function(ay,iy,ly){Cg.transform(ay,function(){return Ug(this.__zoom.translate("function"==typeof iy?iy.apply(this,arguments):iy,"function"==typeof ly?ly.apply(this,arguments):ly),jg.apply(this,arguments))})},Cg.translateTo=function(ay,iy,ly){Cg.transform(ay,function(){var ry=jg.apply(this,arguments),sy=this.__zoom,dy=Ag(ry);return Ug(dg.translate(dy[0],dy[1]).scale(sy.k).translate("function"==typeof iy?-iy.apply(this,arguments):-iy,"function"==typeof ly?-ly.apply(this,arguments):-ly),ry)})},Pg.prototype={start:function(){return 1==++this.active&&(this.index=Qg.push(this)-1,this.emit("start")),this},zoom:function(ay,iy){return this.mouse&&"mouse"!==ay&&(this.mouse[1]=iy.invert(this.mouse[0])),this.touch0&&"touch"!==ay&&(this.touch0[1]=iy.invert(this.touch0[0])),this.touch1&&"touch"!==ay&&(this.touch1[1]=iy.invert(this.touch1[0])),this.that.__zoom=iy,this.emit("zoom"),this},end:function(){return 0==--this.active&&(Qg.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(ay){Hd(new bp(Cg,ay,this.that.__zoom),ey.apply,ey,[ay,this.that,this.args])}},Cg.wheelDelta=function(ay){return arguments.length?($g="function"==typeof ay?ay:sg(+ay),Cg):$g},Cg.filter=function(ay){return arguments.length?(Og="function"==typeof ay?ay:sg(!!ay),Cg):Og},Cg.extent=function(ay){return arguments.length?(jg="function"==typeof ay?ay:sg([[+ay[0][0],+ay[0][1]],[+ay[1][0],+ay[1][1]]]),Cg):jg},Cg.scaleExtent=function(ay){return arguments.length?(Vg=+ay[0],Bg=+ay[1],Cg):[Vg,Bg]},Cg.translateExtent=function(ay){return arguments.length?(Zg=+ay[0][0],Wg=+ay[1][0],Rg=+ay[0][1],Gg=+ay[1][1],Cg):[[Zg,Rg],[Wg,Gg]]},Cg.duration=function(ay){return arguments.length?(Jg=+ay,Cg):Jg},Cg.interpolate=function(ay){return arguments.length?(Kg=ay,Cg):Kg},Cg.on=function(){var ay=ey.on.apply(ey,arguments);return ay===ey?Cg:ay},Cg.clickDistance=function(ay){return arguments.length?(oy=(ay=+ay)*ay,Cg):Math.sqrt(oy)},Cg},Ia.zoomIdentity=dg,Ia.zoomTransform=Tp,Ia.drag=function(){function Cg(Vg){Vg.on("mousedown.drag",zg).filter(Ec).on("touchstart.drag",Ag).on("touchmove.drag",Yg).on("touchend.drag touchcancel.drag",Eg).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function zg(){if(!Hg&&Xg.apply(this,arguments)){var Vg=Pg("mouse",qg.apply(this,arguments),vm,this,arguments);Vg&&(Mm(Ia.event.view).on("mousemove.drag",Mg,!0).on("mouseup.drag",Ug,!0),Ym(Ia.event.view),Cc(),Lg=!1,Dg=Ia.event.clientX,Fg=Ia.event.clientY,Vg("start"))}}function Mg(){if(Am(),!Lg){var Vg=Ia.event.clientX-Dg,Bg=Ia.event.clientY-Fg;Lg=Vg*Vg+Bg*Bg>$g}Ng.mouse("drag")}function Ug(){Mm(Ia.event.view).on("mousemove.drag mouseup.drag",null),zc(Ia.event.view,Lg),Am(),Ng.mouse("end")}function Ag(){if(Xg.apply(this,arguments)){var Vg,Bg,Zg=Ia.event.changedTouches,Wg=qg.apply(this,arguments),Rg=Zg.length;for(Vg=0;Vg<Rg;++Vg)(Bg=Pg(Zg[Vg].identifier,Wg,Um,this,arguments))&&(Cc(),Bg("start"))}}function Yg(){var Vg,Bg,Zg=Ia.event.changedTouches,Wg=Zg.length;for(Vg=0;Vg<Wg;++Vg)(Bg=Ng[Zg[Vg].identifier])&&(Am(),Bg("drag"))}function Eg(){var Vg,Bg,Zg=Ia.event.changedTouches,Wg=Zg.length;for(Hg&&clearTimeout(Hg),Hg=setTimeout(function(){Hg=null},500),Vg=0;Vg<Wg;++Vg)(Bg=Ng[Zg[Vg].identifier])&&(Cc(),Bg("end"))}function Pg(Vg,Bg,Zg,Wg,Rg){var Gg,Jg,Kg,Qg=Zg(Bg,Vg),ey=Og.copy();if(Hd(new Mc(Cg,"beforestart",Gg,Vg,jg,Qg[0],Qg[1],0,0,ey),function(){return null!=(Ia.event.subject=Gg=Ig.apply(Wg,Rg))&&(Jg=Gg.x-Qg[0]||0,Kg=Gg.y-Qg[1]||0,!0)}))return function ty(ny){var oy,ay=Qg;switch(ny){case"start":Ng[Vg]=ty,oy=jg++;break;case"end":delete Ng[Vg],--jg;case"drag":Qg=Zg(Bg,Vg),oy=jg;}Hd(new Mc(Cg,ny,Gg,Vg,oy,Qg[0]+Jg,Qg[1]+Kg,Qg[0]-ay[0],Qg[1]-ay[1],ey),ey.apply,ey,[ny,Wg,Rg])}}var Dg,Fg,Lg,Hg,Xg=Uc,qg=Ac,Ig=Yc,Ng={},Og=Sd("start","drag","end"),jg=0,$g=0;return Cg.filter=function(Vg){return arguments.length?(Xg="function"==typeof Vg?Vg:Em(!!Vg),Cg):Xg},Cg.container=function(Vg){return arguments.length?(qg="function"==typeof Vg?Vg:Em(Vg),Cg):qg},Cg.subject=function(Vg){return arguments.length?(Ig="function"==typeof Vg?Vg:Em(Vg),Cg):Ig},Cg.on=function(){var Vg=Og.on.apply(Og,arguments);return Vg===Og?Cg:Vg},Cg.clickDistance=function(Vg){return arguments.length?($g=(Vg=+Vg)*Vg,Cg):Math.sqrt($g)},Cg},Ia.brush=function(){return Lp(vg)},Ia.brushX=function(){return Lp(fg)},Ia.brushY=function(){return Lp(xg)},Ia.mouse=vm,Ia.select=Mm,Ia.selection=Sc,Ia.selectAll=function(Cg){return"string"==typeof Cg?new kc([document.querySelectorAll(Cg)],[document.documentElement]):new kc([null==Cg?[]:Cg],zm)},Ia.selectorAll=wm,Ia.touch=Um,Ia}({});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}_isFullscreen(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement}_getParent(){const b=Polymer.dom(this).getOwnerRoot();return b?b.nodeType==Node.DOCUMENT_FRAGMENT_NODE?b.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}toggleFullscreen(b){b.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen(),this._resetZoom&&this._resetZoom(b)}fullScreenChanged(){this._fullScreenChanged()}_fullScreenChanged(){requestAnimationFrame(()=>{const b=this._isFullscreen(),c=this._getParent();b?(this.fullscreen=!0,this.style.position='fixed',this.style.top='0',this.style.left='0',this.style.right='0',this.style.bottom='0',this.style.zIndex='1000',this.style['border-radius']='0px',document.body.style.overflow='hidden',c&&c.classList.add('fullscreen')):(this.fullscreen=!1,this.style.position='',this.style.top='',this.style.left='',this.style.right='',this.style.bottom='',this.style.zIndex='',this.style['border-radius']='',document.body.style.overflow='',c&&c.classList.remove('fullscreen')),this.notifyResize&&this.notifyResize()})}computeFullscreenIcon(b){return b?'fullscreen-exit':'fullscreen'}}};</script><dom-module id="device-svg"><template strip-whitespace=""><style>:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:inherit;letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);top:var(--control-top, auto);left:var(--control-left, auto);mix-blend-mode:var(--control-mix-blend-mode, exclusion);}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}#control > *{background:rgba(255,255,255,0.0625);}text{pointer-events:none !important;letter-spacing:normal !important;stroke:none !important;cursor:default !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;mix-blend-mode:exclusion;@apply --svg-text;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control"><icon-button title="focus" icon="filter-center-focus" on-tap="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-tap="toggleFullscreen"></icon-button></div></div></template><script>class DeviceSVG extends WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)){static get is(){return'device-svg'}static get properties(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},classForClicked:{type:String,value:'clicked'},classForSelected:{type:String,value:'selected'},classForExceeding:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectable:{type:Object,value:function(){return{}}},currentSelectedCssSelector:{type:String,reflectToAttribute:!0,notify:!0},selectableFallback:{type:String,value:'rect,circle,path,polygon,ellipse'},multi:{type:Boolean,value:!1},multiClickable:{type:Boolean,value:!1},item:{type:Object},items:{type:Array},exceeding:{type:Array},clickEvent:{type:String,value:'item-select'},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}static get observers(){return['_srcChanged(src)','_selectableChanged(selectable)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}_openedChanged(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}open(a){this.setSvg(a.detail),this.opened=!0}close(){this.opened=!1}_srcChanged(a){a&&this._recentSrc!==a&&(this._recentSrc=a,this._fetch(a,'GET','include','xml').then(this._registerXML.bind(this)).catch(b=>{console.log(a,b)}))}_registerXML(a){if(a&&a.documentElement){const b=document.importNode(a.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(b,this.$.svgContainer.firstChild),this._svg=d3.select(b).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){const c=this._svg.attr('viewBox').split(' ');this._width=c[2]-c[0],this._height=c[3]-c[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}_initialize(){setTimeout(()=>{this._selectableChanged(),this._selectedItemsChanged(),this._exceedingChanged()},0)}_initZoom(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}_selectedItemsChanged(){const a=this.item,b=this.items;a&&Object.keys(a).length||b&&b.length?(!this.src&&(a&&a.svg&&a.svg.path?this.src=a.svg.path:0<b.length&&b[b.length-1].svg&&b[b.length-1].svg.path&&(this.src=b[b.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.classForSelected).classed(this.classForSelected,!1)}_exceedingChanged(){const a=this.exceeding;a&&a.length?(!this.src&&a[a.length-1].svg&&a[a.length-1].svg.path&&(this.src=a[a.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.classForExceeding).classed(this.classForExceeding,!1)}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}_initialChanged(a){this.src&&a&&this._resetZoom()}_selectableChanged(){if(this._mainG&&this._mainG.node&&this.src){const a=this;if(this.selectable&&this.selectable.items&&Object.keys(this.selectable.items).length)for(let b in this.selectable.items)this._mainG.selectAll(this.selectable.items[b]).classed('selectable style-scope device-svg',!0).attr('title',b).on('click',function(){if(a._mainG.selectAll('.'+a.classForClicked).classed(a.classForClicked,!1),a.multiClickable){const c=(a.currentSelectedCssSelector||'').split(','),d=c.indexOf(a.selectable.items[b]);-1===d?c.push(a.selectable.items[b]):c.splice(d,1),a.currentSelectedCssSelector=c.filter(f=>{return''!==f}).join(',')}else a.currentSelectedCssSelector=a.currentSelectedCssSelector===a.selectable.items[b]?'':a.selectable.items[b];a.currentSelectedCssSelector?(a._mainG.selectAll(a.currentSelectedCssSelector).classed(a.classForClicked,!0),a._zoomToElement(this)):a._resetZoom()});else this._mainG.selectAll('rect,circle,path,polygon,eclipse').classed('selectable style-scope device-svg',!0).on('click',function(){a._mainG.selectAll('.'+a.classForClicked).classed(a.classForClicked,!1);const b=a._cssPath(this);if(a.multiClickable){const c=(a.currentSelectedCssSelector||'').split(','),d=c.indexOf(b);-1===d?c.push(b):c.splice(d,1),a.currentSelectedCssSelector=c.filter(f=>{return''!==f}).join(',')}else a.currentSelectedCssSelector=a.currentSelectedCssSelector===b?'':b;a.currentSelectedCssSelector?(a._mainG.selectAll(a.currentSelectedCssSelector).classed(a.classForClicked,!0),a._zoomToElement(this)):a._resetZoom()});void 0!==this.selectable.minZoom&&(this.minZoom=this.selectable.minZoom),void 0!==this.selectable.maxZoom&&(this.maxZoom=this.selectable.maxZoom),void 0!==this.selectable.zoomPartition&&(this.zoomPartition=this.selectable.zoomPartition),this._initZoom(),this._inialized=!0}}_cssPath(a){const b=[];for(;a.nodeType===Node.ELEMENT_NODE;){let c=a.nodeName;if(a.id)c+='#'+a.id;else{let d=a;const f=[];for(;null!==d&&d.nodeType===Node.ELEMENT_NODE;)f.unshift(d.nodeName),d=this._previousElementSibling(d);'HTML'!==f[0]&&(f[0]+=':first-child'),c=f.join(' + ')}b.unshift(c),a=a.parentNode}return b.join(' > ')}_previousElementSibling(a){if('undefined'!==a.previousElementSibling)return a.previousElementSibling;for(;a=a.previousSibling;)if(1===a.nodeType)return a}_zoom(){this._mainG.attr('transform',d3.event.transform)}_zoomToElement(a){if(void 0!==a&&this._svg.node()){const b=this._calcCenterZoom(a),c=d3.zoomIdentity.translate(b.x,b.y).scale(b.k);this._svg.node().__zoom=c,this._mainG.transition(500).attr('transform',c)}}_zoomToElements(a,b){if(a&&'string'===typeof a&&(a=this._mainG.selectAll(a).classed(b,!0)),!a.empty||a.empty())return void this._resetZoom();const c=[];a.each(function(){let d=this.getBoundingClientRect();c[0]=(c[0]>d.left?d.left:c[0])||d.left,c[1]=(c[1]>d.top?d.top:c[1])||d.top,c[2]=(c[2]<d.right?d.right:c[2])||d.right,c[3]=(c[3]<d.bottom?d.bottom:c[3])||d.bottom}),this._zoomToElement({left:c[0],top:c[1],height:c[3]-c[1],width:c[2]-c[0]})}_selectSelected(){setTimeout(()=>{const a=this.multi?this.items||[]:[];this.item&&Object.keys(this.item).length&&-1===a.indexOf(this.item)&&a.push(this.item);let b;if(b=ShadyCSS&&!0===ShadyCSS.nativeShadow?this.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),b&&a&&a.length){let c,d,f;for(let g=0;g<a.length;g++)if(a[g]&&a[g].color&&a[g].svg&&a[g].svg.selector&&b&&b.sheet&&b.sheet.cssRules&&b.sheet.insertRule){c=a[g].svg.selector.split(',');for(let h=0;h<c.length;h++){d=c[h]+'.'+this.classForSelected,f=!1;for(let l=0;l<b.sheet.cssRules.length;l++)b.sheet.cssRules[g].selectorText===d&&(f=!0);!1===f&&b.sheet.insertRule(d+' {\nfill: '+a[g].color+' !important;\n}',b.sheet.cssRules.length)}}this.updateStyles(),this.select(a,this.classForSelected)}},0)}_selectExceeds(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.classForExceeding)}select(a,b){if(this._mainG&&this._mainG.node&&this.src){this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+b).classed(b,!1);let c;const d=[];if(Array.isArray(a)){for(let f=0;f<a.length;f++)a[f].svg&&a[f].svg.selector&&d.push(a[f].svg.selector);c=d.join(',')}else c=a&&a.svg&&a.svg.selector?a.svg.selector:'';this._zoomToElements(c,b)}}_calcCenterZoom(a){const b=this.getBoundingClientRect();if(void 0===b||void 0===a||0===b.height||0===b.width)return{x:0,y:0,k:1};const c=b.height/b.width;let d,f;d=void 0===a.nodeType?a:a.getBoundingClientRect();const g=this._mainG.node().getBBox(),h=this._mainG.node().getBoundingClientRect(),l=g.width/h.width||1;let m=(d.left-h.left)*l+g.x,n=(d.top-h.top)*l+g.y;const o=this._height,p=this._width,q=this._ratio,r=this.zoomPartition;return f=c<q?Math.min(p/(r*d.width*l*c),o/(r*d.height*l)):Math.min(p/(r*d.width*l),p*c/(r*d.height*l)),f<this.minZoom?f=this.minZoom:f>this.maxZoom&&(f=this.maxZoom),c<q?(m=-f*m+(o/c-f*d.width*l)/2,n=-f*n+(o-f*d.height*l)/2):(m=-f*m+(p-f*d.width*l)/2,n=-f*n+(p*c-f*d.height*l)/2),isNaN(m)||isNaN(n)||isNaN(f)?{x:0,y:0,k:1}:{x:m,y:n,k:f}}notifyResize(){this._resetZoom()}_resetZoom(a){a&&(a.preventDefault(),a.stopPropagation()),setTimeout(()=>{if(this.opened&&this._mainG&&this._mainG.node&&this.src){if(this._mainG.selectAll('.'+this.classForClicked).classed(this.classForClicked,!1),!this.initiallyZoomToAll){if(this.item&&Object.keys(this.item).length||this.items&&this.items.length)return void this._selectSelected();if(this.exceeding.length)return void this._selectExceeds();if(this.initial){const b=this._mainG.selectAll(this.initial);if(!(b&&b.empty()))return void this.select([{svg:{selector:this.initial}}],'initial')}}this._zoomToElement(this._mainG.node())}},0)}}customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}static get observers(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)']}_domainXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.domain(b)}_domainYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.domain(b).nice()}_rangeXChanged(b){void 0===b||void 0===this.scaleX||b.some(c=>{return void 0===c||null===c})||this.scaleX.range(b)}_rangeYChanged(b){void 0===b||void 0===this.scaleY||b.some(c=>{return void 0===c||null===c})||this.scaleY.range(b).nice()}_computeScaleFn(b,c,d){if(void 0!==b){const f='time'===b?d3.scaleTime():'ln'===b?d3.scaleLog().base(Math.E):'log'===b?d3.scaleLog().base(c||10):'log\u2082'===b?d3.scaleLog().base(2):'log\u2081\u2080'===b?d3.scaleLog().base(10):'\u221A'===b?d3.scalePow().exponent(0.5):'pow'===b?d3.scalePow().exponent(c||1):d3.scaleLinear();return'x'===d?(f.ticks(this.ticksX||10),this.domainX&&f.domain(this.domainX),this.rangeX&&f.range(this.rangeX)):'y'===d&&(f.ticks(this.ticksY||10),this.domainY&&f.domain(this.domainY),this.rangeY&&f.range(this.rangeY),f.nice()),f}}static get _VALID_SCALES(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}_SCALE_USES_BASE(b){return'log'===b||'pow'===b}_IS_LOG_SCALE(b){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(b)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(c){return class extends WebvisualMixins.ScaleMixin(c){constructor(){super()}static get properties(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:10},collapsedAxisMargin:{type:Number,value:5},axisSizeX:{type:Number,value:25},axisSizeY:{type:Number,value:60},draggable:{type:Boolean,observer:'_draggableChanged'},brushToZoom:{type:Boolean,observer:'_brushToZoomChanged'},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}static get observers(){return['_setDateNumberFormat(localeNumber, localeDate)']}_rangeXChanged(f){super._rangeXChanged(f),f[1]&&(this.ticksX=Math.ceil(f[1]/70))}_rangeYChanged(f){super._rangeYChanged(f),f[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.collapsedAxisMargin)):this.ticksY=Math.ceil(f[0]/50))}_computeAxisNode(f,i,j,k){if(void 0!==f){const l=this.axisColor||'';j=j||this.axisTitle||'';const n=this._isVertical(i);if(k&&k.node){const p=k.node();p&&p.parentElement&&p.parentElement.removeChild(p),k=null}const o=f.append('svg:g').classed('axis',!0).attr('orient',i).classed('y',n).classed('vertical',n).classed('x',!n).classed('expanded',!0).style('color',l);return o.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,o)),this.draggable&&o.classed('draggable',!0).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),o.append('svg:title').text(j),o.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,i)),o.node()._genitor=this,o.node()._axis=o,o._left=0,o._right=0,o._bottom=0,o._top=0,o}}_updateAxisBrushGenerator(f,i,j){j=j||8;const k=[[0,0],[f[1],f[0]]];'left'===i?k[0][0]=-j:'right'===i?k[1][0]=j:'top'===i?k[0][1]=-j:'bottom'===i&&(k[1][1]=j),this.extent(k)}_computeAxisGenerator(f,i,j,k){if(f&&void 0!==i&&void 0!==j){const l=this.tickSize||6;return('left'===f?d3.axisLeft(i):'right'===f?d3.axisRight(i):'top'===f?d3.axisTop(i):d3.axisBottom(i)).tickSize(l).tickFormat(this._computeFormatFn(j,k))}}_setAxisProperties(f,i,j){f.classed('expanded',j),i.tickFormat(j?null:'')}_removeAxes(){let f;this.axisX&&this.axisX.node&&(f=this.axisX.node(),f&&f.parentElement&&f.parentElement.removeChild(f),this.axisX=null),this.axisY&&this.axisY.node&&(f=this.axisY.node(),f&&f.parentElement&&f.parentElement.removeChild(f),this.axisY=null),delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}_toggleAxis(f){const i=f.classed('expanded');f.classed('expanded',!i),this.sizeChanged()}_onAxisClicked(f){this._activeToggleAxisJob&&clearTimeout(this._axisToggleAxisJob),this._activeToggleAxisJob=setTimeout(()=>{this._toggleAxis(f),this._activeToggleAxisJob=null},300)}_onAxisContextMenu(f){d3.event&&d3.event.preventDefault();'left'===f||'right'===f?(this.axisY._isBrushed=!1,this.domainY&&this.domainY.some(j=>{return j===void 0||null===j})&&this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.domainX&&this.domainX.some(j=>{return j===void 0||null===j})&&this.scaleX.domain(this.domainX).nice(),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}_onAxisMouseover(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}_onAxisMouseleave(){}_draggableChanged(f){void 0===this.axisX||void 0===this.axisY||(!0===f?(this.axisX.call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),this.axisY.call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),this.brushToZoom=!1):(this.axisX.on('.drag',null),this.axisY.on('.drag',null)),this.axisX.classed('draggable',f),this.axisY.classed('draggable',f))}_brushToZoomChanged(f){void 0===this.axisX||void 0===this.axisY||(!0===f?(this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.axisX.select('.brush').call(this.axisBrushGeneratorX),this.axisY.select('.brush').call(this.axisBrushGeneratorX),this.draggable=!1):(this.axisX.select('.brush').on('.brush',null),this.axisY.select('.brush').on('.brush',null)))}_onAxisDragStart(){d3.select(this).raise().classed('dragged',!0);const f=d3.select(this).classed('vertical');f?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}_onAxisDragged(){const f=d3.select(this).classed('vertical');let i=0,j=0;f?i=(this._axis._left||0)+d3.event.x-this._startleft:j=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+i+','+j+')')}_onAxisDragEnd(){d3.select(this).classed('dragged',!1);const f=d3.select(this).classed('vertical'),i=this._genitor;let l,j=0,k=0;if(f){if(j=(this._axis._left||0)+d3.event.x-this._startleft,l=j>i.rangeX[1]/2?'right':'left',l!==i.axisOrientY)return i.axisGeneratorY=i._computeAxisGenerator(i.axisOrientY=l,i.scaleY,i.scalingY,i.scaleBaseY).ticks(i.ticksY).tickSize(i.tickSize).tickFormat(i.axisY.classed('expanded')?i._computeFormatFn(i.scalingY,i.scaleBaseY):''),i.axisY=i._computeAxisNode(i._axisInsertionPoint,l,i.item&&i.item.mount,i.axisY).classed('expanded',!0).call(i.axisGeneratorY),void i.sizeChanged();j=this._axis._left}else{if(k=(this._axis._top||0)+d3.event.y-this._starttop,l=k>i.rangeY[0]/2?'bottom':'top',l!==i.axisOrientX)return i.axisGeneratorX=i._computeAxisGenerator(i.axisOrientX=l,i.scaleX,i.scalingX,i.scaleBaseX).ticks(i.ticksX).tickFormat(i.axisX.classed('expanded')?i._computeFormatFn(i.scalingX,i.scaleBaseX):''),i.axisX=i._computeAxisNode(i._axisInsertionPoint,l,i.item&&i.item.mount,i.axisX).classed('expanded',!0).call(i.axisGeneratorX),void i.sizeChanged();k=this._axis._top}d3.select(this).attr('transform','translate('+j+','+k+')'),this._startleft=0,this._starttop=0}_onAxisBrushEnd(f){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){const i=d3.event.selection;if(i){let k;'y'===f?(k=i.map(this.scaleY.invert,this.scaleY).sort((l,n)=>{return l>n}),this.axisY._isBrushed=!0,this.scaleY.domain(k).nice(),this.axisY.transition().call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)):(k=i.map(this.scaleX.invert,this.scaleX).sort((l,n)=>{return l>n}),this.axisX._isBrushed=!0,this.scaleX.domain(k),this.axisX.transition().call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)),this.redraw()}}}_axisColorChanged(f){this.axisX&&this.axisX.style('color',f),this.axisY&&this.axisY.style('color',f)}static get _VALID_AXIS_POSITIONS(){return['top','right','bottom','bottom']}_isVertical(f){return'left'===f||'right'===f}_computeFormatFn(){return'time'===arguments[0]?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}sizeChanged(){}redraw(){}formatTime(f){return(d3.timeSecond(f)<f?this.timeFormat('.%L'):d3.timeMinute(f)<f?this.timeFormat(':%S'):d3.timeHour(f)<f?this.timeFormat('%H:%M'):d3.timeDay(f)<f?this.timeFormat('%X'):d3.timeMonth(f)<f?d3.timeWeek(f)<f?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(f)<f?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(f)}formatTimeRange(f,i,j){const k=(i[1]-i[0]).valueOf()/j;return(100>k?this.timeFormat(':%S.%L'):500>k?this.timeFormat(':%M:%S.%L'):5E3>k?this.timeFormat(':%M:%S'):2E4>k?this.timeFormat('%H:%M:%S'):6E4>k?this.timeFormat('%H:%M'):36E5>k?this.timeFormat('%X'):864E5>k?this.timeFormat('%d.%m'):6048E5>k?this.timeFormat('%d.%m'):24192E5>k?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(f)}formatTimeAbsolute(f){const i=f%315576E5,j=(f-i)/315576E5,k=i%864E5,l=(i-k)/864E5,n=k%36E5,o=(k-n)/36E5,p=n%6E4,q=(n-p)/6E4,r=p%1E3,t=(p-r)/1E3;let u='';return j&&(u+=j+'y '),l&&(u+=l+'d '),o&&(u+=o+'h '),q&&(u+=q+'m '),t&&(u+=t+'s '),r&&(u+=r+'ms'),u}formatNumber(f){return this.numberFormat(',g')(f)}formatIndicator(f,i){return f&&f.from&&f.to?i<f.from||i>f.to?'\u2717':'\u2713':i?'\u2717':'\u2713'}_setDateNumberFormat(f,i){'object'!==typeof i||'object'!==typeof f||(i&&(this.localeDate=i,d3.timeFormatDefaultLocale(i),this.timeFormat=d3.timeFormatLocale(i).format),f&&(this.localeNumber=f,d3.formatDefaultLocale(f),this.numberFormat=d3.formatLocale(f).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}};</script><dom-module id="device-graph"><template><style></style></template><script>class DeviceGraph extends WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-graph'}static get properties(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!1},interpolation:{type:String,value:'Lineare Verbindung',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3.75},viewLength:{type:Number,value:3e4},storeInside:{type:Boolean,value:!0,readOnly:!0}}}constructor(){super(),this._isAttached=!1,this._chart=this._containerRoot,this._areaGenerator=d3.area().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y0(a=>{return a&&this._IS_LOG_SCALE(this.scalingY)?this._chart._height:this.scaleY(0)}).y1(a=>{return this.scaleY(a.y)}),this._lineGenerator=d3.line().defined(this._defined.bind(this)).x(a=>{return this.scaleX(a.x)}).y(a=>{return this.scaleY(a.y)}),this.bisectDate=d3.bisector((a,b)=>{return a.x-b})}static get observers(){return['_itemChanged(item)','_thresholdChanged(item.threshold)']}get _containerRoot(){const a=Polymer.dom(this).getOwnerRoot();return a?a.host||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.item&&this.addNodes()}disconnectedCallback(){this._isAttached=!1,this.removeNodes(),super.disconnectedCallback()}_assignNodes(){const a=this._containerRoot;return a&&'DEVICE-CHART'===a.nodeName?a._isAttached?void(this._chart=a,this._axisInsertionPoint=this._chart._axisInsertionPoint):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',a)}addNodes(){this._isAttached&&this.clearValues(!0),this._assignNodes(),this._chart.multiAxesX||this.set('domainX',this._chart.domainX),this._chart.multiAxesY||this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._areaChanged(),this._lineChanged(),this.axisX||(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount,this.axisX).attr('hidden',!this._chart.multiAxesX||null)),this.axisY||(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount,this.axisY).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._setColorProperties(),this._isAttached=!0,this._chart._addGraph(this)}removeNodes(){let a;this.axisX&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this.axisY&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this._area&&this._area.node&&(a=this._area.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this._area=null),this._line&&this._line.node&&(a=this._line.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this._line=null),this._thresholdChanged(),this._chart._removeGraph(this)}_areaChanged(){this._chart&&this._chart._area&&(!(this._area&&this._area.node)&&(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount)),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')').attr('d',this._areaGenerator([])))}_lineChanged(){this._chart&&this._chart._line&&(!(this._line&&this._line.node)&&(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount)),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth).attr('d',this._lineGenerator([])))}_thresholdChanged(a){if(this._chart&&this._chart._boundery)if(a)this.boundery||(this.boundery=this._chart._boundery.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){let b=this.boundery.node();b&&b.parentElement&&b.parentElement.removeChild(b),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.color||'#000')}}_setColorProperties(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}_itemChanged(a){return this._isAttached?a&&a.mount?void this.addNodes():void this.removeNodes():void 0}insertValues(a,b){if(void 0!==a){if(b=b||(0<this.viewLength?this.viewLength:a.length),b&&(a=a.slice(a.length-b,a.length)),a.map(function(c){return{x:+c.x,y:+c.y}}),this.storeInside){this.values=this.values.concat(a);let c=this.min(this.values,'x'),f=this.max(this.values,'x');void 0!==c&&void 0!==f&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(c<this._chart.domainX[0]&&this._chart.set('domainX',[c,this._chart.domainX[1]]),f>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],f])):this.set('domainX',[c,f])),c=this.min(this.values,'y'),f=this.max(this.values,'y'),void 0!==c&&void 0!==f&&(c===f&&(c--,f++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(c<this._chart.domainY[0]&&this._chart.set('domainY',[c,this._chart.domainY[1]]),f>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],f])):this.set('domainY',[c,f]))}this.renderInsertedValues(a)}}renderClearing(){this._area.attr('d',this._areaGenerator([])),this._line.attr('d',this._lineGenerator([]))}spliceValues(a){for(let b=0;b<a.length;b++){let c;for(c=this.values.length-1;0<=c&&!(this.values[c].x===a[b].x);c--);-1!==c&&this.values.splice(c,1)}this.redraw()}renderInsertedValues(a){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){let b;this._chart.domainX&&this._chart.domainX.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainX',this.domainX),b=!0),this._chart.domainY&&this._chart.domainY.some(c=>{return void 0===c||null===c})&&(this._chart.set('domainY',this.domainY),b=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(b=!0),this.redraw(b,a)}}sizeChanged(){this._isAttached&&this._chart.sizeChanged()}redraw(a,b){if(this._isAttached){if(a)return void this._chart.redraw(!0);const c=this.values||b||[];if(this._area.attr('d',this._areaGenerator(this.hasArea?c:[])),this._line.attr('d',this._lineGenerator(this.hasLine?c:[])),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);const f=[],g=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',h=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',k=this.item.color||'#000';let l;void 0!==this.item.threshold.from&&(l=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(f.push({o:l+'%',c:h}),f.push({o:l+'%',c:k}))),void 0!==this.item.threshold.to&&(l=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),Number.isFinite(l)&&(f.push({o:l+'%',c:k}),f.push({o:l+'%',c:g})));const n=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(f);n.attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.enter().append('stop').attr('offset',function(o){return o.o}).attr('stop-color',function(o){return o.c}),n.exit().remove()}}}_getDomain(a,b){return new Promise((c,f)=>{const g='y'===a,h=g?this.scalingY:this.scalingX;this.requestRange(a).then(k=>{if(k[0]!==void 0&&k[1]!==void 0){g&&k[0]===k[1]&&(k[0]--,k[1]++);let l=this._IS_LOG_SCALE(h);if(l){let n=0<k[0]*k[1];n&&0>=k[0]&&(k[0]=Math.sign(k[1])*Number.EPSILON),n&&0>=k[1]&&(k[1]=Math.sign(k[0])*Number.EPSILON)}b&&('x'===a?this.set('domainX',k):'y'===a&&this.set('domainY',k))}c({domain:k,key:a})}).catch(k=>{f(k)})})}_defined(a){if(!Number.isFinite(a.y))return null;return 0>=a.y&&this._IS_LOG_SCALE(this.scalingY)?null:!0}_closestPoint(a){function b(z){const A=c(z.x)-a[0],B=f(z.y)-a[1];return A*A+B*B}const c=this.scaleX,f=this.scaleY,g=this.values.length,h=c.invert(a[0]),k=Math.ceil(this._chart._width/g),l=Math.pow(Math.ceil(g/this._chart._width),2);let n=this.bisectDate.left(this.values,h,0,g-1),o=b(this.values[n]);const q=Math.sqrt(o)/l,r=c.invert(a[0]-q);let s=this.bisectDate.left(this.values,r,0,n),t=2*n-s;0>s&&(s=0),t>g&&(t=g);let u,w=n;for(let z=s;z<t;z+=k)(u=b(this.values[z]))<=o&&(n=z,o=u);w=n;for(let z=n+1;z<t&&z<n+k-1;z++)(u=b(this.values[z]))<=o&&(o=u,w=z);for(let z=n-1;z>s&&z>n-k+1;z--)(u=b(this.values[z]))<=o&&(o=u,w=z);return this.values[w]}_closestInterpolatedPoint(a,b){function c(n){const o=n.x-a[0],q=n.y-a[1];return o*o+q*q}b=b||this._area.node()||this._line.node();const f=b.getTotalLength();let h,k,g=2*Math.ceil(f/this._chart._width/2),l=Infinity;for(let n,q,o=0;o<=f;o+=g)(q=c(n=b.getPointAtLength(o)))<l&&(h=n,k=o,l=q);for(g/=2;0.5<g;){let n,o,q,r,s,t;0<=(q=k-g)&&(s=c(n=b.getPointAtLength(q)))<l?(h=n,k=q,l=s):(r=k+g)<=f&&(t=c(o=b.getPointAtLength(r)))<l?(h=o,k=r,l=t):g/=2}return h={x:this.scaleX(h.x),y:this.scaleY(h.y)},h.distance=Math.sqrt(l),h}setColor(a){super.setColor.call(this,a),this._setColorProperties()}clearValues(a){super.clearValues.call(this,a)}_lineWidthChanged(a){this._line&&this._line.attr&&this._line.attr('stroke-width',a)}_interpolationChanged(a){let b;switch(a){case'Basis Spline':b=d3.curveBasis;break;case'Monotoner Spline':b=d3.curveMonotoneX;break;case'Kubischer Spline':b=d3.curveNatural;break;case'Cardinaler Spline':b=d3.curveCardinal;break;case'Catmull-Rom-Spline':b=d3.curveCatmullRom;break;case'Stufe (mitte)':b=d3.curveStep;break;case'Stufe (davor)':b=d3.curveStepAfter;break;case'Stufe (danach)':b=d3.curveStepBefore;break;default:b=d3.curveLinear;}this._areaGenerator.curve(b),this._lineGenerator.curve(b),this.redraw()}_onAxisClicked(a){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((a._isBrushed||this._isZoomed)&&this._chart._resetZoom())):void super._onAxisClicked(a)}_onAxisMouseover(){super._onAxisMouseover(),this._area&&(this._area.raise(),!1===this.hasArea&&this._area.attr('d',this._areaGenerator(this.values||[]))),this._line&&this._line.raise()}_onAxisMouseleave(){super._onAxisMouseleave(),this._area&&!1===this.hasArea&&this._area.attr('d',this._areaGenerator([]))}}customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><dom-module id="dialog-chart-export"><template strip-whitespace=""><style include="input-style button-style selectbox-style">:host{outline:none;}#dialog{border-radius:0;padding:0;width:100%;height:100%;}#chartContainer{display:block;position:relative;box-sizing:border-box;margin:0;padding:8px;flex:1 1 auto;overflow:auto;}#chartContainer > *{color:inherit;}#chartContainer > device-chart{margin:0;padding:0;--chart-text-color:#000;--chart-plot-background-opacity:1;height:100%;width:100%;}#options{position:absolute;--drawer-width:12em;--drawer-background:rgba(255,255,255,0.5);--drawer-scrim-background:rgba(0,0,0,0.25);--drawer-content:{padding:0;};}.options-content{color:var(--primary-text-color);display:flex;flex-direction:column;height:100%;padding:0.75em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}.options-content > *{padding:0;margin-top:0;margin-bottom:0.4em;text-align:left;word-break:break-all;flex-shrink:0;position:relative;font-size:0.8em;}.input{background:rgba(255,255,255,0.5);}[hidden]{display:none !important;}</style><dialog-element id="dialog" on-iron-overlay-opened="_setDimensions"><div dialog-title=""><div>[[localize('chart', 'export')]]</div></div><div dialog-content="" horizontal=""><div id="chartContainer"></div><drawer-element id="options" opened$="{{styleOptionsOpened}}" scrim="" stretch="" align="right"><div class="options-content"><div class="selectbox"><select value="{{exportFormat::change}}"><option value="svg">.svg</option><option value="png">.png</option><option value="jpg">.jpg</option></select><span>[[localize('chart', 'export-format')]]</span></div><template is="dom-if" if="[[_nequals(exportFormat, 'svg')]]"><div class="input"><input type="range" min="0" max="1" step="0.01" value="{{quality::input}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'quality')]]</label></div></div><div class="input"><input type="number" min="72" step="1" value="{{resolution::input}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'resolution')]]</label><div class="underline"></div></div></div></template><div class="input"><input type="number" min="0" step="1" value="{{height::input}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'height')]]</label><div class="underline"></div></div></div><div class="input"><input type="number" min="0" step="1" value="{{width::input}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'width')]]</label><div class="underline"></div></div></div><div class="input"><input type="number" min="1" step="1" value="{{fontSize::input}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'font-size')]]</label><div class="underline"></div></div></div><div class="input"><input type="color" value="{{fontColor::input}}"><label>[[localize('chart', 'font-color')]]</label></div><div class="input"><input type="color" value="{{backgroundColor::input}}"><label>[[localize('chart', 'background-color')]]</label></div><div class="input"><input type="color" value="{{lineColor::input}}"><label>[[localize('chart', 'line-color')]]</label></div></div></drawer-element></div><div dialog-bottom="" class="buttons"><div class="button" on-tap="toggleOptions"><paper-ripple></paper-ripple><iron-icon class="left" icon="tune"></iron-icon>[[localize('options')]]</div><div class="button" on-tap="toggleStyleOptions"><paper-ripple></paper-ripple><iron-icon class="left" icon="style"></iron-icon>[[localize('style')]]</div><div class="button" on-tap="fitInContainer"><paper-ripple></paper-ripple><iron-icon class="left" icon="aspect-ratio"></iron-icon>[[localize('fit')]]</div><div class="button" on-tap="save"><paper-ripple></paper-ripple><iron-icon class="left" icon="camera-alt"></iron-icon>[[localize('save')]]</div></div></dialog-element></template><script>class DialogChartExport extends WebvisualMixins.LocalizeMixin(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element)){static get is(){return'dialog-chart-export'}static get properties(){return{opened:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_openedChanged'},styleOptionsOpened:{type:Boolean,value:!1},exportFormat:{type:String,value:'svg'},resolution:{type:Number,value:150},quality:{type:Number,value:0.5},height:{type:Number},width:{type:Number},backgroundColor:{type:String,value:'#ffffff'},fontColor:{type:String,value:'#151515'},fontSize:{type:Number,value:11},lineColor:{type:String,value:'#151515'},localesUrlPrefix:{type:String,value:'/locales/ui/'}}}static get observers(){return['_setDimensions(height, width)','_styleChanged(backgroundColor, fontColor, lineColor, fontSize, showInfo, showLegend)']}static get listeners(){return{"iron-resize":'_setDimensions'}}constructor(){super(),this.setChartElement(...arguments)}connectedCallback(){super.connectedCallback(),this._isAttached=!0,this._attachChartElement(),this._getPPI()}setChartElement(c){c&&(this._chart&&this._detachChartElement(),this._chart=c.cloneNode(!0),this._chart.controlButtonsHidden=!0,this._chart.exportButtonDisabled=!0,this._chart.autoHideInfoDisabled=!0,this._chart.modus='hold',this._chart.setAttribute('without-mixmode',!0),this._chart.set('items',c.items),!0===this._isAttached&&this._attachChartElement())}_attachChartElement(){this._chart&&(Array.prototype.forEach.call(this.$.chartContainer.children,c=>{this.$.chartContainer.removeChild(c)}),requestAnimationFrame(()=>{this.$.chartContainer.appendChild(this._chart),this._chart._buildLayout();const c=this._chart._svg.node().querySelector('clipPath');c.setAttribute('id','clip-export'),Array.prototype.forEach.call(this._chart._svg.node().querySelectorAll('[clip-path]'),d=>{d.setAttribute('clip-path','url(#clip-export)')}),setTimeout(()=>{this._styleChanged(this.backgroundColor,this.fontColor,this.lineColor,this.fontSize),this.fitInContainer()},100)}))}_detachChartElement(){!0===this._isAttached&&this._chart&&this._chart.parentElement&&this._chart.parentElement.removeChild(this._chart)}_setDimensions(c,d){if(this._chart&&!0===this._isAttached){const e=this._chart.getBoundingClientRect();'number'!==typeof c&&(c=e.height),'number'!==typeof d&&(d=e.width),0>=c||0>=d||(this._chart.style.height=c+'px',this._chart.style.width=d+'px',this._chart.sizeLayout())}}fitInContainer(){if(this._chart&&!0===this._isAttached){const c=this.$.chartContainer.getBoundingClientRect(),d=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-top')),e=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-right')),f=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-bottom')),g=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-left')),h=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-top')),k=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-right')),l=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-bottom')),m=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-left')),n=Math.floor(c.height-h-l-d-f),o=Math.floor(c.width-k-m-e-g);0>=n||0>=o||(this.height=n,this.width=o)}}_getPPI(){let c=document.createElement('div');c.style.cssText='height: 1in; left: -100%; position: absolute; top: -100%; width: 1in;',document.body.insertBefore(c,document.body.children[0]),this._ppiX=c.offsetWidth,this._ppiY=c.offsetHeight,c.parentElement.removeChild(c)}toggleOptions(){this._chart.toggleOptions()}toggleStyleOptions(){this.styleOptionsOpened=!this.styleOptionsOpened}_openedChanged(c){!0===c?this.open():this.close()}_nequals(c,d){return c!=d}open(){this.$.dialog.open(),this.opened=!0}close(){this.$.dialog.close(),this.opened=!1}_styleChanged(c,d,e,f){this._chart.updateStyles({"--chart-plot-background-color":c}),this._chart.updateStyles({"--chart-line-color":e}),this._chart.updateStyles({"--chart-text-color":d}),this._chart.updateStyles({"--chart-text-size":f+'px'})}_applyStyleToElement(c,d){const e=c.childNodes,f=d.childNodes,g=['svg','g'],h={rect:['fill','stroke','stroke-width'],path:['fill','stroke','stroke-width'],circle:['fill','stroke','fill-opacity','stroke-width'],line:['stroke','stroke-width'],text:['fill','font-size','font-family','letter-spacing','text-anchor','alignment-baseline','stroke','stroke-width','stroke-opacity']};for(let k=0;k<e.length;k++){const l=e[k],m=l.tagName;if(-1!==g.indexOf(m))this._applyStyleToElement(l,f[k]);else if(m in h){const n=window.getComputedStyle(f[k]);for(let o=0;o<h[m].length;o++)l.setAttribute([h[m][o]],n.getPropertyValue(h[m][o]))}}}save(){this._styleChanged(),this._setDimensions(this.height,this.width),requestAnimationFrame(()=>{const c=this._chart._svg.node().cloneNode(!0);this._applyStyleToElement(c,this._chart._svg.node()),Array.prototype.forEach.call(c.querySelectorAll('[hidden],.brush,#zoom'),h=>{h&&h.parentElement&&h.parentElement.removeChild(h)}),c.setAttribute('filter','url(#solid)'),c.style.margin='0px',c.style.padding='0px',c.querySelector('filter#solid feFlood').setAttribute('flood-color',this.backgroundColor),Array.prototype.forEach.call(c.querySelectorAll('.axis.main text'),h=>{h.setAttribute('fill',this.textColor)}),Array.prototype.forEach.call(c.querySelectorAll('.domain'),h=>{h.setAttribute('fill-opacity','0')}),Array.prototype.forEach.call(c.querySelectorAll('.grid line'),h=>{h.setAttribute('stroke-width',0.5),h.setAttribute('stroke-opacity',0.2),h.setAttribute('stroke',this.lineColor)}),Array.prototype.forEach.call(c.querySelectorAll('.axis.main line,.axis.main path'),h=>{h.setAttribute('stroke',this.lineColor)}),Array.prototype.forEach.call(c.querySelectorAll('*'),h=>{h.removeAttribute('class')});const d=new XMLSerializer().serializeToString(c),e=decodeURIComponent(location.href).replace(/ids|room|:\/\/|https|http/gi,'').replace(/[$-/:-?{-~!"^=&_`]/gi,'+').replace(/\+\+/gi,'+');let f=document.createElement('a');f.setAttribute('download',e+'.'+this.exportFormat);const g=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!0});if('svg'===this.exportFormat){const h=new Blob([d],{type:'image/svg+xml;charset=utf-8}'});f.setAttribute('href',URL.createObjectURL(h));const k=!f.dispatchEvent(g);k||this.close()}else{const h=new Image,k=this.resolution;h.src='data:image/svg+xml;base64,'+window.btoa(unescape(encodeURIComponent(d))),h.onload=()=>{const l=document.createElement('canvas'),m=this._chart._svg.node().getBoundingClientRect(),n=m.height,o=m.width;l.style.width=o+'px',l.style.height=n+'px';let p=k/this._ppiX,q=k/this._ppiY;l.setAttribute('width',p*o),l.setAttribute('height',q*n);const r=l.getContext('2d');r.scale(l.width/o,l.height/n),r.drawImage(h,0,0),f.setAttribute('href',l.toDataURL('image/'+this.exportFormat,this.quality));const s=!f.dispatchEvent(g);s||this.close()}}})}}customElements.define(DialogChartExport.is,DialogChartExport);</script></dom-module><dom-module id="device-chart"><template strip-whitespace=""><style include="selectbox-style button-style">:host{display:block;box-sizing:content-box;position:relative;font:inherit;color:white;letter-spacing:normal;user-select:none !important;z-index:auto;overflow:visible;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);padding-top:1em !important;padding-left:1em !important;padding-right:1em !important;padding-bottom:calc(8px + var(--icon-size, 1.5em) + 2*var(--icon-padding, 0.5em)) !important;margin:0 !important;--control-button-distance:8px !important;}:host([fullscreen]) #control{bottom:8px !important;top:auto !important;left:auto !important;right:16px !important;mix-blend-mode:normal !important;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);height:unset;width:unset;max-height:unset !important;flex-basis:unset;}:host(:-webkit-full-screen) *{}#svg{width:100%;height:100%;font-family:inherit !important;overflow:visible;}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.axis{cursor:default;pointer-events:all;font-family:inherit !important;}.axis path, .axis line{fill:currentColor;fill-opacity:0.001;stroke:currentColor;stroke-opacity:0.9;transition:fill-opacity 200ms linear;}.axis line{stroke-width:1.25px;}.axis.main line{stroke:var(--chart-line-color, currentColor);}.axis:hover path,
      .axis.dragged path{fill-opacity:0.25;}.grid .tick line{stroke:var(--chart-line-color, var(--grid-color, currentColor));stroke-opacity:0.1;stroke-width:0.75px;}.grid path{stroke-width:0;}.brush .selection{fill:currentColor;fill-opacity:0.8;stroke:currentColor;stroke-width:0;}.brush .overlay{cursor:pointer;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--chart-line-color, var(--focus-color, currentColor));}#focus *:not(.dot),
      #delta *:not(.dot){stroke:var(--chart-line-color, var(--focus-color, currentColor));stroke-opacity:var(--focus-opacity, 0.75);stroke-dasharray:1;stroke-width:1.5px;}marker path{fill:var(--chart-line-color, var(--focus-color, currentColor));}#zoom{cursor:default;fill:currentColor;fill-opacity:0.001;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;stroke:#000;stroke-opacity:0.75;stroke-width:1px;pointer-events:all;transition:fill 100ms linear;}.dot:hover{fill-opacity:1;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{text-align:left;flex-shrink:0;position:relative;}#options{position:absolute;--drawer-width:12em;--drawer-background:rgba(255,255,255,0.5);--drawer-scrim-background:var(--options-scrim-background, rgba(0,0,0,0.25));--drawer-content:{padding:0;color:var(--primary-text-color);};}.options-content{display:flex;flex-direction:column;height:100%;font-size:0.8em;padding:0.75em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}.options-content > *{margin-bottom:0.4em;}.selectbox > select{opacity:1;}:host(:not([without-mixmode])) #delta .line,
      :host(:not([without-mixmode])) #focus .line,
      :host(:not([without-mixmode])) marker > path,
      :host(:not([without-mixmode])) .grid .tick line{mix-blend-mode:exclusion;pointer-events:none;}#control{position:absolute;bottom:var(--control-bottom, 0px);right:var(--control-right, 0px);top:var(--control-top, auto);left:var(--control-left, auto);mix-blend-mode:var(--control-mix-blend-mode, exclusion);}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 0px);}svg text{fill:var(--chart-text-color, var(--bright-text-color));stroke:currentColor;stroke-width:0.5px;stroke-opacity:0.1;font-size:var(--chart-text-size, 11px) !important;letter-spacing:-0.025em;font-family:inherit !important;cursor:inherit;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}svg text.info{fill:var(--primary-text-color);pointer-events:none;}.draggable{cursor:-webkit-grab;cursor:grab;}.draggable.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.draggable *{cursor:inherit !important;}[hidden]{display:none !important;}</style><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMinYMin meet" on-contextmenu="_resetZoom"><defs><marker id="arrowToLeft" viewBox="0 0 20 10" refX="0" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 20,0 L 0,5 L 20,10 Z"></path></marker><marker id="arrowToRight" viewBox="0 0 20 10" refX="20" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0,0 L 20,5 L 0,10 Z"></path></marker><marker id="stub" markerWidth="8" markerHeight="6" refX="6" refY="5" orient="auto" markerUnits="strokeWidth" viewBox="0 0 6 10"><path d="M 5,10 M 4,0 H 6 V 10 H 4 Z"></path><path d="M 3,5 M 0,4 H 6 V 6 H 0 Z"></path></marker><filter id="solid"><feFlood flood-color="#fff" result="out1"></feFlood><feComposite in="SourceGraphic" in2="out1" operator="over"></feComposite></filter><clipPath id="clip"><rect x="0" y="0"></rect></clipPath></defs><g id="chart"><rect id="plot" clip-path="url(#clip)"></rect><g class="grid" clip-path="url(#clip)"><g id="gridX"></g><g id="gridY"></g></g><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g><g id="boundery"></g></g><rect id="zoom" x="0" y="0" clip-path="url(#clip)"></rect><g id="axis"></g><g hidden$="[[hideInfo]]"><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusLineX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusLineY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="info"><text class="focus info" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text><text class="delta info x" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text><text class="delta info y" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text></g></g></g></svg><drawer-element id="options" opened="{{showControl}}" align="right" stretch="" scrim=""><div class="options-content"><div class="selectbox" title$="[[localize('chart', 'interpolation')]]"><select value="{{interpolation::change}}"><option value="Lineare Verbindung">Lineare Verbindung</option><option value="Basis Spline">Basis Spline</option><option value="Kubischer Spline">Kubischer Spline</option><option value="Cardinaler Spline">Cardinaler Spline</option><option value="Catmull-Rom-Spline">Catmull-Rom-Spline</option><option value="Stufe (mitte)">Stufe (mitte)</option><option value="Stufe (davor)">Stufe (davor)</option><option value="Stufe (danach)">Stufe (danach)</option></select></div><div class="selectbox" title$="[[localize('chart', 'scaling', 'y')]]"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="âˆš">âˆš</option><option value="ln">ln</option><option value="logâ‚‚">logâ‚‚</option><option value="logâ‚â‚€">logâ‚â‚€</option></select></div><div class="selectbox" title$="[[localize('chart', 'modus', 'description')]]"><select value="{{modus::change}}"><option value="hold">[[localize('chart', 'modus', 'hold')]]</option><option value="zoom">[[localize('chart', 'modus', 'zoom')]]</option><option value="delta">[[localize('chart', 'modus', 'delta')]]</option></select></div><div class="checkbox"><input type="checkbox" checked="{{multiAxesX::change}}"> [[localize('chart', 'multi-axes', 'x')]]</div><div class="checkbox"><input type="checkbox" checked="{{multiAxesY::change}}"> [[localize('chart', 'multi-axes', 'y')]]</div><div class="checkbox"><input type="checkbox" checked="{{draggable::change}}"> [[localize('chart', 'draggable')]]</div><div class="checkbox"><input type="checkbox" checked="{{brushToZoom::change}}"> [[localize('chart', 'brush-to-zoom')]]</div><div class="checkbox"><input type="checkbox" checked="{{!hideInfo::change}}"> [[localize('chart', 'show-info')]]</div><div class="button" on-click="_openExportDialog" hidden$="[[exportButtonHidden]]"><iron-icon icon="file-download"></iron-icon>[[localize('chart', 'export')]]</div></div></drawer-element><section id="control" hidden$="[[controlButtonsHidden]]" on-mouseenter="_debouncedHideInfo"><icon-button title="settings" icon="tune" on-tap="toggleOptions" title$="[[localize('options')]]"></icon-button><icon-button title="reset zoom" icon="filter-center-focus" on-tap="_resetZoom" title$="[[localize('reset-zoom')]]"></icon-button><icon-button icon="[[fullscreenIcon]]" on-tap="toggleFullscreen" title$="[[localize('fullscreen', fullscreen)]]"></icon-button></section><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>class DeviceChart extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))){static get is(){return'device-chart'}static get properties(){return{opened:{type:Boolean},hasGrid:{type:Boolean,value:!0},margin:{type:Object,value:function(){return{top:10,right:5,bottom:5,left:5}}},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'Lineare Verbindung',observer:'changeInterpolation'},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},hideInfo:{type:Boolean,value:!1},exportButtonHidden:{type:Boolean,value:!1},controlButtonsHidden:{type:Boolean,value:!1},autoHideInfoDisabled:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},localesUrlPrefix:{type:Array,value:function(){return['/locales/ui/','/locales/format/']}}}}constructor(){super(),this._width=0,this._height=0,this._graphs=new Set}get _self(){return this}static get observers(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}_localizeChanged(c){this.set('localeDate',c('date')),this.set('localeNumber',c('number'))}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}connectedCallback(){super.connectedCallback(),this._buildLayout()}_assignNodes(){this._svg=d3.select(this.$.svg),this._chart=d3.select(this.$.chart),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._boundery=d3.select(this.$.boundery),this.gridX=d3.select(this.$.gridX),this.gridY=d3.select(this.$.gridY),this._focus=d3.select(this.$.focus),this._focusLineX=d3.select(this.$.focusLineX),this._focusLineY=d3.select(this.$.focusLineY),this._focusDot=d3.select(this.$.focusDot),this._info=this._chart.select('text.focus.info'),this._infoDeltaX=this._chart.select('text.delta.info.x'),this._infoDeltaY=this._chart.select('text.delta.info.y'),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoom=d3.select(this.$.zoom),this._graphs.forEach(c=>{c._assignNodes()})}_buildLayout(){this._assignNodes(),this._svg.attr('height',null).attr('width',null),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).classed('main',!0).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).classed('main',!0).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._focusDot.on('mouseenter',()=>{!this.autoHideInfoDisabled&&this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob)},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._zoomBehavior=d3.zoom().scaleExtent([0.95,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom.call(this._zoomBehavior),this._chart.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',this._debouncedHideInfo.bind(this),{passive:!0}).on('mousemove',()=>{if(!this.hideInfo){if(this._showInfo(),'hold'===this.modus&&this._fixedValue)return void this._debouncedHideInfo(this);const c=d3.mouse(this._chart.node());requestAnimationFrame(()=>{let f,h,j,k;if(this._graphs.forEach(l=>{if(l.values&&l.values.length){const n=l._closestPoint(c),o=Math.pow(c[0]-l.scaleX(n.x),2)+Math.pow(c[1]-l.scaleY(n.y),2);(void 0===j||o<j)&&(j=o,h=n,f=l)}}),h){if(k='#fff',f.item.threshold)switch(f.checkExceedingState(h)){case 1:k=f.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:k=f.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusedValue=h,this._focusedValue.g=f,this._focusedValue._left=this.multiAxesY?f.axisY._left:this.axisY._left,this._focusedValue._top=this.multiAxesX?f.axisX._top:this.axisX._top,this._focusDot.datum(h).attr('fill',k).attr('r',f.dotRadius),this._showInfo(),this._moveInfo(h)}else this._debouncedHideInfo()})}},{passive:!0}),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}reset(){this.set('item',{}),this.set('items',[]),this.set('exceeding',[]),this._graphs.clear(),this._debouncedHideInfo(),this._fixedValue=null,this._focusedValue=null}sizeChanged(){this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=setTimeout(()=>{this.sizeLayout()},0))}sizeLayout(){if(this.opened&&this._isAttached){const c=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&(clearTimeout(this._activeSizeJob),this._activeSizeJob=null),0===c.height||0===c.width)return void requestAnimationFrame(()=>{this.sizeChanged()});this._debouncedHideInfo(),this._chart._top=0,this._chart._right=0,this._chart._bottom=0,this._chart._left=0;let f;const h=[],j=[];this._graphs.forEach(k=>{if(k._isAttached){let l;k.axisX.attr('hidden')||(l=k.axisX.classed('expanded')?k.axisSizeX:k.tickSize+k.collapsedAxisMargin,h.push(this._incremAxisPosition(k.axisX,k.axisOrientX,l))),k.axisY.attr('hidden')||(l=k.axisY.classed('expanded')?k.axisSizeY:k.tickSize+k.collapsedAxisMargin,h.push(this._incremAxisPosition(k.axisY,k.axisOrientY,l)))}}),this.axisX.attr('hidden')||(f=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.collapsedAxisMargin,h.push(this._incremAxisPosition(this.axisX,this.axisOrientX,f))),this.axisY.attr('hidden')||(f=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.collapsedAxisMargin,h.push(this._incremAxisPosition(this.axisY,this.axisOrientY,f))),Promise.all(h).then(()=>{this._width=Math.abs(c.width-Math.abs(this._chart._left||0)-Math.abs(this._chart._right||0)-(this.margin.left||0)-(this.margin.right||0)),this._height=Math.abs(c.height-Math.abs(this._chart._bottom||0)-Math.abs(this._chart._top||0)-(this.margin.top||0)-(this.margin.bottom||0)),this.set('rangeX',[0,this._width]),this.set('rangeY',[this._height,0]),this._zoom.attr('height',this._height).attr('width',this._width),this._zoomBehavior.translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]),this._graphs.forEach(k=>{k._isAttached&&(!k.axisX.attr('hidden')&&j.push(this._finalizeAxisPosition(k.axisX,k.axisOrientX,this._width,this._height)),!k.axisY.attr('hidden')&&j.push(this._finalizeAxisPosition(k.axisY,k.axisOrientY,this._width,this._height)))}),this.axisX.attr('hidden')||j.push(this._finalizeAxisPosition(this.axisX,this.axisOrientX,this._width,this._height)),this.axisY.attr('hidden')||j.push(this._finalizeAxisPosition(this.axisY,this.axisOrientY,this._width,this._height)),Promise.all(j).then(()=>{this._svg.select('clipPath rect').transition().attr('width',this._width).attr('height',this._height),this._chart.select('rect#plot').transition().attr('width',this._width).attr('height',this._height);const k=(-this._chart._left||0)+(this.margin.left||0),l=(-this._chart._top||0)+(this.margin.top||0);this._chart.transition().attr('transform','translate('+k+','+l+')'),this._focusLineY.attr('y1',this._height),this._graphs.forEach(n=>{n._isAttached&&(!n.axisX.attr('hidden')&&(n.axisGeneratorX=n._computeAxisGenerator.call(n,n.axisOrientX,n.scaleX,n.scalingX,n.scaleBaseX).ticks(n.ticksX).tickSize(n.tickSize).tickFormat(n.axisX.classed('expanded')?n._computeFormatFn(n.scalingX,n.scaleBaseX):''),n._updateAxisBrushGenerator.call(n.axisBrushGeneratorX,this.rangeX,n.axisOrientX),this.brushToZoom&&n.axisX.select('.brush').raise().call(n.axisBrushGeneratorX),n.axisX.attr('transform','translate('+(n.axisX._left||0)+','+(n.axisX._top||0)+')')),!n.axisY.attr('hidden')&&(n.axisGeneratorY=n._computeAxisGenerator.call(n,n.axisOrientY,n.scaleY,n.scalingY,n.scaleBaseY).ticks(n.ticksY).tickSize(n.tickSize).tickFormat(n.axisY.classed('expanded')?n._computeFormatFn(n.scalingY,n.scaleBaseY):''),n._updateAxisBrushGenerator.call(n.axisBrushGeneratorY,this.rangeY,n.axisOrientY),this.brushToZoom&&n.axisY.select('.brush').raise().call(n.axisBrushGeneratorY),n.axisY.attr('transform','translate('+(n.axisY._left||0)+','+(n.axisY._top||0)+')')))}),this.axisX.attr('hidden')||(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.brushToZoom&&this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),this.axisY.attr('hidden')||(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.brushToZoom&&this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),!this.domainX||!this.domainY||this.domainX.some(n=>{return void 0===n||null===n})||this.domainY.some(n=>{return void 0===n||null===n})?this.redraw(!0):this.redraw()})})}}_incremAxisPosition(c,f,h){return'left'===f?(c._left=this._chart._left,c._right=0,this._chart._left-=h):'right'===f?(c._left=0,c._right=this._chart._right,this._chart._right+=h):(c._left=0,c._right=0),'top'===f?(c._bottom=0,c._top=this._chart._top,this._chart._top-=h):'bottom'===f?(c._bottom=this._chart._bottom,c._top=0,this._chart._bottom+=h):(c._bottom=0,c._top=0),!0}_finalizeAxisPosition(c,f,h,j){return c._left+=c._right,c._top+=c._bottom,c._bottom=0,c._right=0,'right'===f?c._left+=h:'bottom'===f&&(c._top+=j),!0}_generateGrid(){this._gridBuildJob&&clearTimeout(this._gridBuildJob),this._gridBuildJob=setTimeout(()=>{this.hasGrid&&(!this.multiAxesY||1>=this._graphs.size)?(this.gridGeneratorY=d3.axisLeft(this.scaleY).ticks(2*this.ticksY||10).tickSize(-this._width).tickFormat(''),this.gridY.call(this.gridGeneratorY).attr('font-family',null).attr('font-size',null).attr('text-anchor',null),this.gridY.attr('hidden',null)):this.gridY.attr('hidden',!0),this.hasGrid&&(!this.multiAxesX||1>=this._graphs.size)?(this.gridGeneratorX=d3.axisBottom(this.scaleX).ticks(2*this.ticksX||10).tickSize(this._height).tickFormat(''),this.gridX.call(this.gridGeneratorX).attr('font-family',null).attr('font-size',null).attr('text-anchor',null),this.gridX.attr('hidden',null),this.gridX.call(this.gridGeneratorX.scale(this.scaleX))):this.gridX.attr('hidden',!0),this._gridBuildJob=null},0)}_redomain(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch(c=>{c&&console.warn(c)}))}redraw(c){return this._isAttached?c?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(()=>{this.axisX.attr('hidden')||this.axisX.transition().call(this.axisGeneratorX).attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')'),this.axisY.attr('hidden')||this.axisY.transition().call(this.axisGeneratorY).attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')'),this._graphs.forEach(f=>{f._isAttached&&(f.axisX.attr('hidden')?f.set('domainX',this.domainX):f.axisX.transition().call(f.axisGeneratorX).attr('transform','translate('+(f.axisX._left||0)+','+(f.axisX._top||0)+')'),f.axisY.attr('hidden')?f.set('domainY',this.domainY):f.axisY.transition().call(f.axisGeneratorY).attr('transform','translate('+(f.axisY._left||0)+','+(f.axisY._top||0)+')'),f.redraw())}),this.hasGrid&&this._generateGrid(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0),this._updateInfo()},0)):void 0}_multiAxesChanged(c,f){if(this._isAttached){let h;this._graphs.forEach(j=>{j._isAttached&&(h=!c||null,j.axisX.attr('hidden',h),h=!f||null,j.axisY.attr('hidden',h))}),h=!!c||null,this.axisX.attr('hidden',h),h=!!f||null,this.axisY.attr('hidden',h),h=f||c?null:!0,this.axisX.select('.brush').attr('hidden',h),this.axisY.select('.brush').attr('hidden',h),this._generateGrid(),this._redomain(),this.sizeChanged()}}_addGraph(c){this._graphs.add(c),this.sizeChanged()}_removeGraph(c){this._graphs.delete(c),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),c=null,this._fixedValue=null,this._focusedValue=null,this.sizeChanged()}_getDomain(){return new Promise((c,f)=>{const h=[],j=[];this._graphs.forEach(k=>{h.push(k._getDomain('x',this.multiAxesX)),j.push(k._getDomain('y',this.multiAxesY))}),Promise.all(h).then(k=>{let l,n,o;for(let r=0;r<k.length;r++)l=void 0===l||l>k[r].domain[0]?k[r].domain[0]:l,n=void 0===n||n<k[r].domain[1]?k[r].domain[1]:n;(l===void 0||n===void 0)&&c(),o=[l,n],this.set('domainX',o),this.scaleX.domain(o),!1===this.multiAxesX&&this._graphs.forEach(r=>{r.axisX._isBrushed=!1,r.set('domainX',o),r.scaleX.domain(o)}),Promise.all(j).then(r=>{let u,v,w;for(let z=0;z<r.length;z++)u=void 0===u||u>r[z].domain[0]?r[z].domain[0]:u,v=void 0===v||v<r[z].domain[1]?r[z].domain[1]:v;(u===void 0||v===void 0)&&c(),w=[u,v],this.set('domainY',w),!1===this.multiAxesY&&this._graphs.forEach(z=>{z.axisY._isBrushed=!1,z.set('domainY',w)}),c()}).catch(r=>{f(r)})}).catch(k=>{f(k)})})}insertValues(c){this._graphs.forEach(f=>{f&&f._isAttached&&f.item&&f.item.mount&&c[f.item.mount]&&f.insertValues(c[f.item.mount])})}clearValues(){this._graphs.forEach(c=>{c&&c._isAttached&&c.clearValues()})}_draggableChanged(c){super._draggableChanged(c),this._graphs.forEach(f=>{f.draggable=c})}_brushToZoomChanged(c){super._brushToZoomChanged(c),this._graphs.forEach(f=>{f.brushToZoom=c})}_moveInfo(c){if(Number.isFinite(c.g.scaleY(c.y))){const f=this._computeFormatFn.call(c.g,c.g.scalingX,c.g.scaleBaseX),h=this._computeFormatFn.call(c.g,c.g.scalingY,c.g.scaleBaseY),j=this._fixedValue;if(this._info.text(f(c.x)+' '+h(c.y)+'\u205F'+(c.g.item.unit||'')),'delta'===this.modus&&j){const k=Math.abs(j.x-c.x),l=Math.abs(j.y-c.y),n=c.g.item.unit===j.g.item.unit;this._infoDeltaX.text(('time'===c.g.scalingX?c.g.formatTimeAbsolute:f)(k)+(n&&'time'!==c.g.scalingX?'\u205F'+c.g.item.unit:'')),this._infoDeltaY.text(('time'===c.g.scalingY?c.g.formatTimeAbsolute:h)(l)+(n&&'time'!==c.g.scalingY?'\u205F'+c.g.item.unit:''))}this._updateInfo()}}_showInfo(){this.hideInfo||(!this.autoHideInfoDisabled&&this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._info.attr('hidden',null),this._focus.attr('hidden',null),'delta'===this.modus&&this._fixedValue&&this._showDelta())}_showDelta(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}_debouncedHideInfo(){this.autoHideInfoDisabled||(this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(()=>{this._hideInfo(),this._activeHideInfoJob=null},750))}_hideInfo(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}_hideDelta(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}_updateInfo(){if(this._focusedValue&&''!==this._info.attr('hidden')){const c=this._focusedValue,f=this._fixedValue;let h,j,k,l;if(c)h=c.g.scaleX(+c.x),j=c.g.scaleY(+c.y),k=c._left,l=c._top;else if(f)h=f.g.scaleX(+c.x),j=f.g.scaleY(+c.y),k=f._left,l=f._top;else return;if(this._alignText(this._info.node(),h,j,null,1.5*this._focusDot.attr('r')),this._focusLineX.attr('x1',k).attr('x2',h).attr('y2',j).attr('y1',j),this._focusLineY.attr('y1',l).attr('y2',j).attr('x2',h).attr('x1',h),this._focusDot.attr('cy',j).attr('cx',h),'delta'===this.modus)if(f&&void 0!==f.x&&void 0!==f.y&&(c.x!==f.x||c.y!==f.y)){const n=f.g.scaleX(+f.x),o=f.g.scaleY(+f.y);this._deltaX.attr('x1',h).attr('x2',n),this._deltaY.attr('y1',j).attr('y2',o),o<j?(this._deltaY.attr('x1',h).attr('x2',h),this._alignText(this._infoDeltaY.node(),h,(o+j)/2,null,null,null,'middle')):(this._deltaY.attr('x1',n).attr('x2',n),this._alignText(this._infoDeltaY.node(),n,(o+j)/2,null,null,null,'middle')),o<j||n<h?(this._deltaX.attr('y1',o).attr('y2',o),this._alignText(this._infoDeltaX.node(),(n+h)/2,o,null,null,null,'middle')):(this._deltaX.attr('y1',j).attr('y2',j),this._alignText(this._infoDeltaX.node(),(n+h)/2,j,null,null,null,'middle')),this._deltaDot.attr('cy',o).attr('cx',n)}else this._hideDelta();this._svg.selectAll('g,line,text,path,rect').classed('style-scope',!0).classed('device-chart',!0)}}_alignText(c,f,h,j,k,l,n){j=j||0,k=k||0;const o=c.getBBox(),r=this._height,u=this._width;let v=l||'middle',w=n||'ideographic',z=j,A=k;'middle'===v?z+=o.width/2:'end '===v?z+=o.width:void 0;'ideographic'===w?A+=o.height:'middle'===w?A+=o.height/2:'hanging'===w?A-=o.height:void 0;0>=h-A?(w='hanging',h=A):h+A>r&&(h=r-A),f+z>=u?(v='end',f=u-z):0>=f-z&&(v='start',f=z),c.setAttribute('x',f+j),c.setAttribute('y',h-k),c.setAttribute('text-anchor',v),c.setAttribute('alignment-baseline',w)}_modusChanged(c){switch(c){case'zoom':break;case'delta':break;case'integral':break;default:}this._fixedValue=null,this._focusedValue=null}_dotClicked(c){const f=this._zoom.node().__zoom,h=this._fixedValue;let j,k,l,n;switch(this.modus){case'hold':if(!(h&&void 0!==h.x&&void 0!==h.y&&h.x===c.x&&h.y===c.y)){if(this._fixedValue=c,n='hold'===this.modus&&c.g.item.color?c.g.item.color:'#fff',console.log(n),c.g.item.threshold)switch(c.g.checkExceedingState(c)){case 1:n=c.g.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:n=c.g.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusDot.attr('fill',n)}else this._fixedValue=null,this._focusDot.attr('fill','#fff'),this._hideInfo();break;case'zoom':j=c.g.scaleX(+c.x)-this._width/6,k=(c.g.scaleY(+c.y)||0)-this._height/6,l=3*f.k,k=(f.y-k)/f.k,j=(f.x-j)/f.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(l).translate(j,k));break;case'delta':h&&h.x!==void 0&&h.y!==void 0&&h.x===c.x&&h.y===c.y?(this._fixedValue=null,this._hideDelta(),this._deltaDot.attr('fill','#fff')):(this._fixedValue=c,this._deltaDot.datum(c).attr('cx',o=>{return o.g.scaleX(o.x)}).attr('cy',o=>{return o.g.scaleY(o.y)}).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));}this._updateInfo()}closeMenu(){this.showMenu=!1}changeInterpolation(c){this._graphs.forEach(f=>{f&&f._isAttached&&f.set('interpolation',c)})}_onAxisBrushEnd(c){if(!(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)){const f=d3.event.selection;if(f){if(!this.multiAxesY&&!this.multiAxesX)return'x'===c&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===c&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));const h='y'===c;let j,k,l,n,o;h&&(j=f.map(this.scaleY.invert,this.scaleY).sort((r,u)=>{return r>u}),this._graphs.forEach(r=>{r.scaleY.domain(j).nice(),r.axisGeneratorY.scale(r.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(j).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),k=this._zoom.node().__zoom,l=k.k*this._height/(f[1]-f[0]),n=(k.y-f[0])/k.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(l).translate(0,n))),h||(j=f.map(this.scaleX.invert,this.scaleX).sort((r,u)=>{return r>u}),this._graphs.forEach(r=>{r.scaleX.domain(j),r.axisGeneratorX.scale(r.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),k=this._zoom.node().__zoom,l=k.k*this._width/(f[1]-f[0]),o=(k.x-f[0])/k.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(l).translate(o,0))),this._graphs.forEach(r=>{r.redraw()}),this._updateInfo()}}}_onZoomed(){if(!(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)){const c=d3.event.transform;if(this.domainX&&this.domainY){const f=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),h=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());let j;this.multiAxesX||(j=f.domain(),this._graphs.forEach(k=>{k.scaleX.domain(j),k.axisGeneratorX.scale(k.scaleX)}),this.scaleX.domain(j),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.hasGrid&&this.gridX.call(this.gridGeneratorX.scale(this.scaleX))),this.multiAxesY||(j=h.domain(),this._graphs.forEach(k=>{k.scaleY.domain(j),k.axisGeneratorY.scale(k.scaleY)}),this.scaleY.domain(j),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.hasGrid&&this.gridY.call(this.gridGeneratorY.scale(this.scaleY))),this._graphs.forEach(k=>{k.redraw()}),this._isZoomed=1!==c.k||0!==c.x||0!==c.y,this._updateInfo()}}}_onAxisClicked(c){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((c._isBrushed||this._isZoomed)&&this._resetZoom())):void super._onAxisClicked(c)}_onAxisContextMenu(c){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():super._onAxisContextMenu(c),this._debouncedHideInfo()}toggleOptions(){this.showControl=!this.showControl}_resetZoom(c){d3.event?d3.event.preventDefault():c&&c.preventDefault&&c.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._graphs.forEach(f=>{f.axisX._isBrushed=!1,f.axisY._isBrushed=!1,f.domainX&&f.domainX.some(h=>{return h===void 0||null===h})&&f.scaleX.domain(f.domainX),f.domainY&&f.domainY.some(h=>{return h===void 0||null===h})&&f.scaleY.domain(f.domainY).nice(),f.axisX.transition().call(f.axisGeneratorX.scale(f.scaleX)),f.axisY.transition().call(f.axisGeneratorY.scale(f.scaleY))}),this.autoHideInfoDisabled||this._hideInfo(),this._redomain()}_openExportDialog(){if(!window._exportChartDialog){const c=customElements.get('dialog-chart-export');window._exportChartDialog=new c(this),document.body.appendChild(window._exportChartDialog)}else window._exportChartDialog.setChartElement(this);window._exportChartDialog.open()}}customElements.define(DeviceChart.is,DeviceChart);</script></dom-module></div></body></html>