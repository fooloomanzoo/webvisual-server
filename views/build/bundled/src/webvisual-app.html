<html><head></head><body><div hidden="" by-polymer-bundler=""><script>(function(){'use strict';const a=window.Polymer;window.Polymer=function(a){return window.Polymer._polymerFn(a)},a&&Object.assign(Polymer,a),window.Polymer._polymerFn=function(){throw new Error('Load polymer.html to use the Polymer() function.')},window.Polymer.version='2.6.0',window.JSCompiler_renameProperty=function(a){return a}})();</script><script>(function(){'use strict';function a(a,d){if(a&&e.test(a))return a;if(void 0===b){b=!1;try{const a=new URL('b','http://a');a.pathname='c%20d',b='http://a/c%20d'===a.href}catch(a){}}return(d||(d=document.baseURI||window.location.href),b)?new URL(a,d).href:(c||(c=document.implementation.createHTMLDocument('temp'),c.base=c.createElement('base'),c.head.appendChild(c.base),c.anchor=c.createElement('a'),c.body.appendChild(c.anchor)),c.base.href=d,c.anchor.href=a,c.anchor.href||a)}let b,c,d=/(url\()([^)]*)(\))/g,e=/(^\/)|(^#)|(^[\w-\d]*:)/;Polymer.ResolveUrl={resolveCss:function(b,c){return b.replace(d,function(b,d,e,f){return d+'\''+a(e.replace(/["']/g,''),c)+'\''+f})},resolveUrl:a,pathFromUrl:function(a){return a.substring(0,a.lastIndexOf('/')+1)}}})();</script><script>(function(){'use strict';Polymer.Settings=Polymer.Settings||{},Polymer.Settings.useShadow=!window.ShadyDOM,Polymer.Settings.useNativeCSSProperties=!(window.ShadyCSS&&!window.ShadyCSS.nativeCss),Polymer.Settings.useNativeCustomElements=!window.customElements.polyfillWrapFlushCallback;let a=Polymer.rootPath||Polymer.ResolveUrl.pathFromUrl(document.baseURI||window.location.href);Polymer.rootPath=a,Polymer.setRootPath=function(a){Polymer.rootPath=a};let b=Polymer.sanitizeDOMValue;Polymer.sanitizeDOMValue=b,Polymer.setSanitizeDOMValue=function(a){Polymer.sanitizeDOMValue=a};Polymer.passiveTouchGestures=!1,Polymer.setPassiveTouchGestures=function(a){Polymer.passiveTouchGestures=a}})();</script><script>(function(){'use strict';function a(){}let b=0;a.prototype.__mixinApplications,a.prototype.__mixinSet,Polymer.dedupingMixin=function(a){let c=a.__mixinApplications;c||(c=new WeakMap,a.__mixinApplications=c);let d=b++;return function(b){let e=b.__mixinSet;if(e&&e[d])return b;let f=c,g=f.get(b);g||(g=a(b),f.set(b,g));let h=Object.create(g.__mixinSet||e||null);return h[d]=!0,g.__mixinSet=h,g}}})();</script><script>(function(){'use strict';function a(a){const b=customElements.get('dom-module');return b?b.import(a):null}function b(a){let b=a.body?a.body:a;const c=Polymer.ResolveUrl.resolveCss(b.textContent,a.baseURI),d=document.createElement('style');return d.textContent=c,d}const c='shady-unscoped';const d={stylesFromModules(a){const b=a.trim().split(/\s+/),c=[];for(let d=0;d<b.length;d++)c.push(...this.stylesFromModule(b[d]));return c},stylesFromModule(b){const c=a(b);if(!c)return console.warn('Could not find style data in module named',b),[];if(void 0===c._styles){const a=[...this._stylesFromModuleImports(c)],b=c.querySelector('template');b&&a.push(...this.stylesFromTemplate(b,c.assetpath)),c._styles=a}return c._styles},stylesFromTemplate(a,b){if(!a._styles){const c=[],d=a.content.querySelectorAll('style');for(let a=0;a<d.length;a++){let f=d[a],e=f.getAttribute('include');e&&c.push(...this.stylesFromModules(e).filter(function(a,b,c){return c.indexOf(a)===b})),b&&(f.textContent=Polymer.ResolveUrl.resolveCss(f.textContent,b)),c.push(f)}a._styles=c}return a._styles},stylesFromModuleImports(b){let c=a(b);return c?this._stylesFromModuleImports(c):[]},_stylesFromModuleImports(a){const d=[],e=a.querySelectorAll('link[rel=import][type~=css]');for(let f,g=0;g<e.length;g++)if(f=e[g],f.import){const a=f.import,e=f.hasAttribute(c);if(e&&!a._unscopedStyle){const d=b(a);d.setAttribute(c,''),a._unscopedStyle=d}else a._style||(a._style=b(a));d.push(e?a._unscopedStyle:a._style)}return d},cssFromModules(a){let b=a.trim().split(/\s+/),c='';for(let d=0;d<b.length;d++)c+=this.cssFromModule(b[d]);return c},cssFromModule(b){let c=a(b);if(c&&void 0===c._cssText){let a=this._cssFromModuleImports(c),b=c.querySelector('template');b&&(a+=this.cssFromTemplate(b,c.assetpath)),c._cssText=a||null}return c||console.warn('Could not find style data in module named',b),c&&c._cssText||''},cssFromTemplate(a,b){let c='';const d=this.stylesFromTemplate(a,b);for(let f,e=0;e<d.length;e++)f=d[e],f.parentNode&&f.parentNode.removeChild(f),c+=f.textContent;return c},cssFromModuleImports(b){let c=a(b);return c?this._cssFromModuleImports(c):''},_cssFromModuleImports(a){let b='',c=this._stylesFromModuleImports(a);for(let d=0;d<c.length;d++)b+=c[d].textContent;return b}};Polymer.StyleGather=d})();</script><script>(function(){'use strict';function a(a){return c[a]||d[a.toLowerCase()]}function b(a){a.querySelector('style')&&console.warn('dom-module %s has style outside template',a.id)}let c={},d={};class e extends HTMLElement{static get observedAttributes(){return['id']}static import(b,c){if(b){let d=a(b);return d&&c?d.querySelector(c):d}return null}attributeChangedCallback(a,b,c){b!==c&&this.register()}get assetpath(){if(!this.__assetpath){const a=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,b=Polymer.ResolveUrl.resolveUrl(this.getAttribute('assetpath')||'',a.baseURI);this.__assetpath=Polymer.ResolveUrl.pathFromUrl(b)}return this.__assetpath}register(a){a=a||this.id,a&&(this.id=a,c[a]=this,d[a.toLowerCase()]=this,b(this))}}e.prototype.modules=c,customElements.define('dom-module',e),Polymer.DomModule=e})();</script><script>(function(){'use strict';const a={isPath:function(a){return 0<=a.indexOf('.')},root:function(a){let b=a.indexOf('.');return-1===b?a:a.slice(0,b)},isAncestor:function(a,b){return 0===a.indexOf(b+'.')},isDescendant:function(a,b){return 0===b.indexOf(a+'.')},translate:function(a,b,c){return b+c.slice(a.length)},matches:function(a,b){return a===b||this.isAncestor(a,b)||this.isDescendant(a,b)},normalize:function(a){if(Array.isArray(a)){let b=[];for(let c,d=0;d<a.length;d++){c=a[d].toString().split('.');for(let a=0;a<c.length;a++)b.push(c[a])}return b.join('.')}return a},split:function(a){return Array.isArray(a)?this.normalize(a).split('.'):a.toString().split('.')},get:function(a,b,c){let d=a,e=this.split(b);for(let f=0;f<e.length;f++){if(!d)return;let a=e[f];d=d[a]}return c&&(c.path=e.join('.')),d},set:function(a,b,c){let d=a,e=this.split(b),f=e[e.length-1];if(1<e.length){for(let a,b=0;b<e.length-1;b++)if(a=e[b],d=d[a],!d)return;d[f]=c}else d[b]=c;return e.join('.')}};a.isDeep=a.isPath,Polymer.Path=a})();</script><script>(function(){'use strict';const a={},b=/-[a-z]/g,c=/([A-Z])/g,d={dashToCamelCase(c){return a[c]||(a[c]=0>c.indexOf('-')?c:c.replace(b,(a)=>a[1].toUpperCase()))},camelToDashCase(b){return a[b]||(a[b]=b.replace(c,'-$1').toLowerCase())}};Polymer.CaseMap=d})();</script><script>(function(){'use strict';let a=0,b=0,c=[],d=0,e=document.createTextNode('');new window.MutationObserver(function(){const a=c.length;for(let b,d=0;d<a;d++)if(b=c[d],b)try{b()}catch(a){setTimeout(()=>{throw a})}c.splice(0,a),b+=a}).observe(e,{characterData:!0}),Polymer.Async={timeOut:{after(a){return{run(b){return window.setTimeout(b,a)},cancel(a){window.clearTimeout(a)}}},run(a,b){return window.setTimeout(a,b)},cancel(a){window.clearTimeout(a)}},animationFrame:{run(a){return window.requestAnimationFrame(a)},cancel(a){window.cancelAnimationFrame(a)}},idlePeriod:{run(a){return window.requestIdleCallback?window.requestIdleCallback(a):window.setTimeout(a,16)},cancel(a){window.cancelIdleCallback?window.cancelIdleCallback(a):window.clearTimeout(a)}},microTask:{run(b){return e.textContent=d++,c.push(b),a++},cancel(a){const d=a-b;if(0<=d){if(!c[d])throw new Error('invalid async handle: '+a);c[d]=null}}}}})();</script><script>(function(){'use strict';const a=Polymer.Async.microTask;Polymer.PropertiesChanged=Polymer.dedupingMixin((b)=>{return class extends b{static createProperties(a){const b=this.prototype;for(let c in a)c in b||b._createPropertyAccessor(c)}static attributeNameForProperty(a){return a.toLowerCase()}static typeForProperty(){}_createPropertyAccessor(a,b){this._addPropertyToAttributeMap(a),this.hasOwnProperty('__dataHasAccessor')||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[a]||(this.__dataHasAccessor[a]=!0,this._definePropertyAccessor(a,b))}_addPropertyToAttributeMap(a){if(this.hasOwnProperty('__dataAttributes')||(this.__dataAttributes=Object.assign({},this.__dataAttributes)),!this.__dataAttributes[a]){const b=this.constructor.attributeNameForProperty(a);this.__dataAttributes[b]=a}}_definePropertyAccessor(a,b){Object.defineProperty(this,a,{get(){return this._getProperty(a)},set:b?function(){}:function(b){this._setProperty(a,b)}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let a in this.__dataHasAccessor)this.hasOwnProperty(a)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[a]=this[a],delete this[a])}_initializeInstanceProperties(a){Object.assign(this,a)}_setProperty(a,b){this._setPendingProperty(a,b)&&this._invalidateProperties()}_getProperty(a){return this.__data[a]}_setPendingProperty(a,b){let c=this.__data[a],d=this._shouldPropertyChange(a,b,c);return d&&(!this.__dataPending&&(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(a in this.__dataOld)&&(this.__dataOld[a]=c),this.__data[a]=b,this.__dataPending[a]=b),d}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,a.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){const a=this.__data,b=this.__dataPending,c=this.__dataOld;this._shouldPropertiesChange(a,b,c)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(a,b,c))}_shouldPropertiesChange(a,b){return!!b}_propertiesChanged(){}_shouldPropertyChange(a,b,c){return c!==b&&(c===c||b===b)}attributeChangedCallback(a,b,c){b!==c&&this._attributeToProperty(a,c),super.attributeChangedCallback&&super.attributeChangedCallback(a,b,c)}_attributeToProperty(a,b,c){if(!this.__serializing){const d=this.__dataAttributes,e=d&&d[a]||a;this[e]=this._deserializeValue(b,c||this.constructor.typeForProperty(e))}}_propertyToAttribute(a,b,c){this.__serializing=!0,c=3>arguments.length?this[a]:c,this._valueToNodeAttribute(this,c,b||this.constructor.attributeNameForProperty(a)),this.__serializing=!1}_valueToNodeAttribute(a,b,c){const d=this._serializeValue(b);d===void 0?a.removeAttribute(c):a.setAttribute(c,d)}_serializeValue(a){switch(typeof a){case'boolean':return a?'':void 0;default:return null==a?void 0:a.toString();}}_deserializeValue(a,b){return b===Boolean?null!==a:b===Number?+a:a}}})})();</script><script>(function(){'use strict';function a(a,b){if(!c[b]){let c=a[b];c!==void 0&&(a.__data?a._setPendingProperty(b,c):(a.__dataProto?!a.hasOwnProperty(JSCompiler_renameProperty('__dataProto',a))&&(a.__dataProto=Object.create(a.__dataProto)):a.__dataProto={},a.__dataProto[b]=c))}}let b=Polymer.CaseMap;const c={};for(let a=HTMLElement.prototype;a;){let b=Object.getOwnPropertyNames(a);for(let a=0;a<b.length;a++)c[b[a]]=!0;a=Object.getPrototypeOf(a)}Polymer.PropertyAccessors=Polymer.dedupingMixin((c)=>{const d=Polymer.PropertiesChanged(c);return class extends d{static createPropertiesForAttributes(){let a=this.observedAttributes;for(let c=0;c<a.length;c++)this.prototype._createPropertyAccessor(b.dashToCamelCase(a[c]))}static attributeNameForProperty(a){return b.camelToDashCase(a)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(a){for(let b in a)this._setProperty(b,a[b])}_ensureAttribute(a,b){const c=this;c.hasAttribute(a)||this._valueToNodeAttribute(c,b,a)}_serializeValue(a){switch(typeof a){case'object':if(a instanceof Date)return a.toString();if(a)try{return JSON.stringify(a)}catch(a){return''}default:return super._serializeValue(a);}}_deserializeValue(a,b){let c;switch(b){case Object:try{c=JSON.parse(a)}catch(b){c=a}break;case Array:try{c=JSON.parse(a)}catch(b){c=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${a}`)}break;case Date:c=isNaN(a)?a+'':+a,c=new Date(c);break;default:c=super._deserializeValue(a,b);}return c}_definePropertyAccessor(b,c){a(this,b),super._definePropertyAccessor(b,c)}_hasAccessor(a){return this.__dataHasAccessor&&this.__dataHasAccessor[a]}_isPropertyPending(a){return!!(this.__dataPending&&a in this.__dataPending)}}})})();</script><script>(function(){'use strict';function a(a){let b=a.getAttribute('is');if(b&&g[b]){let c=a;for(c.removeAttribute('is'),a=c.ownerDocument.createElement(b),c.parentNode.replaceChild(a,c),a.appendChild(c);c.attributes.length;)a.setAttribute(c.attributes[0].name,c.attributes[0].value),c.removeAttribute(c.attributes[0].name)}return a}function b(a,c){let d=c.parentInfo&&b(a,c.parentInfo);if(d){for(let a=d.firstChild,b=0;a;a=a.nextSibling)if(c.parentIndex===b++)return a;}else return a}function c(a,b,c,d){d.id&&(b[d.id]=c)}function d(a,b,c){if(c.events&&c.events.length)for(let d,e=0,f=c.events;e<f.length&&(d=f[e]);e++)a._addMethodEventListenerToNode(b,d.name,d.value,a)}function e(a,b,c){c.templateInfo&&(b._templateInfo=c.templateInfo)}function f(a,b,c){a=a._methodHost||a;return function(b){a[c]?a[c](b,b.detail):console.warn('listener method `'+c+'` not defined')}}const g={"dom-if":!0,"dom-repeat":!0};Polymer.TemplateStamp=Polymer.dedupingMixin((g)=>{return class extends g{static _parseTemplate(a,b){if(!a._templateInfo){let c=a._templateInfo={};c.nodeInfoList=[],c.stripWhiteSpace=b&&b.stripWhiteSpace||a.hasAttribute('strip-whitespace'),this._parseTemplateContent(a,c,{parent:null})}return a._templateInfo}static _parseTemplateContent(a,b,c){return this._parseTemplateNode(a.content,b,c)}static _parseTemplateNode(a,b,c){let d,e=a;return'template'!=e.localName||e.hasAttribute('preserve-content')?'slot'===e.localName&&(b.hasInsertionPoint=!0):d=this._parseTemplateNestedTemplate(e,b,c)||d,e.firstChild&&(d=this._parseTemplateChildNodes(e,b,c)||d),e.hasAttributes&&e.hasAttributes()&&(d=this._parseTemplateNodeAttributes(e,b,c)||d),d}static _parseTemplateChildNodes(b,c,d){if('script'!==b.localName&&'style'!==b.localName)for(let e,f=b.firstChild,g=0;f;f=e){if('template'==f.localName&&(f=a(f)),e=f.nextSibling,f.nodeType===Node.TEXT_NODE){for(let a=e;a&&a.nodeType===Node.TEXT_NODE;)f.textContent+=a.textContent,e=a.nextSibling,b.removeChild(a),a=e;if(c.stripWhiteSpace&&!f.textContent.trim()){b.removeChild(f);continue}}let h={parentIndex:g,parentInfo:d};this._parseTemplateNode(f,c,h)&&(h.infoIndex=c.nodeInfoList.push(h)-1),f.parentNode&&g++}}static _parseTemplateNestedTemplate(a,b,c){let d=this._parseTemplate(a,b),e=d.content=a.content.ownerDocument.createDocumentFragment();return e.appendChild(a.content),c.templateInfo=d,!0}static _parseTemplateNodeAttributes(b,c,d){let e=!1,f=Array.from(b.attributes);for(let g,a=f.length-1;g=f[a];a--)e=this._parseTemplateNodeAttribute(b,c,d,g.name,g.value)||e;return e}static _parseTemplateNodeAttribute(a,b,c,d,e){return'on-'===d.slice(0,3)?(a.removeAttribute(d),c.events=c.events||[],c.events.push({name:d.slice(3),value:e}),!0):!('id'!==d)&&(c.id=e,!0)}static _contentForTemplate(a){let b=a._templateInfo;return b&&b.content||a.content}_stampTemplate(a){a&&!a.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(a);let f=this.constructor._parseTemplate(a),g=f.nodeInfoList,h=f.content||a.content,j=document.importNode(h,!0);j.__noInsertionPoint=!f.hasInsertionPoint;let k=j.nodeList=Array(g.length);j.$={};for(let f,h,m=0,i=g.length;m<i&&(f=g[m]);m++)h=k[m]=b(j,f),c(this,j.$,h,f),e(this,h,f),d(this,h,f);return j=j,j}_addMethodEventListenerToNode(a,b,c,d){d=d||a;let e=f(d,b,c);return this._addEventListenerToNode(a,b,e),e}_addEventListenerToNode(a,b,c){a.addEventListener(b,c)}_removeEventListenerFromNode(a,b,c){a.removeEventListener(b,c)}}})})();</script><script>(function(){'use strict';function e(e,t){let a=e[t];if(!a)a=e[t]={};else if(!e.hasOwnProperty(t))for(let r in a=e[t]=Object.create(e[t]),a){let e=a[r],t=a[r]=Array(e.length);for(let a=0;a<e.length;a++)t[a]=e[a]}return a}function t(e,t,r,n,o,d){if(t){let i=!1,s=H++;for(let p in r)a(e,t,s,p,r,n,o,d)&&(i=!0);return i}return!1}function a(e,t,a,n,o,d,s,p){let _=!1,i=s?Polymer.Path.root(n):n,h=t[i];if(h)for(let t,P=0,i=h.length;P<i&&(t=h[P]);P++)t.info&&t.info.lastRun===a||s&&!r(n,t.trigger)||(t.info&&(t.info.lastRun=a),t.fn(e,n,o,d,t.info,s,p),_=!0);return _}function r(e,t){if(t){let a=t.name;return a==e||t.structured&&Polymer.Path.isAncestor(a,e)||t.wildcard&&Polymer.Path.isDescendant(a,e)}return!0}function n(e,t,a,r,n){let o='string'===typeof n.method?e[n.method]:n.method,d=n.property;o?o.call(e,e.__data[d],r[d]):!n.dynamicFn&&console.warn('observer method `'+n.method+'` not defined')}function o(e,t,r,n,o){let i,s=e[F.NOTIFY],p=H++;for(let _ in t)t[_]&&(s&&a(e,s,p,_,r,n,o)?i=!0:o&&d(e,_,r)&&(i=!0));let _;i&&(_=e.__dataHost)&&_._invalidateProperties&&_._invalidateProperties()}function d(e,t,a){let r=Polymer.Path.root(t);if(r!==t){let n=Polymer.CaseMap.camelToDashCase(r)+'-changed';return i(e,n,a[t],t),!0}return!1}function i(e,t,a,r){let n={value:a,queueProperty:!0};r&&(n.path=r),e.dispatchEvent(new CustomEvent(t,{detail:n}))}function s(e,t,a,r,n,o){let d=o?Polymer.Path.root(t):t,s=d==t?null:t,p=s?Polymer.Path.get(e,s):e.__data[t];s&&p===void 0&&(p=a[t]),i(e,n.eventName,p,s)}function p(e,t,a,r,n){let o,d=e.detail,i=d&&d.path;i?(r=Polymer.Path.translate(a,r,i),o=d&&d.value):o=e.target[a],o=n?!o:o,t[F.READ_ONLY]&&t[F.READ_ONLY][r]||!t._setPendingPropertyOrPath(r,o,!0,!!i)||d&&d.queueProperty||t._invalidateProperties()}function _(e,t,a,r,n){let o=e.__data[t];Polymer.sanitizeDOMValue&&(o=Polymer.sanitizeDOMValue(o,n.attrName,'attribute',e)),e._propertyToAttribute(t,n.attrName,o)}function l(e,a,r,n){let o=e[F.COMPUTE];if(o)for(let d=a;t(e,o,d,r,n);)Object.assign(r,e.__dataOld),Object.assign(a,e.__dataPending),d=e.__dataPending,e.__dataPending=null}function h(e,t,a,r,n){let o=N(e,t,a,r,n),d=n.methodInfo;e.__dataHasAccessor&&e.__dataHasAccessor[d]?e._setPendingProperty(d,o,!0):e[d]=o}function P(e,t,r){let n=e.__dataLinkedPaths;if(n){let o;for(let d in n){let a=n[d];Polymer.Path.isDescendant(d,t)?(o=Polymer.Path.translate(d,a,t),e._setPendingPropertyOrPath(o,r,!0,!0)):Polymer.Path.isDescendant(a,t)&&(o=Polymer.Path.translate(a,d,t),e._setPendingPropertyOrPath(o,r,!0,!0))}}}function f(e,t,a,r,n,o,d){a.bindings=a.bindings||[];let s={kind:r,target:n,parts:o,literal:d,isCompound:1!==o.length};if(a.bindings.push(s),y(s)){let{event:e,negate:t}=s.parts[0];s.listenerEvent=e||D.camelToDashCase(n)+'-changed',s.listenerNegate=t}let p=t.nodeInfoList.length;for(let _,l=0;l<s.parts.length;l++)_=s.parts[l],_.compoundIndex=l,g(e,t,s,_,p)}function g(e,t,a,r,n){if(!r.literal)if('attribute'===a.kind&&'-'===a.target[0])console.warn('Cannot set attribute '+a.target+' because "-" is not a valid attribute starting character');else{let o=r.dependencies,d={index:n,binding:a,part:r,evaluator:e};for(let a,r=0;r<o.length;r++)a=o[r],'string'==typeof a&&(a=A(a),a.wildcard=!0),e._addTemplatePropertyEffect(t,a.rootProperty,{fn:c,info:d,trigger:a})}}function c(e,t,a,r,n,o,d){let i=d[n.index],s=n.binding,p=n.part;if(o&&p.source&&t.length>p.source.length&&'property'==s.kind&&!s.isCompound&&i.__isPropertyEffectsClient&&i.__dataHasAccessor&&i.__dataHasAccessor[s.target]){let r=a[t];t=Polymer.Path.translate(p.source,s.target,t),i._setPendingPropertyOrPath(t,r,!1,!0)&&e._enqueueClient(i)}else{let d=n.evaluator._evaluateBinding(e,p,t,a,r,o);u(e,i,s,p,d)}}function u(e,t,a,r,n){if(n=m(t,n,a,r),Polymer.sanitizeDOMValue&&(n=Polymer.sanitizeDOMValue(n,a.target,a.kind,t)),'attribute'==a.kind)e._valueToNodeAttribute(t,n,a.target);else{let r=a.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[r]?(!t[F.READ_ONLY]||!t[F.READ_ONLY][r])&&t._setPendingProperty(r,n)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,r,n)}}function m(e,t,a,r){if(a.isCompound){let n=e.__dataCompoundStorage[a.target];n[r.compoundIndex]=t,t=n.join('')}return'attribute'!==a.kind&&('textContent'===a.target||'value'===a.target&&('input'===e.localName||'textarea'===e.localName))&&(t=void 0==t?'':t),t}function y(e){return!!e.target&&'attribute'!=e.kind&&'text'!=e.kind&&!e.isCompound&&'{'===e.parts[0].mode}function E(e,t){let{nodeList:a,nodeInfoList:r}=t;if(r.length)for(let t=0;t<r.length;t++){let n=r[t],o=a[t],d=n.bindings;if(d)for(let t,a=0;a<d.length;a++)t=d[a],C(o,t),T(o,e,t);o.__dataHost=e}}function C(e,t){if(t.isCompound){let a=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),r=t.parts,n=Array(r.length);for(let e=0;e<r.length;e++)n[e]=r[e].literal;let o=t.target;a[o]=n,t.literal&&'property'==t.kind&&(e[o]=t.literal)}}function T(e,t,a){if(a.listenerEvent){let r=a.parts[0];e.addEventListener(a.listenerEvent,function(n){p(n,t,a.target,r.source,r.negate)})}}function O(e,t,a,r,n,o){o=t.static||o&&('object'!==typeof o||o[t.methodName]);let d={methodName:t.methodName,args:t.args,methodInfo:n,dynamicFn:o};for(let s,p=0;p<t.args.length&&(s=t.args[p]);p++)s.literal||e._addPropertyEffect(s.rootProperty,a,{fn:r,info:d,trigger:s});o&&e._addPropertyEffect(t.methodName,a,{fn:r,info:d})}function N(e,t,a,r,n){let o=e._methodHost||e,d=o[n.methodName];if(d){let r=L(e.__data,n.args,t,a);return d.apply(o,r)}n.dynamicFn||console.warn('method `'+n.methodName+'` not defined')}function b(e){let t='';for(let a,r=0;r<e.length;r++)a=e[r].literal,t+=a||'';return t}function v(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e=t[1],a={methodName:e,static:!0,args:M};if(t[2].trim()){let e=t[2].replace(/\\,/g,'&comma;').split(',');return I(e,a)}return a}return null}function I(e,t){return t.args=e.map(function(e){let a=A(e);return a.literal||(t.static=!1),a},this),t}function A(e){let t=e.trim().replace(/&comma;/g,',').replace(/\\(.)/g,'$1'),r={name:t,value:'',literal:!1},a=t[0];return'-'===a&&(a=t[1]),'0'<=a&&'9'>=a&&(a='#'),'\''===a||'"'===a?(r.value=t.slice(1,-1),r.literal=!0):'#'===a?(r.value=+t,r.literal=!0):void 0,(r.literal||(r.rootProperty=Polymer.Path.root(t),r.structured=Polymer.Path.isPath(t),r.structured&&(r.wildcard='.*'==t.slice(-2),r.wildcard&&(r.name=t.slice(0,-2)))),r)}function L(e,t,a,r){let n=[];for(let o=0,d=t.length;o<d;o++){let d,i=t[o],s=i.name;if(i.literal?d=i.value:i.structured?(d=Polymer.Path.get(e,s),void 0===d&&(d=r[s])):d=e[s],i.wildcard){let e=0===s.indexOf(a+'.'),t=0===a.indexOf(s)&&!e;n[o]={path:t?a:s,value:t?r[a]:d,base:d}}else n[o]=d}return n}function R(e,t,a,r){let n=a+'.splices';e.notifyPath(n,{indexSplices:r}),e.notifyPath(a+'.length',t.length),e.__data[n]={indexSplices:null}}function x(e,t,a,r,n,o){R(e,t,a,[{index:r,addedCount:n,removed:o,object:t,type:'splice'}])}function k(e){return e[0].toUpperCase()+e.substring(1)}const D=Polymer.CaseMap;let H=0;const F={COMPUTE:'__computeEffects',REFLECT:'__reflectEffects',NOTIFY:'__notifyEffects',PROPAGATE:'__propagateEffects',OBSERVE:'__observeEffects',READ_ONLY:'__readOnly'},Y=/[A-Z]/;let S;const M=[],w='(?:[a-zA-Z_$][\\w.:$\\-*]*)',z='(?:('+w+'|'+'(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)'+'|'+('(?:'+'(?:\'(?:[^\'\\\\]|\\\\.)*\')'+'|'+'(?:"(?:[^"\\\\]|\\\\.)*")'+')')+')\\s*)',B=/(\[\[|{{)\s*(?:(!)\s*)?((?:[a-zA-Z_$][\w.:$\-*]*)\s*(?:\(\s*(?:(?:(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*)(?:,\s*(?:((?:[a-zA-Z_$][\w.:$\-*]*)|(?:[-+]?[0-9]*\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\]|\\.)*')|(?:"(?:[^"\\]|\\.)*")))\s*))*)?)\)\s*)?)(?:]]|}})/g;Polymer.PropertyEffects=Polymer.dedupingMixin((a)=>{const r=Polymer.TemplateStamp(Polymer.PropertyAccessors(a));class d extends r{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataCounter=0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo}get PROPERTY_EFFECT_TYPES(){return F}_initializeProperties(){super._initializeProperties(),V.registerHost(this),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[F.READ_ONLY];for(let a in e)t&&t[a]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[a]=this.__dataPending[a]=e[a])}_addPropertyEffect(t,a,r){this._createPropertyAccessor(t,a==F.READ_ONLY);let n=e(this,a)[t];n||(n=this[a][t]=[]),n.push(r)}_removePropertyEffect(t,a,r){let n=e(this,a)[t],o=n.indexOf(r);0<=o&&n.splice(o,1)}_hasPropertyEffect(e,t){let a=this[t];return!!(a&&a[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,F.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,F.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,F.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,F.COMPUTE)}_setPendingPropertyOrPath(e,t,a,r){if(r||Polymer.Path.root(Array.isArray(e)?e[0]:e)!==e){if(!r){let a=Polymer.Path.get(this,e);if(e=Polymer.Path.set(this,e,t),!e||!super._shouldPropertyChange(e,t,a))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,a))return P(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,a);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,a){(a!==e[t]||'object'==typeof a)&&(e[t]=a)}_setPendingProperty(e,t,a){let r=this.__dataHasPaths&&Polymer.Path.isPath(e),n=r?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,n[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),r?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(r||this[F.NOTIFY]&&this[F.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=a),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushProperties(){this.__dataCounter++,super._flushProperties(),this.__dataCounter--}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t,a=0;a<e.length;a++)t=e[a],t.__dataEnabled?t.__dataPending&&t._flushProperties():t._enableProperties()}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let a in e)!t&&this[F.READ_ONLY]&&this[F.READ_ONLY][a]||this._setPendingPropertyOrPath(a,e[a],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,a,r){let n=this.__dataHasPaths;this.__dataHasPaths=!1,l(this,a,r,n);let d=this.__dataToNotify;this.__dataToNotify=null,this._propagatePropertyChanges(a,r,n),this._flushClients(),t(this,this[F.REFLECT],a,r,n),t(this,this[F.OBSERVE],a,r,n),d&&o(this,d,a,r,n),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,a,r){this[F.PROPAGATE]&&t(this,this[F.PROPAGATE],e,a,r);for(let n=this.__templateInfo;n;)t(this,n.propertyEffects,e,a,r,n.nodeList),n=n.nextTemplateInfo}linkPaths(e,t){e=Polymer.Path.normalize(e),t=Polymer.Path.normalize(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Polymer.Path.normalize(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let a={path:''},r=Polymer.Path.get(this,e,a);R(this,r,a.path,t)}get(e,t){return Polymer.Path.get(t||this,e)}set(e,t,a){a?Polymer.Path.set(a,e,t):(!this[F.READ_ONLY]||!this[F.READ_ONLY][e])&&this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let a={path:''},r=Polymer.Path.get(this,e,a),n=r.length,o=r.push(...t);return t.length&&x(this,r,a.path,n,t.length,[]),o}pop(e){let t={path:''},a=Polymer.Path.get(this,e,t),r=!!a.length,n=a.pop();return r&&x(this,a,t.path,a.length,0,[n]),n}splice(e,t,a,...r){var n=Math.floor;let o={path:''},d=Polymer.Path.get(this,e,o);0>t?t=d.length-n(-t):t&&(t=n(t));let i;return i=2===arguments.length?d.splice(t):d.splice(t,a,...r),(r.length||i.length)&&x(this,d,o.path,t,r.length,i),i}shift(e){let t={path:''},a=Polymer.Path.get(this,e,t),r=!!a.length,n=a.shift();return r&&x(this,a,t.path,0,0,[n]),n}unshift(e,...t){let a={path:''},r=Polymer.Path.get(this,e,a),n=r.unshift(...t);return t.length&&x(this,r,a.path,0,t.length,[]),n}notifyPath(e,t){let a;if(1==arguments.length){let r={path:''};t=Polymer.Path.get(this,e,r),a=r.path}else a=Array.isArray(e)?Polymer.Path.normalize(e):e;this._setPendingPropertyOrPath(a,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){this._addPropertyEffect(e,F.READ_ONLY),t&&(this['_set'+k(e)]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,a){let r={property:e,method:t,dynamicFn:!!a};this._addPropertyEffect(e,F.OBSERVE,{fn:n,info:r,trigger:{name:e}}),a&&this._addPropertyEffect(t,F.OBSERVE,{fn:n,info:r,trigger:{name:t}})}_createMethodObserver(e,t){let a=v(e);if(!a)throw new Error('Malformed observer expression \''+e+'\'');O(this,a,F.OBSERVE,N,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,F.NOTIFY,{fn:s,info:{eventName:D.camelToDashCase(e)+'-changed',property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);'-'===t[0]?console.warn('Property '+e+' cannot be reflected to attribute '+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,F.REFLECT,{fn:_,info:{attrName:t}})}_createComputedProperty(e,t,a){let r=v(t);if(!r)throw new Error('Malformed computed expression \''+t+'\'');O(this,r,F.COMPUTE,h,e,a)}static addPropertyEffect(e,t,a){this.prototype._addPropertyEffect(e,t,a)}static createPropertyObserver(e,t,a){this.prototype._createPropertyObserver(e,t,a)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,a){this.prototype._createComputedProperty(e,t,a)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let a=this.constructor._parseTemplate(e),r=this.__templateInfo==a;if(!r)for(let e in a.propertyEffects)this._createPropertyAccessor(e);if(t&&(a=Object.create(a),a.wasPreBound=r,!r&&this.__templateInfo)){let e=this.__templateInfoLast||this.__templateInfo;return this.__templateInfoLast=e.nextTemplateInfo=a,a.previousTemplateInfo=e,a}return this.__templateInfo=a}static _addTemplatePropertyEffect(e,t,a){let r=e.hostProps=e.hostProps||{};r[t]=!0;let n=e.propertyEffects=e.propertyEffects||{},o=n[t]=n[t]||[];o.push(a)}_stampTemplate(e){V.beginHosting(this);let a=super._stampTemplate(e);V.endHosting(this);let r=this._bindTemplate(e,!0);if(r.nodeList=a.nodeList,!r.wasPreBound){let e=r.childNodes=[];for(let t=a.firstChild;t;t=t.nextSibling)e.push(t)}return a.templateInfo=r,E(this,r),this.__dataReady&&t(this,r.propertyEffects,this.__data,null,!1,r.nodeList),a}_removeBoundDom(e){let t=e.templateInfo;t.previousTemplateInfo&&(t.previousTemplateInfo.nextTemplateInfo=t.nextTemplateInfo),t.nextTemplateInfo&&(t.nextTemplateInfo.previousTemplateInfo=t.previousTemplateInfo),this.__templateInfoLast==t&&(this.__templateInfoLast=t.previousTemplateInfo),t.previousTemplateInfo=t.nextTemplateInfo=null;let a=t.childNodes;for(let t,r=0;r<a.length;r++)t=a[r],t.parentNode.removeChild(t)}static _parseTemplateNode(e,t,a){let r=super._parseTemplateNode(e,t,a);if(e.nodeType===Node.TEXT_NODE){let n=this._parseBindings(e.textContent,t);n&&(e.textContent=b(n)||' ',f(this,t,a,'text','textContent',n),r=!0)}return r}static _parseTemplateNodeAttribute(e,t,a,r,n){let o=this._parseBindings(n,t);if(o){let n=r,d='property';Y.test(r)?d='attribute':'$'==r[r.length-1]&&(r=r.slice(0,-1),d='attribute');let i=b(o);return i&&'attribute'==d&&e.setAttribute(r,i),'input'===e.localName&&'value'===n&&e.setAttribute(n,''),e.removeAttribute(n),'property'===d&&(r=Polymer.CaseMap.dashToCamelCase(r)),f(this,t,a,d,r,o,i),!0}return super._parseTemplateNodeAttribute(e,t,a,r,n)}static _parseTemplateNestedTemplate(e,t,a){let r=super._parseTemplateNestedTemplate(e,t,a),n=a.templateInfo.hostProps;for(let r in n){f(this,t,a,'property','_host_'+r,[{mode:'{',source:r,dependencies:[r]}])}return r}static _parseBindings(e,t){let a,r=[],n=0;for(;null!==(a=B.exec(e));){a.index>n&&r.push({literal:e.slice(n,a.index)});let o=a[1][0],d=!!a[2],i=a[3].trim(),s=!1,p='',_=-1;'{'==o&&0<(_=i.indexOf('::'))&&(p=i.substring(_+2),i=i.substring(0,_),s=!0);let l=v(i),h=[];if(l){let{args:e,methodName:a}=l;for(let t,a=0;a<e.length;a++)t=e[a],t.literal||h.push(t);let r=t.dynamicFns;(r&&r[a]||l.static)&&(h.push(a),l.dynamicFn=!0)}else h.push(i);r.push({source:i,mode:o,negate:d,customEvent:s,signature:l,dependencies:h,event:p}),n=B.lastIndex}if(n&&n<e.length){let t=e.substring(n);t&&r.push({literal:t})}return r.length?r:null}static _evaluateBinding(e,t,a,r,n,o){let d;return d=t.signature?N(e,a,r,n,t.signature):a==t.source?o&&Polymer.Path.isPath(a)?Polymer.Path.get(e,a):e.__data[a]:Polymer.Path.get(e,t.source),t.negate&&(d=!d),d}}return S=d,d});let V={stack:[],registerHost(e){if(this.stack.length){let t=this.stack[this.stack.length-1];t._enqueueClient(e)}},beginHosting(e){this.stack.push(e)},endHosting(e){let t=this.stack.length;t&&this.stack[t-1]==e&&this.stack.pop()}}})();</script><script>(function(){'use strict';function a(a){const b={};for(let c in a){const d=a[c];b[c]='function'===typeof d?{type:d}:d}return b}Polymer.PropertiesMixin=Polymer.dedupingMixin((b)=>{function c(a){const b=Object.getPrototypeOf(a);return b.prototype instanceof f?b:null}function d(b){if(!b.hasOwnProperty(JSCompiler_renameProperty('__ownProperties',b))){let c=null;b.hasOwnProperty(JSCompiler_renameProperty('properties',b))&&b.properties&&(c=a(b.properties)),b.__ownProperties=c}return b.__ownProperties}const e=Polymer.PropertiesChanged(b);class f extends e{static get observedAttributes(){const a=this._properties;return a?Object.keys(a).map((a)=>this.attributeNameForProperty(a)):[]}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty('__finalized',this))){const a=c(this);a&&a.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const a=d(this);a&&this.createProperties(a)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty('__properties',this))){const a=c(this);this.__properties=Object.assign({},a&&a._properties,d(this))}return this.__properties}static typeForProperty(a){const b=this._properties[a];return b&&b.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return f})})();</script><script>(function(){'use strict';Polymer.ElementMixin=Polymer.dedupingMixin((a)=>{function b(a){if(!a.hasOwnProperty(JSCompiler_renameProperty('__propertyDefaults',a))){a.__propertyDefaults=null;let b=a._properties;for(let c in b){let d=b[c];'value'in d&&(a.__propertyDefaults=a.__propertyDefaults||{},a.__propertyDefaults[c]=d)}}return a.__propertyDefaults}function c(a){return a.hasOwnProperty(JSCompiler_renameProperty('__ownObservers',a))||(a.__ownObservers=a.hasOwnProperty(JSCompiler_renameProperty('observers',a))?a.observers:null),a.__ownObservers}function d(a,b,c,d){c.computed&&(c.readOnly=!0),c.computed&&!a._hasReadOnlyEffect(b)&&a._createComputedProperty(b,c.computed,d),c.readOnly&&!a._hasReadOnlyEffect(b)&&a._createReadOnlyProperty(b,!c.computed),c.reflectToAttribute&&!a._hasReflectEffect(b)&&a._createReflectedProperty(b),c.notify&&!a._hasNotifyEffect(b)&&a._createNotifyingProperty(b),c.observer&&a._createPropertyObserver(b,c.observer,d[c.observer]),a._addPropertyToAttributeMap(b)}function e(a,b,c,d){const e=b.content.querySelectorAll('style'),f=Polymer.StyleGather.stylesFromTemplate(b),g=Polymer.StyleGather.stylesFromModuleImports(c),h=b.content.firstElementChild;for(let e,f=0;f<g.length;f++)e=g[f],e.textContent=a._processStyleText(e.textContent,d),b.content.insertBefore(e,h);let j=0;for(let g=0;g<f.length;g++){let b=f[g],c=e[j];c===b?j++:(b=b.cloneNode(!0),c.parentNode.insertBefore(b,c)),b.textContent=a._processStyleText(b.textContent,d)}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(b,c)}const f=Polymer.PropertiesMixin(Polymer.PropertyEffects(a));class g extends f{static _finalizeClass(){super._finalizeClass(),this.hasOwnProperty(JSCompiler_renameProperty('is',this))&&this.is&&Polymer.telemetry.register(this.prototype);const a=c(this);a&&this.createObservers(a,this._properties);let b=this.template;if(b)if('string'===typeof b){let a=document.createElement('template');a.innerHTML=b,b=a}else b=b.cloneNode(!0);this.prototype._template=b}static createProperties(a){for(let b in a)d(this.prototype,b,a[b],a)}static createObservers(a,b){const c=this.prototype;for(let d=0;d<a.length;d++)c._createMethodObserver(a[d],b)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty('_template',this))||(this._template=Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty('_importPath',this))){const a=Polymer.DomModule&&Polymer.DomModule.import(this.is);this._importPath=a?a.assetpath:Object.getPrototypeOf(this.prototype).constructor.importPath}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){Polymer.telemetry.instanceCount++,this.constructor.finalize();const a=this.constructor.importPath;this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Polymer.rootPath,this.importPath=a;let c=b(this.constructor);if(c)for(let a in c){let b=c[a];if(!this.hasOwnProperty(a)){let c='function'==typeof b.value?b.value.call(this):b.value;this._hasAccessor(a)?this._setPendingProperty(a,c,!0):this[a]=c}}}static _processStyleText(a,b){return Polymer.ResolveUrl.resolveCss(a,b)}static _finalizeTemplate(a){const b=this.prototype._template;if(b&&!b.__polymerFinalized){b.__polymerFinalized=!0;const c=this.importPath,d=c?Polymer.ResolveUrl.resolveUrl(c):'';e(this,b,a,d),this.prototype._bindTemplate(b)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(a){if(this.attachShadow)return a?(this.shadowRoot||this.attachShadow({mode:'open'}),this.shadowRoot.appendChild(a),this.shadowRoot):null;throw new Error('ShadowDOM not available. Polymer.Element can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.')}updateStyles(a){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,a)}resolveUrl(a,b){return!b&&this.importPath&&(b=Polymer.ResolveUrl.resolveUrl(this.importPath)),Polymer.ResolveUrl.resolveUrl(a,b)}static _parseTemplateContent(a,b,c){return b.dynamicFns=b.dynamicFns||this._properties,super._parseTemplateContent(a,b,c)}}return g}),Polymer.telemetry={instanceCount:0,registrations:[],_regLog:function(a){console.log('['+a.is+']: registered')},register:function(a){this.registrations.push(a),Polymer.log&&this._regLog(a)},dumpRegistrations:function(){this.registrations.forEach(this._regLog)}},Polymer.updateStyles=function(a){window.ShadyCSS&&window.ShadyCSS.styleDocument(a)}})();</script><script>(function(){'use strict';function a(a){if(a instanceof c)return a.value;throw new Error(`non-literal value passed to Polymer.htmlLiteral: ${a}`)}function b(b){if(b instanceof HTMLTemplateElement)return b.innerHTML;if(b instanceof c)return a(b);throw new Error(`non-template value passed to Polymer.html: ${b}`)}class c{constructor(a){this.value=a.toString()}toString(){return this.value}}Polymer.html=function(a,...c){const d=document.createElement('template');return d.innerHTML=c.reduce((c,d,e)=>c+b(d)+a[e+1],a[0]),d},Polymer.htmlLiteral=function(b,...d){return new c(d.reduce((c,d,e)=>c+a(d)+b[e+1],b[0]))}})();</script><script>(function(){'use strict';const a=Polymer.ElementMixin(HTMLElement);Polymer.Element=a,Polymer.html=Polymer.html})();</script><script>function WebvisualClient(){this.nodes=new Map,this.mobile=this._testMobile(),this.locationHost='',this.nameSpace='',this.socketRoom='',this.messageId=0,this.messageMap={},this.forcedRequests=[]}WebvisualClient.prototype={createSocketConnection:function(a,b){a&&(this.locationHost!==a||this.nameSpace!==b)&&(this.locationHost=a,this.nameSpace=b,!this.webworker&&(this.webworker=new Worker('/scripts/worker.js'),this.webworker.onmessage=function(a){if(a.data){if(a.data.messageId){const b=this.messageMap[a.data.messageId];if(b)return b(a.data.response),void delete this.messageMap[a.data.messageId]}switch(a.data.type){case'initial':this.resetNodes(),this.updateNodes(a.data.values,a.data.splices);for(let a=0;a<this.forcedRequests.length;a++)this.webworker.postMessage(this.forcedRequests[a]);this.forcedRequests.length=0;break;case'update':this.updateNodes(a.data.values,a.data.splices);break;case'status':this.updateStatus(a.data.status);break;case'reload':this.reloadJob&&(clearTimeout(this.reloadJob),this.reloadJob=null),this.reloadJob=setTimeout(()=>{window.location.reload()},1500);}}}.bind(this)),this.webworker.postMessage({target:'socket',operation:'connect',args:{locationHost:this.locationHost,nameSpace:this.nameSpace}}))},setupConnection:function(a){if(a){if(this.socketRoom=a,!this.webworker)return;this.webworker.postMessage({target:'socket',operation:'setup',args:{socketRoom:this.socketRoom,mobile:this.mobile}})}},disconnect:function(){this.webworker&&this.webworker.postMessage({target:'socket',operation:'disconnect'})},assignConnector:function(a){this.connector=a},request:function(a,b){this.messageId++,this.messageMap[this.messageId]=b,a.args=a.args||{},a.args.messageId=this.messageId,this.webworker?this.webworker.postMessage(a):a.forced&&this.forcedRequests.push(a)},updateStatus:function(a){this.connector&&'sync-disabled'!==this.connector.socketStatus&&this.connector.set('socketStatus',a)},assignElement:function(a){const b=a.item.mount;b&&(!this.nodes.has(b)&&this.nodes.set(b,new Set),this.nodes.get(b).add(a))},retractElement:function(a,b){if(a&&b&&b.mount){const c=b.mount;this.nodes.has(c)&&this.nodes.get(c).delete(a)}},updateNodes:function(a,b){setTimeout(()=>{for(const c in a)this.nodes.has(c)&&this.nodes.get(c).forEach(function(d){d.spliceValues(b[c]),d.insertValues(a[c])}),delete b[c]},0)},resetNodes:function(){},_testMobile:function(){const a=window.navigator.userAgent;return /[mM]obi/i.test(a)||/[tT]ablet/i.test(a)||/[aA]ndroid/i.test(a)}},window.Webvisual=new WebvisualClient;</script><script>(function(){"use strict";function c(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function b(j){j=j.replace(w,"").replace(L,"");var a=j,b=new c;b.start=0,b.end=a.length;for(var d=b,e=0,f=a.length;e<f;e++)if("{"===a[e]){d.rules||(d.rules=[]);var h=d,g=h.rules[h.rules.length-1]||null;d=new c,d.start=e+1,d.parent=h,d.previous=g,h.rules.push(d)}else"}"===a[e]&&(d.end=e+1,d=d.parent||b);return i(b,j)}function i(h,a){var c=a.substring(h.start,h.end-1);if(h.parsedCssText=h.cssText=c.trim(),h.parent&&(c=a.substring(h.previous?h.previous.end:h.parent.start,h.start-1),c=g(c),c=c.replace(W," "),c=c.substring(c.lastIndexOf(";")+1),c=h.parsedSelector=h.selector=c.trim(),h.atRule=0===c.indexOf("@"),h.atRule?0===c.indexOf("@media")?h.type=v:c.match(S)&&(h.type=y,h.keyframesName=h.selector.split(W).pop()):h.type=0===c.indexOf("--")?u:k),c=h.rules)for(var b,f=0,d=c.length;f<d&&(b=c[f]);f++)i(b,a);return h}function g(b){return b.replace(/\\([0-9a-f]{1,6})\s/gi,function(c,a){for(c=a,a=6-c.length;a--;)c="0"+c;return"\\"+c})}function j(i,a,c){c=void 0===c?"":c;var b="";if(i.cssText||i.rules){var d,f=i.rules;if((d=f)&&(d=f[0],d=!(d&&d.selector&&0===d.selector.indexOf("--"))),d){d=0;for(var e,g=f.length;d<g&&(e=f[d]);d++)b=j(e,a,b)}else a?a=i.cssText:(a=i.cssText,a=a.replace(M,"").replace(O,""),a=a.replace(Q,"").replace(R,"")),(b=a.trim())&&(b="  "+b+"\n")}return b&&(i.selector&&(c+=i.selector+" {\n"),c+=b,i.selector&&(c+="}\n\n")),c}function d(b){(b=C[b])&&(b._applyShimCurrentVersion=b._applyShimCurrentVersion||0,b._applyShimValidatingVersion=b._applyShimValidatingVersion||0,b._applyShimNextVersion=(b._applyShimNextVersion||0)+1)}function e(b){return b._applyShimCurrentVersion===b._applyShimNextVersion}function f(b){b._applyShimValidatingVersion=b._applyShimNextVersion,b.b||(b.b=!0,t.then(function(){b._applyShimCurrentVersion=b._applyShimNextVersion,b.b=!1}))}function a(b){K=b&&b.shimcssproperties?!1:X||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function h(c){return c?("string"===typeof c&&(c=b(c)),j(c,Y)):""}function l(c){return!c.__cssRules&&c.textContent&&(c.__cssRules=b(c.textContent)),c.__cssRules||null}function m(i,a,c,b){if(i){var d=!1,j=i.type;if(b&&j===v){var f=i.selector.match(H);f&&(window.matchMedia(f[1]).matches||(d=!0))}if(j===k?a(i):c&&j===y?c(i):j===u&&(d=!0),(i=i.rules)&&!d){d=0,j=i.length;for(var h;d<j&&(h=i[d]);d++)m(h,a,c,b)}}}function n(g,a){var c=g.indexOf("var(");if(-1===c)return a(g,"","","");a:{for(var b=0,d=c+3,e=g.length;d<e;d++)if("("===g[d])b++;else if(")"===g[d]&&0===--b)break a;d=-1}return b=g.substring(c+4,d),c=g.substring(0,c),g=n(g.substring(d+1),a),d=b.indexOf(","),-1===d?a(c,b.trim(),"",g):a(c,b.substring(0,d).trim(),b.substring(d+1).trim(),g)}function o(){this.a={}}function p(){this.b=this.c=null,this.a=new o}function q(d,a){return a=a.replace($,function(a,b,c,e){return x(d,a,b,c,e)}),r(d,a)}function r(i,a){for(var c;c=G.exec(a);){var b=c[0],d=c[1];c=c.index;var e=a.slice(0,c+b.indexOf("@apply"));a=a.slice(c+b.length);var f=s(i,e);b=void 0;var h=i;d=d.replace(I,"");var g=[],j=h.a.get(d);if(j||(h.a.set(d,{}),j=h.a.get(d)),j){h.c&&(j.i[h.c]=!0);var k=j.h;for(b in k)h=f&&f[b],j=[b,": var(",d,"_-_",b],h&&j.push(",",h.replace(ba,"")),j.push(")"),ba.test(k[b])&&j.push(" !important"),g.push(j.join(""))}b=g.join("; "),a=""+e+b+a,G.lastIndex=c+b.length}return a}function s(i,a){a=a.split(";");for(var c,b,d,h={},e=0;e<a.length;e++)if((c=a[e])&&(d=c.split(":"),1<d.length)){c=d[0].trim();var f=i;b=c,d=d.slice(1).join(":");var g=aa.exec(d);g&&(g[1]?(f.b||(f.b=document.createElement("meta"),f.b.setAttribute("apply-shim-measure",""),f.b.style.all="initial",document.head.appendChild(f.b)),b=window.getComputedStyle(f.b).getPropertyValue(b)):b="apply-shim-inherit",d=b),b=d,h[c]=b}return h}function z(d,a){if(N)for(var c in a.i)c!==d.c&&N(c)}function x(i,a,c,b,d){if(b&&n(b,function(a,c){c&&i.a.get(c)&&(d="@apply "+c+";")}),!d)return a;var j=r(i,""+d),f=a.slice(0,a.indexOf("--")),h=j=s(i,j),g=i.a.get(c),k=g&&g.h;k?h=Object.assign(Object.create(k),j):i.a.set(c,h);var m,o=[],p=!1;for(m in h){var q=j[m];void 0===q&&(q="initial"),!k||m in k||(p=!0),o.push(""+c+"_-_"+m+": "+q)}return p&&z(i,g),g&&(g.h=h),b&&(f=a+";"+f),""+f+o.join("; ")+";"}function A(b){requestAnimationFrame(function(){T?T(b):(U||(U=new Promise(function(b){P=b}),"complete"===document.readyState?P():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&P()})),U.then(function(){b&&b()}))})}function D(){var b=this;this.a=null,A(function(){F(b)}),ca.invalidCallback=d}function F(b){b.a||(b.a=window.ShadyCSS.CustomStyleInterface,b.a&&(b.a.transformCallback=function(b){ca.f(b)},b.a.validateCallback=function(){requestAnimationFrame(function(){b.a.enqueued&&J(b)})}))}function J(e){if(F(e),e.a){var a=e.a.processStyles();if(e.a.enqueued){for(var c,d=0;d<a.length;d++)c=e.a.getStyleForCustomStyle(a[d]),c&&ca.f(c);e.a.enqueued=!1}}}var K,C={},k=1,y=7,v=4,u=1E3,w=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,L=/@import[^;]*;/gim,M=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,O=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,Q=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,R=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,S=/^@[^\s]*keyframes/,W=/\s+/g,t=Promise.resolve(),X=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?K=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var Y=K,$=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,G=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,H=/@media\s(.*)/,_=new Set,I=/;\s*/m,aa=/^\s*(initial)|(inherit)\s*$/,ba=/\s*!important/;o.prototype.set=function(b,a){b=b.trim(),this.a[b]={h:a,i:{}}},o.prototype.get=function(b){return b=b.trim(),this.a[b]||null};var N=null;p.prototype.o=function(b){return b=G.test(b)||$.test(b),G.lastIndex=0,$.lastIndex=0,b},p.prototype.m=function(g,a){if(void 0===g.a){for(var c,f=[],b=g.content.querySelectorAll("style"),d=0;d<b.length;d++)if(c=b[d],!c.hasAttribute("shady-unscoped"))f.push(c.textContent),c.parentNode.removeChild(c);else if(!X){var e=c.textContent;_.has(e)||(_.add(e),e=c.cloneNode(!0),document.head.appendChild(e)),c.parentNode.removeChild(c)}(f=f.join("").trim())?(b=document.createElement("style"),b.textContent=f,g.content.insertBefore(b,g.content.firstChild),f=b):f=null,g.a=f}return(g=g.a)?this.j(g,a):null},p.prototype.j=function(d,a){a=void 0===a?"":a;var c=l(d);return this.l(c,a),d.textContent=h(c),c},p.prototype.f=function(d){var e=this,a=l(d);return m(a,function(b){":root"===b.selector&&(b.selector="html"),e.g(b)}),d.textContent=h(a),a},p.prototype.l=function(d,a){var c=this;this.c=a,m(d,function(b){c.g(b)}),this.c=null},p.prototype.g=function(b){b.cssText=q(this,b.parsedCssText),":root"===b.selector&&(b.selector=":host > *")},p.prototype.detectMixin=p.prototype.o,p.prototype.transformStyle=p.prototype.j,p.prototype.transformCustomStyle=p.prototype.f,p.prototype.transformRules=p.prototype.l,p.prototype.transformRule=p.prototype.g,p.prototype.transformTemplate=p.prototype.m,p.prototype._separator="_-_",Object.defineProperty(p.prototype,"invalidCallback",{get:function(){return N},set:function(b){N=b}});var P,U=null,T=window.HTMLImports&&window.HTMLImports.whenReady||null,ca=new p;if(D.prototype.prepareTemplate=function(b,a){F(this),C[a]=b,a=ca.m(b,a),b._styleAst=a},D.prototype.styleSubtree=function(d,a){if(F(this),a)for(var c in a)null===c?d.style.removeProperty(c):d.style.setProperty(c,a[c]);if(d.shadowRoot)for(this.styleElement(d),d=d.shadowRoot.children||d.shadowRoot.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a]);else for(d=d.children||d.childNodes,a=0;a<d.length;a++)this.styleSubtree(d[a])},D.prototype.styleElement=function(d){F(this);var a,b=d.localName;a=b?-1<b.indexOf("-")?b:d.getAttribute&&d.getAttribute("is")||"":d.is,(b=C[a])&&!e(b)&&((e(b)||b._applyShimValidatingVersion!==b._applyShimNextVersion)&&(this.prepareTemplate(b,a),f(b)),(d=d.shadowRoot)&&(d=d.querySelector("style"))&&(d.__cssRules=b._styleAst,d.textContent=h(b._styleAst)))},D.prototype.styleDocument=function(b){F(this),this.styleSubtree(document.body,b)},!window.ShadyCSS||!window.ShadyCSS.ScopingShim){var V=new D,Z=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate:function(b,a){J(V),V.prepareTemplate(b,a)},styleSubtree:function(b,a){J(V),V.styleSubtree(b,a)},styleElement:function(b){J(V),V.styleElement(b)},styleDocument:function(b){J(V),V.styleDocument(b)},getComputedStyleValue:function(b,a){return(b=window.getComputedStyle(b).getPropertyValue(a))?b.trim():""},nativeCss:Y,nativeShadow:X},Z&&(window.ShadyCSS.CustomStyleInterface=Z)}window.ShadyCSS.ApplyShim=ca}).call(this);</script><script>(function(){'use strict';class a{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(a,b){this._asyncModule=a,this._callback=b,this._timer=this._asyncModule.run(()=>{this._timer=null,this._callback()})}cancel(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(b,c,d){return b instanceof a?b.cancel():b=new a,b.setConfig(c,d),b}}Polymer.Debouncer=a})();</script><script>(function(){'use strict';function a(a){return-1<r.indexOf(a)}function b(b){return a(b)||'touchend'===b?void 0:l&&u&&Polymer.passiveTouchGestures?{passive:!0}:void 0}function c(a){return y[a.localName]||!1}function d(a){let b=[...(a.labels||[])];if(!b.length){b=[];let c=a.getRootNode();if(a.id){let d=c.querySelectorAll(`label[for = ${a.id}]`);for(let a=0;a<d.length;a++)b.push(d[a])}}return b}function f(a){let b=v?['click']:r;for(let c,d=0;d<b.length;d++)c=b[d],a?(x.length=0,document.addEventListener(c,z,!0)):document.removeEventListener(c,z,!0)}function g(b){let c=b.type;if(!a(c))return!1;if('mousemove'===c){let a=void 0===b.buttons?1:b.buttons;return b instanceof window.MouseEvent&&!t&&(a=s[b.which]||0),!!(1&a)}else{let a=void 0===b.button?0:b.button;return 0===a}}function h(a){if('click'===a.type){if(0===a.detail)return!0;let b=B._findOriginalTarget(a);if(!b.nodeType||b.nodeType!==Node.ELEMENT_NODE)return!0;let c=b.getBoundingClientRect(),d=a.pageX,e=a.pageY;return!(d>=c.left&&d<=c.right&&e>=c.top&&e<=c.bottom)}return!1}function e(a){let b='auto',c=a.composedPath&&a.composedPath();if(c)for(let a,d=0;d<c.length;d++)if(a=c[d],a[o]){b=a[o];break}return b}function i(a,b,c){a.movefn=b,a.upfn=c,document.addEventListener('mousemove',b),document.addEventListener('mouseup',c)}function j(a){document.removeEventListener('mousemove',a.movefn),document.removeEventListener('mouseup',a.upfn),a.movefn=null,a.upfn=null}var k=Math.abs;let l='string'===typeof document.head.style.touchAction,m='__polymerGestures',n='__polymerGesturesHandled',o='__polymerGesturesTouchAction',p=25,q=5,r=['mousedown','mousemove','mouseup','click'],s=[0,1,4,2],t=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(a){return!1}}(),u=!1;(function(){try{let a=Object.defineProperty({},'passive',{get(){u=!0}});window.addEventListener('test',null,a),window.removeEventListener('test',null,a)}catch(a){}})();let v=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),w=function(){};w.prototype.reset,w.prototype.mousedown,w.prototype.mousemove,w.prototype.mouseup,w.prototype.touchstart,w.prototype.touchmove,w.prototype.touchend,w.prototype.click;const x=[],y={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0};let z=function(a){let b=a.sourceCapabilities;if((!b||b.firesTouchEvents)&&(a[n]={skip:!0},'click'===a.type)){let b=!1,e=a.composedPath&&a.composedPath();if(e)for(let a=0;a<e.length;a++){if(e[a].nodeType===Node.ELEMENT_NODE)if('label'===e[a].localName)x.push(e[a]);else if(c(e[a])){let c=d(e[a]);for(let a=0;a<c.length;a++)b=b||-1<x.indexOf(c[a])}if(e[a]===A.mouse.target)return}if(b)return;a.preventDefault(),a.stopPropagation()}},A={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(a){A.mouse.mouseIgnoreJob||f(!0);A.mouse.target=a.composedPath()[0],A.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(A.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){f(),A.mouse.target=null,A.mouse.mouseIgnoreJob=null})},!!u&&{passive:!0});const B={gestures:{},recognizers:[],deepTargetFind:function(a,b){let c=document.elementFromPoint(a,b),d=c;for(;d&&d.shadowRoot&&!window.ShadyDOM;){let e=d;if(d=d.shadowRoot.elementFromPoint(a,b),e===d)break;d&&(c=d)}return c},_findOriginalTarget:function(a){if(a.composedPath){const b=a.composedPath();return 0<b.length?b[0]:a.target}return a.target},_handleNative:function(a){let b,c=a.type,d=a.currentTarget,e=d[m];if(e){let d=e[c];if(d){if(!a[n]&&(a[n]={},'touch'===c.slice(0,5))){a=a;let b=a.changedTouches[0];if('touchstart'===c&&1===a.touches.length&&(A.touch.id=b.identifier),A.touch.id!==b.identifier)return;l||'touchstart'!==c&&'touchmove'!==c||B._handleTouchAction(a)}if(b=a[n],!b.skip){for(let c,e=0;e<B.recognizers.length;e++)c=B.recognizers[e],d[c.name]&&!b[c.name]&&c.flow&&-1<c.flow.start.indexOf(a.type)&&c.reset&&c.reset();for(let e,f=0;f<B.recognizers.length;f++)e=B.recognizers[f],d[e.name]&&!b[e.name]&&(b[e.name]=!0,e[c](a))}}}},_handleTouchAction:function(a){let b=a.changedTouches[0],c=a.type;if('touchstart'===c)A.touch.x=b.clientX,A.touch.y=b.clientY,A.touch.scrollDecided=!1;else if('touchmove'===c){if(A.touch.scrollDecided)return;A.touch.scrollDecided=!0;let c=e(a),d=!1,f=k(A.touch.x-b.clientX),g=k(A.touch.y-b.clientY);a.cancelable&&('none'===c?d=!0:'pan-x'===c?d=g>f:'pan-y'===c&&(d=f>g)),d?a.preventDefault():B.prevent('track')}},addListener:function(a,b,c){return!!this.gestures[b]&&(this._add(a,b,c),!0)},removeListener:function(a,b,c){return!!this.gestures[b]&&(this._remove(a,b,c),!0)},_add:function(c,d,e){let f=this.gestures[d],g=f.deps,h=f.name,j=c[m];j||(c[m]=j={});for(let f,k,l=0;l<g.length;l++)(f=g[l],!(v&&a(f)&&'click'!==f))&&(k=j[f],k||(j[f]=k={_count:0}),0===k._count&&c.addEventListener(f,this._handleNative,b(f)),k[h]=(k[h]||0)+1,k._count=(k._count||0)+1);c.addEventListener(d,e),f.touchAction&&this.setTouchAction(c,f.touchAction)},_remove:function(a,c,d){let e=this.gestures[c],f=e.deps,g=e.name,h=a[m];if(h)for(let c,d,e=0;e<f.length;e++)c=f[e],d=h[c],d&&d[g]&&(d[g]=(d[g]||1)-1,d._count=(d._count||1)-1,0===d._count&&a.removeEventListener(c,this._handleNative,b(c)));a.removeEventListener(c,d)},register:function(a){this.recognizers.push(a);for(let b=0;b<a.emits.length;b++)this.gestures[a.emits[b]]=a},_findRecognizerByEvent:function(a){for(let b,c=0;c<this.recognizers.length;c++){b=this.recognizers[c];for(let c,d=0;d<b.emits.length;d++)if(c=b.emits[d],c===a)return b}return null},setTouchAction:function(a,b){l&&Polymer.Async.microTask.run(()=>{a.style.touchAction=b}),a[o]=b},_fire:function(a,b,c){let d=new Event(b,{bubbles:!0,cancelable:!0,composed:!0});if(d.detail=c,a.dispatchEvent(d),d.defaultPrevented){let a=c.preventer||c.sourceEvent;a&&a.preventDefault&&a.preventDefault()}},prevent:function(a){let b=this._findRecognizerByEvent(a);b.info&&(b.info.prevent=!0)},resetMouseCanceller:function(){A.mouse.mouseIgnoreJob&&A.mouse.mouseIgnoreJob.flush()}};B.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){j(this.info)},mousedown:function(a){if(!g(a))return;let b=B._findOriginalTarget(a),c=this;i(this.info,function(a){g(a)||(c._fire('up',b,a),j(c.info))},function(a){g(a)&&c._fire('up',b,a),j(c.info)}),this._fire('down',b,a)},touchstart:function(a){this._fire('down',B._findOriginalTarget(a),a.changedTouches[0],a)},touchend:function(a){this._fire('up',B._findOriginalTarget(a),a.changedTouches[0],a)},_fire:function(a,b,c,d){B._fire(b,a,{x:c.clientX,y:c.clientY,sourceEvent:c,preventer:d,prevent:function(a){return B.prevent(a)}})}}),B.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(a){this.moves.length>2&&this.moves.shift(),this.moves.push(a)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,j(this.info)},hasMovedEnough:function(a,b){if(this.info.prevent)return!1;if(this.info.started)return!0;let c=k(this.info.x-a),d=k(this.info.y-b);return c>=q||d>=q},mousedown:function(a){if(!g(a))return;let b=B._findOriginalTarget(a),c=this,d=function(a){let d=a.clientX,e=a.clientY;c.hasMovedEnough(d,e)&&(c.info.state=c.info.started?'mouseup'===a.type?'end':'track':'start','start'===c.info.state&&B.prevent('tap'),c.info.addMove({x:d,y:e}),!g(a)&&(c.info.state='end',j(c.info)),c._fire(b,a),c.info.started=!0)};i(this.info,d,function(a){c.info.started&&d(a),j(c.info)}),this.info.x=a.clientX,this.info.y=a.clientY},touchstart:function(a){let b=a.changedTouches[0];this.info.x=b.clientX,this.info.y=b.clientY},touchmove:function(a){let b=B._findOriginalTarget(a),c=a.changedTouches[0],d=c.clientX,e=c.clientY;this.hasMovedEnough(d,e)&&('start'===this.info.state&&B.prevent('tap'),this.info.addMove({x:d,y:e}),this._fire(b,c),this.info.state='track',this.info.started=!0)},touchend:function(a){let b=B._findOriginalTarget(a),c=a.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:c.clientX,y:c.clientY}),this._fire(b,c,a))},_fire:function(a,b){let c,d=this.info.moves[this.info.moves.length-2],e=this.info.moves[this.info.moves.length-1],f=e.x-this.info.x,g=e.y-this.info.y,h=0;d&&(c=e.x-d.x,h=e.y-d.y),B._fire(a,'track',{state:this.info.state,x:b.clientX,y:b.clientY,dx:f,dy:g,ddx:c,ddy:h,sourceEvent:b,hover:function(){return B.deepTargetFind(b.clientX,b.clientY)}})}}),B.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(a){this.info.x=a.clientX,this.info.y=a.clientY},mousedown:function(a){g(a)&&this.save(a)},click:function(a){g(a)&&this.forward(a)},touchstart:function(a){this.save(a.changedTouches[0],a)},touchend:function(a){this.forward(a.changedTouches[0],a)},forward:function(a,b){let c=k(a.clientX-this.info.x),d=k(a.clientY-this.info.y),f=B._findOriginalTarget(b||a);!f||f.disabled||(isNaN(c)||isNaN(d)||c<=p&&d<=p||h(a))&&!this.info.prevent&&B._fire(f,'tap',{x:a.clientX,y:a.clientY,sourceEvent:a,preventer:b})}}),B.findOriginalTarget=B._findOriginalTarget,B.add=B.addListener,B.remove=B.removeListener,Polymer.Gestures=B})();</script><script>(function(){'use strict';const a=Polymer.Gestures;Polymer.GestureEventListeners=Polymer.dedupingMixin((b)=>{return class extends b{_addEventListenerToNode(b,c,d){a.addListener(b,c,d)||super._addEventListenerToNode(b,c,d)}_removeEventListenerFromNode(b,c,d){a.removeListener(b,c,d)||super._removeEventListenerFromNode(b,c,d)}}})})();</script><script>(function(){'use strict';function a(){i=document.documentElement.getAttribute('dir')}function b(a){if(!a.__autoDirOptOut){a.setAttribute('dir',i)}}function c(){a(),i=document.documentElement.getAttribute('dir');for(let a=0;a<g.length;a++)b(g[a])}function d(){h&&h.takeRecords().length&&c()}const e=/:host\(:dir\((ltr|rtl)\)\)/g,f=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,g=[];let h=null,i='';Polymer.DirMixin=Polymer.dedupingMixin((i)=>{h||(a(),h=new MutationObserver(c),h.observe(document.documentElement,{attributes:!0,attributeFilter:['dir']}));const j=Polymer.PropertyAccessors(i);class k extends j{static _processStyleText(a,b){return a=super._processStyleText(a,b),a=this._replaceDirInCssText(a),a}static _replaceDirInCssText(a){let b=a;return b=b.replace(e,':host([dir="$1"])'),b=b.replace(f,':host([dir="$2"]) $1'),a!==b&&(this.__activateDir=!0),b}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute('dir')}connectedCallback(){j.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(d(),g.push(this),b(this))}disconnectedCallback(){if(j.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const a=g.indexOf(this);-1<a&&g.splice(a,1)}}}return k.__activateDir=!1,k})})();</script><script>(function(){'use strict';function a(a){window.HTMLImports?HTMLImports.whenReady(a):a()}Polymer.importHref=function(b,c,d,e){let f=document.head.querySelector('link[href="'+b+'"][import-href]');f||(f=document.createElement('link'),f.rel='import',f.href=b,f.setAttribute('import-href','')),e&&f.setAttribute('async','');let g=function(){f.removeEventListener('load',h),f.removeEventListener('error',i)},h=function(b){g(),f.__dynamicImportLoaded=!0,c&&a(()=>{c(b)})},i=function(b){g(),f.parentNode&&f.parentNode.removeChild(f),d&&a(()=>{d(b)})};return f.addEventListener('load',h),f.addEventListener('error',i),null==f.parentNode?document.head.appendChild(f):f.__dynamicImportLoaded&&f.dispatchEvent(new Event('load')),f}})();</script><script>(function(){'use strict';function a(){e=!0,requestAnimationFrame(function(){e=!1,b(f),setTimeout(function(){c(g)})})}function b(a){for(;a.length;)d(a.shift())}function c(a){for(let b=0,c=a.length;b<c;b++)d(a.shift())}function d(a){const b=a[0],c=a[1],d=a[2];try{c.apply(b,d)}catch(a){setTimeout(()=>{throw a})}}let e=!1,f=[],g=[];Polymer.RenderStatus={beforeNextRender:function(b,c,d){e||a(),f.push([b,c,d])},afterNextRender:function(b,c,d){e||a(),g.push([b,c,d])},flush:function(){for(;f.length||g.length;)b(f),b(g);e=!1}}})();</script><script>(function(){'use strict';function a(){document.body.removeAttribute('unresolved')}window.WebComponents?window.addEventListener('WebComponentsReady',a):'interactive'===document.readyState||'complete'===document.readyState?a():window.addEventListener('DOMContentLoaded',a)})();</script><script>(function(){'use strict';function a(a,b,c){return{index:a,removed:b,addedCount:c}}function b(a,b,c,d,e,f){let h=f-e+1,k=c-b+1,l=Array(h);for(let g=0;g<h;g++)l[g]=Array(k),l[g][0]=g;for(let g=0;g<k;g++)l[0][g]=g;for(let m=1;m<h;m++)for(let c=1;c<k;c++)if(g(a[b+c-1],d[e+m-1]))l[m][c]=l[m-1][c-1];else{let a=l[m-1][c]+1,b=l[m][c-1]+1;l[m][c]=a<b?a:b}return l}function c(a){let b=a.length-1,c=a[0].length-1,d=a[b][c],e=[];for(;0<b||0<c;){if(0==b){e.push(l),c--;continue}if(0==c){e.push(m),b--;continue}let f,g=a[b-1][c-1],i=a[b-1][c],j=a[b][c-1];f=i<j?i<g?i:g:j<g?j:g,f==g?(g==d?e.push(h):(e.push(k),d=g),b--,c--):f==i?(e.push(m),b--,d=i):(e.push(l),c--,d=j)}return e.reverse(),e}function d(d,g,i,j,n,o){let p,q=0,r=0,s=Math.min(i-g,o-n);if(0==g&&0==n&&(q=e(d,j,s)),i==d.length&&o==j.length&&(r=f(d,j,s-q)),g+=q,n+=q,i-=r,o-=r,0==i-g&&0==o-n)return[];if(g==i){for(p=a(g,[],0);n<o;)p.removed.push(j[n++]);return[p]}if(n==o)return[a(g,[],i-g)];let t=c(b(d,g,i,j,n,o));p=void 0;let u=[],v=g,w=n;for(let b=0;b<t.length;b++)switch(t[b]){case h:p&&(u.push(p),p=void 0),v++,w++;break;case k:p||(p=a(v,[],0)),p.addedCount++,v++,p.removed.push(j[w]),w++;break;case l:p||(p=a(v,[],0)),p.addedCount++,v++;break;case m:p||(p=a(v,[],0)),p.removed.push(j[w]),w++;}return p&&u.push(p),u}function e(a,b,c){for(let d=0;d<c;d++)if(!g(a[d],b[d]))return d;return c}function f(a,b,c){let d=a.length,e=b.length,f=0;for(;f<c&&g(a[--d],b[--e]);)f++;return f}function g(a,b){return a===b}const h=0,k=1,l=2,m=3;Polymer.ArraySplice={calculateSplices:function(a,b){return d(a,0,a.length,b,0,b.length)}}})();</script><script>(function(){'use strict';function a(a){return'slot'===a.localName}Polymer.FlattenedNodesObserver=class{static getFlattenedNodes(b){return a(b)?(b=b,b.assignedNodes({flatten:!0})):Array.from(b.childNodes).map((b)=>a(b)?(b=b,b.assignedNodes({flatten:!0})):[b]).reduce((c,a)=>c.concat(a),[])}constructor(a,b){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=a,this.callback=b,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){a(this._target)?this._listenSlots([this._target]):this._target.children&&(this._listenSlots(this._target.children),window.ShadyDOM?this._shadyChildrenObserver=ShadyDOM.observeChildren(this._target,(a)=>{this._processMutations(a)}):(this._nativeChildrenObserver=new MutationObserver((a)=>{this._processMutations(a)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){a(this._target)?this._unlistenSlots([this._target]):this._target.children&&(this._unlistenSlots(this._target.children),window.ShadyDOM&&this._shadyChildrenObserver?(ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,Polymer.Async.microTask.run(()=>this.flush()))}_processMutations(a){this._processSlotMutations(a),this.flush()}_processSlotMutations(a){if(a)for(let b,c=0;c<a.length;c++)b=a[c],b.addedNodes&&this._listenSlots(b.addedNodes),b.removedNodes&&this._unlistenSlots(b.removedNodes)}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let a={target:this._target,addedNodes:[],removedNodes:[]},b=this.constructor.getFlattenedNodes(this._target),c=Polymer.ArraySplice.calculateSplices(b,this._effectiveNodes);for(let b,d=0;d<c.length&&(b=c[d]);d++)for(let c,d=0;d<b.removed.length&&(c=b.removed[d]);d++)a.removedNodes.push(c);for(let d,e=0;e<c.length&&(d=c[e]);e++)for(let c=d.index;c<d.index+d.addedCount;c++)a.addedNodes.push(b[c]);this._effectiveNodes=b;let d=!1;return(a.addedNodes.length||a.removedNodes.length)&&(d=!0,this.callback.call(this._target,a)),d}_listenSlots(b){for(let c,d=0;d<b.length;d++)c=b[d],a(c)&&c.addEventListener('slotchange',this._boundSchedule)}_unlistenSlots(b){for(let c,d=0;d<b.length;d++)c=b[d],a(c)&&c.removeEventListener('slotchange',this._boundSchedule)}}})();</script><script>(function(){'use strict';function a(){const a=!!b.length;for(;b.length;)try{b.shift().flush()}catch(a){setTimeout(()=>{throw a})}return a}let b=[];Polymer.enqueueDebouncer=function(a){b.push(a)},Polymer.flush=function(){let b,c;do b=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),c=a();while(b||c)}})();</script><script>(function(){'use strict';const a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector,d=function(a,c){return b.call(a,c)};class c{constructor(a){this.node=a}observeNodes(a){return new Polymer.FlattenedNodesObserver(this.node,a)}unobserveNodes(a){a.disconnect()}notifyObserver(){}deepContains(a){if(this.node.contains(a))return!0;let b=a,c=a.ownerDocument;for(;b&&b!==c&&b!==this.node;)b=b.parentNode||b.host;return b===this.node}getOwnerRoot(){return this.node.getRootNode()}getDistributedNodes(){return'slot'===this.node.localName?this.node.assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let a=[],b=this.node.assignedSlot;for(;b;)a.push(b),b=b.assignedSlot;return a}importNode(a,b){let c=this.node instanceof Document?this.node:this.node.ownerDocument;return c.importNode(a,b)}getEffectiveChildNodes(){return Polymer.FlattenedNodesObserver.getFlattenedNodes(this.node)}queryDistributedElements(a){let b=this.getEffectiveChildNodes(),e=[];for(let f,c=0,g=b.length;c<g&&(f=b[c]);c++)f.nodeType===Node.ELEMENT_NODE&&d(f,a)&&e.push(f);return e}get activeElement(){let a=this.node;return a._activeElement===void 0?a.activeElement:a._activeElement}}(function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],a[c]=function(){return this.node[c].apply(this.node,arguments)}})(c.prototype,['cloneNode','appendChild','insertBefore','removeChild','replaceChild','setAttribute','removeAttribute','querySelector','querySelectorAll']),function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},configurable:!0})}(c.prototype,['parentNode','firstChild','lastChild','nextSibling','previousSibling','firstElementChild','lastElementChild','nextElementSibling','previousElementSibling','childNodes','children','classList']),function(a,b){for(let c,d=0;d<b.length;d++)c=b[d],Object.defineProperty(a,c,{get:function(){const a=this;return a.node[c]},set:function(a){this.node[c]=a},configurable:!0})}(c.prototype,['textContent','innerHTML']);class e{constructor(a){this.event=a}get rootTarget(){return this.event.composedPath()[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}Polymer.DomApi=c,Polymer.DomApi.prototype.cloneNode,Polymer.DomApi.prototype.appendChild,Polymer.DomApi.prototype.insertBefore,Polymer.DomApi.prototype.removeChild,Polymer.DomApi.prototype.replaceChild,Polymer.DomApi.prototype.setAttribute,Polymer.DomApi.prototype.removeAttribute,Polymer.DomApi.prototype.querySelector,Polymer.DomApi.prototype.querySelectorAll,Polymer.dom=function(a){if(a=a||document,!a.__domApi){let b;b=a instanceof Event?new e(a):new c(a),a.__domApi=b}return a.__domApi},Polymer.dom.matchesSelector=d,Polymer.dom.flush=Polymer.flush,Polymer.dom.addDebouncer=Polymer.enqueueDebouncer})();</script><script>(function(){'use strict';let a=window.ShadyCSS;Polymer.LegacyElementMixin=Polymer.dedupingMixin((b)=>{const c=Polymer.DirMixin(Polymer.GestureEventListeners(Polymer.ElementMixin(b))),d={x:'pan-x',y:'pan-y',none:'none',all:'auto'};class e extends c{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this._applyListeners()}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(a,b,c){b!==c&&(super.attributeChangedCallback(a,b,c),this.attributeChanged(a,b,c))}attributeChanged(){}_initializeProperties(){let a=Object.getPrototypeOf(this);a.hasOwnProperty('__hasRegisterFinished')||(a.__hasRegisterFinished=!0,this._registered()),super._initializeProperties(),this.root=this,this.created()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,b){return this._deserializeValue(a,b)}reflectPropertyToAttribute(a,b,c){this._propertyToAttribute(a,b,c)}serializeValueToAttribute(a,b,c){this._valueToNodeAttribute(c||this,a,b)}extend(a,b){if(!(a&&b))return a||b;let c=Object.getOwnPropertyNames(b);for(let d,e,f=0;f<c.length&&(d=c[f]);f++)e=Object.getOwnPropertyDescriptor(b,d),e&&Object.defineProperty(a,d,e);return a}mixin(a,b){for(let c in b)a[c]=b[c];return a}chainObject(a,b){return a&&b&&a!==b&&(a.__proto__=b),a}instanceTemplate(a){let b=this.constructor._contentForTemplate(a),c=document.importNode(b,!0);return c}fire(a,b,c){c=c||{},b=null===b||void 0===b?{}:b;let d=new Event(a,{bubbles:void 0===c.bubbles||c.bubbles,cancelable:!!c.cancelable,composed:void 0===c.composed||c.composed});d.detail=b;let e=c.node||this;return e.dispatchEvent(d),d}listen(a,b,c){a=a||this;let d=this.__boundListeners||(this.__boundListeners=new WeakMap),e=d.get(a);e||(e={},d.set(a,e));let f=b+c;e[f]||(e[f]=this._addMethodEventListenerToNode(a,b,c,this))}unlisten(a,b,c){a=a||this;let d=this.__boundListeners&&this.__boundListeners.get(a),e=b+c,f=d&&d[e];f&&(this._removeEventListenerFromNode(a,b,f),d[e]=null)}setScrollDirection(a,b){Polymer.Gestures.setTouchAction(b||this,d[a]||'auto')}$$(a){return this.root.querySelector(a)}get domHost(){let a=this.getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){window.ShadyDOM&&this.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){const a=this,b=Polymer.dom(a);return b.getEffectiveChildNodes()}queryDistributedElements(a){const b=this,c=Polymer.dom(b);return c.queryDistributedElements(a)}getEffectiveChildren(){let a=this.getEffectiveChildNodes();return a.filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),b=[];for(let d,c=0;d=a[c];c++)d.nodeType!==Node.COMMENT_NODE&&b.push(d.textContent);return b.join('')}queryEffectiveChildren(a){let b=this.queryDistributedElements(a);return b&&b[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let b=this.root.querySelector(a||'slot');return b?Polymer.dom(b).getDistributedNodes():[]}getContentChildren(a){let b=this.getContentChildNodes(a).filter(function(a){return a.nodeType===Node.ELEMENT_NODE});return b}isLightDescendant(a){const b=this;return b!==a&&b.contains(a)&&b.getRootNode()===a.getRootNode()}isLocalDescendant(a){return this.root===a.getRootNode()}scopeSubtree(){}getComputedStyleValue(b){return a.getComputedStyleValue(this,b)}debounce(a,b,c){return this._debouncers=this._debouncers||{},this._debouncers[a]=Polymer.Debouncer.debounce(this._debouncers[a],0<c?Polymer.Async.timeOut.after(c):Polymer.Async.microTask,b.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];return!!(b&&b.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let b=this._debouncers[a];b&&b.cancel()}async(a,b){return 0<b?Polymer.Async.timeOut.run(a.bind(this),b):~Polymer.Async.microTask.run(a.bind(this))}cancelAsync(a){0>a?Polymer.Async.microTask.cancel(~a):Polymer.Async.timeOut.cancel(a)}create(a,b){let c=document.createElement(a);if(b)if(c.setProperties)c.setProperties(b);else for(let a in b)c[a]=b[a];return c}importHref(a,b,c,d){let e=b?b.bind(this):null,f=c?c.bind(this):null;return Polymer.importHref(a,e,f,d)}elementMatches(a,b){return Polymer.dom.matchesSelector(b||this,a)}toggleAttribute(a,b,c){c=c||this,1==arguments.length&&(b=!c.hasAttribute(a)),b?c.setAttribute(a,''):c.removeAttribute(a)}toggleClass(a,b,c){c=c||this,1==arguments.length&&(b=!c.classList.contains(a)),b?c.classList.add(a):c.classList.remove(a)}transform(a,b){b=b||this,b.style.webkitTransform=a,b.style.transform=a}translate3d(a,b,c,d){d=d||this,this.transform('translate3d('+a+','+b+','+c+')',d)}arrayDelete(a,b){let c;if(!Array.isArray(a)){let d=Polymer.Path.get(this,a);if(c=d.indexOf(b),0<=c)return this.splice(a,c,1)}else if(c=a.indexOf(b),0<=c)return a.splice(c,1);return null}_logger(a,b){Array.isArray(b)&&1===b.length&&Array.isArray(b[0])&&(b=b[0]),'log'===a||'warn'===a||'error'===a?console[a](...b):void 0}_log(...a){this._logger('log',a)}_warn(...a){this._logger('warn',a)}_error(...a){this._logger('error',a)}_logf(a,...b){return['[%s::%s]',this.is,a,...b]}}return e.prototype.is='',e})})();</script><script>(function(){'use strict';function a(a,b){if(!a)return b=b,b;b=Polymer.LegacyElementMixin(b),Array.isArray(a)||(a=[a]);let e=b.prototype.behaviors;return a=d(a,null,e),b=c(a,b),e&&(a=e.concat(a)),b.prototype.behaviors=a,b}function c(a,d){for(let f,b=0;b<a.length;b++)f=a[b],f&&(d=Array.isArray(f)?c(f,d):e(f,d));return d}function d(a,c,e){c=c||[];for(let f,b=a.length-1;0<=b;b--)f=a[b],f?Array.isArray(f)?d(f,c):0>c.indexOf(f)&&(!e||0>e.indexOf(f))&&c.unshift(f):console.warn('behavior is null, check for missing or 404 import');return c}function e(c,a){class d extends a{static get properties(){return c.properties}static get observers(){return c.observers}static get template(){return c._template||Polymer.DomModule&&Polymer.DomModule.import(this.is,'template')||a.template||this.prototype._template||null}created(){super.created(),c.created&&c.created.call(this)}_registered(){super._registered(),c.beforeRegister&&c.beforeRegister.call(Object.getPrototypeOf(this)),c.registered&&c.registered.call(Object.getPrototypeOf(this))}_applyListeners(){if(super._applyListeners(),c.listeners)for(let a in c.listeners)this._addMethodEventListenerToNode(this,a,c.listeners[a])}_ensureAttributes(){if(c.hostAttributes)for(let b in c.hostAttributes)this._ensureAttribute(b,c.hostAttributes[b]);super._ensureAttributes()}ready(){super.ready(),c.ready&&c.ready.call(this)}attached(){super.attached(),c.attached&&c.attached.call(this)}detached(){super.detached(),c.detached&&c.detached.call(this)}attributeChanged(a,b,d){super.attributeChanged(a,b,d),c.attributeChanged&&c.attributeChanged.call(this,a,b,d)}}for(let e in d.generatedFrom=c,c)if(!(e in b)){let a=Object.getOwnPropertyDescriptor(c,e);a&&Object.defineProperty(d.prototype,e,a)}return d}let b={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0};Polymer.Class=function(b){b||console.warn('Polymer.Class requires `info` argument');let c=e(b,b.behaviors?a(b.behaviors,HTMLElement):Polymer.LegacyElementMixin(HTMLElement));return c.is=b.is,c},Polymer.mixinBehaviors=a})();</script><script>(function(){'use strict';window.Polymer._polymerFn=function(a){let b;return b='function'===typeof a?a:Polymer.Class(a),customElements.define(b.is,b),b}})();</script><script>(function(){'use strict';function a(a,b,c,d,e){let f;e&&(f='object'===typeof c&&null!==c,f&&(d=a.__dataTemp[b]));let g=d!==c&&(d===d||c===c);return f&&g&&(a.__dataTemp[b]=c),g}Polymer.MutableData=Polymer.dedupingMixin((b)=>{return class extends b{_shouldPropertyChange(b,c,d){return a(this,b,c,d,!0)}}}),Polymer.OptionalMutableData=Polymer.dedupingMixin((b)=>{class c extends b{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(b,c,d){return a(this,b,c,d,this.mutableData)}}return c}),Polymer.MutableData._mutablePropertyChange=a})();</script><script>(function(){'use strict';function a(){return j}function b(a,b){j=a,Object.setPrototypeOf(a,b.prototype),new b,j=null}function c(a){let b=a.__dataHost;return b&&b._methodHost||b}function d(a,b,c){let d=c.mutableData?o:n,e=class extends d{};return e.prototype.__templatizeOptions=c,e.prototype._bindTemplate(a),g(e,a,b,c),e}function e(a,c,d){let e=d.forwardHostProp;if(e){let g=c.templatizeTemplateClass;if(!g){let a=d.mutableData?l:k;g=c.templatizeTemplateClass=class extends a{};let b=c.hostProps;for(let a in b)g.prototype._addPropertyEffect('_host_'+a,g.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:f(a,e)}),g.prototype._createNotifyingProperty('_host_'+a)}b(a,g),a.__dataProto&&Object.assign(a.__data,a.__dataProto),a.__dataTemp={},a.__dataPending=null,a.__dataOld=null,a._enableProperties()}}function f(a,b){return function(a,c,d){b.call(a.__templatizeOwner,c.substring(6),d[c])}}function g(a,b,c,d){let e=c.hostProps||{};for(let f in d.instanceProps){delete e[f];let b=d.notifyInstanceProp;b&&a.prototype._addPropertyEffect(f,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:h(f,b)})}if(d.forwardHostProp&&b.__dataHost)for(let b in e)a.prototype._addPropertyEffect(b,a.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:i()})}function h(a,b){return function(a,c,d){b.call(a.__templatizeOwner,a,c,d[c])}}function i(){return function(a,b,c){a.__dataHost._setPendingPropertyOrPath('_host_'+b,c[b],!0,!0)}}let j=null;a.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:a,writable:!0}});const k=Polymer.PropertyEffects(a),l=Polymer.MutableData(k),m=Polymer.PropertyEffects(class{});class n extends m{constructor(a){super(),this._configureProperties(a),this.root=this._stampTemplate(this.__dataHost);let b=this.children=[];for(let c=this.root.firstChild;c;c=c.nextSibling)b.push(c),c.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let c=this.__templatizeOptions;(a&&c.instanceProps||!c.instanceProps)&&this._enableProperties()}_configureProperties(a){let b=this.__templatizeOptions;if(b.forwardHostProp)for(let a in this.__hostProps)this._setPendingProperty(a,this.__dataHost['_host_'+a]);for(let b in a)this._setPendingProperty(b,a[b])}forwardHostProp(a,b){this._setPendingPropertyOrPath(a,b,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(a,b,c){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(a,b,(a)=>{a.model=this,c(a)});else{let d=this.__dataHost.__dataHost;d&&d._addEventListenerToNode(a,b,c)}}_showHideChildren(a){let b=this.children;for(let c,d=0;d<b.length;d++){if(c=b[d],!!a!=!!c.__hideTemplateChildren__)if(c.nodeType===Node.TEXT_NODE)a?(c.__polymerTextContent__=c.textContent,c.textContent=''):c.textContent=c.__polymerTextContent__;else if('slot'!==c.localName)c.style&&(a?(c.__polymerDisplay__=c.style.display,c.style.display='none'):c.style.display=c.__polymerDisplay__);else if(a)c.__polymerReplaced__=document.createComment('hidden-slot'),c.parentNode.replaceChild(c.__polymerReplaced__,c);else{const a=c.__polymerReplaced__;a&&a.parentNode.replaceChild(c,a)}c.__hideTemplateChildren__=a,c._showHideChildren&&c._showHideChildren(a)}}_setUnmanagedPropertyToNode(a,b,c){a.__hideTemplateChildren__&&a.nodeType==Node.TEXT_NODE&&'textContent'==b?a.__polymerTextContent__=c:super._setUnmanagedPropertyToNode(a,b,c)}get parentModel(){let a=this.__parentModel;if(!a){let b;a=this;do a=a.__dataHost.__dataHost;while((b=a.__templatizeOptions)&&!b.parentModel);this.__parentModel=a}return a}dispatchEvent(){return!0}}n.prototype.__dataHost,n.prototype.__templatizeOptions,n.prototype._methodHost,n.prototype.__templatizeOwner,n.prototype.__hostProps;const o=Polymer.MutableData(n);Polymer.Templatize={templatize(a,b,f){if(f=f||{},a.__templatizeOwner)throw new Error('A <template> can only be templatized once');a.__templatizeOwner=b;const g=b?b.constructor:n;let h=g._parseTemplate(a),i=h.templatizeInstanceClass;i||(i=d(a,h,f),h.templatizeInstanceClass=i),e(a,h,f);let j=class extends i{};return j.prototype._methodHost=c(a),j.prototype.__dataHost=a,j.prototype.__templatizeOwner=b,j.prototype.__hostProps=h.hostProps,j=j,j},modelForElement(a,b){for(let c;b;)if(!(c=b.__templatizeInstance))b=b.parentNode;else if(c.__dataHost!=a)b=c.__dataHost;else return c;return null}},Polymer.TemplateInstanceBase=n})();</script><script>(function(){'use strict';Polymer.TemplateInstanceBase;Polymer.Templatizer={templatize(a,b){this._templatizerTemplate=a,this.ctor=Polymer.Templatize.templatize(a,this,{mutableData:!!b,parentModel:this._parentModel,instanceProps:this._instanceProps,forwardHostProp:this._forwardHostPropV2,notifyInstanceProp:this._notifyInstancePropV2})},stamp(a){return new this.ctor(a)},modelForElement(a){return Polymer.Templatize.modelForElement(this._templatizerTemplate,a)}}})();</script><script>(function(){'use strict';const a=Polymer.GestureEventListeners(Polymer.OptionalMutableData(Polymer.PropertyEffects(HTMLElement)));class b extends a{static get observedAttributes(){return['mutable-data']}constructor(){super(),this.root=null,this.$=null,this.__children=null}attributeChangedCallback(){this.mutableData=!0}connectedCallback(){this.style.display='none',this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){this.parentNode.insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let a=0;a<this.__children.length;a++)this.root.appendChild(this.__children[a])}render(){let a;if(!this.__children){if(a=a||this.querySelector('template'),!a){let b=new MutationObserver(()=>{if(a=this.querySelector('template'),a)b.disconnect(),this.render();else throw new Error('dom-bind requires a <template> child')});return void b.observe(this,{childList:!0})}this.root=this._stampTemplate(a),this.$=this.root.$,this.__children=[];for(let a=this.root.firstChild;a;a=a.nextSibling)this.__children[this.__children.length]=a;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0}))}}customElements.define('dom-bind',b),Polymer.DomBind=b})();</script><script>(function(){'use strict';Polymer.TemplateInstanceBase;const a=Polymer.OptionalMutableData(Polymer.Element);class b extends a{static get is(){return'dom-repeat'}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},itemsIndexAs:{type:String,value:'itemsIndex'},sort:{type:Function,observer:'__sortChanged'},filter:{type:Function,observer:'__filterChanged'},observe:{type:String,observer:'__observeChanged'},delay:Number,renderedItemCount:{type:Number,notify:!0,readOnly:!0},initialCount:{type:Number,observer:'__initializeChunking'},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:'__computeFrameTime(targetFramerate)'}}}static get observers(){return['__itemsChanged(items.*)']}constructor(){super(),this.__instances=[],this.__limit=Infinity,this.__pool=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__lastChunkTime=null,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let a=0;a<this.__instances.length;a++)this.__detachInstance(a)}connectedCallback(){if(super.connectedCallback(),this.style.display='none',this.__isDetached){this.__isDetached=!1;let a=this.parentNode;for(let b=0;b<this.__instances.length;b++)this.__attachInstance(b,a)}}__ensureTemplatized(){if(!this.__ctor){let a=this.template=this.querySelector('template');if(!a){let a=new MutationObserver(()=>{if(this.querySelector('template'))a.disconnect(),this.__render();else throw new Error('dom-repeat requires a <template> child')});return a.observe(this,{childList:!0}),!1}let b={};b[this.as]=!0,b[this.indexAs]=!0,b[this.itemsIndexAs]=!0,this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:b,forwardHostProp:function(a,b){let c=this.__instances;for(let d,e=0;e<c.length&&(d=c[e]);e++)d.forwardHostProp(a,b)},notifyInstanceProp:function(a,b,c){if(Polymer.Path.matches(this.as,b)){let d=a[this.itemsIndexAs];b==this.as&&(this.items[d]=c);let e=Polymer.Path.translate(this.as,'items.'+d,b);this.notifyPath(e,c)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(a){if('string'===typeof a){let b=this.__getMethodHost();return function(){return b[a].apply(b,arguments)}}return a}__sortChanged(a){this.__sortFn=this.__functionFromPropertyValue(a),this.items&&this.__debounceRender(this.__render)}__filterChanged(a){this.__filterFn=this.__functionFromPropertyValue(a),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(a){return Math.ceil(1e3/a)}__initializeChunking(){this.initialCount&&(this.__limit=this.initialCount,this.__chunkCount=this.initialCount,this.__lastChunkTime=performance.now())}__tryRenderChunk(){this.items&&this.__limit<this.items.length&&this.__debounceRender(this.__requestRenderChunk)}__requestRenderChunk(){requestAnimationFrame(()=>this.__renderChunk())}__renderChunk(){let a=performance.now(),b=this._targetFrameTime/(a-this.__lastChunkTime);this.__chunkCount=Math.round(this.__chunkCount*b)||1,this.__limit+=this.__chunkCount,this.__lastChunkTime=a,this.__debounceRender(this.__render)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace('.*','.').split(' ')}__itemsChanged(a){this.items&&!Array.isArray(this.items)&&console.warn('dom-repeat expected array for `items`, found',this.items),this.__handleItemPath(a.path,a.value)||(this.__initializeChunking(),this.__debounceRender(this.__render))}__handleObservedPaths(a){if(this.__sortFn||this.__filterFn)if(!a)this.__debounceRender(this.__render,this.delay);else if(this.__observePaths){let b=this.__observePaths;for(let c=0;c<b.length;c++)0===a.indexOf(b[c])&&this.__debounceRender(this.__render,this.delay)}}__debounceRender(a,b=0){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,0<b?Polymer.Async.timeOut.after(b):Polymer.Async.microTask,a.bind(this)),Polymer.enqueueDebouncer(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Polymer.flush()}__render(){this.__ensureTemplatized()&&(this.__applyFullRefresh(),this.__pool.length=0,this._setRenderedItemCount(this.__instances.length),this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this.__tryRenderChunk())}__applyFullRefresh(){let c=this.items||[],a=Array(c.length);for(let b=0;b<c.length;b++)a[b]=b;this.__filterFn&&(a=a.filter((a,b,d)=>this.__filterFn(c[a],b,d))),this.__sortFn&&a.sort((d,a)=>this.__sortFn(c[d],c[a]));const b=this.__itemsIdxToInstIdx={};let d=0;for(const e=Math.min(a.length,this.__limit);d<e;d++){let e=this.__instances[d],f=a[d],g=c[f];b[f]=d,e?(e._setPendingProperty(this.as,g),e._setPendingProperty(this.indexAs,d),e._setPendingProperty(this.itemsIndexAs,f),e._flushProperties()):this.__insertInstance(g,d,f)}for(let a=this.__instances.length-1;a>=d;a--)this.__detachAndRemoveInstance(a)}__detachInstance(a){let b=this.__instances[a];for(let c,d=0;d<b.children.length;d++)c=b.children[d],b.root.appendChild(c);return b}__attachInstance(a,b){let c=this.__instances[a];b.insertBefore(c.root,this)}__detachAndRemoveInstance(a){let b=this.__detachInstance(a);b&&this.__pool.push(b),this.__instances.splice(a,1)}__stampInstance(a,b,c){let d={};return d[this.as]=a,d[this.indexAs]=b,d[this.itemsIndexAs]=c,new this.__ctor(d)}__insertInstance(a,b,c){let d=this.__pool.pop();d?(d._setPendingProperty(this.as,a),d._setPendingProperty(this.indexAs,b),d._setPendingProperty(this.itemsIndexAs,c),d._flushProperties()):d=this.__stampInstance(a,b,c);let e=this.__instances[b+1],f=e?e.children[0]:this;return this.parentNode.insertBefore(d.root,f),this.__instances[b]=d,d}_showHideChildren(a){for(let b=0;b<this.__instances.length;b++)this.__instances[b]._showHideChildren(a)}__handleItemPath(a,b){let c=a.slice(6),d=c.indexOf('.'),e=0>d?c:c.substring(0,d);if(e==parseInt(e,10)){let a=0>d?'':c.substring(d+1);this.__handleObservedPaths(a);let f=this.__itemsIdxToInstIdx[e],g=this.__instances[f];if(g){let c=this.as+(a?'.'+a:'');g._setPendingPropertyOrPath(c,b,!1,!0),g._flushProperties()}return!0}}itemForElement(a){let b=this.modelForElement(a);return b&&b[this.as]}indexForElement(a){let b=this.modelForElement(a);return b&&b[this.indexAs]}modelForElement(a){return Polymer.Templatize.modelForElement(this.template,a)}}customElements.define(b.is,b),Polymer.DomRepeat=b})();</script><script>(function(){'use strict';class a extends Polymer.Element{static get is(){return'dom-if'}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:'__debounceRender'},restamp:{type:Boolean,observer:'__debounceRender'}}}constructor(){super(),this.__renderDebouncer=null,this.__invalidProps=null,this.__instance=null,this._lastIf=!1,this.__ctor=null}__debounceRender(){this.__renderDebouncer=Polymer.Debouncer.debounce(this.__renderDebouncer,Polymer.Async.microTask,()=>this.__render()),Polymer.enqueueDebouncer(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback(),this.parentNode&&(this.parentNode.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||this.parentNode.host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),this.style.display='none',this.if&&this.__debounceRender()}render(){Polymer.flush()}__render(){if(this.if){if(!this.__ensureInstance())return;this._showHideChildren()}else this.restamp&&this.__teardownInstance();!this.restamp&&this.__instance&&this._showHideChildren(),this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent('dom-change',{bubbles:!0,composed:!0})),this._lastIf=this.if)}__ensureInstance(){let a=this.parentNode;if(a){if(!this.__ctor){let a=this.querySelector('template');if(!a){let a=new MutationObserver(()=>{if(this.querySelector('template'))a.disconnect(),this.__render();else throw new Error('dom-if requires a <template> child')});return a.observe(this,{childList:!0}),!1}this.__ctor=Polymer.Templatize.templatize(a,this,{mutableData:!0,forwardHostProp:function(a,b){this.__instance&&(this.if?this.__instance.forwardHostProp(a,b):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Polymer.Path.root(a)]=!0))}})}if(!this.__instance)this.__instance=new this.__ctor,a.insertBefore(this.__instance.root,this);else{this.__syncHostProperties();let b=this.__instance.children;if(b&&b.length){let c=this.previousSibling;if(c!==b[b.length-1])for(let c,d=0;d<b.length&&(c=b[d]);d++)a.insertBefore(c,this)}}}return!0}__syncHostProperties(){let a=this.__invalidProps;if(a){for(let b in a)this.__instance._setPendingProperty(b,this.__dataHost[b]);this.__invalidProps=null,this.__instance._flushProperties()}}__teardownInstance(){if(this.__instance){let a=this.__instance.children;if(a&&a.length){let b=a[0].parentNode;for(let c,d=0;d<a.length&&(c=a[d]);d++)b.removeChild(c)}this.__instance=null,this.__invalidProps=null}}_showHideChildren(){let a=this.__hideTemplateChildren__||!this.if;this.__instance&&this.__instance._showHideChildren(a)}}customElements.define(a.is,a),Polymer.DomIf=a})();</script><script>(function(){'use strict';let a=Polymer.dedupingMixin((a)=>{let b=Polymer.ElementMixin(a);class c extends b{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return['__updateSelection(multi, items.*)']}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(a,b){let c=b.path;if('items'==c){let c=b.base||[],d=this.__lastItems,e=this.__lastMulti;if(a!==e&&this.clearSelection(),d){let a=Polymer.ArraySplice.calculateSplices(c,d);this.__applySplices(a)}this.__lastItems=c,this.__lastMulti=a}else if('items.splices'==b.path)this.__applySplices(b.value.indexSplices);else{let a=c.slice(6),b=parseInt(a,10);0>a.indexOf('.')&&a==b&&this.__deselectChangedIdx(b)}}__applySplices(a){let b=this.__selectedMap;for(let c,d=0;d<a.length;d++){c=a[d],b.forEach((a,d)=>{a<c.index||(a>=c.index+c.removed.length?b.set(d,a+c.addedCount-c.removed.length):b.set(d,-1))});for(let a,d=0;d<c.addedCount;d++)a=c.index+d,b.has(this.items[a])&&b.set(this.items[a],a)}this.__updateLinks();let c=0;b.forEach((a,d)=>{0>a?(this.multi?this.splice('selected',c,1):this.selected=this.selectedItem=null,b.delete(d)):c++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let a=0;this.__selectedMap.forEach((b)=>{0<=b&&this.linkPaths('items.'+b,'selected.'+a++)})}else this.__selectedMap.forEach((a)=>{this.linkPaths('selected','items.'+a),this.linkPaths('selectedItem','items.'+a)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(a){return this.__selectedMap.has(a)}isIndexSelected(a){return this.isSelected(this.items[a])}__deselectChangedIdx(a){let b=this.__selectedIndexForItemIndex(a);if(0<=b){let a=0;this.__selectedMap.forEach((c,d)=>{b==a++&&this.deselect(d)})}}__selectedIndexForItemIndex(a){let b=this.__dataLinkedPaths['items.'+a];if(b)return parseInt(b.slice(9),10)}deselect(a){let b=this.__selectedMap.get(a);if(0<=b){this.__selectedMap.delete(a);let c;this.multi&&(c=this.__selectedIndexForItemIndex(b)),this.__updateLinks(),this.multi?this.splice('selected',c,1):this.selected=this.selectedItem=null}}deselectIndex(a){this.deselect(this.items[a])}select(a){this.selectIndex(this.items.indexOf(a))}selectIndex(a){let b=this.items[a];this.isSelected(b)?this.toggle&&this.deselectIndex(a):(!this.multi&&this.__selectedMap.clear(),this.__selectedMap.set(b,a),this.__updateLinks(),this.multi?this.push('selected',b):this.selected=this.selectedItem=b)}}return c});Polymer.ArraySelectorMixin=a;let b=a(Polymer.Element);class c extends b{static get is(){return'array-selector'}}customElements.define(c.is,c),Polymer.ArraySelector=c})();</script><script>(function(){"use strict";function a(b){i=b&&b.shimcssproperties?!1:f||!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")}function d(c,a){for(var b in a)null===b?c.style.removeProperty(b):c.style.setProperty(b,a[b])}function b(){var b=o;requestAnimationFrame(function(){l?l(b):(n||(n=new Promise(function(b){k=b}),"complete"===document.readyState?k():document.addEventListener("readystatechange",function(){"complete"===document.readyState&&k()})),n.then(function(){b&&b()}))})}function e(){this.customStyles=[],this.enqueued=!1}function g(c){!c.enqueued&&o&&(c.enqueued=!0,b())}var i,f=!(window.ShadyDOM&&window.ShadyDOM.inUse);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?i=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);var j=i;var k,n=null,l=window.HTMLImports&&window.HTMLImports.whenReady||null;var m=null,o=null;e.prototype.c=function(b){b.__seenByShadyCSS||(b.__seenByShadyCSS=!0,this.customStyles.push(b),g(this))},e.prototype.b=function(c){if(c.__shadyCSSCachedStyle)return c.__shadyCSSCachedStyle;var a;return a=c.getStyle?c.getStyle():c,a},e.prototype.a=function(){for(var c,d=this.customStyles,a=0;a<d.length;a++)if(c=d[a],!c.__shadyCSSCachedStyle){var b=this.b(c);b&&(b=b.__appliedElement||b,m&&m(b),c.__shadyCSSCachedStyle=b)}return d},e.prototype.addCustomStyle=e.prototype.c,e.prototype.getStyleForCustomStyle=e.prototype.b,e.prototype.processStyles=e.prototype.a,Object.defineProperties(e.prototype,{transformCallback:{get:function(){return m},set:function(b){m=b}},validateCallback:{get:function(){return o},set:function(c){var a=!1;o||(a=!0),o=c,a&&g(this)}}});var p=new e;window.ShadyCSS||(window.ShadyCSS={prepareTemplate:function(){},styleSubtree:function(c,a){p.a(),d(c,a)},styleElement:function(){p.a()},styleDocument:function(b){p.a(),d(document.body,b)},getComputedStyleValue:function(c,a){return(c=window.getComputedStyle(c).getPropertyValue(a))?c.trim():""},nativeCss:j,nativeShadow:f}),window.ShadyCSS.CustomStyleInterface=p}).call(this);</script><script>(function(){'use strict';const a='include',b=window.ShadyCSS.CustomStyleInterface;class c extends HTMLElement{constructor(){super(),this._style=null,b.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const b=this.querySelector('style');if(!b)return null;this._style=b;const c=b.getAttribute(a);return c&&(b.removeAttribute(a),b.textContent=Polymer.StyleGather.cssFromModules(c)+b.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define('custom-style',c),Polymer.CustomStyle=c})();</script><script>(function(){'use strict';let a;(()=>{a=Polymer.MutableData._mutablePropertyChange})(),Polymer.MutableDataBehavior={_shouldPropertyChange(b,c,d){return a(this,b,c,d,!0)}},Polymer.OptionalMutableDataBehavior={properties:{mutableData:Boolean},_shouldPropertyChange(b,c,d){return a(this,b,c,d,this.mutableData)}}})();</script><script>Polymer.Base=Polymer.LegacyElementMixin(HTMLElement).prototype,Polymer.html=Polymer.html;</script><script>(function(){var a=document.createElement('style');a.textContent='[hidden] { display: none !important; }',document.head.appendChild(a)})();</script><custom-style><style is="custom-style">[hidden]{display:none !important;}</style></custom-style><custom-style><style is="custom-style">html{--layout:{display:-ms-flexbox;display:-webkit-flex;display:flex;};--layout-inline:{display:-ms-inline-flexbox;display:-webkit-inline-flex;display:inline-flex;};--layout-horizontal:{@apply --layout;-ms-flex-direction:row;-webkit-flex-direction:row;flex-direction:row;};--layout-horizontal-reverse:{@apply --layout;-ms-flex-direction:row-reverse;-webkit-flex-direction:row-reverse;flex-direction:row-reverse;};--layout-vertical:{@apply --layout;-ms-flex-direction:column;-webkit-flex-direction:column;flex-direction:column;};--layout-vertical-reverse:{@apply --layout;-ms-flex-direction:column-reverse;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;};--layout-wrap:{-ms-flex-wrap:wrap;-webkit-flex-wrap:wrap;flex-wrap:wrap;};--layout-wrap-reverse:{-ms-flex-wrap:wrap-reverse;-webkit-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;};--layout-flex-auto:{-ms-flex:1 1 auto;-webkit-flex:1 1 auto;flex:1 1 auto;};--layout-flex-none:{-ms-flex:none;-webkit-flex:none;flex:none;};--layout-flex:{-ms-flex:1 1 0.000000001px;-webkit-flex:1;flex:1;-webkit-flex-basis:0.000000001px;flex-basis:0.000000001px;};--layout-flex-2:{-ms-flex:2;-webkit-flex:2;flex:2;};--layout-flex-3:{-ms-flex:3;-webkit-flex:3;flex:3;};--layout-flex-4:{-ms-flex:4;-webkit-flex:4;flex:4;};--layout-flex-5:{-ms-flex:5;-webkit-flex:5;flex:5;};--layout-flex-6:{-ms-flex:6;-webkit-flex:6;flex:6;};--layout-flex-7:{-ms-flex:7;-webkit-flex:7;flex:7;};--layout-flex-8:{-ms-flex:8;-webkit-flex:8;flex:8;};--layout-flex-9:{-ms-flex:9;-webkit-flex:9;flex:9;};--layout-flex-10:{-ms-flex:10;-webkit-flex:10;flex:10;};--layout-flex-11:{-ms-flex:11;-webkit-flex:11;flex:11;};--layout-flex-12:{-ms-flex:12;-webkit-flex:12;flex:12;};--layout-start:{-ms-flex-align:start;-webkit-align-items:flex-start;align-items:flex-start;};--layout-center:{-ms-flex-align:center;-webkit-align-items:center;align-items:center;};--layout-end:{-ms-flex-align:end;-webkit-align-items:flex-end;align-items:flex-end;};--layout-baseline:{-ms-flex-align:baseline;-webkit-align-items:baseline;align-items:baseline;};--layout-start-justified:{-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;};--layout-center-justified:{-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;};--layout-end-justified:{-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;};--layout-around-justified:{-ms-flex-pack:distribute;-webkit-justify-content:space-around;justify-content:space-around;};--layout-justified:{-ms-flex-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;};--layout-center-center:{@apply --layout-center;@apply --layout-center-justified;};--layout-self-start:{-ms-align-self:flex-start;-webkit-align-self:flex-start;align-self:flex-start;};--layout-self-center:{-ms-align-self:center;-webkit-align-self:center;align-self:center;};--layout-self-end:{-ms-align-self:flex-end;-webkit-align-self:flex-end;align-self:flex-end;};--layout-self-stretch:{-ms-align-self:stretch;-webkit-align-self:stretch;align-self:stretch;};--layout-self-baseline:{-ms-align-self:baseline;-webkit-align-self:baseline;align-self:baseline;};--layout-start-aligned:{-ms-flex-line-pack:start;-ms-align-content:flex-start;-webkit-align-content:flex-start;align-content:flex-start;};--layout-end-aligned:{-ms-flex-line-pack:end;-ms-align-content:flex-end;-webkit-align-content:flex-end;align-content:flex-end;};--layout-center-aligned:{-ms-flex-line-pack:center;-ms-align-content:center;-webkit-align-content:center;align-content:center;};--layout-between-aligned:{-ms-flex-line-pack:justify;-ms-align-content:space-between;-webkit-align-content:space-between;align-content:space-between;};--layout-around-aligned:{-ms-flex-line-pack:distribute;-ms-align-content:space-around;-webkit-align-content:space-around;align-content:space-around;};--layout-block:{display:block;};--layout-invisible:{visibility:hidden !important;};--layout-relative:{position:relative;};--layout-fit:{position:absolute;top:0;right:0;bottom:0;left:0;};--layout-scroll:{-webkit-overflow-scrolling:touch;overflow:auto;};--layout-fullbleed:{margin:0;height:100vh;};--layout-fixed-top:{position:fixed;top:0;left:0;right:0;};--layout-fixed-right:{position:fixed;top:0;right:0;bottom:0;};--layout-fixed-bottom:{position:fixed;right:0;bottom:0;left:0;};--layout-fixed-left:{position:fixed;top:0;bottom:0;left:0;};}</style></custom-style><script>Polymer.IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:'_parentResizableChanged'},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":'_onIronRequestResizeNotifications'},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):window.removeEventListener('resize',this._boundNotifyResize),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this),this._fireResize())},assignParentResizable:function(a){this._parentResizable=a},stopResizeNotificationsFor:function(a){var b=this._interestedResizables.indexOf(a);-1<b&&(this._interestedResizables.splice(b,1),this.unlisten(a,'iron-resize','_onDescendantIronResize'))},resizerShouldNotify:function(){return!0},_onDescendantIronResize:function(a){return this._notifyingDescendant?void a.stopPropagation():void(!Polymer.Settings.useShadow&&this._fireResize())},_fireResize:function(){this.fire('iron-resize',null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(a){var b=Polymer.dom(a).rootTarget;b===this||(-1===this._interestedResizables.indexOf(b)&&(this._interestedResizables.push(b),this.listen(b,'iron-resize','_onDescendantIronResize')),b.assignParentResizable(this),this._notifyDescendant(b),a.stopPropagation())},_parentResizableChanged:function(a){a&&window.removeEventListener('resize',this._boundNotifyResize)},_notifyDescendant:function(a){this.isAttached&&(this._notifyingDescendant=!0,a.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if('loading'===document.readyState){var a=this._requestResizeNotifications.bind(this);document.addEventListener('readystatechange',function b(){document.removeEventListener('readystatechange',b),a()})}else this.fire('iron-request-resize-notifications',null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable||(window.addEventListener('resize',this._boundNotifyResize),this.notifyResize())}};</script><script>Polymer.AppLayoutBehavior=[Polymer.IronResizableBehavior,{listeners:{"app-reset-layout":'_appResetLayoutHandler',"iron-resize":'resetLayout'},attached:function(){this.fire('app-reset-layout')},_appResetLayoutHandler:function(a){Polymer.dom(a).path[0]===this||(this.resetLayout(),a.stopPropagation())},_updateLayoutStates:function(){console.error('unimplemented')},resetLayout:function(){var a=this,b=this._updateLayoutStates.bind(this);Polymer.Async&&Polymer.Async.animationFrame?(this._layoutDebouncer=Polymer.Debouncer.debounce(this._layoutDebouncer,Polymer.Async.animationFrame,b),Polymer.enqueueDebouncer(this._layoutDebouncer)):this.debounce('resetLayout',b),this._notifyDescendantResize()},_notifyLayoutChanged:function(){var a=this;requestAnimationFrame(function(){a.fire('app-reset-layout')})},_notifyDescendantResize:function(){this.isAttached&&this._interestedResizables.forEach(function(a){this.resizerShouldNotify(a)&&this._notifyDescendant(a)},this)}}];</script><dom-module id="app-header-layout" assetpath="../bower_components/app-layout/app-header-layout/"><template><style>:host{display:block;position:relative;z-index:0;}#wrapper ::slotted([slot=header]){@apply --layout-fixed-top;z-index:1;}#wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]){height:100%;}:host([has-scrolling-region]) #wrapper ::slotted([slot=header]){position:absolute;}:host([has-scrolling-region]) #wrapper.initializing ::slotted([slot=header]){position:relative;}:host([has-scrolling-region]) #wrapper #contentContainer{@apply --layout-fit;overflow-y:auto;-webkit-overflow-scrolling:touch;}:host([has-scrolling-region]) #wrapper.initializing #contentContainer{position:relative;}:host([fullbleed]){@apply --layout-vertical;@apply --layout-fit;}:host([fullbleed]) #wrapper,
      :host([fullbleed]) #wrapper #contentContainer{@apply --layout-vertical;@apply --layout-flex;}#contentContainer{position:relative;z-index:0;}@media print{:host([has-scrolling-region]) #wrapper #contentContainer{overflow-y:visible;}}</style><div id="wrapper" class="initializing"><slot id="headerSlot" name="header"></slot><div id="contentContainer"><slot></slot></div></div></template><script>Polymer({is:'app-header-layout',behaviors:[Polymer.AppLayoutBehavior],properties:{hasScrollingRegion:{type:Boolean,value:!1,reflectToAttribute:!0}},observers:['resetLayout(isAttached, hasScrollingRegion)'],get header(){return Polymer.dom(this.$.headerSlot).getDistributedNodes()[0]},_updateLayoutStates:function(){var a=this.header;if(this.isAttached&&a){this.$.wrapper.classList.remove('initializing'),a.scrollTarget=this.hasScrollingRegion?this.$.contentContainer:this.ownerDocument.documentElement;var b=a.offsetHeight;this.hasScrollingRegion?(a.style.left='',a.style.right=''):requestAnimationFrame(function(){var b=this.getBoundingClientRect(),c=document.documentElement.clientWidth-b.right;a.style.left=b.left+'px',a.style.right=c+'px'}.bind(this));var c=this.$.contentContainer.style;a.fixed&&!a.condenses&&this.hasScrollingRegion?(c.marginTop=b+'px',c.paddingTop=''):(c.paddingTop=b+'px',c.marginTop='')}}});</script></dom-module><script>Polymer.IronScrollTargetBehavior={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:['_scrollTargetChanged(scrollTarget, isAttached)'],_shouldHaveListener:!0,_scrollTargetChanged:function(a,b){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),!!b)if('document'===a)this.scrollTarget=this._doc;else if('string'===typeof a){var c=this.domHost;this.scrollTarget=c&&c.$?c.$[a]:Polymer.dom(this.ownerDocument).querySelector('#'+a)}else this._isValidScrollTarget()&&(this._oldScrollTarget=a,this._toggleScrollListener(this._shouldHaveListener,a))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(a){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,a):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=a)},set _scrollLeft(a){this.scrollTarget===this._doc?window.scrollTo(a,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a)},scroll:function(a,b){this.scrollTarget===this._doc?window.scrollTo(a,b):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=a,this.scrollTarget.scrollTop=b)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(a,b){var c=b===this._doc?window:b;a?!this._boundScrollHandler&&(this._boundScrollHandler=this._scrollHandler.bind(this),c.addEventListener('scroll',this._boundScrollHandler)):this._boundScrollHandler&&(c.removeEventListener('scroll',this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(a){this._shouldHaveListener=a,this._toggleScrollListener(a,this.scrollTarget)}};</script><script>Polymer.AppLayout=Polymer.AppLayout||{},Polymer.AppLayout._scrollEffects={},Polymer.AppLayout._scrollTimer=null,Polymer.AppLayout.scrollTimingFunction=function(a,e,b,f){return a/=f,-b*a*(a-2)+e},Polymer.AppLayout.registerEffect=function(a,b){if(null!=Polymer.AppLayout._scrollEffects[a])throw new Error('effect `'+a+'` is already registered.');Polymer.AppLayout._scrollEffects[a]=b},Polymer.AppLayout.queryAllRoot=function(a,b){for(var c=[b],d=[];0<c.length;){var e=c.shift();d.push.apply(d,e.querySelectorAll(a));for(var f=0;e.children[f];f++)e.children[f].shadowRoot&&c.push(e.children[f].shadowRoot)}return d},Polymer.AppLayout.scroll=function(a){a=a||{};var b=document.documentElement,c=a.target||b,d='scrollBehavior'in c.style&&c.scroll,e=a.top||0,f=a.left||0,g=c===b?window.scrollTo:function(a,b){c.scrollLeft=a,c.scrollTop=b};if('smooth'===a.behavior){if(d)c.scroll(a);else{var h=Polymer.AppLayout.scrollTimingFunction,i=Date.now(),j=c===b?window.pageYOffset:c.scrollTop,k=c===b?window.pageXOffset:c.scrollLeft,l=300,m=function a(){var b=Date.now(),c=b-i;c<l?(g(h(c,k,f-k,l),h(c,j,e-j,l)),requestAnimationFrame(a)):g(f,e)}.bind(this);m()}}else if('silent'===a.behavior){var n=Polymer.AppLayout.queryAllRoot('app-header',document.body);n.forEach(function(a){a.setAttribute('silent-scroll','')}),Polymer.AppLayout._scrollTimer&&window.cancelAnimationFrame(Polymer.AppLayout._scrollTimer),Polymer.AppLayout._scrollTimer=window.requestAnimationFrame(function(){n.forEach(function(a){a.removeAttribute('silent-scroll')}),Polymer.AppLayout._scrollTimer=null}),g(f,e)}else g(f,e)};</script><script>Polymer.AppScrollEffectsBehavior=[Polymer.IronScrollTargetBehavior,{properties:{effects:{type:String},effectsConfig:{type:Object,value:function(){return{}}},disabled:{type:Boolean,reflectToAttribute:!0,value:!1},threshold:{type:Number,value:0},thresholdTriggered:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0}},observers:['_effectsChanged(effects, effectsConfig, isAttached)'],_updateScrollState:function(){},isOnScreen:function(){return!1},isContentBelow:function(){return!1},_effectsRunFn:null,_effects:null,get _clampedScrollTop(){return Math.max(0,this._scrollTop)},detached:function(){this._tearDownEffects()},createEffect:function(a,b){var c=Polymer.AppLayout._scrollEffects[a];if(!c)throw new ReferenceError(this._getUndefinedMsg(a));var d=this._boundEffect(c,b||{});return d.setUp(),d},_effectsChanged:function(a,b,c){this._tearDownEffects();a&&c&&(a.split(' ').forEach(function(a){var c;''!==a&&((c=Polymer.AppLayout._scrollEffects[a])?this._effects.push(this._boundEffect(c,b[a])):console.warn(this._getUndefinedMsg(a)))},this),this._setUpEffect())},_layoutIfDirty:function(){return this.offsetWidth},_boundEffect:function(a,b){b=b||{};var c=parseFloat(b.startsAt||0),d=parseFloat(b.endsAt||1),e=function(){},f=0===c&&1===d?a.run:function(b,e){a.run.call(this,Math.max(0,(b-c)/(d-c)),e)};return{setUp:a.setUp?a.setUp.bind(this,b):e,run:a.run?f.bind(this):e,tearDown:a.tearDown?a.tearDown.bind(this):e}},_setUpEffect:function(){this.isAttached&&this._effects&&(this._effectsRunFn=[],this._effects.forEach(function(a){!1!==a.setUp()&&this._effectsRunFn.push(a.run)},this))},_tearDownEffects:function(){this._effects&&this._effects.forEach(function(a){a.tearDown()}),this._effectsRunFn=[],this._effects=[]},_runEffects:function(a,b){this._effectsRunFn&&this._effectsRunFn.forEach(function(c){c(a,b)})},_scrollHandler:function(){if(!this.disabled){var a=this._clampedScrollTop;this._updateScrollState(a),0<this.threshold&&this._setThresholdTriggered(a>=this.threshold)}},_getDOMRef:function(a){console.warn('_getDOMRef','`'+a+'` is undefined')},_getUndefinedMsg:function(a){return'Scroll effect `'+a+'` is undefined. Did you forget to import app-layout/app-scroll-effects/effects/'+a+'.html ?'}}];</script><dom-module id="app-header" assetpath="../bower_components/app-layout/app-header/"><template><style>:host{position:relative;display:block;transition-timing-function:linear;transition-property:-webkit-transform;transition-property:transform;}:host::before{position:absolute;right:0px;bottom:-5px;left:0px;width:100%;height:5px;content:"";transition:opacity 0.4s;pointer-events:none;opacity:0;box-shadow:inset 0px 5px 6px -3px rgba(0, 0, 0, 0.4);will-change:opacity;@apply --app-header-shadow;}:host([shadow])::before{opacity:1;}#background{@apply --layout-fit;overflow:hidden;}#backgroundFrontLayer,
      #backgroundRearLayer{@apply --layout-fit;height:100%;pointer-events:none;background-size:cover;}#backgroundFrontLayer{@apply --app-header-background-front-layer;}#backgroundRearLayer{opacity:0;@apply --app-header-background-rear-layer;}#contentContainer{position:relative;width:100%;height:100%;}:host([disabled]),
      :host([disabled])::after,
      :host([disabled]) #backgroundFrontLayer,
      :host([disabled]) #backgroundRearLayer,
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]),
      :host([silent-scroll])::after,
      :host([silent-scroll]) #backgroundFrontLayer,
      :host([silent-scroll]) #backgroundRearLayer{transition:none !important;}:host([disabled]) ::slotted(app-toolbar:first-of-type),
      :host([disabled]) ::slotted([sticky]),
      /* Silent scrolling should not run CSS transitions */
      :host([silent-scroll]) ::slotted(app-toolbar:first-of-type),
      :host([silent-scroll]) ::slotted([sticky]){transition:none !important;}</style><div id="contentContainer"><slot id="slot"></slot></div></template><script>Polymer({is:'app-header',behaviors:[Polymer.AppScrollEffectsBehavior,Polymer.AppLayoutBehavior],properties:{condenses:{type:Boolean,value:!1},fixed:{type:Boolean,value:!1},reveals:{type:Boolean,value:!1},shadow:{type:Boolean,reflectToAttribute:!0,value:!1}},observers:['_configChanged(isAttached, condenses, fixed)'],_height:0,_dHeight:0,_stickyElTop:0,_stickyElRef:null,_top:0,_progress:0,_wasScrollingDown:!1,_initScrollTop:0,_initTimestamp:0,_lastTimestamp:0,_lastScrollTop:0,get _maxHeaderTop(){return this.fixed?this._dHeight:this._height+5},get _stickyEl(){if(this._stickyElRef)return this._stickyElRef;for(var a,b=Polymer.dom(this.$.slot).getDistributedNodes(),c=0;a=b[c];c++)if(a.nodeType===Node.ELEMENT_NODE)if(a.hasAttribute('sticky')){this._stickyElRef=a;break}else this._stickyElRef||(this._stickyElRef=a);return this._stickyElRef},_configChanged:function(){this.resetLayout(),this._notifyLayoutChanged()},_updateLayoutStates:function(){if(0!==this.offsetWidth||0!==this.offsetHeight){var a=this._clampedScrollTop,b=0===this._height||0===a,c=this.disabled;this._height=this.offsetHeight,this._stickyElRef=null,this.disabled=!0,b||this._updateScrollState(0,!0),this._dHeight=this._mayMove()?this._stickyEl?this._height-this._stickyEl.offsetHeight:0:0,this._stickyElTop=this._stickyEl?this._stickyEl.offsetTop:0,this._setUpEffect(),b?this._updateScrollState(a,!0):(this._updateScrollState(this._lastScrollTop,!0),this._layoutIfDirty()),this.disabled=c}},_updateScrollState:function(a,b){var c=Math.abs;if(0!==this._height){var d=0,e=0,f=this._top,g=this._lastScrollTop,h=this._maxHeaderTop,i=a-this._lastScrollTop,j=c(i),k=a>this._lastScrollTop,l=performance.now();if(this._mayMove()&&(e=this._clamp(this.reveals?f+i:a,0,h)),a>=this._dHeight&&(e=this.condenses&&!this.fixed?Math.max(this._dHeight,e):e,this.style.transitionDuration='0ms'),this.reveals&&!this.disabled&&100>j&&((300<l-this._initTimestamp||this._wasScrollingDown!==k)&&(this._initScrollTop=a,this._initTimestamp=l),a>=h))if(30<c(this._initScrollTop-a)||10<j){k&&a>=h?e=h:!k&&a>=this._dHeight&&(e=this.condenses&&!this.fixed?this._dHeight:0);var m=i/(l-this._lastTimestamp);this.style.transitionDuration=this._clamp((e-f)/m,0,300)+'ms'}else e=this._top;d=0===this._dHeight?0<a?1:0:e/this._dHeight,b||(this._lastScrollTop=a,this._top=e,this._wasScrollingDown=k,this._lastTimestamp=l),(b||d!==this._progress||f!==e||0===a)&&(this._progress=d,this._runEffects(d,e),this._transformHeader(e))}},_mayMove:function(){return this.condenses||!this.fixed},willCondense:function(){return 0<this._dHeight&&this.condenses},isOnScreen:function(){return 0!==this._height&&this._top<this._height},isContentBelow:function(){return 0===this._top?0<this._clampedScrollTop:0<=this._clampedScrollTop-this._maxHeaderTop},_transformHeader:function(a){this.translate3d(0,-a+'px',0),this._stickyEl&&this.translate3d(0,this.condenses&&a>=this._stickyElTop?Math.min(a,this._dHeight)-this._stickyElTop+'px':0,0,this._stickyEl)},_clamp:function(a,b,c){return Math.min(c,Math.max(b,a))},_ensureBgContainers:function(){this._bgContainer||(this._bgContainer=document.createElement('div'),this._bgContainer.id='background',this._bgRear=document.createElement('div'),this._bgRear.id='backgroundRearLayer',this._bgContainer.appendChild(this._bgRear),this._bgFront=document.createElement('div'),this._bgFront.id='backgroundFrontLayer',this._bgContainer.appendChild(this._bgFront),Polymer.dom(this.root).insertBefore(this._bgContainer,this.$.contentContainer))},_getDOMRef:function(a){return'backgroundFrontLayer'===a?(this._ensureBgContainers(),this._bgFront):'backgroundRearLayer'===a?(this._ensureBgContainers(),this._bgRear):'background'===a?(this._ensureBgContainers(),this._bgContainer):'mainTitle'===a?Polymer.dom(this).querySelector('[main-title]'):'condensedTitle'===a?Polymer.dom(this).querySelector('[condensed-title]'):null},getScrollState:function(){return{progress:this._progress,top:this._top}}});</script></dom-module><dom-module id="app-toolbar" assetpath="../bower_components/app-layout/app-toolbar/"><template><style>:host{@apply --layout-horizontal;@apply --layout-center;position:relative;height:64px;padding:0 16px;pointer-events:none;font-size:var(--app-toolbar-font-size, 20px);}:host ::slotted(*){pointer-events:auto;}:host ::slotted(paper-icon-button){font-size:0;}:host ::slotted([main-title]),
      :host ::slotted([condensed-title]){pointer-events:none;@apply --layout-flex;}:host ::slotted([bottom-item]){position:absolute;right:0;bottom:0;left:0;}:host ::slotted([top-item]){position:absolute;top:0;right:0;left:0;}:host ::slotted([spacer]){margin-left:64px;}</style><slot></slot></template><script>Polymer({is:'app-toolbar'});</script></dom-module><script>(function(){'use strict';function a(a,f){if(void 0===b){b=!1;try{var g=new URL('b','http://a');g.pathname='c%20d',b='http://a/c%20d'===g.href,b=b&&'http://www.google.com/?foo%20bar'===new URL('http://www.google.com/?foo bar').href}catch(a){}}return b?new URL(a,f):(c||(c=document.implementation.createHTMLDocument('url'),d=c.createElement('base'),c.head.appendChild(d),e=c.createElement('a')),d.href=f,e.href=a.replace(/ /g,'%20'),e)}var b,c,d,e;Polymer({is:'iron-location',properties:{path:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.pathname)}},query:{type:String,notify:!0,value:function(){return window.location.search.slice(1)}},hash:{type:String,notify:!0,value:function(){return window.decodeURIComponent(window.location.hash.slice(1))}},dwellTime:{type:Number,value:2e3},urlSpaceRegex:{type:String,value:''},encodeSpaceAsPlusInQuery:{type:Boolean,value:!1},_urlSpaceRegExp:{computed:'_makeRegExp(urlSpaceRegex)'},_lastChangedAt:{type:Number},_initialized:{type:Boolean,value:!1}},hostAttributes:{hidden:!0},observers:['_updateUrl(path, query, hash)'],created:function(){this.__location=window.location},attached:function(){this.listen(window,'hashchange','_hashChanged'),this.listen(window,'location-changed','_urlChanged'),this.listen(window,'popstate','_urlChanged'),this.listen(document.body,'click','_globalOnClick'),this._lastChangedAt=window.performance.now()-(this.dwellTime-200),this._initialized=!0,this._urlChanged()},detached:function(){this.unlisten(window,'hashchange','_hashChanged'),this.unlisten(window,'location-changed','_urlChanged'),this.unlisten(window,'popstate','_urlChanged'),this.unlisten(document.body,'click','_globalOnClick'),this._initialized=!1},_hashChanged:function(){this.hash=window.decodeURIComponent(this.__location.hash.substring(1))},_urlChanged:function(){this._dontUpdateUrl=!0,this._hashChanged(),this.path=window.decodeURIComponent(this.__location.pathname),this.query=this.__location.search.substring(1),this._dontUpdateUrl=!1,this._updateUrl()},_getUrl:function(){var a=window.encodeURI(this.path).replace(/\#/g,'%23').replace(/\?/g,'%3F'),b='';this.query&&(b='?'+this.query.replace(/\#/g,'%23'),this.encodeSpaceAsPlusInQuery&&(b=b.replace(/\+/g,'%2B').replace(/ /g,'+').replace(/%20/g,'+')));var c='';return this.hash&&(c='#'+window.encodeURI(this.hash)),a+b+c},_updateUrl:function(){if(!this._dontUpdateUrl&&this._initialized&&(this.path!==window.decodeURIComponent(this.__location.pathname)||this.query!==this.__location.search.substring(1)||this.hash!==window.decodeURIComponent(this.__location.hash.substring(1)))){var b=this._getUrl(),c=a(b,this.__location.protocol+'//'+this.__location.host).href,d=window.performance.now(),e=this._lastChangedAt+this.dwellTime>d;this._lastChangedAt=d,e?window.history.replaceState({},'',c):window.history.pushState({},'',c),this.fire('location-changed',{},{node:window})}},_globalOnClick:function(a){if(!a.defaultPrevented){var b=this._getSameOriginLinkHref(a);b&&(a.preventDefault(),b===this.__location.href||(window.history.pushState({},'',b),this.fire('location-changed',{},{node:window})))}},_getSameOriginLinkHref:function(b){if(0!==b.button)return null;if(b.metaKey||b.ctrlKey)return null;for(var c,d=Polymer.dom(b).path,e=null,f=0;f<d.length;f++)if(c=d[f],'A'===c.tagName&&c.href){e=c;break}if(!e)return null;if('_blank'===e.target)return null;if(('_top'===e.target||'_parent'===e.target)&&window.top!==window)return null;if(e.download)return null;var g,h=e.href;g=null==document.baseURI?a(h):a(h,document.baseURI);var i=this.__location.origin?this.__location.origin:this.__location.protocol+'//'+this.__location.host;var j;if(g.origin)j=g.origin;else{var k=g.host,l=g.port,m=g.protocol;('https:'===m&&'443'===l||'http:'===m&&'80'===l)&&(k=g.hostname),j=m+'//'+k}if(j!==i)return null;var n=g.pathname+g.search+g.hash;if('/'!==n[0]&&(n='/'+n),this._urlSpaceRegExp&&!this._urlSpaceRegExp.test(n))return null;var o=a(n,this.__location.href).href;return o},_makeRegExp:function(a){return RegExp(a)}})})();</script><script>class IronQueryParams extends Polymer.Element{static get is(){return'iron-query-params'}static get properties(){return{paramsString:{type:String,notify:!0,observer:'paramsStringChanged'},paramsObject:{type:Object,notify:!0},_dontReact:{type:Boolean,value:!1}}}static get observers(){return['paramsObjectChanged(paramsObject.*)']}paramsStringChanged(a){this._dontReact=!0,this.paramsObject=this._decodeParams(a),this._dontReact=!1}paramsObjectChanged(){if(!this._dontReact){let a=this._encodeParams(this.paramsObject).replace(/%3F/g,'?').replace(/%2F/g,'/').replace(/'/g,'%27');a&&(this.paramsString=a)}}_encodeParams(a){const b=[];for(let c in a){const d=a[c];''===d?b.push(encodeURIComponent(c)):d&&b.push(encodeURIComponent(c)+'='+encodeURIComponent(d.toString()))}return b.join('&')}_decodeParams(a){const b={};a=(a||'').replace(/\+/g,'%20');const c=a.split('&');for(let d=0;d<c.length;d++){const a=c[d].split('=');a[0]&&(b[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||''))}return b}}customElements.define(IronQueryParams.is,IronQueryParams);</script><script>(function(a){'use strict';function b(a){if('string'!==typeof a&&(a+=''),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError('Invalid character in header field name');return a.toLowerCase()}function c(a){return'string'!==typeof a&&(a+=''),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return r.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){return a.bodyUsed?Promise.reject(new TypeError('Already read')):void(a.bodyUsed=!0)}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader,c=g(b);return b.readAsArrayBuffer(a),c}function i(a){var b=new FileReader,c=g(b);return b.readAsText(a),c}function j(a){for(var b=new Uint8Array(a),c=Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join('')}function k(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,!a)this._bodyText='';else if('string'===typeof a)this._bodyText=a;else if(r.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(r.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(r.arrayBuffer&&r.blob&&t(a))this._bodyArrayBuffer=k(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||u(a)))this._bodyArrayBuffer=k(a);else throw new Error('unsupported BodyInit type');this.headers.get('content-type')||('string'===typeof a?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'))},r.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error('could not read FormData body as blob');else return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return i(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(j(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error('could not read FormData body as text');else return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(o)}),this.json=function(){return this.text().then(JSON.parse)},this}function m(a){var b=a.toUpperCase();return-1<v.indexOf(b)?b:a}function n(a,b){b=b||{};var c=b.body;if(a instanceof n){if(a.bodyUsed)throw new TypeError('Already read');this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}else this.url=a+'';if(this.credentials=b.credentials||this.credentials||'omit',(b.headers||!this.headers)&&(this.headers=new e(b.headers)),this.method=m(b.method||this.method||'GET'),this.mode=b.mode||this.mode||null,this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&c)throw new TypeError('Body not allowed for GET or HEAD requests');this._initBody(c)}function o(a){var b=new FormData;return a.trim().split('&').forEach(function(a){if(a){var c=a.split('='),d=c.shift().replace(/\+/g,' '),e=c.join('=').replace(/\+/g,' ');b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function p(a){var b=new e,c=a.replace(/\r?\n[\t ]+/g,' ');return c.split(/\r?\n/).forEach(function(a){var c=a.split(':'),d=c.shift().trim();if(d){var e=c.join(':').trim();b.append(d,e)}}),b}function q(a,b){b||(b={}),this.type='default',this.status=b.status===void 0?200:b.status,this.ok=200<=this.status&&300>this.status,this.statusText='statusText'in b?b.statusText:'OK',this.headers=new e(b.headers),this.url=b.url||'',this._initBody(a)}if(!a.fetch){var r={searchParams:'URLSearchParams'in a,iterable:'Symbol'in a&&'iterator'in Symbol,blob:'FileReader'in a&&'Blob'in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:'FormData'in a,arrayBuffer:'ArrayBuffer'in a};if(r.arrayBuffer)var s=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],t=function(a){return a&&DataView.prototype.isPrototypeOf(a)},u=ArrayBuffer.isView||function(a){return a&&-1<s.indexOf(Object.prototype.toString.call(a))};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];this.map[a]=e?e+','+d:d},e.prototype['delete']=function(a){delete this.map[b(a)]},e.prototype.get=function(a){return a=b(a),this.has(a)?this.map[a]:null},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=c(d)},e.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},r.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var v=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];n.prototype.clone=function(){return new n(this,{body:this._bodyInit})},l.call(n.prototype),l.call(q.prototype),q.prototype.clone=function(){return new q(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},q.error=function(){var a=new q(null,{status:0,statusText:''});return a.type='error',a};var w=[301,302,303,307,308];q.redirect=function(a,b){if(-1===w.indexOf(b))throw new RangeError('Invalid status code');return new q(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=n,a.Response=q,a.fetch=function(a,b){return new Promise(function(c,d){var e=new n(a,b),f=new XMLHttpRequest;f.onload=function(){var a={status:f.status,statusText:f.statusText,headers:p(f.getAllResponseHeaders()||'')};a.url='responseURL'in f?f.responseURL:a.headers.get('X-Request-URL');var b='response'in f?f.response:f.responseText;c(new q(b,a))},f.onerror=function(){d(new TypeError('Network request failed'))},f.ontimeout=function(){d(new TypeError('Network request failed'))},f.open(e.method,e.url,!0),'include'===e.credentials?f.withCredentials=!0:'omit'===e.credentials&&(f.withCredentials=!1),'responseType'in f&&r.blob&&(f.responseType='blob'),e.headers.forEach(function(a,b){f.setRequestHeader(b,a)}),f.send('undefined'===typeof e._bodyInit?null:e._bodyInit)})},a.fetch.polyfill=!0}})('undefined'===typeof self?this:self);</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FetchMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{urlPrefix:{type:String,value:''},noEqualityCheck:{type:Boolean},saveInLocalStorage:{type:Boolean}}}_fetch(a,b,c,d,e,f,g,h){if(a===void 0)return Promise.resolve();const i=this.urlPrefix+a;f=f||this.saveInLocalStorage,g=g||this.noEqualityCheck;return fetch(i,{method:b,credentials:c||'include',body:h}).then((a)=>400>a.status?'json'===d?a.json():a.text():(a=localStorage.getItem(i))?(console.warn(i,a),a):Promise.reject(a)).then((a)=>(e&&void 0!==a&&(g||!this[e]||!this._equals(this[e],a))&&this.set(e,a),f&&void 0!==i&&void 0!==a&&('json'===d&&'string'!==typeof a?localStorage.setItem(i,JSON.stringify(a)):localStorage.setItem(i,a)),'xml'===d&&void 0!==a?new window.DOMParser().parseFromString(a,'text/xml'):Promise.resolve(a))).catch((a)=>{if(f&&e&&i!==void 0){let a=localStorage.getItem(i);a&&('json'===d&&(a=JSON.parse(a)),this.set(e,a))}return Promise.reject(a)})}_equals(a,b){if(a===b)return!0;if(!(a instanceof Object)||!(b instanceof Object))return!1;if(a.constructor!==b.constructor)return!1;for(let c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c))return!1;if(a[c]!==b[c]){if('object'!==typeof a[c])return!1;if(!this._equals(a[c],b[c]))return!1}}for(let c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0}}};</script><script>const _languageMixinElements=new Set;window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.LocalizeMixin=function(a){return class extends WebvisualMixins.FetchMixin(a){constructor(){super()}static get properties(){return{language:{type:String,value:window.navigator.language,notify:!0,observer:'_languageChanged'},customLanguage:{type:Boolean,value:!1},fallbackLanguage:{type:String,value:'en'},localesDictionary:{type:Object,notify:!0,value:function(){return{}}},localesUrlPrefix:{type:String},localize:{type:Function,computed:'__computeLocalize(localesDictionary, language)'}}}static get observers(){return['_loadLocalesDictionary(localesUrlPrefix, language)','_customLanguageChanged(customLanguage)']}_loadLocalesDictionary(a,b,c){if(void 0===a||!b||this._recentLanguage===b)return;b=b.toLowerCase(),Array.isArray(a)||(a=[a]);const d=this._recentLanguage===b?this.localesDictionary||{}:{};for(let e=0;e<a.length;e++)this._fetch(a[e]+b+'.json','GET','include','json',null,!0,!0).then((a)=>{for(let b in a)d[b]=a[b];this.set('localesDictionary',d),this._recentLanguage=b}).catch((d)=>{c=c||0,1<b.split('-').length?this._loadLocalesDictionary(a,b.split('-')[0],++c):c===void 0||3>c?this._loadLocalesDictionary(a,this.fallbackLanguage,++c):console.log(a,b,d)})}__computeLocalize(a){return function(){if(!(a&&arguments[0]&&'string'===typeof arguments[0]))return'';let b=a[arguments[0]];for(let a=1;a<arguments.length;a++){if((b&&b[arguments[a]])===void 0)return arguments[arguments.length-1];b=b[arguments[a]]}return b}}_languageChanged(a){this.customLanguage||_languageMixinElements.forEach((b)=>{b.language!==a&&(b.language=a)})}_customLanguageChanged(a){!0===a?_languageMixinElements.delete(this):_languageMixinElements.add(this)}}};</script><script>(function(){'use strict';function a(a,b){var c='';if(a){var d=a.toLowerCase();' '===d||o.test(d)?c='space':p.test(d)?c='esc':1==d.length?(!b||l.test(d))&&(c=d):n.test(d)?c=d.replace('arrow',''):'multiply'==d?c='*':c=d}return c}function b(a){var b='';return a&&(a in i?b=i[a]:m.test(a)?(a=parseInt(a.replace('U+','0x'),16),b=h(a).toLowerCase()):b=a.toLowerCase()),b}function c(a){var b='';return+a&&(65<=a&&90>=a?b=h(32+a):112<=a&&123>=a?b='f'+(a-112+1):48<=a&&57>=a?b=a-48+'':96<=a&&105>=a?b=a-96+'':b=j[a]),b}function d(d,e){return d.key?a(d.key,e):d.detail&&d.detail.key?a(d.detail.key,e):b(d.keyIdentifier)||c(d.keyCode)||''}function e(a,b){var c=d(b,a.hasModifiers);return c===a.key&&(!a.hasModifiers||!!b.shiftKey===!!a.shiftKey&&!!b.ctrlKey===!!a.ctrlKey&&!!b.altKey===!!a.altKey&&!!b.metaKey===!!a.metaKey)}function f(a){return 1===a.length?{combo:a,key:a,event:'keydown'}:a.split('+').reduce(function(a,b){var c=b.split(':'),d=c[0],e=c[1];return d in k?(a[k[d]]=!0,a.hasModifiers=!0):(a.key=d,a.event=e||'keydown'),a},{combo:a.split(':').shift()})}function g(a){return a.trim().split(' ').map(function(a){return f(a)})}var h=String.fromCharCode,i={"U+0008":'backspace',"U+0009":'tab',"U+001B":'esc',"U+0020":'space',"U+007F":'del'},j={8:'backspace',9:'tab',13:'enter',27:'esc',32:'space',33:'pageup',34:'pagedown',35:'end',36:'home',37:'left',38:'up',39:'right',40:'down',46:'del',106:'*'},k={shift:'shiftKey',ctrl:'ctrlKey',alt:'altKey',meta:'metaKey'},l=/[a-z0-9*]/,m=/U\+/,n=/^arrow/,o=/^space(bar)?/,p=/^escape$/;Polymer.IronA11yKeysBehavior={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:['_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)'],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(a,b){this._imperativeKeyBindings[a]=b,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(a,b){for(var c=g(b),d=0;d<c.length;++d)if(e(c[d],a))return!0;return!1},_collectKeyBindings:function(){var a=this.behaviors.map(function(a){return a.keyBindings});return-1===a.indexOf(this.keyBindings)&&a.push(this.keyBindings),a},_prepKeyBindings:function(){for(var a in this._keyBindings={},this._collectKeyBindings().forEach(function(a){for(var b in a)this._addKeyBinding(b,a[b])},this),this._imperativeKeyBindings)this._addKeyBinding(a,this._imperativeKeyBindings[a]);for(var b in this._keyBindings)this._keyBindings[b].sort(function(a,b){var c=a[0].hasModifiers,d=b[0].hasModifiers;return c===d?0:c?-1:1})},_addKeyBinding:function(a,b){g(a).forEach(function(a){this._keyBindings[a.event]=this._keyBindings[a.event]||[],this._keyBindings[a.event].push([a,b])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){this.keyEventTarget&&Object.keys(this._keyBindings).forEach(function(a){var b=this._keyBindings[a],c=this._onKeyBindingEvent.bind(this,b);this._boundKeyHandlers.push([this.keyEventTarget,a,c]),this.keyEventTarget.addEventListener(a,c)},this)},_unlistenKeyEventListeners:function(){for(var a,b,c,d;this._boundKeyHandlers.length;)a=this._boundKeyHandlers.pop(),b=a[0],c=a[1],d=a[2],b.removeEventListener(c,d)},_onKeyBindingEvent:function(a,b){if(this.stopKeyboardEventPropagation&&b.stopPropagation(),!b.defaultPrevented)for(var c=0;c<a.length;c++){var d=a[c][0],f=a[c][1];if(e(d,b)&&(this._triggerKeyHandler(d,f,b),b.defaultPrevented))return}},_triggerKeyHandler:function(a,b,c){var d=Object.create(a);d.keyboardEvent=c;var e=new CustomEvent(a.event,{detail:d,cancelable:!0});this[b].call(this,e),e.defaultPrevented&&c.preventDefault()}}})();</script><dom-module id="paper-ripple" assetpath="../bower_components/paper-ripple/"><template><style>:host{display:block;position:absolute;border-radius:inherit;overflow:hidden;top:0;left:0;right:0;bottom:0;pointer-events:none;}:host([animating]){-webkit-transform:translate(0, 0);transform:translate3d(0, 0, 0);}#background,
      #waves,
      .wave-container,
      .wave{pointer-events:none;position:absolute;top:0;left:0;width:100%;height:100%;}#background,
      .wave{opacity:0;}#waves,
      .wave{overflow:hidden;}.wave-container,
      .wave{border-radius:50%;}:host(.circle) #background,
      :host(.circle) #waves{border-radius:50%;}:host(.circle) .wave-container{overflow:hidden;}</style><div id="background"></div><div id="waves"></div></template></dom-module><script>(function(){'use strict';function a(a){this.element=a,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=d(this.width,this.height)}function b(a){this.element=a,this.color=window.getComputedStyle(a).color,this.wave=document.createElement('div'),this.waveContainer=document.createElement('div'),this.wave.style.backgroundColor=this.color,this.wave.classList.add('wave'),this.waveContainer.classList.add('wave-container'),Polymer.dom(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}var c=Math.min,d=Math.max,e=Math.sqrt,f={distance:function(a,b,c,d){var f=a-c,g=b-d;return e(f*f+g*g)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};a.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(a,b){var c=f.distance(a,b,0,0),e=f.distance(a,b,this.width,0),g=f.distance(a,b,0,this.height),h=f.distance(a,b,this.width,this.height);return d(c,e,g,h)}},b.MAX_RADIUS=300,b.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var a;return this.mouseDownStart?(a=f.now()-this.mouseDownStart,this.mouseUpStart&&(a-=this.mouseUpElapsed),a):0},get mouseUpElapsed(){return this.mouseUpStart?f.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var a=this.containerMetrics.width*this.containerMetrics.width,d=this.containerMetrics.height*this.containerMetrics.height,f=1.1*c(e(a+d),b.MAX_RADIUS)+5,g=1.1-0.2*(f/b.MAX_RADIUS),h=this.mouseInteractionSeconds/g,i=f*(1-Math.pow(80,-h));return Math.abs(i)},get opacity(){return this.mouseUpStart?d(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var a=0.3*this.mouseUpElapsedSeconds,b=this.opacity;return d(0,c(a,b))},get isOpacityFullyDecayed(){return 0.01>this.opacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=c(this.maxRadius,b.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return c(1,2*(this.radius/this.containerMetrics.size)/1.4142135623730951)},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new a(this.element)},draw:function(){var a,b,c;this.wave.style.opacity=this.opacity,a=this.radius/(this.containerMetrics.size/2),b=this.xNow-this.containerMetrics.width/2,c=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform='translate('+b+'px, '+c+'px)',this.waveContainer.style.transform='translate3d('+b+'px, '+c+'px, 0)',this.wave.style.webkitTransform='scale('+a+','+a+')',this.wave.style.transform='scale3d('+a+','+a+',1)'},downAction:function(a){var b=this.containerMetrics.width/2,c=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=f.now(),this.center?(this.xStart=b,this.yStart=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=a?a.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=a?a.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=b,this.yEnd=c,this.slideDistance=f.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+'px',this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+'px',this.waveContainer.style.width=this.containerMetrics.size+'px',this.waveContainer.style.height=this.containerMetrics.size+'px'},upAction:function(){this.isMouseDown&&(this.mouseUpStart=f.now())},remove:function(){Polymer.dom(this.waveContainer.parentNode).removeChild(this.waveContainer)}},Polymer({is:'paper-ripple',behaviors:[Polymer.IronA11yKeysBehavior],properties:{initialOpacity:{type:Number,value:0.25},opacityDecayVelocity:{type:Number,value:0.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:'_holdDownChanged'},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":'_onEnterKeydown',"space:keydown":'_onSpaceKeydown',"space:keyup":'_onSpaceKeyup'},attached:function(){this.keyEventTarget=11==this.parentNode.nodeType?Polymer.dom(this).getOwnerRoot().host:this.parentNode;var a=this.keyEventTarget;this.listen(a,'up','uiUpAction'),this.listen(a,'down','uiDownAction')},detached:function(){this.unlisten(this.keyEventTarget,'up','uiUpAction'),this.unlisten(this.keyEventTarget,'down','uiDownAction'),this.keyEventTarget=null},get shouldKeepAnimating(){for(var a=0;a<this.ripples.length;++a)if(!this.ripples[a].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(a){this.noink||this.downAction(a)},downAction:function(a){if(!(this.holdDown&&0<this.ripples.length)){var b=this.addRipple();b.downAction(a),this._animating||(this._animating=!0,this.animate())}},uiUpAction:function(a){this.noink||this.upAction(a)},upAction:function(a){this.holdDown||(this.ripples.forEach(function(b){b.upAction(a)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor=null,this.fire('transitionend')},addRipple:function(){var a=new b(this);return Polymer.dom(this.$.waves).appendChild(a.waveContainer),this.$.background.style.backgroundColor=a.color,this.ripples.push(a),this._setAnimating(!0),a},removeRipple:function(a){var b=this.ripples.indexOf(a);0>b||(this.ripples.splice(b,1),a.remove(),!this.ripples.length&&this._setAnimating(!1))},animate:function(){if(this._animating){var a,b;for(a=0;a<this.ripples.length;++a)b=this.ripples[a],b.draw(),this.$.background.style.opacity=b.outerOpacity,b.isOpacityFullyDecayed&&!b.isRestingAtMaxRadius&&this.removeRipple(b);this.shouldKeepAnimating||0!==this.ripples.length?window.requestAnimationFrame(this._boundAnimate):this.onAnimationComplete()}},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(a,b){void 0===b||(a?this.downAction():this.upAction())}})})();</script><script>(function(){Polymer.IronMeta=function(a){Polymer.IronMeta[' '](a),this.type=a&&a.type||'default',this.key=a&&a.key,a&&'value'in a&&(this.value=a.value)},Polymer.IronMeta[' ']=function(){},Polymer.IronMeta.types={},Polymer.IronMeta.prototype={get value(){var a=this.type,b=this.key;if(a&&b)return Polymer.IronMeta.types[a]&&Polymer.IronMeta.types[a][b]},set value(a){var b=this.type,c=this.key;b&&c&&(b=Polymer.IronMeta.types[b]=Polymer.IronMeta.types[b]||{},null==a?delete b[c]:b[c]=a)},get list(){var b=this.type;if(b){var c=Polymer.IronMeta.types[this.type];return c?Object.keys(c).map(function(b){return a[this.type][b]},this):[]}},byKey:function(a){return this.key=a,this.value}};var a=Polymer.IronMeta.types;Polymer({is:'iron-meta',properties:{type:{type:String,value:'default'},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:'_selfChanged'},__meta:{type:Boolean,computed:'__computeMeta(type, key, value)'}},hostAttributes:{hidden:!0},__computeMeta:function(a,b,c){var d=new Polymer.IronMeta({type:a,key:b});return void 0!==c&&c!==d.value?d.value=c:this.value!==d.value&&(this.value=d.value),d},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(a){a&&(this.value=this)},byKey:function(a){return new Polymer.IronMeta({type:this.type,key:a}).value}})})();</script><dom-module id="iron-icon" assetpath="../bower_components/iron-icon/"><template><style>:host{@apply --layout-inline;@apply --layout-center-center;position:relative;vertical-align:middle;fill:var(--iron-icon-fill-color, currentcolor);stroke:var(--iron-icon-stroke-color, none);width:var(--iron-icon-width, 24px);height:var(--iron-icon-height, 24px);@apply --iron-icon;}:host([hidden]){display:none;}</style></template><script>Polymer({is:'iron-icon',properties:{icon:{type:String},theme:{type:String},src:{type:String},_meta:{value:Polymer.Base.create('iron-meta',{type:'iconset'})}},observers:['_updateIcon(_meta, isAttached)','_updateIcon(theme, isAttached)','_srcChanged(src, isAttached)','_iconChanged(icon, isAttached)'],_DEFAULT_ICONSET:'icons',_iconChanged:function(a){var b=(a||'').split(':');this._iconName=b.pop(),this._iconsetName=b.pop()||this._DEFAULT_ICONSET,this._updateIcon()},_srcChanged:function(){this._updateIcon()},_usesIconset:function(){return this.icon||!this.src},_updateIcon:function(){this._usesIconset()?(this._img&&this._img.parentNode&&Polymer.dom(this.root).removeChild(this._img),''===this._iconName?this._iconset&&this._iconset.removeIcon(this):this._iconsetName&&this._meta&&(this._iconset=this._meta.byKey(this._iconsetName),this._iconset?(this._iconset.applyIcon(this,this._iconName,this.theme),this.unlisten(window,'iron-iconset-added','_updateIcon')):this.listen(window,'iron-iconset-added','_updateIcon'))):(this._iconset&&this._iconset.removeIcon(this),!this._img&&(this._img=document.createElement('img'),this._img.style.width='100%',this._img.style.height='100%',this._img.draggable=!1),this._img.src=this.src,Polymer.dom(this.root).appendChild(this._img))}});</script></dom-module><script>Polymer({is:'iron-iconset-svg',properties:{name:{type:String,observer:'_nameChanged'},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new Polymer.IronMeta({type:'iconset',key:null,value:null})},attached:function(){this.style.display='none'},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map(function(a){return this.name+':'+a},this)},applyIcon:function(a,b){this.removeIcon(a);var c=this._cloneIcon(b,this.rtlMirroring&&this._targetIsRTL(a));if(c){var d=Polymer.dom(a.root||a);return d.insertBefore(c,d.childNodes[0]),a._svgIcon=c}return null},removeIcon:function(a){a._svgIcon&&(Polymer.dom(a.root||a).removeChild(a._svgIcon),a._svgIcon=null)},_targetIsRTL:function(a){if(null==this.__targetIsRTL)if(this.useGlobalRtlAttribute){var b=document.body&&document.body.hasAttribute('dir')?document.body:document.documentElement;this.__targetIsRTL='rtl'===b.getAttribute('dir')}else a&&a.nodeType!==Node.ELEMENT_NODE&&(a=a.host),this.__targetIsRTL=a&&'rtl'===window.getComputedStyle(a).direction;return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null,this._meta.key=this.name,this._meta.value=this,this.async(function(){this.fire('iron-iconset-added',this,{node:window})})},_createIconMap:function(){var a=Object.create(null);return Polymer.dom(this).querySelectorAll('[id]').forEach(function(b){a[b.id]=b}),a},_cloneIcon:function(a,b){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[a],this.size,b)},_prepareSvgClone:function(a,b,c){if(a){var d=a.cloneNode(!0),e=document.createElementNS('http://www.w3.org/2000/svg','svg'),f=d.getAttribute('viewBox')||'0 0 '+b+' '+b,g='pointer-events: none; display: block; width: 100%; height: 100%;';return c&&d.hasAttribute('mirror-in-rtl')&&(g+='-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;'),e.setAttribute('viewBox',f),e.setAttribute('preserveAspectRatio','xMidYMid meet'),e.setAttribute('focusable','false'),e.style.cssText=g,e.appendChild(d).removeAttribute('id'),e}return null}});</script><iron-iconset-svg size="24" name="icons"><svg><defs><g id="aspect-ratio"><path d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"></path></g><g id="assignment-ind"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"></path></g><g id="border-style"><path d="M15 21h2v-2h-2v2zm4 0h2v-2h-2v2zM7 21h2v-2H7v2zm4 0h2v-2h-2v2zm8-4h2v-2h-2v2zm0-4h2v-2h-2v2zM3 3v18h2V5h16V3H3zm16 6h2V7h-2v2z"></path></g><g id="camera-alt"><circle cx="12" cy="12" r="3.2"></circle><path d="M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"></path></g><g id="check"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path></g><g id="chrome-reader-mode"><path d="M13 12h7v1.5h-7zm0-2.5h7V11h-7zm0 5h7V16h-7zM21 4H3c-1.1 0-2 .9-2 2v13c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 15h-9V6h9v13z"></path></g><g id="close"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></g><g id="date-range"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></g><g id="error"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path></g><g id="exit-to-app"><path d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"></path></g><g id="expand-less"><path d="M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"></path></g><g id="expand-more"><path d="M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"></path></g><g id="event"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"></path></g><g id="file-download"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></g><g id="filter-list"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"></path></g><g id="filter-center-focus"><path d="M5 15H3v4c0 1.1.9 2 2 2h4v-2H5v-4zM5 5h4V3H5c-1.1 0-2 .9-2 2v4h2V5zm14-2h-4v2h4v4h2V5c0-1.1-.9-2-2-2zm0 16h-4v2h4c1.1 0 2-.9 2-2v-4h-2v4zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></g><g id="filter-tilt-shift"><path d="M11 4.07V2.05c-2.01.2-3.84 1-5.32 2.21L7.1 5.69c1.11-.86 2.44-1.44 3.9-1.62zm7.32.19C16.84 3.05 15.01 2.25 13 2.05v2.02c1.46.18 2.79.76 3.9 1.62l1.42-1.43zM19.93 11h2.02c-.2-2.01-1-3.84-2.21-5.32L18.31 7.1c.86 1.11 1.44 2.44 1.62 3.9zM5.69 7.1L4.26 5.68C3.05 7.16 2.25 8.99 2.05 11h2.02c.18-1.46.76-2.79 1.62-3.9zM4.07 13H2.05c.2 2.01 1 3.84 2.21 5.32l1.43-1.43c-.86-1.1-1.44-2.43-1.62-3.89zM15 12c0-1.66-1.34-3-3-3s-3 1.34-3 3 1.34 3 3 3 3-1.34 3-3zm3.31 4.9l1.43 1.43c1.21-1.48 2.01-3.32 2.21-5.32h-2.02c-.18 1.45-.76 2.78-1.62 3.89zM13 19.93v2.02c2.01-.2 3.84-1 5.32-2.21l-1.43-1.43c-1.1.86-2.43 1.44-3.89 1.62zm-7.32-.19C7.16 20.95 9 21.75 11 21.95v-2.02c-1.46-.18-2.79-.76-3.9-1.62l-1.42 1.43z"></path></g><g id="first-page"><path d="M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"></path></g><g id="fullscreen"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"></path></g><g id="fullscreen-exit"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"></path></g><g id="invert-colors"><path d="M17.66 7.93L12 2.27 6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58c2.05 0 4.1-.78 5.66-2.34 3.12-3.12 3.12-8.19 0-11.31zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"></path></g><g id="language"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"></path></g><g id="grid-on"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"></path></g><g id="last-page"><path d="M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"></path></g><g id="list"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"></path></g><g id="map"><path d="M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5zM15 19l-6-2.11V5l6 2.11V19z"></path></g><g id="menu"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></g><g id="more-horiz"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="more-vert"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></g><g id="person"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></g><g id="person-add"><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></g><g id="person-outline"><path d="M12 5.9c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1m0 9c2.97 0 6.1 1.46 6.1 2.1v1.1H5.9V17c0-.64 3.13-2.1 6.1-2.1M12 4C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4z"></path></g><g id="refresh"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path></g><g id="settings"><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></g><g id="show-chart"><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"></path></g><g id="style"><path d="M2.53 19.65l1.34.56v-9.03l-2.43 5.86c-.41 1.02.08 2.19 1.09 2.61zm19.5-3.7L17.07 3.98c-.31-.75-1.04-1.21-1.81-1.23-.26 0-.53.04-.79.15L7.1 5.95c-.75.31-1.21 1.03-1.23 1.8-.01.27.04.54.15.8l4.96 11.97c.31.76 1.05 1.22 1.83 1.23.26 0 .52-.05.77-.15l7.36-3.05c1.02-.42 1.51-1.59 1.09-2.6zM7.88 8.75c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-2 11c0 1.1.9 2 2 2h1.45l-3.45-8.34v6.34z"></path></g><g id="subject"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path></g><g id="sync"><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path></g><g id="sync-disabled"><path d="M10 6.35V4.26c-.8.21-1.55.54-2.23.96l1.46 1.46c.25-.12.5-.24.77-.33zm-7.14-.94l2.36 2.36C4.45 8.99 4 10.44 4 12c0 2.21.91 4.2 2.36 5.64L4 20h6v-6l-2.24 2.24C6.68 15.15 6 13.66 6 12c0-1 .25-1.94.68-2.77l8.08 8.08c-.25.13-.5.25-.77.34v2.09c.8-.21 1.55-.54 2.23-.96l2.36 2.36 1.27-1.27L4.14 4.14 2.86 5.41zM20 4h-6v6l2.24-2.24C17.32 8.85 18 10.34 18 12c0 1-.25 1.94-.68 2.77l1.46 1.46C19.55 15.01 20 13.56 20 12c0-2.21-.91-4.2-2.36-5.64L20 4z"></path></g><g id="sync-problem"><path d="M3 12c0 2.21.91 4.2 2.36 5.64L3 20h6v-6l-2.24 2.24C5.68 15.15 5 13.66 5 12c0-2.61 1.67-4.83 4-5.65V4.26C5.55 5.15 3 8.27 3 12zm8 5h2v-2h-2v2zM21 4h-6v6l2.24-2.24C18.32 8.85 19 10.34 19 12c0 2.61-1.67 4.83-4 5.65v2.09c3.45-.89 6-4.01 6-7.74 0-2.21-.91-4.2-2.36-5.64L21 4zm-10 9h2V7h-2v6z"></path></g><g id="timeline"><path d="M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2z"></path></g><g id="tune"><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"></path></g><g id="warning"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"></path></g><g id="unfold-less"><path d="M7.41 18.59L8.83 20 12 16.83 15.17 20l1.41-1.41L12 14l-4.59 4.59zm9.18-13.18L15.17 4 12 7.17 8.83 4 7.41 5.41 12 10l4.59-4.59z"></path></g><g id="unfold-more"><path d="M12 5.83L15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"></path></g><g id="wifi"><path d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"></path></g><g id="zoom-in"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zm2.5-4h-2v2H9v-2H7V9h2V7h1v2h2v1z"></path></g></defs></svg></iron-iconset-svg><iron-iconset-svg name="juelich" size="48"><svg><defs><g id="logo"><path d="M 23.981111,0.01697143 C 14.553832,-0.34219513 4.8824589,5.0255389 0.91747276,13.699393 -0.87331131,17.401886 -0.03295283,22.265238 3.3541788,24.77002 7.668236,28.340124 14.931648,26.582835 17.269729,21.522442 19.890731,15.32075 22.28261,9.0187236 24.812796,2.7772709 25.16317,1.8990352 25.513543,1.0207995 25.863917,0.14256375 25.238194,0.07696703 24.609959,0.03587116 23.981111,0.01697143 Z M 40.109833,6.4531887 C 37.294404,13.413996 34.61079,20.430741 31.706502,27.353855 28.340823,34.730295 20.969396,40.026361 12.895915,40.852436 10.661887,41.354304 6.912866,40.702628 5.6143785,40.901736 12.838079,48.101542 24.574564,50.047998 33.781507,45.709607 42.267735,41.976174 48.221748,33.03946 47.993668,23.712707 47.932958,17.183268 44.963037,10.802841 40.109833,6.4531917 Z"></path></g></defs></svg></iron-iconset-svg><dom-module id="icon-button" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{display:inline-flex;position:relative;--calculated-icon-size:var(--icon-size, 1.5em);--calculated-icon-padding:var(--icon-padding, 0.5em);color:currentColor;pointer-events:all;align-items:center;justify-content:center;outline:none;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;line-height:0;flex-shrink:0;font-size:1em;border-radius:50%;border-width:0;background-color:transparent;transition:background-color 250ms cubic-bezier(0.6, 0, 0.2, 1);padding:var(--calculated-icon-padding);width:calc(2*var(--calculated-icon-padding) + var(--calculated-icon-size));height:calc(2*var(--calculated-icon-padding) + var(--calculated-icon-size));box-sizing:border-box !important;pointer-events:all;@apply --icon-button;}:host([checked]){@apply --checked-icon-button;}:host([disabled]){color:var(--disabled-text-color);background-color:transparent;border-color:var(--disabled-text-color);cursor:auto;pointer-events:none;@apply --disabled-icon-button;}:host(:hover),
      :host(:focus){background-color:var(--icon-hover-background, transparent);}iron-icon{--iron-icon-width:var(--calculated-icon-size);--iron-icon-height:var(--calculated-icon-size);}#ripple{color:var(--icon-ink, currentColor);border-radius:inherit;}</style><paper-ripple id="ripple" center=""></paper-ripple><iron-icon id="icon" icon="[[icon]]" alt$="[[alt]]"></iron-icon></template><script>class IconButton extends Polymer.Element{static get is(){return'icon-button'}static get properties(){return{icon:{type:String},alt:{type:String,observer:'_altChanged'},checked:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0}}}connectedCallback(){super.connectedCallback(),Polymer.Gestures.addListener(this,'tap',(a)=>this._changeChecked(a))}disconnectedCallback(){super.disconnectedCallback(),Polymer.Gestures.removeListener(this,'tap',(a)=>this._changeChecked(a))}_altChanged(a,b){const c=this.getAttribute('aria-system');c&&b!==c||this.setAttribute('aria-system',a)}_changeChecked(){this.checked=!this.checked}}customElements.define(IconButton.is,IconButton);</script></dom-module><script>Polymer.IronFitBehavior={properties:{sizingTarget:{type:Object,value:function(){return this}},fitInto:{type:Object,value:window},noOverlap:{type:Boolean},positionTarget:{type:Element},horizontalAlign:{type:String},verticalAlign:{type:String},dynamicAlign:{type:Boolean},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0},autoFitOnAttach:{type:Boolean,value:!1},_fitInfo:{type:Object}},get _fitWidth(){var a;return a=this.fitInto===window?this.fitInto.innerWidth:this.fitInto.getBoundingClientRect().width,a},get _fitHeight(){var a;return a=this.fitInto===window?this.fitInto.innerHeight:this.fitInto.getBoundingClientRect().height,a},get _fitLeft(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().left,a},get _fitTop(){var a;return a=this.fitInto===window?0:this.fitInto.getBoundingClientRect().top,a},get _defaultPositionTarget(){var a=Polymer.dom(this).parentNode;return a&&a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(a=a.host),a},get _localeHorizontalAlign(){if(this._isRTL){if('right'===this.horizontalAlign)return'left';if('left'===this.horizontalAlign)return'right'}return this.horizontalAlign},get __shouldPosition(){return(this.horizontalAlign||this.verticalAlign)&&('center'!==this.horizontalAlign||'middle'!==this.verticalAlign)},attached:function(){'undefined'===typeof this._isRTL&&(this._isRTL='rtl'==window.getComputedStyle(this).direction),this.positionTarget=this.positionTarget||this._defaultPositionTarget,this.autoFitOnAttach&&('none'===window.getComputedStyle(this).display?setTimeout(function(){this.fit()}.bind(this)):(window.ShadyDOM&&ShadyDOM.flush(),this.fit()))},detached:function(){this.__deferredFit&&(clearTimeout(this.__deferredFit),this.__deferredFit=null)},fit:function(){this.position(),this.constrain(),this.center()},_discoverInfo:function(){if(!this._fitInfo){var a=window.getComputedStyle(this),b=window.getComputedStyle(this.sizingTarget);this._fitInfo={inlineStyle:{top:this.style.top||'',left:this.style.left||'',position:this.style.position||''},sizerInlineStyle:{maxWidth:this.sizingTarget.style.maxWidth||'',maxHeight:this.sizingTarget.style.maxHeight||'',boxSizing:this.sizingTarget.style.boxSizing||''},positionedBy:{vertically:'auto'===a.top?'auto'===a.bottom?null:'bottom':'top',horizontally:'auto'===a.left?'auto'===a.right?null:'right':'left'},sizedBy:{height:'none'!==b.maxHeight,width:'none'!==b.maxWidth,minWidth:parseInt(b.minWidth,10)||0,minHeight:parseInt(b.minHeight,10)||0},margin:{top:parseInt(a.marginTop,10)||0,right:parseInt(a.marginRight,10)||0,bottom:parseInt(a.marginBottom,10)||0,left:parseInt(a.marginLeft,10)||0}}}},resetFit:function(){var a=this._fitInfo||{};for(var b in a.sizerInlineStyle)this.sizingTarget.style[b]=a.sizerInlineStyle[b];for(var b in a.inlineStyle)this.style[b]=a.inlineStyle[b];this._fitInfo=null},refit:function(){var a=this.sizingTarget.scrollLeft,b=this.sizingTarget.scrollTop;this.resetFit(),this.fit(),this.sizingTarget.scrollLeft=a,this.sizingTarget.scrollTop=b},position:function(){var a=Math.max,b=Math.min;if(this.__shouldPosition){this._discoverInfo(),this.style.position='fixed',this.sizingTarget.style.boxSizing='border-box',this.style.left='0px',this.style.top='0px';var c=this.getBoundingClientRect(),d=this.__getNormalizedRect(this.positionTarget),e=this.__getNormalizedRect(this.fitInto),f=this._fitInfo.margin,g={width:c.width+f.left+f.right,height:c.height+f.top+f.bottom},h=this.__getPosition(this._localeHorizontalAlign,this.verticalAlign,g,c,d,e),i=h.left+f.left,j=h.top+f.top,k=b(e.right-f.right,i+c.width),l=b(e.bottom-f.bottom,j+c.height);i=a(e.left+f.left,b(i,k-this._fitInfo.sizedBy.minWidth)),j=a(e.top+f.top,b(j,l-this._fitInfo.sizedBy.minHeight)),this.sizingTarget.style.maxWidth=a(k-i,this._fitInfo.sizedBy.minWidth)+'px',this.sizingTarget.style.maxHeight=a(l-j,this._fitInfo.sizedBy.minHeight)+'px',this.style.left=i-c.left+'px',this.style.top=j-c.top+'px'}},constrain:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo;a.positionedBy.vertically||(this.style.position='fixed',this.style.top='0px'),a.positionedBy.horizontally||(this.style.position='fixed',this.style.left='0px'),this.sizingTarget.style.boxSizing='border-box';var b=this.getBoundingClientRect();a.sizedBy.height||this.__sizeDimension(b,a.positionedBy.vertically,'top','bottom','Height'),a.sizedBy.width||this.__sizeDimension(b,a.positionedBy.horizontally,'left','right','Width')}},_sizeDimension:function(a,b,c,d,e){this.__sizeDimension(a,b,c,d,e)},__sizeDimension:function(a,b,c,d,e){var f=this._fitInfo,g=this.__getNormalizedRect(this.fitInto),h='Width'===e?g.width:g.height,i=b===d,j=i?h-a[d]:a[c],k=f.margin[i?c:d],l='offset'+e,m=this[l]-this.sizingTarget[l];this.sizingTarget.style['max'+e]=h-k-j-m+'px'},center:function(){if(!this.__shouldPosition){this._discoverInfo();var a=this._fitInfo.positionedBy;if(!(a.vertically&&a.horizontally)){this.style.position='fixed',a.vertically||(this.style.top='0px'),a.horizontally||(this.style.left='0px');var b=this.getBoundingClientRect(),c=this.__getNormalizedRect(this.fitInto);if(!a.vertically){var d=c.top-b.top+(c.height-b.height)/2;this.style.top=d+'px'}if(!a.horizontally){var e=c.left-b.left+(c.width-b.width)/2;this.style.left=e+'px'}}}},__getNormalizedRect:function(a){return a===document.documentElement||a===window?{top:0,left:0,width:window.innerWidth,height:window.innerHeight,right:window.innerWidth,bottom:window.innerHeight}:a.getBoundingClientRect()},__getOffscreenArea:function(a,b,c){var d=Math.abs,e=Math.min,f=e(0,a.top)+e(0,c.bottom-(a.top+b.height)),g=e(0,a.left)+e(0,c.right-(a.left+b.width));return d(f)*b.width+d(g)*b.height},__getPosition:function(a,b,c,d,e,f){var g=[{verticalAlign:'top',horizontalAlign:'left',top:e.top+this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'top',horizontalAlign:'right',top:e.top+this.verticalOffset,left:e.right-c.width-this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'left',top:e.bottom-c.height-this.verticalOffset,left:e.left+this.horizontalOffset},{verticalAlign:'bottom',horizontalAlign:'right',top:e.bottom-c.height-this.verticalOffset,left:e.right-c.width-this.horizontalOffset}];if(this.noOverlap){for(var h,j=0,i=g.length;j<i;j++){for(var k in h={},g[j])h[k]=g[j][k];g.push(h)}g[0].top=g[1].top+=e.height,g[2].top=g[3].top-=e.height,g[4].left=g[6].left+=e.width,g[5].left=g[7].left-=e.width}b='auto'===b?null:b,a='auto'===a?null:a,a&&'center'!==a||(g.push({verticalAlign:'top',horizontalAlign:'center',top:e.top+this.verticalOffset+(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset}),g.push({verticalAlign:'bottom',horizontalAlign:'center',top:e.bottom-c.height-this.verticalOffset-(this.noOverlap?e.height:0),left:e.left-d.width/2+e.width/2+this.horizontalOffset})),b&&'middle'!==b||(g.push({verticalAlign:'middle',horizontalAlign:'left',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.left+this.horizontalOffset+(this.noOverlap?e.width:0)}),g.push({verticalAlign:'middle',horizontalAlign:'right',top:e.top-d.height/2+e.height/2+this.verticalOffset,left:e.right-c.width-this.horizontalOffset-(this.noOverlap?e.width:0)}));for(var l,j=0;j<g.length;j++){var m=g[j],n=m.verticalAlign===b,o=m.horizontalAlign===a;if(!this.dynamicAlign&&!this.noOverlap&&n&&o){l=m;break}var p=(!b||n)&&(!a||o);if(this.dynamicAlign||p){if(m.offscreenArea=this.__getOffscreenArea(m,c,f),0===m.offscreenArea&&p){l=m;break}l=l||m;var q=m.offscreenArea-l.offscreenArea;(0>q||0===q&&(n||o))&&(l=m)}}return l}};</script><dom-module id="iron-overlay-backdrop" assetpath="../bower_components/iron-overlay-behavior/"><template><style>:host{position:fixed;top:0;left:0;width:100%;height:100%;background-color:var(--iron-overlay-backdrop-background-color, #000);opacity:0;transition:opacity 0.2s;pointer-events:none;@apply --iron-overlay-backdrop;}:host(.opened){opacity:var(--iron-overlay-backdrop-opacity, 0.6);pointer-events:auto;@apply --iron-overlay-backdrop-opened;}</style><slot></slot></template></dom-module><script>(function(){'use strict';Polymer({is:'iron-overlay-backdrop',properties:{opened:{reflectToAttribute:!0,type:Boolean,value:!1,observer:'_openedChanged'}},listeners:{transitionend:'_onTransitionend'},created:function(){this.__openedRaf=null},attached:function(){this.opened&&this._openedChanged(this.opened)},prepare:function(){this.opened&&!this.parentNode&&Polymer.dom(document.body).appendChild(this)},open:function(){this.opened=!0},close:function(){this.opened=!1},complete:function(){this.opened||this.parentNode!==document.body||Polymer.dom(this.parentNode).removeChild(this)},_onTransitionend:function(a){a&&a.target===this&&this.complete()},_openedChanged:function(a){if(a)this.prepare();else{var b=window.getComputedStyle(this);('0s'===b.transitionDuration||0==b.opacity)&&this.complete()}this.isAttached&&(this.__openedRaf&&(window.cancelAnimationFrame(this.__openedRaf),this.__openedRaf=null),this.scrollTop=this.scrollTop,this.__openedRaf=window.requestAnimationFrame(function(){this.__openedRaf=null,this.toggleClass('opened',this.opened)}.bind(this)))}})})();</script><script>Polymer.IronOverlayManagerClass=function(){this._overlays=[],this._minimumZ=101,this._backdropElement=null,Polymer.Gestures.add(document.documentElement,'tap',function(){}),document.addEventListener('tap',this._onCaptureClick.bind(this),!0),document.addEventListener('focus',this._onCaptureFocus.bind(this),!0),document.addEventListener('keydown',this._onCaptureKeyDown.bind(this),!0)},Polymer.IronOverlayManagerClass.prototype={constructor:Polymer.IronOverlayManagerClass,get backdropElement(){return this._backdropElement||(this._backdropElement=document.createElement('iron-overlay-backdrop')),this._backdropElement},get deepActiveElement(){var a=document.activeElement;for(a&&!1!==a instanceof Element||(a=document.body);a.root&&Polymer.dom(a.root).activeElement;)a=Polymer.dom(a.root).activeElement;return a},_bringOverlayAtIndexToFront:function(a){var b=this._overlays[a];if(b){var c=this._overlays.length-1,d=this._overlays[c];if(d&&this._shouldBeBehindOverlay(b,d)&&c--,!(a>=c)){var e=Math.max(this.currentOverlayZ(),this._minimumZ);for(this._getZ(b)<=e&&this._applyOverlayZ(b,e);a<c;)this._overlays[a]=this._overlays[a+1],a++;this._overlays[c]=b}}},addOrRemoveOverlay:function(a){a.opened?this.addOverlay(a):this.removeOverlay(a)},addOverlay:function(a){var b=Math.max,c=this._overlays.indexOf(a);if(0<=c)return this._bringOverlayAtIndexToFront(c),void this.trackBackdrop();var d=this._overlays.length,e=this._overlays[d-1],f=b(this._getZ(e),this._minimumZ),g=this._getZ(a);if(e&&this._shouldBeBehindOverlay(a,e)){this._applyOverlayZ(e,f),d--;var h=this._overlays[d-1];f=b(this._getZ(h),this._minimumZ)}g<=f&&this._applyOverlayZ(a,f),this._overlays.splice(d,0,a),this.trackBackdrop()},removeOverlay:function(a){var b=this._overlays.indexOf(a);-1===b||(this._overlays.splice(b,1),this.trackBackdrop())},currentOverlay:function(){var a=this._overlays.length-1;return this._overlays[a]},currentOverlayZ:function(){return this._getZ(this.currentOverlay())},ensureMinimumZ:function(a){this._minimumZ=Math.max(this._minimumZ,a)},focusOverlay:function(){var a=this.currentOverlay();a&&a._applyFocus()},trackBackdrop:function(){var a=this._overlayWithBackdrop();(a||this._backdropElement)&&(this.backdropElement.style.zIndex=this._getZ(a)-1,this.backdropElement.opened=!!a,this.backdropElement.prepare())},getBackdrops:function(){for(var a=[],b=0;b<this._overlays.length;b++)this._overlays[b].withBackdrop&&a.push(this._overlays[b]);return a},backdropZ:function(){return this._getZ(this._overlayWithBackdrop())-1},_overlayWithBackdrop:function(){for(var a=this._overlays.length-1;0<=a;a--)if(this._overlays[a].withBackdrop)return this._overlays[a]},_getZ:function(a){var b=this._minimumZ;if(a){var c=+(a.style.zIndex||window.getComputedStyle(a).zIndex);c===c&&(b=c)}return b},_setZ:function(a,b){a.style.zIndex=b},_applyOverlayZ:function(a,b){this._setZ(a,b+2)},_overlayInPath:function(a){a=a||[];for(var b=0;b<a.length;b++)if(a[b]._manager===this)return a[b]},_onCaptureClick:function(a){var b=this._overlays.length-1;if(-1!==b)for(var c,d=Polymer.dom(a).path;(c=this._overlays[b])&&this._overlayInPath(d)!==c&&(c._onCaptureClick(a),c.allowClickThrough);)b--},_onCaptureFocus:function(a){var b=this.currentOverlay();b&&b._onCaptureFocus(a)},_onCaptureKeyDown:function(a){var b=this.currentOverlay();b&&(Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'esc')?b._onCaptureEsc(a):Polymer.IronA11yKeysBehavior.keyboardEventMatchesKeys(a,'tab')&&b._onCaptureTab(a))},_shouldBeBehindOverlay:function(a,b){return!a.alwaysOnTop&&b.alwaysOnTop}},Polymer.IronOverlayManager=new Polymer.IronOverlayManagerClass;</script><script>(function(){'use strict';var a={pageX:0,pageY:0},b=null,c=[],d=['wheel','mousewheel','DOMMouseScroll','touchstart','touchmove'];Polymer.IronScrollManager={get currentLockingElement(){return this._lockingElements[this._lockingElements.length-1]},elementIsScrollLocked:function(a){var b=this.currentLockingElement;if(void 0===b)return!1;var c;return!!this._hasCachedLockedElement(a)||!this._hasCachedUnlockedElement(a)&&(c=!!b&&b!==a&&!this._composedTreeContains(b,a),c?this._lockedElementCache.push(a):this._unlockedElementCache.push(a),c)},pushScrollLock:function(a){0<=this._lockingElements.indexOf(a)||(0===this._lockingElements.length&&this._lockScrollInteractions(),this._lockingElements.push(a),this._lockedElementCache=[],this._unlockedElementCache=[])},removeScrollLock:function(a){var b=this._lockingElements.indexOf(a);-1===b||(this._lockingElements.splice(b,1),this._lockedElementCache=[],this._unlockedElementCache=[],0===this._lockingElements.length&&this._unlockScrollInteractions())},_lockingElements:[],_lockedElementCache:null,_unlockedElementCache:null,_hasCachedLockedElement:function(a){return-1<this._lockedElementCache.indexOf(a)},_hasCachedUnlockedElement:function(a){return-1<this._unlockedElementCache.indexOf(a)},_composedTreeContains:function(a,b){var c,d,e,f;if(a.contains(b))return!0;for(c=Polymer.dom(a).querySelectorAll('content,slot'),e=0;e<c.length;++e)for(d=Polymer.dom(c[e]).getDistributedNodes(),f=0;f<d.length;++f)if(d[f].nodeType===Node.ELEMENT_NODE&&this._composedTreeContains(d[f],b))return!0;return!1},_scrollInteractionHandler:function(b){if(b.cancelable&&this._shouldPreventScrolling(b)&&b.preventDefault(),b.targetTouches){var c=b.targetTouches[0];a.pageX=c.pageX,a.pageY=c.pageY}},_lockScrollInteractions:function(){this._boundScrollHandler=this._boundScrollHandler||this._scrollInteractionHandler.bind(this);for(var a=0,b=d.length;a<b;a++)document.addEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_unlockScrollInteractions:function(){for(var a=0,b=d.length;a<b;a++)document.removeEventListener(d[a],this._boundScrollHandler,{capture:!0,passive:!1})},_shouldPreventScrolling:function(a){var d=Polymer.dom(a).rootTarget;if('touchmove'!==a.type&&b!==d&&(b=d,c=this._getScrollableNodes(Polymer.dom(a).path)),!c.length)return!0;if('touchstart'===a.type)return!1;var e=this._getScrollInfo(a);return!this._getScrollingNode(c,e.deltaX,e.deltaY)},_getScrollableNodes:function(a){for(var b=[],c=a.indexOf(this.currentLockingElement),d=0;d<=c;d++)if(a[d].nodeType===Node.ELEMENT_NODE){var e=a[d],f=e.style;'scroll'!==f.overflow&&'auto'!==f.overflow&&(f=window.getComputedStyle(e)),('scroll'===f.overflow||'auto'===f.overflow)&&b.push(e)}return b},_getScrollingNode:function(a,b,c){var d=Math.abs;if(b||c)for(var e=d(c)>=d(b),f=0;f<a.length;f++){var g=a[f],h=!1;if(h=e?0>c?0<g.scrollTop:g.scrollTop<g.scrollHeight-g.clientHeight:0>b?0<g.scrollLeft:g.scrollLeft<g.scrollWidth-g.clientWidth,h)return g}},_getScrollInfo:function(b){var c={deltaX:b.deltaX,deltaY:b.deltaY};if('deltaX'in b);else if('wheelDeltaX'in b&&'wheelDeltaY'in b)c.deltaX=-b.wheelDeltaX,c.deltaY=-b.wheelDeltaY;else if('wheelDelta'in b)c.deltaX=0,c.deltaY=-b.wheelDelta;else if('axis'in b)c.deltaX=1===b.axis?b.detail:0,c.deltaY=2===b.axis?b.detail:0;else if(b.targetTouches){var d=b.targetTouches[0];c.deltaX=a.pageX-d.pageX,c.deltaY=a.pageY-d.pageY}return c}}})();</script><script>(function(){'use strict';var a=Element.prototype,b=a.matches||a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector;Polymer.IronFocusablesHelper={getTabbableNodes:function(a){var b=[],c=this._collectTabbableNodes(a,b);return c?this._sortByTabIndex(b):b},isFocusable:function(a){return b.call(a,'input, select, textarea, button, object')?b.call(a,':not([disabled])'):b.call(a,'a[href], area[href], iframe, [tabindex], [contentEditable]')},isTabbable:function(a){return this.isFocusable(a)&&b.call(a,':not([tabindex="-1"])')&&this._isVisible(a)},_normalizedTabIndex:function(a){if(this.isFocusable(a)){var b=a.getAttribute('tabindex')||0;return+b}return-1},_collectTabbableNodes:function(a,b){if(a.nodeType!==Node.ELEMENT_NODE||!this._isVisible(a))return!1;var c=a,d=this._normalizedTabIndex(c),e=0<d;0<=d&&b.push(c);var f='content'===c.localName||'slot'===c.localName?Polymer.dom(c).getDistributedNodes():Polymer.dom(c.root||c).children;for(var g=0;g<f.length;g++)e=this._collectTabbableNodes(f[g],b)||e;return e},_isVisible:function(a){var b=a.style;return'hidden'!==b.visibility&&'none'!==b.display&&(b=window.getComputedStyle(a),'hidden'!==b.visibility&&'none'!==b.display)},_sortByTabIndex:function(a){var b=a.length;if(2>b)return a;var c=Math.ceil(b/2),d=this._sortByTabIndex(a.slice(0,c)),e=this._sortByTabIndex(a.slice(c));return this._mergeSortByTabIndex(d,e)},_mergeSortByTabIndex:function(a,b){for(var c=[];0<a.length&&0<b.length;)this._hasLowerTabOrder(a[0],b[0])?c.push(b.shift()):c.push(a.shift());return c.concat(a,b)},_hasLowerTabOrder:function(c,a){var b=Math.max,d=b(c.tabIndex,0),e=b(a.tabIndex,0);return 0===d||0===e?e>d:d>e}}})();</script><script>(function(){'use strict';Polymer.IronOverlayBehaviorImpl={properties:{opened:{observer:'_openedChanged',type:Boolean,value:!1,notify:!0},canceled:{observer:'_canceledChanged',readOnly:!0,type:Boolean,value:!1},withBackdrop:{observer:'_withBackdropChanged',type:Boolean},noAutoFocus:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},closingReason:{type:Object},restoreFocusOnClose:{type:Boolean,value:!1},allowClickThrough:{type:Boolean},alwaysOnTop:{type:Boolean},scrollAction:{type:String},_manager:{type:Object,value:Polymer.IronOverlayManager},_focusedChild:{type:Object}},listeners:{"iron-resize":'_onIronResize'},observers:['__updateScrollObservers(isAttached, opened, scrollAction)'],get backdropElement(){return this._manager.backdropElement},get _focusNode(){return this._focusedChild||Polymer.dom(this).querySelector('[autofocus]')||this},get _focusableNodes(){return Polymer.IronFocusablesHelper.getTabbableNodes(this)},ready:function(){this.__isAnimating=!1,this.__shouldRemoveTabIndex=!1,this.__firstFocusableNode=this.__lastFocusableNode=null,this.__rafs={},this.__restoreFocusNode=null,this.__scrollTop=this.__scrollLeft=null,this.__onCaptureScroll=this.__onCaptureScroll.bind(this),this.__rootNodes=null,this._ensureSetup()},attached:function(){this.opened&&this._openedChanged(this.opened),this._observer=Polymer.dom(this).observeNodes(this._onNodesChange)},detached:function(){for(var a in Polymer.dom(this).unobserveNodes(this._observer),this._observer=null,this.__rafs)null!==this.__rafs[a]&&cancelAnimationFrame(this.__rafs[a]);this.__rafs={},this._manager.removeOverlay(this),this.__isAnimating&&(this.opened?this._finishRenderOpened():(this._applyFocus(),this._finishRenderClosed()))},toggle:function(){this._setCanceled(!1),this.opened=!this.opened},open:function(){this._setCanceled(!1),this.opened=!0},close:function(){this._setCanceled(!1),this.opened=!1},cancel:function(a){var b=this.fire('iron-overlay-canceled',a,{cancelable:!0});b.defaultPrevented||(this._setCanceled(!0),this.opened=!1)},invalidateTabbables:function(){this.__firstFocusableNode=this.__lastFocusableNode=null},_ensureSetup:function(){this._overlaySetup||(this._overlaySetup=!0,this.style.outline='none',this.style.display='none')},_openedChanged:function(a){a?this.removeAttribute('aria-hidden'):this.setAttribute('aria-hidden','true');this.isAttached&&(this.__isAnimating=!0,this.__deraf('__openedChanged',this.__openedChanged))},_canceledChanged:function(){this.closingReason=this.closingReason||{},this.closingReason.canceled=this.canceled},_withBackdropChanged:function(){this.withBackdrop&&!this.hasAttribute('tabindex')?(this.setAttribute('tabindex','-1'),this.__shouldRemoveTabIndex=!0):this.__shouldRemoveTabIndex&&(this.removeAttribute('tabindex'),this.__shouldRemoveTabIndex=!1),this.opened&&this.isAttached&&this._manager.trackBackdrop()},_prepareRenderOpened:function(){this.__restoreFocusNode=this._manager.deepActiveElement,this._preparePositioning(),this.refit(),this._finishPositioning(),this.noAutoFocus&&document.activeElement===this._focusNode&&(this._focusNode.blur(),this.__restoreFocusNode.focus())},_renderOpened:function(){this._finishRenderOpened()},_renderClosed:function(){this._finishRenderClosed()},_finishRenderOpened:function(){this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-opened')},_finishRenderClosed:function(){this.style.display='none',this.style.zIndex='',this.notifyResize(),this.__isAnimating=!1,this.fire('iron-overlay-closed',this.closingReason)},_preparePositioning:function(){this.style.transition=this.style.webkitTransition='none',this.style.transform=this.style.webkitTransform='none',this.style.display=''},_finishPositioning:function(){this.style.display='none',this.scrollTop=this.scrollTop,this.style.transition=this.style.webkitTransition='',this.style.transform=this.style.webkitTransform='',this.style.display='',this.scrollTop=this.scrollTop},_applyFocus:function(){if(this.opened)this.noAutoFocus||this._focusNode.focus();else{if(this._focusNode.blur(),this._focusedChild=null,this.restoreFocusOnClose&&this.__restoreFocusNode){var a=this._manager.deepActiveElement;(a===document.body||Polymer.dom(this).deepContains(a))&&this.__restoreFocusNode.focus()}this.__restoreFocusNode=null;var b=this._manager.currentOverlay();b&&this!==b&&b._applyFocus()}},_onCaptureClick:function(a){this.noCancelOnOutsideClick||this.cancel(a)},_onCaptureFocus:function(a){if(this.withBackdrop){var b=Polymer.dom(a).path;-1===b.indexOf(this)?(a.stopPropagation(),this._applyFocus()):this._focusedChild=b[0]}},_onCaptureEsc:function(a){this.noCancelOnEscKey||this.cancel(a)},_onCaptureTab:function(a){if(this.withBackdrop){this.__ensureFirstLastFocusables();var b=a.shiftKey,c=b?this.__firstFocusableNode:this.__lastFocusableNode,d=b?this.__lastFocusableNode:this.__firstFocusableNode,e=!1;if(c===d)e=!0;else{var f=this._manager.deepActiveElement;e=f===c||f===this}e&&(a.preventDefault(),this._focusedChild=d,this._applyFocus())}},_onIronResize:function(){this.opened&&!this.__isAnimating&&this.__deraf('refit',this.refit)},_onNodesChange:function(){this.opened&&!this.__isAnimating&&(this.invalidateTabbables(),this.notifyResize())},__ensureFirstLastFocusables:function(){if(!this.__firstFocusableNode||!this.__lastFocusableNode){var a=this._focusableNodes;this.__firstFocusableNode=a[0],this.__lastFocusableNode=a[a.length-1]}},__openedChanged:function(){this.opened?(this._prepareRenderOpened(),this._manager.addOverlay(this),this._applyFocus(),this._renderOpened()):(this._manager.removeOverlay(this),this._applyFocus(),this._renderClosed())},__deraf:function(a,b){var c=this.__rafs;null!==c[a]&&cancelAnimationFrame(c[a]),c[a]=requestAnimationFrame(function(){c[a]=null,b.call(this)}.bind(this))},__updateScrollObservers:function(a,b,c){a&&b&&this.__isValidScrollAction(c)?('lock'===c&&(this.__saveScrollPosition(),Polymer.IronScrollManager.pushScrollLock(this)),this.__addScrollListeners()):(Polymer.IronScrollManager.removeScrollLock(this),this.__removeScrollListeners())},__addScrollListeners:function(){if(!this.__rootNodes){if(this.__rootNodes=[],Polymer.Settings.useShadow)for(var a=this;a;)a.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&a.host&&this.__rootNodes.push(a),a=a.host||a.assignedSlot||a.parentNode;this.__rootNodes.push(document)}this.__rootNodes.forEach(function(a){a.addEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this)},__removeScrollListeners:function(){this.__rootNodes&&this.__rootNodes.forEach(function(a){a.removeEventListener('scroll',this.__onCaptureScroll,{capture:!0,passive:!0})},this),this.isAttached||(this.__rootNodes=null)},__isValidScrollAction:function(a){return'lock'===a||'refit'===a||'cancel'===a},__onCaptureScroll:function(a){if(!this.__isAnimating&&!(0<=Polymer.dom(a).path.indexOf(this)))switch(this.scrollAction){case'lock':this.__restoreScrollPosition();break;case'refit':this.__deraf('refit',this.refit);break;case'cancel':this.cancel(a);}},__saveScrollPosition:function(){var a=Math.max;document.scrollingElement?(this.__scrollTop=document.scrollingElement.scrollTop,this.__scrollLeft=document.scrollingElement.scrollLeft):(this.__scrollTop=a(document.documentElement.scrollTop,document.body.scrollTop),this.__scrollLeft=a(document.documentElement.scrollLeft,document.body.scrollLeft))},__restoreScrollPosition:function(){document.scrollingElement?(document.scrollingElement.scrollTop=this.__scrollTop,document.scrollingElement.scrollLeft=this.__scrollLeft):(document.documentElement.scrollTop=document.body.scrollTop=this.__scrollTop,document.documentElement.scrollLeft=document.body.scrollLeft=this.__scrollLeft)}},Polymer.IronOverlayBehavior=[Polymer.IronFitBehavior,Polymer.IronResizableBehavior,Polymer.IronOverlayBehaviorImpl]})();</script><script>(function(){'use strict';Polymer.PaperDialogBehaviorImpl={hostAttributes:{role:'dialog',tabindex:'-1'},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:['_modalChanged(modal, __readied)'],listeners:{tap:'_onDialogClick'},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.__readied=!0},_modalChanged:function(a,b){b&&(a?(this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick,this.__prevNoCancelOnEscKey=this.noCancelOnEscKey,this.__prevWithBackdrop=this.withBackdrop,this.noCancelOnOutsideClick=!0,this.noCancelOnEscKey=!0,this.withBackdrop=!0):(this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick,this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey,this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop))},_updateClosingReasonConfirmed:function(a){this.closingReason=this.closingReason||{},this.closingReason.confirmed=a},_onDialogClick:function(a){for(var b,c=Polymer.dom(a).path,d=0,e=c.indexOf(this);d<e;d++)if(b=c[d],b.hasAttribute&&(b.hasAttribute('dialog-dismiss')||b.hasAttribute('dialog-confirm'))){this._updateClosingReasonConfirmed(b.hasAttribute('dialog-confirm')),this.close(),a.stopPropagation();break}}},Polymer.PaperDialogBehavior=[Polymer.IronOverlayBehavior,Polymer.PaperDialogBehaviorImpl]})();</script><dom-module id="dialog-style" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>:host{opacity:0;will-change:opacity;transition:opacity 300ms cubic-bezier(0.6, 0, 0.2, 1);}:host([opened]){opacity:1;}.content{@apply --layout-vertical;@apply --layout-start;padding:2.75em 0.75em 0.75em 0.75em;margin:0.75em;border-radius:8px;box-shadow:var(--dialog-shadow, 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.4));@apply --dialog-style;background-color:var(--dialog-background-color, #f1f1f1);color:var(--dialog-color, var(--primary-text-color));}.no-margin{margin:0;}[dialog-title]{@apply --layout-vertical;@apply --layout-center-center;margin:0em 0 1.5em 0;@apply --dialog-title;flex:0 0 auto;}[dialog-title] > *{font-size:1.2em;font-weight:500;}[dialog-content]{flex:1 1 auto;@apply --layout-vertical;overflow:auto;}[dialog-content][horizontal]{@apply --layout-horizontal;}[dialog-bottom]{@apply --layout-horizontal;align-self:stretch;justify-content:flex-end;font-size:0.9em;padding:0 0.5em;flex-wrap:wrap;flex:1 0 auto;}.button{margin-left:0.5em;}</style></template></dom-module><dom-module id="dialog-element" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style include="dialog-style">:host{outline:none;--calculated-icon-size:var(--icon-size, 1.5em);--calculated-icon-padding:var(--icon-padding, 0.5em);}::slotted([dialog-title]){line-height:var(--calculated-icon-size);margin-top:calc(var(--calculated-icon-padding) + 4px);margin-bottom:calc(var(--calculated-icon-padding) + 4px);padding-right:calc(var(--calculated-icon-size) + 2*var(--calculated-icon-padding) + 4px);}#exitButton{position:absolute;right:4px;top:4px;margin:0;border-radius:50%;}[hidden]{display:none !important;}</style><slot></slot><icon-button id="exitButton" icon="close" on-click="close"></icon-button></template></dom-module><script>class DialogElement extends Polymer.mixinBehaviors([Polymer.PaperDialogBehavior],Polymer.Element){static get is(){return'dialog-element'}static get properties(){return{opened:{type:Boolean,reflectToAttribute:!0}}}static get listeners(){return{"iron-overlay-opened":'_debouncedNotifyResize'}}_debouncedNotifyResize(){this.debounce('resize',this.notifyResize)}}customElements.define(DialogElement.is,DialogElement);</script><dom-module id="input-style" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>.input{display:inline-flex;position:relative;}::-webkit-input-placeholder{color:rgba(0, 0, 0, 0);}::-moz-placeholder{color:rgba(0, 0, 0, 0);}::-ms-input-placeholder{color:rgba(0, 0, 0, 0);}::-ms-input-placeholder{color:rgba(0, 0, 0, 0);}input::selection{background:rgba(255, 255, 255, 0.5);}input::-moz-selection{background:rgba(255, 255, 255, 0.5);}.input input{flex:1;}input{font-size:inherit;font-weight:400;font-family:inherit;box-sizing:content-box;color:var(--input-color, currentColor);background-color:var(--input-background, transparent);border:thin solid transparent;outline:none;}input:not([type="reset"]),
      input:not([type="submit"]),
      input:not([type="range"]){padding:1em 0.35em 0.25em;}input:invalid{border:thin solid rgba(255, 0, 0, 0.1);box-shadow:none;color:var(--input-color, currentColor);background-color:var(--input-background, rgba(255, 0, 0, 0.1));}input:focus{outline:none;border:thin solid transparent;color:var(--input-color, currentColor);background-color:var(--input-background, transparent);}.input .decorator{position:absolute;display:block;height:1px;top:auto;bottom:-1px;left:0;right:0;border-top:1px solid #ccc;-webkit-transform:translateZ(0);transform:translateZ(0);}.input .underline{display:block;height:2px;width:100%;margin:auto;background-color:var(--secondary-color, var(--primary-color, #6080AB));position:absolute;top:-1px;left:0;-webkit-transform:scale3d(0, 1, 1);transform:scale3d(0, 1, 1);transition:-webkit-transform 0.2s ease-in;transition:transform 0.2s ease-in;}.input .decorator label{display:block;font-size:0.85em;font-weight:300;pointer-events:none;opacity:0.5;white-space:nowrap;text-overflow:ellipsis;text-align:center;overflow:hidden;-webkit-transform-origin:center 0;transform-origin:center 0;transition-property:opacity, -webkit-transform;transition-property:opacity, transform;transition-duration:0.15s;transition-timing-function:ease-out;will-change:transform;-webkit-transform:translate3d(0px, -2.25em, 0px);transform:translate3d(0px, -2.25em, 0px);}.input [icon]{flex:0 0 auto;align-self:flex-end;}.input [icon]:first-child{margin-left:0;margin-right:0.5em;}.input [icon]:last-child{margin-left:0.5em;margin-right:0;}.input .decorator::after{position:absolute;top:0;left:0;right:0;font-size:0.7em;color:var(--input-invalid, #dd2c00);content:attr(error-message);display:none;white-space:nowrap;}.input input:focus + .decorator .underline{-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1);transition:-webkit-transform 0.2s ease-out;transition:transform 0.2s ease-out;}.input input:focus + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;}.input input:not(:placeholder-shown) + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;}_:-ms-lang(x), .input input + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;}.input input:optional:-moz-ui-valid + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;}.input input[type="range"]:focus + .decorator label{-webkit-transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);opacity:1;}.input input[type="range"]:not(:placeholder-shown) + .decorator label{-webkit-transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);opacity:1;}.input input[type="range"] + .decorator label{-webkit-transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.2em, 0px) scale(0.9, 0.9);opacity:1;}.input input:not(:focus):not(:placeholder-shown):invalid + .decorator .underline{background-color:var(--input-invalid, #dd2c00);-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1);transition:-webkit-transform 0.2s ease-out;transition:transform 0.2s ease-out;}.input input[aria-invalid='true']:not(:valid) + .decorator .underline{background-color:var(--input-invalid, #dd2c00);-webkit-transform:scale3d(1, 1, 1);transform:scale3d(1, 1, 1);transition:-webkit-transform 0.2s ease-out;transition:transform 0.2s ease-out;}.input input:not(:focus):not(:placeholder-shown):invalid + .decorator::after{display:block;}.input input:not(:focus):-moz-ui-invalid:invalid + .decorator::after{display:block;}.input input[aria-invalid='true']:not(:valid) + .decorator::after{display:block;}.input input:not(:focus):not(:placeholder-shown):invalid + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;color:var(--input-invalid, #dd2c00);}.input input:not(:focus):-moz-ui-invalid:invalid + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;color:var(--input-invalid, #dd2c00);}.input input[aria-invalid='true']:not(:valid) + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;color:var(--input-invalid, #dd2c00);}.input input:not(:focus):required:valid + .decorator label{-webkit-transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);transform:translate3d(0px, -3.1em, 0px) scale(0.9, 0.9);opacity:1;}.input input[type="range"]{width:100%;box-sizing:content-box;cursor:pointer;margin-top:0.8em;}</style></template></dom-module><dom-module id="button-style" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>a > .button{width:100%;}.button{@apply --layout-inline;@apply --layout-start-justified;@apply --layout-center;font-family:inherit;box-sizing:border-box;text-align:center;pointer-events:all;padding:0.75em 1em;line-height:1.4;white-space:nowrap;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;outline-width:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:none;border-color:var(--highlight-color);background:linear-gradient(to bottom, rgba(255,255,255,0.04) 5%,rgba(255,255,255,0.10) 40%);color:currentColor;cursor:pointer;transition:background 0.25s cubic-bezier(0.4, 0, 0.2, 1);letter-spacing:0.2px;flex-shrink:0;text-align:left;@apply --button;}.button > *{-webkit-appearance:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0;}.button > span,
      .button > button{flex:1;text-align:center;}.button > button,
      .button > button[type="submit"]{font-family:inherit;font-size:inherit;background-color:transparent;color:currentColor;outline:none;border:none;}.button[disabled]{color:var(--disabled-text-color);background:transparent;border-color:var(--disabled-text-color);cursor:auto;pointer-events:none;}.button:hover{background:linear-gradient(to bottom, rgba(255,255,255,0.06) 5%,rgba(255,255,255,0.15) 40%);}.button:focus,
      .button.iron-selected{background:linear-gradient(to bottom, rgba(255,255,255,0.1) 5%,rgba(255,255,255,0.25) 40%);font-weight:400;}.button:focus{border-width:medium;}.button > iron-icon{color:currentColor;}.button > .left{margin-right:0.8em;}.button > .right{margin-left:0.8em;}</style></template></dom-module>/** * * further RESSOURCES: * https://credential-management-sample.appspot.com/ * https://github.com/GoogleChromeLabs/credential-management-sample/blob/master/static/scripts/app.js * https://developers.google.com/web/fundamentals/security/credential-management/save-forms * */<dom-module id="login-dialog" assetpath="../bower_components/webvisual-elements/login/"><template strip-whitespace=""><style include="dialog-style button-style input-style">:host(:focus),
      :host{outline:none;}#signinform > form{@apply --layout-vertical;font-size:1em;overflow:hidden;}.usercard{@apply --layout-horizontal;@apply --layout-center-center;padding:0.75em 1em;margin:0.5em 0;background:rgba(0,0,0,0.1);}.message{font-size:0.8em;margin:0.5em 0;}iron-icon{margin-right:0.25em;}.input:not(:last-of-type){margin-bottom:1.5em;}.input:last-of-type{margin-bottom:1em;}[hidden]{display:none !important;}.buttons{padding-top:0.5em;}.button:first-of-type{margin-left:0;}.button{padding:0.75em 0.5em;}.button > .left{margin-right:0.5em;}[dialog-title] > *{font-size:1.1em;}[dialog-title] > *:first-child:not(:only-child){font-size:1.25em;font-weight:500;margin-bottom:0.9em;}[dialog-title] > *:not(:first-child){font-weight:initial;}[dialog-title] > *:only-child{font-size:1em;font-weight:initial;}</style><dialog-element id="dialog" class="content"><form method="POST" action="[[signInUrl]]" on-submit="onPreSubmit" hidden$="[[loggedIn]]"><div dialog-title="" id="loginInfo"><div>{{localize('login', 'name')}}</div><div>{{localize('login', 'title')}}</div></div><div dialog-content=""><section class="input"><iron-icon class="left" icon="person-add"></iron-icon><input id="username" autocomplete="username" name="username" type="text" pattern=".{1,32}\..{1,32}" autocorrect="off" autocapitalize="off" spellcheck="off" placeholder$="{{localize('login', 'username')}}" required=""><div class="decorator" error-message$="{{localize('login', 'invalid-username')}}" aria-hidden="true"><label>{{localize('login', 'username')}}</label><div class="underline"></div></div></section><section class="input"><iron-icon class="left" icon="more-horiz"></iron-icon><input id="password" required="" autocomplete="password" pattern=".{1,128}" name="password" autocorrect="off" autocapitalize="off" spellcheck="off" placeholder$="{{localize('login', 'password')}}" type="password"><div class="decorator" error-message$="{{localize('login', 'invalid-password')}}" aria-hidden="true"><label>{{localize('login', 'password')}}</label><div class="underline"></div></div></section></div><div dialog-bottom="" class="buttons"><div class="button" on-click="onReset"><paper-ripple></paper-ripple><iron-icon class="left" icon="close"></iron-icon><input type="reset" value$="{{localize('login', 'reset')}}"></div><div class="button"><paper-ripple></paper-ripple><iron-icon class="left" icon="check"></iron-icon><input type="submit" value$="{{localize('login', 'confirm')}}"></div></div></form><div hidden$="[[!loggedIn]]"><div class="message">{{localize('notification', 'loggedIn', loggedIn)}}</div><div dialog-content=""><div class="usercard"><iron-icon class="left" icon="person"></iron-icon><span>{{userProfile.username}}</span></div></div><div dialog-bottom="" class="buttons"><div class="button" on-click="signOut"><paper-ripple></paper-ripple><iron-icon class="left" icon="person-outline"></iron-icon>{{localize('login', 'logout')}}</div></div></div></dialog-element></template><script>class LoginDialog extends WebvisualMixins.LocalizeMixin(Polymer.Element){static get is(){return'login-dialog'}static get properties(){return{opened:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_openedChanged'},userProfile:{type:Object},signInUrl:{type:String,value:'/login'},signOutUrl:{type:String,value:'/logout'},localesUrlPrefix:{type:String,value:'/locales/ui/'},loggedIn:{type:Boolean,value:!1,notify:!0},offline:{type:Boolean,value:!window.navigator.onLine,notify:!0}}}connectedCallback(){super.connectedCallback(),this.autoSignIn=this.autoSignIn.bind(this),this.signedIn=this.signedIn.bind(this),this.notSignedIn=this.notSignedIn.bind(this),this.signIn=this.signIn.bind(this),this.signOut=this.signOut.bind(this),this.autoSignIn('optional'),window.addEventListener('online',this.autoSignIn.bind(this,'silent')),window.addEventListener('offline',this.autoSignIn.bind(this,'silent'))}autoSignIn(a){let b,c;a=-1===['silent','optional','required'].indexOf(a)?'silent':a,navigator.credentials?(b=navigator.credentials&&void 0!==navigator.credentials.preventSilentAccess?{password:!0,mediation:a}:{password:!0,unmediated:'optional'!==a},c=navigator.credentials.get(b).then((a)=>{if(a&&void 0!==a.password){let b=new FormData;return b.append('id',a.id),b.append('username',a.name),b.append('password',a.password),this.signIn.call(this,this.signInUrl,'include',b)}return a&&void 0===a.password?(a.idName='username',this.signIn.call(this,this.signInUrl,a)):this.signIn.call(this,'/auth')}).catch(this.notSignedIn)):(console.log('auto sign-in not available, testing if connection is expired'),c=this.signIn('/auth')),Promise.resolve(c).catch((a)=>{a&&console.log('autoSignIn Error:',a),window.dispatchEvent(new CustomEvent('announce',{detail:this.localize?this.localize('notification','loggedIn',!1):'You are not signed in',bubbles:!0,composed:!0})),this.offline||this.open()})}onPreSubmit(a){a.preventDefault();const b=this.root.querySelector('form');if(b&&b.validate&&!b.validate())return;const c=new FormData(b),d=c.get('password'),e=c.get('username'),f=c.get('id')||e;this.signIn(this.signInUrl,'include',c).then(()=>{if(window.PasswordCredential){const a=new PasswordCredential({id:f,name:e,password:d});return navigator.credentials.store(a).then(()=>{console.info('credentials are stored')})}})}signIn(a,b,c){return fetch(a,{method:'POST',body:c,headers:{"X-Requested-With":'XMLHttpRequest'},credentials:b||'include'}).then(this.signedIn.bind(this)).then((a)=>{this.userProfile=a,a&&a.username?(window.dispatchEvent(new CustomEvent('announce',{detail:this.localize?this.localize('notification','loggedIn',!0):'You are signed in',bubbles:!0,composed:!0})),this.close()):(window._loggedIn=this.loggedIn=!1,window.dispatchEvent(new CustomEvent('announce',{detail:this.localize?this.localize('notification','loggedIn',!1):'You are not signed in',bubbles:!0,composed:!0})),this.open())}).catch((a)=>{this.notSignedIn(a)})}signOut(){return fetch(this.signOutUrl,{method:'POST',body:JSON.stringify(this.userProfile),headers:{"X-Requested-With":'XMLHttpRequest'},credentials:'include'}).then(()=>{navigator.credentials&&(navigator.credentials.requireUserMediation&&navigator.credentials.requireUserMediation(),navigator.credentials.preventSilentAccess&&navigator.credentials.preventSilentAccess());const a=this.root.querySelector('#password');a&&(a.value=''),this.loggedIn=!1,this.userProfile=null,this.offline||this.open()}).catch(this.notSignedIn.bind(this))}signedIn(a){return window._loggedIn=this.loggedIn=200===a.status,this.loggedIn?(console.info('signin successeded'),window.dispatchEvent(new CustomEvent('logged-in',{detail:this.loggedIn,bubbles:!0,composed:!0})),Promise.resolve(a.json())):(console.info('signin failed'),Promise.reject(a))}notSignedIn(a){let b='';window.dispatchEvent(new CustomEvent('logged-in',{detail:this.loggedIn,bubbles:!0,composed:!0})),a&&a.statusCode&&(400<=a.statusCode&&500>a.statusCode?b='Login with Server failed':500<=a.statusCode&&600>a.statusCode?b='Server-Error occured':b='Unknown Error occured'),console.warn('not signed in:',b||'',a||a&&a.statusCode||''),window.dispatchEvent(new CustomEvent('announce',{detail:b?b:'',bubbles:!0,composed:!0})),window._loggedIn=this.loggedIn=!1,this.offline||this.open()}_openedChanged(a){!0===a?this.open():this.close()}open(){this.$.dialog.open(),this.opened=!0}close(){this.$.dialog.close(),this.opened=!1}}customElements.define(LoginDialog.is,LoginDialog);</script></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AccessibilityMixin=function(a){return class extends a{static get properties(){return{loggedIn:{type:Boolean,value:!!window._loggedIn,notify:!0},offline:{type:Boolean,value:!!!window.navigator.onLine,notify:!0},signInUrl:{type:String,value:'/login'},signOutUrl:{type:String,value:'/logout'},authUrl:{type:String,value:'/auth'}}}ready(){super.ready(),window.WebvisualLoginDialog||(window.WebvisualLoginDialog=document.createElement('login-dialog'),window.WebvisualLoginDialog.signInUrl=this.signInUrl||'/login',window.WebvisualLoginDialog.signOutUrl=this.signOutUrl||'/logout',window.WebvisualLoginDialog.authUrl=this.authUrl||'/auth',document.body.appendChild(window.WebvisualLoginDialog)),this._loginDialog=window.WebvisualLoginDialog}static get observers(){'_signInOutUrlsChanged(signInUrl, signOutUrl, authUrl)'}connectedCallback(){super.connectedCallback(),this._load=this._load.bind(this),window.addEventListener('online',this._load),window.addEventListener('offline',this._load),window.addEventListener('logged-in',this._load),this._load()}disconnectedCallback(){super.connectedCallback(),window.removeEventListener('online',this._load),window.removeEventListener('offline',this._load),window.removeEventListener('logged-in',this._load)}_signInOutUrlsChanged(a,b,c){a&&b&&c&&(this._loginDialog.signInUrl===a&&this._loginDialog.signOutUrl===b&&this._loginDialog.authUrl===c||(this._loginDialog=document.createElement('login-dialog'),document.body.appendChild(this._loginDialog),this._loginDialog.signInUrl=a||'/login',this._loginDialog.signOutUrl=b||'/logout',this._loginDialog.authUrl=c||'/auth',document.body.appendChild(this._loginDialog)))}_load(){this.offline=!!!window.navigator.onLine,this.loggedIn=!!window._loggedIn,super._load&&super._load()}openLoginDialog(){this._loginDialog.open()}signOut(){this._loginDialog.signOut()}}};</script><custom-style><style is="custom-style">body,
    html{--primary-color:#023d6b;--bright-primary-color:#97b8e2;--secondary-color:#eb5f73;--bright-secondary-color:#f4c0c8;--tertiary-color:#af82b9;--bright-tertiary-color:#e0c8e6;--bright-text-color:#f1f1f1;--medium-text-color:#ddd;--medium-dark-text-color:#202020;--dark-text-color:#000;--disabled-text-color:#bbb;--primary-background:#9a9a9a;--dark-primary-background:#0a0a0a;--icon-padding:0.5em;--icon-size:1.5em;--icon-hover-background:rgba(255, 255, 255, 0.1);-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;}</style></custom-style><dom-module id="app-style" assetpath="style/"><template><style>:host{color:var(--primary-text-color);background:var(--primary-background);-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;--primary-text-color:var(--medium-dark-text-color);--secondary-text-color:var(--bright-text-color);--highlight-color:var(--secondary-color);--device-color:#3ba3df;--device-state-inrange-color:hsl(113, 57%, 52%);--device-state-deceeds-color:hsl(288, 57%, 52%);--device-state-exceeds-color:hsl(351, 57%, 52%);--device-text-color:var(--primary-text-color);--device-state-inrange-text-color:var(--primary-text-color);--device-state-deceeds-text-color:var(--secondary-text-color);--device-state-exceeds-text-color:var(--secondary-text-color);--selectbox-color:var(--primary-text-color);--selectbox-background:rgba(255,255,255,0.5);--option-color:var(--primary-text-color);--option-background:#f1f1f1;--caption-background:#fff;--caption-color:var(--primary-text-color);--checkbox-checked-background:#fff;--table-background:#fff;--table-color:var(--primary-text-color);--device-group-card-background:rgba(255,255,255, 0.667);--dialog-background-color:#eee;--dialog-color:var(--primary-text-color);--fullscreen-color:var(--primary-text-color);--fullscreen-background-color:var(--primary-background);--toggle-button-unchecked-bar-color:var(--bright-primary-color);--toggle-button-unchecked-button-color:var(--secondary-text-color);--toggle-button-unchecked-ink-color:var(--bright-primary-color);--toggle-button-checked-bar-color:var(--highlight-color);--toggle-button-checked-button-color:var(--highlight-color);--toggle-button-checked-ink-color:var(--highlight-color);--grid-border-color:rgba(0,0,0,0.333);--drawer-color:var(--secondary-text-color);--drawer-width:20em;--drawer-scim-background:rgba(0, 0, 0, 0.25);--drawer-background:var(--primary-color);--drawer-toolbar:{background-color:rgba(255,255,255,0.1);color:currentColor;};--app-toolbar:{color:var(--secondary-text-color);background-color:var(--primary-color);};--svg-text:{fill:var(--secondary-text-color) !important;font-family:inherit !important;};--tab-overlay:{background-color:rgba(255, 255, 255, 0.1);border-left:none;border-bottom:0.2em solid var(--highlight-color);};}:host([dark]){--drawer-background:#222;--primary-text-color:var(--dark-text-color);--secondary-text-color:var(--medium-text-color);--highlight-color:var(--tertiary-color);--dialog-background-color:#454545;--dialog-color:var(--secondary-text-color);--selectbox-color:#000;--selectbox-background:rgba(255,255,255,0.5);--option-color:var(--secondary-text-color);--option-background:var(--primary-color);--caption-background:rgba(255,255,255, 0.333);--caption-color:#000;--checkbox-checked-background:rgba(255,255,255, 0.333);--table-background:rgba(255,255,255, 0.333);--table-color:#000;--device-group-card-background:rgba(255,255,255, 0.333);--device-sign-shim:linear-gradient(180deg,rgba(0,0,0,0.125),rgba(0,0,0,0.075),rgba(0,0,0,0.125));--grid-border-color:rgba(0,0,0,0.667);--control-button-background:rgba(255,255,255,0.0625);--control-button-hover-background:rgba(255,255,255,0.125);--control-button-selected-background:rgba(255,255,255,0.2);--fullscreen-color:var(--bright-text-color);}:host([plain]){--device-group-card-background:linear-gradient(to top, rgba(255,255,255,0.03125) 0%, rgba(255,255,255,0.03125) 32%,rgba(255,255,255,0.0625) 100%);--device-group-card-header-shim:transparent;--device-group-card-header-color:var(--primary-color);--device-group-card-header-background:transparent;--device-group-card-header-opened-color:var(--primary-color);--device-group-card-header-opened-background:transparent;--grid-border-color:transparent;--checkbox-checked-background:var(--bright-primary-color);--toggle-button-unchecked-bar-color:var(--bright-primary-color);--toggle-button-unchecked-button-color:#f1f1f1;--toggle-button-unchecked-ink-color:var(--bright-primary-color);--primary-background:var(--bright-primary-color);--toggle-button-unchecked-bar-color:var(--bright-primary-color);--toggle-button-unchecked-button-color:#f1f1f1;--toggle-button-unchecked-ink-color:var(--bright-primary-color);--drawer-background:var(--primary-color);--app-toolbar:{color:var(--primary-color);background-color:var(--bright-primary-color);};--tab-overlay:{background-color:rgba(255, 255, 255, 0.1);border-left:none;border-bottom:0.15em solid var(--tertiary-color);};}:host([plain][dark]){color:var(--bright-primary-color);--primary-background:var(--primary-color);--device-group-card-header-color:var(--bright-primary-color);--device-group-card-header-opened-color:var(--bright-primary-color);--app-toolbar:{color:var(--bright-primary-color);background-color:var(--primary-color);};}:host(:not([plain])){--device-group-card-header-color:var(--primary-color);--device-group-card-header-background:var(--bright-primary-color);--device-group-card-header-opened-background:rgba(255,255,255,0.5);--device-group-card-header-opened-color:var(--primary-text-color);--device-group-card-header-shim:linear-gradient(to top, rgba(255,255,255,0.0625) 38%,rgba(255,255,255,0.125) 100%);}:host(:not([plain])[dark]){--primary-background:var(--dark-primary-background);--device-group-card-header-color:var(--bright-primary-color);--device-group-card-header-background:var(--primary-color);--device-group-card-header-opened-background:rgba(0,0,0,0.5);--device-group-card-header-opened-color:var(--secondary-text-color);}tabs > button{height:100%;}paper-ripple{color:var(--ripple-color, currentColor);}a,
      a:link,
      a:active,
      a:hover,
      a:visited{color:currentColor;text-decoration:none;font-weight:300;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}a:active{font-weight:400;}[hidden]{display:none !important;}</style></template></dom-module><dom-module id="selectbox-style" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>.selectbox{@apply --layout-inline;@apply --layout-center;box-sizing:border-box;word-break:break-all;padding:0.75em 1.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.selectbox > *{-webkit-appearance:none;margin:0;}.selectbox > span{flex:1 0 auto;padding:0.25em;text-align:center;}.selectbox > iron-icon:first-child{margin-right:0.8em;}.selectbox > select{padding:0.5em;font-size:0.8em;font-family:inherit;text-align:center;box-sizing:border-box;outline:none;color:var(--selectbox-color);background-color:var(--selectbox-background, transparent);border-color:var(--selectbox-border, var(--dark-primary-color));border-radius:3px;border-width:thin;border-style:solid;opacity:0.75;will-change:opacity;flex:1 0 auto;transition:opacity 0.25s cubic-bezier(0.6, 0, 0.1, 1);cursor:pointer;line-height:normal;}.selectbox > select:last-child:not(:only-child){margin-left:0.8em;}.selectbox > select:focus,
      .selectbox > select:hover{opacity:1;}.selectbox option{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--option-color, #252525);background:var(--option-background, #f1f1f1);}</style></template></dom-module><dom-module id="drawer-element" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{position:fixed;left:0;top:0;right:0;bottom:0;z-index:2;visibility:hidden;pointer-events:none;overflow:hidden;transition-property:visibility;--drawer-shadow:{box-shadow:0 6px 10px 0 rgba(0, 0, 0, 0.14),
                      0 1px 18px 0 rgba(0, 0, 0, 0.12),
                      0 3px 5px -1px rgba(0, 0, 0, 0.4);};}:host([persistent]),
      :host([opened]){visibility:visible;}#contentContainer{position:absolute;box-sizing:border-box;font-size:1em;text-align:center;will-change:transform;transition-property:-webkit-transform;transition-property:transform;pointer-events:auto;background-color:var(--drawer-background, --primary-background);color:var(--drawer-color, currentColor);@apply --layout-vertical;@apply --drawer-content;}:host([horizontal]) > #contentContainer{@apply --layout-horizontal;@apply --layout-center-center;}:host([shadow]) > #contentContainer::before{position:absolute;bottom:0;left:0;top:0;right:0;content:"";transition:opacity 0.4s;pointer-events:none;opacity:0;will-change:opacity;@apply --drawer-shadow;}:host([shadow][opened]) > #contentContainer::before{opacity:1;}:host([align=bottom]) > #contentContainer{bottom:0;left:50%;top:auto;right:auto;-webkit-transform:translate3d(-50%, 100%, 0);transform:translate3d(-50%, 100%, 0);width:auto;height:var(--drawer-height, 2.75em);border-radius:4px 4px 0 0;}:host([align=top]) > #contentContainer{bottom:auto;top:0;left:50%;right:auto;-webkit-transform:translate3d(-50%, -100%, 0);transform:translate3d(-50%, -100%, 0);width:auto;height:var(--drawer-height, 2.75em);border-radius:0 0 4px 4px;}:host([align=left]) > #contentContainer{bottom:auto;top:50%;left:0;right:auto;-webkit-transform:translate3d(-100%, -50%, 0);transform:translate3d(-100%, -50%, 0);width:var(--drawer-width, 20em);height:auto;border-radius:0 4px 4px 0;}:host([align=right]) > #contentContainer{bottom:auto;top:50%;left:auto;right:0;-webkit-transform:translate3d(100%, -50%, 0);transform:translate3d(100%, -50%, 0);width:var(--drawer-width, 20em);height:auto;border-radius:4px 0 0 4px;}:host([stretch]) > #contentContainer{border-radius:0 0 0 0;}:host([stretch][align=bottom]) > #contentContainer{width:100%;}:host([stretch][align=top]) > #contentContainer{width:100%;}:host([stretch][align=left]) > #contentContainer{height:100%;}:host([stretch][align=right]) > #contentContainer{height:100%;}:host([persistent]) > #contentContainer,
      :host([opened]) > #contentContainer{visibility:visible;}:host([persistent][align=bottom]) > #contentContainer,
      :host([persistent][align=top]) > #contentContainer,
      :host([opened][align=bottom]) > #contentContainer,
      :host([opened][align=top]) > #contentContainer{-webkit-transform:translate3d(-50%, 0, 0);transform:translate3d(-50%, 0, 0);}:host([persistent][align=left]) > #contentContainer,
      :host([persistent][align=right]) > #contentContainer,
      :host([opened][align=left]) > #contentContainer,
      :host([opened][align=right]) > #contentContainer{-webkit-transform:translate3d(0, -50%, 0);transform:translate3d(0, -50%, 0);}:host([swipe-open]:not([opened])) > #contentContainer::after{position:absolute;visibility:visible;content:'';pointer-events:auto;}:host([swipe-open][align=bottom]) > #contentContainer::after{top:auto;bottom:100%;left:0;right:0;height:20px;}:host([swipe-open][align=top]) > #contentContainer::after{top:100%;bottom:auto;left:0;right:0;height:20px;}:host([swipe-open][align=left]) > #contentContainer::after{top:0;bottom:0;left:100%;right:auto;width:20px;}:host([swipe-open][align=right]) > #contentContainer::after{top:0;bottom:0;left:auto;right:100%;width:20px;}:host([opened]) > #contentContainer::after{pointer-events:none !important;}#scrim{position:absolute;top:0;right:0;bottom:0;left:0;transition-property:opacity;-webkit-transform:translateZ(0);transform:translateZ(0);opacity:0;background:var(--drawer-scrim-background, rgba(0, 0, 0, 0.4));}:host([opened]) > #scrim{opacity:1;pointer-events:all;}:host(:not([scrim])) > #scrim,
      :host([persistent]) > #scrim{visibility:hidden;opacity:0;pointer-events:none !important;}@media (max-width: 767px){:host([align]) #contentContainer{border-radius:0 0 0 0;}:host([align=bottom]) #contentContainer,
        :host([align=top]) #contentContainer{width:100%;}:host([align=left]) #contentContainer,
        :host([align=right]) #contentContainer{height:100%;}}:slotted(*){position:relative;}::slotted(.prop){position:absolute;color:currentColor;height:var(--icon-size, 1.5em);width:var(--icon-size, 1.5em);padding:var(--icon-padding, 0.5em);left:0.25em;bottom:0;}::slotted(.message){margin-left:calc(2*var(--icon-padding, 0.5em) + var(--icon-size, 1.5em) - 0.5em);}</style><div id="scrim" on-click="close"></div><div id="contentContainer"><slot name="icon"></slot><slot></slot></div></template><script>class DrawerElement extends Polymer.Element{static get is(){return'drawer-element'}static get properties(){return{autoClose:{type:Boolean,value:!1,observer:'_autoCloseChanged'},autoClosePeriod:{type:Number,value:8e3,observer:'close'},opened:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_openedChanged'},persistent:{type:Boolean,value:!1,reflectToAttribute:!0},transitionDuration:{type:Number,value:200},align:{type:String,value:'bottom',reflectToAttribute:!0},swipeOpen:{type:Boolean,value:!1,reflectToAttribute:!0},scrim:{type:Boolean,value:!1,reflectToAttribute:!0},stretch:{type:Boolean,value:!1,reflectToAttribute:!0},shadow:{type:Boolean,value:!1,reflectToAttribute:!0},horizontal:{type:Boolean,computed:'_computeHorizontal(align)',reflectToAttribute:!0},endPositioned:{type:Boolean,computed:'_computePositioning(align)'}}}static get observers(){return['_styleTransitionDuration(transitionDuration)','_addTrackListeners(horizontal)']}constructor(){super(),this._translateOffset=0,this._trackDetails=null,this._drawerState=0,this._boundEscKeydownHandler=null,this._firstTabStop=null,this._lastTabStop=null,this._MIN_FLING_THRESHOLD=0.2,this._MIN_TRANSITION_VELOCITY=1.2,this._FLING_TIMING_FUNCTION='cubic-bezier(0.667, 1, 0.667, 1)',this._FLING_INITIAL_SLOPE=1.5,this._CONDITION_PARTS=0.5,this._DRAWER_STATE={INIT:0,OPENED:1,OPENED_PERSISTENT:2,CLOSED:3,TRACKING:4,FLINGING:5}}connectedCallback(){super.connectedCallback(),this._styleTransitionDuration(0),Polymer.RenderStatus.afterNextRender(this,function(){this._styleTransitionDuration(this.transitionDuration),this._boundEscKeydownHandler=this._escKeydownHandler.bind(this)})}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener('keydown',this._boundEscKeydownHandler)}open(){this.opened=!0}close(){this.opened=!1}toggle(){this.opened?this.close():this.open()}_openedChanged(a){a?this.autoClose&&this._autoCloseChanged(this.autoClosePeriod):this._autoCloseChanged(!1)}_autoCloseChanged(a){this._autoCloseJob&&clearTimeout(this._autoCloseJob),a&&(this._autoCloseJob=setTimeout(()=>{this.close(),this._autoCloseJob=null},this.autoClosePeriod))}_computeHorizontal(a){return'bottom'===a||'top'===a}_computePositioning(a){return'bottom'===a||'right'===a}_getExpandedLength(){return this.horizontal?this.$.contentContainer.offsetHeight:this.$.contentContainer.offsetWidth}_addTrackListeners(a){Polymer.RenderStatus.afterNextRender(this,function(){Polymer.Gestures.removeListener(this.$.contentContainer,'track',(a)=>this._track(a)),Polymer.Gestures.addListener(this.$.contentContainer,'track',(a)=>this._track(a)),Polymer.Gestures.setTouchAction(this.$.contentContainer,a?'pan-x':'pan-y'),Polymer.Gestures.removeListener(this.$.scrim,'track',(a)=>this._track(a)),Polymer.Gestures.addListener(this.$.scrim,'track',(a)=>this._track(a)),Polymer.Gestures.setTouchAction(this.$.scrim,a?'pan-x':'pan-y'),Polymer.Gestures.removeListener(this.$.scrim,'tap',()=>this.close()),Polymer.Gestures.addListener(this.$.scrim,'tap',()=>this.close())})}_escKeydownHandler(a){27===a.keyCode&&(a.preventDefault(),this.close())}_track(a){if(!this.persistent&&this.swipeOpen)switch(a.preventDefault(),a.detail.state){case'start':this._trackStart(a);break;case'track':this._trackMove(a);break;case'end':this._trackEnd(a);}}_trackStart(){this._drawerState=this._DRAWER_STATE.TRACKING,this._styleTransitionDuration(0),this.style.visibility='visible';const a=this.$.contentContainer.getBoundingClientRect();switch(this.align){case'left':this._translateOffset=a.left;break;case'right':this._translateOffset=a.right-window.innerWidth;break;case'top':this._translateOffset=a.top;break;case'bottom':this._translateOffset=a.bottom-window.innerHeight;}this._trackDetails=[]}_trackMove(a){const b=this.horizontal?a.detail.dy:a.detail.dx;this._translateDrawer(b+this._translateOffset),this._trackDetails.push({d:b,timeStamp:Date.now()})}_trackEnd(a){const b=this.horizontal?a.detail.dy:a.detail.dx,c=b+this._translateOffset,d=this._getExpandedLength(),e=this.endPositioned?0>=c||c>=d:0<=c||c<=-d;if(!e){const b=this._trackDetails;if(this._trackDetails=null,this._flyingDrawer(a,b),this._drawerState===this._DRAWER_STATE.FLINGING)return}const f=d*this._CONDITION_PARTS;b<-f?this.opened=this.endPositioned:b>f&&(this.opened=!this.endPositioned),e?this._debouncedResetDrawerState(0):this._debouncedResetDrawerState(this.transitionDuration),this._styleTransitionDuration(this.transitionDuration),this._resetDrawerTranslate(),this.style.visibility=''}_calculateVelocity(a,b){if(!(b&&b.length))return 0;const c=Date.now();let e,f,g,d,h=0,i=b.length-1;for(;h<=i;)f=h+i>>1,g=b[f],g.timeStamp>=c-100?(e=g,i=f-1):h=f+1;return e?(g=this.horizontal?a.detail.dy-e.d:a.detail.dx-e.d,d=c-e.timeStamp||1,g/d):0}_flyingDrawer(a,b){let c=this._calculateVelocity(a,b);if(Math.abs(c)<this._MIN_FLING_THRESHOLD)return;this._drawerState=this._DRAWER_STATE.FLINGING;const e=this.horizontal?a.detail.dy+this._translateOffset:a.detail.dx+this._translateOffset,f=this._getExpandedLength(),g=0<c,h=!g&&this.endPositioned,i=g&&!this.endPositioned;let j;j=h?-(e+f):i?f-e:-e,g?(c=Math.max(c,this._MIN_TRANSITION_VELOCITY),this.opened=this.endPositioned):(c=Math.min(c,-this._MIN_TRANSITION_VELOCITY),this.opened=!this.endPositioned);let k=this._FLING_INITIAL_SLOPE*j/c;this._styleTransitionDuration(k),this._styleTransitionTimingFunction(this._FLING_TIMING_FUNCTION),this._resetDrawerTranslate(),this._debouncedResetDrawerState(k)}_styleTransitionDuration(a){this.style.transitionDuration=a+'ms',this.$.contentContainer.style.transitionDuration=a+'ms',this.$.scrim.style.transitionDuration=a+'ms'}_styleTransitionTimingFunction(a){this.$.contentContainer.style.transitionTimingFunction=a,this.scrim&&(this.$.scrim.style.transitionTimingFunction=a)}_translateDrawer(a){var b=Math.min,c=Math.max;const d=this._getExpandedLength();let e='';requestAnimationFrame(()=>{switch(this.align){case'left':a=c(-d,b(a,0)),this.$.scrim.style.opacity=1+a/d,e='translate3d('+a+'px,-50%,0)';break;case'right':a=c(0,b(a,d)),this.$.scrim.style.opacity=1-a/d,e='translate3d('+a+'px,-50%,0)';break;case'top':a=c(-d,b(a,0)),this.$.scrim.style.opacity=1+a/d,e='translate3d(-50%',a+'px,0)';break;case'bottom':a=c(0,b(a,d)),this.$.scrim.style.opacity=1-a/d,e='translate3d(-50%',a+'px,0)';}this.$.contentContainer.style.webkitTransform=e,this.$.contentContainer.style.transform=e})}_resetDrawerTranslate(){requestAnimationFrame(()=>{this.$.scrim.style.opacity='',this.$.contentContainer.style.webkitTransform='',this.$.contentContainer.style.transform=''})}_resetDrawerState(){const a=this._drawerState;a===this._DRAWER_STATE.FLINGING&&(this._styleTransitionDuration(this.transitionDuration),this._styleTransitionTimingFunction(''),this.style.visibility=''),this._drawerState=this.opened?this.persistent?this._DRAWER_STATE.OPENED_PERSISTENT:this._DRAWER_STATE.OPENED:this._DRAWER_STATE.CLOSED,a!==this._drawerState&&(this._drawerState===this._DRAWER_STATE.OPENED?(document.addEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow='hidden'):(document.removeEventListener('keydown',this._boundEscKeydownHandler),document.body.style.overflow=''),a!==this._DRAWER_STATE.INIT&&this.dispatchEvent(new CustomEvent('app-drawer-transitioned',{bubbles:!0,composed:!0})))}_debouncedResetDrawerState(a){Number.isNaN(a)&&(a=this.transitionDuration),this._activeResetJob&&clearTimeout(this._activeResetJob),this._activeResetJob=setTimeout(()=>{this._resetDrawerState(),this._activeResetJob=null},this.transitionDuration)}}customElements.define(DrawerElement.is,DrawerElement);</script></dom-module><link rel="import" href="page-home.html"><dom-module id="facility-data" assetpath="data/"><script>class FacilityData extends WebvisualMixins.AccessibilityMixin(WebvisualMixins.FetchMixin(Polymer.Element)){static get is(){return'facility-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},room:{type:String},facilityName:{type:String,notify:!0,computed:'_computeFaciltyName(room)'},systemName:{type:String,notify:!0,computed:'_computeSystemName(room)'},facilities:{type:Array,notify:!0},facility:{type:Object,notify:!0},system:{type:Object,notify:!0},items:{type:Array,notify:!0}}}static get observers(){return['_computeFacility(facilities, facilityName)','_computeSystem(facility, systemName)','_computeItems(facilityName, systemName)']}_load(){super._load(),this._fetch('facilities.json','GET','include','json','facilities').catch((a)=>{console.warn(a)})}_computeFaciltyName(a){if(a){const b=a.split('/').filter(function(a){return''!==a});if(2===b.length)return b[0]}return''}_computeSystemName(a){if(a){const b=a.split('/').filter(function(a){return''!==a});if(2===b.length)return b[1]}return''}_computeFacility(a,b){a&&b&&this._getNamedArrayItem(a,b).then((a)=>{this.facility&&this._equals(a,this.facility)||this.set('facility',a)}).catch(()=>{this.dispatchEvent(new CustomEvent('empty-configuration',{bubbles:!0,composed:!0}))})}_computeSystem(a,b){a&&a.systems&&b&&this._getNamedArrayItem(a.systems,b).then((a)=>{this.system&&this._equals(a,this.system)||this.set('system',a)}).catch(()=>{this.dispatchEvent(new CustomEvent('empty-configuration',{bubbles:!0,composed:!0}))})}_computeItems(a,b){a&&b&&this._fetch(a+'+'+b+'+items.json','GET','include','json').then((a)=>{var b=Math.floor;let c,d,e='';if(a&&a.length){for(let f=0;f<a.length;f++)if(!a[f].color){e='#',c=['2C','F5'],c.push((4*b(64*Math.random())).toString(16));for(let a=3;0<a;a--)d=b(Math.random()*a),e+=(1===c[d].length?'0':'')+c[d],c.splice(d,1);a[f].color=e}this.set('items',a)}})}_getNamedArrayItem(a,b){return new Promise((d,e)=>{a&&b||e('empty');let f;for(let c=0;f=a[c];++c)f.name===b&&d(f);e('not existing')})}}customElements.define(FacilityData.is,FacilityData);</script></dom-module></div><dom-module id="webvisual-app"><template strip-whitespace=""><style include="app-style selectbox-style button-style">app-toolbar{font-size:1em;height:4em;padding-left:1em;padding-right:1em;transition:background 500ms cubic-bezier(0.6, 0, 0.3, 1);@apply --app-toolbar;}#drawer .drawer-content{display:block;height:calc(100% - 8em);padding:0 1em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}#drawer app-toolbar{@apply --drawer-toolbar;}#drawer .top{justify-content:space-between;margin-bottom:1em;}#drawer .bottom{justify-content:flex-end;}#drawer .spacer{margin-bottom:1em;}.drawer-content .selectbox,
      .drawer-content .button,
      .drawer-content .toggle-button{width:100%;padding:1em;}collapse-button{--collapse-content:{padding:0.5em 1em;border-left:thin solid rgba(255,255,255,0.1);border-right:thin solid rgba(255,255,255,0.1);box-shadow:0 5px 15px -10px rgba(0,0,0,0.25) inset;};}#pages{box-sizing:border-box;margin-bottom:2.5em;will-change:scroll-position;}#layout{background-color:var(--primary-background);transition:background 300ms cubic-bezier(0.6, 0, 0.3, 1);overflow:hidden;}:host([page="home"]) #layout{background-color:var(--primary-color);}:host([dark][page="home"]) #layout{background-color:var(--dark-primary-color);}#pages > *{flex:1;overflow-x:hidden;}#pages > .fullbleed{position:absolute;top:0;left:0;right:0;bottom:0;visibility:hidden;margin:0;padding:0;}#pages:-webkit-full-screen-ancestor{overflow:hidden !important;}#pages > [visible]{visibility:visible;}.login-icon{opacity:0.5;}.login-icon:hover{opacity:1;}.logo-link{padding-left:1em;margin-right:auto;height:100%;position:relative;box-sizing:border-box;}logo-element{height:100%;opacity:0.925;}logo-element:hover{opacity:1;}.notification > .message{padding-left:3em;padding-right:1em;font-weight:400;}.notification{--drawer-background:var(--highlight-color, var(--bright-primary-color));color:var(--primary-text-color);}.tab-drawer{@apply --layout-inline;@apply --layout-center-center;position:relative;height:2.75em;width:100%;}.tab-drawer.top{padding-right:0.5em;padding-left:0;width:auto;}.tabs{position:relative;height:100%;}tab-element{height:100%;}.tab{@apply --layout-inline;@apply --layout-center-center;position:relative;padding:0 1em;height:100%;}.tab > .left{margin-right:0.5em;color:currentColor;}.toolbar.grouping{position:relative;left:0;bottom:0;top:0;@apply --layout-inline;@apply --layout-center-center;background:url(data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 24 24%22%3E%3Cg%3E%3Cpath d=%22M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z%22 fill=%22%23FFFFFF%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E);background-repeat:no-repeat;background-position:0.33em center;background-size:1.33em 1.33em;padding:0;margin:0 0.5em;}.toolbar.grouping > select{height:2.5em;padding-left:1.75em;max-width:2.5em;width:2.5em;color:transparent;background-color:rgba(255,255,255,0.05);transition:background 0.2s linear;border-color:rgba(255,255,255,0.5);}.toolbar.grouping > select:hover{background-color:rgba(255,255,255,0.25);}[hidden],
      :host(:-webkit-full-screen-ancestor) [swipe-open]{display:none !important;}</style><iron-location path="{{path}}" query="{{query}}"></iron-location><iron-query-params params-string="{{query}}" params-object="{{queryParams}}"></iron-query-params><facility-data facilities="{{facilities}}" room="[[queryParams.room]]" items="{{elements}}"></facility-data><socket-connector socket-room="[[queryParams.room]]" socket-status="{{socketStatus}}"></socket-connector><iron-media-query query="(min-width: 768px)" query-matches="{{wideLayout}}"></iron-media-query><app-header-layout id="layout" fullbleed="" has-scrolling-region=""><app-header slot="header" id="header" hidden$="[[!_isContentPage]]" reveals="" fixed="[[_isFullbleedPage]]" threshold="64" threshold-triggered="{{thresholdTriggered}}" shadow$="[[thresholdTriggered]]"><app-toolbar><icon-button icon="menu" class="menu-icon" title$="[[localize('menu')]]" on-click="_toggleDrawer"></icon-button><a href="/home" class="logo-link"><logo-element title$="[[localize('home', 'name')]]"></logo-element></a><template is="dom-if" if="[[loadComplete]]"><iron-collapse opened$="[[showTabs]]" hidden$="[[!wideLayout]]" horizontal="" style="align-self: flex-end;"><div class="tab-drawer top"><div class="selectbox toolbar grouping top" title="[[groupBy]]" hidden$="[[hideGroupSelect]]"><select value="{{groupBy::change}}"><template is="dom-repeat" items="[[groupingKeys]]" sort="_sort"><option value="[[item]]">[[item]]</option></template></select></div><tabs-container class="tabs" role="tablist" selected="{{page}}" attr-for-selected="page"><tab-element page="list"><a href="/list?[[query]]" class="tab"><iron-icon icon="list" class="left"></iron-icon>{{localize('list', 'name')}}</a></tab-element><tab-element page="groups"><a href="/groups?[[query]]" class="tab"><iron-icon icon="grid-on" class="left"></iron-icon>{{localize('groups', 'name')}}</a></tab-element><tab-element page="detail"><a href="/detail?[[query]]" class="tab"><iron-icon icon="chrome-reader-mode" class="left"></iron-icon>{{localize('detail', 'name')}}</a></tab-element></tabs-container></div></iron-collapse></template><template is="dom-if" if="[[_shouldLogin]]"><icon-button icon="[[loginIcon]]" class="login-icon" title="{{localize('login', 'name')}}" on-click="openLoginDialog"></icon-button></template><template is="dom-if" if="[[detailHasDrawer]]"><icon-button icon="subject" title="items" on-click="_toggleDetailControlDrawer"></icon-button></template><icon-button icon="more-vert" title="{{localize('view')}}" on-click="toggleShowTabs"></icon-button></app-toolbar></app-header><iron-pages id="pages" role="main" selected="{{page}}" attr-for-selected="page" selected-attribute="visible" fallback-selection="home"><page-home page="home" dark$="[[dark]]" plain$="[[plain]]" class="fullbleed" facilities="[[facilities]]" on-login-request="openLoginDialog"><slot></slot></page-home><page-list page="list" dark$="[[dark]]" plain$="[[plain]]" elements="[[elements]]"></page-list><page-groups page="groups" dark$="[[dark]]" plain$="[[plain]]" elements="[[elements]]" group-by="[[groupBy]]" grouping-keys="{{groupingKeys}}"></page-groups><page-detail page="detail" id="detailpage" dark$="[[dark]]" plain$="[[plain]]" class="fullbleed" elements="[[elements]]" show-toggle-icon="{{detailHasDrawer}}" group-by="{{groupBy}}" grouping-keys="{{groupingKeys}}"></page-detail></iron-pages></app-header-layout><drawer-element id="networkNotification" class="notification" align="bottom" shadow="" auto-close="" auto-close-period="4000"><iron-icon class="prop" icon="[[socketStatusIcon]]" slot="icon"></iron-icon><span class="message"></span></drawer-element><drawer-element id="announceNotification" class="notification" align="bottom" shadow="" auto-close="" auto-close-period="5000"><iron-icon class="prop" icon="event" slot="icon"></iron-icon><span class="message"></span></drawer-element><drawer-element opened="{{showTabsOnBottom}}" id="toolbarBottom" swipe-open="" auto-close-period="8000" shadow="" auto-close="[[!thresholdTriggered]]"><div class="tab-drawer"><tabs-container class="tabs" role="tablist" selected="{{page}}" attr-for-selected="page"><tab-element page="list"><a href="/list?[[query]]" class="tab"><iron-icon icon="list" class="left"></iron-icon>{{localize('list', 'name')}}</a></tab-element><tab-element page="groups"><a href="/groups?[[query]]" class="tab"><iron-icon icon="grid-on" class="left"></iron-icon>{{localize('groups', 'name')}}</a></tab-element><tab-element page="detail"><a href="/detail?[[query]]" class="tab"><iron-icon icon="chrome-reader-mode" class="left"></iron-icon>{{localize('detail', 'name')}}</a></tab-element></tabs-container></div></drawer-element><template is="dom-if" if="[[_shouldRenderDrawer]]"><drawer-element id="drawer" opened="{{drawerOpened}}" align="left" swipe-open="" tabindex="0" scrim="" stretch=""><app-toolbar class="top"><icon-button icon="close" title="close" on-click="_toggleDrawer"></icon-button><icon-button icon="[[loginIcon]]" title="{{localize('notification', 'loggedIn', loggedIn)}}" on-click="openLoginDialog"></icon-button></app-toolbar><div class="drawer-content"><collapse-button icon="more-vert" title="{{localize('view')}}"><a href="/home" class="button" page="home"><paper-ripple id="ripple" recenters=""></paper-ripple><iron-icon icon="exit-to-app" class="left"></iron-icon>{{localize('home', 'name')}} </a><a href="/list?[[query]]" class="button" page="list"><paper-ripple id="ripple" recenters=""></paper-ripple><iron-icon icon="list" class="left"></iron-icon>{{localize('list', 'name')}} </a><a href="/groups?[[query]]" class="button" page="groups"><paper-ripple id="ripple" recenters=""></paper-ripple><iron-icon icon="grid-on" class="left"></iron-icon>{{localize('groups', 'name')}} </a><a href="/detail?[[query]]" class="button" page="detail"><paper-ripple id="ripple" recenters=""></paper-ripple><iron-icon icon="chrome-reader-mode" class="left"></iron-icon>{{localize('detail', 'name')}}</a></collapse-button><div class="spacer"></div><collapse-button icon="settings" title="{{localize('layout')}}"><div class="collapse-content"><toggle-button checked="{{plain}}"><iron-icon slot="icon" icon="border-style"></iron-icon>{{localize('plain', plain)}}</toggle-button><toggle-button checked="{{dark}}"><iron-icon slot="icon" icon="invert-colors"></iron-icon>{{localize('dark', dark)}}</toggle-button></div></collapse-button><div class="spacer"></div><div class="selectbox" title="[[language]]"><iron-icon icon="language"></iron-icon><span>{{localize('language')}}</span><select value="{{language::change}}"><option value="de">deutsch</option><option value="en">english</option><option value="fr">français</option><option value="es">español</option><option value="it">italiano</option><option value="ru">русский</option><option value="zh">中文</option></select></div><div class="selectbox grouping" title="[[groupBy]]" hidden$="[[hideGroupSelect]]"><iron-icon icon="filter-list"></iron-icon><span>{{localize('group by')}}</span><select value="{{groupBy::change}}"><template is="dom-repeat" items="[[groupingKeys]]" sort="_sort"><option value="[[item]]">[[item]]</option></template></select></div></div><app-toolbar class="bottom"><icon-button icon="[[socketStatusIcon]]" title="[[socketStatus]]" on-click="_socketConnectionToggle"></icon-button></app-toolbar></drawer-element></template></template><script>class WebvisualApp extends WebvisualMixins.LocalizeMixin(WebvisualMixins.AccessibilityMixin(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element))){static get is(){return'webvisual-app'}static get properties(){return{page:{type:String,reflectToAttribute:!0,observer:'_pageChanged'},path:{type:String},query:{type:String},queryParams:{type:Object,notify:!0},elements:{type:Array},groupingKeys:{type:Array,value:function(){return[]},notify:!0},groupBy:{type:String,notify:!0},subgroups:{type:Array,notify:!0},localesUrlPrefix:{type:String,value:'/locales/ui/'},dark:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,observer:'_darkChanged'},plain:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0,observer:'_plainChanged'},room:{type:String},socketStatus:{type:String},loginIcon:{type:String,computed:'_computeLoginIcon(loggedIn)'},loadComplete:{type:Boolean},detailHasDrawer:{type:Boolean},showTabs:{type:Boolean,observer:'_debouncedHideTabs'},wideLayout:{type:Boolean,value:!1,notify:!0},thresholdTriggered:{type:Boolean,value:!1},showTabsOnBottom:{type:Boolean,notify:!0,computed:'_computeShowTabsOnBottom(thresholdTriggered, wideLayout, showTabs)'},socketStatusIcon:{type:String,computed:'_computeStatusIcon(socketStatus)'},hideGroupSelect:{type:Boolean,computed:'_computeHideGroupSelect(page, loadComplete, groupingKeys)'},_isContentPage:{type:Boolean,computed:'_computeIsContentPage(page)'},_isFullbleedPage:{type:Boolean,computed:'_computeIsFullbleedPage(page)'},_shouldRenderDrawer:{type:Boolean,computed:'_computeShouldRenderDrawer(_isContentPage, loadComplete)'},_shouldLogin:{type:Boolean,computed:'_computeShouldLogin(loggedIn, offline)'}}}static get listeners(){return{"detail-request":'_openDetailRequestDialog',"login-request":'openLoginDialog',announce:'_notifyAnnouncement',"data-missing":'_notifyAnnouncement',"empty-configuration":'_redirectHome'}}static get observers(){return['_routePageChanged(path)','_roomChanged(queryParams.room)']}constructor(){super(),this._loadPresettings(),window.addEventListener('online',this._notifyNetworkStatus.bind(this)),window.addEventListener('offline',this._notifyNetworkStatus.bind(this))}connectedCallback(){super.connectedCallback(),this._addKeyListeners(),setTimeout(()=>{this.removeAttribute('unresolved')})}_routePageChanged(a){const b=a.split('/').filter(function(a){return''!==a}).join('');this.page=b||'home',this._resetScroll(),this.drawerOpened=!1}_redirectHome(a){this.setProperties({path:'/home',page:'home',showTabs:!1}),a&&this._notifyAnnouncement(a)}_resetScroll(){setTimeout(()=>{this.$.pages.scrollTop=0,this.$.layout.resetLayout()})}_addKeyListeners(){window.document.body.addEventListener('keydown',this._handleKeypress.bind(this),!1)}_handleKeypress(a){a&&a.keyCode&&(39===a.keyCode?this._nextPage():37===a.keyCode&&this._previousPage())}_nextPage(){this._switchPage(1)}_previousPage(){this._switchPage(-1)}_switchPage(a){this.async(function(){const b=['home','list','groups','detail'];let c=b.indexOf(this.page)||0;c=(c+a+b.length)%b.length,this.setProperties({page:b[c],showTabs:!1})})}_roomChanged(a){if(a){const b=a.split('/').filter(function(a){return''!==a});2<=b.length&&(this.room=b[0]+'+'+b[1],document.title=b.join('/')+' - '+(this.localize?this.localize(this.page,'name'):this.page))}}toggleShowTabs(){this.showTabs=!this.showTabs}_pageChanged(a,b){a&&(this._debouncedHideTabs(this.showTabs),'home'===a?this._pageLoaded(!!b):this.importHref(this.resolveUrl('page-'+a+'.html'),function(){this._pageLoaded(!!b),this._debouncedHideTabs()},function(){this.set('page','home')},!0))}_socketConnectionToggle(){const a=this.root.querySelector('socket-connector');a&&('sync-disabled'===a.socketStatus?a.connect(this.queryParams.room):(a.socketStatus='sync-disabled',a.disconnect()))}_pageLoaded(a){this._ensureLazyLoaded(),a&&setTimeout(()=>{this.$.header.resetLayout(),this._resetScroll()},25)}_ensureLazyLoaded(){this.loadComplete||Polymer.RenderStatus.afterNextRender(this,()=>{this.importHref(this.resolveUrl('lazy-resources.html'),()=>{'serviceWorker'in navigator&&navigator.serviceWorker.register('/service-worker.js'),this._notifyNetworkStatus(),this.loadComplete=!0})})}_notifyNetworkStatus(){const a=this.offline;this.offline=!navigator.onLine,(this.offline||!this.offline&&!0===a)&&(this.$.networkNotification.querySelector('.message').innerHTML=this.localize?this.localize('notification','offline',this.offline):this.offline?'You are offline':'You are online',this.$.networkNotification.opened=!0)}_notifyAnnouncement(a){const b=a.detail;b&&(this.$.announceNotification.querySelector('.message').innerHTML=b,this.$.announceNotification.opened=!0)}_sort(c,a){return c.localeCompare(a)}_toggleDrawer(){this.drawerOpened=!this.drawerOpened}_toggleDetailControlDrawer(){this.$.detailpage.toggleControlDrawer()}_toggleAlarmDrawer(){this.alarmDrawerOpened=!this.alarmDrawerOpened}_loadPresettings(){const a=JSON.parse(localStorage.getItem('settings'));if(!a&&this._isMobile())return void this.setProperties({dark:!0,plain:!0});for(let b in a)this.set(b,a[b]);this._updateStyles()}_isMobile(){const a=window.navigator.userAgent;return /[mM]obi/i.test(a)||/[tT]ablet/i.test(a)||/[aA]ndroid/i.test(a)}_plainChanged(a,b){if(void 0!==b){const b=JSON.parse(localStorage.getItem('settings'))||{};b.plain=a,localStorage.setItem('settings',JSON.stringify(b)),this._updateStyles()}}_darkChanged(a,b){if(void 0!==b){const b=JSON.parse(localStorage.getItem('settings'))||{};b.dark=a,localStorage.setItem('settings',JSON.stringify(b)),this._updateStyles()}}_updateStyles(){setTimeout(()=>{this.updateStyles()},0)}_debouncedHideTabs(a){a&&(this._activeHideTabsJob&&clearTimeout(this._activeHideTabsJob),this._activeHideTabsJob=setTimeout(()=>{this.showTabs=!1,setTimeout(()=>{this.notifyResize()},0),this._activeHideTabsJob=null},1e4))}_computeShowTabsOnBottom(a,b,c){return a||!b&&c}_computeShouldLogin(a,b){return!1===a&&!1===b}_computeIsContentPage(a){return'home'!==a}_computeIsFullbleedPage(a){return'detail'===a}_computeShouldRenderDrawer(a,b){return a&&b}_computeHideGroupSelect(a,b,c){return'groups'!==a||!b||!(c&&c.length)}_computeStatusIcon(a){return'sync-problem'===a?'sync-problem':'connect'===a?'sync':'connected'===a?'wifi':'sync-disabled'}_computeLoginIcon(a){return a?'person':'person-outline'}}customElements.define(WebvisualApp.is,WebvisualApp);</script></dom-module><dom-module id="grid-layout" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>.grid{@apply --layout-horizontal;@apply --layout-wrap;@apply --layout-start-justified;margin:0.2em 0.4em 0.4em 0.4em;padding:0;list-style:none;box-sizing:border-box;overflow:hidden;flex:1;}.grid li{@apply --layout-vertical;@apply --layout-wrap;@apply --layout-start-justified;-webkit-flex:1 1;flex:1 1;box-sizing:border-box;-webkit-flex-basis:20%;flex-basis:20%;max-width:20%;padding:0.25em;pointer-events:auto;}:host(:not([plain])) .grid li > *{border-radius:10px;box-shadow:0 4px 5px 0 rgba(0, 0, 0, 0.14),
                    0 1px 10px 0 rgba(0, 0, 0, 0.12),
                    0 2px 4px -1px rgba(0, 0, 0, 0.4);border-color:var(--grid-border-color, rgba(0,0,0,0.5));}:host([plain]) .grid li > *{border-radius:6px;box-shadow:none;border:none;}.grid a{text-decoration:none;}device-caption{flex:1 0;-webkit-flex-basis:auto;flex-basis:auto;}@media (min-width: 1981px){.grid li{-webkit-flex-basis:20%;flex-basis:20%;max-width:20%;}}@media (max-width: 1980px){.grid li{-webkit-flex-basis:25%;flex-basis:25%;max-width:25%;}}@media (max-width: 1600px){.grid li{-webkit-flex-basis:33.3%;flex-basis:33.3%;max-width:33.3%;}}@media (max-width: 767px){.grid{margin-left:0.25em;margin-right:0.25em;}.grid li{-webkit-flex-basis:50%;flex-basis:50%;max-width:50%;}}@media (max-width: 520px){.grid li{-webkit-flex-basis:100%;flex-basis:100%;max-width:100%;}}.grid li:only-of-type{-webkit-flex-basis:100%;flex-basis:100%;max-width:100%;}</style></template></dom-module><script>Polymer.IronSelection=function(a){this.selection=[],this.selectCallback=a},Polymer.IronSelection.prototype={get:function(){return this.multi?this.selection.slice():this.selection[0]},clear:function(a){this.selection.slice().forEach(function(b){(!a||0>a.indexOf(b))&&this.setItemSelected(b,!1)},this)},isSelected:function(a){return 0<=this.selection.indexOf(a)},setItemSelected:function(a,b){if(null!=a&&b!==this.isSelected(a)){if(b)this.selection.push(a);else{var c=this.selection.indexOf(a);0<=c&&this.selection.splice(c,1)}this.selectCallback&&this.selectCallback(a,b)}},select:function(a){this.multi?this.toggle(a):this.get()!==a&&(this.setItemSelected(this.get(),!1),this.setItemSelected(a,!0))},toggle:function(a){this.setItemSelected(a,!this.isSelected(a))}};</script><script>Polymer.IronSelectableBehavior={properties:{attrForSelected:{type:String,value:null},selected:{type:String,notify:!0},selectedItem:{type:Object,readOnly:!0,notify:!0},activateEvent:{type:String,value:'tap',observer:'_activateEventChanged'},selectable:String,selectedClass:{type:String,value:'iron-selected'},selectedAttribute:{type:String,value:null},fallbackSelection:{type:String,value:null},items:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}},_excludedLocalNames:{type:Object,value:function(){return{template:1,"dom-bind":1,"dom-if":1,"dom-repeat":1}}}},observers:['_updateAttrForSelected(attrForSelected)','_updateSelected(selected)','_checkFallback(fallbackSelection)'],created:function(){this._bindFilterItem=this._filterItem.bind(this),this._selection=new Polymer.IronSelection(this._applySelection.bind(this))},attached:function(){this._observer=this._observeItems(this),this._addListener(this.activateEvent)},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer),this._removeListener(this.activateEvent)},indexOf:function(a){return this.items?this.items.indexOf(a):-1},select:function(a){this.selected=a},selectPrevious:function(){var a=this.items.length,b=(+this._valueToIndex(this.selected)-1+a)%a;this.selected=this._indexToValue(b)},selectNext:function(){var a=(+this._valueToIndex(this.selected)+1)%this.items.length;this.selected=this._indexToValue(a)},selectIndex:function(a){this.select(this._indexToValue(a))},forceSynchronousItemUpdate:function(){this._observer&&'function'===typeof this._observer.flush?this._observer.flush():this._updateItems()},get _shouldUpdateSelection(){return null!=this.selected},_checkFallback:function(){this._updateSelected()},_addListener:function(a){this.listen(this,a,'_activateHandler')},_removeListener:function(a){this.unlisten(this,a,'_activateHandler')},_activateEventChanged:function(a,b){this._removeListener(b),this._addListener(a)},_updateItems:function(){var a=Polymer.dom(this).queryDistributedElements(this.selectable||'*');a=Array.prototype.filter.call(a,this._bindFilterItem),this._setItems(a)},_updateAttrForSelected:function(){this.selectedItem&&(this.selected=this._valueForItem(this.selectedItem))},_updateSelected:function(){this._selectSelected(this.selected)},_selectSelected:function(){if(this.items){var a=this._valueToItem(this.selected);a?this._selection.select(a):this._selection.clear(),this.fallbackSelection&&this.items.length&&void 0===this._selection.get()&&(this.selected=this.fallbackSelection)}},_filterItem:function(a){return!this._excludedLocalNames[a.localName]},_valueToItem:function(a){return null==a?null:this.items[this._valueToIndex(a)]},_valueToIndex:function(a){if(this.attrForSelected){for(var b,c=0;b=this.items[c];c++)if(this._valueForItem(b)==a)return c;}else return+a},_indexToValue:function(a){if(this.attrForSelected){var b=this.items[a];if(b)return this._valueForItem(b)}else return a},_valueForItem:function(a){if(!a)return null;if(!this.attrForSelected){var b=this.indexOf(a);return-1===b?null:b}var c=a[Polymer.CaseMap.dashToCamelCase(this.attrForSelected)];return c==void 0?a.getAttribute(this.attrForSelected):c},_applySelection:function(a,b){this.selectedClass&&this.toggleClass(this.selectedClass,b,a),this.selectedAttribute&&this.toggleAttribute(this.selectedAttribute,b,a),this._selectionChange(),this.fire('iron-'+(b?'select':'deselect'),{item:a})},_selectionChange:function(){this._setSelectedItem(this._selection.get())},_observeItems:function(a){return Polymer.dom(a).observeNodes(function(a){this._updateItems(),this._updateSelected(),this.fire('iron-items-changed',a,{bubbles:!1,cancelable:!1})})},_activateHandler:function(a){for(var b=a.target,c=this.items;b&&b!=this;){var d=c.indexOf(b);if(0<=d){var e=this._indexToValue(d);return void this._itemActivate(e,b)}b=b.parentNode}},_itemActivate:function(a,b){this.fire('iron-activate',{selected:a,item:b},{cancelable:!0}).defaultPrevented||this.select(a)}};</script><dom-module id="iron-pages" assetpath="../bower_components/iron-pages/"><template><style>:host{display:block;}:host > ::slotted(:not(slot):not(.iron-selected)){display:none !important;}</style><slot></slot></template><script>Polymer({is:'iron-pages',behaviors:[Polymer.IronResizableBehavior,Polymer.IronSelectableBehavior],properties:{activateEvent:{type:String,value:null}},observers:['_selectedPageChanged(selected)'],_selectedPageChanged:function(){this.async(this.notifyResize)}});</script></dom-module><script>Polymer.IronMultiSelectableBehaviorImpl={properties:{multi:{type:Boolean,value:!1,observer:'multiChanged'},selectedValues:{type:Array,notify:!0,value:function(){return[]}},selectedItems:{type:Array,readOnly:!0,notify:!0,value:function(){return[]}}},observers:['_updateSelected(selectedValues.splices)'],select:function(a){this.multi?this._toggleSelected(a):this.selected=a},multiChanged:function(a){this._selection.multi=a,this._updateSelected()},get _shouldUpdateSelection(){return null!=this.selected||null!=this.selectedValues&&this.selectedValues.length},_updateAttrForSelected:function(){this.multi?this.selectedItems&&0<this.selectedItems.length&&(this.selectedValues=this.selectedItems.map(function(a){return this._indexToValue(this.indexOf(a))},this).filter(function(a){return null!=a},this)):Polymer.IronSelectableBehavior._updateAttrForSelected.apply(this)},_updateSelected:function(){this.multi?this._selectMulti(this.selectedValues):this._selectSelected(this.selected)},_selectMulti:function(a){a=a||[];var b=(this._valuesToItems(a)||[]).filter(function(a){return null!==a&&a!==void 0});this._selection.clear(b);for(var c=0;c<b.length;c++)this._selection.setItemSelected(b[c],!0);if(this.fallbackSelection&&!this._selection.get().length){var d=this._valueToItem(this.fallbackSelection);d&&this.select(this.fallbackSelection)}},_selectionChange:function(){var a=this._selection.get();this.multi?(this._setSelectedItems(a),this._setSelectedItem(a.length?a[0]:null)):null!==a&&a!==void 0?(this._setSelectedItems([a]),this._setSelectedItem(a)):(this._setSelectedItems([]),this._setSelectedItem(null))},_toggleSelected:function(a){var b=this.selectedValues.indexOf(a);0>b?this.push('selectedValues',a):this.splice('selectedValues',b,1)},_valuesToItems:function(a){return null==a?null:a.map(function(a){return this._valueToItem(a)},this)}},Polymer.IronMultiSelectableBehavior=[Polymer.IronSelectableBehavior,Polymer.IronMultiSelectableBehaviorImpl];</script><script>Polymer({is:'iron-selector',behaviors:[Polymer.IronMultiSelectableBehavior]});</script><dom-module id="control-style" assetpath="../bower_components/webvisual-elements/shared-styles/"><template><style>:host{--control-icon-size-fine:1.3em;--control-icon-padding-fine:0.3em;--control-icon-size-coarse:1.4em;--control-icon-padding-coarse:0.4em;}#control{position:absolute;mix-blend-mode:var(--control-mix-blend-mode, exclusion);bottom:var(--control-bottom, auto);right:var(--control-right, auto);top:var(--control-top, auto);left:var(--control-left, auto);}#control.left{left:var(--control-left, 0px);}#control.top{top:var(--control-top, 0px);}#control.right{right:var(--control-right, 0px);}#control.bottom{bottom:var(--control-bottom, 0px);}#control > iron-selector{display:flex;flex-direction:row;}#control > *:not(:first-of-type){margin-left:var(--control-button-distance, 2px);}#control icon-button{background:var(--control-button-background, rgba(0,0,0,0.0625));border-radius:0;}#control icon-button:focus,
      #control icon-button:hover{background:var(--control-button-hover-background, rgba(0,0,0,0.125));}#control icon-button.iron-selected:not(:only-of-type){background:var(--control-button-selected-background, rgba(0,0,0,0.2));}#control icon-button{--icon-size:var(--control-icon-size-fine);--icon-padding:var(--control-icon-padding-fine);}@media (pointer: coarse){#control icon-button{--icon-size:var(--control-icon-size-coarse);--icon-padding:var(--control-icon-padding-coarse);}}</style></template></dom-module><script type="text/javascript">var d3=function(ee){"use strict";function p(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function q(a){var o;return 1===a.length&&(o=a,a=function(e,t){return p(o(e),t)}),{left:function(o,t,n,e){for(null==n&&(n=0),null==e&&(e=o.length);n<e;){var l=n+e>>>1;0>a(o[l],t)?n=l+1:e=l}return n},right:function(o,t,n,e){for(null==n&&(n=0),null==e&&(e=o.length);n<e;){var l=n+e>>>1;0<a(o[l],t)?e=l:n=l+1}return n}}}function T(l,s,d){var c,r,i,o,u=-1;if(d=+d,(l=+l)===(s=+s)&&0<d)return[l];if((c=s<l)&&(r=l,l=s,s=r),0===(o=y(l,s,d))||!isFinite(o))return[];if(0<o)for(l=Ar(l/o),s=Ur(s/o),i=Array(r=Ar(s-l+1));++u<r;)i[u]=(l+u)*o;else for(l=Ur(l*o),s=Ar(s*o),i=Array(r=Ar(l-s+1));++u<r;)i[u]=(l-u)/o;return c&&i.reverse(),i}function y(l,t,n){var e=(t-l)/Mr(0,n),r=Ur(zr(e)/Sr),d=e/Cr(10,r);return 0<=r?(s<=d?10:u<=d?5:a<=d?2:1)*Cr(10,r):-Cr(10,-r)/(s<=d?10:u<=d?5:a<=d?2:1)}function te(l,t,n){var e=kr(t-l)/Mr(0,n),r=Cr(10,Ur(zr(e)/Sr)),d=e/r;return s<=d?r*=10:u<=d?r*=5:a<=d&&(r*=2),t<l?-r:r}function l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function k(){return new l}function r(e){return function(){return e}}function e(e){this._context=e}function m(n){return new e(n)}function i(e){return e[0]}function o(e){return e[1]}function n(){function e(_){var t,p,e,r=_.length,i=!1;for(null==s&&(l=c(e=k())),t=0;t<=r;++t)!(t<r&&a(p=_[t],t,_))===i&&((i=!i)?l.lineStart():l.lineEnd()),i&&l.point(+d(p,t,_),+u(p,t,_));if(e)return l=null,e+""||null}var d=i,u=o,a=r(!0),s=null,c=m,l=null;return e.x=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),e):d},e.y=function(n){return arguments.length?(u="function"==typeof n?n:r(+n),e):u},e.defined=function(n){return arguments.length?(a="function"==typeof n?n:r(!!n),e):a},e.curve=function(n){return arguments.length?(c=n,null!=s&&(l=c(s)),e):c},e.context=function(n){return arguments.length?(null==n?s=l=null:l=c(s=n),e):s},e}function d(o,t,n){o._context.bezierCurveTo((2*o._x0+o._x1)/3,(2*o._y0+o._y1)/3,(o._x0+2*o._x1)/3,(o._y0+2*o._y1)/3,(o._x0+4*o._x1+t)/6,(o._y0+4*o._y1+n)/6)}function _(e){this._context=e}function v(o,t,n){o._context.bezierCurveTo(o._x1+o._k*(o._x2-o._x0),o._y1+o._k*(o._y2-o._y0),o._x2+o._k*(o._x1-t),o._y2+o._k*(o._y1-n),o._x2,o._y2)}function g(e,t){this._context=e,this._k=(1-t)/6}function b(e,t){this._context=e,this._alpha=t}function w(e){return 0>e?-1:1}function S(a,t,n){var e=a._x1-a._x0,l=t-a._x1,i=(a._y1-a._y0)/(e||0>l&&-0),o=(n-a._y1)/(l||0>e&&-0);return(w(i)+w(o))*xr(kr(i),kr(o),.5*kr((i*l+o*e)/(e+l)))||0}function z(o,t){var n=o._x1-o._x0;return n?(3*(o._y1-o._y0)/n-t)/2:t}function A(l,t,n){var e=l._x0,r=l._y0,i=l._x1,o=l._y1,s=(i-e)/3;l._context.bezierCurveTo(e+s,r+s*t,i-s,o-s*n,i,o)}function D(e){this._context=e}function U(e){this._context=e}function Y(e){this._context=e}function E(a){var t,n,e=a.length-1,l=Array(e),i=Array(e),o=Array(e);for(i[l[0]=0]=2,o[0]=a[0]+2*a[1],t=1;t<e-1;++t)l[t]=1,i[t]=4,o[t]=4*a[t]+2*a[t+1];for(l[e-1]=2,i[e-1]=7,o[e-1]=8*a[e-1]+a[e],t=1;t<e;++t)n=l[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(l[e-1]=o[e-1]/i[e-1],t=e-2;0<=t;--t)l[t]=(o[t]-l[t+1])/i[t];for(i[e-1]=(a[e]+l[e-1])/2,t=0;t<e-1;++t)i[t]=2*a[t+1]-l[t+1];return[l,i]}function F(e,t){this._context=e,this._t=t}function P(l,o,i,e){function s(e){return l(e=new Date(+e)),e}return(s.floor=s).ceil=function(e){return l(e=new Date(e-1)),o(e,1),l(e),e},s.round=function(o){var t=s(o),n=s.ceil(o);return o-t<n-o?t:n},s.offset=function(e,a){return o(e=new Date(+e),null==a?1:Ur(a)),e},s.range=function(a,d,n){var e,r=[];if(a=s.ceil(a),n=null==n?1:Ur(n),!(a<d&&0<n))return r;for(;r.push(e=new Date(+a)),o(a,n),l(a),e<a&&a<d;);return r},s.filter=function(n){return P(function(e){if(e<=e)for(;l(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(0>t)for(;0>=++t;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},i&&(s.count=function(e,o){return C.setTime(+e),M.setTime(+o),l(C),l(M),Ur(i(C,M))},s.every=function(o){return o=Ur(o),isFinite(o)&&0<o?1<o?s.filter(e?function(n){return 0==e(n)%o}:function(e){return 0==s.count(0,e)%o}):s:null}),s}function L(e){return P(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*X)/V})}function I(e){return P(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/V})}function Q(o,t){if(0>(n=(o=t?o.toExponential(t-1):o.toExponential()).indexOf("e")))return null;var n,e=o.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+o.slice(n+1)]}function ne(e){return(e=Q(kr(e)))?e[1]:NaN}function lt(o,t){var n=Q(o,t);if(!n)return o+"";var a=n[0],l=n[1];return 0>l?"0."+Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+Array(l-a.length+2).join("0")}function rt(e){return new ct(e)}function ct(d){if(!(t=st.exec(d)))throw new Error("invalid format: "+d);var t,n=t[1]||" ",e=t[2]||">",r=t[3]||"-",i=t[4]||"",o=!!t[5],u=t[6]&&+t[6],a=!!t[7],s=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(a=!0,c="g"):it[c]||(c=""),(o||"0"===n&&"="===e)&&(o=!0,n="0",e="="),this.fill=n,this.align=e,this.sign=r,this.symbol=i,this.zero=o,this.width=u,this.comma=a,this.precision=s,this.type=c}function _t(e){return e}function yt(e){function l(o){function t(y){var w,n,C,r=k,i=g;if("c"===v)i=m(y)+i,y="";else{var o=0>(y=+y);if(y=m(kr(y),_),o&&0==+y&&(o=!1),r=(o?"("===a?a:"-":"-"===a||"("===a?"":a)+r,i=("s"===v?gt[8+K/3]:"")+i+(o&&"("===a?")":""),d)for(w=-1,n=y.length;++w<n;)if(48>(C=y.charCodeAt(w))||57<C){i=(46===C?c+y.slice(w+1):y.slice(w))+i,y=y.slice(0,w);break}}p&&!l&&(y=T(y,1/0));var u=r.length+y.length+i.length,S=u<h?Array(h-u+1).join(b):"";switch(p&&l&&(y=T(S+y,S.length?h-i.length:1/0),S=""),e){case"<":y=r+y+i+S;break;case"=":y=r+S+y+i;break;case"^":y=S.slice(0,u=S.length>>1)+r+y+i+S.slice(u);break;default:y=S+r+y+i;}return x(y)}var b=(o=rt(o)).fill,e=o.align,a=o.sign,i=o.symbol,l=o.zero,h=o.width,p=o.comma,_=o.precision,v=o.type,k="$"===i?s[0]:"#"===i&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",g="$"===i?s[1]:/[%p]/.test(v)?r:"",m=it[v],d=!v||/[defgprs%]/.test(v);return _=null==_?v?6:12:/[gprs]/.test(v)?Mr(1,xr(21,_)):Mr(0,xr(20,_)),t.toString=function(){return o+""},t}var o,d,a,T=e.grouping&&e.thousands?(d=e.grouping,a=e.thousands,function(l,t){for(var n=l.length,e=[],r=0,i=d[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Mr(1,t-o)),e.push(l.substring(n-=i,n+i)),!((o+=i+1)>t));)i=d[r=(r+1)%d.length];return e.reverse().join(a)}):_t,s=e.currency,c=e.decimal,x=e.numerals?(o=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return o[+e]})}):_t,r=e.percent||"%";return{format:l,formatPrefix:function(a,t){var n=l(((a=rt(a)).type="f",a)),e=3*Mr(-8,xr(8,Ur(ne(t)/3))),s=Cr(10,-e),i=gt[8+e/3];return function(e){return n(s*e)+i}}}}function vt(e){return ut=yt(e),ee.format=ut.format,pt=ut.formatPrefix,ut}function xt(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wt(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bt(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Tt(k){function C(l,s){return function(d){var c,n,e,r=[],i=-1,o=0,u=l.length;for(d instanceof Date||(d=new Date(+d));++i<u;)37===l.charCodeAt(i)&&(r.push(l.slice(o,i)),null==(n=Ct[c=l.charAt(++i)])?n="e"===c?" ":"0":c=l.charAt(++i),(e=s[c])&&(c=e(d,n)),r.push(c),o=i+1);return r.push(l.slice(o,i)),r.join("")}}function S(a,i){return function(o){var t,n,e=bt(1900);if(b(e,a,o+="",0)!=o.length)return null;if("Q"in e)return new Date(e.Q);if("p"in e&&(e.H=e.H%12+12*e.p),"V"in e){if(1>e.V||53<e.V)return null;"w"in e||(e.w=1),"Z"in e?(t=4<(n=(t=wt(bt(e.y))).getUTCDay())||0===n?nt.ceil(t):nt(t),t=tt.offset(t,7*(e.V-1)),e.y=t.getUTCFullYear(),e.m=t.getUTCMonth(),e.d=t.getUTCDate()+(e.w+6)%7):(t=4<(n=(t=i(bt(e.y))).getDay())||0===n?R.ceil(t):R(t),t=Z.offset(t,7*(e.V-1)),e.y=t.getFullYear(),e.m=t.getMonth(),e.d=t.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),n="Z"in e?wt(bt(e.y)).getUTCDay():i(bt(e.y)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(n+5)%7:e.w+7*e.U-(n+6)%7);return"Z"in e?(e.H+=0|e.Z/100,e.M+=e.Z%100,wt(e)):i(e)}}function b(l,t,n,e){for(var r,i,o=0,d=t.length,a=n.length;o<d;){if(a<=e)return-1;if(37===(r=t.charCodeAt(o++))){if(r=t.charAt(o++),!(i=w[r in Ct?t.charAt(o++):r])||0>(e=i(l,n,e)))return-1;}else if(r!=n.charCodeAt(e++))return-1}return e}var T=k.dateTime,r=k.date,i=k.time,o=k.periods,n=k.days,e=k.shortDays,u=k.months,a=k.shortMonths,s=Ut(o),c=Yt(o),l=Ut(n),h=Yt(n),f=Ut(e),p=Yt(e),_=Ut(u),v=Yt(u),y=Ut(a),g=Yt(a),m={a:function(n){return e[n.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return a[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:ma,e:ma,f:wa,H:fa,I:xa,j:va,L:ba,m:Ta,M:ka,p:function(e){return o[+(12<=e.getHours())]},Q:$a,s:Ka,S:Ca,u:Sa,U:za,V:Ma,w:Ua,W:Aa,x:null,X:null,y:Ya,Y:Da,Z:Ea,"%":Ja},d={a:function(n){return e[n.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return a[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Fa,e:Fa,f:Na,H:Pa,I:La,j:Ha,L:Xa,m:Va,M:Ia,p:function(e){return o[+(12<=e.getUTCHours())]},Q:$a,s:Ka,S:Oa,u:ja,U:qa,V:Ba,w:Za,W:Wa,x:null,X:null,y:Ra,Y:Qa,Z:Ga,"%":Ja},w={a:function(o,t,n){var e=f.exec(t.slice(n));return e?(o.w=p[e[0].toLowerCase()],n+e[0].length):-1},A:function(o,t,n){var e=l.exec(t.slice(n));return e?(o.w=h[e[0].toLowerCase()],n+e[0].length):-1},b:function(o,t,n){var e=y.exec(t.slice(n));return e?(o.m=g[e[0].toLowerCase()],n+e[0].length):-1},B:function(o,t,n){var e=_.exec(t.slice(n));return e?(o.m=v[e[0].toLowerCase()],n+e[0].length):-1},c:function(o,t,n){return b(o,T,t,n)},d:ra,e:ra,f:pa,H:da,I:da,j:sa,L:_a,m:la,M:ca,p:function(o,t,n){var e=s.exec(t.slice(n));return e?(o.p=c[e[0].toLowerCase()],n+e[0].length):-1},Q:ga,s:ya,S:ua,u:Pt,U:ea,V:ta,w:Ft,W:na,x:function(o,t,n){return b(o,r,t,n)},X:function(o,t,n){return b(o,i,t,n)},y:aa,Y:oa,Z:ia,"%":ha};return m.x=C(r,m),m.X=C(i,m),m.c=C(T,m),d.x=C(r,d),d.X=C(i,d),d.c=C(T,d),{format:function(e){var t=C(e+="",m);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",xt);return t.toString=function(){return e},t},utcFormat:function(e){var t=C(e+="",d);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e,wt);return t.toString=function(){return e},t}}}function kt(a,l,n){var e=0>a?"-":"",r=(e?-a:a)+"",i=r.length;return e+(i<n?Array(n-i+1).join(l)+r:r)}function Mt(e){return e.replace(At,"\\$&")}function Ut(e){return new RegExp("^(?:"+e.map(Mt).join("|")+")","i")}function Yt(o){for(var t={},n=-1,e=o.length;++n<e;)t[o[n].toLowerCase()]=n;return t}function Ft(o,t,n){var e=St.exec(t.slice(n,n+1));return e?(o.w=+e[0],n+e[0].length):-1}function Pt(o,t,n){var e=St.exec(t.slice(n,n+1));return e?(o.u=+e[0],n+e[0].length):-1}function ea(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.U=+e[0],n+e[0].length):-1}function ta(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.V=+e[0],n+e[0].length):-1}function na(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.W=+e[0],n+e[0].length):-1}function oa(o,t,n){var e=St.exec(t.slice(n,n+4));return e?(o.y=+e[0],n+e[0].length):-1}function aa(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function ia(o,t,n){var e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return e?(o.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function la(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.m=e[0]-1,n+e[0].length):-1}function ra(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.d=+e[0],n+e[0].length):-1}function sa(o,t,n){var e=St.exec(t.slice(n,n+3));return e?(o.m=0,o.d=+e[0],n+e[0].length):-1}function da(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.H=+e[0],n+e[0].length):-1}function ca(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.M=+e[0],n+e[0].length):-1}function ua(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.S=+e[0],n+e[0].length):-1}function _a(o,t,n){var e=St.exec(t.slice(n,n+3));return e?(o.L=+e[0],n+e[0].length):-1}function pa(o,t,n){var e=St.exec(t.slice(n,n+6));return e?(o.L=Ur(e[0]/1e3),n+e[0].length):-1}function ha(o,t,n){var e=zt.exec(t.slice(n,n+1));return e?n+e[0].length:-1}function ga(o,t,n){var e=St.exec(t.slice(n));return e?(o.Q=+e[0],n+e[0].length):-1}function ya(o,t,n){var e=St.exec(t.slice(n));return e?(o.Q=1e3*+e[0],n+e[0].length):-1}function ma(e,t){return kt(e.getDate(),t,2)}function fa(e,t){return kt(e.getHours(),t,2)}function xa(e,t){return kt(e.getHours()%12||12,t,2)}function va(e,t){return kt(1+Z.count($(e),e),t,3)}function ba(e,t){return kt(e.getMilliseconds(),t,3)}function wa(e,t){return ba(e,t)+"000"}function Ta(e,t){return kt(e.getMonth()+1,t,2)}function ka(e,t){return kt(e.getMinutes(),t,2)}function Ca(e,t){return kt(e.getSeconds(),t,2)}function Sa(e){var t=e.getDay();return 0===t?7:t}function za(e,t){return kt(W.count($(e),e),t,2)}function Ma(o,t){var n=o.getDay();return o=4<=n||0===n?G(o):G.ceil(o),kt(G.count($(o),o)+(4===$(o).getDay()),t,2)}function Ua(e){return e.getDay()}function Aa(e,t){return kt(R.count($(e),e),t,2)}function Ya(e,t){return kt(e.getFullYear()%100,t,2)}function Da(e,t){return kt(e.getFullYear()%1e4,t,4)}function Ea(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+kt(0|t/60,"0",2)+kt(t%60,"0",2)}function Fa(e,t){return kt(e.getUTCDate(),t,2)}function Pa(e,t){return kt(e.getUTCHours(),t,2)}function La(e,t){return kt(e.getUTCHours()%12||12,t,2)}function Ha(e,t){return kt(1+tt.count(at(e),e),t,3)}function Xa(e,t){return kt(e.getUTCMilliseconds(),t,3)}function Na(e,t){return Xa(e,t)+"000"}function Va(e,t){return kt(e.getUTCMonth()+1,t,2)}function Ia(e,t){return kt(e.getUTCMinutes(),t,2)}function Oa(e,t){return kt(e.getUTCSeconds(),t,2)}function ja(e){var t=e.getUTCDay();return 0===t?7:t}function qa(e,t){return kt(et.count(at(e),e),t,2)}function Ba(o,t){var n=o.getUTCDay();return o=4<=n||0===n?ot(o):ot.ceil(o),kt(ot.count(at(o),o)+(4===at(o).getUTCDay()),t,2)}function Za(e){return e.getUTCDay()}function Wa(e,t){return kt(nt.count(at(e),e),t,2)}function Ra(e,t){return kt(e.getUTCFullYear()%100,t,2)}function Qa(e,t){return kt(e.getUTCFullYear()%1e4,t,4)}function Ga(){return"+0000"}function Ja(){return"%"}function $a(e){return+e}function Ka(e){return Ur(+e/1e3)}function el(e){return dt=Tt(e),ee.timeFormat=dt.format,ee.timeParse=dt.parse,mt=dt.utcFormat,ft=dt.utcParse,dt}function qn(){}function tl(a,t){var l=new qn;if(a instanceof qn)a.each(function(e,t){l.set(t,e)});else if(Array.isArray(a)){var e,n=-1,i=a.length;if(null==t)for(;++n<i;)l.set(n,a[n]);else for(;++n<i;)l.set(t(e=a[n],n,a),e)}else if(a)for(var o in a)l.set(o,a[o]);return l}function jn(){}function nl(o,t,n){o.prototype=t.prototype=n,n.constructor=o}function Qn(o,t){var n=Object.create(o.prototype);for(var e in t)n[e]=t[e];return n}function Gn(){}function Jn(e){var t;return e=(e+"").trim().toLowerCase(),(t=Rn.exec(e))?new ye(15&(t=parseInt(t[1],16))>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1):(t=re.exec(e))?fe(parseInt(t[1],16)):(t=ie.exec(e))?new ye(t[1],t[2],t[3],1):(t=oe.exec(e))?new ye(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ue.exec(e))?pe(t[1],t[2],t[3],t[4]):(t=ae.exec(e))?pe(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=se.exec(e))?ge(t[1],t[2]/100,t[3]/100,1):(t=ce.exec(e))?ge(t[1],t[2]/100,t[3]/100,t[4]):le.hasOwnProperty(e)?fe(le[e]):"transparent"===e?new ye(NaN,NaN,NaN,0):null}function fe(e){return new ye(255&e>>16,255&e>>8,255&e,1)}function pe(o,t,n,e){return 0>=e&&(o=t=n=NaN),new ye(o,t,n,e)}function _e(e){return e instanceof Gn||(e=Jn(e)),e?new ye((e=e.rgb()).r,e.g,e.b,e.opacity):new ye}function ve(o,t,n,e){return 1===arguments.length?_e(o):new ye(o,t,n,null==e?1:e)}function ye(o,a,i,l){this.r=+o,this.g=+a,this.b=+i,this.opacity=+l}function ge(o,t,n,e){return 0>=e?o=t=n=NaN:0>=n||1<=n?o=t=NaN:0>=t&&(o=NaN),new me(o,t,n,e)}function me(o,a,i,l){this.h=+o,this.s=+a,this.l=+i,this.opacity=+l}function de(o,t,n){return 255*(60>o?t+(n-t)*o/60:180>o?n:240>o?t+(n-t)*(240-o)/60:t)}function we(l){if(l instanceof ze)return new ze(l.l,l.a,l.b,l.opacity);if(l instanceof Fe){if(isNaN(l.h))return new ze(l.l,0,0,l.opacity);var t=l.h*he;return new ze(l.l,br(t)*l.c,vr(t)*l.c,l.opacity)}l instanceof ye||(l=_e(l));var n,e,r=Ye(l.r),i=Ye(l.g),o=Ye(l.b),s=De((.2225045*r+.7168786*i+.0606169*o)/be);return r===i&&i===o?n=e=s:(n=De((.4360747*r+.3850649*i+.1430804*o)/Me),e=De((.0139322*r+.0971045*i+.7141733*o)/Te)),new ze(116*s-16,500*(n-s),200*(s-e),l.opacity)}function ze(o,a,i,l){this.l=+o,this.a=+a,this.b=+i,this.opacity=+l}function De(e){return Ce<e?Cr(e,1/3):e/Ae+ke}function Ee(e){return Ne<e?e*e*e:Ae*(e-ke)}function Ue(e){return 255*(.0031308>=e?12.92*e:1.055*Cr(e,1/2.4)-.055)}function Ye(e){return .04045>=(e/=255)?e/12.92:Cr((e+.055)/1.055,2.4)}function Fe(o,a,i,l){this.h=+o,this.c=+a,this.l=+i,this.opacity=+l}function Pe(o,a,i,l){this.h=+o,this.s=+a,this.l=+i,this.opacity=+l}function je(e){return function(){return e}}function Be(a){return 1==(a=+a)?Re:function(o,t){return t-o?(n=o,e=t,l=a,n=Cr(n,l),e=Cr(e,l)-n,l=1/l,function(o){return Cr(n+o*e,l)}):je(isNaN(o)?t:o);var n,e,l}}function Re(o,t){var n,e,a=t-o;return a?(n=o,e=a,function(o){return n+o*e}):je(isNaN(o)?t:o)}function $e(o,a){return a-=o=+o,function(e){return o+a*e}}function We(d,_){var t,n,e,i,o,r=Ze.lastIndex=Qe.lastIndex=0,a=-1,u=[],c=[];for(d+="",_+="";(t=Ze.exec(d))&&(n=Qe.exec(_));)(e=n.index)>r&&(e=_.slice(r,e),u[a]?u[a]+=e:u[++a]=e),(t=t[0])===(n=n[0])?u[a]?u[a]+=n:u[++a]=n:(u[++a]=null,c.push({i:a,x:$e(t,n)})),r=Qe.lastIndex;return r<_.length&&(e=_.slice(r),u[a]?u[a]+=e:u[++a]=e),2>u.length?c[0]?(o=c[0].x,function(e){return o(e)+""}):(i=_,function(){return i}):(_=c.length,function(o){for(var t,n=0;n<_;++n)u[(t=c[n]).i]=t.x(o);return u.join("")})}function Je(o,t){var a,e=typeof t;return null==t||"boolean"===e?je(t):("number"===e?$e:"string"===e?(a=Jn(t))?(t=a,nr):We:t instanceof Jn?nr:t instanceof Date?function(o,a){var e=new Date;return a-=o=+o,function(n){return e.setTime(o+a*n),e}}:Array.isArray(t)?function(a,t){var n,e=t?t.length:0,l=a?xr(e,a.length):0,i=Array(l),o=Array(e);for(n=0;n<l;++n)i[n]=Je(a[n],t[n]);for(;n<e;++n)o[n]=t[n];return function(e){for(n=0;n<l;++n)o[n]=i[n](e);return o}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(o,a){var l,e={},r={};for(l in null!==o&&"object"==typeof o||(o={}),null!==a&&"object"==typeof a||(a={}),a)l in o?e[l]=Je(o[l],a[l]):r[l]=a[l];return function(n){for(l in e)r[l]=e[l](n);return r}}:$e)(o,t)}function Ke(o,a){return a-=o=+o,function(e){return mr(o+a*e)}}function ol(l,d,c,e,r,_){var p,h,g;return(p=wr(l*l+d*d))&&(l/=p,d/=p),(g=l*c+d*e)&&(c-=l*g,e-=d*g),(h=wr(c*c+e*e))&&(c/=h,e/=h,g/=h),l*e<d*c&&(l=-l,d=-d,g=-g,p=-p),{translateX:r,translateY:_,rotate:yr(d,l)*Ge,skewX:Math.atan(g)*Ge,scaleX:p,scaleY:h}}function al(d,a,l,_){function p(e){return e.length?e.pop()+" ":""}return function(g,t){var n,e,r,i,o,u,y,s,c=[],m=[];return g=d(g),t=d(t),function(s,t,n,e,r,i){if(s!==n||t!==e){var o=r.push("translate(",null,a,null,l);i.push({i:o-4,x:$e(s,n)},{i:o-2,x:$e(t,e)})}else(n||e)&&r.push("translate("+n+a+e+l)}(g.translateX,g.translateY,t.translateX,t.translateY,c,m),n=g.rotate,e=t.rotate,r=c,i=m,n===e?e&&r.push(p(r)+"rotate("+e+_):(180<n-e?e+=360:180<e-n&&(n+=360),i.push({i:r.push(p(r)+"rotate(",null,_)-2,x:$e(n,e)})),o=g.skewX,u=t.skewX,y=c,s=m,o===u?u&&y.push(p(y)+"skewX("+u+_):s.push({i:y.push(p(y)+"skewX(",null,_)-2,x:$e(o,u)}),function(a,t,n,e,l,i){if(a!==n||t!==e){var o=l.push(p(l)+"scale(",null,",",null,")");i.push({i:o-4,x:$e(a,n)},{i:o-2,x:$e(t,e)})}else 1===n&&1===e||l.push(p(l)+"scale("+n+","+e+")")}(g.scaleX,g.scaleY,t.scaleX,t.scaleY,c,m),g=t=null,function(o){for(var t,n=-1,e=m.length;++n<e;)c[(t=m[n]).i]=t.x(o);return c.join("")}}}function il(e){return((e=gr(e))+1/e)/2}function ll(d,t){var n,m,u=d[0],a=d[1],s=d[2],e=t[0],r=t[1],i=t[2],c=e-u,l=r-a,o=c*c+l*l;if(o<pr)m=zr(i/s)/lr,n=function(e){return[u+e*c,a+e*l,s*gr(lr*e*m)]};else{var h=wr(o),p=(i*i-s*s+ur*o)/(2*s*cr*h),_=(i*i-s*s-ur*o)/(2*i*cr*h),f=zr(wr(p*p+1)-p),y=zr(wr(_*_+1)-_);m=(y-f)/lr,n=function(d){var t,n,e=d*m,r=il(f),i=s/(cr*h)*(r*(n=lr*e+f,((n=gr(2*n))-1)/(n+1))-(t=f,((t=gr(t))-1/t)/2));return[u+i*c,a+i*l,s*r/il(lr*e+f)]}}return n.duration=1e3*m,n}function rl(e){return function(){return e}}function sl(e){return+e}function dl(o,a){return(a-=o=+o)?function(e){return(e-o)/a}:rl(a)}function cl(l,t,n,e){var r=l[0],i=l[1],o=t[0],s=t[1];return i<r?(r=n(i,r),o=e(s,o)):(r=n(r,i),o=e(o,s)),function(e){return o(r(e))}}function ul(l,e,t,n){var r=xr(l.length,e.length)-1,i=Array(r),o=Array(r),s=-1;for(l[r]<l[0]&&(l=l.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=t(l[s],l[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var t=Yr(l,e,1,r)-1;return o[t](i[t](e))}}function _l(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function pl(d,n){function e(){return _=2<xr(u.length,a.length)?ul:cl,r=o=null,i}function i(e){return(r||(r=_(u,a,c?(o=d,function(a,i){var l=o(a=+a,i=+i);return function(e){return e<=a?0:i<=e?1:l(e)}}):d,s)))(+e);var o}var _,r,o,u=_r,a=_r,s=Je,c=!1;return i.invert=function(e){return(o||(o=_(a,u,dl,c?(l=n,function(o,a){var i=l(o=+o,a=+a);return function(e){return 0>=e?o:1<=e?a:i(e)}}):n)))(+e);var l},i.domain=function(n){return arguments.length?(u=In.call(n,sl),e()):u.slice()},i.range=function(n){return arguments.length?(a=Zn.call(n),e()):a.slice()},i.rangeRound=function(n){return a=Zn.call(n),s=Ke,e()},i.clamp=function(n){return arguments.length?(c=!!n,e()):c},i.interpolate=function(n){return arguments.length?(s=n,e()):s},e()}function hl(d,t,n){var e,r,i,o,u,a,s=d[0],c=d[d.length-1],l=te(s,c,null==t?10:t);switch((n=rt(null==n?",f":n)).type){case"s":var _=Mr(kr(s),kr(c));return null!=n.precision||isNaN((u=l,a=_,e=Mr(0,3*Mr(-8,xr(8,Ur(ne(a)/3)))-ne(kr(u)))))||(n.precision=e),pt(n,_);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN((i=l,o=Mr(kr(s),kr(c)),i=kr(i),o=kr(o)-i,e=Mr(0,ne(o)-ne(i))+1))||(n.precision=e-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN((r=l,e=Mr(0,-ne(kr(r)))))||(n.precision=e-2*("%"===n.type));}return ee.format(n)}function gl(l){var a=l.domain;return l.ticks=function(e){var t=a();return T(t[0],t[t.length-1],null==e?10:e)},l.tickFormat=function(e,t){return hl(a(),e,t)},l.nice=function(s){null==s&&(s=10);var t,n=a(),e=0,r=n.length-1,i=n[e],o=n[r];return o<i&&(t=i,i=o,o=t,t=e,e=r,r=t),0<(t=y(i,o,s))?t=y(i=Ur(i/t)*t,o=Ar(o/t)*t,s):0>t&&(t=y(i=Ar(i*t)/t,o=Ur(o*t)/t,s)),0<t?(n[e]=Ur(i/t)*t,n[r]=Ar(o/t)*t,a(n)):0>t&&(n[e]=Ar(i*t)/t,n[r]=Ur(o*t)/t,a(n)),l},l}function yl(a,t){var n,e=0,l=(a=a.slice()).length-1,i=a[e],o=a[l];return o<i&&(n=e,e=l,l=n,n=i,i=o,o=n),a[e]=t.floor(i),a[l]=t.ceil(o),a}function ml(o,n){return(n=zr(n/o))?function(e){return zr(e/o)/n}:rl(n)}function fl(o,a){return 0>o?function(i){return-Cr(-a,i)*Cr(-o,1-i)}:function(e){return Cr(a,e)*Cr(o,1-e)}}function xl(e){return isFinite(e)?+("1e"+e):0>e?0:e}function vl(e){return 10===e?xl:e===sr?gr:function(n){return Cr(e,n)}}function bl(e){return e===sr?zr:10===e&&Math.log10||2===e&&Math.log2||(e=zr(e),function(n){return zr(n)/e})}function wl(e){return function(n){return-e(-n)}}function Tl(e,o){return 0>e?-Cr(-e,o):Cr(e,o)}function kl(e){return new Date(e)}function Cl(e){return e instanceof Date?+e:+new Date(+e)}function Sl(e){return e}function zl(e){return"translate("+(e+.5)+",0)"}function Ml(e){return"translate(0,"+(e+.5)+")"}function Ul(){return!this.__axis}function Al(C,v){function e(T){var t=null==g?v.ticks?v.ticks.apply(v,y):v.domain():g,k=null==m?v.tickFormat?v.tickFormat.apply(v,y):Sl:m,e=Mr(d,0)+x,r=v.range(),i=+r[0]+.5,z=+r[r.length-1]+.5,u=(v.bandwidth?function(o){var n=Mr(0,o.bandwidth()-1)/2;return o.round()&&(n=mr(n)),function(e){return+o(e)+n}}:function(e){return function(n){return+e(n)}})(v.copy()),a=T.selection?T.selection():T,s=a.selectAll(".domain").data([null]),c=a.selectAll(".tick").data(t,v).order(),l=c.exit(),h=c.enter().append("g").attr("class","tick"),f=c.select("line"),p=c.select("text");s=s.merge(s.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),c=c.merge(h),f=f.merge(h.append("line").attr("stroke","#000").attr(b+"2",S*d)),p=p.merge(h.append("text").attr("fill","#000").attr(b,S*e).attr("dy",C===Xr?"0em":C===Vr?"0.71em":"0.32em")),T!==a&&(s=s.transition(T),c=c.transition(T),f=f.transition(T),p=p.transition(T),l=l.transition(T).attr("opacity",Or).attr("transform",function(e){return isFinite(e=u(e))?o(e):this.getAttribute("transform")}),h.attr("opacity",Or).attr("transform",function(e){var t=this.parentNode.__axis;return o(t&&isFinite(t=t(e))?t:u(e))})),l.remove(),s.attr("d",C===Ir||C==Nr?"M"+S*w+","+i+"H0.5V"+z+"H"+S*w:"M"+i+","+S*w+"V0.5H"+z+"V"+S*w),c.attr("opacity",1).attr("transform",function(e){return o(u(e))}),f.attr(b+"2",S*d),p.attr(b,S*e).text(k),a.filter(Ul).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",C===Nr?"start":C===Ir?"end":"middle"),a.each(function(){this.__axis=u})}var y=[],g=null,m=null,d=6,w=6,x=3,S=C===Xr||C===Ir?-1:1,b=C===Ir||C===Nr?"x":"y",o=C===Xr||C===Vr?zl:Ml;return e.scale=function(n){return arguments.length?(v=n,e):v},e.ticks=function(){return y=Hr.call(arguments),e},e.tickArguments=function(n){return arguments.length?(y=null==n?[]:Hr.call(n),e):y.slice()},e.tickValues=function(n){return arguments.length?(g=null==n?null:Hr.call(n),e):g&&g.slice()},e.tickFormat=function(n){return arguments.length?(m=n,e):m},e.tickSize=function(n){return arguments.length?(d=w=+n,e):d},e.tickSizeInner=function(n){return arguments.length?(d=+n,e):d},e.tickSizeOuter=function(n){return arguments.length?(w=+n,e):w},e.tickPadding=function(n){return arguments.length?(x=+n,e):x},e}function ti(){for(var o,t=0,n=arguments.length,e={};t<n;++t){if(!(o=arguments[t]+"")||o in e)throw new Error("illegal type: "+o);e[o]=[]}return new ei(e)}function ei(e){this._=e}function Yl(o,t){for(var n,e=0,a=o.length;e<a;++e)if((n=o[e]).name===t)return n.value}function ii(o,t,a){for(var l=0,r=o.length;l<r;++l)if(o[l].name===t){o[l]=jr,o=o.slice(0,l).concat(o.slice(l+1));break}return null!=a&&o.push({name:t,value:a}),o}function oi(o){var a=o+="",n=a.indexOf(":");return 0<=n&&"xmlns"!==(a=o.slice(0,n))&&(o=o.slice(n+1)),qr.hasOwnProperty(a)?{space:qr[a],local:o}:o}function si(e){var t=oi(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(o){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===ni&&e.documentElement.namespaceURI===ni?e.createElement(o):e.createElementNS(t,o)}})(t)}function ci(){}function li(e){return null==e?ci:function(){return this.querySelector(e)}}function hi(){return[]}function fi(e){return null==e?hi:function(){return this.querySelectorAll(e)}}function pi(e){return Array(e.length)}function mi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Dl(l,t,n,e,r,i){for(var o,d=0,a=t.length,s=i.length;d<s;++d)(o=t[d])?(o.__data__=i[d],e[d]=o):n[d]=new mi(l,i[d]);for(;d<a;++d)(o=t[d])&&(r[d]=o)}function xi(d,t,n,e,r,i,o){var u,a,s,c={},l=t.length,_=i.length,h=Array(l);for(u=0;u<l;++u)(a=t[u])&&(h[u]=s=gi+o.call(a,a.__data__,u,t),s in c?r[u]=a:c[s]=a);for(u=0;u<_;++u)(a=c[s=gi+o.call(d,i[u],u,i)])?((e[u]=a).__data__=i[u],c[s]=null):n[u]=new mi(d,i[u]);for(u=0;u<l;++u)(a=t[u])&&c[h[u]]===a&&(r[u]=a)}function Mi(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function bi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ti(e,t){return e.style.getPropertyValue(t)||bi(e).getComputedStyle(e,null).getPropertyValue(t)}function ki(e){return e.trim().split(/^|\s+/)}function Ni(e){return e.classList||new Ai(e)}function Ai(e){this._node=e,this._names=ki(e.getAttribute("class")||"")}function Ci(o,t){for(var n=Ni(o),e=-1,a=t.length;++e<a;)n.add(t[e])}function Si(o,t){for(var n=Ni(o),e=-1,a=t.length;++e<a;)n.remove(t[e])}function zi(){this.textContent=""}function Di(){this.innerHTML=""}function Ei(){this.nextSibling&&this.parentNode.appendChild(this)}function Ui(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yi(){return null}function Fi(){var e=this.parentNode;e&&e.removeChild(this)}function Pi(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Li(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Hi(o,e,t){return o=qi(o,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||o.call(this,e)}}function qi(t,e,n){return function(o){var a=ee.event;ee.event=o;try{t.call(this,this.__data__,e,n)}finally{ee.event=a}}}function Ii(a){return function(){var o=this.__on;if(o){for(var t,n=0,e=-1,l=o.length;n<l;++n)t=o[n],a.type&&t.type!==a.type||t.name!==a.name?o[++e]=t:this.removeEventListener(t.type,t.listener,t.capture);++e?o.length=e:delete this.__on}}}function Vi(d,s,_){var p=wi.hasOwnProperty(d.type)?Hi:qi;return function(h,t,n){var e,r=this.__on,i=p(s,t,n);if(r)for(var g=0,u=r.length;g<u;++g)if((e=r[g]).type===d.type&&e.name===d.name)return this.removeEventListener(e.type,e.listener,e.capture),this.addEventListener(e.type,e.listener=i,e.capture=_),void(e.value=s);this.addEventListener(d.type,i,_),e={type:d.type,name:d.name,value:s,listener:i,capture:_},r?r.push(e):this.__on=[e]}}function Oi(o,t,n,e){var a=ee.event;o.sourceEvent=ee.event,ee.event=o;try{return t.apply(n,e)}finally{ee.event=a}}function ji(o,t,n){var e=bi(o),a=e.CustomEvent;"function"==typeof a?a=new a(t,n):(a=e.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),o.dispatchEvent(a)}function Bi(e,t){this._groups=e,this._parents=t}function El(){return new Bi([[document.documentElement]],Xi)}function Zi(e){return"string"==typeof e?new Bi([[document.querySelector(e)]],[document.documentElement]):new Bi([[e]],Xi)}function Wi(){for(var e,t=ee.event;e=t.sourceEvent;)t=e;return t}function Qi(o,t){var n=o.ownerSVGElement||o;if(n.createSVGPoint){var e=n.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,[(e=e.matrixTransform(o.getScreenCTM().inverse())).x,e.y]}var a=o.getBoundingClientRect();return[t.clientX-a.left-o.clientLeft,t.clientY-a.top-o.clientTop]}function Gi(e){var t=Wi();return t.changedTouches&&(t=t.changedTouches[0]),Qi(e,t)}function Ji(a,t,n){3>arguments.length&&(n=t,t=Wi().changedTouches);for(var e,l=0,i=t?t.length:0;l<i;++l)if((e=t[l]).identifier===n)return Qi(a,e);return null}function Ki(){ee.event.stopImmediatePropagation()}function to(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function no(o){var t=o.document.documentElement,n=Zi(o).on("dragstart.drag",to,!0);"onselectstart"in t?n.on("selectstart.drag",to,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eo(o,t){var n=o.document.documentElement,e=Zi(o).on("dragstart.drag",null);t&&(e.on("click.drag",to,!0),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in n?e.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ro(e){return function(){return e}}function io(l,t,n,e,r,i,o,d,a,s){this.target=l,this.type=t,this.subject=n,this.identifier=e,this.active=r,this.x=i,this.y=o,this.dx=d,this.dy=a,this._=s}function oo(){return!ee.event.button}function uo(){return this.parentNode}function ao(e){return null==e?{x:ee.event.x,y:ee.event.y}:e}function so(){return"ontouchstart"in this}function co(){return yo||(wo(Mo),yo=mo.now()+go)}function Mo(){yo=0}function bo(){this._call=this._time=this._next=null}function Fl(o,t,n){var e=new bo;return e.restart(o,t,n),e}function ko(){yo=(vo=mo.now())+go,ho=fo=0;try{!function(){co(),++ho;for(var e,t=Ri;t;)0<=(e=yo-t._time)&&t._call.call(null,e),t=t._next;--ho}()}finally{ho=0,function(){for(var o,t,n=Ri,e=1/0;n;)n._call?(e>n._time&&(e=n._time),n=(o=n)._next):(t=n._next,n._next=null,n=o?o._next=t:Ri=t);lo=o,Ao(e)}(),yo=0}}function No(){var e=mo.now(),t=e-vo;_o<t&&(go-=t,vo=e)}function Ao(e){ho||(fo&&(fo=clearTimeout(fo)),24<e-yo?(e<1/0&&(fo=setTimeout(ko,e-mo.now()-go)),po&&(po=clearInterval(po))):(po||(vo=mo.now(),po=setInterval(No,_o)),ho=1,wo(ko)))}function Co(o,n,a){var i=new bo;return n=null==n?0:+n,i.restart(function(e){i.stop(),o(e+n)},n,a),i}function So(a,t,l,e,s,d){var o=a.__transition;if(!o)a.__transition={};else if(l in o)return;!function(d,e,o){function a(s){var c,_,p,r;if(o.state!==Wr)return l();for(c in t)if((r=t[c]).name===o.name){if(r.state===Yo)return Co(a);r.state===Fo?(r.state=Lo,r.timer.stop(),r.on.call("interrupt",d,d.__data__,r.index,r.group),delete t[c]):+c<e&&(r.state=Lo,r.timer.stop(),delete t[c])}if(Co(function(){o.state===Yo&&(o.state=Fo,o.timer.restart(n,o.delay,o.time),n(s))}),o.state=Uo,o.on.call("start",d,d.__data__,o.index,o.group),o.state===Uo){for(o.state=Yo,u=Array(p=o.tween.length),c=0,_=-1;c<p;++c)(r=o.tween[c].value.call(d,d.__data__,o.index,o.group))&&(u[++_]=r);u.length=_+1}}function n(a){for(var t=a<o.duration?o.ease.call(null,a/o.duration):(o.timer.restart(l),o.state=Po,1),n=-1,e=u.length;++n<e;)u[n].call(null,t);o.state===Po&&(o.on.call("end",d,d.__data__,o.index,o.group),l())}function l(){for(var n in o.state=Lo,o.timer.stop(),delete t[e],t)return;delete d.__transition}var u,t=d.__transition;(t[e]=o).timer=Fl(function(e){o.state=Wr,o.timer.restart(a,o.delay,o.time),o.delay<=e&&a(e-o.delay)},0,o.time)}(a,l,{name:t,index:e,group:s,on:xo,tween:Br,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:Zr})}function Xo(o,t){var n=Io(o,t);if(n.state>Zr)throw new Error("too late; already scheduled");return n}function qo(o,t){var n=Io(o,t);if(n.state>Uo)throw new Error("too late; already started");return n}function Io(o,t){var n=o.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vo(a,t){var n,e,l,i=a.__transition,o=!0;if(i){for(l in t=null==t?null:t+"",i)(n=i[l]).name===t?(e=n.state>Uo&&n.state<Po,n.state=Lo,n.timer.stop(),e&&n.on.call("interrupt",a,a.__data__,n.index,n.group),delete i[l]):o=!1;o&&delete a.__transition}}function Oo(o,a,n){var e=o._id;return o.each(function(){var o=qo(this,e);(o.value||(o.value={}))[a]=n.apply(this,arguments)}),function(n){return Io(n,e).value[a]}}function jo(o,t){var a;return("number"==typeof t?$e:t instanceof Jn?nr:(a=Jn(t))?(t=a,nr):We)(o,t)}function Bo(o,t,n,e){this._groups=o,this._parents=t,this._name=n,this._id=e}function Pl(){return++Ro}function Wo(o,t){for(var n;!(n=o.__transition)||!(n=n[t]);)if(!(o=o.parentNode))return Qo.time=co(),Qo;return n}function Jo(e){return function(){return e}}function Ko(o,t,n){this.target=o,this.type=t,this.transform=n}function Ll(o,t,n){this.k=o,this.x=t,this.y=n}function Hl(e){return e.__zoom||Go}function Xl(){ee.event.stopImmediatePropagation()}function Nl(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function Vl(){return!ee.event.button}function Il(){var o,t,n=this;return n instanceof SVGElement?(o=(n=n.ownerSVGElement||n).width.baseVal.value,t=n.height.baseVal.value):(o=n.clientWidth,t=n.clientHeight),[[0,0],[o,t]]}function Ol(){return this.__zoom||Go}function jl(){return-ee.event.deltaY*(ee.event.deltaMode?120:1)/500}function ql(){return"ontouchstart"in this}function Bl(a,t,n){var e=a.invertX(t[0][0])-n[0][0],l=a.invertX(t[1][0])-n[1][0],i=a.invertY(t[0][1])-n[0][1],o=a.invertY(t[1][1])-n[1][1];return a.translate(e<l?(e+l)/2:xr(0,e)||Mr(0,l),i<o?(i+o)/2:xr(0,i)||Mr(0,o))}function Zl(e){return function(){return e}}function Wl(o,t,n){this.target=o,this.type=t,this.selection=n}function Rl(){ee.event.stopImmediatePropagation()}function Ql(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function Gl(e){return{type:e}}function Jl(){return!ee.event.button}function $l(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Kl(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tr(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ar(h){function l(a){var t=a.property("__brush",s).selectAll(".overlay").data([Gl("overlay")]);t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ts.overlay).merge(t).each(function(){var e=Kl(this).extent;Zi(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),a.selectAll(".selection").data([Gl("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ts.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=a.selectAll(".handle").data(h.handles,function(e){return e.type});n.exit().remove(),n.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return ts[e.type]}),a.each(F).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function F(){var o=Zi(this),a=Kl(this).selection;a?(o.selectAll(".selection").style("display",null).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1]),o.selectAll(".handle").style("display",null).attr("x",function(n){return"e"===n.type[n.type.length-1]?a[1][0]-e/2:a[0][0]-e/2}).attr("y",function(n){return"s"===n.type[0]?a[1][1]-e/2:a[0][1]-e/2}).attr("width",function(n){return"n"===n.type||"s"===n.type?a[1][0]-a[0][0]+e:e}).attr("height",function(n){return"e"===n.type||"w"===n.type?a[1][1]-a[0][1]+e:e})):o.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function A(e,t){return e.__brush.emitter||new i(e,t)}function i(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function o(){function L(){var e=Gi(p);!T||V||f||(kr(e[0]-N[0])>kr(e[1]-N[1])?f=!0:V=!0),N=e,l=!0,Ql(),E()}function E(){var l;switch(s=N[0]-M[0],c=N[1]-M[1],v){case Qr:case Rr:y&&(s=Mr(t-Y,xr(w-i,s)),n=Y+s,o=i+s),g&&(c=Mr(x-e,xr(b-X,c)),r=e+c,a=X+c);break;case Gr:0>y?(s=Mr(t-Y,xr(w-Y,s)),n=Y+s,o=i):0<y&&(s=Mr(t-i,xr(w-i,s)),n=Y,o=i+s),0>g?(c=Mr(x-e,xr(b-e,c)),r=e+c,a=X):0<g&&(c=Mr(x-X,xr(b-X,c)),r=e,a=X+c);break;case Jr:y&&(n=Mr(t,xr(w,Y-s*y)),o=Mr(t,xr(w,i+s*y))),g&&(r=Mr(x,xr(b,e-c*g)),a=Mr(x,xr(b,X+c*g)));}o<n&&(y*=-1,l=Y,Y=i,i=l,l=n,n=o,o=l,_ in ns&&S.attr("cursor",ts[_=ns[_]])),a<r&&(g*=-1,l=e,e=X,X=l,l=r,r=a,a=l,_ in os&&S.attr("cursor",ts[_=os[_]])),m.selection&&(I=m.selection),V&&(n=I[0][0],o=I[1][0]),f&&(r=I[0][1],a=I[1][1]),I[0][0]===n&&I[0][1]===r&&I[1][0]===o&&I[1][1]===a||(m.selection=[[n,r],[o,a]],F.call(p),O.brush())}function U(){if(Rl(),ee.event.touches){if(ee.event.touches.length)return;H&&clearTimeout(H),H=setTimeout(function(){H=null},500),C.on("touchmove.brush touchend.brush touchcancel.brush",null)}else eo(ee.event.view,l),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);C.attr("pointer-events","all"),S.attr("cursor",ts.overlay),m.selection&&(I=m.selection),tr(I)&&(m.selection=null,F.call(p)),O.end()}if(ee.event.touches){if(ee.event.changedTouches.length<ee.event.touches.length)return Ql();}else if(H)return;if(P.apply(this,arguments)){var Y,n,e,r,i,o,X,a,s,c,l,V,f,p=this,_=ee.event.target.__data__.type,v="selection"===(ee.event.metaKey?_="overlay":_)?Rr:ee.event.altKey?Jr:Gr,y=h===Kr?null:as[_],g=h===$r?null:is[_],m=Kl(p),d=m.extent,I=m.selection,t=d[0][0],x=d[0][1],w=d[1][0],b=d[1][1],T=y&&g&&ee.event.shiftKey,M=Gi(p),N=M,O=A(p,arguments).beforestart();"overlay"===_?m.selection=I=[[Y=h===Kr?t:M[0],e=h===$r?x:M[1]],[i=h===Kr?w:Y,X=h===$r?b:e]]:(Y=I[0][0],e=I[0][1],i=I[1][0],X=I[1][1]),n=Y,r=e,o=i,a=X;var C=Zi(p).attr("pointer-events","none"),S=C.selectAll(".overlay").attr("cursor",ts[_]);if(ee.event.touches)C.on("touchmove.brush",L,!0).on("touchend.brush touchcancel.brush",U,!0);else{var z=Zi(ee.event.view).on("keydown.brush",function(){switch(ee.event.keyCode){case 16:T=y&&g;break;case 18:v===Gr&&(y&&(i=o-s*y,Y=n+s*y),g&&(X=a-c*g,e=r+c*g),v=Jr,E());break;case 32:v!==Gr&&v!==Jr||(0>y?i=o-s:0<y&&(Y=n-s),0>g?X=a-c:0<g&&(e=r-c),v=Qr,S.attr("cursor",ts.selection),E());break;default:return;}Ql()},!0).on("keyup.brush",function(){switch(ee.event.keyCode){case 16:T&&(V=f=T=!1,E());break;case 18:v===Jr&&(0>y?i=o:0<y&&(Y=n),0>g?X=a:0<g&&(e=r),v=Gr,E());break;case 32:v===Qr&&(ee.event.altKey?(y&&(i=o-s*y,Y=n+s*y),g&&(X=a-c*g,e=r+c*g),v=Jr):(0>y?i=o:0<y&&(Y=n),0>g?X=a:0<g&&(e=r),v=Gr),S.attr("cursor",ts[_]),E());break;default:return;}Ql()},!0).on("mousemove.brush",L,!0).on("mouseup.brush",U,!0);no(ee.event.view)}Rl(),Vo(p),F.call(p),O.start()}}function s(){var e=this.__brush||{selection:null};return e.extent=a.apply(this,arguments),e.dim=h,e}var H,a=$l,P=Jl,n=ti(l,"start","brush","end"),e=6;return l.move=function(e,l){e.selection?e.on("start.brush",function(){A(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){A(this,arguments).end()}).tween("brush",function(){function s(o){n.selection=1===o&&tr(c)?null:i(o),F.call(d),e.brush()}var d=this,n=d.__brush,e=A(d,arguments),r=n.selection,c=h.input("function"==typeof l?l.apply(this,arguments):l,n.extent),i=Je(r,c);return r&&c?s:s(1)}):e.each(function(){var o=this,t=arguments,n=o.__brush,e=h.input("function"==typeof l?l.apply(o,t):l,n.extent),r=A(o,t).beforestart();Vo(o),n.selection=null==e||tr(e)?null:e,F.call(o),r.start().brush().end()})},i.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Oi(new Wl(l,e,h.output(this.state.selection)),n.apply,n,[e,this.that,this.args])}},l.extent=function(e){return arguments.length?(a="function"==typeof e?e:Zl([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),l):a},l.filter=function(e){return arguments.length?(P="function"==typeof e?e:Zl(!!e),l):P},l.handleSize=function(n){return arguments.length?(e=+n,l):e},l.on=function(){var e=n.on.apply(n,arguments);return e===n?l:e},l}var sr=Math.E,gr=Math.exp,yr=Math.atan2,mr=Math.round,xr=Math.min,vr=Math.sin,br=Math.cos,wr=Math.sqrt,Tr=Math.PI,kr=Math.abs,Cr=Math.pow,Sr=Math.LN10,zr=Math.log,Mr=Math.max,Ur=Math.floor,Ar=Math.ceil,Yr=q(p).right,s=7.0710678118654755,u=3.1622776601683795,a=1.4142135623730951,Dr=Tr,x=2*Dr,Er=1e-6;l.prototype=k.prototype={constructor:l,moveTo:function(e,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,o){this._+="L"+(this._x1=+e)+","+(this._y1=+o)},quadraticCurveTo:function(o,a,i,l){this._+="Q"+ +o+","+ +a+","+(this._x1=+i)+","+(this._y1=+l)},bezierCurveTo:function(a,l,s,d,c,u){this._+="C"+ +a+","+ +l+","+ +s+","+ +d+","+(this._x1=+c)+","+(this._y1=+u)},arcTo:function(x,v,b,T,k){x=+x,v=+v,b=+b,T=+T,k=+k;var C=this._x1,o=this._y1,u=b-x,a=T-v,s=C-x,c=o-v,l=s*s+c*c;if(0>k)throw new Error("negative radius: "+k);if(null===this._x1)this._+="M"+(this._x1=x)+","+(this._y1=v);else if(!(Er<l));else if(kr(c*u-a*s)>Er&&k){var h=b-C,f=T-o,p=u*u+a*a,_=wr(p),y=wr(l),g=k*Math.tan((Dr-Math.acos((p+l-(h*h+f*f))/(2*_*y)))/2),m=g/y,d=g/_;kr(m-1)>Er&&(this._+="L"+(x+m*s)+","+(v+m*c)),this._+="A"+k+","+k+",0,0,"+ +(s*f<c*h)+","+(this._x1=x+d*u)+","+(this._y1=v+d*a)}else this._+="L"+(this._x1=x)+","+(this._y1=v)},arc:function(d,_,p,g,r,i){d=+d,_=+_;var o=(p=+p)*br(g),u=p*vr(g),a=d+o,s=_+u,c=1^i,l=i?g-r:r-g;if(0>p)throw new Error("negative radius: "+p);null===this._x1?this._+="M"+a+","+s:(kr(this._x1-a)>Er||kr(this._y1-s)>Er)&&(this._+="L"+a+","+s),p&&(0>l&&(l=l%x+x),x-Er<l?this._+="A"+p+","+p+",0,1,"+c+","+(d-o)+","+(_-u)+"A"+p+","+p+",0,1,"+c+","+(this._x1=a)+","+(this._y1=s):Er<l&&(this._+="A"+p+","+p+",0,"+ +(Dr<=l)+","+c+","+(this._x1=d+p*br(r))+","+(this._y1=_+p*vr(r))))},rect:function(o,a,i,l){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+a)+"h"+ +i+"v"+ +l+"h"+-i+"Z"},toString:function(){return this._}};var f=1e-12;Tr,e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;default:this._context.lineTo(e,o);}}},_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:d(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:d(this,e,o);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=o}},g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:v(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2,this._x1=e,this._y1=o;break;case 2:this._point=3;default:v(this,e,o);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=o}};var c=function o(n){function e(e){return new g(e,n)}return e.tension=function(e){return o(+e)},e}(0);b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(o,a){if(o=+o,a=+a,this._point){var i=this._x2-o,e=this._y2-a;this._l23_a=wr(this._l23_2a=Cr(i*i+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(d,t,n){var e=d._x1,r=d._y1,i=d._x2,o=d._y2;if(d._l01_a>f){var u=2*d._l01_2a+3*d._l01_a*d._l12_a+d._l12_2a,a=3*d._l01_a*(d._l01_a+d._l12_a);e=(e*u-d._x0*d._l12_2a+d._x2*d._l01_2a)/a,r=(r*u-d._y0*d._l12_2a+d._y2*d._l01_2a)/a}if(d._l23_a>f){var s=2*d._l23_2a+3*d._l23_a*d._l12_a+d._l12_2a,c=3*d._l23_a*(d._l23_a+d._l12_a);i=(i*s+d._x1*d._l23_2a-t*d._l12_2a)/c,o=(o*s+d._y1*d._l23_2a-n*d._l12_2a)/c}d._context.bezierCurveTo(e,r,i,o,d._x2,d._y2)}(this,o,a);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=o,this._y0=this._y1,this._y1=this._y2,this._y2=a}};var h=function o(n){function e(e){return n?new b(e,n):new g(e,0)}return e.alpha=function(e){return o(+e)},e}(.5);D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:A(this,this._t0,z(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(o,a){var i=NaN;if(a=+a,(o=+o)!==this._x1||a!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;break;case 2:this._point=3,A(this,z(this,i=S(this,o,a)),i);break;default:A(this,this._t0,i=S(this,o,a));}this._x0=this._x1,this._x1=o,this._y0=this._y1,this._y1=a,this._t0=i}}},(function(e){this._context=new U(e)}.prototype=Object.create(D.prototype)).point=function(e,t){D.prototype.point.call(this,t,e)},U.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(a,t,n,e,l,i){this._context.bezierCurveTo(t,a,e,n,i,l)}},Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,t=this._y,n=a.length;if(n)if(this._line?this._context.lineTo(a[0],t[0]):this._context.moveTo(a[0],t[0]),2===n)this._context.lineTo(a[1],t[1]);else for(var e=E(a),l=E(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(e[0][i],l[0][i],e[1][i],l[1][i],a[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,o){this._x.push(+e),this._y.push(+o)}},F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(o,a){switch(o=+o,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,a),this._context.lineTo(o,a);else{var i=this._x*(1-this._t)+o*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,a)}}this._x=o,this._y=a}};var C=new Date,M=new Date,H=P(function(){},function(e,o){e.setTime(+e+o)},function(e,t){return t-e});H.every=function(o){return o=Ur(o),isFinite(o)&&0<o?1<o?P(function(e){e.setTime(Ur(e/o)*o)},function(e,a){e.setTime(+e+a*o)},function(e,t){return(t-e)/o}):H:null};var X=6e4,N=36e5,V=6048e5,O=P(function(e){e.setTime(1e3*Ur(e/1e3))},function(e,o){e.setTime(+e+1e3*o)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),j=P(function(e){e.setTime(Ur(e/X)*X)},function(e,o){e.setTime(+e+o*X)},function(e,t){return(t-e)/X},function(e){return e.getMinutes()}),B=P(function(e){var o=e.getTimezoneOffset()*X%N;0>o&&(o+=N),e.setTime(Ur((+e-o)/N)*N+o)},function(e,o){e.setTime(+e+o*N)},function(e,t){return(t-e)/N},function(e){return e.getHours()}),Z=P(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*X)/864e5},function(e){return e.getDate()-1}),W=L(0),R=L(1),G=(L(2),L(3),L(4)),J=(L(5),L(6),P(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),$=P(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});$.every=function(o){return isFinite(o=Ur(o))&&0<o?P(function(e){e.setFullYear(Ur(e.getFullYear()/o)*o),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*o)}):null},P(function(e){e.setUTCSeconds(0,0)},function(e,o){e.setTime(+e+o*X)},function(e,t){return(t-e)/X},function(e){return e.getUTCMinutes()}),P(function(e){e.setUTCMinutes(0,0,0)},function(e,o){e.setTime(+e+o*N)},function(e,t){return(t-e)/N},function(e){return e.getUTCHours()});var K,tt=P(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),et=I(0),nt=I(1),ot=(I(2),I(3),I(4)),at=(I(5),I(6),P(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),P(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));at.every=function(o){return isFinite(o=Ur(o))&&0<o?P(function(e){e.setUTCFullYear(Ur(e.getUTCFullYear()/o)*o),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*o)}):null};var it={"":function(a,t){t:for(var n,e=(a=a.toPrecision(t)).length,l=1,i=-1;l<e;++l)switch(a[l]){case".":i=n=l;break;case"0":0===i&&(i=l),n=l;break;case"e":break t;default:0<i&&(i=0);}return 0<i?a.slice(0,i)+a.slice(n+1):a},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return mr(e).toString(2)},c:function(e){return e+""},d:function(e){return mr(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return mr(e).toString(8)},p:function(e,t){return lt(100*e,t)},r:lt,s:function(a,t){var n=Q(a,t);if(!n)return a+"";var l=n[0],r=n[1],i=r-(K=3*Mr(-8,xr(8,Ur(r/3))))+1,o=l.length;return i===o?l:o<i?l+Array(i-o+1).join("0"):0<i?l.slice(0,i)+"."+l.slice(i):"0."+Array(1-i).join("0")+Q(a,Mr(0,t+i-1))[0]},X:function(e){return mr(e).toString(16).toUpperCase()},x:function(e){return mr(e).toString(16)}},st=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;rt.prototype=ct.prototype,ct.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Mr(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Mr(0,0|this.precision))+this.type};var ut,pt,gt=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];vt({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var dt,mt,ft,Ct={"-":"",_:" ",0:"0"},St=/^\s*\d+/,zt=/^%/,At=/[\\^$*+?|[\]().{}]/g;el({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Dt="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||mt(Dt),+new Date("2000-01-01T00:00:00.000Z")||ft(Dt);var Et="$";qn.prototype=tl.prototype={constructor:qn,has:function(e){return Et+e in this},get:function(e){return this[Et+e]},set:function(e,t){return this[Et+e]=t,this},remove:function(e){var t=Et+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Et&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Et&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Et&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Et&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Et&&++e;return e},empty:function(){for(var e in this)if(e[0]===Et)return!1;return!0},each:function(e){for(var t in this)t[0]===Et&&e(this[t],t.slice(1),this)}};var Nt=tl.prototype;jn.prototype=function(o,t){var n=new jn;if(o instanceof jn)o.each(function(e){n.add(e)});else if(o){var e=-1,a=o.length;if(null==t)for(;++e<a;)n.add(o[e]);else for(;++e<a;)n.add(t(o[e],e,o))}return n}.prototype={constructor:jn,has:Nt.has,add:function(e){return this[Et+(e+="")]=e,this},remove:Nt.remove,clear:Nt.clear,values:Nt.keys,size:Nt.size,empty:Nt.empty,each:Nt.each};var Vn=Array.prototype,In=Vn.map,Zn=Vn.slice,Wn=1/.7,Rn=/^#([0-9a-f]{3})$/,re=/^#([0-9a-f]{6})$/,ie=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,oe=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ue=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ae=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,se=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ce=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nl(Gn,Jn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),nl(ye,ve,Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Mr(0,xr(1,e)))?"rgb(":"rgba(")+Mr(0,xr(255,mr(this.r)||0))+", "+Mr(0,xr(255,mr(this.g)||0))+", "+Mr(0,xr(255,mr(this.b)||0))+(1===e?")":", "+e+")")}})),nl(me,function(o,t,n,e){return 1===arguments.length?function(l){if(l instanceof me)return new me(l.h,l.s,l.l,l.opacity);if(l instanceof Gn||(l=Jn(l)),!l)return new me;if(l instanceof me)return l;var d=(l=l.rgb()).r/255,n=l.g/255,e=l.b/255,r=xr(d,n,e),i=Mr(d,n,e),o=NaN,c=i-r,a=(i+r)/2;return c?(o=d===i?(n-e)/c+6*(n<e):n===i?(e-d)/c+2:(d-n)/c+4,c/=.5>a?i+r:2-i-r,o*=60):c=0<a&&1>a?0:o,new me(o,c,a,l.opacity)}(o):new me(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new me(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new me(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var o=this.h%360+360*(0>this.h),t=isNaN(o)||isNaN(this.s)?0:this.s,n=this.l,e=n+(.5>n?n:1-n)*t,a=2*n-e;return new ye(de(240<=o?o-240:o+120,a,e),de(o,a,e),de(120>o?o+240:o-120,a,e),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var he=Tr/180,xe=180/Tr,Me=.96422,be=1,Te=.82521,ke=4/29,Ne=6/29,Ae=3*Ne*Ne,Ce=Ne*Ne*Ne;nl(ze,function(o,t,n,e){return 1===arguments.length?we(o):new ze(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return new ze(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new ze(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var o=(this.l+16)/116,t=isNaN(this.a)?o:o+this.a/500,n=isNaN(this.b)?o:o-this.b/200;return new ye(Ue(3.1338561*(t=Me*Ee(t))-1.6168667*(o=be*Ee(o))-.4906146*(n=Te*Ee(n))),Ue(-.9787684*t+1.9161415*o+.033454*n),Ue(.0719453*t-.2289914*o+1.4052427*n),this.opacity)}})),nl(Fe,function(o,t,n,e){return 1===arguments.length?function(e){if(e instanceof Fe)return new Fe(e.h,e.c,e.l,e.opacity);if(e instanceof ze||(e=we(e)),0===e.a&&0===e.b)return new Fe(NaN,0,e.l,e.opacity);var t=yr(e.b,e.a)*xe;return new Fe(0>t?t+360:t,wr(e.a*e.a+e.b*e.b),e.l,e.opacity)}(o):new Fe(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return new Fe(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Fe(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return we(this).rgb()}}));var Se=1.78277,Le=-.29227,He=-.90649,Xe=1.97294,qe=Xe*He,Ie=Xe*Se,Ve=Se*Le- -.14861*He;nl(Pe,function(o,t,n,e){return 1===arguments.length?function(l){if(l instanceof Pe)return new Pe(l.h,l.s,l.l,l.opacity);l instanceof ye||(l=_e(l));var t=l.r/255,n=l.g/255,e=l.b/255,r=(Ve*e+qe*t-Ie*n)/(Ve+qe-Ie),i=e-r,o=(Xe*(n-r)-Le*i)/He,d=wr(o*o+i*i)/(Xe*r*(1-r)),a=d?yr(o,i)*xe-120:NaN;return new Pe(0>a?a+360:a,d,r,l.opacity)}(o):new Pe(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new Pe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new Pe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var o=isNaN(this.h)?0:(this.h+120)*he,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),e=br(o),a=vr(o);return new ye(255*(t+n*(-.14861*e+Se*a)),255*(t+n*(Le*e+He*a)),255*(t+n*(Xe*e)),this.opacity)}}));var Oe,$n,Kn,er,nr=function o(t){function n(l,n){var s=a((l=ve(l)).r,(n=ve(n)).r),d=a(l.g,n.g),r=a(l.b,n.b),i=Re(l.opacity,n.opacity);return function(e){return l.r=s(e),l.g=d(e),l.b=r(e),l.opacity=i(e),l+""}}var a=Be(t);return n.gamma=o,n}(1),Ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qe=new RegExp(Ze.source,"g"),Ge=180/Tr,or={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ir=al(function(e){return"none"===e?or:(Oe||(Oe=document.createElement("DIV"),$n=document.documentElement,Kn=document.defaultView),Oe.style.transform=e,e=Kn.getComputedStyle($n.appendChild(Oe),null).getPropertyValue("transform"),$n.removeChild(Oe),ol(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),rr=al(function(e){return null==e?or:(er||(er=document.createElementNS("http://www.w3.org/2000/svg","g")),er.setAttribute("transform",e),(e=er.transform.baseVal.consolidate())?ol((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):or)},", ",")",")"),lr=Math.SQRT2,cr=2,ur=4,pr=1e-12,_r=[0,1],dr=1e3,hr=60*dr,fr=60*hr,Fr=24*fr,Pr=30*Fr,Lr=365*Fr,Hr=Array.prototype.slice,Xr=1,Nr=2,Vr=3,Ir=4,Or=1e-6,jr={value:function(){}};ei.prototype=ti.prototype={constructor:ei,on:function(l,t){var s,d,e=this._,i=(d=e,(l+"").trim().split(/^|\s+/).map(function(o){var a="",i=o.indexOf(".");if(0<=i&&(a=o.slice(i+1),o=o.slice(0,i)),o&&!d.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})),o=-1,r=i.length;if(!(2>arguments.length)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<r;)if(s=(l=i[o]).type)e[s]=ii(e[s],l.name,t);else if(null==t)for(s in e)e[s]=ii(e[s],l.name,null);return this}for(;++o<r;)if((s=(l=i[o]).type)&&(s=Yl(e[s],l.name)))return s},copy:function(){var o={},t=this._;for(var n in t)o[n]=t[n].slice();return new ei(o)},call:function(a,t){if(0<(n=arguments.length-2))for(var n,e,l=Array(n),i=0;i<n;++i)l[i]=arguments[i+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=0,n=(e=this._[a]).length;i<n;++i)e[i].value.apply(t,l)},apply:function(a,t,n){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var e=this._[a],l=0,i=e.length;l<i;++l)e[l].value.apply(t,n)}};var ni="http://www.w3.org/1999/xhtml",qr={svg:"http://www.w3.org/2000/svg",xhtml:ni,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ai=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var _i=document.documentElement;if(!_i.matches){var vi=_i.webkitMatchesSelector||_i.msMatchesSelector||_i.mozMatchesSelector||_i.oMatchesSelector;ai=function(e){return function(){return vi.call(this,e)}}}}var yi=ai;mi.prototype={constructor:mi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var gi="$";Ai.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var wi={};(ee.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(wi={mouseenter:"mouseover",mouseleave:"mouseout"}));var Xi=[null];Bi.prototype=El.prototype={constructor:Bi,select:function(d){"function"!=typeof d&&(d=li(d));for(var _=this._groups,n=_.length,e=Array(n),r=0;r<n;++r)for(var i,o,u=_[r],a=u.length,s=e[r]=Array(a),c=0;c<a;++c)(i=u[c])&&(o=d.call(i,i.__data__,c,u))&&("__data__"in i&&(o.__data__=i.__data__),s[c]=o);return new Bi(e,this._parents)},selectAll:function(l){"function"!=typeof l&&(l=fi(l));for(var d=this._groups,n=d.length,e=[],r=[],i=0;i<n;++i)for(var o,u=d[i],a=u.length,s=0;s<a;++s)(o=u[s])&&(e.push(l.call(o,o.__data__,s,u)),r.push(o));return new Bi(e,r)},filter:function(l){"function"!=typeof l&&(l=yi(l));for(var d=this._groups,n=d.length,e=Array(n),r=0;r<n;++r)for(var i,o=d[r],u=o.length,a=e[r]=[],s=0;s<u;++s)(i=o[s])&&l.call(i,i.__data__,s,o)&&a.push(i);return new Bi(e,this._parents)},data:function(b,T){if(!b)return p=Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n,e=T?xi:Dl,r=this._parents,i=this._groups;"function"!=typeof b&&(n=b,b=function(){return n});for(var o=i.length,u=Array(o),a=Array(o),s=Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=b.call(l,l&&l.__data__,c,r),_=p.length,v=a[c]=Array(_),y=u[c]=Array(_);e(l,h,v,y,s[c]=Array(f),p,T);for(var g,m,d=0,w=0;d<_;++d)if(g=v[d]){for(w<=d&&(w=d+1);!(m=y[w])&&++w<_;);g._next=m||null}}return(u=new Bi(u,r))._enter=a,u._exit=s,u},enter:function(){return new Bi(this._enter||this._groups.map(pi),this._parents)},exit:function(){return new Bi(this._exit||this._groups.map(pi),this._parents)},merge:function(d){for(var t=this._groups,n=d._groups,e=t.length,r=n.length,i=xr(e,r),o=Array(e),u=0;u<i;++u)for(var a,s=t[u],c=n[u],l=s.length,_=o[u]=Array(l),h=0;h<l;++h)(a=s[h]||c[h])&&(_[h]=a);for(;u<e;++u)o[u]=t[u];return new Bi(o,this._parents)},order:function(){for(var a=this._groups,t=-1,n=a.length;++t<n;)for(var e,l=a[t],i=l.length-1,o=l[i];0<=--i;)(e=l[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},sort:function(d){function e(e,o){return e&&o?d(e.__data__,o.__data__):!e-!o}d||(d=Mi);for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i){for(var o,u=t[i],a=u.length,s=r[i]=Array(a),c=0;c<a;++c)(o=u[c])&&(s[c]=o);s.sort(e)}return new Bi(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var a=this._groups,t=0,n=a.length;t<n;++t)for(var e,l=a[t],r=0,i=l.length;r<i;++r)if(e=l[r],e)return e;return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(l){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,s=i.length;o<s;++o)(r=i[o])&&l.call(r,r.__data__,o,i);return this},attr:function(o,t){var a=oi(o);if(2>arguments.length){var e=this.node();return a.local?e.getAttributeNS(a.space,a.local):e.getAttribute(a)}return this.each((null==t?a.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?a.local?function(o,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(o.space,o.local):this.setAttributeNS(o.space,o.local,e)}}:function(o,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(o):this.setAttribute(o,e)}}:a.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(a,t))},style:function(o,t,a){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(o,n,e){return function(){var a=n.apply(this,arguments);null==a?this.style.removeProperty(o):this.style.setProperty(o,a,e)}}:function(o,t,n){return function(){this.style.setProperty(o,t,n)}})(o,t,null==a?"":a)):Ti(this.node(),o)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(o,n){return function(){var e=n.apply(this,arguments);null==e?delete this[o]:this[o]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(a,t){var l=ki(a+"");if(2>arguments.length){for(var e=Ni(this.node()),r=-1,i=l.length;++r<i;)if(!e.contains(l[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Ci:Si)(this,e)}}:t?function(e){return function(){Ci(this,e)}}:function(e){return function(){Si(this,e)}})(l,t))},text:function(e){return arguments.length?this.each(null==e?zi:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Di:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Ei)},lower:function(){return this.each(Ui)},append:function(e){var o="function"==typeof e?e:si(e);return this.select(function(){return this.appendChild(o.apply(this,arguments))})},insert:function(o,a){var i="function"==typeof o?o:si(o),e=null==a?Yi:"function"==typeof a?a:li(a);return this.select(function(){return this.insertBefore(i.apply(this,arguments),e.apply(this,arguments)||null)})},remove:function(){return this.each(Fi)},clone:function(e){return this.select(e?Li:Pi)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(d,t,n){var e,r,i=(d+"").trim().split(/^|\s+/).map(function(o){var a="",i=o.indexOf(".");return 0<=i&&(a=o.slice(i+1),o=o.slice(0,i)),{type:o,name:a}}),o=i.length;if(!(2>arguments.length)){for(u=t?Vi:Ii,null==n&&(n=!1),e=0;e<o;++e)this.each(u(i[e],t,n));return this}var u=this.node().__on;if(u)for(var a,s=0,c=u.length;s<c;++s)for(e=0,a=u[s];e<o;++e)if((r=i[e]).type===a.type&&r.name===a.name)return a.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ji(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ji(this,e,t)}})(e,t))}},io.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ri,lo,ho=0,fo=0,po=0,_o=1e3,vo=0,yo=0,go=0,mo="object"==typeof performance&&performance.now?performance:Date,wo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};bo.prototype=Fl.prototype={constructor:bo,restart:function(o,a,i){if("function"!=typeof o)throw new TypeError("callback is not a function");i=(null==i?co():+i)+(null==a?0:+a),this._next||lo===this||(lo?lo._next=this:Ri=this,lo=this),this._call=o,this._time=i,Ao()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ao())}};var xo=ti("start","end","interrupt"),Br=[],Zr=0,Wr=1,Uo=2,Yo=3,Fo=4,Po=5,Lo=6,Ho=El.prototype.constructor,Ro=0,$o=El.prototype;Bo.prototype=function(e){return El().transition(e)}.prototype={constructor:Bo,select:function(d){var _=this._name,n=this._id;"function"!=typeof d&&(d=li(d));for(var e=this._groups,r=e.length,i=Array(r),o=0;o<r;++o)for(var u,a,s=e[o],c=s.length,l=i[o]=Array(c),p=0;p<c;++p)(u=s[p])&&(a=d.call(u,u.__data__,p,s))&&("__data__"in u&&(a.__data__=u.__data__),l[p]=a,So(l[p],_,n,p,l,Io(u,n)));return new Bo(i,this._parents,_,n)},selectAll:function(d){var g=this._name,n=this._id;"function"!=typeof d&&(d=fi(d));for(var e=this._groups,r=e.length,i=[],o=[],u=0;u<r;++u)for(var a,s=e[u],c=s.length,l=0;l<c;++l)if(a=s[l]){for(var h,m=d.call(a,a.__data__,l,s),p=Io(a,n),_=0,f=m.length;_<f;++_)(h=m[_])&&So(h,g,n,_,m,p);i.push(m),o.push(a)}return new Bo(i,o,g,n)},filter:function(l){"function"!=typeof l&&(l=yi(l));for(var d=this._groups,n=d.length,e=Array(n),r=0;r<n;++r)for(var i,o=d[r],u=o.length,a=e[r]=[],s=0;s<u;++s)(i=o[s])&&l.call(i,i.__data__,s,o)&&a.push(i);return new Bo(e,this._parents,this._name,this._id)},merge:function(d){if(d._id!==this._id)throw new Error;for(var t=this._groups,n=d._groups,e=t.length,r=n.length,i=xr(e,r),o=Array(e),u=0;u<i;++u)for(var a,s=t[u],c=n[u],l=s.length,_=o[u]=Array(l),h=0;h<l;++h)(a=s[h]||c[h])&&(_[h]=a);for(;u<e;++u)o[u]=t[u];return new Bo(o,this._parents,this._name,this._id)},selection:function(){return new Ho(this._groups,this._parents)},transition:function(){for(var d=this._name,t=this._id,n=Pl(),e=this._groups,r=e.length,i=0;i<r;++i)for(var o,u=e[i],a=u.length,s=0;s<a;++s)if(o=u[s]){var c=Io(o,t);So(o,d,n,s,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bo(e,this._parents,d,n)},call:$o.call,nodes:$o.nodes,node:$o.node,size:$o.size,empty:$o.empty,each:$o.each,on:function(l,t){var d,e,r,i,o,c,n=this._id;return 2>arguments.length?Io(this.node(),n).on.on(l):this.each((d=n,r=t,c=((e=l)+"").trim().split(/^|\s+/).every(function(e){var o=e.indexOf(".");return 0<=o&&(e=e.slice(0,o)),!e||"start"===e})?Xo:qo,function(){var a=c(this,d),t=a.on;t!==i&&(o=(i=t).copy()).on(e,r),a.on=o}))},attr:function(o,t){var a=oi(o),e="transform"===a?rr:jo;return this.attrTween(o,"function"==typeof t?(a.local?function(l,e,r){var i,o,s;return function(){var a,t=r(this);return null==t?void this.removeAttributeNS(l.space,l.local):(a=this.getAttributeNS(l.space,l.local))===t?null:a===i&&t===o?s:s=e(i=a,o=t)}}:function(l,e,r){var i,o,s;return function(){var a,t=r(this);return null==t?void this.removeAttribute(l):(a=this.getAttribute(l))===t?null:a===i&&t===o?s:s=e(i=a,o=t)}})(a,e,Oo(this,"attr."+o,t)):null==t?(a.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(a):(a.local?function(a,n,e){var l,i;return function(){var o=this.getAttributeNS(a.space,a.local);return o===e?null:o===l?i:i=n(l=o,e)}}:function(a,n,e){var l,i;return function(){var o=this.getAttribute(a);return o===e?null:o===l?i:i=n(l=o,e)}})(a,e,t+""))},attrTween:function(o,t){var a="attr."+o;if(2>arguments.length)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;var e=oi(o);return this.tween(a,(e.local?function(o,a){function e(){var i=this,l=a.apply(i,arguments);return l&&function(e){i.setAttributeNS(o.space,o.local,l(e))}}return e._value=a,e}:function(o,a){function e(){var i=this,l=a.apply(i,arguments);return l&&function(e){i.setAttribute(o,l(e))}}return e._value=a,e})(e,t))},style:function(x,t,b){var e,r,i,o,u,a,s,c,l,h,f,p,_,v,y,g,m,d="transform"==(x+="")?ir:jo;return null==t?this.styleTween(x,(_=x,v=d,function(){var e=Ti(this,_),t=(this.style.removeProperty(_),Ti(this,_));return e===t?null:e===y&&t===g?m:m=v(y=e,g=t)})).on("end.style."+x,(p=x,function(){this.style.removeProperty(p)})):this.styleTween(x,"function"==typeof t?(s=d,c=Oo(this,"style."+(a=x),t),function(){var e=Ti(this,a),t=c(this);return null==t&&(this.style.removeProperty(a),t=Ti(this,a)),e===t?null:e===l&&t===h?f:f=s(l=e,h=t)}):(e=x,r=d,i=t+"",function(){var n=Ti(this,e);return n===i?null:n===o?u:u=r(o=n,i)}),b)},styleTween:function(o,t,a){var e="style."+(o+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(o,a,l){function e(){var i=this,r=a.apply(i,arguments);return r&&function(e){i.style.setProperty(o,r(e),l)}}return e._value=a,e}(o,t,null==a?"":a))},text:function(o){return this.tween("text","function"==typeof o?(n=Oo(this,"text",o),function(){var e=n(this);this.textContent=null==e?"":e}):(a=null==o?"":o+"",function(){this.textContent=a}));var a,n},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var o in this.__transition)if(+o!==t)return;e&&e.removeChild(this)}));var t},tween:function(a,t){var n=this._id;if(a+="",2>arguments.length){for(var e,l=Io(this.node(),n).tween,i=0,o=l.length;i<o;++i)if((e=l[i]).name===a)return e.value;return null}return this.each((null==t?function(l,t){var o,i;return function(){var a=qo(this,l),s=a.tween;if(s!==o)for(var n=0,e=(i=o=s).length;n<e;++n)if(i[n].name===t){(i=i.slice()).splice(n,1);break}a.tween=i}}:function(l,t,n){var o,s;if("function"!=typeof n)throw new Error;return function(){var d=qo(this,l),c=d.tween;if(c!==o){s=(o=c).slice();for(var _={name:t,value:n},e=0,r=s.length;e<r;++e)if(s[e].name===t){s[e]=_;break}e===r&&s.push(_)}d.tween=s}})(n,a,t))},delay:function(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){Xo(this,e).delay=t}})(o,e)):Io(this.node(),o).delay},duration:function(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){qo(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){qo(this,e).duration=t}})(o,e)):Io(this.node(),o).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){qo(this,e).ease=t}}(t,e)):Io(this.node(),t).ease}},Tr,Tr;var Qo={time:null,delay:0,duration:250,ease:function(e){return(1>=(e*=2)?e*e*e:(e-=2)*e*e+2)/2}};El.prototype.interrupt=function(e){return this.each(function(){Vo(this,e)})},El.prototype.transition=function(l){var t,n;l instanceof Bo?(t=l._id,l=l._name):(t=Pl(),(n=Qo).time=co(),l=null==l?null:l+"");for(var e=this._groups,r=e.length,i=0;i<r;++i)for(var o,d=e[i],a=d.length,s=0;s<a;++s)(o=d[s])&&So(o,l,t,s,d,n||Wo(o,t));return new Bo(e,this._parents,l,t)},Ll.prototype={constructor:Ll,scale:function(e){return 1===e?this:new Ll(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ll(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Go=new Ll(1,0,0);Hl.prototype=Ll.prototype;var Rr={name:"drag"},Qr={name:"space"},Gr={name:"handle"},Jr={name:"center"},$r={name:"x",handles:["e","w"].map(Gl),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Kr={name:"y",handles:["n","s"].map(Gl),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},es={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Gl),input:function(e){return e},output:function(e){return e}},ts={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ns={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},os={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},as={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},is={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};return ee.bisector=q,ee.extent=function(a,t){var n,e,l,i=a.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=a[o])&&n<=n)for(e=l=n;++o<i;)null!=(n=a[o])&&(n<e&&(e=n),l<n&&(l=n));}else for(;++o<i;)if(null!=(n=t(a[o],o,a))&&n<=n)for(e=l=n;++o<i;)null!=(n=t(a[o],o,a))&&(n<e&&(e=n),l<n&&(l=n));return[e,l]},ee.max=function(a,t){var n,e,l=a.length,i=-1;if(null==t){for(;++i<l;)if(null!=(n=a[i])&&n<=n)for(e=n;++i<l;)null!=(n=a[i])&&e<n&&(e=n);}else for(;++i<l;)if(null!=(n=t(a[i],i,a))&&n<=n)for(e=n;++i<l;)null!=(n=t(a[i],i,a))&&e<n&&(e=n);return e},ee.min=function(a,t){var n,e,l=a.length,i=-1;if(null==t){for(;++i<l;)if(null!=(n=a[i])&&n<=n)for(e=n;++i<l;)null!=(n=a[i])&&n<e&&(e=n);}else for(;++i<l;)if(null!=(n=t(a[i],i,a))&&n<=n)for(e=n;++i<l;)null!=(n=t(a[i],i,a))&&n<e&&(e=n);return e},ee.line=n,ee.area=function(){function e(g){var t,m,e,r,i,o=g.length,u=!1,v=Array(o),s=Array(o);for(null==_&&(y=x(i=k())),t=0;t<=o;++t){if(!(t<o&&p(r=g[t],t,g))===u)if(u=!u)m=t,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),e=t-1;m<=e;--e)y.point(v[e],s[e]);y.lineEnd(),y.areaEnd()}u&&(v[t]=+d(r,t,g),s[t]=+h(r,t,g),y.point(l?+l(r,t,g):v[t],f?+f(r,t,g):s[t]))}if(i)return y=null,i+""||null}function a(){return n().defined(p).curve(x).context(_)}var d=i,l=null,h=r(0),f=o,p=r(!0),_=null,x=m,y=null;return e.x=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),l=null,e):d},e.x0=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),e):d},e.x1=function(n){return arguments.length?(l=null==n?null:"function"==typeof n?n:r(+n),e):l},e.y=function(n){return arguments.length?(h="function"==typeof n?n:r(+n),f=null,e):h},e.y0=function(n){return arguments.length?(h="function"==typeof n?n:r(+n),e):h},e.y1=function(n){return arguments.length?(f=null==n?null:"function"==typeof n?n:r(+n),e):f},e.lineX0=e.lineY0=function(){return a().x(d).y(h)},e.lineY1=function(){return a().x(d).y(f)},e.lineX1=function(){return a().x(l).y(h)},e.defined=function(n){return arguments.length?(p="function"==typeof n?n:r(!!n),e):p},e.curve=function(n){return arguments.length?(x=n,null!=_&&(y=x(_)),e):x},e.context=function(n){return arguments.length?(null==n?_=y=null:y=x(_=n),e):_},e},ee.curveBasis=function(e){return new _(e)},ee.curveMonotoneX=function(e){return new D(e)},ee.curveNatural=function(e){return new Y(e)},ee.curveCardinal=c,ee.curveCatmullRom=h,ee.curveStep=function(e){return new F(e,.5)},ee.curveStepAfter=function(e){return new F(e,1)},ee.curveStepBefore=function(e){return new F(e,0)},ee.curveLinear=m,ee.timeMillisecond=H,ee.timeSecond=O,ee.timeMinute=j,ee.timeHour=B,ee.timeDay=Z,ee.timeWeek=W,ee.timeMonth=J,ee.timeYear=$,ee.formatDefaultLocale=vt,ee.formatLocale=yt,ee.timeFormatLocale=Tt,ee.timeFormatDefaultLocale=el,ee.scaleLinear=function e(){var t=pl(dl,$e);return t.copy=function(){return _l(t,e())},gl(t)},ee.scaleLog=function o(){function a(){return p=bl(g),_=vl(g),0>d()[0]&&(p=wl(p),_=wl(_)),i}var i=pl(ml,fl).domain([1,10]),d=i.domain,g=10,p=bl(10),_=vl(10);return i.base=function(e){return arguments.length?(g=+e,a()):g},i.domain=function(e){return arguments.length?(d(e),a()):d()},i.ticks=function(y){var m,n=d(),e=n[0],r=n[n.length-1];(m=r<e)&&(a=e,e=r,r=a);var i,o,u,a=p(e),s=p(r),c=null==y?10:+y,l=[];if(!(!(g%1)&&s-a<c))l=T(a,s,xr(s-a,c)).map(_);else if(a=mr(a)-1,s=mr(s)+1,0<e){for(;a<s;++a)for(o=1,i=_(a);o<g;++o)if(!((u=i*o)<e)){if(r<u)break;l.push(u)}}else for(;a<s;++a)for(o=g-1,i=_(a);1<=o;--o)if(!((u=i*o)<e)){if(r<u)break;l.push(u)}return m?l.reverse():l},i.tickFormat=function(n,o){if(null==o&&(o=10===g?".0e":","),"function"!=typeof o&&(o=ee.format(o)),n===1/0)return o;null==n&&(n=10);var a=Mr(1,g*n/i.ticks().length);return function(e){var t=e/_(mr(p(e)));return t*g<g-.5&&(t*=g),t<=a?o(e):""}},i.nice=function(){return d(yl(d(),{floor:function(e){return _(Ur(p(e)))},ceil:function(e){return _(Ar(p(e)))}}))},i.copy=function(){return _l(i,o().base(g))},i},ee.scalePow=function o(){var a=1,t=pl(function(o,n){return(n=Tl(n,a)-(o=Tl(o,a)))?function(e){return(Tl(e,a)-o)/n}:rl(n)},function(o,n){return n=Tl(n,a)-(o=Tl(o,a)),function(e){return Tl(o+n*e,1/a)}}),n=t.domain;return t.exponent=function(e){return arguments.length?(a=+e,n(n())):a},t.copy=function(){return _l(t,o().exponent(a))},gl(t)},ee.scaleTime=function(){return function T(k,u,n,e,r,i,o,a,s){function c(a){return(o(a)<a?f:i(a)<a?p:r(a)<a?_:e(a)<a?v:u(a)<a?n(a)<a?y:g:k(a)<a?m:d)(a)}function C(l,s,n,e){if(null==l&&(l=10),"number"==typeof l){var r=kr(n-s)/l,i=q(function(e){return e[2]}).right(w,r);i===w.length?(e=te(s/Lr,n/Lr,l),l=k):i?(e=(i=w[r/w[i-1][2]<w[i][2]/r?i-1:i])[1],l=i[0]):(e=Mr(te(s,n,l),1),l=a)}return null==e?l:l.every(e)}var b=pl(dl,$e),l=b.invert,h=b.domain,f=s(".%L"),p=s(":%S"),_=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),g=s("%b %d"),m=s("%B"),d=s("%Y"),w=[[o,1,dr],[o,5,5*dr],[o,15,15*dr],[o,30,30*dr],[i,1,hr],[i,5,5*hr],[i,15,15*hr],[i,30,30*hr],[r,1,fr],[r,3,3*fr],[r,6,6*fr],[r,12,12*fr],[e,1,Fr],[e,2,2*Fr],[n,1,7*Fr],[u,1,Pr],[u,3,3*Pr],[k,1,Lr]];return b.invert=function(e){return new Date(l(e))},b.domain=function(e){return arguments.length?h(In.call(e,Cl)):h().map(kl)},b.ticks=function(a,t){var n,e=h(),l=e[0],i=e[e.length-1],o=i<l;return o&&(n=l,l=i,i=n),n=(n=C(a,l,i,t))?n.range(l,i+1):[],o?n.reverse():n},b.tickFormat=function(e,t){return null==t?c:s(t)},b.nice=function(o,t){var n=h();return(o=C(o,n[0],n[n.length-1],t))?h(yl(n,o)):b},b.copy=function(){return _l(b,T(k,u,n,e,r,i,o,a,s))},b}($,J,W,Z,B,j,O,H,ee.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ee.axisRight=function(e){return Al(Nr,e)},ee.axisTop=function(e){return Al(Xr,e)},ee.axisBottom=function(e){return Al(Vr,e)},ee.axisLeft=function(e){return Al(Ir,e)},ee.zoom=function(){function z(e){e.property("__zoom",Ol).on("wheel.zoom",T).on("mousedown.zoom",r).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Mr(l[0],xr(l[1],t)))===e.k?e:new Ll(t,e.x,e.y)}function d(o,t,n){var e=t[0]-n[0]*o.k,a=t[1]-n[1]*o.k;return e===o.x&&a===o.y?o:new Ll(o.k,e,a)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,l,d){e.on("start.zoom",function(){M(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).end()}).tween("zoom",function(){var c=arguments,_=M(this,c),t=D.apply(this,c),r=d||w(t),i=Mr(t[1][0]-t[0][0],t[1][1]-t[0][1]),n=this.__zoom,o="function"==typeof l?l.apply(this,c):l,u=v(n.invert(r).concat(i/n.k),o.invert(r).concat(i/o.k));return function(a){if(1===a)a=o;else{var t=u(a),n=i/t[2];a=new Ll(n,r[0]-t[0]*n,r[1]-t[1]*n)}_.zoom(null,a)}})}function M(o,t){for(var a,e=0,l=n.length;e<l;++e)if((a=n[e]).that===o)return a;return new b(o,t)}function b(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=D.apply(e,t)}function T(){if(Y.apply(this,arguments)){var o=M(this,arguments),t=this.__zoom,n=Mr(l[0],xr(l[1],t.k*Cr(2,a.apply(this,arguments)))),e=Gi(this);if(o.wheel)o.mouse[0][0]===e[0]&&o.mouse[0][1]===e[1]||(o.mouse[1]=t.invert(o.mouse[0]=e)),clearTimeout(o.wheel);else{if(t.k===n)return;o.mouse=[e,t.invert(e)],Vo(this),o.start()}Nl(),o.wheel=setTimeout(function(){o.wheel=null,o.end()},h),o.zoom("mouse",E(d(m(t,n),o.mouse[0],o.mouse[1]),o.extent,_))}}function r(){if(!p&&Y.apply(this,arguments)){var a=M(this,arguments),e=Zi(ee.event.view).on("mousemove.zoom",function(){if(Nl(),!a.moved){var e=ee.event.clientX-l,t=ee.event.clientY-r;a.moved=y<e*e+t*t}a.zoom("mouse",E(d(a.that.__zoom,a.mouse[0]=Gi(a.that),a.mouse[1]),a.extent,_))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),eo(ee.event.view,a.moved),Nl(),a.end()},!0),t=Gi(this),l=ee.event.clientX,r=ee.event.clientY;no(ee.event.view),Xl(),a.mouse=[t,this.__zoom.invert(t)],Vo(this),a.start()}}function k(){if(Y.apply(this,arguments)){var o=this.__zoom,t=Gi(this),n=o.invert(t),e=o.k*(ee.event.shiftKey?.5:2),a=E(d(m(o,e),t,n),D.apply(this,arguments),_);Nl(),0<u?Zi(this).transition().duration(u).call(x,a,t):Zi(this).call(z.transform,a)}}function U(){if(Y.apply(this,arguments)){var a,t,n,e,l=M(this,arguments),i=ee.event.changedTouches,o=i.length;for(Xl(),t=0;t<o;++t)e=[e=Ji(this,i,(n=i[t]).identifier),this.__zoom.invert(e),n.identifier],l.touch0?l.touch1||(l.touch1=e):(l.touch0=e,a=!0);if(S&&(S=clearTimeout(S),!l.touch1))return l.end(),void((e=Zi(this).on("dblclick.zoom"))&&e.apply(this,arguments));a&&(S=setTimeout(function(){S=null},c),Vo(this),l.start())}}function A(){var p,t,n,e,r=M(this,arguments),i=ee.event.changedTouches,o=i.length;for(Nl(),S&&(S=clearTimeout(S)),p=0;p<o;++p)n=Ji(this,i,(t=i[p]).identifier),r.touch0&&r.touch0[2]===t.identifier?r.touch0[0]=n:r.touch1&&r.touch1[2]===t.identifier&&(r.touch1[0]=n);if(t=r.that.__zoom,r.touch1){var u=r.touch0[0],a=r.touch0[1],s=r.touch1[0],c=r.touch1[1],l=(l=s[0]-u[0])*l+(l=s[1]-u[1])*l,h=(h=c[0]-a[0])*h+(h=c[1]-a[1])*h;t=m(t,wr(l/h)),n=[(u[0]+s[0])/2,(u[1]+s[1])/2],e=[(a[0]+c[0])/2,(a[1]+c[1])/2]}else{if(!r.touch0)return;n=r.touch0[0],e=r.touch0[1]}r.zoom("touch",E(d(t,n,e),r.extent,_))}function C(){var o,t,n=M(this,arguments),e=ee.event.changedTouches,a=e.length;for(Xl(),p&&clearTimeout(p),p=setTimeout(function(){p=null},c),o=0;o<a;++o)t=e[o],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var S,p,Y=Vl,D=Il,E=Bl,a=jl,i=ql,l=[0,Infinity],_=[[-Infinity,-Infinity],[Infinity,Infinity]],u=250,v=ll,n=[],s=ti("start","zoom","end"),c=500,h=150,y=0;return z.transform=function(o,t){var a=o.selection?o.selection():o;a.property("__zoom",Ol),o===a?a.interrupt().each(function(){M(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}):x(o,t)},z.scaleBy=function(e,t){z.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)})},z.scaleTo=function(e,a){z.transform(e,function(){var l=D.apply(this,arguments),t=this.__zoom,n=w(l),e=t.invert(n),r="function"==typeof a?a.apply(this,arguments):a;return E(d(m(t,r),n,e),l,_)})},z.translateBy=function(o,t,a){z.transform(o,function(){return E(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof a?a.apply(this,arguments):a),D.apply(this,arguments),_)})},z.translateTo=function(e,o,a){z.transform(e,function(){var l=D.apply(this,arguments),t=this.__zoom,n=w(l);return E(Go.translate(n[0],n[1]).scale(t.k).translate("function"==typeof o?-o.apply(this,arguments):-o,"function"==typeof a?-a.apply(this,arguments):-a),l,_)})},b.prototype={start:function(){return 1==++this.active&&(this.index=n.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(n.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){Oi(new Ko(z,e,this.that.__zoom),s.apply,s,[e,this.that,this.args])}},z.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Jo(+e),z):a},z.filter=function(e){return arguments.length?(Y="function"==typeof e?e:Jo(!!e),z):Y},z.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Jo(!!e),z):i},z.extent=function(e){return arguments.length?(D="function"==typeof e?e:Jo([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),z):D},z.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],z):[l[0],l[1]]},z.translateExtent=function(e){return arguments.length?(_[0][0]=+e[0][0],_[1][0]=+e[1][0],_[0][1]=+e[0][1],_[1][1]=+e[1][1],z):[[_[0][0],_[0][1]],[_[1][0],_[1][1]]]},z.constrain=function(e){return arguments.length?(E=e,z):E},z.duration=function(e){return arguments.length?(u=+e,z):u},z.interpolate=function(e){return arguments.length?(v=e,z):v},z.on=function(){var e=s.on.apply(s,arguments);return e===s?z:e},z.clickDistance=function(e){return arguments.length?(y=(e=+e)*e,z):wr(y)},z},ee.zoomIdentity=Go,ee.zoomTransform=Hl,ee.drag=function(){function x(e){e.on("mousedown.drag",g).filter(n).on("touchstart.drag",f).on("touchmove.drag",p).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(){if(!w&&T.apply(this,arguments)){var n=d("mouse",u.apply(this,arguments),Gi,this,arguments);n&&(Zi(ee.event.view).on("mousemove.drag",l,!0).on("mouseup.drag",h,!0),no(ee.event.view),Ki(),r=!1,b=ee.event.clientX,e=ee.event.clientY,n("start"))}}function l(){if(to(),!r){var o=ee.event.clientX-b,t=ee.event.clientY-e;r=s<o*o+t*t}a.mouse("drag")}function h(){Zi(ee.event.view).on("mousemove.drag mouseup.drag",null),eo(ee.event.view,r),to(),a.mouse("end")}function f(){if(T.apply(this,arguments)){var o,t,n=ee.event.changedTouches,e=u.apply(this,arguments),a=n.length;for(o=0;o<a;++o)(t=d(n[o].identifier,e,Ji,this,arguments))&&(Ki(),t("start"))}}function p(){var o,t,n=ee.event.changedTouches,e=n.length;for(o=0;o<e;++o)(t=a[n[o].identifier])&&(to(),t("drag"))}function m(){var o,t,n=ee.event.changedTouches,e=n.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),o=0;o<e;++o)(t=a[n[o].identifier])&&(Ki(),t("end"))}function d(d,i,o,u,g){var s,c,l,h=o(i,d),y=_.copy();if(Oi(new io(x,"beforestart",s,d,v,h[0],h[1],0,0,y),function(){return null!=(ee.event.subject=s=k.apply(u,g))&&(c=s.x-h[0]||0,l=s.y-h[1]||0,!0)}))return function _(t){var n,e=h;switch(t){case"start":a[d]=_,n=v++;break;case"end":delete a[d],--v;case"drag":h=o(i,d),n=v;}Oi(new io(x,t,s,d,n,h[0]+c,h[1]+l,h[0]-e[0],h[1]-e[1],y),y.apply,y,[t,u,g])}}var b,e,r,w,T=oo,u=uo,k=ao,n=so,a={},_=ti("start","drag","end"),v=0,s=0;return x.filter=function(e){return arguments.length?(T="function"==typeof e?e:ro(!!e),x):T},x.container=function(e){return arguments.length?(u="function"==typeof e?e:ro(e),x):u},x.subject=function(e){return arguments.length?(k="function"==typeof e?e:ro(e),x):k},x.touchable=function(e){return arguments.length?(n="function"==typeof e?e:ro(!!e),x):n},x.on=function(){var e=_.on.apply(_,arguments);return e===_?x:e},x.clickDistance=function(e){return arguments.length?(s=(e=+e)*e,x):wr(s)},x},ee.brush=function(){return ar(es)},ee.brushX=function(){return ar($r)},ee.brushY=function(){return ar(Kr)},ee.mouse=Gi,ee.select=Zi,ee.selection=El,ee.selectAll=function(e){return"string"==typeof e?new Bi([document.querySelectorAll(e)],[document.documentElement]):new Bi([null==e?[]:e],Xi)},ee.selectorAll=fi,ee.touch=Ji,ee}({});</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.FullscreenMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{fullscreen:{type:Boolean,value:!1,reflectToAttribute:!0},fullscreenIcon:{type:String,computed:'computeFullscreenIcon(fullscreen)'}}}_isFullscreen(){return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||!1}_getParent(){const a=Polymer.dom(this).getOwnerRoot();return a?a.nodeType==Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.requestFullscreen?(this.exitFullscreen=document.exitFullscreen.bind(document),this.addEventListener('fullscreenchange',this.fullScreenChanged.bind(this))):this.webkitRequestFullScreen?(this.requestFullscreen=this.webkitRequestFullScreen.bind(this),this.exitFullscreen=document.webkitCancelFullScreen.bind(document),this.addEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this))):this.mozRequestFullScreen?(this.requestFullscreen=this.mozRequestFullScreen.bind(this),this.exitFullscreen=document.mozCancelFullScreen.bind(document),document.addEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this))):this.msRequestFullscreen&&(this.requestFullscreen=this.msRequestFullscreen.bind(this),this.exitFullscreen=document.msExitFullscreen.bind(document),document.addEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this)))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener('fullscreenchange',this.fullScreenChanged.bind(this),!1),this.removeEventListener('webkitfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('mozfullscreenchange',this.fullScreenChanged.bind(this),!1),document.removeEventListener('MSFullscreenChange',this.fullScreenChanged.bind(this),!1)}toggleFullscreen(a){a.stopPropagation(),this._isFullscreen()?this.exitFullscreen():this.requestFullscreen(),this._resetZoom&&this._resetZoom(a)}fullScreenChanged(){this._fullScreenChanged()}_fullScreenChanged(){requestAnimationFrame(()=>{const a=this._isFullscreen();console.log('isFullscreen',a);const b=this._getParent();a?(this.fullscreen=!0,this.style.position='fixed',this.style.top='0',this.style.left='0',this.style.right='0',this.style.bottom='0',this.style.zIndex='1000',this.style['border-radius']='0px',document.body.style.overflow='hidden',b&&b.classList.add('fullscreen')):(this.fullscreen=!1,this.style.position='',this.style.top='',this.style.left='',this.style.right='',this.style.bottom='',this.style.zIndex='',this.style['border-radius']='',document.body.style.overflow='',b&&b.classList.remove('fullscreen')),this.notifyResize&&this.notifyResize()})}computeFullscreenIcon(a){return a?'fullscreen-exit':'fullscreen'}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ScaleMixin=function(a){var b=Number.Epsilon;return class extends a{constructor(){super(),this._bisectDate=d3.bisector((a,b)=>a.x-b),this._bisectValue=d3.bisector((a,b)=>a.y-b)}static get properties(){return{scalingX:{type:String,value:'time'},scalingY:{type:String,value:'linear'},ticksX:{type:Number,value:10},ticksY:{type:Number,value:10},scaleBaseX:{type:Number},scaleBaseY:{type:Number},scaleX:{type:Function,computed:'_computeScaleFn(scalingX, scaleBaseX, "x")'},scaleY:{type:Function,computed:'_computeScaleFn(scalingY, scaleBaseY, "y")'},domainX:{type:Array},domainY:{type:Array},rangeX:{type:Array},rangeY:{type:Array}}}static get observers(){return['_domainXChanged(domainX)','_domainYChanged(domainY)','_rangeXChanged(rangeX)','_rangeYChanged(rangeY)','_scaleXChanged(scaleX)','_scaleYChanged(scaleY)']}_domainXChanged(a){void 0===a||void 0===this.scaleX||a.some((a)=>void 0===a||null===a)||(this._IS_LOG_SCALE(this.scalingX)&&0>=a[0]?this.scaleX.domain([b,a[1]]):this.scaleX.domain(a))}_domainYChanged(a){void 0===a||void 0===this.scaleY||a.some((a)=>void 0===a||null===a)||(this._IS_LOG_SCALE(this.scalingY)&&0>=a[0]?this.scaleY.domain([b,a[1]]):this.scaleY.domain(a),this.scaleY.nice())}_rangeXChanged(a){void 0===a||void 0===this.scaleX||a.some((a)=>void 0===a||null===a)||this.scaleX.range(a)}_rangeYChanged(a){void 0===a||void 0===this.scaleY||a.some((a)=>void 0===a||null===a)||this.scaleY.range(a).nice()}_scaleXChanged(a){}_scaleYChanged(a){}_computeScaleFn(a,b,c){if(void 0!==a){const d='time'===a?d3.scaleTime():'ln'===a?d3.scaleLog().base(Math.E):'log'===a?d3.scaleLog().base(b||10):'log\u2082'===a?d3.scaleLog().base(2):'log\u2081\u2080'===a?d3.scaleLog().base(10):'\u221A'===a?d3.scalePow().exponent(0.5):'pow'===a?d3.scalePow().exponent(b||1):d3.scaleLinear();return'x'===c?(d.ticks(this.ticksX||10),this.domainX&&d.domain(this.domainX),this.rangeX&&d.range(this.rangeX)):'y'===c&&(d.ticks(this.ticksY||10),this.domainY&&d.domain(this.domainY),this.rangeY&&d.range(this.rangeY),d.nice()),d}}static get _VALID_SCALES(){return['time','ln','log','log\u2082','log\u2081\u2080','\u221A','pow']}_SCALE_USES_BASE(a){return'log'===a||'pow'===a}_IS_LOG_SCALE(a){return-1<['ln','log','log\u2082','log\u2081\u2080'].indexOf(a)}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.AxesMixin=function(a){var b=Math.ceil;return class extends WebvisualMixins.ScaleMixin(a){constructor(){super()}static get properties(){return{axisOrientX:{type:String,value:'bottom'},axisOrientY:{type:String,value:'left'},axisTitle:{type:String},axisColor:{type:String,observer:'_axisColorChanged'},tickSize:{type:Number,value:10},collapsedAxisMargin:{type:Number,value:5},axisSizeX:{type:Number,value:25},axisSizeY:{type:Number,value:60},draggable:{type:Boolean,observer:'_draggableChanged'},brushToZoom:{type:Boolean,observer:'_brushToZoomChanged'},_axisInsertionPoint:{type:Object},axisX:{type:Object},axisY:{type:Object},axisGeneratorX:{type:Function},axisGeneratorY:{type:Function},axisBrushGeneratorX:{type:Function,value:function(){return d3.brushX().on('end',this._onAxisBrushEnd.bind(this,'x'))}},axisBrushGeneratorY:{type:Function,value:function(){return d3.brushY().on('end',this._onAxisBrushEnd.bind(this,'y'))}},timeFormat:{type:Function,value:function(){return d3.timeFormat}},numberFormat:{type:Function,value:function(){return d3.format}},localeNumber:{type:Object},localeDate:{type:Object}}}static get observers(){return['_setDateNumberFormat(localeNumber, localeDate)']}_rangeXChanged(a){super._rangeXChanged(a),a[1]&&(this.ticksX=b(a[1]/70))}_rangeYChanged(a){super._rangeYChanged(a),a[0]&&(this.item&&this.item.isIndicatorLamp?(this.ticksY=2,this.axisSizeY=2*(this.tickSize+this.collapsedAxisMargin)):this.ticksY=b(a[0]/50))}_scaleXChanged(a){void 0===a||(super._scaleXChanged(a),this.axisX&&!this.axisX.attr('hidden')&&this.scaleX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.brushToZoom&&this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),this.redraw())}_scaleYChanged(a){void 0===a||(super._scaleYChanged(a),this.axisY&&!this.axisY.attr('hidden')&&this.scaleY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.brushToZoom&&this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this.redraw())}_computeAxisNode(a,b,c,d){if(void 0!==a){const e=this.axisColor||'';c=c||this.axisTitle||'';const f=this._isVertical(b);if(d&&d.node){const a=d.node();a&&a.parentElement&&a.parentElement.removeChild(a),d=null}const g=a.append('svg:g').classed('axis',!0).attr('orient',b).classed('y',f).classed('vertical',f).classed('x',!f).classed('expanded',!0).style('color',e);return g.on('mouseover',this._onAxisMouseover.bind(this)).on('mouseleave',this._onAxisMouseleave.bind(this)).on('click',this._onAxisClicked.bind(this,g)),this.draggable&&g.classed('draggable',!0).call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),g.append('svg:title').text(c),g.append('svg:g').classed('brush',!0).on('contextmenu',this._onAxisContextMenu.bind(this,b)),g.node()._genitor=this,g.node()._axis=g,g._left=0,g._right=0,g._bottom=0,g._top=0,g}}_updateAxisBrushGenerator(a,b,c){c=c||8;const d=[[0,0],[a[1],a[0]]];'left'===b?d[0][0]=-c:'right'===b?d[1][0]=c:'top'===b?d[0][1]=-c:'bottom'===b&&(d[1][1]=c),this.extent(d)}_computeAxisGenerator(a,b,c,d){if(a&&void 0!==b&&void 0!==c){const e=this.tickSize||6;return('left'===a?d3.axisLeft(b):'right'===a?d3.axisRight(b):'top'===a?d3.axisTop(b):d3.axisBottom(b)).tickSize(e).tickFormat(this._computeFormatFn(c,d))}}_setAxisProperties(a,b,c){a.classed('expanded',c),b.tickFormat(c?null:'')}_removeAxes(){let a;this.axisX&&this.axisX.node&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this.axisX=null),this.axisY&&this.axisY.node&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this.axisY=null),delete this.axisGeneratorY,delete this.axisGeneratorX,delete this.axisBrushGeneratorY,delete this.axisBrushGeneratorX}_toggleAxis(a){const b=a.classed('expanded');a.classed('expanded',!b),this.sizeChanged()}_onAxisClicked(a){this._activeToggleAxisJob&&clearTimeout(this._axisToggleAxisJob),this._activeToggleAxisJob=setTimeout(()=>{this._toggleAxis(a),this._activeToggleAxisJob=null},300)}_onAxisContextMenu(a){d3.event&&d3.event.preventDefault();'left'===a||'right'===a?(this.axisY._isBrushed=!1,this.domainY&&this.domainY.some((a)=>void 0===a||null===a)&&this.scaleY.domain(this.domainY).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY))):(this.axisX._isBrushed=!1,this.domainX&&this.domainX.some((a)=>void 0===a||null===a)&&this.scaleX.domain(this.domainX).nice(),this.axisX.call(this.axisGeneratorX.scale(this.scaleX))),this.redraw()}_onAxisMouseover(){this.axisX.select('.brush').raise(),this.axisY.select('.brush').raise(),this.axisX.raise(),this.axisY.raise()}_onAxisMouseleave(){}_draggableChanged(a){void 0===this.axisX||void 0===this.axisY||(!0===a?(this.axisX.call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),this.axisY.call(d3.drag().on('start',this._onAxisDragStart).on('drag',this._onAxisDragged).on('end',this._onAxisDragEnd)),this.brushToZoom=!1):(this.axisX.on('.drag',null),this.axisY.on('.drag',null)),this.axisX.classed('draggable',a),this.axisY.classed('draggable',a))}_brushToZoomChanged(a){void 0===this.axisX||void 0===this.axisY||(!0===a?(this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.axisX.select('.brush').call(this.axisBrushGeneratorX),this.axisY.select('.brush').call(this.axisBrushGeneratorX),this.draggable=!1):(this.axisX.select('.brush').on('.brush',null),this.axisY.select('.brush').on('.brush',null)))}_onAxisDragStart(){d3.select(this).raise().classed('dragged',!0);const a=d3.select(this).classed('vertical');a?(this._startleft=d3.event.x,this._starttop=0):(this._startleft=0,this._starttop=d3.event.y)}_onAxisDragged(){const a=d3.select(this).classed('vertical');let b=0,c=0;a?b=(this._axis._left||0)+d3.event.x-this._startleft:c=(this._axis._top||0)+d3.event.y-this._starttop,d3.select(this).attr('transform','translate('+b+','+c+')')}_onAxisDragEnd(){d3.select(this).classed('dragged',!1);const a=d3.select(this).classed('vertical'),b=this._genitor;let c,d=0,e=0;if(a){if(d=(this._axis._left||0)+d3.event.x-this._startleft,c=d>b.rangeX[1]/2?'right':'left',c!==b.axisOrientY)return b.axisGeneratorY=b._computeAxisGenerator(b.axisOrientY=c,b.scaleY,b.scalingY,b.scaleBaseY).ticks(b.ticksY).tickSize(b.tickSize).tickFormat(b.axisY.classed('expanded')?b._computeFormatFn(b.scalingY,b.scaleBaseY):''),b.axisY=b._computeAxisNode(b._axisInsertionPoint,c,b.item&&b.item.mount,b.axisY).classed('expanded',!0).call(b.axisGeneratorY),void b.sizeChanged();d=this._axis._left}else{if(e=(this._axis._top||0)+d3.event.y-this._starttop,c=e>b.rangeY[0]/2?'bottom':'top',c!==b.axisOrientX)return b.axisGeneratorX=b._computeAxisGenerator(b.axisOrientX=c,b.scaleX,b.scalingX,b.scaleBaseX).ticks(b.ticksX).tickFormat(b.axisX.classed('expanded')?b._computeFormatFn(b.scalingX,b.scaleBaseX):''),b.axisX=b._computeAxisNode(b._axisInsertionPoint,c,b.item&&b.item.mount,b.axisX).classed('expanded',!0).call(b.axisGeneratorX),void b.sizeChanged();e=this._axis._top}d3.select(this).attr('transform','translate('+d+','+e+')'),this._startleft=0,this._starttop=0}_onAxisBrushEnd(a){if(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)return;const b=d3.event.selection;if(!b)return;let c;'y'===a?(c=b.map(this.scaleY.invert,this.scaleY).sort((c,a)=>c>a),this.axisY._isBrushed=!0,this.scaleY.domain(c).nice(),this.axisY.transition().call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null)):(c=b.map(this.scaleX.invert,this.scaleX).sort((c,a)=>c>a),this.axisX._isBrushed=!0,this.scaleX.domain(c),this.axisX.transition().call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null)),this.redraw()}_axisColorChanged(a){this.axisX&&this.axisX.style('color',a),this.axisY&&this.axisY.style('color',a)}static get _VALID_AXIS_POSITIONS(){return['top','right','bottom','bottom']}_isVertical(a){return'left'===a||'right'===a}_computeFormatFn(){return'time'===arguments[0]?this.formatTime.bind(this):this.item&&this.item.isIndicatorLamp?this.formatIndicator.bind(this,this.item.threshold):this.formatNumber.bind(this)}sizeChanged(){}redraw(){}formatTime(a){return(d3.timeSecond(a)<a?this.timeFormat('.%L'):d3.timeMinute(a)<a?this.timeFormat(':%S'):d3.timeHour(a)<a?this.timeFormat('%H:%M'):d3.timeDay(a)<a?this.timeFormat('%X'):d3.timeMonth(a)<a?d3.timeWeek(a)<a?this.timeFormat('%e.%m.'):this.timeFormat('%d. %b'):d3.timeYear(a)<a?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(a)}formatTimeRange(a,b,c){const d=(b[1]-b[0]).valueOf()/c;return(100>d?this.timeFormat(':%S.%L'):500>d?this.timeFormat(':%M:%S.%L'):5E3>d?this.timeFormat(':%M:%S'):2E4>d?this.timeFormat('%H:%M:%S'):6E4>d?this.timeFormat('%H:%M'):36E5>d?this.timeFormat('%X'):864E5>d?this.timeFormat('%d.%m'):6048E5>d?this.timeFormat('%d.%m'):24192E5>d?this.timeFormat('%d. %b'):this.timeFormat('%Y'))(a)}formatTimeAbsolute(a){const b=a%315576E5,c=(a-b)/315576E5,e=b%864E5,f=(b-e)/864E5,d=e%36E5,g=(e-d)/36E5,h=d%6E4,i=(d-h)/6E4,j=h%1E3,k=(h-j)/1E3;let l='';return c&&(l+=c+'y '),f&&(l+=f+'d '),g&&(l+=g+'h '),i&&(l+=i+'m '),k&&(l+=k+'s '),j&&(l+=j+'ms'),l}formatNumber(a){return this.numberFormat(',g')(a)}formatIndicator(a,b){return a&&a.from&&a.to?b<a.from||b>a.to?'\u2717':'\u2713':b?'\u2717':'\u2713'}_setDateNumberFormat(a,b){'object'!==typeof b||'object'!==typeof a||(b&&(this.localeDate=b,d3.timeFormatDefaultLocale(b),this.timeFormat=d3.timeFormatLocale(b).format),a&&(this.localeNumber=a,d3.formatDefaultLocale(a),this.numberFormat=d3.formatLocale(a).format),this.axisGeneratorX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize),this.axisX&&this.axisX.call(this.axisGeneratorX.tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''))),this.axisGeneratorY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize),this.axisY&&this.axisY.call(this.axisGeneratorY.tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''))))}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.DeviceMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{item:{type:Object},values:{type:Array,value:function(){return[]}},isExceeding:{type:Boolean,value:!1},hasExceeded:{type:Boolean,value:!1},storeInside:{type:Boolean},viewLength:{type:Number,value:1},valueKey:{type:String,value:'y'},noLink:{type:Boolean,value:!1},_initialized:{type:Boolean},isDevice:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0}}}static get observers(){return['_exceedingChanged(isExceeding)','_hasExceededChanged(hasExceeded)','_linkElement(item, noLink)']}connectedCallback(){super.connectedCallback(),this._linkElement(this.item,this.noLink)}disconnectedCallback(){super.disconnectedCallback(),setTimeout(()=>{this.clearValues(),this._unlinkElement()},0)}_linkElement(a,b){if(a&&a.mount){if(this._olditem){if(a.mount===this._olditem.mount&&!b)return;this._unlinkElement(this._olditem)}return b?void this._unlinkElement(a):void(window.Webvisual&&window.Webvisual.assignElement&&(window.Webvisual.assignElement(this),this._olditem=a,this._initialized&&(this.clearValues(),this.reset()),this.requestValues(null,null,this.viewLength).then((a)=>{for(let b in a)if(b===this.item.mount){this.insertValues(a[b]);break}}).catch((a)=>{a&&console.log(a)})))}}_unlinkElement(a){a=a||this.item||this._olditem,setTimeout(()=>{window.Webvisual&&Webvisual.retractElement&&a&&a.mount&&(window.Webvisual.retractElement(this,a),this._olditem=null)},0)}getElement(){return this.properties}computeDate(a){return a?864E5>Math.abs(Date.now()-a)?new Date(a).toLocaleTimeString():new Date(a).toLocaleString():''}computeValue(a){return this.item&&this.item.isIndicatorLamp?this.checkExceedingState(a)?'\u2717':'\u2713':a}insertValues(a,b){if(void 0!==a){if(b=b||this.viewLength,this._initialized||(this._initialized=!0),!b)this.storeInside&&(this.values=this.values.concat(a)),this.renderInsertedValues(a);else{const c=a.slice(a.length-b,a.length);this.storeInside&&(this.values=this.values.concat(c)),this.renderInsertedValues(c),c.length=0}a.length=0}}spliceValues(a){a&&(!0===this.storeInside&&(this.values=this.values.filter((b)=>-1===a.indexOf(b)),this.notifyPath('values')),this.renderSplicedValues&&this.renderSplicedValues(a))}resetValues(a){this.values=a,this.notifyPath('values'),this.renderInsertedValues(this.values)}clearValues(){this.values=[],this.notifyPath('values')}requestValues(a,b,c){if(!(this.item&&this.item.mount))return new Promise((a,b)=>{b()});c=c||this.viewLength||1;const d={target:'cache',operation:'request',args:{mounts:[this.item.mount],from:null,to:null,length:c||1}};return window.Webvisual?new Promise((a)=>{window.Webvisual.request(d,a)}):new Promise((a,b)=>{this.values?a(this.values.slice(this.values.length-c,this.values.length)):b()})}requestRange(a){if(!(this.item&&this.item.mount))return new Promise((a)=>{a([void 0,void 0])});const b={target:'cache',operation:'range',forced:!0,args:{mounts:[this.item.mount],key:a}};return!this.storeInside&&window.Webvisual?new Promise((a)=>{window.Webvisual.request(b,a)}):new Promise((b)=>{if(this.values&&this.values.length){const c=this.min(this.values,a),d=this.max(this.values,a);void 0===c&&void 0===d||b([c,d])}b([void 0,void 0])})}min(c,d){let e,a,b=-1;const f=c.length;for(;++b<f;)if(null!==(a=c[b][d])&&a>=a){e=a;break}for(;++b<f;)null!==(a=c[b][d])&&e>a&&(e=a);return e}max(c,d){let e,a,b=-1;const f=c.length;for(;++b<f;)if(null!==(a=c[b][d])&&a>=a){e=a;break}for(;++b<f;)null!==(a=c[b][d])&&e<a&&(e=a);return e}renderInsertedValues(){}renderSplicedValues(){}renderClearing(){}checkExceedingState(a){if(!(this.item&&!0===this.item.exceedable&&void 0!==a&&void 0!==a[this.valueKey]&&null!==a[this.valueKey]))return 0;let b=0;return a[this.valueKey]<this.item.threshold.from?b=-1:a[this.valueKey]>this.item.threshold.to&&(b=1),0===b?!0===this.isExceeding&&(this.isExceeding=!1):!0!==this.isExceeding&&(this.isExceeding=!0,!1===this.hasExceeded&&this.set('hasExceeded',!0)),b}_exceedingChanged(a){this.item&&!0===this.item.exceedable&&this.dispatchEvent(new CustomEvent('exceeding',{bubbles:!0,composed:!0,detail:{item:this.item,value:a}}))}_hasExceededChanged(){}reset(){this.resetColor&&this.resetColor(),super.reset&&super.reset(),this.isExceeding=!1,this.hasExceeded=!1,this._initialized=!1,this.renderClearing()}}};</script><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ColorMixin=function(a){return class extends a{static get observers(){return['setColor(item.color)']}setColor(a){a&&(this.updateStyles({"--device-color":a||null}),this.item.isIndicatorLamp?this.updateStyles({"--device-state-inrange-color":null}):this.updateStyles({"--device-state-inrange-color":a||null})),this.updateStyles()}resetColor(){this.setColor(this.item&&this.item.color||'')}getComputedStyleValue(a){return window.ShadyCSS?ShadyCSS.getComputedStyleValue(this,a):getComputedStyle(this).getPropertyValue(a)}}};</script><dom-module id="device-graph" assetpath="../bower_components/webvisual-elements/device/chart-element/"><template><style></style></template><script>class DeviceGraph extends WebvisualMixins.AxesMixin(WebvisualMixins.ColorMixin(WebvisualMixins.DeviceMixin(Polymer.Element))){static get is(){return'device-graph'}static get properties(){return{hasLine:{type:Boolean,value:!0},hasArea:{type:Boolean,value:!1},interpolation:{type:String,value:'curveLinear',observer:'_interpolationChanged'},lineWidth:{type:Number,value:1,observer:'_lineWidthChanged'},dotRadius:{type:Number,value:3.75},viewLength:{type:Number,value:3e4},storeInside:{type:Boolean,value:!0,readOnly:!0}}}constructor(){super(),this._isAttached=!1,this._chart=this._containerRoot,this._areaGenerator=d3.area(),this._lineGenerator=d3.line()}static get observers(){return['_itemChanged(item)','_thresholdChanged(item.threshold)']}get _containerRoot(){const a=Polymer.dom(this).getOwnerRoot();return a?a.host||a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?a.host:void 0:Polymer.dom(this).parentNode}connectedCallback(){super.connectedCallback(),this.item&&this.addNodes()}disconnectedCallback(){this._isAttached=!1,this.removeNodes(),super.disconnectedCallback()}_domainXChanged(a){void 0===a||void 0===this.scaleX||a.some((a)=>void 0===a||null===a)||(this._IS_LOG_SCALE(this.scalingX)&&0>=a[0]?super._domainXChanged([d3.min(this.values.filter((a)=>0<a.x),(a)=>a.x),a[1]]):super._domainXChanged(a))}_domainYChanged(a){void 0===a||void 0===this.scaleY||a.some((a)=>void 0===a||null===a)||(this._IS_LOG_SCALE(this.scalingY)&&0>=a[0]?super._domainYChanged([d3.min(this.values.filter((a)=>0<a.y),(a)=>a.y),a[1]]):super._domainYChanged(a))}_scaleXChanged(a){void 0===a||(this._IS_LOG_SCALE(this.scalingX)&&0>=this.domainX[0]&&this._domainXChanged([d3.min(this.values.filter((a)=>0<a.x),(a)=>a.x),this.domainX[1]]),this._areaGenerator.x((b)=>a(b.x)),this._lineGenerator.x((b)=>a(b.x)),this._interpolationChanged(this.interpolation),super._scaleXChanged(a))}_scaleYChanged(a){void 0===a||(this._IS_LOG_SCALE(this.scalingY)?(0>=this.domainY[0]&&this._domainYChanged([d3.min(this.values.filter((a)=>0<a.y),(a)=>a.y),this.domainY[1]]),this._areaGenerator.y0(()=>this._chart._height).y1((b)=>0<b.y?a(b.y):this._chart._height),this._lineGenerator.y((b)=>0<b.y?a(b.y):this._chart._height)):(this._areaGenerator.y0(()=>a(0)).y1((b)=>a(b.y)),this._lineGenerator.y((b)=>a(b.y))),super._scaleYChanged(a))}_assignToChart(){const a=this._containerRoot;return a&&'DEVICE-CHART'===a.nodeName?a._isAttached?(this._chart=a,this._axisInsertionPoint=this._chart._axisInsertionPoint,this._chart._addGraph(this),!0):void console.warn('Chart has not been attached yet for adding a graph. Registration of Graph Element failed'):void console.warn('No parentElement (chart) for graph found. Registration of Graph Element failed',a)}addNodes(){this._assignToChart()&&(this._isAttached&&this.clearValues(!0),!this._chart.multiAxesX&&this.set('domainX',this._chart.domainX),!this._chart.multiAxesY&&this.set('domainY',this._chart.domainY),this.set('rangeX',this._chart.rangeX),this.set('rangeY',this._chart.rangeY),this._setColorProperties(),this._areaChanged(),this._lineChanged(),!this.axisX&&(this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,this.item.mount).attr('hidden',!this._chart.multiAxesX||null)),!this.axisY&&(this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,this.item.mount).attr('hidden',!this._chart.multiAxesY||null).classed('vertical',!0)),this.scaleX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX)),this.scaleY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY)),this._isAttached=!0)}removeNodes(){let a;this.axisX&&(a=this.axisX.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this.axisY&&(a=this.axisY.node(),a&&a.parentElement&&a.parentElement.removeChild(a)),this._area&&this._area.node&&(a=this._area.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this._area=null),this._line&&this._line.node&&(a=this._line.node(),a&&a.parentElement&&a.parentElement.removeChild(a),this._line=null),this._thresholdChanged(),this._chart._removeGraph(this)}_areaChanged(){this._chart&&this._chart._area&&(!(this._area&&this._area.node)&&(this._area=this._chart._area.append('svg:path'),this._area.append('svg:title').text(this.item.mount)),this._area.attr('mount',this.item.mount).attr('class','area').attr('stroke-width',0).attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._areaGenerator&&this._area.attr('d',this._areaGenerator(this.values||[])))}_lineChanged(){this._chart&&this._chart._line&&(!(this._line&&this._line.node)&&(this._line=this._chart._line.append('svg:path'),this._line.append('svg:title').text(this.item.mount)),this._line.attr('mount',this.item.mount).attr('class','line').attr('fill','none').attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')').attr('stroke-width',this.lineWidth),this._lineGenerator&&this._line.attr('d',this._lineGenerator(this.values||[])))}_thresholdChanged(a){if(this._chart&&this._chart._defs)if(a)this.boundery||(this.boundery=this._chart._defs.append('linearGradient')),this.boundery.attr('id','boundery-line-'+this.item.mount).attr('gradientUnits','userSpaceOnUse').attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0),this._area&&this._area.attr&&this._area.attr('fill','url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke','url(#boundery-line-'+this.item.mount+')');else{if(this.boundery&&this.boundery.node){let a=this.boundery.node();a&&a.parentElement&&a.parentElement.removeChild(a),this.boundery=null}this._area&&this._area.attr&&this._area.attr('fill',this.item.color||'#FFF'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.color||'#000')}}_setColorProperties(){!this._chart||this.item&&this.item.color&&(this.axisColor=this.item.color,this._area&&this._area.attr&&this._area.attr('fill',this.item.theshold===void 0?this.item.color||'#FFF':'url(#boundery-line-'+this.item.mount+')'),this._line&&this._line.attr&&this._line.attr('stroke',this.item.theshold===void 0?this.item.color||'#000':'url(#boundery-line-'+this.item.mount+')'))}_itemChanged(a){return this._isAttached?a&&a.mount?void this.addNodes():void this.removeNodes():void 0}insertValues(a,b){if(void 0!==a){if(b=b||(0<this.viewLength?this.viewLength:a.length),b&&(a=a.slice(a.length-b,a.length)),this.storeInside){this.values=this.values.concat(a);let b=this.min(this.values,'x'),c=this.max(this.values,'x');void 0!==b&&void 0!==c&&(!this.axisX||this.axisX._isBrushed||this._chart.axisX._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesX?!this._chart.multiAxesX&&(b<this._chart.domainX[0]&&this._chart.set('domainX',[b,this._chart.domainX[1]]),c>this._chart.domainX[1]&&this._chart.set('domainX',[this._chart.domainX[0],c])):this.set('domainX',[b,c])),b=this.min(this.values,'y'),c=this.max(this.values,'y'),void 0!==b&&void 0!==c&&(b===c&&(b--,c++),!this.axisY||this.axisY._isBrushed||this._chart.axisY._isBrushed||this._chart._isZoomed&&!this._chart.multiAxesY?!this._chart.multiAxesY&&(b<this._chart.domainY[0]&&this._chart.set('domainY',[b,this._chart.domainY[1]]),c>this._chart.domainY[1]&&this._chart.set('domainY',[this._chart.domainY[0],c])):this.set('domainY',[b,c]))}this.renderInsertedValues(a)}}renderClearing(){this._area.attr('d',this._areaGenerator([])),this._line.attr('d',this._lineGenerator([]))}spliceValues(a){for(let b=0;b<a.length;b++){let c;for(c=0;c<this.values.length&&!(this.values[c].x===a[b].x);c++);c!==this.values.length&&this.values.splice(c,1)}this.redraw()}renderInsertedValues(a){if(!this._isAttached&&this.item&&this.addNodes(),this._chart){let b;this._chart.domainX&&this._chart.domainX.some((a)=>void 0===a||null===a)&&(this._chart.set('domainX',this.domainX),b=!0),this._chart.domainY&&this._chart.domainY.some((a)=>void 0===a||null===a)&&(this._chart.set('domainY',this.domainY),b=!0),this._chart.multiAxesY&&this._chart.multiAxesX||this._chart._isZoomed||(b=!0),this.redraw(b,a)}}sizeChanged(){this._isAttached&&this._chart.sizeChanged()}redraw(a,b){var c=Number.isFinite;if(this._isAttached&&this.scaleX&&this.scaleY){if(a)return void this._chart.redraw(!0);const d=this.values||b||[];if(this._area.attr('d',this._areaGenerator(this.hasArea?d:[])),this._line.attr('d',this._lineGenerator(this.hasLine?d:[])),this.item&&this.item.threshold){this.boundery&&this.boundery.node||this._thresholdChanged(this.item.threshold);const a=[],b=this.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C',d=this.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C',e=this.item.color||'#000';let f;void 0!==this.item.threshold.from&&(f=100*(1-Math.ceil(this.scaleY(this.item.threshold.from)+1.25*this.lineWidth)/this._chart._height),c(f)&&(a.push({o:f+'%',c:d}),a.push({o:f+'%',c:e}))),void 0!==this.item.threshold.to&&(f=100*(1-Math.floor(this.scaleY(this.item.threshold.to)-1.25*this.lineWidth)/this._chart._height),c(f)&&(a.push({o:f+'%',c:e}),a.push({o:f+'%',c:b})));const g=this.boundery.attr('x1',0).attr('y1',this._chart._height).attr('x2',0).attr('y2',0).selectAll('stop').data(a);g.attr('offset',function(a){return a.o}).attr('stop-color',function(a){return a.c}),g.enter().append('stop').attr('offset',function(a){return a.o}).attr('stop-color',function(a){return a.c}),g.exit().remove()}}}_getDomain(a,b){return new Promise((c,d)=>{const e='y'===a,f=e?this.scalingY:this.scalingX;this.requestRange(a).then((d)=>{var g=Number.EPSILON,h=Math.sign;if(d[0]!==void 0&&d[1]!==void 0){e&&d[0]===d[1]&&(d[0]--,d[1]++);let c=this._IS_LOG_SCALE(f);if(c){let a=0<d[0]*d[1];a&&0>=d[0]&&(d[0]=h(d[1])*g),a&&0>=d[1]&&(d[1]=h(d[0])*g)}b&&('x'===a?this.set('domainX',d):'y'===a&&this.set('domainY',d))}c({domain:d,key:a})}).catch((a)=>{d(a)})})}_closestPoint(a){var b=Math.ceil;const c=this.values.length,d=+this.scaleX.invert(a[0]),e=b(this._chart._width/c),f=Math.pow(b(c/this._chart._width),2),g=this._bisectDate.left;let h=g(this.values,d,0,c-1),j=this._pixdistance2(this.values[h],a);const i=Math.sqrt(j)/f,k=+this.scaleX.invert(a[0]-i);let l=g(this.values,k,0,h);(0>l||l>=c-1)&&(l=0),h===l&&h++;let m=2*h-l;(m>c||0>=m)&&(m=c);let n,o=h;for(let b=l;b<m;b+=e)(n=this._pixdistance2(this.values[b],a))<=j&&(h=b,j=n);o=h;for(let b=h+1;b<m&&b<h+e-1;b++)(n=this._pixdistance2(this.values[b],a))<=j&&(j=n,o=b);for(let b=h-1;b>l&&b>h-e+1;b--)(n=this._pixdistance2(this.values[b],a))<=j&&(j=n,o=b);return{x:this.values[o].x,y:this.values[o].y}}_pixdistance2(a,b){const c=this.scaleX(a.x)-b[0],d=this.scaleY(a.y)-b[1];return c*c+d*d}_closestInterpolatedPoint(a,b){function c(b){const c=b.x-a[0],d=b.y-a[1];return c*c+d*d}b=b||this._area.node()||this._line.node();const d=b.getTotalLength();let e,f,g=2*Math.ceil(d/this._chart._width/2),h=Infinity;for(let i,j,k=0;k<=d;k+=g)(j=c(i=b.getPointAtLength(k)))<h&&(e=i,f=k,h=j);for(g/=2;0.5<g;){let a,i,j,k,l,m;0<=(j=f-g)&&(l=c(a=b.getPointAtLength(j)))<h?(e=a,f=j,h=l):(k=f+g)<=d&&(m=c(i=b.getPointAtLength(k)))<h?(e=i,f=k,h=m):g/=2}return e={x:this.scaleX(e.x),y:this.scaleY(e.y)},e.distance=Math.sqrt(h),e}setColor(a){super.setColor.call(this,a),this._setColorProperties()}clearValues(a){super.clearValues.call(this,a)}_lineWidthChanged(a){this._line&&this._line.attr&&this._line.attr('stroke-width',a)}_interpolationChanged(a){if(a&&a.match(/curve.*/)&&a in d3){const b=d3[a];this._areaGenerator.curve(b),this._lineGenerator.curve(b)}}_onAxisClicked(a){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((a._isBrushed||this._isZoomed)&&this._chart._resetZoom())):void super._onAxisClicked(a)}_onAxisMouseover(){super._onAxisMouseover(),this._area&&(this._area.raise(),!1===this.hasArea&&this._area.transition().attr('d',this._areaGenerator(this.values||[]))),this._line&&this._line.raise()}_onAxisMouseleave(){super._onAxisMouseleave(),this._area&&!1===this.hasArea&&this._area.attr('d',this._areaGenerator([]))}}customElements.define(DeviceGraph.is,DeviceGraph);</script></dom-module><script>window._numberUtilities=window._numberUtilities||{},window._numberUtilities._safeMult=function(c,a){c=''+(c||0),a=''+(a||0);const b=c.slice(c.indexOf('.')).length+a.slice(a.indexOf('.')).length-2;if(0===b)return c*a;const d=('-'===c[0]?'-'!==a[0]:'-'===a[0])?'-':'';c=+c.replace(/\D/g,''),a=a.replace(/\D/g,'');let e=0;for(let b=0;b<a.length;b++)e+=Math.pow(10,a.length-1-b)*c*+a[b];e=''+e;for(let d=e.length;d<b;d++)e='0'+e;return+(d+e.slice(0,e.length-b)+'.'+e.slice(e.length-b))},window._numberUtilities._safeAdd=function(c,a){var b=Math.pow;const d=''+(c||0),e=''+(a||0),f=Math.max(d.slice(d.indexOf('.')).length,e.slice(e.indexOf('.')).length)-1;if(0===f)return c+a;let g=Math.round(b(10,f)*c+b(10,f)*a);const h=0>g?'-':'';g=''+Math.abs(g);for(let b=g.length;b<f;b++)g='0'+g;return+(h+g.slice(0,g.length-f)+'.'+g.slice(g.length-f))};const RangeMixin=(a)=>{var b=Math.abs,c=Math.round;return class extends a{static get properties(){return{min:{type:Number},max:{type:Number},step:{type:Number,value:1},stepMod:{type:Number,value:1},_step:{type:Number,value:1},valueAsNumber:{type:Number,notify:!0,observer:'_valueAsNumberChanged'},default:{type:Number},saturate:{type:Boolean,observer:'_updateValue'},noClamp:{type:Boolean,observer:'_updateValue'}}}static get observers(){return['_minMaxChanged(min, max)','_stepChanged(step, stepMod)']}connectedCallback(){super.connectedCallback(),this.valueAsNumber!==void 0||isNaN(this.default)||(this.valueAsNumber=this.default)}_minMaxChanged(a,b){+b<+a?this.setProperties({min:+b,max:+a}):this._updateValue()}_valueAsNumberChanged(a,b){if(void 0!==a)return(a=this._checkValue(a,b),a!==this.valueAsNumber)?void(this.valueAsNumber=a):void 0}_checkValue(a,b){if(isNaN(a)){if(!isNaN(b))return b;return isNaN(this.default)?isNaN(this.min)?isNaN(this.max)?0:this.max:this.min:this.default}const c=this.saturate,d=this.min,e=this.max;if(d!==void 0&&a<=d)return c||a===d||void 0===e||b!==d?d:e;return void 0!==e&&a>=e?c||a===e||void 0===d||e!==b?e:d:this.noClamp?a:this._checkStep(a,this._step)}_updateValue(){this.valueAsNumber!==void 0&&this._valueAsNumberChanged(this.valueAsNumber,this.valueAsNumber)}_checkStep(a,b){return b?void 0===this.default?void 0===this.min?void 0===this.max?this._safeMult(c(a/b),b):this._safeAdd(this._safeMult(-c((this.max-a)/b),b),this.max):this._safeAdd(this._safeMult(c((a-this.min)/b),b),this.min):this._safeAdd(this._safeMult(c((a-this.default)/b),b),this.default):a}_safeMult(c,a){return window._numberUtilities._safeMult(c,a)}_safeAdd(c,a){return window._numberUtilities._safeAdd(c,a)}_stepChanged(a,c){return a=a||0,a===b(a)?void(this._step=this._safeMult(a,c||1),this._updateValue()):void(this.step=b(a))}}};window.RangeMixin=RangeMixin;</script><script>const IntlNumberFormatMixin=(a)=>class extends a{static get properties(){return{locale:{type:String,notify:!0,value:window.navigator.language},decimalSeparator:{type:String,notify:!0,readOnly:!0},groupingSeparator:{type:String,notify:!0,readOnly:!0},minimumFractionDigits:{type:Number},maximumFractionDigits:{type:Number},minimumIntegerDigits:{type:Number},minimumSignificantDigits:{type:Number},maximumSignificantDigits:{type:Number},unit:{type:String},unitSeparator:{type:String,value:'\u202F'},alwaysSign:{type:Boolean},numberStyle:{type:String,value:'decimal',notify:!0},useGrouping:{type:Boolean},currency:{type:String},currencyDisplay:{type:String},_numberOptions:{type:Number,computed:'_computeNumberOptions(minimumIntegerDigits, minimumFractionDigits, maximumFractionDigits, minimumSignificantDigits, maximumSignificantDigits, useGrouping, numberStyle, currency, currencyDisplay, unit)'},formatNumber:{type:Function,computed:'_computeFormatNumber(locale, _numberOptions, unit)',notify:!0},parseNumber:{type:Function,computed:'_computeParseNumber(decimalSeparator, numberStyle, useGrouping)',notify:!0},_regExpNotInNumber:{type:RegExp,value:/[^\d\-+.e]/g,readOnly:!0}}}static get observers(){return['_localeChanged(locale)']}_localeChanged(a){if(!(a&&Intl.NumberFormat&&Intl.NumberFormat.supportedLocalesOf(a)))return void(this.locale=window.navigator.language);const b=new Intl.NumberFormat(a).resolvedOptions();if('latn'!==b.numberingSystem){if(-1!==a.indexOf('-u-')){let b;if(-1!==(b=a.indexOf('-nu-'))){const c=a.indexOf('-',b+4);this.locale=-1===c?a.slice(0,b+4)+'latn':a.slice(0,b+4)+'latn'+a.slice(c)}else this.locale=a+'-nu-latn'}else this.locale=a+'-u-nu-latn';return}const c=0.5.toLocaleString(a,{minimumIntergerDigits:1,minimumFractionsDigits:1}),d=c[1],e=1e6.toLocaleString(a,{useGrouping:!1}),f=1e6.toLocaleString(a,{useGrouping:!0});let g;for(let b=0;b<e.length;b++)if(f[b]!==e[b]){g=f[b];break}this.setProperties({decimalSeparator:d,groupingSeparator:g},!0)}_computeNumberOptions(a,b,c,d,e,f,g,h,i){let j={minimumIntegerDigits:a||1,minimumFractionDigits:b||0,useGrouping:!!f,style:g||'decimal'};return void 0!==h&&(j.currency=h),void 0!==i&&(j.currencyDisplay=i),void 0!==c&&(j.maximumFractionDigits=c<b?b:c),void 0!==d&&(j.minimumSignificantDigits=d),void 0!==e&&(j.maximumSignificantDigits=e<d?d:e),j}_computeFormatNumber(a,b,c){b&&'currency'===b.style&&!b.currency&&(console.warn('No currency is given. Using number style: \'decimal\'.'),b.style='decimal'),b&&'decimal'!==b.style&&(c='');const d=new Intl.NumberFormat(a,b).format;return c?(a)=>(this.alwaysSign&&0<=a?'+':'')+d(a)+this.unitSeparator+c:(a)=>(this.alwaysSign&&0<=a?'+':'')+d(a)}_computeParseNumber(a,b,c){const d=new RegExp('['+(this.groupingSeparator||'')+']','g');return'percent'===b?c?(b)=>window._numberUtilities._safeMult(b.replace(d,'').replace(a,'.'),0.01):(b)=>window._numberUtilities._safeMult(parseFloat(b.replace(a,'.')),0.01):c?(b)=>parseFloat(b.replace(d,'').replace(a,'.').replace(this._regExpNotInNumber,'')):(b)=>parseFloat(b.replace(a,'.').replace(this._regExpNotInNumber,''))}};window.IntlNumberFormatMixin=IntlNumberFormatMixin;</script><script>const FormElementMixin=(a)=>class extends a{static get properties(){return{required:{type:Boolean,reflectToAttribute:!0,notify:!0},invalid:{type:Boolean,reflectToAttribute:!0,notify:!0},disabled:{type:Boolean,reflectToAttribute:!0,notify:!0},name:{type:String},value:{type:Object,notify:!0},_valueIsSet:{type:Boolean,value:!1},propertyForValue:{type:String,observer:'_createReflectPropertyToValueObserver'},default:{type:Object}}}static get observers(){return['_computeInvalid(required, value)','_computeValueIsSet(value)','_defaultChanged(default)']}connectedCallback(){super.connectedCallback(),this._ensureAttribute('tabindex',0)}_computeInvalid(a,b){this.invalid=a&&!b}_computeValueIsSet(a){this._valueIsSet=void 0!==a}_defaultChanged(a){if(super._defaultChanged&&super._defaultChanged(a),a&&void 0===this.value){let b={value:a};this.propertyForValue&&(b[this.propertyForValue]=a),setTimeout(()=>{this.setProperties(b)},0)}}validate(){return!this.invalid}_attachDom(a){return this.shadowRoot||(this.attachShadow({mode:'open',delegatesFocus:!0}),this.shadowRoot.appendChild(a)),this.shadowRoot}_createReflectPropertyToValueObserver(a){void 0!==a&&(this._createPropertyObserver(a,'_reflectPropertyToValue'),this._createPropertyObserver('value','_reflectValueToProperty'),setTimeout(()=>{void 0!==this.value&&this.set(this.propertyForValue,this.value),void 0!==this[this.propertyForValue]&&this.set('value',this[this.propertyForValue])},0))}_reflectPropertyToValue(a){this.set('value',a)}_reflectValueToProperty(a){this.set(this.propertyForValue,a)}};window.FormElementMixin=FormElementMixin;</script><dom-module id="input-shared-style" assetpath="../bower_components/input-picker-pattern/"><template><style>:host{vertical-align:middle;}:host([hidden]),
      [hidden]{display:none !important;}:host([disabled]),
      [disabled]{pointer-events:none;}:host(:focus),
      :focus{outline:none;}button,
       select{-moz-appearance:none;-webkit-appearance:none;appearance:none;background:transparent;border:var(--inner-input-border-width, thin) solid transparent;box-sizing:border-box;}input,
      #input{vertical-align:inherit;color:inherit;min-width:inherit;max-width:inherit;box-sizing:content-box;border-style:var(--input-border-style, dotted);border-width:var(--input-border-width, thin);border-color:var(--input-border-color, rgba(0,0,0,0.25));}button,
      input,
      select,
      #input{font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;outline:none;line-height:normal;cursor:var(--input-cursor, initial);text-align:var(--input-align, center);transition-duration:var(--input-transition-duration, 250ms);transition-timing-function:var(--input-transition-timing-function, cubic-bezier(0.6, 1, 0.2, 1));transition-property:var(--input-transition-property, background-color);padding:var(--input-padding, 0.25em);color:var(--input-color, inherit);background-color:var(--input-background, transparent);border-radius:var(--input-border-radius, 0.25em);@apply --input-style;-webkit-background-clip:padding-box;background-clip:padding-box;-webkit-backface-visibility:hidden;-webkit-transform:rotate(0);-moz-transform:rotate(0);transform:rotate(0);margin:0;}select{color:var(--inner-input-color, inherit);background-color:var(--inner-input-background, transparent);border-width:var(--inner-input-border-width, thin);border-color:var(--inner-input-border-color, transparent);border-style:var(--inner-input-border-style, dotted);border-radius:var(--inner-input-border-radius, 0.1em);}:host(:focus) #input,
       :host(:hover) #input,
       #input:hover,
       #input:focus,
       input:focus,
       input:hover{color:var(--input-focus-color, inherit);background-color:var(--input-focus-background, rgba(0,0,0,0.1));border-style:var(--input-focus-border-style, dotted);border-color:var(--input-focus-border-color, rgba(0,0,0,0.5));border-width:var(--input-border-width, thin);outline:none;@apply --input-focus;}select:focus,
       select:hover,
       button:focus,
       button:hover{color:var(--inner-input-focus-color, inherit);background-color:var(--inner-input-focus-background, rgba(0,0,0,0.1));border-style:var(--inner-input-focus-border-style, dotted);border-color:var(--inner-input-focus-border-color, rgba(0,0,0,0.2));border-width:var(--inner-input-border-width, thin);outline:none;@apply --input-focus;}:host([invalid]) #input,
      :host([invalid]:hover) #input,
      :host([invalid]:focus) #input,
      #input:invalid:hover,
      #input:invalid:focus{color:var(--input-invalid-color, inherit);background-color:var(--input-invalid-background, rgba(255,0,0,0.25));border-width:var(--input-border-width, thin);border-style:var(--input-invalid-border-style, dotted);@apply --input-invalid;}:host([invalid]) #input,
      #input:invalid{border-color:var(--input-invalid-border-color, rgba(255,0,0,0.5));}:host([invalid]:hover) #input,
      :host([invalid]:focus) #input,
      #input:invalid:hover,
      #input:invalid:focus{border-color:var(--input-focus-border-color, rgba(255,0,0,1));}integer-input,
      number-input,
      text-input{--input-color:var(--inner-input-color, inherit);--input-background:var(--inner-input-background, transparent);--input-border-width:var(--inner-input-border-width, thin);--input-border-color:var(--inner-input-border-color, transparent);--input-border-style:var(--inner-input-border-style, dotted);--input-padding:var(--inner-input-padding, 0);--input-border-radius:var(--inner-input-border-radius, 0.1em);--input-focus-color:var(--inner-input-focus-color, inherit);--input-focus-background:var(--inner-input-focus-background, rgba(0,0,0,0.1));--input-focus-border-color:var(--inner-input-focus-border-color, rgba(0,0,0,0.15));--input-focus-border-style:var(--inner-input-focus-border-style, dotted);--input-invalid-color:var(--inner-input-invalid-color, inherit);--input-invalid-background:var(--inner-input-invalid-background, rgba(0,0,0,0.1));--input-invalid-border-style:var(--inner-input-invalid-border-style, dotted);--input-invalid-border-color:var(--inner-input-invalid-border-color, rgba(0,0,0,0.25));}:host([disabled]) #input{color:var(--input-disabled-color, inherit);background-color:var(--input-disabled-background, transparent);font-style:var(--input-disabled-font-style, oblique);opacity:var(--input-disabled-opacity, 0.9);@apply --input-disabled;pointer-events:none;}#input .reset{display:inline-flex;align-self:center;margin:0 0.1em;cursor:pointer;border-width:var(--inner-input-border-width, thin);border-style:var(--inner-input-border-style, dotted);border-color:var(--inner-input-border-color, transparent);box-sizing:content-box;opacity:0.5;color:inherit;background-color:transparent;transition-property:background, opacity;height:1em;width:1em;border-radius:50%;padding:0.15em;}#input .reset > svg{height:100%;width:100%;fill:currentColor;}#input .reset:focus,
       #input .reset:hover{border-style:var(--inner-input-focus-border-style, dotted);outline:none;}#input .reset:hover{opacity:1;color:var(--inner-input-focus-color, inherit);background-color:var(--inner-input-focus-background, rgba(0,0,0,0.1));}#input .reset:focus{border-color:var(--inner-input-focus-border-color, var(--inner-input-focus-background, rgba(0,0,0,0.2)));}::-webkit-input-placeholder,
      ::-ms-input-placeholder,
      ::placeholder{color:currentColor;opacity:var(--input-placeholder-opacity, 0.75);text-align:var(--input-placeholder-align, center);@apply --input-placeholder;}::-ms-input-placeholder{color:currentColor;opacity:var(--input-placeholder-opacity, 0.75);text-align:var(--input-placeholder-align, center);}:host([invalid]) ::-webkit-input-placeholder,
      :host([invalid]) ::placeholder{color:var(--input-invalid-color, inherit);}::-moz-selection{color:inherit;background-color:transparent;}:hover::-moz-selection{color:var(--input-selection-color, inherit);background-color:var(--input-selection-background, rgba(255,255,255,0.5));}::selection{color:inherit;background-color:transparent;}:hover::selection{color:var(--input-selection-color, inherit);background-color:var(--input-selection-background, rgba(255,255,255,0.5));}::-moz-focus-inner{border-width:0;border-style:none;padding:0;}::-moz-focusring{border-width:0;border-style:none;color:transparent !important;text-shadow:0 0 0 var(--input-focus-color, #000);}select:focus::-ms-value{background:transparent;}::-ms-clear,
      ::-ms-expand{display:none;}::-webkit-input-edit-text,
      ::-webkit-input-placeholder,
      ::-webkit-inner-spin-button,
      ::-webkit-outer-spin-button,
      ::-webkit-search-cancel-button,
      ::-webkit-clear-button{color:currentColor;cursor:pointer;}[invisible]{visibility:hidden;}</style></template></dom-module><script>const InputPattern=(a)=>class extends FormElementMixin(a){static get template(){return`
          <style include="${this.styleToInclude}">
            ${this.styleTemplate}
          </style>
          ${this.inputTemplate}
          <div id="size">[[input]]</div>
          <div id="minsize">[[_minWidthString]]</div>
        `}static get styleToInclude(){return'input-shared-style'}static get styleTemplate(){return`
          ${super.styleTemplate||''}
          :host {
            display: inline-flex;
            justify-content: center;
            box-sizing: content-box;
          }
          #minsize,
          #size {
            position: fixed;
            top: 0; left: 0; right: auto; bottom: auto;
            font-family: inherit;
            font-size: inherit;
            font-weight: inherit;
            font-style: inherit;
            outline: none;
            line-height: normal;
            box-sizing: content-box;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
            padding: 0 !important;
            margin: 0;
            min-width: inherit;
            max-width: inherit;
            border: var(--input-border-width, thin) solid transparent;
            @apply --input-style;
          }
          #input {
            box-sizing: content-box;
            width: 0;
          }
        `}static get inputTemplate(){return`
          <input id="input"
            type="[[type]]"
            value="{{input::input}}"
            placeholder="[[placeholder]]"
            required$="[[required]]"
            disabled$="[[disabled]]"
            spellcheck="false"
            autocomplete="off">
        `}static get properties(){return{type:{type:String,value:'text'},input:{type:String,notify:!0,observer:'_inputChanged'},placeholder:{type:String},default:{type:String},minlength:{type:Number},noAutoWidth:{type:Boolean},autoResize:{type:Boolean},_minWidthString:{type:String},hidden:{type:Boolean},propertyForValue:{type:String,value:'input'}}}static get observers(){return['_defaultChanged(default)','_computeMinWidth(noAutoWidth, minlength, default, placeholder)','resize(_minWidthString, hidden)']}connectedCallback(){super.connectedCallback(),this.focus=this.focus.bind(this),this._updateValue=this._updateValue.bind(this),this._checkInput=this._checkInput.bind(this),this._checkKeycode=this._checkKeycode.bind(this),this._addEventListeners(),setTimeout(this.resize.bind(this),0)}disconnectedCallback(){super.disconnectedCallback(),this._removeEventListeners()}_addEventListeners(){this.addEventListener('focus',this.focus,!1),this.$.input.addEventListener('focus',this._updateValue,!1),this.$.input.addEventListener('blur',this._checkInput,!1),this.$.input.addEventListener('keydown',this._checkKeycode,!1)}_removeEventListeners(){this.removeEventListener('focus',this.focus,!1),this.$.input.removeEventListener('focus',this._updateValue,!1),this.$.input.removeEventListener('blur',this._checkInput,!1),this.$.input.removeEventListener('keydown',this._checkKeycode,!1)}focus(){this.$.input.focus(),this.$.input.scrollIntoViewIfNeeded&&this.$.input.scrollIntoViewIfNeeded()}blur(a){this._checkInput(a),this.$.input.blur()}_checkKeycode(a){return super._checkKeycode&&super._checkKeycode(a),13===a.keyCode||32===a.keyCode?void this._checkInput():27===a.keyCode?(this._updateValue(),a.stopPropagation(),void this.blur()):void(this.autoResize&&this._debouncedComputeWidth())}_inputChanged(a){void 0!==a&&this._reflectPropertyToValue(a),this.autoResize&&this._debouncedComputeWidth()}_defaultChanged(a){!this.input&&a&&(this.input=a)}_checkInput(a){this._inputChanged(this.input||''),this._debouncedComputeWidth(),a&&a.stopPropagation&&a.stopPropagation()}_updateValue(a){void 0!==this.value&&this._reflectValueToProperty(this.value),this._debouncedComputeWidth(),a&&a.stopPropagation&&a.stopPropagation()}_computeMinWidth(){this._minWidthComputionJob&&(clearTimeout(this._minWidthComputionJob),this._minWidthComputionJob=null),this._minWidthComputionJob=setTimeout(()=>{const a=this.default||'',b=this.placeholder||'',c=this.minlength||1,d='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';let e='';for(let a=0;a<c;a++)e+=d.charAt(Math.floor(Math.random()*d.length));this._minWidthString=(this.noAutoWidth?[e]:[a,e]).reduce((a,b)=>b.length>a.length?b:a,b)},0)}resize(){!this._minWidthString||this.hidden||this._minSizeJob||(this._minSizeJob=requestAnimationFrame(()=>{let a=this.$.minsize.getBoundingClientRect().width;if(0!==a)this.$.input.style.minWidth=`${a}px`,this._debouncedComputeWidth(),this._minSizeJob=null;else{const b=this.$.minsize.cloneNode(!0),c=document.defaultView.getComputedStyle(this.$.minsize,'');['font-family','font-size','font-weight','font-style','letter-spacing','min-width','max-width'].reduce((a,d)=>{d&&c[d]&&(b.style[d]=c[d])},'font-family'),b.style.display='inline-flex',b.style.opacity='0',b.style.position='fixed',b.style.left='0',b.style.top='0',b.style.border='thin solid transparent',document.body.appendChild(b),requestAnimationFrame(()=>{a=b.getBoundingClientRect().width,b.parentElement.removeChild(b),this._minSizeJob=null,0===a?this.resize():(this.$.input.style.minWidth=`${a}px`,this._debouncedComputeWidth())})}}))}_debouncedComputeWidth(){this._activeResizeJob&&clearTimeout(this._activeResizeJob),this._activeResizeJob=setTimeout(this._computeWidth.bind(this),0)}_computeWidth(){this.$.input.style.width=`${this.$.size.getBoundingClientRect().width}px`}};window.InputPattern=InputPattern;</script><script>const NumberInputMixin=(a)=>{var b=Math.max,c=Math.abs;return class extends RangeMixin(InputPattern(IntlNumberFormatMixin(a))){static get styleTemplate(){return`
          ${super.styleTemplate||''}
          #minsize,
          #size,
          #input {
            @apply --number-input;
            margin: 0;
            -moz-appearance: textfield;
            appearance: textfield;
          }
          :host(:focus) #input,
          :host(:hover) #input,
          #input:hover,
          #input:focus {
            @apply --number-input-focus;
          }
          :host([invalid]) #input {
            @apply --number-input-invalid;
          }
          :host([disabled]) #input {
            @apply --number-input-disabled;
          }
          #input::-webkit-inner-spin-button,
          #input::-webkit-outer-spin-button {
            -webkit-appearance: none;
          }
          #input::-webkit-input-placeholder,
          #input::placeholder {
            @apply --number-input-placeholder;
          }
        `}static get inputTemplate(){return`
          <input id="input"
            type="[[type]]"
            value="{{input::input}}"
            step="[[step]]"
            required$="[[required]]"
            disabled$="[[disabled]]"
            placeholder="[[placeholder]]"
            spellcheck="false"
            autocomplete="off">
        `}static get properties(){return{type:{type:String,computed:'_computeType(formatNumber, alwaysSign)'},padLength:{type:Number},alwaysSign:{type:Boolean,observer:'_updateValue'},autoPadding:{type:Boolean},startAt:{type:Number},minimumFractionDigits:{type:Number,computed:'_computeMinimumFractionDigits(_step, min, max, numberStyle)',notify:!0},maximumFractionDigits:{type:Number,computed:'_computeMaximumFractionDigits(minimumFractionDigits, noClamp)',notify:!0},minimumIntegerDigits:{type:Number,computed:'_computeMinimumIntegerDigits(autoPadding, padLength, default, startAt, min, max, _step, numberStyle)',notify:!0},propertyForValue:{type:String,value:'valueAsNumber'}}}static get observers(){return['_computeMinWidth(formatNumber, startAt, min, max, minimumIntegerDigits, minimumFractionDigits, alwaysSign)','_updateValue(formatNumber)']}_checkKeycode(a){const b=38===a.keyCode?this._step:40===a.keyCode?-this._step:0;return 0===b?void(super._checkKeycode&&super._checkKeycode(a)):(this._checkInput(),setTimeout(this._increm.bind(this,this.valueAsNumber,+b),0),void a.stopPropagation())}_increm(a,b){a=+this._safeAdd(a,b),this.valueAsNumber=isNaN(a)?isNaN(this.startAt)?isNaN(this.default)?0>this.min?0:this.min||0:+this.default:+this.startAt:a}_computeInvalid(a,b){this.invalid=a&&isNaN(b)}_inputChanged(a){if(!a)return isNaN(this.default)||this.setProperties({input:this.formatNumber(this.default),valueAsNumber:+this.default}),void this._debouncedComputeWidth();const b=this._checkValue(this.parseNumber(a),this.valueAsNumber);a=this.formatNumber(b),this.setProperties({input:a,valueAsNumber:b}),this.autoResize&&this._debouncedComputeWidth()}_valueAsNumberChanged(a,b){return void 0===a?void(isNaN(this.default)?this.input=this.input='':this.valueAsNumber=this.default):(a=isNaN(b)?this._checkValue(a):this._checkValue(a,b),this.valueAsNumber===a?void(this.input=this.input=this.formatNumber(a)):void(this.valueAsNumber=a))}_defaultChanged(a){isNaN(this.valueAsNumber)&&!isNaN(a)&&(this.valueAsNumber=a)}_computeType(){return'.'===this.decimalSeparator?'decimal'!==this.numberStyle||this.unit||this.alwaysSign||this.padLength||this.autoPadding?'tel':'number':'text'}_computeMinWidth(){this._minWidthComputionJob&&(clearTimeout(this._minWidthComputionJob),this._minWidthComputionJob=null),this._minWidthComputionJob=setTimeout(()=>{var a=Math.pow;const b=this.formatNumber(this.default||0),c=this.placeholder||'',d=this.formatNumber(this.startAt||0),e=this.formatNumber(this.min||0),f=this.formatNumber(this.max||0),g=this.formatNumber(a(10,Math.ceil(this.minlength||1)-('percent'===this.numberStyle?3:1))),h=(!this.alwaysSign&&(0>this.min||0>this.max)?'-':'')+this.formatNumber(a(10,(this.minimumIntegerDigits||1)-1)+a(10,-(this.minimumFractionDigits||0)));this._minWidthString=(this.noAutoWidth?[g]:[f,e,b,d,h,g]).reduce((a,b)=>b.length>a.length?b:a,c)},0)}_computeMinimumIntegerDigits(a,d,e,f,g,h,i,j){var k=Math.round;return'percent'===j?(g=k(100*g),h=k(100*h),e=k(100*e),i=k(100*i),f=k(100*f)):(g=k(g),h=k(h),e=k(e),i=k(i),f=k(f)),g=''+(c(g)||0),h=''+(c(h)||0),e=''+(c(e)||0),i=''+(c(i)||0),f=''+(c(f)||0),a?b(d||1,f.length,i.length,e.length,g.length,h.length):d||1}_computeMinimumFractionDigits(a,d,e,f){return'percent'===f&&(d=this._safeMult(d||0,100),e=this._safeMult(e||0,100),a=this._safeMult(a||0.01,100)),d=''+(c(d)||''),e=''+(c(e)||''),a=''+a,['0',a,d,e].reduce((a,c)=>{const d=c.indexOf('.');return b(0>d?0:c.length-1-d,a)})}_computeMaximumFractionDigits(a,b){return b?20:a}}};window.NumberInputMixin=NumberInputMixin;</script><dom-module id="number-input" assetpath="../bower_components/number-input/"><script>class NumberInput extends NumberInputMixin(Polymer.Element){static get is(){return'number-input'}}window.customElements.define(NumberInput.is,NumberInput);</script></dom-module><script>const IntegerInputMixin=(a)=>class extends NumberInputMixin(a){static get properties(){return{numberStyle:{type:String,value:'decimal',readOnly:!0,notify:!0}}}_stepChanged(a,b){var c=Math.abs;return a=a||0,a===c(a)?void(this._step=Math.floor(window._numberUtilities._safeMult(a,b||1)),this._updateValue()):void(this.step=c(a))}_computeMinimumFractionDigits(){return 0}_computeMaximumFractionDigits(){return 0}_computeParseNumber(a,b,c){if(c){const a=new RegExp('['+(this.groupingSeparator||'')+']','g');return(b)=>parseInt(b.replace(a,''))}return(a)=>parseInt(a)}_computeType(){return this.unit||this.alwaysSign||this.padLength||this.autoPadding?'tel':'number'}_safeAdd(c,a){return c+a}_safeMult(c,a){return c*a}};window.IntegerInputMixin=IntegerInputMixin;</script><dom-module id="integer-input" assetpath="../bower_components/number-input/"><script>class IntegerInput extends IntegerInputMixin(Polymer.Element){static get is(){return'integer-input'}}window.customElements.define(IntegerInput.is,IntegerInput);</script></dom-module><dom-module id="overlay-element" assetpath="../bower_components/input-picker-pattern/"><template strip-whitespace=""><slot></slot></template><script>class OverlayElement extends Polymer.mixinBehaviors([Polymer.IronOverlayBehavior],Polymer.Element){static get is(){return'overlay-element'}static get observers(){return['_fitIntoChanged(fitInto, positionTarget)']}_fitIntoChanged(a,b){a&&b&&this.fit()}_attachDom(a){return this.shadowRoot||(this.attachShadow({mode:'open',delegatesFocus:!0}),this.shadowRoot.appendChild(a)),this.shadowRoot}}window.customElements.define(OverlayElement.is,OverlayElement);</script></dom-module><dom-module id="input-picker-shared-style" assetpath="../bower_components/input-picker-pattern/"><template><style>:host{font-family:inherit;font-size:inherit;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);-webkit-tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;box-sizing:content-box;--input-picker-color:#dfdfdf;--input-picker-background:#252525;--input-picker-border-radius:0.5em;--input-picker-padding:0.25em;--input-picker-box-shadow:0 3px 4px 0 rgba(0, 0, 0, 0.14), 0 1px 8px 0 rgba(0, 0, 0, 0.12), 0 3px 3px -2px rgba(0, 0, 0, 0.4);--input-icon-border-radius:0.3em;--input-icon-padding:0.5em;--input-icon-height:1em;--input-icon-width:1em;--input-icon-background:transparent;--input-cursor:pointer;--inner-input-border-width:thin;--inner-input-padding:0.1em;--inner-input-border-radius:0.2em;--inner-input-focus-color:#f1f1f1;--inner-input-focus-background:var(--primary-color, #394FE8);--input-disabled:{font-weight:lighter;};}button,
      select{-moz-appearance:none;-webkit-appearance:none;appearance:none;text-align-last:var(--input-align, center);background-image:none;border:var(--inner-input-border-width, thin) solid var(--inner-input-border-color, transparent);}button:focus,
      button:hover,
      select:focus,
      select:hover{border-width:var(--inner-input-border-width, thin);color:var(--inner-input-focus-color, inherit);background-color:var(--inner-input-focus-background, rgba(0,0,0,0.1));outline:none;@apply --input-focus;}select:focus option,
      select option{color:var(--input-color, inherit);background-color:var(--input-background, transparent);outline:none;font-family:inherit;font-size:inherit;font-weight:inherit;}button > *{pointer-events:none;}.icon{color:inherit;border-radius:var(--input-icon-border-radius);padding:var(--input-icon-padding);height:var(--input-icon-height);width:var(--input-icon-width);border:var(--inner-input-border-width, thin) solid transparent;background:var(--input-icon-background);transition-duration:var(--input-transition-duration, 250ms);transition-timing-function:var(--input-transition-timing-function, cubic-bezier(0.6, 1, 0.2, 1));@apply --input-icon;box-sizing:content-box;flex-shrink:0;transition-property:background-color, border-color;}.icon > svg{height:100%;width:100%;fill:currentColor;}.icon:focus{border-color:var(--inner-input-focus-background);background:transparent;outline:none;}:host(:hover) .icon.switch:focus,
      .icon:hover,
      .icon:not(.switch):focus,
      .icon:active,
      .icon[active]{color:var(--inner-input-focus-color);background-color:var(--inner-input-focus-background);border-style:solid;border-color:var(--inner-input-focus-background);@apply --input-focus;outline:none;}#picker,
      #picker > *{color:var(--input-picker-color);background-color:var(--input-picker-background);border-radius:var(--input-picker-border-radius);}#picker{box-shadow:var(--input-picker-box-shadow);@apply --input-picker;display:inline-flex;flex-flow:column nowrap;padding:0;margin:0;}#picker[horizontal]{flex-flow:row nowrap;}#picker > *{padding:var(--input-picker-padding);box-shadow:none !important;box-sizing:border-box;flex-shrink:0;}[hidden]{display:none !important;}</style></template></dom-module><dom-module id="dropdown-tip-style" assetpath="../bower_components/input-picker-pattern/"><template><style>:host{--computed-dropdown-tip-size:var(--dropdown-tip-size, 6px);--computed-dropdown-tip-gap:var(--dropdown-tip-gap, 12px);--dropdown-tip-background:var(--input-picker-background, transparent);}.dropdown:after{content:"";position:absolute;width:0;height:0;border-width:var(--computed-dropdown-tip-size);border-style:solid;border-color:transparent transparent transparent transparent;left:auto;top:auto;bottom:auto;right:auto;}:host([dynamic-align]) .dropdown:after,
      :host([no-tip]) .dropdown:after{display:none !important;}:host([vertical-align]) .dropdown:after,
      :host([vertical-align="auto"]) .dropdown:after,
      :host([vertical-align="top"]) .dropdown:after,
      :host([horizontal-align]) .dropdown:after,
      :host([horizontal-align="auto"]) .dropdown:after,
      :host([horizontal-align="left"]) .dropdown:after{top:0;left:var(--computed-dropdown-tip-gap);border-bottom-color:var(--dropdown-tip-background);transform:translateY(-100%);}:host([horizontal-align="right"][vertical-align]) .dropdown:after{left:auto;right:var(--computed-dropdown-tip-gap);}:host([horizontal-align="center"][vertical-align]) .dropdown:after{left:50%;right:auto;transform:translate(-50%, -100%);}:host([horizontal-align][vertical-align="bottom"]) .dropdown:after{top:auto;bottom:0;border-bottom-color:transparent;border-top-color:var(--dropdown-tip-background);transform:translateY(100%);}:host([horizontal-align][vertical-align="middle"]) .dropdown:after{top:auto;bottom:50%;right:0;left:auto;transform:translate(100%, 50%);border-top-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-left-color:var(--dropdown-tip-background);}:host([horizontal-align="left"][vertical-align="middle"]) .dropdown:after{right:auto;left:0;transform:translate(-100%, 50%);border-left-color:transparent;border-right-color:var(--dropdown-tip-background);}:host([horizontal-align="center"][vertical-align="middle"]) .dropdown:after{border:none;}</style></template></dom-module><script>const OverlayPickerMixin=(a)=>class extends a{static get properties(){return{alwaysOnTop:{type:Boolean},noOverlap:{type:Boolean,value:!1},withBackdrop:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},dynamicAlign:{type:Boolean,reflectToAttribute:!0},autoFitOnAttach:{type:Boolean,value:!1},fitInto:{type:Object},positionTarget:{type:Element},_sizingTarget:{type:Element,readOnly:!0}}}static get pickerTemplate(){return`
          <overlay-element id="overlay"
            always-on-top="[[alwaysOnTop]]"
            with-backdrop="[[withBackdrop]]"
            no-cancel-on-outside-click="[[noCancelOnOutsideClick]]"
            no-cancel-on-esc-key="[[noCancelOnEscKey]]"
            no-overlap="[[noOverlap]]"
            auto-fit-on-attach="[[autoFitOnAttach]]"
            dynamic-align="[[dynamicAlign]]"
            vertical-align="[[verticalAlign]]"
            horizontal-align="[[horizontalAlign]]"
            position-target="[[positionTarget]]"
            sizing-target="[[_sizingTarget]]"
            fit-into="[[fitInto]]"
            opened="{{opened}}">
            ${super.pickerTemplate}
          </overlay-element>
        `}static get styleTemplate(){return`
          ${super.styleTemplate||''}
          #overlay {
            display: -webkit-inline-flex;
            display: -ms-inline-flexbox;
            display: inline-flex;
            flex-shrink: 0;
            padding: 0;
          }
        `}connectedCallback(){super.connectedCallback(),this.positionTarget=this,this._set_sizingTarget(this.$.overlay),this.fit()}fit(){this.$.overlay.fit()}open(){super.open(),this.fit()}notifyResize(){this.$.overlay.notifyResize()}};window.OverlayPickerMixin=OverlayPickerMixin;</script><script>const InputPickerPattern=(a)=>class extends FormElementMixin(a){static get expectedNativeInputType(){return'text'}static get hasNative(){const a=document.createElement('input');return a.setAttribute('type',`${this.expectedNativeInputType}`),this._hasNative=`${this.expectedNativeInputType}`===a.type,this._hasNative}static get template(){return`
          <style include="${this.styleToInclude||''}">
            ${this.styleTemplate}
          </style>
          ${this.hasNative?this.nativeTemplate:this.polyfillTemplate}
        `}static get styleToInclude(){return`${super.styleToInclude||''} input-picker-shared-style dropdown-tip-style`}static get styleTemplate(){return`
          ${super.styleTemplate||''}
          :host {
            display: inline-flex;
            align-items: center;
            position: relative;
          }
          #picker #buttons {
            display: inline-flex;
            position: relative;
            align-self: stretch;
            align-items: flex-end;
            justify-content: flex-end;
            padding-top: 0;
          }
        `}static get nativeTemplate(){return`
          ${this.nativeInputTemplate}
          <div hidden$="[[native]]" style="position:relative;">
            ${this.polyfillTemplate}
          </div>
        `}static get polyfillTemplate(){return`
          <div id="input" on-click="open">
            ${this.inputTemplate}
          </div>
          ${this.pickerTemplate}
        `}static get buttonTemplate(){return`
          ${super.buttonTemplate||''}
          <button class="icon confirm" hidden$="[[disabled]]" on-click="confirm" on-keydown="_stopPropagation">${this._iconConfirmTemplate}</button>
          <button class="icon cancel" on-click="cancel" on-keydown="_stopPropagation" hidden$="[[autoConfirm]]">${this._iconCloseTemplate}</button>
        `}static get _iconCloseTemplate(){return'<svg viewBox="0 0 24 24"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></g></svg>'}static get _iconConfirmTemplate(){return'<svg viewBox="0 0 24 24"><g><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></g></svg>'}static get nativeInputTemplate(){return`
          <input class="native" type="${this.expectedNativeInputType}" hidden$="[[!native]]" disabled$="[[disabled]]" readonly="[[disabled]]" required="[[required]]" value="{{${this.nativeInputBinding||this.expectedNativeInputType}::input}}">
        `}static get inputTemplate(){return`${super.inputTemplate||''}`}static get pickerTemplate(){return`
          <div id="picker" class="dropdown">
            <div id="buttons">
              ${this.buttonTemplate}
            <div>
          </div>`}static get properties(){return{native:{type:Boolean,value:!1},nativeOnMobile:{type:Boolean,observer:'_nativeOnMobileChanged'},mobileUserAgentTestString:{type:String,value:'mM]obi|[tT]ablet|[aA]ndroid',observer:'_nativeOnMobileChanged'},opened:{type:Boolean,reflectToAttribute:!0,value:!1,notify:!0},horizontalAlign:{type:String,reflectToAttribute:!0,value:'auto'},verticalAlign:{type:String,reflectToAttribute:!0,value:'auto'},autoConfirm:{type:Boolean,value:!1},noCancelOnEscKey:{type:Boolean,value:!1},noCancelOnOutsideClick:{type:Boolean,value:!1},keepMultiplePickersOpen:{type:Boolean,value:!1},noTip:{type:Boolean,reflectToAttribute:!0},confirmedValue:{type:Object,notify:!0}}}static get observers(){return['_valueChanged(value, autoConfirm)','_confirmedValueChanged(confirmedValue)','_computeInvalid(required, confirmedValue)']}connectedCallback(){super.connectedCallback(),this._onPickerTransitionEnd=this._onPickerTransitionEnd.bind(this),this._checkKeycode=this._checkKeycode.bind(this),this._stopPropagation=this._stopPropagation.bind(this),this.cancel=this.cancel.bind(this),this._addPickerTransitionEndListener(),this._addKeyListener()}disconnectedCallback(){super.disconnectedCallback(),this._removePickerTransitionEndListener(),this._removeKeyListener()}_addPickerTransitionEndListener(){this.opened||(this.$.picker.style.visibility='hidden',this.$.picker.style.display='hidden'),this.$.picker.addEventListener('transitionend',this._onPickerTransitionEnd,!1)}_removePickerTransitionEndListener(){this.$.picker.removeEventListener('transitionend',this._onPickerTransitionEnd,!1)}_onPickerTransitionEnd(){this.opened||(this.$.picker.style.visibility='hidden',this.$.picker.style.display='hidden')}_addCancelOnClickListener(){this.noCancelOnOutsideClick||(document.addEventListener('click',this.cancel,!1),this.addEventListener('click',this._stopPropagation,!1))}_removeCancelOnClickListener(){document.removeEventListener('click',this.cancel,!1),this.removeEventListener('click',this._stopPropagation,!1)}_addKeepPickersOpenListener(){this.keepMultiplePickersOpen||document.addEventListener('input-picker-opened',this.cancel,!1)}_removeKeepPickersOpenListener(){document.removeEventListener('input-picker-opened',this.cancel,!1)}_stopPropagation(a){a&&a.stopPropagation()}_addKeyListener(){super._addKeyListener&&super._addKeyListener(),this.addEventListener('keydown',this._checkKeycode,!1)}_removeKeyListener(){super._removeKeyListener&&super._removeKeyListener(),this.removeEventListener('keydown',this._checkKeycode,!1)}_nativeOnMobileChanged(){if(void 0!==this.nativeOnMobile){const a=window.navigator.userAgent,b=new RegExp(this.mobileUserAgentTestString,'i').test(a);!0===b&&(!0===this.nativeOnMobile?this.native=!0:!this.native&&!1===this.nativeOnMobile&&(this.native=!1))}}_checkKeycode(a){return a?27!==a.keyCode||this.noCancelOnEscKey?13===a.keyCode||32===a.keyCode?void(this.opened?this.confirm():this.open()):void(super._checkKeycode&&super._checkKeycode(a)):void this.cancel():void 0}open(a){a&&a.stopPropagation&&a.stopPropagation(),this.$.picker.style.display='',this.$.picker.style.visibility='',super.open&&super.open(),this.opened||(this.dispatchEvent(new(CustomEvent||Event)('input-picker-opened',{bubbles:!0,detail:this})),setTimeout(()=>{this._addCancelOnClickListener(),this._addKeepPickersOpenListener()})),this.opened=!0}close(a){a&&a.stopPropagation&&a.stopPropagation(),this._removeCancelOnClickListener(),this._removeKeepPickersOpenListener(),super.close&&super.close(),setTimeout(()=>{this.opened=!1,this.dispatchEvent(new(CustomEvent||Event)('input-picker-closed',{bubbles:!0,detail:this}))})}toggle(a){a&&a.stopPropagation&&a.stopPropagation(),super.toggle&&super.toggle(),this.opened=!this.opened}confirm(a){return a&&a.stopPropagation&&a.stopPropagation(),this.disabled?void this.cancel():void(super.confirm&&super.confirm(),this._setConfirmedValues(),this.close())}cancel(a){a&&a.stopPropagation&&a.stopPropagation(),super.cancel&&super.cancel(),this.autoConfirm&&this.confirm(),this._resetValues(),this.close()}_valueChanged(a){return void 0===a?void this._resetConfirmedValues():void((this.autoConfirm||this._hasNative&&this.native)&&setTimeout(()=>{this._setConfirmedValues()},0))}_confirmedValueChanged(a){return void 0===a?void this._resetConfirmedValues():void(this.value=a)}validate(){return this.value=this.confirmedValue,super.validate()}_setConfirmedValues(){this.setProperties({confirmedValue:this.value})}_resetConfirmedValues(){this.setProperties({value:void 0,confirmedValue:void 0})}_resetValues(){this.setProperties({value:this.confirmedValue})}_defaultChanged(a){super._defaultChanged(a),a&&setTimeout(()=>{void 0!==this.value&&this._setConfirmedValues()},0)}};window.InputPickerPattern=InputPickerPattern;</script><dom-module id="dropdown-style" assetpath="../bower_components/input-picker-pattern/"><template><style>.dropdown{margin:0;padding:0;position:absolute;opacity:0;transition-duration:var(--input-transition-duration, 250ms);transition-timing-function:var(--input-transition-timing-function, cubic-bezier(0.6, 1, 0.2, 1));transition-property:opacity;pointer-events:none;z-index:1;}:host([opened]) .dropdown{visibility:visible;opacity:1;pointer-events:all;}:host([vertical-align]) .dropdown,
      :host([vertical-align="auto"]) .dropdown,
      :host([vertical-align="top"]) .dropdown{top:auto;bottom:0;}:host([vertical-align="bottom"]) .dropdown{top:0;bottom:auto;}:host([vertical-align="middle"]) .dropdown{top:auto;bottom:50%;}:host([horizontal-align]) .dropdown,
      :host([horizontal-align="auto"]) .dropdown,
      :host([horizontal-align="left"]) .dropdown{left:0;right:auto;}:host([horizontal-align="right"]) .dropdown{left:auto;right:0;}:host([horizontal-align][vertical-align]) .dropdown{transform:translateY(100%);}:host([horizontal-align="center"][vertical-align]) .dropdown{left:50%;right:auto;transform:translate(-50%, 100%);}:host([horizontal-align][vertical-align="bottom"]) .dropdown{transform:translateY(-100%);}:host([horizontal-align="center"][vertical-align="bottom"]) .dropdown{transform:translate(-50%, -100%);}:host([horizontal-align][vertical-align="middle"]) .dropdown{left:0;right:auto;transform:translate(-100%, 50%);}:host([horizontal-align="left"][vertical-align="middle"]) .dropdown{left:auto;right:0;transform:translate(100%, 50%);}:host([horizontal-align="center"][vertical-align="middle"]) .dropdown{position:fixed;top:50%;left:50%;bottom:auto;right:auto;transform:translate(-50%, -50%);}</style></template></dom-module><script>const TextInputMixin=(a)=>class extends InputPattern(a){static get styleTemplate(){return`
          ${super.styleTemplate||''}
          #minsize,
          #size,
          #input {
            @apply --text-input;
            margin: 0;
            min-width: 1ch;
          }
          :host(:focus) #input,
          :host(:hover) #input,
          #input:hover,
          #input:focus {
            @apply --text-input-focus;
          }
          :host([invalid]) #input {
            @apply --text-input-invalid;
          }
          :host([disabled]) #input {
            @apply --text-input-disabled;
          }
          #input::-webkit-input-placeholder,
          #input::placeholder {
            @apply --text-input-placeholder;
          }
        `}static get inputTemplate(){return`
          <input id="input"
            type="[[type]]"
            value="{{input::input}}"
            placeholder="[[placeholder]]"
            pattern="[[pattern]]"
            disabled$="[[disabled]]"
            required$="[[required]]"
            maxlength$="[[maxlength]]"
            title$="[[title]]"
            autocomplete$="[[_computeAutocompleteAttribute(autocomplete)]]"
            spellcheck$="[[_computeSpellcheckAttribute(spellcheck)]]">
        `}static get properties(){return{pattern:{type:String,notify:!0,observer:'_patternChanged'},autocomplete:{type:Boolean,value:!1},spellcheck:{type:Boolean,value:!1},maxlength:{type:Number},propertyForValue:{type:String,readOnly:!0,value:'input'},value:{notify:!0,observer:'_valueChanged'}}}static get observers(){return['_computeInvalid(required, input)']}_computeInvalid(a,b){this.invalid=!this._validate(a,b||'')}_validate(a,b){return this._validationRegExp?null!==this._validationRegExp.exec(b)&&(!a||b):!a||b}_patternChanged(a){return a?void(this._validationRegExp=new RegExp(a),this._computeInvalid(this.required,this.value||'')):void(this._validationRegExp=null)}_inputChanged(a){return void 0===a?void this._debouncedComputeWidth():void(this._validationRegExp&&null===this._validationRegExp.exec(a)||(this.value=a))}_valueChanged(a,b){return void 0===a?void this._debouncedComputeWidth():void(this._validationRegExp&&null===this._validationRegExp.exec(a)?void 0!==b&&null!==this._validationRegExp.exec(b)&&(this.value=b,this._debouncedComputeWidth()):(this.input=a,this._debouncedComputeWidth()))}_computeSpellcheckAttribute(a){return a?'true':'false'}_computeAutocompleteAttribute(a){return a?'on':'off'}_checkInput(a){return this.invalid?void this._updateValue(a):void(this._inputChanged(this.input||''),this._debouncedComputeWidth(),a&&a.stopPropagation&&a.stopPropagation())}_reflectPropertyToValue(a){this.invalid||(this.value=a)}};window.TextInputMixin=TextInputMixin;</script><dom-module id="text-input" assetpath="../bower_components/text-input/"><script>class TextInput extends TextInputMixin(Polymer.Element){static get is(){return'text-input'}}window.customElements.define(TextInput.is,TextInput);</script></dom-module><script>const ColorMixin=(a)=>{var b=Math.pow,c=Math.round;return class extends a{constructor(){super(),this._validFormats=['rgb','hex','hsl','auto']}static get properties(){return{hex:{type:String,notify:!0,observer:'_hexChanged'},r:{type:Number,notify:!0},g:{type:Number,notify:!0},b:{type:Number,notify:!0},h:{type:Number,notify:!0},s:{type:Number,notify:!0},l:{type:Number,notify:!0},alpha:{type:Number,notify:!0,value:1,observer:'_alphaChanged'},alphaMode:{type:Boolean,notify:!0,observer:'_alphaModeChanged'},hslPrecision:{type:Number,value:0},format:{type:String,notify:!0,value:'auto',observer:'_formatChanged'},colorString:{type:String,notify:!0,observer:'_colorStringChanged'},_validateHex:{type:RegExp,readOnly:!0,value:/^\s*(?:(#[A-Fa-f0-9]{6})([A-Fa-f0-9]{2})?|(#[A-Fa-f0-9]{3})([A-Fa-f0-9])?)\s*$/},_validateRgb:{type:RegExp,readOnly:!0,value:/^\s*rgb(a)?\(\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*(-?\d+)(?:\s*,\s*(-?\d*(?:\.(?:\d*)?)?))?\s*\)\s*$/},_validateHsl:{type:RegExp,readOnly:!0,value:/^\s*hsl(a)?\(\s*(-?\d+(?:\.\d*)?)\s*,\s*(-?\d*(?:\.(?:\d*)?)?%?)\s*,\s*(-?\d*(?:\.(?:\d*)?)?%?)(?:\s*,\s*(-?\d*(?:\.(?:\d*)?)?))?\s*\)\s*$/},_validatePercent:{type:RegExp,readOnly:!0,value:/(-?\d*(?:\.(?:\d*)?)?)%/}}}static get observers(){return['_rgbChanged(r, g, b)','_hslChanged(h, s, l)']}connectedCallback(){if(super.connectedCallback(),this._createTestCanvas(),!(isNaN(this.r)&&isNaN(this.g)&&isNaN(this.b))){const a=this.randomRgb();this.setProperties({r:isNaN(this.r)?a.r:this.r,g:isNaN(this.g)?a.g:this.g,b:isNaN(this.b)?a.b:this.b})}else if(!(isNaN(this.h)&&isNaN(this.s)&&isNaN(this.l))){const a=this.randomHsl();this.setProperties({h:isNaN(this.h)?a.h:this.h,s:isNaN(this.s)?a.s:this.s,l:isNaN(this.l)?a.l:this.l})}}_createTestCanvas(){const a=document.createElement('canvas');a.width=1,a.height=1,a.style.visibility='hidden',a.style.pointerEvents='none',a.style.position='fixed',this.appendChild(a),this._testCanvasContext=a.getContext('2d');const b=this._testColor('#ff000080');this._hexAlphaSupported=255===b.r&&0===b.g&&0===b.b&&0.5===b.alpha}_testColor(a){this._testCanvasContext||this._createTestCanvas(),this._testCanvasContext.clearRect(0,0,1,1),this._testCanvasContext.fillStyle=a||'rgba(0,0,0,1)',this._testCanvasContext.fillRect(0,0,1,1);const b=this._testCanvasContext.getImageData(0,0,1,1);return{r:b.data[0],g:b.data[1],b:b.data[2],alpha:this._hexToAlpha(b.data[3].toString(16),2),alphaMode:255!==b.data[3]}}_alphaModeChanged(a){!0!==a&&(this.alpha=1)}_formatChanged(a,b){return void 0===a?void 0:-1===this._validFormats.indexOf(a)?b&&-1!==this._validFormats.indexOf(b)?void(this.format=b):void(this.format='auto'):void this._debouncedSetValue()}_colorStringChanged(a){if(void 0===a)return void this._resetColor();let b,d,e={};if(b=a.match(this._validateHsl)){b[1]===void 0?(e.alpha=1,e.alphaMode=!1):(e.alpha=this._normalizedClamp(+b[5]),e.alphaMode=!0),e.h=this._mathMod(+b[2],360);let a;e.s=(a=b[3].match(this._validatePercent))?this._normalizedClamp(0.01*+a[1]):this._normalizedClamp(+b[3]),e.l=(a=b[4].match(this._validatePercent))?this._normalizedClamp(0.01*+a[1]):this._normalizedClamp(+b[4]),'hsl'===this.format?(e.h=+e.h.toFixed(this.hslPrecision||0),e.s=+e.s.toFixed((this.hslPrecision||0)+2),e.l=+e.l.toFixed((this.hslPrecision||0)+2)):(d='hsl',e.alpha=+e.alpha.toFixed(2))}else(b=a.match(this._validateRgb))?(void 0===b[1]?(e.alpha=1,e.alphaMode=!1):(e.alpha=this._normalizedClamp(+b[5]),e.alphaMode=!0),e.r=this._mathMod(+b[2],256),e.g=this._mathMod(+b[3],256),e.b=this._mathMod(+b[4],256),'rgb'===this.format?(e.r=c(e.r),e.g=c(e.g),e.b=c(e.b)):(d='rgb',e.alpha=+e.alpha.toFixed(2))):(b=a.match(this._validateHex))?(void 0===b[1]?void 0!==b[3]&&(e.hex=b[3],void 0===b[4]?(e.alpha=1,e.alphaMode=!1):(e.alpha=this._hexToAlpha(b[4],1),e.alphaMode=!0)):(e.hex=b[1],void 0===b[2]?(e.alpha=1,e.alphaMode=!1):(e.alpha=this._hexToAlpha(b[2],2),e.alphaMode=!0)),'hex'!==this.format&&(d='hex')):(e=this._testColor(a),d='auto');d&&this.format!==d&&(e.format=d),this.setProperties(e)}_debouncedSetValue(){this._activeSetValueJob&&(clearTimeout(this._activeSetValueJob),this._activeSetValueJob=null),this._activeSetValueJob=setTimeout(this._setValue.bind(this,!1),0)}_setValue(){switch(this.format){case'hsl':isNaN(this.h)||isNaN(this.s)||isNaN(this.l)||(!0===this.alphaMode?this.colorString=`hsla(${this.h.toFixed(this.hslPrecision||0)}, ${(100*this.s).toFixed(this.hslPrecision||0)}%, ${(100*this.l).toFixed(this.hslPrecision||0)}%, ${this.alpha===void 0?1:this.alpha})`:this.colorString=`hsl(${this.h.toFixed(this.hslPrecision||0)}, ${(100*this.s).toFixed(this.hslPrecision||0)}%, ${(100*this.l).toFixed(this.hslPrecision||0)}%)`);break;case'auto':if(!this.alphaMode){const a=this._testColor(this.colorString);if(a.r===this.r&&a.b===this.b&&a.g===this.g)break}case'hex':if(this.hex!==void 0)if(!0!==this.alphaMode){this.colorString=this.hex;break}else if(this._hexAlphaSupported){this.colorString=`${this.hex}${this._alphaToHex(this.alpha,4===this.hex.length?1:2)}`;break}case'rgb':default:isNaN(this.r)||isNaN(this.g)||isNaN(this.b)||(!0===this.alphaMode?this.colorString=`rgba(${c(this.r)}, ${c(this.g)}, ${c(this.b)}, ${this.alpha===void 0?1:this.alpha})`:this.colorString=`rgb(${c(this.r)}, ${c(this.g)}, ${c(this.b)})`);}}_alphaChanged(a,b){return isNaN(a)?void(this.alpha=1):1<a?void 0===b?void(this.alpha=1):void(this.alpha=b):0>a?void 0===b?void(this.alpha=0):void(this.alpha=b):void(1!==a&&(this.alphaMode=!0),this._debouncedSetValue())}_hexChanged(a){if(void 0===a)return void this._resetColor();let b={};const d=this.hexToRgb(a);d.r!==c(this.r)&&(b.r=d.r),d.g!==c(this.g)&&(b.g=d.g),d.b!==c(this.b)&&(b.b=d.b),this.setProperties(b),this._debouncedSetValue()}_rgbChanged(a,d,e){if(isNaN(a)&&isNaN(d)&&isNaN(e))return void this._resetColor();if(!(isNaN(this.r)||isNaN(this.g)||isNaN(this.b))){if(a=this._mathMod('hsl'===this.format?+a:c(a),256),d=this._mathMod('hsl'===this.format?+d:c(d),256),e=this._mathMod('hsl'===this.format?+e:c(e),256),a!==this.r||d!==this.g||e!==this.b)return void this.setProperties({r:a,g:d,b:e});let f={},h=this.rgbToHsl(a,d,e);'hsl'===this.format&&(void 0!==h.h&&(h.h=+h.h.toFixed(this.hslPrecision||0)),h.s=+h.s.toFixed((this.hslPrecision||0)+2),h.l=+h.l.toFixed((this.hslPrecision||0)+2)),void 0!==h.h&&h.h!==this.h&&(f.h=h.h),h.s!==this.s&&(f.s=h.s),h.l!==this.l&&(f.l=h.l);const i=this.rgbToHex(a,d,e);i!==this.hex&&(f.hex=i),this.setProperties(f),this._debouncedSetValue()}}_hslChanged(a,b,d){if(isNaN(a)&&isNaN(b)&&isNaN(d))return void this._resetColor();if(!(isNaN(this.h)||isNaN(this.s)||isNaN(this.l))){if(a=this._mathMod('hsl'===this.format?+a.toFixed(this.hslPrecision||0):+a,360),b=this._normalizedClamp('hsl'===this.format?+b.toFixed((this.hslPrecision||0)+2):+b),d=this._normalizedClamp('hsl'===this.format?+d.toFixed((this.hslPrecision||0)+2):+d),a!==this.h||b!==this.s||d!==this.l)return void this.setProperties({h:a,s:b,l:d});let e={};const f=this.hslToRgb(a,b,d);'hsl'!==this.format&&(f.r=c(f.r),f.g=c(f.g),f.b=c(f.b)),f.r!==this.r&&(e.r=f.r),f.g!==this.g&&(e.g=f.g),f.b!==this.b&&(e.b=f.b),this.setProperties(e),this._debouncedSetValue()}}random(){this.setProperties(this.randomRgb())}randomRgb(){return{r:c(255*Math.random()),g:c(255*Math.random()),b:c(255*Math.random())}}randomHsl(){return{h:c(359*Math.random()),s:Math.random(),l:Math.random()}}hexToRgb(a){if(void 0!==a)return a=a.replace(/[#\s]/g,''),3===a.length&&(a=a.replace(/(.)(.)(.)/,'$1$1$2$2$3$3')),{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16)}}rgbToHex(a,d,e){return isNaN(a)||isNaN(d)||isNaN(e)?void 0:'#'+this._componentToHex(c(a))+this._componentToHex(c(d))+this._componentToHex(c(e))}_componentToHex(a){const b=a.toString(16);return 1===b.length?`0${b}`:b.slice(0,2)}_alphaToHex(a,d){const e=b(16,d)-1;let f=c(a*e).toString(16);for(;d>f.length;)f='0'+f;return f}_hexToAlpha(a,d){const e=b(16,d)-1;return c(100*(parseInt(a,16)/e))/100}hslToRgb(a,b,c){if(!(isNaN(a)||isNaN(b)||isNaN(c))){const d=255*(0.5>=c?c*(b+1):c+b-c*b),e=255*(2*c)-d;return{r:this._mathMod(this.hueToComponent(e,d,a+120),256),g:this._mathMod(this.hueToComponent(e,d,a),256),b:this._mathMod(this.hueToComponent(e,d,a-120),256)}}}hueToComponent(a,b,c){return 0>c&&(c+=360),360<=c&&(c-=360),60>c?(b-a)*c/60+a:180>c?b:240>c?(b-a)*(240-c)/60+a:a}rgbToHsl(a,c,d){if(isNaN(a)||isNaN(c)||isNaN(d))return;const b=Math.max(a,c,d),e=Math.min(a,c,d),f=(b+e)/510,g=b-e;if(0===g)return{s:0,l:this._normalizedClamp(f)};const i=g/(255-Math.abs(b+e-255));let j;return b===a?j=60*(c-d)/g:b===c?j=60*(d-a)/g+120:b===d?j=60*(a-c)/g+240:void 0,{h:this._mathMod(j,360),s:this._normalizedClamp(i),l:this._normalizedClamp(f)}}_resetColor(){this.setProperties({colorString:void 0,r:void 0,g:void 0,b:void 0,h:void 0,s:void 0,l:void 0,hex:void 0,alpha:1})}_mathMod(a,b){return(a%b+b)%b}_normalizedClamp(a){return 1<a?1:0>a?0:a}}};window.ColorMixin=ColorMixin;</script><script>const ColorBadgePattern=(a)=>class extends ColorMixin(a){static get styleToInclude(){return'input-shared-style'}static get styleTemplate(){return`
        :host {
          --computed-transparency-pattern-position: calc(var(--transparency-pattern-size, 12px) / 2);
        }
        :host(:not([hide-transparency-pattern])) .transparency:before {
          background-image: var(--transparency-pattern, linear-gradient(45deg, rgba(0,0,0,0.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.1) 75%, rgba(0,0,0,0.1)), linear-gradient(45deg, rgba(0,0,0,0.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.1) 75%, rgba(0,0,0,0.1)));
          background-size: var(--transparency-pattern-size, 12px) var(--transparency-pattern-size, 12px);
          background-position: 0 0, var(--computed-transparency-pattern-position) var(--computed-transparency-pattern-position);
          background-repeat: repeat;
          -webkit-background-clip: padding-box;
          background-clip: padding-box;
          background-repeat: repeat;
          border-radius: var(--color-badge-radius, 6px);
          content: '';
          pointer-events: none;
          position: absolute;
          top: 0; right: 0; bottom: 0; left: 0;
        }
        .badge {
          position: relative;
          border: none;
          box-sizing: content-box;
          box-shadow: var(--color-badge-shadow, 0 1px 4px 1px rgba(0,0,0,.1));
          border-radius: var(--color-badge-radius, 6px);
          background-color: #fff;
          height: var(--color-badge-height, 32px);
          width: var(--color-badge-width, 60px);
        }
        .badge > canvas {
          border-radius: inherit;
          position: absolute;
          left: 0;
          top: 0;
        }
        .badge > .slot {
          position: absolute;
          top: 50%; left: 50%;
          transform: translate(-50%, -50%);
          @apply --color-badge-slot;
        }
        ${super.styleTemplate||''}
      `}static get colorBadgeTemplate(){return`
        <div id="colorBadge" class="transparency badge">
          <canvas id="badge" width$="[[_badgewidth]]" height$="[[_badgeheight]]"></canvas>
          ${this.colorBadgeSlotTemplate||''}
        </div>
      `}static get colorBadgeSlotTemplate(){return`
        <div class="slot"><slot></slot></div>
      `}static get properties(){return{hideTransparencyPattern:{type:Boolean,reflectToAttribute:!0},noRandomColorOnClick:{type:Boolean,value:!1,observer:'_noRandomColorOnClickChanged'},_badgewidth:{type:Number},_badgeheight:{type:Number}}}ready(){super.ready(),this._resizeBadge(),this._badgecontext=this.$.badge&&this.$.badge.getContext('2d'),this._badgecontext&&this._createMethodObserver('_drawColorBadge(colorString,_badgewidth,_badgeheight)',!0)}connectedCallback(){super.connectedCallback(),this.redraw()}redraw(){this._resizeBadge(),this._drawColorBadge(this.colorString,this._badgewidth,this._badgeheight)}_noRandomColorOnClickChanged(a){a?this._removeClickListenerForBadge():(this.random=this.random.bind(this),this._addClickListenerForBadge())}_addClickListenerForBadge(){this.$.badge&&(this.$.badge.addEventListener('click',this.random,!1),this.$.badge.addEventListener('contextmenu',this.random,!1))}_removeClickListenerForBadge(){this.$.badge&&(this.$.badge.removeEventListener('click',this.random,!1),this.$.badge.removeEventListener('contextmenu',this.random,!1))}random(a){a&&a.preventDefault&&(a.preventDefault(),a.stopPropagation()),super.random()}_colorStringChanged(a){super._colorStringChanged(a),this._resizeBadge()}_drawBadge(a,b,c,d){void 0===a||void 0===c||void 0===d||(a.clearRect(0,0,c,d),a.fillStyle=b||'rgba(0,0,0,0)',a.fillRect(0,0,c,d))}_drawColorBadge(a,b,c){this._drawBadge(this._badgecontext,a,b,c)}_resizeBadge(){var a=Math.ceil;if(this.$.colorBadge){const b=this.$.colorBadge.getBoundingClientRect();this.setProperties({_badgewidth:a(b.width)||28,_badgeheight:a(b.height)||28})}}};window.ColorBadgePattern=ColorBadgePattern;</script><dom-module id="color-badge" assetpath="../bower_components/color-input/"><script>class ColorBadge extends ColorBadgePattern(Polymer.Element){static get is(){return'color-badge'}static get template(){return`
          <style include="${this.styleToInclude}">
            ${this.styleTemplate}
          </style>
          ${this.colorBadgeTemplate}
        `}}window.customElements.define(ColorBadge.is,ColorBadge);</script></dom-module><script>const ColorTextInputPattern=(a)=>class extends ColorBadgePattern(FormElementMixin(a)){static get styleToInclude(){return'input-shared-style'}static get styleTemplate(){return`
        ${super.styleTemplate||''}
        .badge {
          border-radius: var(--input-border-radius, var(--color-badge-radius, 3px));
          height: var(--color-badge-height, 28px);
          width: var(--color-badge-width, 28px);
          box-shadow: var(--color-badge-shadow, none);
        }
        #input {
          display: inline-flex;
          flex-direction: row;
          align-items: center;
        }
        text-input {
          margin-left: 0.4em;
          align-self: stretch;
        }
      `}static get inputTemplate(){return`
        ${this.textInputTemplate}
        ${this.resetButtonTemplate}
      `}static get textInputTemplate(){return`
        <text-input pattern="[[_computeFormatPattern(format)]]" required="[[required]]" value="{{colorString}}" auto-resize placeholder="#000" minlength="7" title="[[title]]"></text-input>
      `}static get resetButtonTemplate(){return`
        <button class="icon reset" invisible$="[[!_valueIsSet]]" hidden$="[[disabled]]" on-click="_resetColor"><svg viewBox="0 0 24 24"><g><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></g></svg></button>
      `}static get properties(){return{propertyForValue:{type:String,value:'colorString'}}}_computeFormatPattern(a){return'hsl'===a?this._validateHsl.toString().slice(1,-1):'rgb'===a?this._validateRgb.toString().slice(2,-2):'hex'===a?this._validateHex.toString().slice(2,-2):'[\\w().,#\\s]*'}};window.ColorTextInputPattern=ColorTextInputPattern;</script><dom-module id="color-text-input" assetpath="../bower_components/color-input/"><script>class ColorTextInput extends ColorTextInputPattern(Polymer.Element){static get is(){return'color-text-input'}static get template(){return`
          <style include="${this.styleToInclude}">
            ${this.styleTemplate}
          </style>
          <div id="input">
            ${this.colorBadgeTemplate}
            ${this.inputTemplate}
          </div>
        `}}window.customElements.define(ColorTextInput.is,ColorTextInput);</script></dom-module><script>const ColorInputPattern=(a)=>class extends ColorTextInputPattern(a){static get styleTemplate(){return`
        ${super.styleTemplate||''}
        :host {
          display: inline-flex;
          align-item: center;
        }
        :host(:focus) {
          outline: none;
        }
        number-input,
        integer-input {
          align-self: stretch;
        }
        label {
          margin-left: 0.4em;
        }
        number-input,
        integer-input {
          margin-left: 0.2em;
        }
      `}static get inputTemplate(){return`
        <template is="dom-if" if="[[!_equalsOr(format, 'rgb', 'hsl')]]" restamp>
          ${super.textInputTemplate}
        </template>
        <template is="dom-if" if="[[_equals(format, 'rgb')]]" restamp>
          <label>r:</label>
          <integer-input required="[[required]]" title="red" no-auto-width auto-resize placeholder="0" value-as-number="{{r}}" min="0" max="255"></integer-input>
          <label>g:</label>
          <integer-input required="[[required]]" title="green" no-auto-width auto-resize placeholder="0" value-as-number="{{g}}" min="0" max="255"></integer-input>
          <label>b:</label>
          <integer-input required="[[required]]" title="blue" no-auto-width auto-resize placeholder="0" value-as-number="{{b}}" min="0" max="255"></integer-input>
          <label>a:</label>
          <number-input required="[[required]]" title="alpha" value-as-number="{{alpha}}" default="1" min="0" max="1" saturate no-clamp placeholder="1.00" start-at="1" step="0.01"></number-input>
        </template>
        <template is="dom-if" if="[[_equals(format, 'hsl')]]" restamp>
          <label>h:</label>
          <number-input required="[[required]]" title="hue" no-auto-width auto-resize placeholder="0" min="0" max="359" step="[[_hslStep]]" value-as-number="{{h}}"></number-input>
          <label>s:</label>
          <number-input required="[[required]]" title="saturation" no-auto-width auto-resize placeholder="100\u202F%" number-style="percent" saturate min="0" max="1" step="[[_hslPercentStep]]" start-at="1" value-as-number="{{s}}"></number-input>
          <label>l:</label>
          <number-input required="[[required]]" title="lightness" no-auto-width auto-resize placeholder="100\u202F%" number-style="percent" saturate min="0" max="1" step="[[_hslPercentStep]]" start-at="0.5" value-as-number="{{l}}"></number-input>
          <label>a:</label>
          <number-input required="[[required]]" title="alpha" value-as-number="{{alpha}}" default="1" min="0" max="1" saturate no-clamp step="0.01" placeholder="1.00" start-at="1"></number-input>
        </template>
        ${super.resetButtonTemplate}
      `}static get properties(){return{_hexPatternString:{type:String,computed:'_computeHexPatternString(_validateHex)'},_hslStep:{type:Number,computed:'_computeHslStep(hslPrecision)'},_hslPercentStep:{type:Number,computed:'_computeHslPercentStep(hslPrecision)'}}}_equals(c,a){return c===a}_equalsOr(d,a,b){return d===a||d===b}_computeHexPatternString(a){return a.toString().slice(1,-1)}_computeHslStep(a){return Math.pow(10,-a)}_computeHslPercentStep(a){return Math.pow(10,-(a+2))}};window.ColorInputPattern=ColorInputPattern;</script><dom-module id="color-input" assetpath="../bower_components/color-input/"><script>class ColorInput extends ColorInputPattern(FormElementMixin(Polymer.Element)){static get is(){return'color-input'}static get template(){return`
          <style include="${this.styleToInclude}">
            ${this.styleTemplate}
          </style>
          <div id="input">
            ${this.colorBadgeTemplate}
            ${this.inputTemplate}
          </div>
        `}}window.customElements.define(ColorInput.is,ColorInput);</script></dom-module><script>const ColorElementPattern=(a)=>class extends a{static get styleTemplate(){return`
        ${super.styleTemplate||''}
        #colorElement {
          color: var(--input-picker-color);
          background-color: var(--input-picker-background);
          border-radius: var(--color-element-badge-radius, var(--input-picker-border-radius, 6px));
          padding: var(--input-picker-padding);
          @apply --input-picker;
          display: -ms-inline-flexbox;
          display: -webkit-inline-flex;
          display: inline-flex;
          flex-flow: column nowrap;
          position: relative;
          @apply --color-element;
        }
        #colorElement .selectors {
          display: inline-flex;
          flex-flow: row nowrap;
          align-items: stretch;
          position: relative;
          justify-content: space-between;
          box-sizing: content-box;
          border-top-left-radius: inherit;
          border-top-right-radius: inherit;
          border-bottom-left-radius: 0;
          border-bottom-right-radius: 0;
        }
        #colorElement .selectors > * {
          position: relative;
          height: var(--color-element-height, 184px);
          background: transparent;
          cursor: pointer;
          box-sizing: content-box;
          border-radius: 0;
          flex-shrink: 0;
        }
        #colorElement .selectors > :first-child {
          border-top-left-radius: inherit;
        }
        #colorElement .selectors > :last-child {
          border-top-right-radius: inherit;
        }
        #colorElement canvas {
          pointer-events: all;
          position: absolute;
          border-radius: inherit;
          left: 0;
          top: 0;
        }
        #colorElement .selectors > :not(:first-child) {
          margin-left: var(--input-picker-padding);
        }
        #colorElement .badge {
          margin: 0;
          background: transparent;
          box-shadow: none;
        }
        #colorElement #saturationBadge {
          cursor: crosshair;
          min-width: var(--color-element-width, 184px);
          flex: 1;
          right: 0;
          left: auto;
        }
        #colorElement #hueBadge,
        #colorElement #alphaBadge {
          width: var(--color-slider-width, 16px);
        }
        #colorElement #alphaBadge {
          background: #fff;
        }
        #colorElement .selector {
          position: absolute;
          top: 0; left: 0;
          pointer-events: none;
          background: transparent;
          border: thin solid #fff;
          z-index: 1;
          mix-blend-mode: var(--color-selector-mix-blend-mode, exclusion);
          transition-property: background-color;
          transition-duration: var(--input-transition-duration, 250ms);
          transition-timing-function: var(--input-transition-timing-function, cubic-bezier(0.6, 1, 0.2, 1));
        }
        #colorElement .selector:focus {
          border-color: #fff;
          background: rgba(255,255,255,0.33);
        }
        #colorElement .slider {
          padding: var(--color-slider-padding, 2px);
          width: 100%;
          border-radius: 2px;
          transform: translateY(-50%);
        }
        #colorElement .pin {
          padding: var(--color-pin-radius, 3px);
          border-radius: 50%;
          transform: translate(-50%, -50%);
          transition-property: opacity, background-color;
        }
        #colorElement canvas.active:hover ~ .pin {
          opacity: 0;
        }
        #colorElement #alpha.active,
        #colorElement #hue.active {
          cursor: none;
        }
        @media (pointer:coarse) {
          canvas.active:hover ~ .pin {
            opacity: 1;
          }
        }
        #colorElement #buttons {
          display: inline-flex;
          flex-direction: row;
          position: relative;
          align-items: flex-end;
          align-self: stretch;
          flex: 0 0 auto;
          margin-top: var(--input-picker-padding);
        }
        #colorElement #buttons #formats {
          align-self: stretch;
        }
      `}static get colorElementTemplate(){return`
        <div id="colorElement">
          <div class="selectors">
            <div id="saturationBadge" class="badge">
              <canvas id="saturation" prop="color" width$="[[_saturationwidth]]" height$="[[_saturationheight]]" on-dblclick="_onDblClick" on-track="_onTrack" on-down="_onDown" on-up="_onUp"></canvas>
              <button id="colorPin" prop="color" hidden$=[[!_valueIsSet]] class="selector pin" on-focus="_onFocusButton" on-keydown="_onKeyDown"></button>
            </div>
            <div id="alphaBadge" class="transparency">
              <canvas id="alpha" prop="alpha" width$="[[_sliderwidth]]" height$="[[_saturationheight]]" on-track="_onTrack" on-down="_onDown" on-tap="_onUp"></canvas>
              <button id="alphaSlider" class="selector slider" prop="alpha" on-focus="_onFocusButton" on-keydown="_onKeyDown"></button>
            </div>
            <div id="hueBadge">
              <canvas id="hue" prop="hue" width$="[[_sliderwidth]]" height$="[[_saturationheight]]" on-track="_onTrack" on-down="_onDown" on-tap="_onUp"></canvas>
              <button id="hueSlider" class="selector slider" prop="hue" on-focus="_onFocusButton" on-keydown="_onKeyDown"></button>
            </div>
          </div>
          <div id="buttons">
            ${this.buttonTemplate}
          <div>
        </div>
      `}static get buttonTemplate(){return`
        <button id="random" class="icon random" on-click="random" on-keydown="_stopPropagation"><svg viewBox="0 0 24 24"><g><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></g></svg></button>
        ${super.buttonTemplate||''}
      `}static get properties(){return{_sliderwidth:{type:Number},_saturationheight:{type:Number},_saturationwidth:{type:Number}}}ready(){super.ready(),this._alphacontext=this.$.alpha.getContext('2d'),this._saturationcontext=this.$.saturation.getContext('2d'),this._huecontext=this.$.hue.getContext('2d'),this._huecontext&&this._createMethodObserver('_drawHue(_saturationheight)',!0),this._alphacontext&&this._saturationcontext&&(this._createMethodObserver('_drawAlphaAndSaturation(h, _saturationheight)',!0),this._createMethodObserver('_drawAlphaSlider(alpha, _saturationheight)',!0),this._createMethodObserver('_drawColorPin(s, l, _saturationwidth, _saturationheight)',!0))}random(){super.random(),this.setProperties({alpha:1,alphaMode:!1})}redraw(){super.redraw(),this._drawAlphaAndSaturation(this.h,this._saturationheight),this._drawAlphaSlider(this.alpha,this._saturationheight),this._drawColorPin(this.s,this.l,this._saturationwidth,this._saturationheight)}_resizeBadge(){var a=Math.ceil;let b={};if(this.$.colorBadge){const c=this.$.colorBadge.getBoundingClientRect();b._badgewidth=a(c.width)||28,b._badgeheight=a(c.height)||28}if(this.$.alphaBadge&&this.$.saturationBadge){const c=Math.round(this.$.alphaBadge.getBoundingClientRect().width),d=this.$.saturationBadge.getBoundingClientRect();b._saturationwidth=a(d.width)||184,b._saturationheight=a(d.height)||184,b._sliderwidth=c||16}this.setProperties(b)}_drawSelector(a,b,c){var d=Math.round;void 0===a||(a.style.left=`${d(b||0)}px`,a.style.top=`${d(c||0)}px`)}_drawAlphaSlider(a,b){this._drawSelector(this.$.alphaSlider,0,(1-(a||1))*b)}_drawColorPin(a,b,d,e){const f=a*(.5>b?b:1-b);this._drawSelector(this.$.colorPin,d*(2*f/(b+f)||0),e*(1-(b+f)))}_drawAlphaAndSaturation(a,b){var c=Math.round;if(void 0===b)return;const d=this._sliderwidth,e=this._saturationwidth;this._alphacontext.clearRect(0,0,d,b);let f=this._alphacontext.createLinearGradient(0,0,1,b);f.addColorStop(0,`hsla(${c(a||0)}, 100%, 50%, 1)`),f.addColorStop(1,'rgba(0,0,0,0)'),this._alphacontext.fillStyle=f,this._alphacontext.fillRect(0,0,d,b),f=this._saturationcontext.createLinearGradient(0,0,e,1),f.addColorStop(0,'hsl(0,100%,100%)'),f.addColorStop(1,`hsl(${c(this.h||0)},100%,50%)`),this._saturationcontext.fillStyle=f,this._saturationcontext.fillRect(0,0,e,b),f=this._saturationcontext.createLinearGradient(0,0,1,b),f.addColorStop(0,'rgba(0,0,0,0)'),f.addColorStop(1,'rgba(0,0,0,1)'),this._saturationcontext.fillStyle=f,this._saturationcontext.fillRect(0,0,e,b),this._drawSelector(this.$.hueSlider,0,b*(a||0)/360)}_drawHue(a){if(void 0!==a){const b=this._sliderwidth;this._huecontext.clearRect(0,0,b,a);let c=this._huecontext.createLinearGradient(0,0,1,a);for(let a=0;360>a;a+=30)c.addColorStop(a/360,`hsl(${a},100%,50%)`);c.addColorStop(1,`hsl(0,100%,50%)`),this._huecontext.fillStyle=c,this._huecontext.fillRect(0,0,b,a)}}_checkSelectorForProperty(a,b){if(a.target.hasAttribute('prop'))return a.target.getAttribute('prop');if(b&&this.$[b]&&this.$[b].hasAttribute('prop'))return this.$[b].getAttribute('prop');if(a.path)for(let b=0;b<a.path.length;b++)if(a.path[b]&&a.path[b].hasAttribute&&a.path[b].hasAttribute('prop'))return a.path[b].getAttribute('prop')}_getActiveCanvas(){switch(this._activeProperty){case'alpha':this._activeSelectionCanvas=this.$.alpha;break;case'hue':this._activeSelectionCanvas=this.$.hue;break;default:this._activeSelectionCanvas=this.$.saturation;}this._activeSelectionRect=this._activeSelectionCanvas.getBoundingClientRect(),this._activeSelectionCanvas.classList.add('active')}_onTrack(a){a&&a.detail&&a.detail.sourceEvent&&this._stopPropagation(a.detail.sourceEvent),this._activeProperty||(this._activeProperty=this._checkSelectorForProperty(a)),this._activeSelectionCanvas||this._getActiveCanvas();const b=this._activeSelectionRect;let d,e,f,g,h=a.detail.x||a.clientX,i=a.detail.y||a.clientY;switch(this._activeProperty){case'alpha':i-=b.top,i>b.height?i=b.height:0>i&&(i=0),e=+this._normalizedClamp((b.height-i)/b.height).toFixed(2),this._hexAlphaSupported||'hex'!==this.format||1===e?this.alpha=e:this.setProperties({format:'auto',alphaMode:!0,alpha:e}),this._drawSelector(this.$.alphaSlider,0,i);break;case'hue':i-=b.top,i>b.height?i=b.height:0>i&&(i=0),f=Math.round(360*i/b.height),this.h=this._mathMod(f,360),this._drawSelector(this.$.hueSlider,0,i);break;default:h-=b.left,h>b.width?h=b.width:0>h&&(h=0),i-=b.top,i>b.height?i=b.height:0>i&&(i=0),d=h/b.width,g=1-i/b.height,e=(2-d)*g,this.setProperties({h:this.h||0,s:0===e?0:+(d*g/(1>e?e:2-e)).toFixed(2),l:+(e/2).toFixed(2)}),this._drawSelector(this.$.colorPin,h,i);}a.detail.state&&'end'===a.detail.state&&this._onSelectEnd(a)}_onDown(a){this._stopPropagation(a),this._onSelectEnd(a),this._onTrack(a)}_onUp(a){switch(this._stopPropagation(a),this._onSelectEnd(a),this._onTrack(a),this._activeProperty){case'alpha':this.$.alphaSlider.focus();break;case'hue':this.$.hueSlider.focus();break;case'color':this.$.colorPin.focus();}this._activeSelectionCanvas&&this._activeSelectionCanvas.classList.remove('active'),this._activeSelectionCanvas=null,this._activeSelectionRect=null}_onDblClick(){}_onFocusButton(a){this._activeProperty=this._checkSelectorForProperty(a,a.target.id)}_onKeyDown(a){var b=Math.round;if(this._activeProperty){let c,d;switch(this._activeProperty){case'alpha':this.alphaMode||(this.alphaMode=!0),38===a.keyCode?(this.alpha=window._numberUtilities._safeMult(b(100*this.alpha+1),0.01),c=!0):40===a.keyCode&&(this.alpha=window._numberUtilities._safeMult(b(100*this.alpha-1),0.01),c=!0);break;case'hue':38===a.keyCode?(this.h=b(this.h-1),c=!0):40===a.keyCode&&(this.h=b(this.h+1),c=!0);break;default:if(this._activeSelectionRect||(this._activeSelectionRect=this.$.saturation.getBoundingClientRect(),this._activeSelectionCanvas=this.$.saturation),d={detail:this.$.colorPin.getBoundingClientRect()},d.detail.x+=d.detail.width/2,d.detail.y+=d.detail.height/2,38===a.keyCode)d.detail.y-=b(this._activeSelectionRect.height/100)||1;else if(40===a.keyCode)d.detail.y+=b(this._activeSelectionRect.height/100)||1;else if(37===a.keyCode)d.detail.x-=b(this._activeSelectionRect.width/100)||1;else if(39===a.keyCode)d.detail.x+=b(this._activeSelectionRect.width/100)||1;else return;this._onTrack(d),c=!0;}c&&(this._stopPropagation(a),a&&a.preventDefault&&a.preventDefault())}else 27===this.keyCode&&(document.activeElement.blur(),this._onSelectEnd())}_onSelectEnd(a){this._stopPropagation(a),this._activeSelectionCanvas&&this._activeSelectionCanvas.classList.remove('active'),this._activeSelectionCanvas=null,this._activeSelectionRect=null,this._activeProperty=null}_stopPropagation(a){a&&a.stopPropagation&&a.stopPropagation()}};window.ColorElementPattern=ColorElementPattern;</script><dom-module id="color-element" assetpath="../bower_components/color-picker/"><script>class ColorElement extends Polymer.GestureEventListeners(ColorElementPattern(ColorBadgePattern(Polymer.Element))){static get is(){return'color-element'}static get styleToInclude(){return`${super.styleToInclude||''} input-picker-shared-style`}static get template(){return`
          <style include="${this.styleToInclude}">
            ${this.styleTemplate}
          </style>
          ${this.colorElementTemplate}
        `}static get buttonTemplate(){return`
          <div style="flex:1;"></div>
          ${super.buttonTemplate||''}
        `}}window.customElements.define(ColorElement.is,ColorElement);</script></dom-module><script>const ColorPickerPattern=(a)=>class extends Polymer.GestureEventListeners(InputPickerPattern(ColorElementPattern(ColorInputPattern(a)))){static get expectedNativeInputType(){return'color'}static get nativeInputBinding(){return'hex'}static get styleTemplate(){return`
        ${super.styleTemplate||''}
        input.native {
          --input-padding: 0;
          --input-background: transparent;
          --input-focus-background: transparent;
          border-radius: var(--input-border-radius, var(--color-badge-radius, 3px));
          height: var(--color-badge-height, 28px);
          width: var(--color-badge-width, 28px);
        }
        #buttons #colorBadgeContainer {
          position: relative;
          display: inline-flex;
          min-width: var(--color-badge-width, 28px);
          align-self: stretch;
          flex: 1;
          margin-right: var(--input-picker-padding);
        }
        #buttons #colorBadge {
          background: #fff;
          position: relative;
          border-radius: var(--input-icon-border-radius);
          height: 100%;
          width: 100%;
        }
        #buttons #formats {
          font-size: 0.9em;
          --inner-input-color: var(--input-picker-color, currentColor);
          margin-right: var(--input-picker-padding);
        }
        ::-webkit-color-swatch {
          border-radius: var(--input-border-radius, var(--color-badge-radius, 3px));
          border: none;
        }
        ::-webkit-color-swatch-wrapper {
          padding: 0;
        }
        ::-moz-color-swatch {
          border-radius: var(--input-border-radius, var(--color-badge-radius, 3px));
          border: none;
        }
      `}static get nativeInputTemplate(){return`
        <template is="dom-if" if="[[native]]" restamp>
          <div id="input">
            ${super.nativeInputTemplate}
            ${this.textInputTemplate}
          </div>
        </template>
      `}static get inputTemplate(){return`
        <div id="recentColorBadge" class="transparency badge">
          <canvas id="recentColor" width$="[[_recentcolorwidth]]" height$="[[_recentcolorheight]]" on-click="_resetValues"></canvas>
        </div>
        ${super.inputTemplate}
      `}static get buttonTemplate(){return`
        <div id="colorBadgeContainer" hidden$="[[autoConfirm]]">
          ${this.colorBadgeTemplate}
        </div>
        <select id="formats" value="{{format::change}}" on-keydown="_stopPropagation">
          <option value="auto">auto</option>
          <option value="rgb">rgb</option>
          <option value="hex">hex</option>
          <option value="hsl">hsl</option>
        </select>
        <div style="flex:1;" hidden$="[[!autoConfirm]]"></div>
        ${super.buttonTemplate||''}
      `}static get pickerTemplate(){return`
        <div id="picker" class="dropdown">
          ${this.colorElementTemplate}
        </div>
      `}static get properties(){return{propertyForValue:{type:String,value:'colorString'},_recentcolorheight:{type:Number},_recentcolorwidth:{type:Number}}}ready(){super.ready(),this.$.recentColor&&(this._recentcolorcontext=this.$.recentColor.getContext('2d'))}redraw(){super.redraw(),this._drawConfimedColorBadge('colorString'===this.propertyForValue?this.confirmedValue:this.colorString,this._recentcolorwidth,this._recentcolorheight)}_resizeBadge(){var a=Math.ceil;let b={};if(this.$.colorBadge){const c=this.$.colorBadge.getBoundingClientRect();b._badgewidth=a(c.width)||28,b._badgeheight=a(c.height)||28}if(this.$.alphaBadge&&this.$.saturationBadge){const c=Math.round(this.$.alphaBadge.getBoundingClientRect().width),d=this.$.saturationBadge.getBoundingClientRect();b._saturationwidth=a(d.width)||184,b._saturationheight=a(d.height)||184,b._sliderwidth=c||16}if(this.$.recentColorBadge){const c=this.$.recentColorBadge.getBoundingClientRect();b._recentcolorwidth=a(c.width)||28,b._recentcolorheight=a(c.height)||28}this.setProperties(b)}_resetValues(){this._colorStringChanged(this.confirmedValue),this.value!==this.confirmedValue&&(this.value=this.confirmedValue)}_confirmedValueChanged(a){return this._drawConfimedColorBadge('colorString'===this.propertyForValue?a:this.colorString,this._recentcolorwidth,this._recentcolorheight),void 0===a?void this._resetConfirmedValues():void(this.value=a)}_drawConfimedColorBadge(a,b,c){this._drawBadge(this._recentcolorcontext,a,b,c)}_addCancelOnClickListener(){this.noCancelOnOutsideClick||(Polymer.Gestures.addListener(document,'tap',this.cancel,!1),this.addEventListener('click',this._stopPropagation,!1))}_removeCancelOnClickListener(){Polymer.Gestures.removeListener(document,'tap',this.cancel,!1),this.removeEventListener('click',this._stopPropagation,!1)}open(){super.open(),requestAnimationFrame(()=>{this.redraw()})}_onDblClick(){this._setConfirmedValues()}};window.ColorPickerPattern=ColorPickerPattern;</script><dom-module id="color-picker" assetpath="../bower_components/color-picker/"><script>class ColorPicker extends ColorPickerPattern(Polymer.Element){static get is(){return'color-picker'}get _hasNative(){return ColorPicker._hasNative}static get styleToInclude(){return`${super.styleToInclude||''} dropdown-style`}}window.customElements.define(ColorPicker.is,ColorPicker);</script></dom-module><dom-module id="overlay-color-picker" assetpath="../bower_components/color-picker/"><script>class OverlayColorPicker extends OverlayPickerMixin(ColorPickerPattern(Polymer.Element)){static get is(){return'overlay-color-picker'}get _hasNative(){return OverlayColorPicker._hasNative}}window.customElements.define(OverlayColorPicker.is,OverlayColorPicker);</script></dom-module><dom-module id="device-chart-dialog-export" assetpath="../bower_components/webvisual-elements/device/chart-element/"><template strip-whitespace=""><style include="input-style button-style selectbox-style">:host{outline:none;}#dialog{border-radius:0;padding:0;width:100%;height:100%;}#chartContainer{display:block;position:relative;box-sizing:border-box;margin:0;padding:8px;flex:1 1 auto;overflow:auto;}#chartContainer > *{color:inherit;}#chartContainer > device-chart{margin:0;padding:0;--chart-text-color:#000;--chart-plot-background-opacity:1;height:100%;width:100%;}#options{position:absolute;--drawer-width:12em;--drawer-background:rgba(255,255,255,0.5);--drawer-scrim-background:rgba(0,0,0,0.25);--drawer-content:{padding:0;};}.options-content{color:var(--primary-text-color);display:flex;flex-direction:column;height:100%;padding:0.75em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}.options-content > *{margin-top:0;margin-bottom:0.5em;text-align:left;word-break:break-all;flex-shrink:0;position:relative;font-size:0.8em;}.input{background:rgba(255,255,255,0.5);}[hidden]{display:none !important;}</style><dialog-element id="dialog" on-iron-overlay-opened="_setDimensions"><div dialog-title=""><div>[[localize('chart', 'export')]]</div></div><div dialog-content="" horizontal=""><div id="chartContainer"></div><drawer-element id="options" opened$="{{styleOptionsOpened}}" scrim="" stretch="" align="right"><div class="options-content"><div class="selectbox"><select value="{{exportFormat::change}}"><option value="svg">.svg</option><option value="png">.png</option><option value="jpg">.jpg</option></select><span>[[localize('chart', 'export-format')]]</span></div><template is="dom-if" if="[[_nequals(exportFormat, 'svg')]]"><div class="input"><input type="range" min="0" max="1" step="0.01" value="{{quality::input}}"><number-input number-style="percent" min="0" max="1" step="0.01" value="{{quality}}"></number-input><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'quality')]]</label></div></div><div class="input"><integer-input min="72" default="72" step="1" unit="dpi" value="{{resolution}}"></integer-input><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'resolution')]]</label><div class="underline"></div></div></div></template><div class="input"><input-input min="50" step="1" value="{{height}}"><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'height')]]</label><div class="underline"></div></div></input-input></div><div class="input"><integer-input min="50" step="1" value="{{width}}"></integer-input><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'width')]]</label><div class="underline"></div></div></div><div class="input"><integer-input min="1" default="11" step="1" unit="pt" value="{{fontSize}}"></integer-input><div class="decorator" error-message$=">= 0"><label>[[localize('chart', 'font-size')]]</label><div class="underline"></div></div></div><div class="input"><overlay-color-picker value="{{fontColor::input}}" default="#111"></overlay-color-picker><label>[[localize('chart', 'font-color')]]</label></div><div class="input"><overlay-color-picker value="{{backgroundColor::input}}" default="#FFF" no-overlap=""></overlay-color-picker><label>[[localize('chart', 'background-color')]]</label></div><div class="input"><overlay-color-picker value="{{lineColor::input}}" default="#111" no-overlap=""></overlay-color-picker><label>[[localize('chart', 'line-color')]]</label></div></div></drawer-element></div><div dialog-bottom="" class="buttons"><div class="button" on-click="toggleOptions"><paper-ripple></paper-ripple><iron-icon class="left" icon="tune"></iron-icon>[[localize('options')]]</div><div class="button" on-click="toggleStyleOptions"><paper-ripple></paper-ripple><iron-icon class="left" icon="style"></iron-icon>[[localize('style')]]</div><div class="button" on-click="fitInContainer"><paper-ripple></paper-ripple><iron-icon class="left" icon="aspect-ratio"></iron-icon>[[localize('fit')]]</div><div class="button" on-click="save"><paper-ripple></paper-ripple><iron-icon class="left" icon="camera-alt"></iron-icon>[[localize('save')]]</div></div></dialog-element></template><script>class DeviceChartDialogExport extends WebvisualMixins.LocalizeMixin(Polymer.mixinBehaviors([Polymer.IronResizableBehavior],Polymer.Element)){static get is(){return'device-chart-dialog-export'}static get properties(){return{opened:{type:Boolean,reflectToAttribute:!0,notify:!0,observer:'_openedChanged'},styleOptionsOpened:{type:Boolean,value:!1},exportFormat:{type:String,value:'svg'},resolution:{type:Number,value:150},quality:{type:Number,value:0.5},height:{type:Number},width:{type:Number},backgroundColor:{type:String,value:'#ffffff'},fontColor:{type:String,value:'#151515'},fontSize:{type:Number,value:11},lineColor:{type:String,value:'#151515'},localesUrlPrefix:{type:String,value:'/locales/ui/'}}}static get observers(){return['_setDimensions(height, width)','_styleChanged(backgroundColor, fontColor, lineColor, fontSize, showInfo, showLegend)']}static get listeners(){return{"iron-resize":'_setDimensions'}}constructor(){super(),this.setChartElement(...arguments)}connectedCallback(){super.connectedCallback(),this._isAttached=!0,this._attachChartElement(),this._getPPI()}setChartElement(a){a&&(this._chart&&this._detachChartElement(),this._chart=a.cloneNode(!0),this._chart.controlButtonsHidden=!0,this._chart.exportButtonDisabled=!0,this._chart.autoHideInfoDisabled=!0,this._chart.modus='hold',this._chart.setAttribute('without-mixmode',!0),this._chart.set('items',a.items),!0===this._isAttached&&this._attachChartElement())}_attachChartElement(){this._chart&&(Array.prototype.forEach.call(this.$.chartContainer.children,(a)=>{this.$.chartContainer.removeChild(a)}),requestAnimationFrame(()=>{this.$.chartContainer.appendChild(this._chart),this._chart._buildLayout();const a=this._chart._svg.node().querySelector('clipPath');a.setAttribute('id','clip-export'),Array.prototype.forEach.call(this._chart._svg.node().querySelectorAll('[clip-path]'),(a)=>{a.setAttribute('clip-path','url(#clip-export)')}),setTimeout(()=>{this._styleChanged(this.backgroundColor,this.fontColor,this.lineColor,this.fontSize),this.fitInContainer()},100)}))}_detachChartElement(){!0===this._isAttached&&this._chart&&this._chart.parentElement&&this._chart.parentElement.removeChild(this._chart)}_setDimensions(a,b){if(this._chart&&!0===this._isAttached){const c=this._chart.getBoundingClientRect();'number'!==typeof a&&(a=c.height),'number'!==typeof b&&(b=c.width),0>=a||0>=b||(this._chart.style.height=a+'px',this._chart.style.width=b+'px',this._chart.sizeLayout())}}fitInContainer(){var a=Math.floor;if(this._chart&&!0===this._isAttached){const b=this.$.chartContainer.getBoundingClientRect(),c=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-top')),d=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-right')),e=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-bottom')),f=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('padding-left')),g=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-top')),h=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-right')),i=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-bottom')),j=parseFloat(window.getComputedStyle(this.$.chartContainer).getPropertyValue('margin-left')),k=a(b.height-g-i-c-e),l=a(b.width-h-j-d-f);0>=k||0>=l||(this.height=k,this.width=l)}}_getPPI(){let a=document.createElement('div');a.style.cssText='height: 1in; left: -100%; position: absolute; top: -100%; width: 1in;',document.body.insertBefore(a,document.body.children[0]),this._ppiX=a.offsetWidth,this._ppiY=a.offsetHeight,a.parentElement.removeChild(a)}toggleOptions(){this._chart.toggleOptions()}toggleStyleOptions(){this.styleOptionsOpened=!this.styleOptionsOpened}_openedChanged(a){!0===a?this.open():this.close()}_nequals(c,a){return c!=a}open(){this.$.dialog.open(),this.opened=!0}close(){this.$.dialog.close(),this.opened=!1}_styleChanged(a,b,c,d){this._chart.updateStyles({"--chart-plot-background-color":a}),this._chart.updateStyles({"--chart-line-color":c}),this._chart.updateStyles({"--chart-text-color":b}),this._chart.updateStyles({"--chart-text-size":d+'px'})}_applyStyleToElement(a,b){const c=a.childNodes,d=b.childNodes,e=['svg','g'],f={rect:['fill','stroke','stroke-width'],path:['fill','stroke','stroke-width'],circle:['fill','stroke','fill-opacity','stroke-width'],line:['stroke','stroke-width'],text:['fill','font-size','font-family','letter-spacing','text-anchor','alignment-baseline','stroke','stroke-width','stroke-opacity']};for(let g=0;g<c.length;g++){const a=c[g],b=a.tagName;if(-1!==e.indexOf(b))this._applyStyleToElement(a,d[g]);else if(b in f){const c=window.getComputedStyle(d[g]);for(let d=0;d<f[b].length;d++)a.setAttribute([f[b][d]],c.getPropertyValue(f[b][d]))}}}save(){this._styleChanged(),this._setDimensions(this.height,this.width),requestAnimationFrame(()=>{const b=this._chart._svg.node().cloneNode(!0);this._applyStyleToElement(b,this._chart._svg.node()),Array.prototype.forEach.call(b.querySelectorAll('[hidden],.brush,#zoom'),(a)=>{a&&a.parentElement&&a.parentElement.removeChild(a)}),b.setAttribute('filter','url(#solid)'),b.style.margin='0px',b.style.padding='0px',b.querySelector('filter#solid feFlood').setAttribute('flood-color',this.backgroundColor),Array.prototype.forEach.call(b.querySelectorAll('.axis.main text'),(a)=>{a.setAttribute('fill',this.textColor)}),Array.prototype.forEach.call(b.querySelectorAll('.domain'),(a)=>{a.setAttribute('fill-opacity','0')}),Array.prototype.forEach.call(b.querySelectorAll('.grid line'),(a)=>{a.setAttribute('stroke-width',0.5),a.setAttribute('stroke-opacity',0.2),a.setAttribute('stroke',this.lineColor)}),Array.prototype.forEach.call(b.querySelectorAll('.axis.main line,.axis.main path'),(a)=>{a.setAttribute('stroke',this.lineColor)}),Array.prototype.forEach.call(b.querySelectorAll('*'),(a)=>{a.removeAttribute('class')});const c=new XMLSerializer().serializeToString(b),d=decodeURIComponent(location.href).replace(/ids|room|:\/\/|https|http/gi,'').replace(/[$-/:-?{-~!"^=&_`]/gi,'+').replace(/\+\+/gi,'+');let e=document.createElement('a');e.setAttribute('download',d+'.'+this.exportFormat);const a=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!0});if('svg'===this.exportFormat){const b=new Blob([c],{type:'image/svg+xml;charset=utf-8}'});e.setAttribute('href',URL.createObjectURL(b));const d=!e.dispatchEvent(a);d||this.close()}else{const b=new Image,d=this.resolution;b.src='data:image/svg+xml;base64,'+window.btoa(unescape(encodeURIComponent(c))),b.onload=()=>{const c=document.createElement('canvas'),f=this._chart._svg.node().getBoundingClientRect(),g=f.height,h=f.width;c.style.width=h+'px',c.style.height=g+'px';let i=d/this._ppiX,j=d/this._ppiY;c.setAttribute('width',i*h),c.setAttribute('height',j*g);const k=c.getContext('2d');k.scale(c.width/h,c.height/g),k.drawImage(b,0,0),e.setAttribute('href',c.toDataURL('image/'+this.exportFormat,this.quality));const l=!e.dispatchEvent(a);l||this.close()}}})}}customElements.define(DeviceChartDialogExport.is,DeviceChartDialogExport),window.WebvisualElements=window.WebvisualElements||{},window.WebvisualElements.DeviceChartDialogExport=DeviceChartDialogExport;</script></dom-module><dom-module id="device-chart" assetpath="../bower_components/webvisual-elements/device/chart-element/"><template strip-whitespace=""><style include="control-style selectbox-style button-style">:host{display:block;box-sizing:content-box;position:relative;font:inherit;color:inherit;letter-spacing:normal;user-select:none !important;z-index:auto;overflow:visible;transition:background 150ms linear;}:host([fullscreen]){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);padding-top:1em !important;padding-left:1em !important;padding-right:1em !important;padding-bottom:calc(8px + var(--icon-size, 1.5em) + 2*var(--icon-padding, 0.5em)) !important;margin:0 !important;--control-button-distance:8px !important;}:host([fullscreen]) #control{bottom:8px !important;top:auto !important;left:auto !important;right:16px !important;mix-blend-mode:normal !important;}:host(:-webkit-full-screen){color:var(--fullscreen-color, white);background-color:var(--fullscreen-background-color);height:unset;width:unset;max-height:unset !important;flex-basis:unset;}:host(:-webkit-full-screen) *{}#svg{width:100%;height:100%;font-family:inherit !important;overflow:visible;}rect#plot{fill:var(--chart-plot-background-color, #fff);stroke:currentColor;fill-opacity:var(--chart-plot-background-opacity, 0.2);stroke-opacity:0.5;stroke-width:1px;}.axis{cursor:default;pointer-events:all;font-family:inherit !important;}.axis path, .axis line{fill:currentColor;fill-opacity:0.001;stroke:currentColor;stroke-opacity:0.9;transition:fill-opacity 200ms linear;}.axis line{stroke-width:1.25px;}.axis.main line{stroke:var(--chart-line-color, currentColor);}.axis:hover path,
      .axis.dragged path{fill-opacity:0.25;}.axis.y .tick:last-of-type:not(:only-of-type) text{alignment-baseline:before-edge;}.axis.x .tick:last-of-type:not(:only-of-type) text{text-anchor:end;}.grid .tick line{stroke:var(--chart-line-color, var(--grid-color, currentColor));stroke-opacity:0.1;stroke-width:0.75px;}.grid path{stroke-width:0;}.brush .selection{fill:currentColor;fill-opacity:0.8;stroke:currentColor;stroke-width:0;}.brush .overlay{cursor:pointer;}#graphs .area{fill-opacity:0.4;@apply --chart-area;}#graphs .area:last-of-type{fill-opacity:0.5;}#graphs .line{cursor:pointer;stroke-opacity:0.9;@apply --chart-line;}#graphs .line:last-of-type{stroke-opacity:1;}.focus,
      .delta{color:var(--chart-line-color, var(--focus-color, currentColor));}#focus *:not(.dot),
      #delta *:not(.dot){stroke:var(--chart-line-color, var(--focus-color, currentColor));stroke-opacity:var(--focus-opacity, 0.75);stroke-dasharray:1;stroke-width:1.5px;}marker path{fill:var(--chart-line-color, var(--focus-color, currentColor));}#zoom{cursor:default;fill:currentColor;fill-opacity:0.001;stroke:none;pointer-events:all;}.dot{fill-opacity:0.9;cursor:pointer;stroke:#000;stroke-opacity:0.75;stroke-width:1px;pointer-events:all;transition:fill 100ms linear;}.dot:hover{fill-opacity:1;}.selectbox > *{flex:1 0 auto;padding:0.6em 0.3em;font-size:inherit !important;}.selectbox{padding:0;}icon-button{background:rgba(255,255,255,0.0625);}.checkbox,
      .selectbox,
      .button{text-align:left;flex-shrink:0;position:relative;}#options{position:absolute;--drawer-width:12em;--drawer-background:rgba(255,255,255,0.5);--drawer-scrim-background:var(--options-scrim-background, rgba(0,0,0,0.25));--drawer-content:{padding:0;color:var(--primary-text-color);};}.options-content{display:flex;flex-direction:column;height:100%;font-size:0.8em;padding:0.75em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;}.options-content > *{margin-bottom:0.4em;}.selectbox > select{opacity:1;}:host(:not([without-mixmode])) #delta .line,
      :host(:not([without-mixmode])) #focus .line,
      :host(:not([without-mixmode])) marker > path,
      :host(:not([without-mixmode])) .grid .tick line{mix-blend-mode:exclusion;pointer-events:none;}svg text{fill:var(--chart-text-color, var(--primary-text-color));stroke:currentColor;stroke-width:0.5px;stroke-opacity:0.2;font-size:var(--chart-text-size, 11px) !important;letter-spacing:-0.025em;font-family:inherit !important;cursor:inherit;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}svg text.info{fill:var(--primary-text-color);pointer-events:none;}.draggable{cursor:-webkit-grab;cursor:grab;}.draggable.dragged{cursor:-webkit-grabbing;cursor:grabbing;}.draggable *{cursor:inherit !important;}#legend > .entry > rect{stroke:currentColor;stroke-width:0.5px;stroke-opacity:0.5;}#legend{display:none;}[hidden]{display:none !important;}</style><svg id="svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMinYMin meet" on-contextmenu="_resetZoom"><defs id="defs"><clipPath id="clip"><rect x="0" y="0"></rect></clipPath><marker id="arrowToLeft" viewBox="0 0 20 10" refX="0" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 20,0 L 0,5 L 20,10 Z"></path></marker><marker id="arrowToRight" viewBox="0 0 20 10" refX="20" refY="5" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0,0 L 20,5 L 0,10 Z"></path></marker><marker id="stub" markerWidth="8" markerHeight="6" refX="6" refY="5" orient="auto" markerUnits="strokeWidth" viewBox="0 0 6 10"><path d="M 5,10 M 4,0 H 6 V 10 H 4 Z"></path><path d="M 3,5 M 0,4 H 6 V 6 H 0 Z"></path></marker><filter id="solid"><feFlood flood-color="#fff" result="out1"></feFlood><feComposite in="SourceGraphic" in2="out1" operator="over"></feComposite></filter><pattern id="circle" width="10" height="10" patternUnits="userSpaceOnUse"><circle cx="5" cy="5" r="2"></circle></pattern></defs><g id="chart"><rect id="plot" clip-path="url(#clip)"></rect><g class="grid" clip-path="url(#clip)"><g id="gridX"></g><g id="gridY"></g></g><g id="graphs" clip-path="url(#clip)"><g id="area"></g><g id="line"></g></g><rect id="zoom" x="0" y="0" clip-path="url(#clip)"></rect><g id="axis"></g><g hidden$="[[hideInfo]]"><g id="delta" hidden=""><line id="deltaX" class="line x" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><line id="deltaY" class="line y" marker-start="url(#arrowToLeft)" marker-end="url(#arrowToRight)"></line><circle id="deltaDot" class="dot"></circle></g><g id="focus" hidden=""><line id="focusLineX" class="line x" x1="0" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><line id="focusLineY" class="line y" marker-start="url(#stub)" marker-end="url(#arrowToRight)"></line><circle id="focusDot" class="dot"></circle></g><g id="info"><text class="focus info" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text><text class="delta info x" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text><text class="delta info y" x="0" y="0" filter="url(#solid)" font-size="10" hidden=""></text></g></g><g id="legend" hidden$="[[hideLegend]]"></g></g></svg><drawer-element id="options" opened="{{showControl}}" align="right" stretch="" scrim=""><div class="options-content"><div class="selectbox" title$="[[localize('chart', 'interpolation')]]"><select value="{{interpolation::change}}"><option value="curveLinear">curveLinear</option><option value="curveBasis">curveBasis</option><option value="curveNatural">curveNatural</option><option value="curveCardinal">curveCardinal</option><option value="curveCatmullRom">curveCatmullRom</option><option value="curveStep">curveStep</option><option value="curveStepAfter">curveStepAfter</option><option value="curveStepBefore">curveStepBefore</option></select></div><div class="selectbox" title$="[[localize('chart', 'scaling', 'y')]]"><select value="{{scalingY::change}}"><option value="linear">linear</option><option value="√">√</option><option value="ln">ln</option><option value="log₂">log₂</option><option value="log₁₀">log₁₀</option></select></div><div class="selectbox" title$="[[localize('chart', 'modus', 'description')]]"><select value="{{modus::change}}"><option value="hold">[[localize('chart', 'modus', 'hold')]]</option><option value="zoom">[[localize('chart', 'modus', 'zoom')]]</option><option value="delta">[[localize('chart', 'modus', 'delta')]]</option></select></div><div class="checkbox"><input type="checkbox" checked="{{multiAxesX::change}}"> [[localize('chart', 'multi-axes', 'x')]]</div><div class="checkbox"><input type="checkbox" checked="{{multiAxesY::change}}"> [[localize('chart', 'multi-axes', 'y')]]</div><div class="checkbox"><input type="checkbox" checked="{{draggable::change}}"> [[localize('chart', 'draggable')]]</div><div class="checkbox"><input type="checkbox" checked="{{brushToZoom::change}}"> [[localize('chart', 'brush-to-zoom')]]</div><div class="checkbox"><input type="checkbox" checked="{{!hideInfo::change}}"> [[localize('chart', 'show-info')]]</div><div class="button" on-click="_openExportDialog" hidden$="[[exportButtonHidden]]"><iron-icon icon="file-download"></iron-icon>[[localize('chart', 'export')]]</div></div></drawer-element><div id="control" class="right bottom" hidden$="[[controlButtonsHidden]]" on-mouseenter="_debouncedHideInfo"><icon-button icon="tune" on-click="toggleOptions" title$="[[localize('options')]]"></icon-button><icon-button icon="filter-center-focus" on-click="_resetZoom" title$="[[localize('reset-zoom')]]"></icon-button><icon-button icon="[[fullscreenIcon]]" on-click="toggleFullscreen" title$="[[localize('fullscreen', fullscreen)]]"></icon-button></div><template is="dom-if" if="[[multi]]" restamp=""><template is="dom-repeat" items="[[items]]"><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><template is="dom-if" if="[[!multi]]" restamp=""><device-graph item="[[item]]" interpolation="[[interpolation]]" locale-date="[[localeDate]]" locale-number="[[localeNumber]]" range-x="[[rangeX]]" range-y="[[rangeY]]" no-link="[[!opened]]" scaling-y="[[scalingY]]" scaling-x="[[scalingX]]"></device-graph></template></template><script>class DeviceChart extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.AxesMixin(WebvisualMixins.FullscreenMixin(WebvisualMixins.LocalizeMixin(Polymer.Element)))){static get is(){return'device-chart'}static get properties(){return{opened:{type:Boolean},hasGrid:{type:Boolean,value:!0},margin:{type:Object,value:function(){return{top:10,right:5,bottom:5,left:5}}},multiAxesX:{type:Boolean,value:!1},multiAxesY:{type:Boolean,value:!0},interpolation:{type:String,value:'curveLinear',observer:'_interpolationChanged'},item:{type:Object},items:{type:Array},multi:{type:Boolean,value:!1},showControl:{type:Boolean,value:!1},hideInfo:{type:Boolean,value:!1},exportButtonHidden:{type:Boolean,value:!1},controlButtonsHidden:{type:Boolean,value:!1},autoHideInfoDisabled:{type:Boolean,value:!1},modus:{type:String,value:'delta',observer:'_modusChanged'},localesUrlPrefix:{type:Array,value:function(){return['/locales/ui/','/locales/format/']}}}}constructor(){super(),this._width=0,this._height=0,this._graphs=new Set}get _self(){return this}static get observers(){return['_localizeChanged(localize)','_multiAxesChanged(multiAxesX, multiAxesY)']}_localizeChanged(a){this.set('localeDate',a('date')),this.set('localeNumber',a('number'))}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this})),this.sizeChanged()}connectedCallback(){super.connectedCallback(),this._buildLayout()}_assignNodes(){this._svg=d3.select(this.$.svg),this._chart=d3.select(this.$.chart),this._axisInsertionPoint=d3.select(this.$.axis),this._area=d3.select(this.$.area),this._line=d3.select(this.$.line),this._defs=d3.select(this.$.defs),this.gridX=d3.select(this.$.gridX),this.gridY=d3.select(this.$.gridY),this._focus=d3.select(this.$.focus),this._focusLineX=d3.select(this.$.focusLineX),this._focusLineY=d3.select(this.$.focusLineY),this._focusDot=d3.select(this.$.focusDot),this._info=this._chart.select('text.focus.info'),this._infoDeltaX=this._chart.select('text.delta.info.x'),this._infoDeltaY=this._chart.select('text.delta.info.y'),this._delta=d3.select(this.$.delta),this._deltaX=d3.select(this.$.deltaX),this._deltaY=d3.select(this.$.deltaY),this._deltaDot=d3.select(this.$.deltaDot),this._zoom=d3.select(this.$.zoom),this._legend=d3.select(this.$.legend),this._graphs.forEach((a)=>{a._assignNodes()})}_buildLayout(){this._assignNodes(),this._svg.attr('height',null).attr('width',null),this.axisX=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientX,'',this.axisX).classed('main',!0).attr('hidden',!!this.multiAxesX||null),this.axisY=this._computeAxisNode(this._axisInsertionPoint,this.axisOrientY,'',this.axisY).classed('main',!0).attr('hidden',!!this.multiAxesY||null),this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX),this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY),this._focusDot.on('mouseenter',()=>{!this.autoHideInfoDisabled&&this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob)},{passive:!0}).on('mouseleave',this._debouncedHideInfo.bind(this),{passive:!0}).on('click',this._dotClicked.bind(this),{passive:!0}),this._zoomBehavior=d3.zoom().scaleExtent([0.95,Infinity]).on('zoom',this._onZoomed.bind(this)),this._zoom.call(this._zoomBehavior),this._chart.on('mouseenter touchstart',this._showInfo.bind(this),{passive:!0}).on('mouseleave touchend',this._debouncedHideInfo.bind(this),{passive:!0}).on('mousemove',()=>{if(this.hideInfo)return;if(this._showInfo(),'hold'===this.modus&&this._fixedValue)return void this._debouncedHideInfo(this);const a=d3.mouse(this._chart.node());requestAnimationFrame(()=>{let b,c,e,d;if(this._graphs.forEach((f)=>{var g=Math.pow;if(f.values&&f.values.length){const h=f._closestPoint(a),d=g(a[0]-f.scaleX(h.x),2)+g(a[1]-f.scaleY(h.y),2);(void 0===e||d<e)&&(e=d,c=h,b=f)}}),c){if(d='#fff',b.item.threshold)switch(b.checkExceedingState(c)){case 1:d=b.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:d=b.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusedValue=c,this._focusedValue.g=b,this._focusedValue._left=this.multiAxesY?b.axisY._left:this.axisY._left,this._focusedValue._top=this.multiAxesX?b.axisX._top:this.axisX._top,this._focusDot.datum(c).attr('fill',d).attr('r',b.dotRadius),this._showInfo(),this._moveInfo(c)}else this._debouncedHideInfo()})},{passive:!0}),this._updateStyleScope(),this._isAttached=!0,this._modusChanged(this.modus),this._multiAxesChanged(this.multiAxesX,this.multiAxesY),this.sizeChanged()}reset(){this.set('item',{}),this.set('items',[]),this.set('exceeding',[]),this._graphs.clear(),this._debouncedHideInfo(),this._fixedValue=null,this._focusedValue=null}sizeChanged(){this.opened&&this._isAttached&&(this._activeSizeJob&&cancelAnimationFrame(this._activeSizeJob),this._activeSizeJob=setTimeout(()=>{this.sizeLayout()},0))}sizeLayout(){var a=Math.abs;if(!(this.opened&&this._isAttached))return;const b=this.$.svg.getBoundingClientRect();if(this._activeSizeJob&&(clearTimeout(this._activeSizeJob),this._activeSizeJob=null),0===b.height||0===b.width)return void requestAnimationFrame(()=>{this.sizeChanged()});this._debouncedHideInfo(),this._chart._top=0,this._chart._right=0,this._chart._bottom=0,this._chart._left=0;let c;const d=[],e=[];this._graphs.forEach((a)=>{if(a._isAttached&&a.scaleX&&a.scaleY){let b;a.axisX.attr('hidden')||(b=a.axisX.classed('expanded')?a.axisSizeX:a.tickSize+a.collapsedAxisMargin,d.push(this._incremAxisPosition(a.axisX,a.axisOrientX,b))),a.axisY.attr('hidden')||(b=a.axisY.classed('expanded')?a.axisSizeY:a.tickSize+a.collapsedAxisMargin,d.push(this._incremAxisPosition(a.axisY,a.axisOrientY,b)))}}),this.axisX.attr('hidden')||(c=this.axisX.classed('expanded')?this.axisSizeX:this.tickSize+this.collapsedAxisMargin,d.push(this._incremAxisPosition(this.axisX,this.axisOrientX,c))),this.axisY.attr('hidden')||(c=this.axisY.classed('expanded')?this.axisSizeY:this.tickSize+this.collapsedAxisMargin,d.push(this._incremAxisPosition(this.axisY,this.axisOrientY,c))),Promise.all(d).then(()=>{this._width=a(b.width-a(this._chart._left||0)-a(this._chart._right||0)-(this.margin.left||0)-(this.margin.right||0)),this._height=a(b.height-a(this._chart._bottom||0)-a(this._chart._top||0)-(this.margin.top||0)-(this.margin.bottom||0)),this.set('rangeX',[0,this._width]),this.set('rangeY',[this._height,0]),this._zoom.attr('height',this._height).attr('width',this._width),this._zoomBehavior.translateExtent([[0,0],[this._width,this._height]]).extent([[0,0],[this._width,this._height]]),this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(!a.axisX.attr('hidden')&&e.push(this._finalizeAxisPosition(a.axisX,a.axisOrientX,this._width,this._height)),!a.axisY.attr('hidden')&&e.push(this._finalizeAxisPosition(a.axisY,a.axisOrientY,this._width,this._height)))}),this.axisX.attr('hidden')||e.push(this._finalizeAxisPosition(this.axisX,this.axisOrientX,this._width,this._height)),this.axisY.attr('hidden')||e.push(this._finalizeAxisPosition(this.axisY,this.axisOrientY,this._width,this._height)),Promise.all(e).then(()=>{this._svg.select('clipPath rect').transition().attr('width',this._width).attr('height',this._height),this._chart.select('rect#plot').transition().attr('width',this._width).attr('height',this._height);const a=(-this._chart._left||0)+(this.margin.left||0),b=(-this._chart._top||0)+(this.margin.top||0);this._chart.transition().attr('transform','translate('+a+','+b+')'),this._focusLineY.attr('y1',this._height),this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(!a.axisX.attr('hidden')&&(a.axisGeneratorX=a._computeAxisGenerator.call(a,a.axisOrientX,a.scaleX,a.scalingX,a.scaleBaseX).ticks(a.ticksX).tickSize(a.tickSize).tickFormat(a.axisX.classed('expanded')?a._computeFormatFn(a.scalingX,a.scaleBaseX):''),a._updateAxisBrushGenerator.call(a.axisBrushGeneratorX,this.rangeX,a.axisOrientX),this.brushToZoom&&a.axisX.select('.brush').raise().call(a.axisBrushGeneratorX),a.axisX.attr('transform','translate('+(a.axisX._left||0)+','+(a.axisX._top||0)+')')),!a.axisY.attr('hidden')&&(a.axisGeneratorY=a._computeAxisGenerator.call(a,a.axisOrientY,a.scaleY,a.scalingY,a.scaleBaseY).ticks(a.ticksY).tickSize(a.tickSize).tickFormat(a.axisY.classed('expanded')?a._computeFormatFn(a.scalingY,a.scaleBaseY):''),a._updateAxisBrushGenerator.call(a.axisBrushGeneratorY,this.rangeY,a.axisOrientY),this.brushToZoom&&a.axisY.select('.brush').raise().call(a.axisBrushGeneratorY),a.axisY.attr('transform','translate('+(a.axisY._left||0)+','+(a.axisY._top||0)+')')))}),!this.axisX.attr('hidden')&&this.scaleX&&(this.axisGeneratorX=this._computeAxisGenerator(this.axisOrientX,this.scaleX,this.scalingX,this.scaleBaseX).ticks(this.ticksX).tickSize(this.tickSize).tickFormat(this.axisX.classed('expanded')?this._computeFormatFn(this.scalingX,this.scaleBaseX):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorX,this.rangeX,this.axisOrientX),this.brushToZoom&&this.axisX.select('.brush').raise().call(this.axisBrushGeneratorX),this.axisX.attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')')),!this.axisY.attr('hidden')&&this.scaleY&&(this.axisGeneratorY=this._computeAxisGenerator(this.axisOrientY,this.scaleY,this.scalingY,this.scaleBaseY).ticks(this.ticksY).tickSize(this.tickSize).tickFormat(this.axisY.classed('expanded')?this._computeFormatFn(this.scalingY,this.scaleBaseY):''),this._updateAxisBrushGenerator.call(this.axisBrushGeneratorY,this.rangeY,this.axisOrientY),this.brushToZoom&&this.axisY.select('.brush').raise().call(this.axisBrushGeneratorY),this.axisY.attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')')),this._updateStyleScope(),!this.domainX||!this.domainY||this.domainX.some((a)=>void 0===a||null===a)||this.domainY.some((a)=>void 0===a||null===a)?this.redraw(!0):this.redraw()})})}_incremAxisPosition(a,b,c){return'left'===b?(a._left=this._chart._left,a._right=0,this._chart._left-=c):'right'===b?(a._left=0,a._right=this._chart._right,this._chart._right+=c):(a._left=0,a._right=0),'top'===b?(a._bottom=0,a._top=this._chart._top,this._chart._top-=c):'bottom'===b?(a._bottom=this._chart._bottom,a._top=0,this._chart._bottom+=c):(a._bottom=0,a._top=0),!0}_finalizeAxisPosition(a,b,c,d){return a._left+=a._right,a._top+=a._bottom,a._bottom=0,a._right=0,'right'===b?a._left+=c:'bottom'===b&&(a._top+=d),!0}_generateGrid(){this.scaleX&&this.scaleY&&(this._gridBuildJob&&clearTimeout(this._gridBuildJob),this._gridBuildJob=setTimeout(()=>{this.hasGrid&&(!this.multiAxesY||1>=this._graphs.size)?(this.gridGeneratorY=d3.axisLeft(this.scaleY).ticks(2*this.ticksY||10).tickSize(-this._width).tickFormat(''),this.gridY.call(this.gridGeneratorY).attr('font-family',null).attr('font-size',null).attr('text-anchor',null),this.gridY.attr('hidden',null)):this.gridY.attr('hidden',!0),this.hasGrid&&(!this.multiAxesX||1>=this._graphs.size)?(this.gridGeneratorX=d3.axisBottom(this.scaleX).ticks(2*this.ticksX||10).tickSize(this._height).tickFormat(''),this.gridX.call(this.gridGeneratorX).attr('font-family',null).attr('font-size',null).attr('text-anchor',null),this.gridX.attr('hidden',null),this.gridX.call(this.gridGeneratorX.scale(this.scaleX))):this.gridX.attr('hidden',!0),this._gridBuildJob=null},0))}_redomain(){this._isAttached&&(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),Promise.resolve(this._getDomain.call(this)).then(this.redraw.bind(this,!1)).catch((a)=>{a&&console.warn(a)}))}redraw(a){return this._isAttached&&this.scaleX&&this.scaleY?a?void this._redomain():void(this._activeRedrawJob&&clearTimeout(this._activeRedrawJob),this._activeRedrawJob=setTimeout(()=>{this.axisX.attr('hidden')||this.axisX.transition().call(this.axisGeneratorX).attr('transform','translate('+(this.axisX._left||0)+','+(this.axisX._top||0)+')'),this.axisY.attr('hidden')||this.axisY.transition().call(this.axisGeneratorY).attr('transform','translate('+(this.axisY._left||0)+','+(this.axisY._top||0)+')'),this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(a.axisX.attr('hidden')?a.set('domainX',this.domainX):a.axisX.transition().call(a.axisGeneratorX).attr('transform','translate('+(a.axisX._left||0)+','+(a.axisX._top||0)+')'),a.axisY.attr('hidden')?a.set('domainY',this.domainY):a.axisY.transition().call(a.axisGeneratorY).attr('transform','translate('+(a.axisY._left||0)+','+(a.axisY._top||0)+')'),a.redraw())}),this.hasGrid&&this._generateGrid(),this._updateStyleScope(),this._updateInfo()},0)):void 0}_updateStyleScope(){this._svg.selectAll('g,line,text,path,rect,circle').classed('style-scope device-chart',!0)}_multiAxesChanged(a,b){if(!this._isAttached)return;let c;this._graphs.forEach((d)=>{d._isAttached&&(c=!a||null,d.axisX.attr('hidden',c),c=!b||null,d.axisY.attr('hidden',c))}),c=!!a||null,this.axisX.attr('hidden',c),c=!!b||null,this.axisY.attr('hidden',c),c=b||a?null:!0,this.axisX.select('.brush').attr('hidden',c),this.axisY.select('.brush').attr('hidden',c),this._generateGrid(),this._redomain(),this.sizeChanged()}_addGraph(a){this._graphs.has(a)||(this._graphs.add(a),console.log('add',a.item.mount,this._graphs.size),this._updateLegendEntries(),this.sizeChanged())}_removeGraph(a){this._graphs.delete(a),console.log('remove',a.item.mount,this._graphs.size),0===this._graphs.size&&(this.set('domainX',[null,null]),this.set('domainY',[null,null])),a=null,this._fixedValue=null,this._focusedValue=null,this._updateLegendEntries(),this.sizeChanged()}_updateLegendEntries(){const a=[];this._graphs.forEach((b)=>{a.push(b.item)}),console.log(a),a.sort((c,a)=>{c.mount.localeCompare(a.mount)});const b=18,c=4,d=2,e=this._legend.selectAll('.entries').data(a),f=e.enter().append('g').classed('entry',!0).attr('transform',function(a,d){return`translate(0, ${d*(b+c)})`});f.append('rect').attr('height',b).attr('width',b).attr('rx',d).attr('ry',d).attr('fill',(a)=>a.color||'#fff'),f.append('text').attr('x',b+c).attr('y',b-c).text((a)=>a.mount),e.exit().remove(),this._updateStyleScope()}_getDomain(){return new Promise((a,b)=>{const c=[],d=[];this._graphs.forEach((a)=>{c.push(a._getDomain('x',this.multiAxesX)),d.push(a._getDomain('y',this.multiAxesY))}),Promise.all(c).then((c)=>{let e,f,h;for(let a=0;a<c.length;a++)e=void 0===e||e>c[a].domain[0]?c[a].domain[0]:e,f=void 0===f||f<c[a].domain[1]?c[a].domain[1]:f;(e===void 0||f===void 0)&&a(),h=[e,f],this.set('domainX',h),this.scaleX.domain(h),!1===this.multiAxesX&&this._graphs.forEach((a)=>{a.axisX._isBrushed=!1,a.set('domainX',h),a.scaleX.domain(h)}),Promise.all(d).then((b)=>{let c,d,e;for(let a=0;a<b.length;a++)c=void 0===c||c>b[a].domain[0]?b[a].domain[0]:c,d=void 0===d||d<b[a].domain[1]?b[a].domain[1]:d;(c===void 0||d===void 0)&&a(),e=[c,d],this.set('domainY',e),!1===this.multiAxesY&&this._graphs.forEach((a)=>{a.axisY._isBrushed=!1,a.set('domainY',e)}),a()}).catch((a)=>{b(a)})}).catch((a)=>{b(a)})})}insertValues(a){this._graphs.forEach((b)=>{b&&b._isAttached&&b.item&&b.item.mount&&a[b.item.mount]&&b.insertValues(a[b.item.mount])})}clearValues(){this._graphs.forEach((a)=>{a&&a._isAttached&&a.clearValues()})}_draggableChanged(a){super._draggableChanged(a),this._graphs.forEach((b)=>{b.draggable=a})}_brushToZoomChanged(a){super._brushToZoomChanged(a),this._graphs.forEach((b)=>{b.brushToZoom=a})}_moveInfo(a){var b=Math.abs;if(Number.isFinite(a.g.scaleY(a.y))){const c=this._computeFormatFn.call(a.g,a.g.scalingX,a.g.scaleBaseX),d=this._computeFormatFn.call(a.g,a.g.scalingY,a.g.scaleBaseY),e=this._fixedValue;if(this._info.text(c(a.x)+' '+d(a.y)+'\u205F'+(a.g.item.unit||'')),'delta'===this.modus&&e){const f=b(e.x-a.x),g=b(e.y-a.y),h=a.g.item.unit===e.g.item.unit;this._infoDeltaX.text(('time'===a.g.scalingX?a.g.formatTimeAbsolute:c)(f)+(h&&'time'!==a.g.scalingX?'\u205F'+a.g.item.unit:'')),this._infoDeltaY.text(('time'===a.g.scalingY?a.g.formatTimeAbsolute:d)(g)+(h&&'time'!==a.g.scalingY?'\u205F'+a.g.item.unit:''))}this._updateInfo()}}_showInfo(){this.hideInfo||(!this.autoHideInfoDisabled&&this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),0===this._graphs.size||(this._info.attr('hidden',null),this._focus.attr('hidden',null),'delta'===this.modus&&this._fixedValue&&this._showDelta()))}_showDelta(){this._infoDeltaX.attr('hidden',null),this._infoDeltaY.attr('hidden',null),this._delta.attr('hidden',null)}_debouncedHideInfo(){this.autoHideInfoDisabled||(this._activeHideInfoJob&&clearTimeout(this._activeHideInfoJob),this._activeHideInfoJob=setTimeout(()=>{this._hideInfo(),this._activeHideInfoJob=null},750))}_hideInfo(){this._info.attr('hidden',''),this._focus.attr('hidden',''),this._hideDelta(),this._updateStyleScope()}_hideDelta(){this._infoDeltaX.attr('hidden',''),this._infoDeltaY.attr('hidden',''),this._delta.attr('hidden','')}_updateInfo(){if(!this._focusedValue||''===this._info.attr('hidden'))return;const a=this._focusedValue,b=this._fixedValue;let c,d,e,f;if(a)c=a.g.scaleX(+a.x),d=a.g.scaleY(+a.y),e=a._left,f=a._top;else if(b)c=b.g.scaleX(+a.x),d=b.g.scaleY(+a.y),e=b._left,f=b._top;else return;if(this._alignText(this._info.node(),c,d,null,1.5*this._focusDot.attr('r')),this._focusLineX.attr('x1',e).attr('x2',c).attr('y2',d).attr('y1',d),this._focusLineY.attr('y1',f).attr('y2',d).attr('x2',c).attr('x1',c),this._focusDot.attr('cy',d).attr('cx',c),'delta'===this.modus)if(b&&void 0!==b.x&&void 0!==b.y&&(a.x!==b.x||a.y!==b.y)){const a=b.g.scaleX(+b.x),e=b.g.scaleY(+b.y);this._deltaX.attr('x1',c).attr('x2',a),this._deltaY.attr('y1',d).attr('y2',e),e<d?(this._deltaY.attr('x1',c).attr('x2',c),this._alignText(this._infoDeltaY.node(),c,(e+d)/2,null,null,null,'middle')):(this._deltaY.attr('x1',a).attr('x2',a),this._alignText(this._infoDeltaY.node(),a,(e+d)/2,null,null,null,'middle')),e<d||a<c?(this._deltaX.attr('y1',e).attr('y2',e),this._alignText(this._infoDeltaX.node(),(a+c)/2,e,null,null,null,'middle')):(this._deltaX.attr('y1',d).attr('y2',d),this._alignText(this._infoDeltaX.node(),(a+c)/2,d,null,null,null,'middle')),this._deltaDot.attr('cy',e).attr('cx',a)}else this._hideDelta();d>this._height||0>c?(this._focus.attr('hidden',''),'delta'===this.modus&&b&&this._delta.attr('hidden','')):(this._focus.attr('hidden',null),'delta'===this.modus&&b&&this._delta.attr('hidden',null))}_alignText(a,b,c,d,e,f,g){d=d||0,e=e||0;const h=a.getBBox(),i=this._height,j=this._width;let k=f||'middle',l=g||'ideographic',m=d,n=e;'middle'===k?m+=h.width/2:'end '===k?m+=h.width:void 0;'ideographic'===l?n+=h.height:'middle'===l?n+=h.height/2:'hanging'===l?n-=h.height:void 0;0>=c-n?(l='hanging',c=h.height):c+n>i&&(l='ideographic',c=i),b+m>=j?(k='end',b=j):0>=b-m&&(k='start',b=0),a.setAttribute('x',b+d),a.setAttribute('y',c-e),a.setAttribute('text-anchor',k),a.setAttribute('alignment-baseline',l)}_modusChanged(a){switch(a){case'zoom':break;case'delta':break;case'integral':break;default:}this._fixedValue=null,this._focusedValue=null}_dotClicked(a){const b=this._zoom.node().__zoom,c=this._fixedValue;let d,e,f,g;switch(this.modus){case'hold':if(!(c&&void 0!==c.x&&void 0!==c.y&&c.x===a.x&&c.y===a.y)){if(this._fixedValue=a,g='hold'===this.modus&&a.g.item.color?a.g.item.color:'#fff',console.log(g),a.g.item.threshold)switch(a.g.checkExceedingState(a)){case 1:g=a.g.getComputedStyleValue('--device-state-exceeds-color')||'#F20C0C';break;case-1:g=a.g.getComputedStyleValue('--device-state-deceeds-color')||'#F20C0C';}this._focusDot.attr('fill',g)}else this._fixedValue=null,this._focusDot.attr('fill','#fff'),this._hideInfo();break;case'zoom':d=a.g.scaleX(+a.x)-this._width/6,e=(a.g.scaleY(+a.y)||0)-this._height/6,f=3*b.k,e=(b.y-e)/b.k,d=(b.x-d)/b.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(f).translate(d,e));break;case'delta':c&&c.x!==void 0&&c.y!==void 0&&c.x===a.x&&c.y===a.y?(this._fixedValue=null,this._hideDelta(),this._deltaDot.attr('fill','#fff')):(this._fixedValue=a,this._deltaDot.datum(a).attr('cx',(a)=>a.g.scaleX(a.x)).attr('cy',(a)=>a.g.scaleY(a.y)).attr('r',this._focusDot.attr('r')).attr('fill',this._focusDot.attr('fill')));}this._updateInfo()}closeMenu(){this.showMenu=!1}_interpolationChanged(a){this._graphs.forEach((b)=>{b&&b._isAttached&&b.set('interpolation',a)}),this.redraw()}_onAxisBrushEnd(a){if(d3.event.sourceEvent&&'zoom'===d3.event.sourceEvent.type)return;const b=d3.event.selection;if(!b)return;if(!this.multiAxesY&&!this.multiAxesX)return'x'===a&&this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),void('y'===a&&this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null));const c='y'===a;let d,e,f,g,h;c&&(d=b.map(this.scaleY.invert,this.scaleY).sort((c,a)=>c>a),this._graphs.forEach((a)=>{a.scaleY.domain(d).nice(),a.axisGeneratorY.scale(a.scaleY)}),this.axisY._isBrushed=!0,this.scaleY.domain(d).nice(),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.axisY.select('.brush').call(this.axisBrushGeneratorY.move,null),e=this._zoom.node().__zoom,f=e.k*this._height/(b[1]-b[0]),g=(e.y-b[0])/e.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(f).translate(0,g))),c||(d=b.map(this.scaleX.invert,this.scaleX).sort((c,a)=>c>a),this._graphs.forEach((a)=>{a.scaleX.domain(d),a.axisGeneratorX.scale(a.scaleX)}),this.axisX._isBrushed=!0,this.scaleX.domain(d),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.axisX.select('.brush').call(this.axisBrushGeneratorX.move,null),e=this._zoom.node().__zoom,f=e.k*this._width/(b[1]-b[0]),h=(e.x-b[0])/e.k,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(f).translate(h,0))),this._graphs.forEach((a)=>{a.redraw()}),this._updateInfo()}_onZoomed(){if(d3.event.sourceEvent&&'brush'===d3.event.sourceEvent.type)return;const a=d3.event.transform;if(!this.domainX||!this.domainY)return;const b=d3.event.transform.rescaleX(this.scaleX.domain(this.domainX)),c=d3.event.transform.rescaleY(this.scaleY.domain(this.domainY).nice());let d;this.multiAxesX||(d=b.domain(),this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(a.scaleX.domain(d),a.axisGeneratorX.scale(a.scaleX))}),this.scaleX.domain(d),this.axisX.call(this.axisGeneratorX.scale(this.scaleX)),this.hasGrid&&this.gridX.call(this.gridGeneratorX.scale(this.scaleX))),this.multiAxesY||(d=c.domain(),this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(a.scaleY.domain(d),a.axisGeneratorY.scale(a.scaleY))}),this.scaleY.domain(d),this.axisY.call(this.axisGeneratorY.scale(this.scaleY)),this.hasGrid&&this.gridY.call(this.gridGeneratorY.scale(this.scaleY))),this._graphs.forEach((a)=>{a.redraw()}),this._isZoomed=1!==a.k||0!==a.x||0!==a.y,this._updateInfo()}_onAxisClicked(a){return this._activeToggleAxisJob?(clearTimeout(this._activeToggleAxisJob),this._activeToggleAxisJob=null,void((a._isBrushed||this._isZoomed)&&this._resetZoom())):void super._onAxisClicked(a)}_onAxisContextMenu(a){d3.event&&d3.event.preventDefault(),this._isZoomed?this._resetZoom():super._onAxisContextMenu(a),this._debouncedHideInfo()}toggleOptions(){this.showControl=!this.showControl}_resetZoom(a){d3.event?d3.event.preventDefault():a&&a.preventDefault&&a.preventDefault(),this.showControl=!1,this._isZoomed=!1,this._fixedValue=null,this._focusedValue=null,this._zoom.transition(300).call(this._zoomBehavior.transform,d3.zoomIdentity.scale(1)),this.axisX._isBrushed=!1,this.axisY._isBrushed=!1,this._graphs.forEach((a)=>{a._isAttached&&a.scaleX&&a.scaleY&&(a.axisX._isBrushed=!1,a.axisY._isBrushed=!1,a.domainX&&a.domainX.some((a)=>void 0===a||null===a)&&a.scaleX.domain(a.domainX),a.domainY&&a.domainY.some((a)=>void 0===a||null===a)&&a.scaleY.domain(a.domainY).nice(),a.axisX.transition().call(a.axisGeneratorX.scale(a.scaleX)),a.axisY.transition().call(a.axisGeneratorY.scale(a.scaleY)))}),this.autoHideInfoDisabled||this._hideInfo(),this._redomain()}_openExportDialog(){this._isFullscreen()&&this.exitFullscreen(),window._exportChartDialog?window._exportChartDialog.setChartElement(this):(window._exportChartDialog=new WebvisualElements.DeviceChartDialogExport(this),document.body.appendChild(window._exportChartDialog)),window._exportChartDialog.open()}}customElements.define(DeviceChart.is,DeviceChart);</script></dom-module><script>Polymer.IronControlState={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:'_disabledChanged',reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}},__handleEventRetargeting:{type:Boolean,value:function(){return!this.shadowRoot&&!Polymer.Element}}},observers:['_changedControlState(focused, disabled)'],ready:function(){this.addEventListener('focus',this._boundFocusBlurHandler,!0),this.addEventListener('blur',this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(a){if(Polymer.Element)return void this._setFocused('focus'===a.type);if(a.target===this)this._setFocused('focus'===a.type);else if(this.__handleEventRetargeting){var b=Polymer.dom(a).localTarget;this.isLightDescendant(b)||this.fire(a.type,{sourceEvent:a},{node:this,bubbles:a.bubbles,cancelable:a.cancelable})}},_disabledChanged:function(a){this.setAttribute('aria-disabled',a?'true':'false'),this.style.pointerEvents=a?'none':'',a?(this._oldTabIndex=this.getAttribute('tabindex'),this._setFocused(!1),this.tabIndex=-1,this.blur()):this._oldTabIndex!==void 0&&(null===this._oldTabIndex?this.removeAttribute('tabindex'):this.setAttribute('tabindex',this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};</script><script>Polymer.IronButtonStateImpl={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:'_pressedChanged'},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:'aria-pressed',observer:'_ariaActiveAttributeChanged'}},listeners:{down:'_downHandler',up:'_upHandler',tap:'_tapHandler'},observers:['_focusChanged(focused)','_activeChanged(active, ariaActiveAttribute)'],keyBindings:{"enter:keydown":'_asyncClick',"space:keydown":'_spaceKeyDownHandler',"space:keyup":'_spaceKeyUpHandler'},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(a){this._detectKeyboardFocus(a),a||this._setPressed(!1)},_detectKeyboardFocus:function(a){this._setReceivedFocusFromKeyboard(!this.pointerDown&&a)},_userActivate:function(a){this.active!==a&&(this.active=a,this.fire('change'))},_downHandler:function(){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(b.preventDefault(),b.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(a){var b=a.detail.keyboardEvent,c=Polymer.dom(b).localTarget;this.isLightDescendant(c)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(){this._changedButtonState()},_ariaActiveAttributeChanged:function(a,b){b&&b!=a&&this.hasAttribute(b)&&this.removeAttribute(b)},_activeChanged:function(a){this.toggles?this.setAttribute(this.ariaActiveAttribute,a?'true':'false'):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Polymer.IronButtonState=[Polymer.IronA11yKeysBehavior,Polymer.IronButtonStateImpl];</script><script>Polymer.PaperRippleBehavior={properties:{noink:{type:Boolean,observer:'_noinkChanged'},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(a){Polymer.IronButtonStateImpl._downHandler.call(this,a),this.pressed&&this.ensureRipple(a)},ensureRipple:function(a){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var b=this._rippleContainer||this.root;if(b&&Polymer.dom(b).appendChild(this._ripple),a){var c=Polymer.dom(this._rippleContainer||this),d=Polymer.dom(a).rootTarget;c.deepContains(d)&&this._ripple.uiDownAction(a)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return!!this._ripple},_createRipple:function(){var a=document.createElement('paper-ripple');return a},_noinkChanged:function(a){this.hasRipple()&&(this._ripple.noink=a)}};</script><dom-module id="ripple-container" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;}paper-ripple{color:var(--highlight-color, currentColor);}</style><slot></slot></template><script>class RippleContainer extends Polymer.mixinBehaviors([Polymer.PaperRippleBehavior],Polymer.Element){static get is(){return'ripple-container'}constructor(){super(),this._isDown=!1}ready(){super.ready(),this.addEventListener('focus',(a)=>this._onFocus(a),!0),this.addEventListener('blur',(a)=>this._onBlur(a),!0),this.addEventListener('down',(a)=>this._rippleDown(a)),this.addEventListener('up',(a)=>this._rippleUp(a))}_onFocus(a){this._isDown||this._rippleDown(a)}_onBlur(a){this._rippleUp(a)}_rippleDown(a){this._isDown=!0,this.getRipple().downAction(a)}_rippleUp(a){this._isDown=!1,this.getRipple().upAction(a)}}customElements.define(RippleContainer.is,RippleContainer);</script></dom-module><dom-module id="tab-element" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{display:inline-block;position:relative;cursor:pointer;}[hidden]{display:none !important;}#overlay{pointer-events:none;display:none;position:absolute;top:0;right:0;bottom:0;left:0;@apply --tab-overlay;}#container{height:100%;width:100%;position:relative;}:host(.tabs-overlay-static-above) #overlay{display:block;}</style><div id="overlay"></div><ripple-container id="container"><slot></slot></ripple-container></template><script>class TabElement extends Polymer.Element{static get is(){return'tab-element'}}customElements.define(TabElement.is,TabElement);</script></dom-module><dom-module id="tabs-overlay" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{position:absolute;display:none;pointer-events:none;opacity:0;top:0;right:0;bottom:0;left:0;transition-property:top, right, bottom, left, opacity;}:host([persistent]){display:block !important;}[hidden]{display:none !important;}</style><slot></slot></template><script>class TabsOverlay extends Polymer.Element{static get is(){return'tabs-overlay'}static get properties(){return{target:{type:Object,observer:'_targetChanged'}}}constructor(){super(),this._lastTarget=void 0,this._transitionsInFlight=[]}ready(){super.ready(),this.addEventListener('transitionend',(a)=>this._onTransitionend(a))}_targetChanged(a,b){this._transitionsInFlight.length||(this._lastTarget&&this._lastTarget.classList.remove('tabs-overlay-static-above'),this.style.display='block',this._move(b,a),this._lastTarget=this.target)}_onTransitionend(a){let b=this._transitionsInFlight.indexOf(a.propertyName);0<=b&&this._transitionsInFlight.splice(b,1),this._transitionsInFlight.length||this._moveComplete()}_moveComplete(){this._lastTarget===this.target?(this._lastTarget&&this._lastTarget.classList.add('tabs-overlay-static-above'),this.style.display='none'):(this._move(this._lastTarget,this.target),this._lastTarget=this.target)}_move(a,b){const c=a||b,d=b||a;if(!c&&!d)return;const e=a?1:0,f=b?1:0;Polymer.dom.flush();const g=this.getBoundingClientRect(),h=window.getComputedStyle(this),i=c.getBoundingClientRect(),j=d.getBoundingClientRect();if(0===j.top&&0===j.right&&0===j.bottom&&0===j.left&&0===j.width&&0===j.height)return this.style.transitionProperty='none',this.style.opacity=f,this._transitionsInFlight=[],void Polymer.Async.microTask.run(this._moveComplete.bind(this));this.style.transitionProperty='';let k=parseFloat(h.top||'0')+(i.top-g.top),l=parseFloat(h.right||'0')-(i.right-g.right),m=parseFloat(h.bottom||'0')-(i.bottom-g.bottom),n=parseFloat(h.left||'0')+(i.left-g.left);this.style.transitionDuration='0s',this.style.transitionDelay='0s';let o=[this.style.top=k+'px',this.style.right=l+'px',this.style.bottom=m+'px',this.style.left=n+'px',this.style.opacity=e+''];k+=j.top-i.top,l-=j.right-i.right,m-=j.bottom-i.bottom,n+=j.left-i.left;const p=[0.2,0.2,0.2,0.2,0.2],q=[0,0,0,0,0];i.left<j.left&&i.right<j.right?q[3]=0.1:i.left>j.left&&i.right>j.right&&(q[1]=0.1),i.top<j.top&&i.bottom<j.bottom?q[0]=0.1:i.top>j.top&&i.bottom>j.bottom&&(q[2]=0.1);const r=[k+'px',l+'px',m+'px',n+'px',f+''],s=['top','right','bottom','left','opacity'];for(let c=0;c<o.length;c++)o[c]!==r[c]&&(0===p[c]&&0===q[c]||this._transitionsInFlight.push(s[c]));setTimeout(()=>{this.style.transitionDuration=p.map((a)=>a+'s').join(', '),this.style.transitionDelay=q.map((a)=>a+'s').join(', '),this.style.top=k+'px',this.style.right=l+'px',this.style.bottom=m+'px',this.style.left=n+'px',this.style.opacity=f+''},0)}}customElements.define(TabsOverlay.is,TabsOverlay);</script></dom-module><dom-module id="tabs-container" assetpath="../bower_components/webvisual-elements/components/"><template strip-whitespace=""><style>:host{@apply --layout;@apply --layout-start-justified;@apply --layout-center;box-sizing:border-box;position:relative;white-space:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}[hidden]{display:none !important;}#container{-webkit-overflow-scrolling:touch;position:relative;height:100%;display:flex;flex-direction:row;white-space:nowrap;overflow:hidden;pointer-events:all;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#overlay{@apply --tab-overlay;}:host([vertical]){@apply --layout-center-center;}:host([reverse]) #container{flex-direction:row-reverse;}:host([vertical]) #container{flex-direction:column;width:100%;}:host([reverse][vertical]) #container{flex-direction:column-reverse;}:host([vertical]) ::slotted(*){width:100%;}:host(:not([vertical])) ::slotted(*){height:100%;}</style><nav id="container" on-track="_onScroll"><tabs-overlay id="overlay"></tabs-overlay><slot></slot></nav></template><script>class TabsContainer extends Polymer.mixinBehaviors([Polymer.IronMultiSelectableBehavior],Polymer.Element){static get is(){return'tabs-container'}static get properties(){return{vertical:{type:Boolean,value:!1,reflectToAttribute:!0},multi:{type:Boolean,value:!1}}}static get observers(){return['_onSelectedItemChanged(selectedItem)']}connectedCallback(){super.connectedCallback(),this._addScrollListeners()}_addScrollListeners(){this.$.container.addEventListener('scroll',(a)=>this._onScroll(a),{passive:!0}),this.$.container.addEventListener('wheel',(a)=>this._onWheel(a),{passive:!0})}_onSelectedItemChanged(a){a&&(!this.multi&&(this.$.overlay.target=a),setTimeout(()=>{this.vertical?this.$.container.scrollTop=a.offsetTop-this.$.container.offsetTop-this.$.container.clientHeight/2+a.clientHeight/2:this.$.container.scrollLeft=a.offsetLeft-this.$.container.offsetLeft-this.$.container.clientWidth/2+a.clientWidth/2},0))}_onWheel(a){if(!a)return;let b,c;switch(a.deltaMode){case 0:c=0.2;break;case 1:c=20;break;case 2:c=this.$.container.offsetHeight;break;default:c=1;}this.vertical?(b=a.deltaY||0,this.$.container.scrollTop+=b*c):(b=a.deltaX||0,this.$.container.scrollLeft+=b*c)}_onScroll(a,b){a.stopImmediatePropagation();let c;this.vertical?(c=b&&-b.ddy||0,this.$.container.scrollTop+=c):(c=b&&-b.ddx||0,this.$.container.scrollLeft+=c)}reset(){this.set('selectedItem',null),this.set('selectedItems',[]),this.set('selectedValues',[])}}customElements.define(TabsContainer.is,TabsContainer);</script></dom-module><dom-module id="iron-list" assetpath="../bower_components/iron-list/"><template><style>:host{display:block;}@media only screen and (-webkit-max-device-pixel-ratio: 1){:host{will-change:transform;}}#items{@apply --iron-list-items-container;position:relative;}:host(:not([grid])) #items > ::slotted(*){width:100%;}#items > ::slotted(*){box-sizing:border-box;margin:0;position:absolute;top:0;will-change:transform;}</style><array-selector id="selector" items="{{items}}" selected="{{selectedItems}}" selected-item="{{selectedItem}}"></array-selector><div id="items"><slot></slot></div></template></dom-module><script>(function(){var a=Math.floor,b=Math.round,c=Math.abs,d=Math.ceil,e=Math.min,f=Math.max,g=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),h=g&&8<=g[1],j=3,i='-10000px',k=-100,l=null!=Polymer.flush,m=l?Polymer.Async.animationFrame:0,n=l?Polymer.Async.idlePeriod:1,o=l?Polymer.Async.microTask:2;Polymer.OptionalMutableDataBehavior||(Polymer.OptionalMutableDataBehavior={}),Polymer({is:'iron-list',properties:{items:{type:Array},as:{type:String,value:'item'},indexAs:{type:String,value:'index'},selectedAs:{type:String,value:'selected'},grid:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_gridChanged'},selectionEnabled:{type:Boolean,value:!1},selectedItem:{type:Object,notify:!0},selectedItems:{type:Object,notify:!0},multiSelection:{type:Boolean,value:!1},scrollOffset:{type:Number,value:0}},observers:['_itemsChanged(items.*)','_selectionEnabledChanged(selectionEnabled)','_multiSelectionChanged(multiSelection)','_setOverflow(scrollTarget, scrollOffset)'],behaviors:[Polymer.Templatizer,Polymer.IronResizableBehavior,Polymer.IronScrollTargetBehavior,Polymer.OptionalMutableDataBehavior],_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_collection:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedItem:null,_focusedVirtualIndex:-1,_focusedPhysicalIndex:-1,_offscreenFocusedItem:null,_focusBackfillItem:null,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,_templateCost:0,_parentModel:!0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){var a=this.grid?this._physicalRows*this._rowHeight:this._physicalSize;return a-this._viewportHeight},get _itemsParent(){return Polymer.dom(Polymer.dom(this._userTemplate).parentNode)},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){var a=this._convertIndexToCompleteRow(this._virtualCount);return f(0,a-this._physicalCount)},set _virtualStart(a){a=this._clamp(a,0,this._maxVirtualStart),this.grid&&(a-=a%this._itemsPerRow),this._virtualStartVal=a},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(a){a%=this._physicalCount,0>a&&(a=this._physicalCount+a),this.grid&&(a-=a%this._itemsPerRow),this._physicalStartVal=a},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(a){this._physicalCountVal=a},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return 0===this._viewportHeight?Infinity:this._viewportHeight*this._maxPages},get _isVisible(){return!!(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){var a=this._firstVisibleIndexVal;if(null==a){var b=this._physicalTop+this._scrollOffset;a=this._iterateItems(function(a,c){return b+=this._getPhysicalSizeIncrement(a),b>this._scrollPosition?this.grid?c-c%this._itemsPerRow:c:this.grid&&this._virtualCount-1===c?c-c%this._itemsPerRow:void 0})||0,this._firstVisibleIndexVal=a}return a},get lastVisibleIndex(){var a=this._lastVisibleIndexVal;if(null==a){if(this.grid)a=e(this._virtualCount,this.firstVisibleIndex+this._estRowsInView*this._itemsPerRow-1);else{var b=this._physicalTop+this._scrollOffset;this._iterateItems(function(c,d){b<this._scrollBottom&&(a=d),b+=this._getPhysicalSizeIncrement(c)})}this._lastVisibleIndexVal=a}return a},get _defaultScrollTarget(){return this},get _virtualRowCount(){return d(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return d(this._viewportHeight/this._rowHeight)},get _physicalRows(){return d(this._physicalCount/this._itemsPerRow)},get _scrollOffset(){return this._scrollerPaddingTop+this.scrollOffset},ready:function(){this.addEventListener('focus',this._didFocus.bind(this),!0)},attached:function(){this._debounce('_render',this._render,m),this.listen(this,'iron-resize','_resizeHandler'),this.listen(this,'keydown','_keydownHandler')},detached:function(){this.unlisten(this,'iron-resize','_resizeHandler'),this.unlisten(this,'keydown','_keydownHandler')},_setOverflow:function(a){this.style.webkitOverflowScrolling=a===this?'touch':'',this.style.overflowY=a===this?'auto':'',this._lastVisibleIndexVal=null,this._firstVisibleIndexVal=null,this._debounce('_render',this._render,m)},updateViewportBoundaries:function(){var a=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(a['padding-top'],10),this._isRTL=!('rtl'!==a.direction),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight,this.grid&&this._updateGridMetrics()},_scrollHandler:function(){var d=f(0,e(this._maxScrollTop,this._scrollTop)),g=d-this._scrollPosition,h=0<=g;if(this._scrollPosition=d,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,c(g)>this._physicalSize&&0<this._physicalSize){g-=this._scrollOffset;var i=b(g/this._physicalAverage)*this._itemsPerRow;this._virtualStart+=i,this._physicalStart+=i,this._physicalTop=a(this._virtualStart/this._itemsPerRow)*this._physicalAverage,this._update()}else if(0<this._physicalCount){var j=this._getReusables(h);h?(this._physicalTop=j.physicalTop,this._virtualStart+=j.indexes.length,this._physicalStart+=j.indexes.length):(this._virtualStart-=j.indexes.length,this._physicalStart-=j.indexes.length),this._update(j.indexes,h?null:j.indexes),this._debounce('_increasePoolIfNeeded',this._increasePoolIfNeeded.bind(this,0),o)}},_getReusables:function(a){var b,c,d,e,f=[],g=this._hiddenContentSize*this._ratio,h=this._virtualStart,i=this._virtualEnd,j=this._physicalCount,k=this._physicalTop+this._scrollOffset,l=this._physicalBottom+this._scrollOffset,m=this._scrollTop,n=this._scrollBottom;for(a?(b=this._physicalStart,c=this._physicalEnd,d=m-k):(b=this._physicalEnd,c=this._physicalStart,d=l-n);e=this._getPhysicalSizeIncrement(b),d-=e,!(f.length>=j||d<=g);)if(a){if(i+f.length+1>=this._virtualCount)break;if(k+e>=m-this._scrollOffset)break;f.push(b),k+=e,b=(b+1)%j}else{if(0>=h-f.length)break;if(k+this._physicalSize-e<=n)break;f.push(b),k-=e,b=0===b?j-1:b-1}return{indexes:f,physicalTop:k-this._scrollOffset}},_update:function(a,b){if(!(a&&0===a.length||0===this._physicalCount)){if(this._manageFocus(),this._assignModels(a),this._updateMetrics(a),b)for(;b.length;){var c=b.pop();this._physicalTop-=this._getPhysicalSizeIncrement(c)}this._positionItems(),this._updateScrollerSize()}},_createPool:function(a){this._ensureTemplatized();var b,c,d=Array(a);for(b=0;b<a;b++)c=this.stamp(null),d[b]=c.root.querySelector('*'),this._itemsParent.appendChild(c.root);return d},_isClientFull:function(){return 0!=this._scrollBottom&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(a){var c=this._clamp(this._physicalCount+a,j,this._virtualCount-this._virtualStart);if(c=this._convertIndexToCompleteRow(c),this.grid){var d=c%this._itemsPerRow;d&&c-d<=this._physicalCount&&(c+=this._itemsPerRow),c-=d}var e=c-this._physicalCount,f=b(0.5*this._physicalCount);if(!(0>e)){if(0<e){var g=window.performance.now();[].push.apply(this._physicalItems,this._createPool(e));for(var h=0;h<e;h++)this._physicalSizes.push(0);this._physicalCount+=e,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart+=e),this._update(),this._templateCost=(window.performance.now()-g)/e,f=b(0.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||0===f||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce('_increasePoolIfNeeded',this._increasePoolIfNeeded.bind(this,this._clamp(b(50/this._templateCost),1,f)),n):this._debounce('_increasePoolIfNeeded',this._increasePoolIfNeeded.bind(this,f),o))}},_render:function(){if(this.isAttached&&this._isVisible)if(0!==this._physicalCount){var a=this._getReusables(!0);this._physicalTop=a.physicalTop,this._virtualStart+=a.indexes.length,this._physicalStart+=a.indexes.length,this._update(a.indexes),this._update(),this._increasePoolIfNeeded(0)}else 0<this._virtualCount&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(j))},_ensureTemplatized:function(){if(!this.ctor){this._userTemplate=this.queryEffectiveChildren('template'),this._userTemplate||console.warn('iron-list requires a template to be provided in light-dom');var a={};a.__key__=!0,a[this.as]=!0,a[this.indexAs]=!0,a[this.selectedAs]=!0,a.tabIndex=!0,this._instanceProps=a,this.templatize(this._userTemplate,this.mutableData)}},_gridChanged:function(a,b){'undefined'===typeof b||(this.notifyResize(),Polymer.flush?Polymer.flush():Polymer.dom.flush(),a&&this._updateGridMetrics())},_itemsChanged:function(a){if('items'===a.path)this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._collection=this.items&&Polymer.Collection?Polymer.Collection.get(this.items):null,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._removeFocusedItem(),this._debounce('_render',this._render,m);else if('items.splices'===a.path){this._adjustVirtualIndex(a.value.indexSplices),this._virtualCount=this.items?this.items.length:0;var b=this._getActiveElement();this.contains(b)&&b.blur();var c=a.value.indexSplices.some(function(a){return a.index+a.addedCount>=this._virtualStart&&a.index<=this._virtualEnd},this);(!this._isClientFull()||c)&&this._debounce('_render',this._render,m)}else'items.length'!==a.path&&this._forwardItemPath(a.path,a.value)},_forwardItemPath:function(a,b){a=a.slice(6);var c=a.indexOf('.');-1===c&&(c=a.length);var d,e,f,g=this.modelForElement(this._offscreenFocusedItem);if(l){var h=parseInt(a.substring(0,c),10);if(d=this._isIndexRendered(h),d?(e=this._getPhysicalIndex(h),f=this.modelForElement(this._physicalItems[e])):g&&(f=g),!f||f[this.indexAs]!==h)return}else{var i=a.substring(0,c);if(g&&g.__key__===i)f=g;else if(e=this._physicalIndexForKey[i],f=this.modelForElement(this._physicalItems[e]),!f||f.__key__!==i)return}a=a.substring(c+1),a=this.as+(a?'.'+a:''),l?f._setPendingPropertyOrPath(a,b,!1,!0):f.notifyPath(a,b,!0),f._flushProperties&&f._flushProperties(!0),d&&(this._updateMetrics([e]),this._positionItems(),this._updateScrollerSize())},_adjustVirtualIndex:function(a){a.forEach(function(a){if(a.removed.forEach(this._removeItem,this),a.index<this._virtualStart){var b=f(a.addedCount-a.removed.length,a.index-this._virtualStart);this._virtualStart+=b,0<=this._focusedVirtualIndex&&(this._focusedVirtualIndex+=b)}},this)},_removeItem:function(a){this.$.selector.deselect(a),this._focusedItem&&this.modelForElement(this._focusedItem)[this.as]===a&&this._removeFocusedItem()},_iterateItems:function(a,b){var c,d,e,f;if(2===arguments.length&&b){for(f=0;f<b.length;f++)if(c=b[f],d=this._computeVidx(c),null!=(e=a.call(this,c,d)))return e;}else{for(c=this._physicalStart,d=this._virtualStart;c<this._physicalCount;c++,d++)if(null!=(e=a.call(this,c,d)))return e;for(c=0;c<this._physicalStart;c++,d++)if(null!=(e=a.call(this,c,d)))return e}},_computeVidx:function(a){return a>=this._physicalStart?this._virtualStart+(a-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+a},_assignModels:function(a){this._iterateItems(function(a,b){var c=this._physicalItems[a],d=this.items&&this.items[b];if(null!=d){var e=this.modelForElement(c);e.__key__=this._collection?this._collection.getKey(d):null,this._forwardProperty(e,this.as,d),this._forwardProperty(e,this.selectedAs,this.$.selector.isSelected(d)),this._forwardProperty(e,this.indexAs,b),this._forwardProperty(e,'tabIndex',this._focusedVirtualIndex===b?0:-1),this._physicalIndexForKey[e.__key__]=a,e._flushProperties&&e._flushProperties(!0),c.removeAttribute('hidden')}else c.setAttribute('hidden','')},a)},_updateMetrics:function(a){Polymer.flush?Polymer.flush():Polymer.dom.flush();var c=0,e=0,f=this._physicalAverageCount,g=this._physicalAverage;this._iterateItems(function(a){e+=this._physicalSizes[a],this._physicalSizes[a]=this._physicalItems[a].offsetHeight,c+=this._physicalSizes[a],this._physicalAverageCount+=this._physicalSizes[a]?1:0},a),this.grid?(this._updateGridMetrics(),this._physicalSize=d(this._physicalCount/this._itemsPerRow)*this._rowHeight):(e=1===this._itemsPerRow?e:d(this._physicalCount/this._itemsPerRow)*this._rowHeight,this._physicalSize=this._physicalSize+c-e,this._itemsPerRow=1),this._physicalAverageCount!==f&&(this._physicalAverage=b((g*f+c)/this._physicalAverageCount))},_updateGridMetrics:function(){this._itemWidth=0<this._physicalCount?this._physicalItems[0].getBoundingClientRect().width:200,this._rowHeight=0<this._physicalCount?this._physicalItems[0].offsetHeight:200,this._itemsPerRow=this._itemWidth?a(this._viewportWidth/this._itemWidth):this._itemsPerRow},_positionItems:function(){this._adjustScrollPosition();var b=this._physicalTop;if(this.grid){var c=this._itemsPerRow*this._itemWidth,d=(this._viewportWidth-c)/2;this._iterateItems(function(c,e){var f=e%this._itemsPerRow,g=a(f*this._itemWidth+d);this._isRTL&&(g*=-1),this.translate3d(g+'px',b+'px',0,this._physicalItems[c]),this._shouldRenderNextRow(e)&&(b+=this._rowHeight)})}else this._iterateItems(function(a){this.translate3d(0,b+'px',0,this._physicalItems[a]),b+=this._physicalSizes[a]})},_getPhysicalSizeIncrement:function(a){return this.grid?this._computeVidx(a)%this._itemsPerRow===this._itemsPerRow-1?this._rowHeight:0:this._physicalSizes[a]},_shouldRenderNextRow:function(a){return a%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var a=0===this._virtualStart?this._physicalTop:e(this._scrollPosition+this._physicalTop,0);if(0!==a){this._physicalTop-=a;var b=this._scrollTop;!h&&0<b&&this._resetScrollPosition(b-a)}},_resetScrollPosition:function(a){this.scrollTarget&&0<=a&&(this._scrollTop=a,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(a){this._estScrollHeight=this.grid?this._virtualRowCount*this._rowHeight:this._physicalBottom+f(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,a=a||0===this._scrollHeight,a=a||this._scrollPosition>=this._estScrollHeight-this._physicalSize,a=a||this.grid&&this.$.items.style.height<this._estScrollHeight,(a||c(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToItem:function(a){return this.scrollToIndex(this.items.indexOf(a))},scrollToIndex:function(b){if(!('number'!==typeof b||0>b||b>this.items.length-1)&&(Polymer.flush?Polymer.flush():Polymer.dom.flush(),0!==this._physicalCount)){b=this._clamp(b,0,this._virtualCount-1),(!this._isIndexRendered(b)||b>=this._maxVirtualStart)&&(this._virtualStart=this.grid?b-2*this._itemsPerRow:b-1),this._manageFocus(),this._assignModels(),this._updateMetrics(),this._physicalTop=a(this._virtualStart/this._itemsPerRow)*this._physicalAverage;for(var c=this._physicalStart,d=this._virtualStart,e=0,f=this._hiddenContentSize;d<b&&e<=f;)e+=this._getPhysicalSizeIncrement(c),c=(c+1)%this._physicalCount,d++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+e),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null}},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce('_render',function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null;c(this._viewportHeight-this._scrollTargetHeight);this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},m)},selectItem:function(a){return this.selectIndex(this.items.indexOf(a))},selectIndex:function(a){if(!(0>a||a>=this._virtualCount)){if(!this.multiSelection&&this.selectedItem&&this.clearSelection(),this._isIndexRendered(a)){var b=this.modelForElement(this._physicalItems[this._getPhysicalIndex(a)]);b&&(b[this.selectedAs]=!0),this.updateSizeForIndex(a)}this.$.selector.selectIndex?this.$.selector.selectIndex(a):this.$.selector.select(this.items[a])}},deselectItem:function(a){return this.deselectIndex(this.items.indexOf(a))},deselectIndex:function(a){if(!(0>a||a>=this._virtualCount)){if(this._isIndexRendered(a)){var b=this.modelForElement(this._physicalItems[this._getPhysicalIndex(a)]);b[this.selectedAs]=!1,this.updateSizeForIndex(a)}this.$.selector.deselectIndex?this.$.selector.deselectIndex(a):this.$.selector.deselect(this.items[a])}},toggleSelectionForItem:function(a){return this.toggleSelectionForIndex(this.items.indexOf(a))},toggleSelectionForIndex:function(a){var b=this.$.selector.isIndexSelected?this.$.selector.isIndexSelected(a):this.$.selector.isSelected(this.items[a]);b?this.deselectIndex(a):this.selectIndex(a)},clearSelection:function(){this._iterateItems(function(a){this.modelForElement(this._physicalItems[a])[this.selectedAs]=!1}),this.$.selector.clearSelection()},_selectionEnabledChanged:function(a){var b=a?this.listen:this.unlisten;b.call(this,this,'tap','_selectionHandler')},_selectionHandler:function(a){var b=this.modelForElement(a.target);if(b){var c,d,e=Polymer.dom(a).path[0],f=this._getActiveElement(),g=this._physicalItems[this._getPhysicalIndex(b[this.indexAs])];'input'!==e.localName&&'button'!==e.localName&&'select'!==e.localName&&(c=b.tabIndex,b.tabIndex=k,d=f?f.tabIndex:-1,b.tabIndex=c,f&&g!==f&&g.contains(f)&&d!==k||this.toggleSelectionForItem(b[this.as]))}},_multiSelectionChanged:function(a){this.clearSelection(),this.$.selector.multi=a},updateSizeForItem:function(a){return this.updateSizeForIndex(this.items.indexOf(a))},updateSizeForIndex:function(a){return this._isIndexRendered(a)?(this._updateMetrics([this._getPhysicalIndex(a)]),this._positionItems(),null):null},_manageFocus:function(){var a=this._focusedVirtualIndex;0<=a&&a<this._virtualCount?this._isIndexRendered(a)?this._restoreFocusedItem():this._createFocusBackfillItem():0<this._virtualCount&&0<this._physicalCount&&(this._focusedPhysicalIndex=this._physicalStart,this._focusedVirtualIndex=this._virtualStart,this._focusedItem=this._physicalItems[this._physicalStart])},_convertIndexToCompleteRow:function(a){return this._itemsPerRow=this._itemsPerRow||1,this.grid?d(a/this._itemsPerRow)*this._itemsPerRow:a},_isIndexRendered:function(a){return a>=this._virtualStart&&a<=this._virtualEnd},_isIndexVisible:function(a){return a>=this.firstVisibleIndex&&a<=this.lastVisibleIndex},_getPhysicalIndex:function(a){return l?(this._physicalStart+(a-this._virtualStart))%this._physicalCount:this._physicalIndexForKey[this._collection.getKey(this.items[a])]},focusItem:function(a){this._focusPhysicalItem(a)},_focusPhysicalItem:function(a){if(!(0>a||a>=this._virtualCount)){this._restoreFocusedItem(),this._isIndexRendered(a)||this.scrollToIndex(a);var b,c=this._physicalItems[this._getPhysicalIndex(a)],d=this.modelForElement(c);d.tabIndex=k,c.tabIndex===k&&(b=c),b||(b=Polymer.dom(c).querySelector('[tabindex="'+k+'"]')),d.tabIndex=0,this._focusedVirtualIndex=a,b&&b.focus()}},_removeFocusedItem:function(){this._offscreenFocusedItem&&this._itemsParent.removeChild(this._offscreenFocusedItem),this._offscreenFocusedItem=null,this._focusBackfillItem=null,this._focusedItem=null,this._focusedVirtualIndex=-1,this._focusedPhysicalIndex=-1},_createFocusBackfillItem:function(){var a=this._focusedPhysicalIndex;if(!(this._offscreenFocusedItem||0>this._focusedVirtualIndex)){if(!this._focusBackfillItem){var b=this.stamp(null);this._focusBackfillItem=b.root.querySelector('*'),this._itemsParent.appendChild(b.root)}this._offscreenFocusedItem=this._physicalItems[a],this.modelForElement(this._offscreenFocusedItem).tabIndex=0,this._physicalItems[a]=this._focusBackfillItem,this._focusedPhysicalIndex=a,this.translate3d(0,i,0,this._offscreenFocusedItem)}},_restoreFocusedItem:function(){if(this._offscreenFocusedItem&&!(0>this._focusedVirtualIndex)){this._assignModels();var a=this._focusedPhysicalIndex,b=this._physicalItems[a];if(b){var c=this.modelForElement(b),d=this.modelForElement(this._offscreenFocusedItem);c[this.as]===d[this.as]?(this._focusBackfillItem=b,c.tabIndex=-1,this._physicalItems[a]=this._offscreenFocusedItem,this.translate3d(0,i,0,this._focusBackfillItem)):(this._removeFocusedItem(),this._focusBackfillItem=null),this._offscreenFocusedItem=null}}},_didFocus:function(a){var b=this.modelForElement(a.target),c=this.modelForElement(this._focusedItem),d=null!==this._offscreenFocusedItem,e=this._focusedVirtualIndex;b&&(c===b?!this._isIndexVisible(e)&&this.scrollToIndex(e):(this._restoreFocusedItem(),c&&(c.tabIndex=-1),b.tabIndex=0,e=b[this.indexAs],this._focusedVirtualIndex=e,this._focusedPhysicalIndex=this._getPhysicalIndex(e),this._focusedItem=this._physicalItems[this._focusedPhysicalIndex],d&&!this._offscreenFocusedItem&&this._update()))},_keydownHandler:function(a){switch(a.keyCode){case 40:a.preventDefault(),this._focusPhysicalItem(this._focusedVirtualIndex+(this.grid?this._itemsPerRow:1));break;case 39:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?-1:1));break;case 38:this._focusPhysicalItem(this._focusedVirtualIndex-(this.grid?this._itemsPerRow:1));break;case 37:this.grid&&this._focusPhysicalItem(this._focusedVirtualIndex+(this._isRTL?1:-1));break;case 13:this._focusPhysicalItem(this._focusedVirtualIndex),this._selectionHandler(a);}},_clamp:function(a,b,c){return e(c,f(b,a))},_debounce:function(a,b,c){l?(this._debouncers=this._debouncers||{},this._debouncers[a]=Polymer.Debouncer.debounce(this._debouncers[a],c,b.bind(this)),Polymer.enqueueDebouncer(this._debouncers[a])):Polymer.dom.addDebouncer(this.debounce(a,b))},_forwardProperty:function(a,b,c){l?a._setPendingProperty(b,c):a[b]=c},_forwardHostPropV2:function(a,b){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(c){c&&this.modelForElement(c).forwardHostProp(a,b)},this)},_notifyInstancePropV2:function(a,b,c){if(Polymer.Path.matches(this.as,b)){var d=a[this.indexAs];b==this.as&&(this.items[d]=c),this.notifyPath(Polymer.Path.translate(this.as,'items.'+d,b),c)}},_getStampedChildren:function(){return this._physicalItems},_forwardInstancePath:function(a,b,c){0===b.indexOf(this.as+'.')&&this.notifyPath('items.'+a.__key__+'.'+b.slice(this.as.length+1),c)},_forwardParentPath:function(a,b){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(c){c&&this.modelForElement(c).notifyPath(a,b,!0)},this)},_forwardParentProp:function(a,b){(this._physicalItems||[]).concat([this._offscreenFocusedItem,this._focusBackfillItem]).forEach(function(c){c&&(this.modelForElement(c)[a]=b)},this)},_getActiveElement:function(){var a=this._itemsParent.node.domHost;return Polymer.dom(a?a.root:document).activeElement}})})();</script><dom-module id="device-table" assetpath="../bower_components/webvisual-elements/device/table-element/"><template strip-whitespace=""><style>:host{color:var(--table-color, currentColor);background-color:var(--table-background, transparent);@apply --layout-vertical;width:100%;height:100%;position:relative;border-color:inherit;border-radius:inherit;min-width:150px;min-height:75px;text-align:left;line-height:1.4;pointer-events:all;font-weight:400;}span{position:relative;padding:0 0.5em;}.tr{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.7em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.tr:not([state]), .tr[state="0"]{background:transparent;color:inherit;}.tr:nth-of-type(even){background:rgba(137, 137, 137, 0.15);}.tr[state="1"]{background:var(--device-state-exceeds-color, #eb5f73);color:var(--device-state-exceeds-text-color, var(--secondary-text-color));}.tr[state="-1"]{background:var(--device-state-deceeds-color, #af82b9);color:var(--device-state-deceeds-text-color, var(--secondary-text-color));}.tr[onlyfirstrow] > span:not(:first-of-type){display:none;}#head{@apply --layout-horizontal;@apply --layout-around-justified;font-size:0.8em;width:100%;line-height:1.7;border-bottom-style:solid;border-bottom-width:thin;border-color:inherit;cursor:pointer;text-align:center;}#caption{font-weight:500;display:block;position:relative;font-size:0.6em;background-color:rgba(0, 0, 0, 0.2);color:currentColor;padding:0.5em 1em;text-align:center;-webkit-user-select:all;-moz-user-select:all;-ms-user-select:all;user-select:all;}[hidden]{display:none !important;}#list{height:auto;width:100%;flex:1 1 50px;}::selection{background:transparent;}::-moz-selection{background:transparent;}</style><section id="head" hidden$="[[hideHeader]]" on-click="_toggleGridView"><span>Datum</span> <span hidden$="[[onlyFirstRow]]">Wert <span hidden$="[[!item.unit]]" style="font-style:italic;">([[item.unit]])</span></span></section><iron-list id="list" items="[[values]]" as="value"><template><div class="tr" state$="[[checkExceedingState(value)]]" onlyfirstrow$="[[onlyFirstRow]]"><span>[[computeDate(value.x)]]</span> <span>[[computeValue(value.y)]]</span></div></template></iron-list><section id="caption" hidden$="[[!caption]]">[[caption]]</section></template><script>class DeviceTable extends WebvisualMixins.DeviceMixin(Polymer.Element){static get is(){return'device-table'}static get properties(){return{caption:{type:String,value:''},keysForCaption:{type:Boolean},onlyFirstRow:{type:Boolean},hideHeader:{type:Boolean},fullDate:{type:Boolean},viewLength:{type:Number,value:Number.POSITIVE_INFINITY},storeInside:{type:Boolean,value:!1}}}static get observers(){return['_computeKeysForCaption(keysForCaption, item)']}insertValues(a){a&&a.length?setTimeout(()=>{if(!this._initialized)this.set('values',a.reverse()),this._initialized=!0;else for(let b=0;b<a.length;b++)this.unshift('values',a[b])},0):!this._initialized&&this.renderClearing()}spliceValues(a){setTimeout(()=>{const b=[];for(let c=0;c<a.length;c++){let d;for(d=this.values.length-1;0<=d&&!(this.values[d].x===a[c].x);d--);-1!==d&&(this.values.splice(d,1),b.push({index:d,removed:[this.values[d]],addedCount:0,object:this.values,type:'splice'}))}this.notifySplices('values',b)},0)}renderClearing(){this.$.list.set('items',[])}_computeKeysForCaption(a,b){if(a&&b&&b.keys){let a='';for(let b in this.item.keys)a+=this.item.keys[b]+' ';this.$.caption.textContent=a}else this.caption&&(this.$.caption.textContent=this.caption)}_toggleGridView(){this.$.list.grid=!this.$.list.grid}}customElements.define(DeviceTable.is,DeviceTable);</script></dom-module><dom-module id="device-table-group" assetpath="../bower_components/webvisual-elements/device/table-element/"><template strip-whitespace=""><style>:host{@apply --layout-vertical;position:relative;box-sizing:border-box;}#tabs{width:100%;flex-shrink:0;background-color:rgba(0, 0, 0, 0.2);--tab-overlay:{background-color:rgba(0, 0, 0, 0.2);color:currentColor;border-bottom:0.2em solid var(--secondary-color, var(--highlight-color, currentColor));border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}#tables{position:relative;box-sizing:border-box;flex:1 0 0.0001px;}.tab{font-size:0.75em;height:auto;box-sizing:border-box;border-radius:0;white-space:nowrap;}.hidden{display:none;}</style><tabs-container id="tabs" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><tab-element class="tab" title$="[[item.mount]]"><device-caption class="caption" title$="[[item.title]]" keys="[[item.keys]]"></device-caption></tab-element></template></tabs-container><iron-pages id="tables" selected="{{selectedMount}}" attr-for-selected="title"><template is="dom-repeat" items="[[items]]"><device-table title="[[item.mount]]" item="[[item]]" no-link="[[!opened]]"></device-table></template></iron-pages></template><script>class DeviceTableGroup extends Polymer.Element{static get is(){return'device-table-group'}static get properties(){return{opened:{type:Boolean,notify:!0},items:{type:Array,notify:!0},selectedItemMount:{type:String,notify:!0}}}static get observers(){return['_shouldHideTabs(items.length)']}_shouldHideTabs(a){2>a?this.$.tabs.classList.add('hidden'):this.$.tabs.classList.remove('hidden'),1===a&&this.set('selectedItemMount',this.items[0].mount)}reset(){this.set('items',[]),this.set('selectedItemMount','')}}customElements.define(DeviceTableGroup.is,DeviceTableGroup);</script></dom-module><script type="text/javascript">var d3=function(ee){"use strict";function p(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function q(a){var o;return 1===a.length&&(o=a,a=function(e,t){return p(o(e),t)}),{left:function(o,t,n,e){for(null==n&&(n=0),null==e&&(e=o.length);n<e;){var l=n+e>>>1;0>a(o[l],t)?n=l+1:e=l}return n},right:function(o,t,n,e){for(null==n&&(n=0),null==e&&(e=o.length);n<e;){var l=n+e>>>1;0<a(o[l],t)?e=l:n=l+1}return n}}}function T(l,s,d){var c,r,i,o,u=-1;if(d=+d,(l=+l)===(s=+s)&&0<d)return[l];if((c=s<l)&&(r=l,l=s,s=r),0===(o=y(l,s,d))||!isFinite(o))return[];if(0<o)for(l=Ar(l/o),s=Ur(s/o),i=Array(r=Ar(s-l+1));++u<r;)i[u]=(l+u)*o;else for(l=Ur(l*o),s=Ar(s*o),i=Array(r=Ar(l-s+1));++u<r;)i[u]=(l-u)/o;return c&&i.reverse(),i}function y(l,t,n){var e=(t-l)/Mr(0,n),r=Ur(zr(e)/Sr),d=e/Cr(10,r);return 0<=r?(s<=d?10:u<=d?5:a<=d?2:1)*Cr(10,r):-Cr(10,-r)/(s<=d?10:u<=d?5:a<=d?2:1)}function te(l,t,n){var e=kr(t-l)/Mr(0,n),r=Cr(10,Ur(zr(e)/Sr)),d=e/r;return s<=d?r*=10:u<=d?r*=5:a<=d&&(r*=2),t<l?-r:r}function l(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function k(){return new l}function r(e){return function(){return e}}function e(e){this._context=e}function m(n){return new e(n)}function i(e){return e[0]}function o(e){return e[1]}function n(){function e(_){var t,p,e,r=_.length,i=!1;for(null==s&&(l=c(e=k())),t=0;t<=r;++t)!(t<r&&a(p=_[t],t,_))===i&&((i=!i)?l.lineStart():l.lineEnd()),i&&l.point(+d(p,t,_),+u(p,t,_));if(e)return l=null,e+""||null}var d=i,u=o,a=r(!0),s=null,c=m,l=null;return e.x=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),e):d},e.y=function(n){return arguments.length?(u="function"==typeof n?n:r(+n),e):u},e.defined=function(n){return arguments.length?(a="function"==typeof n?n:r(!!n),e):a},e.curve=function(n){return arguments.length?(c=n,null!=s&&(l=c(s)),e):c},e.context=function(n){return arguments.length?(null==n?s=l=null:l=c(s=n),e):s},e}function d(o,t,n){o._context.bezierCurveTo((2*o._x0+o._x1)/3,(2*o._y0+o._y1)/3,(o._x0+2*o._x1)/3,(o._y0+2*o._y1)/3,(o._x0+4*o._x1+t)/6,(o._y0+4*o._y1+n)/6)}function _(e){this._context=e}function v(o,t,n){o._context.bezierCurveTo(o._x1+o._k*(o._x2-o._x0),o._y1+o._k*(o._y2-o._y0),o._x2+o._k*(o._x1-t),o._y2+o._k*(o._y1-n),o._x2,o._y2)}function g(e,t){this._context=e,this._k=(1-t)/6}function b(e,t){this._context=e,this._alpha=t}function w(e){return 0>e?-1:1}function S(a,t,n){var e=a._x1-a._x0,l=t-a._x1,i=(a._y1-a._y0)/(e||0>l&&-0),o=(n-a._y1)/(l||0>e&&-0);return(w(i)+w(o))*xr(kr(i),kr(o),.5*kr((i*l+o*e)/(e+l)))||0}function z(o,t){var n=o._x1-o._x0;return n?(3*(o._y1-o._y0)/n-t)/2:t}function A(l,t,n){var e=l._x0,r=l._y0,i=l._x1,o=l._y1,s=(i-e)/3;l._context.bezierCurveTo(e+s,r+s*t,i-s,o-s*n,i,o)}function D(e){this._context=e}function U(e){this._context=e}function Y(e){this._context=e}function E(a){var t,n,e=a.length-1,l=Array(e),i=Array(e),o=Array(e);for(i[l[0]=0]=2,o[0]=a[0]+2*a[1],t=1;t<e-1;++t)l[t]=1,i[t]=4,o[t]=4*a[t]+2*a[t+1];for(l[e-1]=2,i[e-1]=7,o[e-1]=8*a[e-1]+a[e],t=1;t<e;++t)n=l[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(l[e-1]=o[e-1]/i[e-1],t=e-2;0<=t;--t)l[t]=(o[t]-l[t+1])/i[t];for(i[e-1]=(a[e]+l[e-1])/2,t=0;t<e-1;++t)i[t]=2*a[t+1]-l[t+1];return[l,i]}function F(e,t){this._context=e,this._t=t}function P(l,o,i,e){function s(e){return l(e=new Date(+e)),e}return(s.floor=s).ceil=function(e){return l(e=new Date(e-1)),o(e,1),l(e),e},s.round=function(o){var t=s(o),n=s.ceil(o);return o-t<n-o?t:n},s.offset=function(e,a){return o(e=new Date(+e),null==a?1:Ur(a)),e},s.range=function(a,d,n){var e,r=[];if(a=s.ceil(a),n=null==n?1:Ur(n),!(a<d&&0<n))return r;for(;r.push(e=new Date(+a)),o(a,n),l(a),e<a&&a<d;);return r},s.filter=function(n){return P(function(e){if(e<=e)for(;l(e),!n(e);)e.setTime(e-1)},function(e,t){if(e<=e)if(0>t)for(;0>=++t;)for(;o(e,-1),!n(e););else for(;0<=--t;)for(;o(e,1),!n(e););})},i&&(s.count=function(e,o){return C.setTime(+e),M.setTime(+o),l(C),l(M),Ur(i(C,M))},s.every=function(o){return o=Ur(o),isFinite(o)&&0<o?1<o?s.filter(e?function(n){return 0==e(n)%o}:function(e){return 0==s.count(0,e)%o}):s:null}),s}function L(e){return P(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*X)/V})}function I(e){return P(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/V})}function Q(o,t){if(0>(n=(o=t?o.toExponential(t-1):o.toExponential()).indexOf("e")))return null;var n,e=o.slice(0,n);return[1<e.length?e[0]+e.slice(2):e,+o.slice(n+1)]}function ne(e){return(e=Q(kr(e)))?e[1]:NaN}function lt(o,t){var n=Q(o,t);if(!n)return o+"";var a=n[0],l=n[1];return 0>l?"0."+Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+Array(l-a.length+2).join("0")}function rt(e){return new ct(e)}function ct(d){if(!(t=st.exec(d)))throw new Error("invalid format: "+d);var t,n=t[1]||" ",e=t[2]||">",r=t[3]||"-",i=t[4]||"",o=!!t[5],u=t[6]&&+t[6],a=!!t[7],s=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(a=!0,c="g"):it[c]||(c=""),(o||"0"===n&&"="===e)&&(o=!0,n="0",e="="),this.fill=n,this.align=e,this.sign=r,this.symbol=i,this.zero=o,this.width=u,this.comma=a,this.precision=s,this.type=c}function _t(e){return e}function yt(e){function l(o){function t(y){var w,n,C,r=k,i=g;if("c"===v)i=m(y)+i,y="";else{var o=0>(y=+y);if(y=m(kr(y),_),o&&0==+y&&(o=!1),r=(o?"("===a?a:"-":"-"===a||"("===a?"":a)+r,i=("s"===v?gt[8+K/3]:"")+i+(o&&"("===a?")":""),d)for(w=-1,n=y.length;++w<n;)if(48>(C=y.charCodeAt(w))||57<C){i=(46===C?c+y.slice(w+1):y.slice(w))+i,y=y.slice(0,w);break}}p&&!l&&(y=T(y,1/0));var u=r.length+y.length+i.length,S=u<h?Array(h-u+1).join(b):"";switch(p&&l&&(y=T(S+y,S.length?h-i.length:1/0),S=""),e){case"<":y=r+y+i+S;break;case"=":y=r+S+y+i;break;case"^":y=S.slice(0,u=S.length>>1)+r+y+i+S.slice(u);break;default:y=S+r+y+i;}return x(y)}var b=(o=rt(o)).fill,e=o.align,a=o.sign,i=o.symbol,l=o.zero,h=o.width,p=o.comma,_=o.precision,v=o.type,k="$"===i?s[0]:"#"===i&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",g="$"===i?s[1]:/[%p]/.test(v)?r:"",m=it[v],d=!v||/[defgprs%]/.test(v);return _=null==_?v?6:12:/[gprs]/.test(v)?Mr(1,xr(21,_)):Mr(0,xr(20,_)),t.toString=function(){return o+""},t}var o,d,a,T=e.grouping&&e.thousands?(d=e.grouping,a=e.thousands,function(l,t){for(var n=l.length,e=[],r=0,i=d[0],o=0;0<n&&0<i&&(t<o+i+1&&(i=Mr(1,t-o)),e.push(l.substring(n-=i,n+i)),!((o+=i+1)>t));)i=d[r=(r+1)%d.length];return e.reverse().join(a)}):_t,s=e.currency,c=e.decimal,x=e.numerals?(o=e.numerals,function(e){return e.replace(/[0-9]/g,function(e){return o[+e]})}):_t,r=e.percent||"%";return{format:l,formatPrefix:function(a,t){var n=l(((a=rt(a)).type="f",a)),e=3*Mr(-8,xr(8,Ur(ne(t)/3))),s=Cr(10,-e),i=gt[8+e/3];return function(e){return n(s*e)+i}}}}function vt(e){return ut=yt(e),ee.format=ut.format,pt=ut.formatPrefix,ut}function xt(e){if(0<=e.y&&100>e.y){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wt(e){if(0<=e.y&&100>e.y){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function bt(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Tt(k){function C(l,s){return function(d){var c,n,e,r=[],i=-1,o=0,u=l.length;for(d instanceof Date||(d=new Date(+d));++i<u;)37===l.charCodeAt(i)&&(r.push(l.slice(o,i)),null==(n=Ct[c=l.charAt(++i)])?n="e"===c?" ":"0":c=l.charAt(++i),(e=s[c])&&(c=e(d,n)),r.push(c),o=i+1);return r.push(l.slice(o,i)),r.join("")}}function S(a,i){return function(o){var t,n,e=bt(1900);if(b(e,a,o+="",0)!=o.length)return null;if("Q"in e)return new Date(e.Q);if("p"in e&&(e.H=e.H%12+12*e.p),"V"in e){if(1>e.V||53<e.V)return null;"w"in e||(e.w=1),"Z"in e?(t=4<(n=(t=wt(bt(e.y))).getUTCDay())||0===n?nt.ceil(t):nt(t),t=tt.offset(t,7*(e.V-1)),e.y=t.getUTCFullYear(),e.m=t.getUTCMonth(),e.d=t.getUTCDate()+(e.w+6)%7):(t=4<(n=(t=i(bt(e.y))).getDay())||0===n?R.ceil(t):R(t),t=Z.offset(t,7*(e.V-1)),e.y=t.getFullYear(),e.m=t.getMonth(),e.d=t.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),n="Z"in e?wt(bt(e.y)).getUTCDay():i(bt(e.y)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(n+5)%7:e.w+7*e.U-(n+6)%7);return"Z"in e?(e.H+=0|e.Z/100,e.M+=e.Z%100,wt(e)):i(e)}}function b(l,t,n,e){for(var r,i,o=0,d=t.length,a=n.length;o<d;){if(a<=e)return-1;if(37===(r=t.charCodeAt(o++))){if(r=t.charAt(o++),!(i=w[r in Ct?t.charAt(o++):r])||0>(e=i(l,n,e)))return-1;}else if(r!=n.charCodeAt(e++))return-1}return e}var T=k.dateTime,r=k.date,i=k.time,o=k.periods,n=k.days,e=k.shortDays,u=k.months,a=k.shortMonths,s=Ut(o),c=Yt(o),l=Ut(n),h=Yt(n),f=Ut(e),p=Yt(e),_=Ut(u),v=Yt(u),y=Ut(a),g=Yt(a),m={a:function(n){return e[n.getDay()]},A:function(e){return n[e.getDay()]},b:function(e){return a[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:ma,e:ma,f:wa,H:fa,I:xa,j:va,L:ba,m:Ta,M:ka,p:function(e){return o[+(12<=e.getHours())]},Q:$a,s:Ka,S:Ca,u:Sa,U:za,V:Ma,w:Ua,W:Aa,x:null,X:null,y:Ya,Y:Da,Z:Ea,"%":Ja},d={a:function(n){return e[n.getUTCDay()]},A:function(e){return n[e.getUTCDay()]},b:function(e){return a[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Fa,e:Fa,f:Na,H:Pa,I:La,j:Ha,L:Xa,m:Va,M:Ia,p:function(e){return o[+(12<=e.getUTCHours())]},Q:$a,s:Ka,S:Oa,u:ja,U:qa,V:Ba,w:Za,W:Wa,x:null,X:null,y:Ra,Y:Qa,Z:Ga,"%":Ja},w={a:function(o,t,n){var e=f.exec(t.slice(n));return e?(o.w=p[e[0].toLowerCase()],n+e[0].length):-1},A:function(o,t,n){var e=l.exec(t.slice(n));return e?(o.w=h[e[0].toLowerCase()],n+e[0].length):-1},b:function(o,t,n){var e=y.exec(t.slice(n));return e?(o.m=g[e[0].toLowerCase()],n+e[0].length):-1},B:function(o,t,n){var e=_.exec(t.slice(n));return e?(o.m=v[e[0].toLowerCase()],n+e[0].length):-1},c:function(o,t,n){return b(o,T,t,n)},d:ra,e:ra,f:pa,H:da,I:da,j:sa,L:_a,m:la,M:ca,p:function(o,t,n){var e=s.exec(t.slice(n));return e?(o.p=c[e[0].toLowerCase()],n+e[0].length):-1},Q:ga,s:ya,S:ua,u:Pt,U:ea,V:ta,w:Ft,W:na,x:function(o,t,n){return b(o,r,t,n)},X:function(o,t,n){return b(o,i,t,n)},y:aa,Y:oa,Z:ia,"%":ha};return m.x=C(r,m),m.X=C(i,m),m.c=C(T,m),d.x=C(r,d),d.X=C(i,d),d.c=C(T,d),{format:function(e){var t=C(e+="",m);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",xt);return t.toString=function(){return e},t},utcFormat:function(e){var t=C(e+="",d);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e,wt);return t.toString=function(){return e},t}}}function kt(a,l,n){var e=0>a?"-":"",r=(e?-a:a)+"",i=r.length;return e+(i<n?Array(n-i+1).join(l)+r:r)}function Mt(e){return e.replace(At,"\\$&")}function Ut(e){return new RegExp("^(?:"+e.map(Mt).join("|")+")","i")}function Yt(o){for(var t={},n=-1,e=o.length;++n<e;)t[o[n].toLowerCase()]=n;return t}function Ft(o,t,n){var e=St.exec(t.slice(n,n+1));return e?(o.w=+e[0],n+e[0].length):-1}function Pt(o,t,n){var e=St.exec(t.slice(n,n+1));return e?(o.u=+e[0],n+e[0].length):-1}function ea(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.U=+e[0],n+e[0].length):-1}function ta(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.V=+e[0],n+e[0].length):-1}function na(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.W=+e[0],n+e[0].length):-1}function oa(o,t,n){var e=St.exec(t.slice(n,n+4));return e?(o.y=+e[0],n+e[0].length):-1}function aa(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.y=+e[0]+(68<+e[0]?1900:2e3),n+e[0].length):-1}function ia(o,t,n){var e=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return e?(o.Z=e[1]?0:-(e[2]+(e[3]||"00")),n+e[0].length):-1}function la(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.m=e[0]-1,n+e[0].length):-1}function ra(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.d=+e[0],n+e[0].length):-1}function sa(o,t,n){var e=St.exec(t.slice(n,n+3));return e?(o.m=0,o.d=+e[0],n+e[0].length):-1}function da(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.H=+e[0],n+e[0].length):-1}function ca(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.M=+e[0],n+e[0].length):-1}function ua(o,t,n){var e=St.exec(t.slice(n,n+2));return e?(o.S=+e[0],n+e[0].length):-1}function _a(o,t,n){var e=St.exec(t.slice(n,n+3));return e?(o.L=+e[0],n+e[0].length):-1}function pa(o,t,n){var e=St.exec(t.slice(n,n+6));return e?(o.L=Ur(e[0]/1e3),n+e[0].length):-1}function ha(o,t,n){var e=zt.exec(t.slice(n,n+1));return e?n+e[0].length:-1}function ga(o,t,n){var e=St.exec(t.slice(n));return e?(o.Q=+e[0],n+e[0].length):-1}function ya(o,t,n){var e=St.exec(t.slice(n));return e?(o.Q=1e3*+e[0],n+e[0].length):-1}function ma(e,t){return kt(e.getDate(),t,2)}function fa(e,t){return kt(e.getHours(),t,2)}function xa(e,t){return kt(e.getHours()%12||12,t,2)}function va(e,t){return kt(1+Z.count($(e),e),t,3)}function ba(e,t){return kt(e.getMilliseconds(),t,3)}function wa(e,t){return ba(e,t)+"000"}function Ta(e,t){return kt(e.getMonth()+1,t,2)}function ka(e,t){return kt(e.getMinutes(),t,2)}function Ca(e,t){return kt(e.getSeconds(),t,2)}function Sa(e){var t=e.getDay();return 0===t?7:t}function za(e,t){return kt(W.count($(e),e),t,2)}function Ma(o,t){var n=o.getDay();return o=4<=n||0===n?G(o):G.ceil(o),kt(G.count($(o),o)+(4===$(o).getDay()),t,2)}function Ua(e){return e.getDay()}function Aa(e,t){return kt(R.count($(e),e),t,2)}function Ya(e,t){return kt(e.getFullYear()%100,t,2)}function Da(e,t){return kt(e.getFullYear()%1e4,t,4)}function Ea(e){var t=e.getTimezoneOffset();return(0<t?"-":(t*=-1,"+"))+kt(0|t/60,"0",2)+kt(t%60,"0",2)}function Fa(e,t){return kt(e.getUTCDate(),t,2)}function Pa(e,t){return kt(e.getUTCHours(),t,2)}function La(e,t){return kt(e.getUTCHours()%12||12,t,2)}function Ha(e,t){return kt(1+tt.count(at(e),e),t,3)}function Xa(e,t){return kt(e.getUTCMilliseconds(),t,3)}function Na(e,t){return Xa(e,t)+"000"}function Va(e,t){return kt(e.getUTCMonth()+1,t,2)}function Ia(e,t){return kt(e.getUTCMinutes(),t,2)}function Oa(e,t){return kt(e.getUTCSeconds(),t,2)}function ja(e){var t=e.getUTCDay();return 0===t?7:t}function qa(e,t){return kt(et.count(at(e),e),t,2)}function Ba(o,t){var n=o.getUTCDay();return o=4<=n||0===n?ot(o):ot.ceil(o),kt(ot.count(at(o),o)+(4===at(o).getUTCDay()),t,2)}function Za(e){return e.getUTCDay()}function Wa(e,t){return kt(nt.count(at(e),e),t,2)}function Ra(e,t){return kt(e.getUTCFullYear()%100,t,2)}function Qa(e,t){return kt(e.getUTCFullYear()%1e4,t,4)}function Ga(){return"+0000"}function Ja(){return"%"}function $a(e){return+e}function Ka(e){return Ur(+e/1e3)}function el(e){return dt=Tt(e),ee.timeFormat=dt.format,ee.timeParse=dt.parse,mt=dt.utcFormat,ft=dt.utcParse,dt}function qn(){}function tl(a,t){var l=new qn;if(a instanceof qn)a.each(function(e,t){l.set(t,e)});else if(Array.isArray(a)){var e,n=-1,i=a.length;if(null==t)for(;++n<i;)l.set(n,a[n]);else for(;++n<i;)l.set(t(e=a[n],n,a),e)}else if(a)for(var o in a)l.set(o,a[o]);return l}function jn(){}function nl(o,t,n){o.prototype=t.prototype=n,n.constructor=o}function Qn(o,t){var n=Object.create(o.prototype);for(var e in t)n[e]=t[e];return n}function Gn(){}function Jn(e){var t;return e=(e+"").trim().toLowerCase(),(t=Rn.exec(e))?new ye(15&(t=parseInt(t[1],16))>>8|240&t>>4,15&t>>4|240&t,(15&t)<<4|15&t,1):(t=re.exec(e))?fe(parseInt(t[1],16)):(t=ie.exec(e))?new ye(t[1],t[2],t[3],1):(t=oe.exec(e))?new ye(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ue.exec(e))?pe(t[1],t[2],t[3],t[4]):(t=ae.exec(e))?pe(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=se.exec(e))?ge(t[1],t[2]/100,t[3]/100,1):(t=ce.exec(e))?ge(t[1],t[2]/100,t[3]/100,t[4]):le.hasOwnProperty(e)?fe(le[e]):"transparent"===e?new ye(NaN,NaN,NaN,0):null}function fe(e){return new ye(255&e>>16,255&e>>8,255&e,1)}function pe(o,t,n,e){return 0>=e&&(o=t=n=NaN),new ye(o,t,n,e)}function _e(e){return e instanceof Gn||(e=Jn(e)),e?new ye((e=e.rgb()).r,e.g,e.b,e.opacity):new ye}function ve(o,t,n,e){return 1===arguments.length?_e(o):new ye(o,t,n,null==e?1:e)}function ye(o,a,i,l){this.r=+o,this.g=+a,this.b=+i,this.opacity=+l}function ge(o,t,n,e){return 0>=e?o=t=n=NaN:0>=n||1<=n?o=t=NaN:0>=t&&(o=NaN),new me(o,t,n,e)}function me(o,a,i,l){this.h=+o,this.s=+a,this.l=+i,this.opacity=+l}function de(o,t,n){return 255*(60>o?t+(n-t)*o/60:180>o?n:240>o?t+(n-t)*(240-o)/60:t)}function we(l){if(l instanceof ze)return new ze(l.l,l.a,l.b,l.opacity);if(l instanceof Fe){if(isNaN(l.h))return new ze(l.l,0,0,l.opacity);var t=l.h*he;return new ze(l.l,br(t)*l.c,vr(t)*l.c,l.opacity)}l instanceof ye||(l=_e(l));var n,e,r=Ye(l.r),i=Ye(l.g),o=Ye(l.b),s=De((.2225045*r+.7168786*i+.0606169*o)/be);return r===i&&i===o?n=e=s:(n=De((.4360747*r+.3850649*i+.1430804*o)/Me),e=De((.0139322*r+.0971045*i+.7141733*o)/Te)),new ze(116*s-16,500*(n-s),200*(s-e),l.opacity)}function ze(o,a,i,l){this.l=+o,this.a=+a,this.b=+i,this.opacity=+l}function De(e){return Ce<e?Cr(e,1/3):e/Ae+ke}function Ee(e){return Ne<e?e*e*e:Ae*(e-ke)}function Ue(e){return 255*(.0031308>=e?12.92*e:1.055*Cr(e,1/2.4)-.055)}function Ye(e){return .04045>=(e/=255)?e/12.92:Cr((e+.055)/1.055,2.4)}function Fe(o,a,i,l){this.h=+o,this.c=+a,this.l=+i,this.opacity=+l}function Pe(o,a,i,l){this.h=+o,this.s=+a,this.l=+i,this.opacity=+l}function je(e){return function(){return e}}function Be(a){return 1==(a=+a)?Re:function(o,t){return t-o?(n=o,e=t,l=a,n=Cr(n,l),e=Cr(e,l)-n,l=1/l,function(o){return Cr(n+o*e,l)}):je(isNaN(o)?t:o);var n,e,l}}function Re(o,t){var n,e,a=t-o;return a?(n=o,e=a,function(o){return n+o*e}):je(isNaN(o)?t:o)}function $e(o,a){return a-=o=+o,function(e){return o+a*e}}function We(d,_){var t,n,e,i,o,r=Ze.lastIndex=Qe.lastIndex=0,a=-1,u=[],c=[];for(d+="",_+="";(t=Ze.exec(d))&&(n=Qe.exec(_));)(e=n.index)>r&&(e=_.slice(r,e),u[a]?u[a]+=e:u[++a]=e),(t=t[0])===(n=n[0])?u[a]?u[a]+=n:u[++a]=n:(u[++a]=null,c.push({i:a,x:$e(t,n)})),r=Qe.lastIndex;return r<_.length&&(e=_.slice(r),u[a]?u[a]+=e:u[++a]=e),2>u.length?c[0]?(o=c[0].x,function(e){return o(e)+""}):(i=_,function(){return i}):(_=c.length,function(o){for(var t,n=0;n<_;++n)u[(t=c[n]).i]=t.x(o);return u.join("")})}function Je(o,t){var a,e=typeof t;return null==t||"boolean"===e?je(t):("number"===e?$e:"string"===e?(a=Jn(t))?(t=a,nr):We:t instanceof Jn?nr:t instanceof Date?function(o,a){var e=new Date;return a-=o=+o,function(n){return e.setTime(o+a*n),e}}:Array.isArray(t)?function(a,t){var n,e=t?t.length:0,l=a?xr(e,a.length):0,i=Array(l),o=Array(e);for(n=0;n<l;++n)i[n]=Je(a[n],t[n]);for(;n<e;++n)o[n]=t[n];return function(e){for(n=0;n<l;++n)o[n]=i[n](e);return o}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(o,a){var l,e={},r={};for(l in null!==o&&"object"==typeof o||(o={}),null!==a&&"object"==typeof a||(a={}),a)l in o?e[l]=Je(o[l],a[l]):r[l]=a[l];return function(n){for(l in e)r[l]=e[l](n);return r}}:$e)(o,t)}function Ke(o,a){return a-=o=+o,function(e){return mr(o+a*e)}}function ol(l,d,c,e,r,_){var p,h,g;return(p=wr(l*l+d*d))&&(l/=p,d/=p),(g=l*c+d*e)&&(c-=l*g,e-=d*g),(h=wr(c*c+e*e))&&(c/=h,e/=h,g/=h),l*e<d*c&&(l=-l,d=-d,g=-g,p=-p),{translateX:r,translateY:_,rotate:yr(d,l)*Ge,skewX:Math.atan(g)*Ge,scaleX:p,scaleY:h}}function al(d,a,l,_){function p(e){return e.length?e.pop()+" ":""}return function(g,t){var n,e,r,i,o,u,y,s,c=[],m=[];return g=d(g),t=d(t),function(s,t,n,e,r,i){if(s!==n||t!==e){var o=r.push("translate(",null,a,null,l);i.push({i:o-4,x:$e(s,n)},{i:o-2,x:$e(t,e)})}else(n||e)&&r.push("translate("+n+a+e+l)}(g.translateX,g.translateY,t.translateX,t.translateY,c,m),n=g.rotate,e=t.rotate,r=c,i=m,n===e?e&&r.push(p(r)+"rotate("+e+_):(180<n-e?e+=360:180<e-n&&(n+=360),i.push({i:r.push(p(r)+"rotate(",null,_)-2,x:$e(n,e)})),o=g.skewX,u=t.skewX,y=c,s=m,o===u?u&&y.push(p(y)+"skewX("+u+_):s.push({i:y.push(p(y)+"skewX(",null,_)-2,x:$e(o,u)}),function(a,t,n,e,l,i){if(a!==n||t!==e){var o=l.push(p(l)+"scale(",null,",",null,")");i.push({i:o-4,x:$e(a,n)},{i:o-2,x:$e(t,e)})}else 1===n&&1===e||l.push(p(l)+"scale("+n+","+e+")")}(g.scaleX,g.scaleY,t.scaleX,t.scaleY,c,m),g=t=null,function(o){for(var t,n=-1,e=m.length;++n<e;)c[(t=m[n]).i]=t.x(o);return c.join("")}}}function il(e){return((e=gr(e))+1/e)/2}function ll(d,t){var n,m,u=d[0],a=d[1],s=d[2],e=t[0],r=t[1],i=t[2],c=e-u,l=r-a,o=c*c+l*l;if(o<pr)m=zr(i/s)/lr,n=function(e){return[u+e*c,a+e*l,s*gr(lr*e*m)]};else{var h=wr(o),p=(i*i-s*s+ur*o)/(2*s*cr*h),_=(i*i-s*s-ur*o)/(2*i*cr*h),f=zr(wr(p*p+1)-p),y=zr(wr(_*_+1)-_);m=(y-f)/lr,n=function(d){var t,n,e=d*m,r=il(f),i=s/(cr*h)*(r*(n=lr*e+f,((n=gr(2*n))-1)/(n+1))-(t=f,((t=gr(t))-1/t)/2));return[u+i*c,a+i*l,s*r/il(lr*e+f)]}}return n.duration=1e3*m,n}function rl(e){return function(){return e}}function sl(e){return+e}function dl(o,a){return(a-=o=+o)?function(e){return(e-o)/a}:rl(a)}function cl(l,t,n,e){var r=l[0],i=l[1],o=t[0],s=t[1];return i<r?(r=n(i,r),o=e(s,o)):(r=n(r,i),o=e(o,s)),function(e){return o(r(e))}}function ul(l,e,t,n){var r=xr(l.length,e.length)-1,i=Array(r),o=Array(r),s=-1;for(l[r]<l[0]&&(l=l.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=t(l[s],l[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var t=Yr(l,e,1,r)-1;return o[t](i[t](e))}}function _l(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function pl(d,n){function e(){return _=2<xr(u.length,a.length)?ul:cl,r=o=null,i}function i(e){return(r||(r=_(u,a,c?(o=d,function(a,i){var l=o(a=+a,i=+i);return function(e){return e<=a?0:i<=e?1:l(e)}}):d,s)))(+e);var o}var _,r,o,u=_r,a=_r,s=Je,c=!1;return i.invert=function(e){return(o||(o=_(a,u,dl,c?(l=n,function(o,a){var i=l(o=+o,a=+a);return function(e){return 0>=e?o:1<=e?a:i(e)}}):n)))(+e);var l},i.domain=function(n){return arguments.length?(u=In.call(n,sl),e()):u.slice()},i.range=function(n){return arguments.length?(a=Zn.call(n),e()):a.slice()},i.rangeRound=function(n){return a=Zn.call(n),s=Ke,e()},i.clamp=function(n){return arguments.length?(c=!!n,e()):c},i.interpolate=function(n){return arguments.length?(s=n,e()):s},e()}function hl(d,t,n){var e,r,i,o,u,a,s=d[0],c=d[d.length-1],l=te(s,c,null==t?10:t);switch((n=rt(null==n?",f":n)).type){case"s":var _=Mr(kr(s),kr(c));return null!=n.precision||isNaN((u=l,a=_,e=Mr(0,3*Mr(-8,xr(8,Ur(ne(a)/3)))-ne(kr(u)))))||(n.precision=e),pt(n,_);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN((i=l,o=Mr(kr(s),kr(c)),i=kr(i),o=kr(o)-i,e=Mr(0,ne(o)-ne(i))+1))||(n.precision=e-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN((r=l,e=Mr(0,-ne(kr(r)))))||(n.precision=e-2*("%"===n.type));}return ee.format(n)}function gl(l){var a=l.domain;return l.ticks=function(e){var t=a();return T(t[0],t[t.length-1],null==e?10:e)},l.tickFormat=function(e,t){return hl(a(),e,t)},l.nice=function(s){null==s&&(s=10);var t,n=a(),e=0,r=n.length-1,i=n[e],o=n[r];return o<i&&(t=i,i=o,o=t,t=e,e=r,r=t),0<(t=y(i,o,s))?t=y(i=Ur(i/t)*t,o=Ar(o/t)*t,s):0>t&&(t=y(i=Ar(i*t)/t,o=Ur(o*t)/t,s)),0<t?(n[e]=Ur(i/t)*t,n[r]=Ar(o/t)*t,a(n)):0>t&&(n[e]=Ar(i*t)/t,n[r]=Ur(o*t)/t,a(n)),l},l}function yl(a,t){var n,e=0,l=(a=a.slice()).length-1,i=a[e],o=a[l];return o<i&&(n=e,e=l,l=n,n=i,i=o,o=n),a[e]=t.floor(i),a[l]=t.ceil(o),a}function ml(o,n){return(n=zr(n/o))?function(e){return zr(e/o)/n}:rl(n)}function fl(o,a){return 0>o?function(i){return-Cr(-a,i)*Cr(-o,1-i)}:function(e){return Cr(a,e)*Cr(o,1-e)}}function xl(e){return isFinite(e)?+("1e"+e):0>e?0:e}function vl(e){return 10===e?xl:e===sr?gr:function(n){return Cr(e,n)}}function bl(e){return e===sr?zr:10===e&&Math.log10||2===e&&Math.log2||(e=zr(e),function(n){return zr(n)/e})}function wl(e){return function(n){return-e(-n)}}function Tl(e,o){return 0>e?-Cr(-e,o):Cr(e,o)}function kl(e){return new Date(e)}function Cl(e){return e instanceof Date?+e:+new Date(+e)}function Sl(e){return e}function zl(e){return"translate("+(e+.5)+",0)"}function Ml(e){return"translate(0,"+(e+.5)+")"}function Ul(){return!this.__axis}function Al(C,v){function e(T){var t=null==g?v.ticks?v.ticks.apply(v,y):v.domain():g,k=null==m?v.tickFormat?v.tickFormat.apply(v,y):Sl:m,e=Mr(d,0)+x,r=v.range(),i=+r[0]+.5,z=+r[r.length-1]+.5,u=(v.bandwidth?function(o){var n=Mr(0,o.bandwidth()-1)/2;return o.round()&&(n=mr(n)),function(e){return+o(e)+n}}:function(e){return function(n){return+e(n)}})(v.copy()),a=T.selection?T.selection():T,s=a.selectAll(".domain").data([null]),c=a.selectAll(".tick").data(t,v).order(),l=c.exit(),h=c.enter().append("g").attr("class","tick"),f=c.select("line"),p=c.select("text");s=s.merge(s.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),c=c.merge(h),f=f.merge(h.append("line").attr("stroke","#000").attr(b+"2",S*d)),p=p.merge(h.append("text").attr("fill","#000").attr(b,S*e).attr("dy",C===Xr?"0em":C===Vr?"0.71em":"0.32em")),T!==a&&(s=s.transition(T),c=c.transition(T),f=f.transition(T),p=p.transition(T),l=l.transition(T).attr("opacity",Or).attr("transform",function(e){return isFinite(e=u(e))?o(e):this.getAttribute("transform")}),h.attr("opacity",Or).attr("transform",function(e){var t=this.parentNode.__axis;return o(t&&isFinite(t=t(e))?t:u(e))})),l.remove(),s.attr("d",C===Ir||C==Nr?"M"+S*w+","+i+"H0.5V"+z+"H"+S*w:"M"+i+","+S*w+"V0.5H"+z+"V"+S*w),c.attr("opacity",1).attr("transform",function(e){return o(u(e))}),f.attr(b+"2",S*d),p.attr(b,S*e).text(k),a.filter(Ul).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",C===Nr?"start":C===Ir?"end":"middle"),a.each(function(){this.__axis=u})}var y=[],g=null,m=null,d=6,w=6,x=3,S=C===Xr||C===Ir?-1:1,b=C===Ir||C===Nr?"x":"y",o=C===Xr||C===Vr?zl:Ml;return e.scale=function(n){return arguments.length?(v=n,e):v},e.ticks=function(){return y=Hr.call(arguments),e},e.tickArguments=function(n){return arguments.length?(y=null==n?[]:Hr.call(n),e):y.slice()},e.tickValues=function(n){return arguments.length?(g=null==n?null:Hr.call(n),e):g&&g.slice()},e.tickFormat=function(n){return arguments.length?(m=n,e):m},e.tickSize=function(n){return arguments.length?(d=w=+n,e):d},e.tickSizeInner=function(n){return arguments.length?(d=+n,e):d},e.tickSizeOuter=function(n){return arguments.length?(w=+n,e):w},e.tickPadding=function(n){return arguments.length?(x=+n,e):x},e}function ti(){for(var o,t=0,n=arguments.length,e={};t<n;++t){if(!(o=arguments[t]+"")||o in e)throw new Error("illegal type: "+o);e[o]=[]}return new ei(e)}function ei(e){this._=e}function Yl(o,t){for(var n,e=0,a=o.length;e<a;++e)if((n=o[e]).name===t)return n.value}function ii(o,t,a){for(var l=0,r=o.length;l<r;++l)if(o[l].name===t){o[l]=jr,o=o.slice(0,l).concat(o.slice(l+1));break}return null!=a&&o.push({name:t,value:a}),o}function oi(o){var a=o+="",n=a.indexOf(":");return 0<=n&&"xmlns"!==(a=o.slice(0,n))&&(o=o.slice(n+1)),qr.hasOwnProperty(a)?{space:qr[a],local:o}:o}function si(e){var t=oi(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(o){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===ni&&e.documentElement.namespaceURI===ni?e.createElement(o):e.createElementNS(t,o)}})(t)}function ci(){}function li(e){return null==e?ci:function(){return this.querySelector(e)}}function hi(){return[]}function fi(e){return null==e?hi:function(){return this.querySelectorAll(e)}}function pi(e){return Array(e.length)}function mi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Dl(l,t,n,e,r,i){for(var o,d=0,a=t.length,s=i.length;d<s;++d)(o=t[d])?(o.__data__=i[d],e[d]=o):n[d]=new mi(l,i[d]);for(;d<a;++d)(o=t[d])&&(r[d]=o)}function xi(d,t,n,e,r,i,o){var u,a,s,c={},l=t.length,_=i.length,h=Array(l);for(u=0;u<l;++u)(a=t[u])&&(h[u]=s=gi+o.call(a,a.__data__,u,t),s in c?r[u]=a:c[s]=a);for(u=0;u<_;++u)(a=c[s=gi+o.call(d,i[u],u,i)])?((e[u]=a).__data__=i[u],c[s]=null):n[u]=new mi(d,i[u]);for(u=0;u<l;++u)(a=t[u])&&c[h[u]]===a&&(r[u]=a)}function Mi(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function bi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ti(e,t){return e.style.getPropertyValue(t)||bi(e).getComputedStyle(e,null).getPropertyValue(t)}function ki(e){return e.trim().split(/^|\s+/)}function Ni(e){return e.classList||new Ai(e)}function Ai(e){this._node=e,this._names=ki(e.getAttribute("class")||"")}function Ci(o,t){for(var n=Ni(o),e=-1,a=t.length;++e<a;)n.add(t[e])}function Si(o,t){for(var n=Ni(o),e=-1,a=t.length;++e<a;)n.remove(t[e])}function zi(){this.textContent=""}function Di(){this.innerHTML=""}function Ei(){this.nextSibling&&this.parentNode.appendChild(this)}function Ui(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yi(){return null}function Fi(){var e=this.parentNode;e&&e.removeChild(this)}function Pi(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Li(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function Hi(o,e,t){return o=qi(o,e,t),function(e){var t=e.relatedTarget;t&&(t===this||8&t.compareDocumentPosition(this))||o.call(this,e)}}function qi(t,e,n){return function(o){var a=ee.event;ee.event=o;try{t.call(this,this.__data__,e,n)}finally{ee.event=a}}}function Ii(a){return function(){var o=this.__on;if(o){for(var t,n=0,e=-1,l=o.length;n<l;++n)t=o[n],a.type&&t.type!==a.type||t.name!==a.name?o[++e]=t:this.removeEventListener(t.type,t.listener,t.capture);++e?o.length=e:delete this.__on}}}function Vi(d,s,_){var p=wi.hasOwnProperty(d.type)?Hi:qi;return function(h,t,n){var e,r=this.__on,i=p(s,t,n);if(r)for(var g=0,u=r.length;g<u;++g)if((e=r[g]).type===d.type&&e.name===d.name)return this.removeEventListener(e.type,e.listener,e.capture),this.addEventListener(e.type,e.listener=i,e.capture=_),void(e.value=s);this.addEventListener(d.type,i,_),e={type:d.type,name:d.name,value:s,listener:i,capture:_},r?r.push(e):this.__on=[e]}}function Oi(o,t,n,e){var a=ee.event;o.sourceEvent=ee.event,ee.event=o;try{return t.apply(n,e)}finally{ee.event=a}}function ji(o,t,n){var e=bi(o),a=e.CustomEvent;"function"==typeof a?a=new a(t,n):(a=e.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),o.dispatchEvent(a)}function Bi(e,t){this._groups=e,this._parents=t}function El(){return new Bi([[document.documentElement]],Xi)}function Zi(e){return"string"==typeof e?new Bi([[document.querySelector(e)]],[document.documentElement]):new Bi([[e]],Xi)}function Wi(){for(var e,t=ee.event;e=t.sourceEvent;)t=e;return t}function Qi(o,t){var n=o.ownerSVGElement||o;if(n.createSVGPoint){var e=n.createSVGPoint();return e.x=t.clientX,e.y=t.clientY,[(e=e.matrixTransform(o.getScreenCTM().inverse())).x,e.y]}var a=o.getBoundingClientRect();return[t.clientX-a.left-o.clientLeft,t.clientY-a.top-o.clientTop]}function Gi(e){var t=Wi();return t.changedTouches&&(t=t.changedTouches[0]),Qi(e,t)}function Ji(a,t,n){3>arguments.length&&(n=t,t=Wi().changedTouches);for(var e,l=0,i=t?t.length:0;l<i;++l)if((e=t[l]).identifier===n)return Qi(a,e);return null}function Ki(){ee.event.stopImmediatePropagation()}function to(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function no(o){var t=o.document.documentElement,n=Zi(o).on("dragstart.drag",to,!0);"onselectstart"in t?n.on("selectstart.drag",to,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eo(o,t){var n=o.document.documentElement,e=Zi(o).on("dragstart.drag",null);t&&(e.on("click.drag",to,!0),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in n?e.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ro(e){return function(){return e}}function io(l,t,n,e,r,i,o,d,a,s){this.target=l,this.type=t,this.subject=n,this.identifier=e,this.active=r,this.x=i,this.y=o,this.dx=d,this.dy=a,this._=s}function oo(){return!ee.event.button}function uo(){return this.parentNode}function ao(e){return null==e?{x:ee.event.x,y:ee.event.y}:e}function so(){return"ontouchstart"in this}function co(){return yo||(wo(Mo),yo=mo.now()+go)}function Mo(){yo=0}function bo(){this._call=this._time=this._next=null}function Fl(o,t,n){var e=new bo;return e.restart(o,t,n),e}function ko(){yo=(vo=mo.now())+go,ho=fo=0;try{!function(){co(),++ho;for(var e,t=Ri;t;)0<=(e=yo-t._time)&&t._call.call(null,e),t=t._next;--ho}()}finally{ho=0,function(){for(var o,t,n=Ri,e=1/0;n;)n._call?(e>n._time&&(e=n._time),n=(o=n)._next):(t=n._next,n._next=null,n=o?o._next=t:Ri=t);lo=o,Ao(e)}(),yo=0}}function No(){var e=mo.now(),t=e-vo;_o<t&&(go-=t,vo=e)}function Ao(e){ho||(fo&&(fo=clearTimeout(fo)),24<e-yo?(e<1/0&&(fo=setTimeout(ko,e-mo.now()-go)),po&&(po=clearInterval(po))):(po||(vo=mo.now(),po=setInterval(No,_o)),ho=1,wo(ko)))}function Co(o,n,a){var i=new bo;return n=null==n?0:+n,i.restart(function(e){i.stop(),o(e+n)},n,a),i}function So(a,t,l,e,s,d){var o=a.__transition;if(!o)a.__transition={};else if(l in o)return;!function(d,e,o){function a(s){var c,_,p,r;if(o.state!==Wr)return l();for(c in t)if((r=t[c]).name===o.name){if(r.state===Yo)return Co(a);r.state===Fo?(r.state=Lo,r.timer.stop(),r.on.call("interrupt",d,d.__data__,r.index,r.group),delete t[c]):+c<e&&(r.state=Lo,r.timer.stop(),delete t[c])}if(Co(function(){o.state===Yo&&(o.state=Fo,o.timer.restart(n,o.delay,o.time),n(s))}),o.state=Uo,o.on.call("start",d,d.__data__,o.index,o.group),o.state===Uo){for(o.state=Yo,u=Array(p=o.tween.length),c=0,_=-1;c<p;++c)(r=o.tween[c].value.call(d,d.__data__,o.index,o.group))&&(u[++_]=r);u.length=_+1}}function n(a){for(var t=a<o.duration?o.ease.call(null,a/o.duration):(o.timer.restart(l),o.state=Po,1),n=-1,e=u.length;++n<e;)u[n].call(null,t);o.state===Po&&(o.on.call("end",d,d.__data__,o.index,o.group),l())}function l(){for(var n in o.state=Lo,o.timer.stop(),delete t[e],t)return;delete d.__transition}var u,t=d.__transition;(t[e]=o).timer=Fl(function(e){o.state=Wr,o.timer.restart(a,o.delay,o.time),o.delay<=e&&a(e-o.delay)},0,o.time)}(a,l,{name:t,index:e,group:s,on:xo,tween:Br,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:Zr})}function Xo(o,t){var n=Io(o,t);if(n.state>Zr)throw new Error("too late; already scheduled");return n}function qo(o,t){var n=Io(o,t);if(n.state>Uo)throw new Error("too late; already started");return n}function Io(o,t){var n=o.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Vo(a,t){var n,e,l,i=a.__transition,o=!0;if(i){for(l in t=null==t?null:t+"",i)(n=i[l]).name===t?(e=n.state>Uo&&n.state<Po,n.state=Lo,n.timer.stop(),e&&n.on.call("interrupt",a,a.__data__,n.index,n.group),delete i[l]):o=!1;o&&delete a.__transition}}function Oo(o,a,n){var e=o._id;return o.each(function(){var o=qo(this,e);(o.value||(o.value={}))[a]=n.apply(this,arguments)}),function(n){return Io(n,e).value[a]}}function jo(o,t){var a;return("number"==typeof t?$e:t instanceof Jn?nr:(a=Jn(t))?(t=a,nr):We)(o,t)}function Bo(o,t,n,e){this._groups=o,this._parents=t,this._name=n,this._id=e}function Pl(){return++Ro}function Wo(o,t){for(var n;!(n=o.__transition)||!(n=n[t]);)if(!(o=o.parentNode))return Qo.time=co(),Qo;return n}function Jo(e){return function(){return e}}function Ko(o,t,n){this.target=o,this.type=t,this.transform=n}function Ll(o,t,n){this.k=o,this.x=t,this.y=n}function Hl(e){return e.__zoom||Go}function Xl(){ee.event.stopImmediatePropagation()}function Nl(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function Vl(){return!ee.event.button}function Il(){var o,t,n=this;return n instanceof SVGElement?(o=(n=n.ownerSVGElement||n).width.baseVal.value,t=n.height.baseVal.value):(o=n.clientWidth,t=n.clientHeight),[[0,0],[o,t]]}function Ol(){return this.__zoom||Go}function jl(){return-ee.event.deltaY*(ee.event.deltaMode?120:1)/500}function ql(){return"ontouchstart"in this}function Bl(a,t,n){var e=a.invertX(t[0][0])-n[0][0],l=a.invertX(t[1][0])-n[1][0],i=a.invertY(t[0][1])-n[0][1],o=a.invertY(t[1][1])-n[1][1];return a.translate(e<l?(e+l)/2:xr(0,e)||Mr(0,l),i<o?(i+o)/2:xr(0,i)||Mr(0,o))}function Zl(e){return function(){return e}}function Wl(o,t,n){this.target=o,this.type=t,this.selection=n}function Rl(){ee.event.stopImmediatePropagation()}function Ql(){ee.event.preventDefault(),ee.event.stopImmediatePropagation()}function Gl(e){return{type:e}}function Jl(){return!ee.event.button}function $l(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Kl(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function tr(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ar(h){function l(a){var t=a.property("__brush",s).selectAll(".overlay").data([Gl("overlay")]);t.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",ts.overlay).merge(t).each(function(){var e=Kl(this).extent;Zi(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),a.selectAll(".selection").data([Gl("selection")]).enter().append("rect").attr("class","selection").attr("cursor",ts.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=a.selectAll(".handle").data(h.handles,function(e){return e.type});n.exit().remove(),n.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return ts[e.type]}),a.each(F).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",o)}function F(){var o=Zi(this),a=Kl(this).selection;a?(o.selectAll(".selection").style("display",null).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1]),o.selectAll(".handle").style("display",null).attr("x",function(n){return"e"===n.type[n.type.length-1]?a[1][0]-e/2:a[0][0]-e/2}).attr("y",function(n){return"s"===n.type[0]?a[1][1]-e/2:a[0][1]-e/2}).attr("width",function(n){return"n"===n.type||"s"===n.type?a[1][0]-a[0][0]+e:e}).attr("height",function(n){return"e"===n.type||"w"===n.type?a[1][1]-a[0][1]+e:e})):o.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function A(e,t){return e.__brush.emitter||new i(e,t)}function i(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function o(){function L(){var e=Gi(p);!T||V||f||(kr(e[0]-N[0])>kr(e[1]-N[1])?f=!0:V=!0),N=e,l=!0,Ql(),E()}function E(){var l;switch(s=N[0]-M[0],c=N[1]-M[1],v){case Qr:case Rr:y&&(s=Mr(t-Y,xr(w-i,s)),n=Y+s,o=i+s),g&&(c=Mr(x-e,xr(b-X,c)),r=e+c,a=X+c);break;case Gr:0>y?(s=Mr(t-Y,xr(w-Y,s)),n=Y+s,o=i):0<y&&(s=Mr(t-i,xr(w-i,s)),n=Y,o=i+s),0>g?(c=Mr(x-e,xr(b-e,c)),r=e+c,a=X):0<g&&(c=Mr(x-X,xr(b-X,c)),r=e,a=X+c);break;case Jr:y&&(n=Mr(t,xr(w,Y-s*y)),o=Mr(t,xr(w,i+s*y))),g&&(r=Mr(x,xr(b,e-c*g)),a=Mr(x,xr(b,X+c*g)));}o<n&&(y*=-1,l=Y,Y=i,i=l,l=n,n=o,o=l,_ in ns&&S.attr("cursor",ts[_=ns[_]])),a<r&&(g*=-1,l=e,e=X,X=l,l=r,r=a,a=l,_ in os&&S.attr("cursor",ts[_=os[_]])),m.selection&&(I=m.selection),V&&(n=I[0][0],o=I[1][0]),f&&(r=I[0][1],a=I[1][1]),I[0][0]===n&&I[0][1]===r&&I[1][0]===o&&I[1][1]===a||(m.selection=[[n,r],[o,a]],F.call(p),O.brush())}function U(){if(Rl(),ee.event.touches){if(ee.event.touches.length)return;H&&clearTimeout(H),H=setTimeout(function(){H=null},500),C.on("touchmove.brush touchend.brush touchcancel.brush",null)}else eo(ee.event.view,l),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);C.attr("pointer-events","all"),S.attr("cursor",ts.overlay),m.selection&&(I=m.selection),tr(I)&&(m.selection=null,F.call(p)),O.end()}if(ee.event.touches){if(ee.event.changedTouches.length<ee.event.touches.length)return Ql();}else if(H)return;if(P.apply(this,arguments)){var Y,n,e,r,i,o,X,a,s,c,l,V,f,p=this,_=ee.event.target.__data__.type,v="selection"===(ee.event.metaKey?_="overlay":_)?Rr:ee.event.altKey?Jr:Gr,y=h===Kr?null:as[_],g=h===$r?null:is[_],m=Kl(p),d=m.extent,I=m.selection,t=d[0][0],x=d[0][1],w=d[1][0],b=d[1][1],T=y&&g&&ee.event.shiftKey,M=Gi(p),N=M,O=A(p,arguments).beforestart();"overlay"===_?m.selection=I=[[Y=h===Kr?t:M[0],e=h===$r?x:M[1]],[i=h===Kr?w:Y,X=h===$r?b:e]]:(Y=I[0][0],e=I[0][1],i=I[1][0],X=I[1][1]),n=Y,r=e,o=i,a=X;var C=Zi(p).attr("pointer-events","none"),S=C.selectAll(".overlay").attr("cursor",ts[_]);if(ee.event.touches)C.on("touchmove.brush",L,!0).on("touchend.brush touchcancel.brush",U,!0);else{var z=Zi(ee.event.view).on("keydown.brush",function(){switch(ee.event.keyCode){case 16:T=y&&g;break;case 18:v===Gr&&(y&&(i=o-s*y,Y=n+s*y),g&&(X=a-c*g,e=r+c*g),v=Jr,E());break;case 32:v!==Gr&&v!==Jr||(0>y?i=o-s:0<y&&(Y=n-s),0>g?X=a-c:0<g&&(e=r-c),v=Qr,S.attr("cursor",ts.selection),E());break;default:return;}Ql()},!0).on("keyup.brush",function(){switch(ee.event.keyCode){case 16:T&&(V=f=T=!1,E());break;case 18:v===Jr&&(0>y?i=o:0<y&&(Y=n),0>g?X=a:0<g&&(e=r),v=Gr,E());break;case 32:v===Qr&&(ee.event.altKey?(y&&(i=o-s*y,Y=n+s*y),g&&(X=a-c*g,e=r+c*g),v=Jr):(0>y?i=o:0<y&&(Y=n),0>g?X=a:0<g&&(e=r),v=Gr),S.attr("cursor",ts[_]),E());break;default:return;}Ql()},!0).on("mousemove.brush",L,!0).on("mouseup.brush",U,!0);no(ee.event.view)}Rl(),Vo(p),F.call(p),O.start()}}function s(){var e=this.__brush||{selection:null};return e.extent=a.apply(this,arguments),e.dim=h,e}var H,a=$l,P=Jl,n=ti(l,"start","brush","end"),e=6;return l.move=function(e,l){e.selection?e.on("start.brush",function(){A(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){A(this,arguments).end()}).tween("brush",function(){function s(o){n.selection=1===o&&tr(c)?null:i(o),F.call(d),e.brush()}var d=this,n=d.__brush,e=A(d,arguments),r=n.selection,c=h.input("function"==typeof l?l.apply(this,arguments):l,n.extent),i=Je(r,c);return r&&c?s:s(1)}):e.each(function(){var o=this,t=arguments,n=o.__brush,e=h.input("function"==typeof l?l.apply(o,t):l,n.extent),r=A(o,t).beforestart();Vo(o),n.selection=null==e||tr(e)?null:e,F.call(o),r.start().brush().end()})},i.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Oi(new Wl(l,e,h.output(this.state.selection)),n.apply,n,[e,this.that,this.args])}},l.extent=function(e){return arguments.length?(a="function"==typeof e?e:Zl([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),l):a},l.filter=function(e){return arguments.length?(P="function"==typeof e?e:Zl(!!e),l):P},l.handleSize=function(n){return arguments.length?(e=+n,l):e},l.on=function(){var e=n.on.apply(n,arguments);return e===n?l:e},l}var sr=Math.E,gr=Math.exp,yr=Math.atan2,mr=Math.round,xr=Math.min,vr=Math.sin,br=Math.cos,wr=Math.sqrt,Tr=Math.PI,kr=Math.abs,Cr=Math.pow,Sr=Math.LN10,zr=Math.log,Mr=Math.max,Ur=Math.floor,Ar=Math.ceil,Yr=q(p).right,s=7.0710678118654755,u=3.1622776601683795,a=1.4142135623730951,Dr=Tr,x=2*Dr,Er=1e-6;l.prototype=k.prototype={constructor:l,moveTo:function(e,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+o)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,o){this._+="L"+(this._x1=+e)+","+(this._y1=+o)},quadraticCurveTo:function(o,a,i,l){this._+="Q"+ +o+","+ +a+","+(this._x1=+i)+","+(this._y1=+l)},bezierCurveTo:function(a,l,s,d,c,u){this._+="C"+ +a+","+ +l+","+ +s+","+ +d+","+(this._x1=+c)+","+(this._y1=+u)},arcTo:function(x,v,b,T,k){x=+x,v=+v,b=+b,T=+T,k=+k;var C=this._x1,o=this._y1,u=b-x,a=T-v,s=C-x,c=o-v,l=s*s+c*c;if(0>k)throw new Error("negative radius: "+k);if(null===this._x1)this._+="M"+(this._x1=x)+","+(this._y1=v);else if(!(Er<l));else if(kr(c*u-a*s)>Er&&k){var h=b-C,f=T-o,p=u*u+a*a,_=wr(p),y=wr(l),g=k*Math.tan((Dr-Math.acos((p+l-(h*h+f*f))/(2*_*y)))/2),m=g/y,d=g/_;kr(m-1)>Er&&(this._+="L"+(x+m*s)+","+(v+m*c)),this._+="A"+k+","+k+",0,0,"+ +(s*f<c*h)+","+(this._x1=x+d*u)+","+(this._y1=v+d*a)}else this._+="L"+(this._x1=x)+","+(this._y1=v)},arc:function(d,_,p,g,r,i){d=+d,_=+_;var o=(p=+p)*br(g),u=p*vr(g),a=d+o,s=_+u,c=1^i,l=i?g-r:r-g;if(0>p)throw new Error("negative radius: "+p);null===this._x1?this._+="M"+a+","+s:(kr(this._x1-a)>Er||kr(this._y1-s)>Er)&&(this._+="L"+a+","+s),p&&(0>l&&(l=l%x+x),x-Er<l?this._+="A"+p+","+p+",0,1,"+c+","+(d-o)+","+(_-u)+"A"+p+","+p+",0,1,"+c+","+(this._x1=a)+","+(this._y1=s):Er<l&&(this._+="A"+p+","+p+",0,"+ +(Dr<=l)+","+c+","+(this._x1=d+p*br(r))+","+(this._y1=_+p*vr(r))))},rect:function(o,a,i,l){this._+="M"+(this._x0=this._x1=+o)+","+(this._y0=this._y1=+a)+"h"+ +i+"v"+ +l+"h"+-i+"Z"},toString:function(){return this._}};var f=1e-12;Tr,e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;default:this._context.lineTo(e,o);}}},_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:d(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:d(this,e,o);}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=o}},g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:v(this,this._x1,this._y1);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,o){switch(e=+e,o=+o,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,o):this._context.moveTo(e,o);break;case 1:this._point=2,this._x1=e,this._y1=o;break;case 2:this._point=3;default:v(this,e,o);}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=o}};var c=function o(n){function e(e){return new g(e,n)}return e.tension=function(e){return o(+e)},e}(0);b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(o,a){if(o=+o,a=+a,this._point){var i=this._x2-o,e=this._y2-a;this._l23_a=wr(this._l23_2a=Cr(i*i+e*e,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(d,t,n){var e=d._x1,r=d._y1,i=d._x2,o=d._y2;if(d._l01_a>f){var u=2*d._l01_2a+3*d._l01_a*d._l12_a+d._l12_2a,a=3*d._l01_a*(d._l01_a+d._l12_a);e=(e*u-d._x0*d._l12_2a+d._x2*d._l01_2a)/a,r=(r*u-d._y0*d._l12_2a+d._y2*d._l01_2a)/a}if(d._l23_a>f){var s=2*d._l23_2a+3*d._l23_a*d._l12_a+d._l12_2a,c=3*d._l23_a*(d._l23_a+d._l12_a);i=(i*s+d._x1*d._l23_2a-t*d._l12_2a)/c,o=(o*s+d._y1*d._l23_2a-n*d._l12_2a)/c}d._context.bezierCurveTo(e,r,i,o,d._x2,d._y2)}(this,o,a);}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=o,this._y0=this._y1,this._y1=this._y2,this._y2=a}};var h=function o(n){function e(e){return n?new b(e,n):new g(e,0)}return e.alpha=function(e){return o(+e)},e}(.5);D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:A(this,this._t0,z(this,this._t0));}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(o,a){var i=NaN;if(a=+a,(o=+o)!==this._x1||a!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;break;case 2:this._point=3,A(this,z(this,i=S(this,o,a)),i);break;default:A(this,this._t0,i=S(this,o,a));}this._x0=this._x1,this._x1=o,this._y0=this._y1,this._y1=a,this._t0=i}}},(function(e){this._context=new U(e)}.prototype=Object.create(D.prototype)).point=function(e,t){D.prototype.point.call(this,t,e)},U.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(a,t,n,e,l,i){this._context.bezierCurveTo(t,a,e,n,i,l)}},Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,t=this._y,n=a.length;if(n)if(this._line?this._context.lineTo(a[0],t[0]):this._context.moveTo(a[0],t[0]),2===n)this._context.lineTo(a[1],t[1]);else for(var e=E(a),l=E(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(e[0][i],l[0][i],e[1][i],l[1][i],a[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,o){this._x.push(+e),this._y.push(+o)}},F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(o,a){switch(o=+o,a=+a,this._point){case 0:this._point=1,this._line?this._context.lineTo(o,a):this._context.moveTo(o,a);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,a),this._context.lineTo(o,a);else{var i=this._x*(1-this._t)+o*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,a)}}this._x=o,this._y=a}};var C=new Date,M=new Date,H=P(function(){},function(e,o){e.setTime(+e+o)},function(e,t){return t-e});H.every=function(o){return o=Ur(o),isFinite(o)&&0<o?1<o?P(function(e){e.setTime(Ur(e/o)*o)},function(e,a){e.setTime(+e+a*o)},function(e,t){return(t-e)/o}):H:null};var X=6e4,N=36e5,V=6048e5,O=P(function(e){e.setTime(1e3*Ur(e/1e3))},function(e,o){e.setTime(+e+1e3*o)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),j=P(function(e){e.setTime(Ur(e/X)*X)},function(e,o){e.setTime(+e+o*X)},function(e,t){return(t-e)/X},function(e){return e.getMinutes()}),B=P(function(e){var o=e.getTimezoneOffset()*X%N;0>o&&(o+=N),e.setTime(Ur((+e-o)/N)*N+o)},function(e,o){e.setTime(+e+o*N)},function(e,t){return(t-e)/N},function(e){return e.getHours()}),Z=P(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*X)/864e5},function(e){return e.getDate()-1}),W=L(0),R=L(1),G=(L(2),L(3),L(4)),J=(L(5),L(6),P(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),$=P(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});$.every=function(o){return isFinite(o=Ur(o))&&0<o?P(function(e){e.setFullYear(Ur(e.getFullYear()/o)*o),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t*o)}):null},P(function(e){e.setUTCSeconds(0,0)},function(e,o){e.setTime(+e+o*X)},function(e,t){return(t-e)/X},function(e){return e.getUTCMinutes()}),P(function(e){e.setUTCMinutes(0,0,0)},function(e,o){e.setTime(+e+o*N)},function(e,t){return(t-e)/N},function(e){return e.getUTCHours()});var K,tt=P(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),et=I(0),nt=I(1),ot=(I(2),I(3),I(4)),at=(I(5),I(6),P(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),P(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));at.every=function(o){return isFinite(o=Ur(o))&&0<o?P(function(e){e.setUTCFullYear(Ur(e.getUTCFullYear()/o)*o),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t*o)}):null};var it={"":function(a,t){t:for(var n,e=(a=a.toPrecision(t)).length,l=1,i=-1;l<e;++l)switch(a[l]){case".":i=n=l;break;case"0":0===i&&(i=l),n=l;break;case"e":break t;default:0<i&&(i=0);}return 0<i?a.slice(0,i)+a.slice(n+1):a},"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return mr(e).toString(2)},c:function(e){return e+""},d:function(e){return mr(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return mr(e).toString(8)},p:function(e,t){return lt(100*e,t)},r:lt,s:function(a,t){var n=Q(a,t);if(!n)return a+"";var l=n[0],r=n[1],i=r-(K=3*Mr(-8,xr(8,Ur(r/3))))+1,o=l.length;return i===o?l:o<i?l+Array(i-o+1).join("0"):0<i?l.slice(0,i)+"."+l.slice(i):"0."+Array(1-i).join("0")+Q(a,Mr(0,t+i-1))[0]},X:function(e){return mr(e).toString(16).toUpperCase()},x:function(e){return mr(e).toString(16)}},st=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;rt.prototype=ct.prototype,ct.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Mr(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Mr(0,0|this.precision))+this.type};var ut,pt,gt=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];vt({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var dt,mt,ft,Ct={"-":"",_:" ",0:"0"},St=/^\s*\d+/,zt=/^%/,At=/[\\^$*+?|[\]().{}]/g;el({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Dt="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||mt(Dt),+new Date("2000-01-01T00:00:00.000Z")||ft(Dt);var Et="$";qn.prototype=tl.prototype={constructor:qn,has:function(e){return Et+e in this},get:function(e){return this[Et+e]},set:function(e,t){return this[Et+e]=t,this},remove:function(e){var t=Et+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Et&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Et&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Et&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Et&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Et&&++e;return e},empty:function(){for(var e in this)if(e[0]===Et)return!1;return!0},each:function(e){for(var t in this)t[0]===Et&&e(this[t],t.slice(1),this)}};var Nt=tl.prototype;jn.prototype=function(o,t){var n=new jn;if(o instanceof jn)o.each(function(e){n.add(e)});else if(o){var e=-1,a=o.length;if(null==t)for(;++e<a;)n.add(o[e]);else for(;++e<a;)n.add(t(o[e],e,o))}return n}.prototype={constructor:jn,has:Nt.has,add:function(e){return this[Et+(e+="")]=e,this},remove:Nt.remove,clear:Nt.clear,values:Nt.keys,size:Nt.size,empty:Nt.empty,each:Nt.each};var Vn=Array.prototype,In=Vn.map,Zn=Vn.slice,Wn=1/.7,Rn=/^#([0-9a-f]{3})$/,re=/^#([0-9a-f]{6})$/,ie=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,oe=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ue=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ae=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,se=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ce=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,le={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nl(Gn,Jn,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),nl(ye,ve,Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&255>=this.r&&0<=this.g&&255>=this.g&&0<=this.b&&255>=this.b&&0<=this.opacity&&1>=this.opacity},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Mr(0,xr(1,e)))?"rgb(":"rgba(")+Mr(0,xr(255,mr(this.r)||0))+", "+Mr(0,xr(255,mr(this.g)||0))+", "+Mr(0,xr(255,mr(this.b)||0))+(1===e?")":", "+e+")")}})),nl(me,function(o,t,n,e){return 1===arguments.length?function(l){if(l instanceof me)return new me(l.h,l.s,l.l,l.opacity);if(l instanceof Gn||(l=Jn(l)),!l)return new me;if(l instanceof me)return l;var d=(l=l.rgb()).r/255,n=l.g/255,e=l.b/255,r=xr(d,n,e),i=Mr(d,n,e),o=NaN,c=i-r,a=(i+r)/2;return c?(o=d===i?(n-e)/c+6*(n<e):n===i?(e-d)/c+2:(d-n)/c+4,c/=.5>a?i+r:2-i-r,o*=60):c=0<a&&1>a?0:o,new me(o,c,a,l.opacity)}(o):new me(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new me(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new me(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var o=this.h%360+360*(0>this.h),t=isNaN(o)||isNaN(this.s)?0:this.s,n=this.l,e=n+(.5>n?n:1-n)*t,a=2*n-e;return new ye(de(240<=o?o-240:o+120,a,e),de(o,a,e),de(120>o?o+240:o-120,a,e),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity}}));var he=Tr/180,xe=180/Tr,Me=.96422,be=1,Te=.82521,ke=4/29,Ne=6/29,Ae=3*Ne*Ne,Ce=Ne*Ne*Ne;nl(ze,function(o,t,n,e){return 1===arguments.length?we(o):new ze(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return new ze(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new ze(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var o=(this.l+16)/116,t=isNaN(this.a)?o:o+this.a/500,n=isNaN(this.b)?o:o-this.b/200;return new ye(Ue(3.1338561*(t=Me*Ee(t))-1.6168667*(o=be*Ee(o))-.4906146*(n=Te*Ee(n))),Ue(-.9787684*t+1.9161415*o+.033454*n),Ue(.0719453*t-.2289914*o+1.4052427*n),this.opacity)}})),nl(Fe,function(o,t,n,e){return 1===arguments.length?function(e){if(e instanceof Fe)return new Fe(e.h,e.c,e.l,e.opacity);if(e instanceof ze||(e=we(e)),0===e.a&&0===e.b)return new Fe(NaN,0,e.l,e.opacity);var t=yr(e.b,e.a)*xe;return new Fe(0>t?t+360:t,wr(e.a*e.a+e.b*e.b),e.l,e.opacity)}(o):new Fe(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return new Fe(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Fe(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return we(this).rgb()}}));var Se=1.78277,Le=-.29227,He=-.90649,Xe=1.97294,qe=Xe*He,Ie=Xe*Se,Ve=Se*Le- -.14861*He;nl(Pe,function(o,t,n,e){return 1===arguments.length?function(l){if(l instanceof Pe)return new Pe(l.h,l.s,l.l,l.opacity);l instanceof ye||(l=_e(l));var t=l.r/255,n=l.g/255,e=l.b/255,r=(Ve*e+qe*t-Ie*n)/(Ve+qe-Ie),i=e-r,o=(Xe*(n-r)-Le*i)/He,d=wr(o*o+i*i)/(Xe*r*(1-r)),a=d?yr(o,i)*xe-120:NaN;return new Pe(0>a?a+360:a,d,r,l.opacity)}(o):new Pe(o,t,n,null==e?1:e)},Qn(Gn,{brighter:function(e){return e=null==e?Wn:Cr(Wn,e),new Pe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Cr(.7,e),new Pe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var o=isNaN(this.h)?0:(this.h+120)*he,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),e=br(o),a=vr(o);return new ye(255*(t+n*(-.14861*e+Se*a)),255*(t+n*(Le*e+He*a)),255*(t+n*(Xe*e)),this.opacity)}}));var Oe,$n,Kn,er,nr=function o(t){function n(l,n){var s=a((l=ve(l)).r,(n=ve(n)).r),d=a(l.g,n.g),r=a(l.b,n.b),i=Re(l.opacity,n.opacity);return function(e){return l.r=s(e),l.g=d(e),l.b=r(e),l.opacity=i(e),l+""}}var a=Be(t);return n.gamma=o,n}(1),Ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qe=new RegExp(Ze.source,"g"),Ge=180/Tr,or={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ir=al(function(e){return"none"===e?or:(Oe||(Oe=document.createElement("DIV"),$n=document.documentElement,Kn=document.defaultView),Oe.style.transform=e,e=Kn.getComputedStyle($n.appendChild(Oe),null).getPropertyValue("transform"),$n.removeChild(Oe),ol(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),rr=al(function(e){return null==e?or:(er||(er=document.createElementNS("http://www.w3.org/2000/svg","g")),er.setAttribute("transform",e),(e=er.transform.baseVal.consolidate())?ol((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):or)},", ",")",")"),lr=Math.SQRT2,cr=2,ur=4,pr=1e-12,_r=[0,1],dr=1e3,hr=60*dr,fr=60*hr,Fr=24*fr,Pr=30*Fr,Lr=365*Fr,Hr=Array.prototype.slice,Xr=1,Nr=2,Vr=3,Ir=4,Or=1e-6,jr={value:function(){}};ei.prototype=ti.prototype={constructor:ei,on:function(l,t){var s,d,e=this._,i=(d=e,(l+"").trim().split(/^|\s+/).map(function(o){var a="",i=o.indexOf(".");if(0<=i&&(a=o.slice(i+1),o=o.slice(0,i)),o&&!d.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:a}})),o=-1,r=i.length;if(!(2>arguments.length)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<r;)if(s=(l=i[o]).type)e[s]=ii(e[s],l.name,t);else if(null==t)for(s in e)e[s]=ii(e[s],l.name,null);return this}for(;++o<r;)if((s=(l=i[o]).type)&&(s=Yl(e[s],l.name)))return s},copy:function(){var o={},t=this._;for(var n in t)o[n]=t[n].slice();return new ei(o)},call:function(a,t){if(0<(n=arguments.length-2))for(var n,e,l=Array(n),i=0;i<n;++i)l[i]=arguments[i+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=0,n=(e=this._[a]).length;i<n;++i)e[i].value.apply(t,l)},apply:function(a,t,n){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var e=this._[a],l=0,i=e.length;l<i;++l)e[l].value.apply(t,n)}};var ni="http://www.w3.org/1999/xhtml",qr={svg:"http://www.w3.org/2000/svg",xhtml:ni,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ai=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var _i=document.documentElement;if(!_i.matches){var vi=_i.webkitMatchesSelector||_i.msMatchesSelector||_i.mozMatchesSelector||_i.oMatchesSelector;ai=function(e){return function(){return vi.call(this,e)}}}}var yi=ai;mi.prototype={constructor:mi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var gi="$";Ai.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);0<=t&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var wi={};(ee.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(wi={mouseenter:"mouseover",mouseleave:"mouseout"}));var Xi=[null];Bi.prototype=El.prototype={constructor:Bi,select:function(d){"function"!=typeof d&&(d=li(d));for(var _=this._groups,n=_.length,e=Array(n),r=0;r<n;++r)for(var i,o,u=_[r],a=u.length,s=e[r]=Array(a),c=0;c<a;++c)(i=u[c])&&(o=d.call(i,i.__data__,c,u))&&("__data__"in i&&(o.__data__=i.__data__),s[c]=o);return new Bi(e,this._parents)},selectAll:function(l){"function"!=typeof l&&(l=fi(l));for(var d=this._groups,n=d.length,e=[],r=[],i=0;i<n;++i)for(var o,u=d[i],a=u.length,s=0;s<a;++s)(o=u[s])&&(e.push(l.call(o,o.__data__,s,u)),r.push(o));return new Bi(e,r)},filter:function(l){"function"!=typeof l&&(l=yi(l));for(var d=this._groups,n=d.length,e=Array(n),r=0;r<n;++r)for(var i,o=d[r],u=o.length,a=e[r]=[],s=0;s<u;++s)(i=o[s])&&l.call(i,i.__data__,s,o)&&a.push(i);return new Bi(e,this._parents)},data:function(b,T){if(!b)return p=Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n,e=T?xi:Dl,r=this._parents,i=this._groups;"function"!=typeof b&&(n=b,b=function(){return n});for(var o=i.length,u=Array(o),a=Array(o),s=Array(o),c=0;c<o;++c){var l=r[c],h=i[c],f=h.length,p=b.call(l,l&&l.__data__,c,r),_=p.length,v=a[c]=Array(_),y=u[c]=Array(_);e(l,h,v,y,s[c]=Array(f),p,T);for(var g,m,d=0,w=0;d<_;++d)if(g=v[d]){for(w<=d&&(w=d+1);!(m=y[w])&&++w<_;);g._next=m||null}}return(u=new Bi(u,r))._enter=a,u._exit=s,u},enter:function(){return new Bi(this._enter||this._groups.map(pi),this._parents)},exit:function(){return new Bi(this._exit||this._groups.map(pi),this._parents)},merge:function(d){for(var t=this._groups,n=d._groups,e=t.length,r=n.length,i=xr(e,r),o=Array(e),u=0;u<i;++u)for(var a,s=t[u],c=n[u],l=s.length,_=o[u]=Array(l),h=0;h<l;++h)(a=s[h]||c[h])&&(_[h]=a);for(;u<e;++u)o[u]=t[u];return new Bi(o,this._parents)},order:function(){for(var a=this._groups,t=-1,n=a.length;++t<n;)for(var e,l=a[t],i=l.length-1,o=l[i];0<=--i;)(e=l[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},sort:function(d){function e(e,o){return e&&o?d(e.__data__,o.__data__):!e-!o}d||(d=Mi);for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i){for(var o,u=t[i],a=u.length,s=r[i]=Array(a),c=0;c<a;++c)(o=u[c])&&(s[c]=o);s.sort(e)}return new Bi(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var a=this._groups,t=0,n=a.length;t<n;++t)for(var e,l=a[t],r=0,i=l.length;r<i;++r)if(e=l[r],e)return e;return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(l){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,i=t[n],o=0,s=i.length;o<s;++o)(r=i[o])&&l.call(r,r.__data__,o,i);return this},attr:function(o,t){var a=oi(o);if(2>arguments.length){var e=this.node();return a.local?e.getAttributeNS(a.space,a.local):e.getAttribute(a)}return this.each((null==t?a.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?a.local?function(o,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(o.space,o.local):this.setAttributeNS(o.space,o.local,e)}}:function(o,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(o):this.setAttribute(o,e)}}:a.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(a,t))},style:function(o,t,a){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(o,n,e){return function(){var a=n.apply(this,arguments);null==a?this.style.removeProperty(o):this.style.setProperty(o,a,e)}}:function(o,t,n){return function(){this.style.setProperty(o,t,n)}})(o,t,null==a?"":a)):Ti(this.node(),o)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(o,n){return function(){var e=n.apply(this,arguments);null==e?delete this[o]:this[o]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(a,t){var l=ki(a+"");if(2>arguments.length){for(var e=Ni(this.node()),r=-1,i=l.length;++r<i;)if(!e.contains(l[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Ci:Si)(this,e)}}:t?function(e){return function(){Ci(this,e)}}:function(e){return function(){Si(this,e)}})(l,t))},text:function(e){return arguments.length?this.each(null==e?zi:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Di:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Ei)},lower:function(){return this.each(Ui)},append:function(e){var o="function"==typeof e?e:si(e);return this.select(function(){return this.appendChild(o.apply(this,arguments))})},insert:function(o,a){var i="function"==typeof o?o:si(o),e=null==a?Yi:"function"==typeof a?a:li(a);return this.select(function(){return this.insertBefore(i.apply(this,arguments),e.apply(this,arguments)||null)})},remove:function(){return this.each(Fi)},clone:function(e){return this.select(e?Li:Pi)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(d,t,n){var e,r,i=(d+"").trim().split(/^|\s+/).map(function(o){var a="",i=o.indexOf(".");return 0<=i&&(a=o.slice(i+1),o=o.slice(0,i)),{type:o,name:a}}),o=i.length;if(!(2>arguments.length)){for(u=t?Vi:Ii,null==n&&(n=!1),e=0;e<o;++e)this.each(u(i[e],t,n));return this}var u=this.node().__on;if(u)for(var a,s=0,c=u.length;s<c;++s)for(e=0,a=u[s];e<o;++e)if((r=i[e]).type===a.type&&r.name===a.name)return a.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ji(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ji(this,e,t)}})(e,t))}},io.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var Ri,lo,ho=0,fo=0,po=0,_o=1e3,vo=0,yo=0,go=0,mo="object"==typeof performance&&performance.now?performance:Date,wo="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};bo.prototype=Fl.prototype={constructor:bo,restart:function(o,a,i){if("function"!=typeof o)throw new TypeError("callback is not a function");i=(null==i?co():+i)+(null==a?0:+a),this._next||lo===this||(lo?lo._next=this:Ri=this,lo=this),this._call=o,this._time=i,Ao()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ao())}};var xo=ti("start","end","interrupt"),Br=[],Zr=0,Wr=1,Uo=2,Yo=3,Fo=4,Po=5,Lo=6,Ho=El.prototype.constructor,Ro=0,$o=El.prototype;Bo.prototype=function(e){return El().transition(e)}.prototype={constructor:Bo,select:function(d){var _=this._name,n=this._id;"function"!=typeof d&&(d=li(d));for(var e=this._groups,r=e.length,i=Array(r),o=0;o<r;++o)for(var u,a,s=e[o],c=s.length,l=i[o]=Array(c),p=0;p<c;++p)(u=s[p])&&(a=d.call(u,u.__data__,p,s))&&("__data__"in u&&(a.__data__=u.__data__),l[p]=a,So(l[p],_,n,p,l,Io(u,n)));return new Bo(i,this._parents,_,n)},selectAll:function(d){var g=this._name,n=this._id;"function"!=typeof d&&(d=fi(d));for(var e=this._groups,r=e.length,i=[],o=[],u=0;u<r;++u)for(var a,s=e[u],c=s.length,l=0;l<c;++l)if(a=s[l]){for(var h,m=d.call(a,a.__data__,l,s),p=Io(a,n),_=0,f=m.length;_<f;++_)(h=m[_])&&So(h,g,n,_,m,p);i.push(m),o.push(a)}return new Bo(i,o,g,n)},filter:function(l){"function"!=typeof l&&(l=yi(l));for(var d=this._groups,n=d.length,e=Array(n),r=0;r<n;++r)for(var i,o=d[r],u=o.length,a=e[r]=[],s=0;s<u;++s)(i=o[s])&&l.call(i,i.__data__,s,o)&&a.push(i);return new Bo(e,this._parents,this._name,this._id)},merge:function(d){if(d._id!==this._id)throw new Error;for(var t=this._groups,n=d._groups,e=t.length,r=n.length,i=xr(e,r),o=Array(e),u=0;u<i;++u)for(var a,s=t[u],c=n[u],l=s.length,_=o[u]=Array(l),h=0;h<l;++h)(a=s[h]||c[h])&&(_[h]=a);for(;u<e;++u)o[u]=t[u];return new Bo(o,this._parents,this._name,this._id)},selection:function(){return new Ho(this._groups,this._parents)},transition:function(){for(var d=this._name,t=this._id,n=Pl(),e=this._groups,r=e.length,i=0;i<r;++i)for(var o,u=e[i],a=u.length,s=0;s<a;++s)if(o=u[s]){var c=Io(o,t);So(o,d,n,s,u,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Bo(e,this._parents,d,n)},call:$o.call,nodes:$o.nodes,node:$o.node,size:$o.size,empty:$o.empty,each:$o.each,on:function(l,t){var d,e,r,i,o,c,n=this._id;return 2>arguments.length?Io(this.node(),n).on.on(l):this.each((d=n,r=t,c=((e=l)+"").trim().split(/^|\s+/).every(function(e){var o=e.indexOf(".");return 0<=o&&(e=e.slice(0,o)),!e||"start"===e})?Xo:qo,function(){var a=c(this,d),t=a.on;t!==i&&(o=(i=t).copy()).on(e,r),a.on=o}))},attr:function(o,t){var a=oi(o),e="transform"===a?rr:jo;return this.attrTween(o,"function"==typeof t?(a.local?function(l,e,r){var i,o,s;return function(){var a,t=r(this);return null==t?void this.removeAttributeNS(l.space,l.local):(a=this.getAttributeNS(l.space,l.local))===t?null:a===i&&t===o?s:s=e(i=a,o=t)}}:function(l,e,r){var i,o,s;return function(){var a,t=r(this);return null==t?void this.removeAttribute(l):(a=this.getAttribute(l))===t?null:a===i&&t===o?s:s=e(i=a,o=t)}})(a,e,Oo(this,"attr."+o,t)):null==t?(a.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(a):(a.local?function(a,n,e){var l,i;return function(){var o=this.getAttributeNS(a.space,a.local);return o===e?null:o===l?i:i=n(l=o,e)}}:function(a,n,e){var l,i;return function(){var o=this.getAttribute(a);return o===e?null:o===l?i:i=n(l=o,e)}})(a,e,t+""))},attrTween:function(o,t){var a="attr."+o;if(2>arguments.length)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;var e=oi(o);return this.tween(a,(e.local?function(o,a){function e(){var i=this,l=a.apply(i,arguments);return l&&function(e){i.setAttributeNS(o.space,o.local,l(e))}}return e._value=a,e}:function(o,a){function e(){var i=this,l=a.apply(i,arguments);return l&&function(e){i.setAttribute(o,l(e))}}return e._value=a,e})(e,t))},style:function(x,t,b){var e,r,i,o,u,a,s,c,l,h,f,p,_,v,y,g,m,d="transform"==(x+="")?ir:jo;return null==t?this.styleTween(x,(_=x,v=d,function(){var e=Ti(this,_),t=(this.style.removeProperty(_),Ti(this,_));return e===t?null:e===y&&t===g?m:m=v(y=e,g=t)})).on("end.style."+x,(p=x,function(){this.style.removeProperty(p)})):this.styleTween(x,"function"==typeof t?(s=d,c=Oo(this,"style."+(a=x),t),function(){var e=Ti(this,a),t=c(this);return null==t&&(this.style.removeProperty(a),t=Ti(this,a)),e===t?null:e===l&&t===h?f:f=s(l=e,h=t)}):(e=x,r=d,i=t+"",function(){var n=Ti(this,e);return n===i?null:n===o?u:u=r(o=n,i)}),b)},styleTween:function(o,t,a){var e="style."+(o+="");if(2>arguments.length)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(o,a,l){function e(){var i=this,r=a.apply(i,arguments);return r&&function(e){i.style.setProperty(o,r(e),l)}}return e._value=a,e}(o,t,null==a?"":a))},text:function(o){return this.tween("text","function"==typeof o?(n=Oo(this,"text",o),function(){var e=n(this);this.textContent=null==e?"":e}):(a=null==o?"":o+"",function(){this.textContent=a}));var a,n},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var o in this.__transition)if(+o!==t)return;e&&e.removeChild(this)}));var t},tween:function(a,t){var n=this._id;if(a+="",2>arguments.length){for(var e,l=Io(this.node(),n).tween,i=0,o=l.length;i<o;++i)if((e=l[i]).name===a)return e.value;return null}return this.each((null==t?function(l,t){var o,i;return function(){var a=qo(this,l),s=a.tween;if(s!==o)for(var n=0,e=(i=o=s).length;n<e;++n)if(i[n].name===t){(i=i.slice()).splice(n,1);break}a.tween=i}}:function(l,t,n){var o,s;if("function"!=typeof n)throw new Error;return function(){var d=qo(this,l),c=d.tween;if(c!==o){s=(o=c).slice();for(var _={name:t,value:n},e=0,r=s.length;e<r;++e)if(s[e].name===t){s[e]=_;break}e===r&&s.push(_)}d.tween=s}})(n,a,t))},delay:function(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){Xo(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){Xo(this,e).delay=t}})(o,e)):Io(this.node(),o).delay},duration:function(e){var o=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){qo(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){qo(this,e).duration=t}})(o,e)):Io(this.node(),o).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){qo(this,e).ease=t}}(t,e)):Io(this.node(),t).ease}},Tr,Tr;var Qo={time:null,delay:0,duration:250,ease:function(e){return(1>=(e*=2)?e*e*e:(e-=2)*e*e+2)/2}};El.prototype.interrupt=function(e){return this.each(function(){Vo(this,e)})},El.prototype.transition=function(l){var t,n;l instanceof Bo?(t=l._id,l=l._name):(t=Pl(),(n=Qo).time=co(),l=null==l?null:l+"");for(var e=this._groups,r=e.length,i=0;i<r;++i)for(var o,d=e[i],a=d.length,s=0;s<a;++s)(o=d[s])&&So(o,l,t,s,d,n||Wo(o,t));return new Bo(e,this._parents,l,t)},Ll.prototype={constructor:Ll,scale:function(e){return 1===e?this:new Ll(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ll(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Go=new Ll(1,0,0);Hl.prototype=Ll.prototype;var Rr={name:"drag"},Qr={name:"space"},Gr={name:"handle"},Jr={name:"center"},$r={name:"x",handles:["e","w"].map(Gl),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Kr={name:"y",handles:["n","s"].map(Gl),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},es={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Gl),input:function(e){return e},output:function(e){return e}},ts={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ns={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},os={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},as={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},is={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};return ee.bisector=q,ee.extent=function(a,t){var n,e,l,i=a.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=a[o])&&n<=n)for(e=l=n;++o<i;)null!=(n=a[o])&&(n<e&&(e=n),l<n&&(l=n));}else for(;++o<i;)if(null!=(n=t(a[o],o,a))&&n<=n)for(e=l=n;++o<i;)null!=(n=t(a[o],o,a))&&(n<e&&(e=n),l<n&&(l=n));return[e,l]},ee.max=function(a,t){var n,e,l=a.length,i=-1;if(null==t){for(;++i<l;)if(null!=(n=a[i])&&n<=n)for(e=n;++i<l;)null!=(n=a[i])&&e<n&&(e=n);}else for(;++i<l;)if(null!=(n=t(a[i],i,a))&&n<=n)for(e=n;++i<l;)null!=(n=t(a[i],i,a))&&e<n&&(e=n);return e},ee.min=function(a,t){var n,e,l=a.length,i=-1;if(null==t){for(;++i<l;)if(null!=(n=a[i])&&n<=n)for(e=n;++i<l;)null!=(n=a[i])&&n<e&&(e=n);}else for(;++i<l;)if(null!=(n=t(a[i],i,a))&&n<=n)for(e=n;++i<l;)null!=(n=t(a[i],i,a))&&n<e&&(e=n);return e},ee.line=n,ee.area=function(){function e(g){var t,m,e,r,i,o=g.length,u=!1,v=Array(o),s=Array(o);for(null==_&&(y=x(i=k())),t=0;t<=o;++t){if(!(t<o&&p(r=g[t],t,g))===u)if(u=!u)m=t,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),e=t-1;m<=e;--e)y.point(v[e],s[e]);y.lineEnd(),y.areaEnd()}u&&(v[t]=+d(r,t,g),s[t]=+h(r,t,g),y.point(l?+l(r,t,g):v[t],f?+f(r,t,g):s[t]))}if(i)return y=null,i+""||null}function a(){return n().defined(p).curve(x).context(_)}var d=i,l=null,h=r(0),f=o,p=r(!0),_=null,x=m,y=null;return e.x=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),l=null,e):d},e.x0=function(n){return arguments.length?(d="function"==typeof n?n:r(+n),e):d},e.x1=function(n){return arguments.length?(l=null==n?null:"function"==typeof n?n:r(+n),e):l},e.y=function(n){return arguments.length?(h="function"==typeof n?n:r(+n),f=null,e):h},e.y0=function(n){return arguments.length?(h="function"==typeof n?n:r(+n),e):h},e.y1=function(n){return arguments.length?(f=null==n?null:"function"==typeof n?n:r(+n),e):f},e.lineX0=e.lineY0=function(){return a().x(d).y(h)},e.lineY1=function(){return a().x(d).y(f)},e.lineX1=function(){return a().x(l).y(h)},e.defined=function(n){return arguments.length?(p="function"==typeof n?n:r(!!n),e):p},e.curve=function(n){return arguments.length?(x=n,null!=_&&(y=x(_)),e):x},e.context=function(n){return arguments.length?(null==n?_=y=null:y=x(_=n),e):_},e},ee.curveBasis=function(e){return new _(e)},ee.curveMonotoneX=function(e){return new D(e)},ee.curveNatural=function(e){return new Y(e)},ee.curveCardinal=c,ee.curveCatmullRom=h,ee.curveStep=function(e){return new F(e,.5)},ee.curveStepAfter=function(e){return new F(e,1)},ee.curveStepBefore=function(e){return new F(e,0)},ee.curveLinear=m,ee.timeMillisecond=H,ee.timeSecond=O,ee.timeMinute=j,ee.timeHour=B,ee.timeDay=Z,ee.timeWeek=W,ee.timeMonth=J,ee.timeYear=$,ee.formatDefaultLocale=vt,ee.formatLocale=yt,ee.timeFormatLocale=Tt,ee.timeFormatDefaultLocale=el,ee.scaleLinear=function e(){var t=pl(dl,$e);return t.copy=function(){return _l(t,e())},gl(t)},ee.scaleLog=function o(){function a(){return p=bl(g),_=vl(g),0>d()[0]&&(p=wl(p),_=wl(_)),i}var i=pl(ml,fl).domain([1,10]),d=i.domain,g=10,p=bl(10),_=vl(10);return i.base=function(e){return arguments.length?(g=+e,a()):g},i.domain=function(e){return arguments.length?(d(e),a()):d()},i.ticks=function(y){var m,n=d(),e=n[0],r=n[n.length-1];(m=r<e)&&(a=e,e=r,r=a);var i,o,u,a=p(e),s=p(r),c=null==y?10:+y,l=[];if(!(!(g%1)&&s-a<c))l=T(a,s,xr(s-a,c)).map(_);else if(a=mr(a)-1,s=mr(s)+1,0<e){for(;a<s;++a)for(o=1,i=_(a);o<g;++o)if(!((u=i*o)<e)){if(r<u)break;l.push(u)}}else for(;a<s;++a)for(o=g-1,i=_(a);1<=o;--o)if(!((u=i*o)<e)){if(r<u)break;l.push(u)}return m?l.reverse():l},i.tickFormat=function(n,o){if(null==o&&(o=10===g?".0e":","),"function"!=typeof o&&(o=ee.format(o)),n===1/0)return o;null==n&&(n=10);var a=Mr(1,g*n/i.ticks().length);return function(e){var t=e/_(mr(p(e)));return t*g<g-.5&&(t*=g),t<=a?o(e):""}},i.nice=function(){return d(yl(d(),{floor:function(e){return _(Ur(p(e)))},ceil:function(e){return _(Ar(p(e)))}}))},i.copy=function(){return _l(i,o().base(g))},i},ee.scalePow=function o(){var a=1,t=pl(function(o,n){return(n=Tl(n,a)-(o=Tl(o,a)))?function(e){return(Tl(e,a)-o)/n}:rl(n)},function(o,n){return n=Tl(n,a)-(o=Tl(o,a)),function(e){return Tl(o+n*e,1/a)}}),n=t.domain;return t.exponent=function(e){return arguments.length?(a=+e,n(n())):a},t.copy=function(){return _l(t,o().exponent(a))},gl(t)},ee.scaleTime=function(){return function T(k,u,n,e,r,i,o,a,s){function c(a){return(o(a)<a?f:i(a)<a?p:r(a)<a?_:e(a)<a?v:u(a)<a?n(a)<a?y:g:k(a)<a?m:d)(a)}function C(l,s,n,e){if(null==l&&(l=10),"number"==typeof l){var r=kr(n-s)/l,i=q(function(e){return e[2]}).right(w,r);i===w.length?(e=te(s/Lr,n/Lr,l),l=k):i?(e=(i=w[r/w[i-1][2]<w[i][2]/r?i-1:i])[1],l=i[0]):(e=Mr(te(s,n,l),1),l=a)}return null==e?l:l.every(e)}var b=pl(dl,$e),l=b.invert,h=b.domain,f=s(".%L"),p=s(":%S"),_=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),g=s("%b %d"),m=s("%B"),d=s("%Y"),w=[[o,1,dr],[o,5,5*dr],[o,15,15*dr],[o,30,30*dr],[i,1,hr],[i,5,5*hr],[i,15,15*hr],[i,30,30*hr],[r,1,fr],[r,3,3*fr],[r,6,6*fr],[r,12,12*fr],[e,1,Fr],[e,2,2*Fr],[n,1,7*Fr],[u,1,Pr],[u,3,3*Pr],[k,1,Lr]];return b.invert=function(e){return new Date(l(e))},b.domain=function(e){return arguments.length?h(In.call(e,Cl)):h().map(kl)},b.ticks=function(a,t){var n,e=h(),l=e[0],i=e[e.length-1],o=i<l;return o&&(n=l,l=i,i=n),n=(n=C(a,l,i,t))?n.range(l,i+1):[],o?n.reverse():n},b.tickFormat=function(e,t){return null==t?c:s(t)},b.nice=function(o,t){var n=h();return(o=C(o,n[0],n[n.length-1],t))?h(yl(n,o)):b},b.copy=function(){return _l(b,T(k,u,n,e,r,i,o,a,s))},b}($,J,W,Z,B,j,O,H,ee.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ee.axisRight=function(e){return Al(Nr,e)},ee.axisTop=function(e){return Al(Xr,e)},ee.axisBottom=function(e){return Al(Vr,e)},ee.axisLeft=function(e){return Al(Ir,e)},ee.zoom=function(){function z(e){e.property("__zoom",Ol).on("wheel.zoom",T).on("mousedown.zoom",r).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Mr(l[0],xr(l[1],t)))===e.k?e:new Ll(t,e.x,e.y)}function d(o,t,n){var e=t[0]-n[0]*o.k,a=t[1]-n[1]*o.k;return e===o.x&&a===o.y?o:new Ll(o.k,e,a)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,l,d){e.on("start.zoom",function(){M(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).end()}).tween("zoom",function(){var c=arguments,_=M(this,c),t=D.apply(this,c),r=d||w(t),i=Mr(t[1][0]-t[0][0],t[1][1]-t[0][1]),n=this.__zoom,o="function"==typeof l?l.apply(this,c):l,u=v(n.invert(r).concat(i/n.k),o.invert(r).concat(i/o.k));return function(a){if(1===a)a=o;else{var t=u(a),n=i/t[2];a=new Ll(n,r[0]-t[0]*n,r[1]-t[1]*n)}_.zoom(null,a)}})}function M(o,t){for(var a,e=0,l=n.length;e<l;++e)if((a=n[e]).that===o)return a;return new b(o,t)}function b(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=D.apply(e,t)}function T(){if(Y.apply(this,arguments)){var o=M(this,arguments),t=this.__zoom,n=Mr(l[0],xr(l[1],t.k*Cr(2,a.apply(this,arguments)))),e=Gi(this);if(o.wheel)o.mouse[0][0]===e[0]&&o.mouse[0][1]===e[1]||(o.mouse[1]=t.invert(o.mouse[0]=e)),clearTimeout(o.wheel);else{if(t.k===n)return;o.mouse=[e,t.invert(e)],Vo(this),o.start()}Nl(),o.wheel=setTimeout(function(){o.wheel=null,o.end()},h),o.zoom("mouse",E(d(m(t,n),o.mouse[0],o.mouse[1]),o.extent,_))}}function r(){if(!p&&Y.apply(this,arguments)){var a=M(this,arguments),e=Zi(ee.event.view).on("mousemove.zoom",function(){if(Nl(),!a.moved){var e=ee.event.clientX-l,t=ee.event.clientY-r;a.moved=y<e*e+t*t}a.zoom("mouse",E(d(a.that.__zoom,a.mouse[0]=Gi(a.that),a.mouse[1]),a.extent,_))},!0).on("mouseup.zoom",function(){e.on("mousemove.zoom mouseup.zoom",null),eo(ee.event.view,a.moved),Nl(),a.end()},!0),t=Gi(this),l=ee.event.clientX,r=ee.event.clientY;no(ee.event.view),Xl(),a.mouse=[t,this.__zoom.invert(t)],Vo(this),a.start()}}function k(){if(Y.apply(this,arguments)){var o=this.__zoom,t=Gi(this),n=o.invert(t),e=o.k*(ee.event.shiftKey?.5:2),a=E(d(m(o,e),t,n),D.apply(this,arguments),_);Nl(),0<u?Zi(this).transition().duration(u).call(x,a,t):Zi(this).call(z.transform,a)}}function U(){if(Y.apply(this,arguments)){var a,t,n,e,l=M(this,arguments),i=ee.event.changedTouches,o=i.length;for(Xl(),t=0;t<o;++t)e=[e=Ji(this,i,(n=i[t]).identifier),this.__zoom.invert(e),n.identifier],l.touch0?l.touch1||(l.touch1=e):(l.touch0=e,a=!0);if(S&&(S=clearTimeout(S),!l.touch1))return l.end(),void((e=Zi(this).on("dblclick.zoom"))&&e.apply(this,arguments));a&&(S=setTimeout(function(){S=null},c),Vo(this),l.start())}}function A(){var p,t,n,e,r=M(this,arguments),i=ee.event.changedTouches,o=i.length;for(Nl(),S&&(S=clearTimeout(S)),p=0;p<o;++p)n=Ji(this,i,(t=i[p]).identifier),r.touch0&&r.touch0[2]===t.identifier?r.touch0[0]=n:r.touch1&&r.touch1[2]===t.identifier&&(r.touch1[0]=n);if(t=r.that.__zoom,r.touch1){var u=r.touch0[0],a=r.touch0[1],s=r.touch1[0],c=r.touch1[1],l=(l=s[0]-u[0])*l+(l=s[1]-u[1])*l,h=(h=c[0]-a[0])*h+(h=c[1]-a[1])*h;t=m(t,wr(l/h)),n=[(u[0]+s[0])/2,(u[1]+s[1])/2],e=[(a[0]+c[0])/2,(a[1]+c[1])/2]}else{if(!r.touch0)return;n=r.touch0[0],e=r.touch0[1]}r.zoom("touch",E(d(t,n,e),r.extent,_))}function C(){var o,t,n=M(this,arguments),e=ee.event.changedTouches,a=e.length;for(Xl(),p&&clearTimeout(p),p=setTimeout(function(){p=null},c),o=0;o<a;++o)t=e[o],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var S,p,Y=Vl,D=Il,E=Bl,a=jl,i=ql,l=[0,Infinity],_=[[-Infinity,-Infinity],[Infinity,Infinity]],u=250,v=ll,n=[],s=ti("start","zoom","end"),c=500,h=150,y=0;return z.transform=function(o,t){var a=o.selection?o.selection():o;a.property("__zoom",Ol),o===a?a.interrupt().each(function(){M(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}):x(o,t)},z.scaleBy=function(e,t){z.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)})},z.scaleTo=function(e,a){z.transform(e,function(){var l=D.apply(this,arguments),t=this.__zoom,n=w(l),e=t.invert(n),r="function"==typeof a?a.apply(this,arguments):a;return E(d(m(t,r),n,e),l,_)})},z.translateBy=function(o,t,a){z.transform(o,function(){return E(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof a?a.apply(this,arguments):a),D.apply(this,arguments),_)})},z.translateTo=function(e,o,a){z.transform(e,function(){var l=D.apply(this,arguments),t=this.__zoom,n=w(l);return E(Go.translate(n[0],n[1]).scale(t.k).translate("function"==typeof o?-o.apply(this,arguments):-o,"function"==typeof a?-a.apply(this,arguments):-a),l,_)})},b.prototype={start:function(){return 1==++this.active&&(this.index=n.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(n.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){Oi(new Ko(z,e,this.that.__zoom),s.apply,s,[e,this.that,this.args])}},z.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:Jo(+e),z):a},z.filter=function(e){return arguments.length?(Y="function"==typeof e?e:Jo(!!e),z):Y},z.touchable=function(e){return arguments.length?(i="function"==typeof e?e:Jo(!!e),z):i},z.extent=function(e){return arguments.length?(D="function"==typeof e?e:Jo([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),z):D},z.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],z):[l[0],l[1]]},z.translateExtent=function(e){return arguments.length?(_[0][0]=+e[0][0],_[1][0]=+e[1][0],_[0][1]=+e[0][1],_[1][1]=+e[1][1],z):[[_[0][0],_[0][1]],[_[1][0],_[1][1]]]},z.constrain=function(e){return arguments.length?(E=e,z):E},z.duration=function(e){return arguments.length?(u=+e,z):u},z.interpolate=function(e){return arguments.length?(v=e,z):v},z.on=function(){var e=s.on.apply(s,arguments);return e===s?z:e},z.clickDistance=function(e){return arguments.length?(y=(e=+e)*e,z):wr(y)},z},ee.zoomIdentity=Go,ee.zoomTransform=Hl,ee.drag=function(){function x(e){e.on("mousedown.drag",g).filter(n).on("touchstart.drag",f).on("touchmove.drag",p).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(){if(!w&&T.apply(this,arguments)){var n=d("mouse",u.apply(this,arguments),Gi,this,arguments);n&&(Zi(ee.event.view).on("mousemove.drag",l,!0).on("mouseup.drag",h,!0),no(ee.event.view),Ki(),r=!1,b=ee.event.clientX,e=ee.event.clientY,n("start"))}}function l(){if(to(),!r){var o=ee.event.clientX-b,t=ee.event.clientY-e;r=s<o*o+t*t}a.mouse("drag")}function h(){Zi(ee.event.view).on("mousemove.drag mouseup.drag",null),eo(ee.event.view,r),to(),a.mouse("end")}function f(){if(T.apply(this,arguments)){var o,t,n=ee.event.changedTouches,e=u.apply(this,arguments),a=n.length;for(o=0;o<a;++o)(t=d(n[o].identifier,e,Ji,this,arguments))&&(Ki(),t("start"))}}function p(){var o,t,n=ee.event.changedTouches,e=n.length;for(o=0;o<e;++o)(t=a[n[o].identifier])&&(to(),t("drag"))}function m(){var o,t,n=ee.event.changedTouches,e=n.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),o=0;o<e;++o)(t=a[n[o].identifier])&&(Ki(),t("end"))}function d(d,i,o,u,g){var s,c,l,h=o(i,d),y=_.copy();if(Oi(new io(x,"beforestart",s,d,v,h[0],h[1],0,0,y),function(){return null!=(ee.event.subject=s=k.apply(u,g))&&(c=s.x-h[0]||0,l=s.y-h[1]||0,!0)}))return function _(t){var n,e=h;switch(t){case"start":a[d]=_,n=v++;break;case"end":delete a[d],--v;case"drag":h=o(i,d),n=v;}Oi(new io(x,t,s,d,n,h[0]+c,h[1]+l,h[0]-e[0],h[1]-e[1],y),y.apply,y,[t,u,g])}}var b,e,r,w,T=oo,u=uo,k=ao,n=so,a={},_=ti("start","drag","end"),v=0,s=0;return x.filter=function(e){return arguments.length?(T="function"==typeof e?e:ro(!!e),x):T},x.container=function(e){return arguments.length?(u="function"==typeof e?e:ro(e),x):u},x.subject=function(e){return arguments.length?(k="function"==typeof e?e:ro(e),x):k},x.touchable=function(e){return arguments.length?(n="function"==typeof e?e:ro(!!e),x):n},x.on=function(){var e=_.on.apply(_,arguments);return e===_?x:e},x.clickDistance=function(e){return arguments.length?(s=(e=+e)*e,x):wr(s)},x},ee.brush=function(){return ar(es)},ee.brushX=function(){return ar($r)},ee.brushY=function(){return ar(Kr)},ee.mouse=Gi,ee.select=Zi,ee.selection=El,ee.selectAll=function(e){return"string"==typeof e?new Bi([document.querySelectorAll(e)],[document.documentElement]):new Bi([null==e?[]:e],Xi)},ee.selectorAll=fi,ee.touch=Ji,ee}({});</script><dom-module id="device-svg" assetpath="../bower_components/webvisual-elements/device/svg-element/"><template strip-whitespace=""><style include="control-style">:host{position:relative;border-radius:inherit;-webkit-overflow-scrolling:touch;-webkit-tap-highlight-color:rgba(0,0,0,0);box-sizing:border-box;font-family:inherit;letter-spacing:normal;user-select:none !important;background-color:transparent;color:currentColor;z-index:auto;transition:background 250ms linear;}:host([opened]){pointer-events:all;}:host([fullscreen]){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);min-height:100vh;min-width:100vw;padding:0 !important;margin:0 !important;--control-bottom:8px;--control-right:16px;--control-button-distance:8px;}:host(:-webkit-full-screen){color:var(--fullscreen-color, currentColor);background-color:var(--fullscreen-background-color);}svg{border-radius:inherit;user-select:none !important;}#svgContainer{position:relative;box-sizing:border-box;width:100%;height:100%;border-radius:inherit;isolation:isolate;}#svgContainer svg{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;font-family:inherit;}text{pointer-events:none !important;letter-spacing:normal !important;stroke:none !important;cursor:default !important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;mix-blend-mode:exclusion;@apply --svg-text;}svg *{pointer-events:none;}.selectable{pointer-events:all !important;cursor:pointer;transform-origin:center center;-moz-transform-origin:50% 50%;transition:fill 250ms cubic-bezier(0.6, 0, 0.2, 1);@apply --svg-selectable;}.clicked{fill:#3852D7 !important;fill-opacity:0.25;@apply --svg-clicked;}.selected{fill-opacity:0.75;stroke-opacity:0.5 !important;@apply --svg-selected;}.exceeding{stroke:#D95656;fill-opacity:1;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;transform-origin:center center;will-change:transform;animation-name:exceeding-animation;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite;@apply --svg-exceeding;}@keyframes exceeding-animation{0%{transform:scale(1.0);}50%{fill:#D95656;transform:scale(0.8);-moz-transform:scale(1.0);}100%{transform:scale(1.0);}}icon-button:focus{opacity:1;background-color:rgba(255,255,255, 0.125);}[hidden]{display:none !important;}</style><div id="svgContainer" on-contextmenu="_resetZoom"><div id="control" class="right bottom"><icon-button title="focus" icon="filter-center-focus" on-click="_resetZoom"></icon-button><icon-button title="fullscreen" icon="[[fullscreenIcon]]" on-click="toggleFullscreen"></icon-button></div></div></template><script>class DeviceSVG extends WebvisualMixins.FetchMixin(WebvisualMixins.FullscreenMixin(Polymer.Element)){static get is(){return'device-svg'}static get properties(){return{urlPrefix:{type:String,value:'/images/'},src:{type:String},_recentSrc:{type:String},classForClicked:{type:String,value:'clicked'},classForSelected:{type:String,value:'selected'},classForExceeding:{type:String,value:'exceeding'},initial:{type:String,value:'',observer:'_initialChanged'},initiallyZoomToAll:Boolean,opened:{type:Boolean,reflectToAttribute:!0,observer:'_openedChanged'},minZoom:{type:Number,value:0.9},maxZoom:{type:Number,value:5},zoomPartition:{type:Number,value:2},selectable:{type:Object,value:function(){return{}}},currentSelectedCssSelector:{type:String,reflectToAttribute:!0,notify:!0},selectableFallback:{type:String,value:'rect,circle,path,polygon,ellipse'},multi:{type:Boolean,value:!1},multiClickable:{type:Boolean,value:!1},item:{type:Object},items:{type:Array},exceeding:{type:Array},clickEvent:{type:String,value:'item-select'},_height:{type:Number,value:0},_width:{type:Number,value:0},_mainG:{type:Object},_svg:{type:Object},_d3Zoom:{type:Object}}}static get observers(){return['_srcChanged(src)','_selectableChanged(selectable)','_selectedItemsChanged(item)','_selectedItemsChanged(items.length)','_exceedingChanged(exceeding.length)']}_openedChanged(){this.src&&(this._srcChanged(),!this._inialized&&this._initialize(),this._resetZoom())}open(a){this.setSvg(a.detail),this.opened=!0}close(){this.opened=!1}_srcChanged(a){a&&this._recentSrc!==a&&(this._recentSrc=a,this._fetch(a,'GET','include','xml').then(this._registerXML.bind(this)).catch((b)=>{console.log(a,b)}))}_registerXML(a){if(a&&a.documentElement){const b=document.importNode(a.documentElement.cloneNode(!0),!0);if(this._svg=d3.select(this.$.svgContainer).select('#main'),this._svg&&!this._svg.empty()&&this.$.svgContainer.removeChild(this._svg.node()),this.$.svgContainer.insertBefore(b,this.$.svgContainer.firstChild),this._svg=d3.select(b).attr('id','main').attr('preserveAspectRatio','xMinYMin meet').attr('height',null).attr('width',null).classed('style-scope',!0).classed('device-svg',!0),this._mainG=this._svg.select('g').attr('id','mainG'),this._mainG.selectAll('text').classed('style-scope',!0).classed('device-svg',!0),this._svg.attr('viewBox')){const a=this._svg.attr('viewBox').split(' ');this._width=a[2]-a[0],this._height=a[3]-a[1],this._ratio=this._height/this._width}this._initZoom(),this._initialize()}}_initialize(){setTimeout(()=>{this._selectableChanged(),this._selectedItemsChanged(),this._exceedingChanged()},0)}_initZoom(){this._d3Zoom=d3.zoom().scaleExtent([this.minZoom,this.maxZoom]).on('zoom',this._zoom.bind(this)),this._svg.call(this._d3Zoom)}_selectedItemsChanged(){const a=this.item,b=this.items;a&&Object.keys(a).length||b&&b.length?(!this.src&&(a&&a.svg&&a.svg.path?this.src=a.svg.path:0<b.length&&b[b.length-1].svg&&b[b.length-1].svg.path&&(this.src=b[b.length-1].svg.path)),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnSelect),this._selectSelected()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.classForSelected).classed(this.classForSelected,!1)}_exceedingChanged(){const a=this.exceeding;a&&a.length?(!this.src&&a[a.length-1].svg&&a[a.length-1].svg.path&&(this.src=a[a.length-1].svg.path),this.opened=this.src&&(this.opened||this.forceOpened||this.openOnExceed),this._selectExceeds()):this._mainG&&this._mainG.selectAll&&this._mainG.selectAll('.'+this.classForExceeding).classed(this.classForExceeding,!1)}reset(){this.opened=!1,this.set('item',{}),this.set('items',[]),this.set('exceeding',[])}_initialChanged(a){this.src&&a&&this._resetZoom()}_selectableChanged(){if(!(this._mainG&&this._mainG.node&&this.src))return;const a=this;if(this.selectable&&this.selectable.items&&Object.keys(this.selectable.items).length)for(let b in this.selectable.items)this._mainG.selectAll(this.selectable.items[b]).classed('selectable style-scope device-svg',!0).attr('title',b).on('click',function(){if(a._mainG.selectAll('.'+a.classForClicked).classed(a.classForClicked,!1),a.multiClickable){const c=(a.currentSelectedCssSelector||'').split(','),d=c.indexOf(a.selectable.items[b]);-1===d?c.push(a.selectable.items[b]):c.splice(d,1),a.currentSelectedCssSelector=c.filter((a)=>''!==a).join(',')}else a.currentSelectedCssSelector=a.currentSelectedCssSelector===a.selectable.items[b]?'':a.selectable.items[b];a.currentSelectedCssSelector?(a._mainG.selectAll(a.currentSelectedCssSelector).classed(a.classForClicked,!0),a._zoomToElement(this)):a._resetZoom()});else this._mainG.selectAll('rect,circle,path,polygon,eclipse').classed('selectable style-scope device-svg',!0).on('click',function(){a._mainG.selectAll('.'+a.classForClicked).classed(a.classForClicked,!1);const b=a._cssPath(this);if(a.multiClickable){const c=(a.currentSelectedCssSelector||'').split(','),d=c.indexOf(b);-1===d?c.push(b):c.splice(d,1),a.currentSelectedCssSelector=c.filter((a)=>''!==a).join(',')}else a.currentSelectedCssSelector=a.currentSelectedCssSelector===b?'':b;a.currentSelectedCssSelector?(a._mainG.selectAll(a.currentSelectedCssSelector).classed(a.classForClicked,!0),a._zoomToElement(this)):a._resetZoom()});this.selectable.minZoom!==void 0&&(this.minZoom=this.selectable.minZoom),this.selectable.maxZoom!==void 0&&(this.maxZoom=this.selectable.maxZoom),this.selectable.zoomPartition!==void 0&&(this.zoomPartition=this.selectable.zoomPartition),this._initZoom(),this._inialized=!0}_cssPath(a){const b=[];for(;a.nodeType===Node.ELEMENT_NODE;){let c=a.nodeName;if(a.id)c+='#'+a.id;else{let b=a;const d=[];for(;null!==b&&b.nodeType===Node.ELEMENT_NODE;)d.unshift(b.nodeName),b=this._previousElementSibling(b);'HTML'!==d[0]&&(d[0]+=':first-child'),c=d.join(' + ')}b.unshift(c),a=a.parentNode}return b.join(' > ')}_previousElementSibling(a){if('undefined'!==a.previousElementSibling)return a.previousElementSibling;for(;a=a.previousSibling;)if(1===a.nodeType)return a}_zoom(){this._mainG.attr('transform',d3.event.transform)}_zoomToElement(a){if(void 0!==a&&this._svg.node()){const b=this._calcCenterZoom(a),c=d3.zoomIdentity.translate(b.x,b.y).scale(b.k);this._svg.node().__zoom=c,this._mainG.transition(500).attr('transform',c)}}_zoomToElements(a,b){if(a&&'string'===typeof a&&(a=this._mainG.selectAll(a).classed(b,!0)),!a.empty||a.empty())return void this._resetZoom();const c=[];a.each(function(){let a=this.getBoundingClientRect();c[0]=(c[0]>a.left?a.left:c[0])||a.left,c[1]=(c[1]>a.top?a.top:c[1])||a.top,c[2]=(c[2]<a.right?a.right:c[2])||a.right,c[3]=(c[3]<a.bottom?a.bottom:c[3])||a.bottom}),this._zoomToElement({left:c[0],top:c[1],height:c[3]-c[1],width:c[2]-c[0]})}_selectSelected(){setTimeout(()=>{const a=this.multi?this.items||[]:[];this.item&&Object.keys(this.item).length&&-1===a.indexOf(this.item)&&a.push(this.item);let b;if(b=ShadyCSS&&!0===ShadyCSS.nativeShadow?this.shadowRoot.querySelector('style'):document.querySelector('style[scope="device-svg"]'),b&&a&&a.length){let c,d,e;for(let f=0;f<a.length;f++)if(a[f]&&a[f].color&&a[f].svg&&a[f].svg.selector&&b&&b.sheet&&b.sheet.cssRules&&b.sheet.insertRule){c=a[f].svg.selector.split(',');for(let g=0;g<c.length;g++){d=c[g]+'.'+this.classForSelected,e=!1;for(let a=0;a<b.sheet.cssRules.length;a++)b.sheet.cssRules[f].selectorText===d&&(e=!0);!1===e&&b.sheet.insertRule(d+' {\nfill: '+a[f].color+' !important;\n}',b.sheet.cssRules.length)}}this.updateStyles(),this.select(a,this.classForSelected)}},0)}_selectExceeds(){this.exceeding&&this.exceeding.length&&this.select(this.exceeding,this.classForExceeding)}select(a,b){if(!(this._mainG&&this._mainG.node&&this.src))return;this._mainG=this._svg.select('g'),this._mainG.selectAll('.'+b).classed(b,!1);let c;const d=[];if(Array.isArray(a)){for(let b=0;b<a.length;b++)a[b].svg&&a[b].svg.selector&&d.push(a[b].svg.selector);c=d.join(',')}else c=a&&a.svg&&a.svg.selector?a.svg.selector:'';this._zoomToElements(c,b)}_calcCenterZoom(a){var b=Math.min;const c=this.getBoundingClientRect();if(void 0===c||void 0===a||0===c.height||0===c.width)return{x:0,y:0,k:1};const d=c.height/c.width;let e,f;e=void 0===a.nodeType?a:a.getBoundingClientRect();const g=this._mainG.node().getBBox(),h=this._mainG.node().getBoundingClientRect(),i=g.width/h.width||1;let j=(e.left-h.left)*i+g.x,k=(e.top-h.top)*i+g.y;const l=this._height,m=this._width,n=this._ratio,o=this.zoomPartition;return f=d<n?b(m/(o*e.width*i*d),l/(o*e.height*i)):b(m/(o*e.width*i),m*d/(o*e.height*i)),f<this.minZoom?f=this.minZoom:f>this.maxZoom&&(f=this.maxZoom),d<n?(j=-f*j+(l/d-f*e.width*i)/2,k=-f*k+(l-f*e.height*i)/2):(j=-f*j+(m-f*e.width*i)/2,k=-f*k+(m*d-f*e.height*i)/2),isNaN(j)||isNaN(k)||isNaN(f)?{x:0,y:0,k:1}:{x:j,y:k,k:f}}notifyResize(){this._resetZoom()}_resetZoom(a){a&&(a.preventDefault(),a.stopPropagation()),setTimeout(()=>{if(this.opened&&this._mainG&&this._mainG.node&&this.src){if(this._mainG.selectAll('.'+this.classForClicked).classed(this.classForClicked,!1),!this.initiallyZoomToAll){if(this.item&&Object.keys(this.item).length||this.items&&this.items.length)return void this._selectSelected();if(this.exceeding.length)return void this._selectExceeds();if(this.initial){const a=this._mainG.selectAll(this.initial);if(!(a&&a.empty()))return void this.select([{svg:{selector:this.initial}}],'initial')}}this._zoomToElement(this._mainG.node())}},0)}}customElements.define(DeviceSVG.is,DeviceSVG);</script><dom-module></dom-module></dom-module><script>window.WebvisualMixins=window.WebvisualMixins||{},WebvisualMixins.ContainerMixin=function(a){return class extends a{constructor(){super()}static get properties(){return{isContainer:{type:Boolean,value:!0,reflectToAttribute:!0,readOnly:!0},opened:{type:Boolean,notify:!0},openOnSelect:{type:Boolean},openOnExceed:{type:Boolean},forceOpened:{type:Boolean},isExceeding:{type:Boolean,notify:!0},selectNotify:{type:Boolean},exceedNotify:{type:Boolean},multi:{type:Boolean},noAutoRemovalExceedings:{type:Boolean},autoClose:{type:Number,value:6e4},item:{type:Object,value:function(){return{}},notify:!0},items:{type:Array,value:function(){return[]},notify:!0},exceeding:{type:Array,value:function(){return[]},notify:!0}}}connectedCallback(){super.connectedCallback(),this._watchSelect(this.selectNotify,this.openOnSelect),this._watchExceed(this.exceedNotify,this.openOnExceed)}disconnectedCallback(){super.disconnectedCallback(),this._watchSelect(),this._watchExceed()}_watchSelect(a,b){a||b?(this.addEventListener('item-select',this._select),this.addEventListener('clear-selected-items',this.clearItems)):(this.removeEventListener('item-select',this._select),this.removeEventListener('clear-selected-items',this.clearItems))}_watchExceed(a,b){a||b?(this.addEventListener('exceeding',this._setExceeding),this.addEventListener('clear-exceeding-items',this.clearExceedings)):(this.removeEventListener('exceeding',this._setExceeding),this.removeEventListener('clear-exceeding-items',this.clearExceedings))}_select(a){a&&a.detail&&a.detail.item&&Object.keys(a.detail.item).length&&(!0===a.detail.value?this.select(a.detail.item):this.deselect(a.detail.item))}select(a){this.set('item',a),!0===this.multi&&-1===this.indexOf(this.items,a)&&this.push('items',a),this.opened=this.forceOpened||!!(this.openOnSelect&&(this.item||this.items&&this.items.length)||this.openOnExceed&&this.exceeding&&this.exceeding.length)}deselect(a){if(this.multi){const b=this.indexOf(this.items,a);-1!==b&&this.splice('items',b,1),0===this.items.length?this.set('item',null):-1===this.indexOf(this.items,this.item)&&this.set('item',this.items[0])}else this.set('item',null);this.opened=this.forceOpened||!!(this.openOnSelect&&(this.item||this.items&&this.items.length)||this.openOnExceed&&this.exceeding&&this.exceeding.length)}clearItems(){this.set('item',null),this.splice('items',0,this.items.length),this._activeCloseTimeout&&(clearTimeout(this._activeCloseTimeout),this._activeCloseTimeout=null),this.opened=this.forceOpened||!!(this.opened&&this.openOnExceed&&this.exceeding&&this.exceeding.length)}_setExceeding(a){a&&a.detail&&a.detail.item&&(!0===a.detail.value?this.setExceeding(a.detail.item):this.unsetExceeding(a.detail.item))}setExceeding(a){const b=this.indexOf(this.exceeding,a);-1===b&&this.push('exceeding',a),this.isExceeding=!!(0<this.exceeding.length),this._activeCloseTimeout&&(clearTimeout(this._activeCloseTimeout),this._activeCloseTimeout=null),this.opened=this.forceOpened||!!(this.openOnSelect&&(this.item||this.items&&this.items.length)||this.openOnExceed&&this.exceeding&&this.exceeding.length)}unsetExceeding(a){if(!0!==this.noAutoRemovalExceedings){const b=this.indexOf(this.exceeding,a);-1!==b&&this.splice('exceeding',b,1),this.isExceeding=!!(0<this.exceeding.length);const c=this.forceOpened||!!(this.openOnSelect&&(this.item||this.items&&this.items.length)||this.openOnExceed&&this.exceeding&&this.exceeding.length);c||(this._activeCloseTimeout&&(clearTimeout(this._activeCloseTimeout),this._activeCloseTimeout=null),this._activeCloseTimeout=setInterval(function(){this.opened=!1}.bind(this),this.autoClose||0))}}clearExceedings(){this.splice('exceeding',0,this.exceeding.length),this.isExceeding=!1,this._activeCloseTimeout&&(clearTimeout(this._activeCloseTimeout),this._activeCloseTimeout=null),this.opened=this.forceOpened||!!(this.opened&&this.openOnSelect&&(this.item||this.items&&this.items.length))}_handleExceeding(){}indexOf(a,b){if(b&&b.mount&&a&&Array.isArray(a))for(let c=0;c<a.length;c++)if(b.mount===a[c].mount)return c;return-1}}};</script><dom-module id="group-data" assetpath="data/"><script>class GroupData extends WebvisualMixins.AccessibilityMixin(WebvisualMixins.FetchMixin(Polymer.Element)){static get is(){return'group-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},room:{type:String,observer:'_load'},groupBy:{type:String,notify:!0,observer:'_groupByChanged'},groupingKeys:{type:Array,value:function(){return[]},notify:!0,observer:'_groupingKeysChanged'},groups:{type:Array,value:function(){return[]},notify:!0},subgroups:{type:Array,computed:'_computeSubGroups(groups, groupBy)',notify:!0}}}_load(){if(super._load(),!!this.room){const a=this.room.split('/').filter(function(a){return''!==a});2===a.length?(this.roomUri=a[0]+'+'+a[1],Promise.all([this._fetch(this.roomUri+'+groups.json','GET','include','json','groups'),this._fetch(this.roomUri+'+preferedGroupingKey.json','GET','include','json','groupBy'),this._fetch(this.roomUri+'+groupingKeys.json','GET','include','json','groupingKeys')]).catch((a)=>{console.log(a)})):this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Room is not defined'}))}}_computeSubGroups(a,b){if(a!==void 0||b!==void 0){let c;for(let d=0;c=a[d];++d)if(c.key===b)return c.groups}return[]}_groupingKeysChanged(a){if(!(a&&a.length))return;const b=localStorage.getItem('groupBy');setTimeout(()=>{b!==void 0&&-1!==a.indexOf(b)?this.set('groupBy',b):this.roomUri&&this._fetch(this.roomUri+'+preferedGroupingKey.json','GET','include','json','groupBy',!0).catch((a)=>{console.log(a)})},0)}_groupByChanged(a){void 0===a||(''===this.groupBy&&this.groupingKeys&&this.groupingKeys.length&&(this.groupBy=this.groupingKeys[0]),localStorage.setItem('groupBy',this.groupBy))}}customElements.define(GroupData.is,GroupData);</script></dom-module><dom-module id="svg-data" assetpath="data/"><script>class SVGData extends WebvisualMixins.AccessibilityMixin(WebvisualMixins.FetchMixin(Polymer.Element)){static get is(){return'svg-data'}static get properties(){return{urlPrefix:{type:String,value:'/data/'},room:{type:String,observer:'_load'},data:{type:Object,value:function(){return{}},notify:!0}}}_load(){if(super._load(),!!this.room){const a=this.room.split('/').filter(function(a){return''!==a});if(2===a.length){const b=a[0]+'+'+a[1]+'+svgSource.json';this._fetch(b,'GET','include','json','data').catch((a)=>{console.log(a)})}else this.dispatchEvent(new CustomEvent('data-error',{bubbles:!0,composed:!0,detail:'Failed to load svg-data'}))}}}customElements.define(SVGData.is,SVGData);</script></dom-module></body></html>