<html><head></head><body><dom-module id="page-detail"><template strip-whitespace=""><style include="shared-style selectbox-style">:host{--control-button-distance:2px;--drawer-width:16em;--drawer-background:rgba(255,255,255,0.25);--drawer-content:{padding:0;position:absolute;};}#content{display:flex;flex-direction:column;margin:0;box-sizing:border-box;position:relative;height:100%;}#control{display:block;height:100%;box-sizing:border-box;}#chart,
      #svg{max-height:50%;-webkit-flex-basis:50%;flex-basis:50%;color:var(--bright-text-color);}#svg{overflow:hidden;--control-bottom:4px;--control-right:16px;}#chart{margin:0.5em 0.5em 16px 16px;--chart-plot-background-color:#fff;--chart-plot-background-opacity:0.75;}:host([dark]) #chart{--chart-plot-background-opacity:0.2;}#chart[fullheight]{max-height:100%;-webkit-flex-basis:1px;flex-basis:1px;flex-grow:1;--chart-plot-background-opacity:0.5;}.spacer{flex:0 0 auto;padding:0.25em;}#table,
      #tabs{flex:1 0 1px;width:100%;position:relative;box-sizing:border-box;}#tabs{padding-bottom:0.1em;--highlight-color:var(--secondary-color, white);}#table{padding-top:0.1em;}#drawer{position:absolute;}:host(.fullscreen) #drawer{display:none;}.checkbox{width:100%;--checkbox-unchecked-color:var(--bright-text-color);--checkbox-checked-color:var(--primary-text-color);--checkbox-checked-background:{background-color:rgba(255, 255, 255, 0.75);border-top:thin solid rgba(0,0,0,0.2);border-left:medium solid rgba(0,0,0,0.5);};--checkbox-unchecked-background:{background-color:transparent;border-left:none;};}.caption{--caption-background:transparent;--caption-color:currentColor;}.groupbox{box-sizing:border-box;flex-shrink:0;display:inline-flex;flex-direction:row;background-color:rgba(0,0,0,0.05);border-bottom:thin solid rgba(0,0,0,0.5);transition:background-color 150ms linear;}.groupbox:hover{background-color:rgba(0,0,0,0.25);}.subgroup,
      .groupbox ::slotted(*){flex:1 0 1px;padding:0 !important;margin:0.5em !important;}.groupbox ::slotted(*){margin-right:0.25em !important;}.subgroup{margin-left:0.25em !important;}@media (max-width: 600px){#drawer{--drawer-background:rgba(255,255,255,0.33);}}@media (min-width: 601px){#content{margin-right:16em;}#drawer{right:-16em;--drawer-background:rgba(255,255,255,0.0);}}</style><iron-media-query query="(max-width: 600px)" query-matches="{{narrowLayout}}"></iron-media-query><svg-data hidden="" room="[[room]]" logged-in="[[loggedIn]]" data="{{svgData}}"></svg-data><div id="content"><template is="dom-if" if="[[_withSvg]]"><device-svg id="svg" opened$="[[visible]]" url-prefix="/images" src="[[_svgSrcPath]]" selectable-items="[[_getSvgSelectable(item.svg.path, svgData)]]" item="[[item]]" items="[[items]]" multi="" exceeding="[[exceeding]]"></device-svg></template><device-chart id="chart" opened$="[[visible]]" fullheight$="[[!_withSvg]]" items="[[items]]" multi=""></device-chart><drawer-element id="drawer" opened$="[[_ensureOpened(narrowLayout)]]" swipe-open$="[[narrowLayout]]" scrim="" persistent$="[[!narrowLayout]]" align="right" stretch=""><div class="groupbox"><slot name="groupby"></slot><div class="selectbox subgroup" title="[[selectedSubgroup]]"><select value="{{selectedSubgroup::change}}"></select></div></div><tabs-container id="tabs" multi="" vertical="" items="{{checkboxes}}" selected-items="{{selectedCheckboxes}}" attr-for-selected="id" activate-event="item-select"><template id="tablist" is="dom-repeat" items="[[_shownElements]]"><device-checkbox class="checkbox" id="[[item.id]]" item="[[item]]" selectable=""><device-caption class="caption" keys="[[item.keys]]"></device-caption></device-checkbox></template></tabs-container><device-table-group id="table" items="[[items]]" selected-mount="[[item.mount]]" hidden$="[[nothingSelected]]"></device-table-group></drawer-element></div></template><script>class PageDetail extends Polymer.mixinBehaviors([Polymer.IronResizableBehavior],WebvisualMixins.ContainerMixin(Polymer.Element)){static get is(){return'page-detail'}static get properties(){return{selectedIds:{type:String,notify:!0},checkboxes:{type:Array,notify:!0},subgroups:{type:Array,notify:!0},selectedSubgroup:{type:String,value:''},selectedCheckboxes:{type:Array,notify:!0},loggedIn:{type:Boolean},_shownElements:{type:Array,value:function(){return[]}},elements:{type:Array,value:function(){return[]}},room:{type:String,notify:!0},multi:{type:Boolean,value:!0},svgData:{type:Object},visible:{type:Boolean,notify:!0,observer:'_visibleChanged'},_withSvg:{type:Boolean,computed:'_hasSvg(_svgSrcPath, visible)'},_svgSrcPath:{type:Boolean,computed:'_computeSvgSrcPat(room, item, svgData)'},selectNotify:{type:Boolean,value:!0},exceedNotify:{type:Boolean,value:!0},narrowLayout:{type:Boolean,value:!1,notify:!0},showToggleIcon:{type:Boolean,notify:!0,computed:'_computeShowToggleIcon(narrowLayout, visible)'},nothingSelected:{type:Boolean,notify:!0,computed:'_computeNothingSelected(items.length)'}}}static get observers(){return['_selectedIdsChanged(selectedIds, checkboxes, visible)','_selectedCheckboxesChanged(selectedCheckboxes, checkboxes, visible)','_subgroupsChanged(subgroups)','_selectedSubgroupChanged(selectedSubgroup, subgroups, elements)']}connectedCallback(){super.connectedCallback(),this._debounceResize()}_selectedIdsChanged(a,b,d){if(void 0!==a&&void 0!==b&&d){a=a||'';var e=a.split('/').filter(f=>{return b.some(g=>{return g.id===f})});b.forEach(f=>{-1!==e.indexOf(f.id)&&(f.checked=!0)})}}_selectedCheckboxesChanged(a,b,d){if(d&&void 0!==a&&void 0!==b&&0!==b.length){var e=a.map(k=>{return k.id}),f=e.join('/');f!==this.selectedIds&&this.set('selectedIds',f);var g=this.items.length,h=this.indexOf(this.items,this.item);this.items=this.items.filter(k=>{return-1!==e.indexOf(k.id)}),g!==this.items.length&&setTimeout(()=>{var k=this.indexOf(this.items,this.item);0===this.items.length||-1===k?this.set('item',null):h!==k&&this.set('item',this.items[k]),this.notifyPath('items')},0)}}_subgroupsChanged(a){var b=Polymer.dom(this.root).querySelector('.selectbox.subgroup'),d=a.map(f=>{return f.title}),e=b.querySelector('select');if(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild);d.forEach(function(f){var g=document.createElement('option');g.textContent=f,g.value=f,Polymer.dom(e).appendChild(g)}),e.value=''}this._selectedSubgroupChanged(this.selectedSubgroup,this.subgroups,this.elements)}_selectedSubgroupChanged(a,b,d){if(b&&b.length&&void 0!==d){a=a||'';for(var e,f=0;f<b.length;f++)if(b[f].title===a){e=b[f];break}var g=[];e=e||b[b.length-1];for(var f=0;f<e.items.length;f++)for(var h=0;h<d.length;h++)if(d[h].id===e.items[f]){g.push(d[h]);break}setTimeout(()=>{this.clearItems(),this.set('_shownElements',g)},0)}}_hasSvg(a,b){var d=!!(a&&b);return d!==this._withSvg&&this._debounceResize(),d}_computeSvgSrcPat(a,b,d){var e='';return a&&b&&b.svg&&b.svg.path&&d&&d[b.svg.path]&&(e='/'+a+'/'+b.svg.path),e}_getSvgSelectable(a,b){return b[a]||{}}_ensureOpened(){return!0}_computeShowToggleIcon(a,b){return a&&b}_computeNothingSelected(a){return!a}toggleControlDrawer(){this._drawer||(this._drawer=this.$$('#drawer')),this._drawer&&this._drawer.toggle()}_fireResize(){this.dispatchEvent(new CustomEvent('iron-resize',{bubbles:!1,composed:!0,node:this}))}_debounceResize(){setTimeout(()=>{this.narrowLayout&&(!this._drawer&&(this._drawer=this.$$('#drawer')),this._drawer&&(this._drawer.opened=!0)),this.notifyResize()},0)}_visibleChanged(a){if(!0===a)this._debounceResize(),this._selectedSubgroupChanged(this.selectedSubgroup,this.subgroups,this.elements);else if(!1===a){this.selectedCheckboxes.forEach(e=>{e.select(!1)}),this.clearExceedings(),this.clearItems(),this.room=void 0,this.set('_shownElements',[]);var b=Polymer.dom(this.root).querySelector('.selectbox.subgroup'),d=b.querySelector('select');if(d)for(;d.hasChildNodes();)d.removeChild(d.lastChild)}}clearItems(){if(this.selectedCheckboxes)for(var a=0;a<this.selectedCheckboxes.length;a++)!0===this.selectedCheckboxes[a].checked&&(this.selectedCheckboxes[a].checked=!1);if(this.checkboxes)for(var a=0;a<this.checkboxes.length;a++)!0===this.checkboxes[a].checked&&(this.checkboxes[a].checked=!1);this.set('selectedCheckboxes',[]),super.clearItems()}}customElements.define(PageDetail.is,PageDetail);</script></dom-module></body></html>