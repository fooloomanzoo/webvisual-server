<script>
  window.WebvisualBehaviors = window.WebvisualBehaviors || {};

    /**
     * Behavior that adds select events and checked attributes
     *
     * @polymerBehavior
     */

  WebvisualBehaviors.CheckedAndSelectBehavior = {

    properties: {

      selectable: Boolean,

      checked: {
        type: Boolean,
        value: false,
        reflectToAttribute: true,
        notify: true,
        observer: 'checkedChanged'
      },

      toggles: {
        type: Boolean,
        value: true
      },

      selectEvent: {
        type: String,
        value: 'item-select'
      }

    },

    checkedChanged: function(checked, old) {
      if (this.selectable) {
        this.dispatchEvent(new CustomEvent(this.selectEvent, {detail: { item: this.item, value: checked }}), {bubbles: true});
      }
    },

    select: function() {
      if (this.selectable === true) {
        if (this.toggles === true) {
          if (this.checked === true) {
            this.checked = false;
          } else {
            this.checked = true;
          }
        } else {
          this.checked = true;
        }
      }
    }
  };
</script>
