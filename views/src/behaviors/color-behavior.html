<script>
  window.WebvisualBehaviors = window.WebvisualBehaviors || {};

  /**
   * Behavior that sets a custum Element-Color
   *
   * @polymerBehavior
   */

  WebvisualBehaviors.ColorBehavior = {

    observers: [
      'setColor(item.color)'
    ],

    setColor: function(color) {
      // random color if color is not set
      if (color !== undefined) {
        this.updateStyles({'--device-color': color || null});
        if (!this.item.isIndicatorLamp ) {
          this.updateStyles({'--device-state-inrange-color': color || null});
        } else {
          this.updateStyles({'--device-state-inrange-color': null});
        }
      }
      this.updateStyles();
    },

    resetColor: function() {
      this.setColor( this.item ? this.item.color || '' : '' );
    },

    getComputedStyleValue: function(property) {
      if (window.ShadyCSS) {
        return ShadyCSS.getComputedStyleValue(this, property);
      } else {
        return getComputedStyle(this).getPropertyValue(property);
      }
    }
  };
</script>
