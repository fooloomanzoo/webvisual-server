<script>
  ColorBehavior = {

    observers: [
      'setColor(item.color)'
    ],

    setColor: function(color) {
      // random color if color is not set
      if (!color) {
        if (this.item && this.item.exceedable === true) {
          this.customStyle['--element-state-inrange-color'] = "#51CC41";
          this.set('item.color', this.customStyle['--element-state-undefined-color']);
        } else {
          color = '#';
          var perm = ['2C', 'F5'];
          perm.push((4 * Math.floor(Math.random() * 64)).toString(16));
          for (var i = 3; i > 0; i--) {
            var pos = Math.floor(Math.random() * i);
            color += ((perm[pos].length === 1) ? '0' : '') + perm[pos];
            perm.splice(pos, 1);
          }
          this.set('item.color', color);
        }
      } else {
        this.customStyle['--element-color'] = color;
        if (this.item && this.item.exceedable === false) {
          this.customStyle['--element-state-undefined-color'] = color;
          this.customStyle['--element-state-exceeds-color'] = color;
          this.customStyle['--element-state-deceeds-color'] = color;
        }
        this.updateStyles();
      }
    }
  };
</script>
